<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘é€šè¿‡æ–‡å­—æ£€ç´¢è§†é¢‘ç‰‡æ®µï¼šVCEDä¹‹æ‹“å±•ä¼˜åŒ–</title>
    <link href="/2022/11/27/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED%E4%B9%8B%E6%8B%93%E5%B1%95%E4%BC%98%E5%8C%96/"/>
    <url>/2022/11/27/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED%E4%B9%8B%E6%8B%93%E5%B1%95%E4%BC%98%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<p>æœ¬ç¯‡æ–‡ç« æ˜¯è·¨æ¨¡æ€æ£€ç´¢å·¥å…· VCED ä»‹ç»çš„ç¬¬å…­ç¯‡ã€‚ä»‹ç»å®Œ VCED çš„æ ¸å¿ƒæœºåˆ¶ä¸å‰åç«¯ï¼Œæœ¬æ¬¡è®°å½•ä¸‹å¯ä»¥ä¼˜åŒ–çš„ç‚¹ã€‚</p><!--more---><h2 id="1-ç›®å‰å‘é‡æ£€ç´¢ä½¿ç”¨çš„æ˜¯æœ€ç®€å•çš„æš´åŠ›æœç´¢ï¼Œæ‰€ä»¥å‘é‡æ£€ç´¢èŠ±è´¹çš„æ—¶é—´å¾ˆæ…¢ï¼Œè¿™é‡Œå¯ä»¥ä¼˜åŒ–æˆä»¥-Faiss-å®ç°çš„é«˜æ€§èƒ½æ£€ç´¢åº“ï¼›"><a href="#1-ç›®å‰å‘é‡æ£€ç´¢ä½¿ç”¨çš„æ˜¯æœ€ç®€å•çš„æš´åŠ›æœç´¢ï¼Œæ‰€ä»¥å‘é‡æ£€ç´¢èŠ±è´¹çš„æ—¶é—´å¾ˆæ…¢ï¼Œè¿™é‡Œå¯ä»¥ä¼˜åŒ–æˆä»¥-Faiss-å®ç°çš„é«˜æ€§èƒ½æ£€ç´¢åº“ï¼›" class="headerlink" title="1. ç›®å‰å‘é‡æ£€ç´¢ä½¿ç”¨çš„æ˜¯æœ€ç®€å•çš„æš´åŠ›æœç´¢ï¼Œæ‰€ä»¥å‘é‡æ£€ç´¢èŠ±è´¹çš„æ—¶é—´å¾ˆæ…¢ï¼Œè¿™é‡Œå¯ä»¥ä¼˜åŒ–æˆä»¥ Faiss å®ç°çš„é«˜æ€§èƒ½æ£€ç´¢åº“ï¼›"></a>1. ç›®å‰å‘é‡æ£€ç´¢ä½¿ç”¨çš„æ˜¯æœ€ç®€å•çš„æš´åŠ›æœç´¢ï¼Œæ‰€ä»¥å‘é‡æ£€ç´¢èŠ±è´¹çš„æ—¶é—´å¾ˆæ…¢ï¼Œè¿™é‡Œå¯ä»¥ä¼˜åŒ–æˆä»¥ Faiss å®ç°çš„é«˜æ€§èƒ½æ£€ç´¢åº“ï¼›</h2><p>Faissæ˜¯Facebook AIå›¢é˜Ÿå¼€æºçš„é’ˆå¯¹èšç±»å’Œç›¸ä¼¼æ€§æœç´¢åº“ï¼Œä¸ºç¨ å¯†å‘é‡æä¾›é«˜æ•ˆç›¸ä¼¼åº¦æœç´¢å’Œèšç±»ï¼Œæ”¯æŒåäº¿çº§åˆ«å‘é‡çš„æœç´¢ã€‚Faissç”¨C++ç¼–å†™ï¼Œå¹¶æä¾› Numpy é£æ ¼çš„ Python æ¥å£ã€‚</p><p>ä¸ºäº†å®ç° Faiss çš„é«˜æ•ˆæ£€ç´¢åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦æ”¹å†™ SimpleIndexer ç±»ï¼š</p><p>ç´¢å¼•åˆå§‹åŒ–æ—¶ï¼Œé»˜è®¤æ˜¯ä»æœ¬åœ° sqlite ä¸­è¿›è¡Œè¯»å–ï¼Œå¯ä»¥æ›´æ”¹ä¸ºä»¥ä¸‹è¯»å–æ–¹æ³•ï¼š</p><pre><code class="lang-py">if cls is DocumentArray:    if storage == &#39;memory&#39;:        from docarray.array.memory import DocumentArrayInMemory        instance = super().__new__(DocumentArrayInMemory)    elif storage == &#39;sqlite&#39;:        from docarray.array.sqlite import DocumentArraySqlite        instance = super().__new__(DocumentArraySqlite)    elif storage == &#39;annlite&#39;:        from docarray.array.annlite import DocumentArrayAnnlite        instance = super().__new__(DocumentArrayAnnlite)    elif storage == &#39;weaviate&#39;:        from docarray.array.weaviate import DocumentArrayWeaviate        instance = super().__new__(DocumentArrayWeaviate)    elif storage == &#39;qdrant&#39;:        from docarray.array.qdrant import DocumentArrayQdrant        instance = super().__new__(DocumentArrayQdrant)    elif storage == &#39;elasticsearch&#39;:        from docarray.array.elastic import DocumentArrayElastic        instance = super().__new__(DocumentArrayElastic)    elif storage == &#39;redis&#39;:        from .redis import DocumentArrayRedis        instance = super().__new__(DocumentArrayRedis)    else:        raise ValueError(f&#39;storage=`&#123;storage&#125;` is not supported.&#39;)</code></pre><p>åœ¨ Faiss é‡Œæœ‰ä¸åŒçš„ç´¢å¼•ç±»å‹å¯ä¾›é€‰æ‹©ï¼š</p><p>IndexFlatL2ã€IndexFlatIPã€IndexHNSWFlatã€IndexIVFFlatã€IndexLSHã€IndexScalarQuantizerã€IndexPQã€IndexIVFScalarQuantizerã€IndexIVFPQã€IndexIVFPQRç­‰ã€‚</p><h2 id="2-ç›®å‰è·¨æ¨¡æ€æ¨¡å‹è¿™é‡Œä½¿ç”¨äº†æ¯”è¾ƒå¤§ä¼—çš„æ¨¡å‹ï¼Œæ–‡æœ¬ä¸è§†é¢‘çš„åŒ¹é…åº¦æœ‰å¾…æå‡ï¼Œè¿™é‡Œå¯ä»¥ä¼˜åŒ–æˆæ›´åŠ ä¼˜ç§€çš„æ¨¡å‹ï¼›"><a href="#2-ç›®å‰è·¨æ¨¡æ€æ¨¡å‹è¿™é‡Œä½¿ç”¨äº†æ¯”è¾ƒå¤§ä¼—çš„æ¨¡å‹ï¼Œæ–‡æœ¬ä¸è§†é¢‘çš„åŒ¹é…åº¦æœ‰å¾…æå‡ï¼Œè¿™é‡Œå¯ä»¥ä¼˜åŒ–æˆæ›´åŠ ä¼˜ç§€çš„æ¨¡å‹ï¼›" class="headerlink" title="2. ç›®å‰è·¨æ¨¡æ€æ¨¡å‹è¿™é‡Œä½¿ç”¨äº†æ¯”è¾ƒå¤§ä¼—çš„æ¨¡å‹ï¼Œæ–‡æœ¬ä¸è§†é¢‘çš„åŒ¹é…åº¦æœ‰å¾…æå‡ï¼Œè¿™é‡Œå¯ä»¥ä¼˜åŒ–æˆæ›´åŠ ä¼˜ç§€çš„æ¨¡å‹ï¼›"></a>2. ç›®å‰è·¨æ¨¡æ€æ¨¡å‹è¿™é‡Œä½¿ç”¨äº†æ¯”è¾ƒå¤§ä¼—çš„æ¨¡å‹ï¼Œæ–‡æœ¬ä¸è§†é¢‘çš„åŒ¹é…åº¦æœ‰å¾…æå‡ï¼Œè¿™é‡Œå¯ä»¥ä¼˜åŒ–æˆæ›´åŠ ä¼˜ç§€çš„æ¨¡å‹ï¼›</h2><p>TBC</p><h2 id="3-ç›®å‰-VCED-é¡¹ç›®ä»…èƒ½å¤Ÿå¤„ç†å¯¹å•ä¸ªè§†é¢‘çš„æ£€ç´¢ï¼Œéœ€è¦å¯¹é¡¹ç›®æ”¹é€ æ¥å®ç°å¯¹å¤šä¸ªè§†é¢‘ç‰‡æ®µçš„æ£€ç´¢ã€‚"><a href="#3-ç›®å‰-VCED-é¡¹ç›®ä»…èƒ½å¤Ÿå¤„ç†å¯¹å•ä¸ªè§†é¢‘çš„æ£€ç´¢ï¼Œéœ€è¦å¯¹é¡¹ç›®æ”¹é€ æ¥å®ç°å¯¹å¤šä¸ªè§†é¢‘ç‰‡æ®µçš„æ£€ç´¢ã€‚" class="headerlink" title="3. ç›®å‰ VCED é¡¹ç›®ä»…èƒ½å¤Ÿå¤„ç†å¯¹å•ä¸ªè§†é¢‘çš„æ£€ç´¢ï¼Œéœ€è¦å¯¹é¡¹ç›®æ”¹é€ æ¥å®ç°å¯¹å¤šä¸ªè§†é¢‘ç‰‡æ®µçš„æ£€ç´¢ã€‚"></a>3. ç›®å‰ VCED é¡¹ç›®ä»…èƒ½å¤Ÿå¤„ç†å¯¹å•ä¸ªè§†é¢‘çš„æ£€ç´¢ï¼Œéœ€è¦å¯¹é¡¹ç›®æ”¹é€ æ¥å®ç°å¯¹å¤šä¸ªè§†é¢‘ç‰‡æ®µçš„æ£€ç´¢ã€‚</h2><p>TBC</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VCED</tag>
      
      <tag>multimodal</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘æœºå™¨å­¦ä¹ ä¹‹XGBoostã€LightGBMã€CatBoost</title>
    <link href="/2022/11/27/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8BXGBoost%E3%80%81LightGBM%E3%80%81CatBoost/"/>
    <url>/2022/11/27/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8BXGBoost%E3%80%81LightGBM%E3%80%81CatBoost/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¼šè®°å½• XGBoostã€LightGBMã€CatBoost çš„åŸç†ã€åŒºåˆ«å’Œä½¿ç”¨æ–¹æ³•ã€‚</p><!--more---><h2 id="XGBoost"><a href="#XGBoost" class="headerlink" title="XGBoost"></a>XGBoost</h2><p>XGBoost æ˜¯ GBDT ç®—æ³•çš„ä¸€ç§é«˜æ•ˆå®ç°æ–¹å¼ã€‚</p><h3 id="XGBoost-çš„åŸç†"><a href="#XGBoost-çš„åŸç†" class="headerlink" title="XGBoost çš„åŸç†"></a>XGBoost çš„åŸç†</h3><p>åŸå§‹çš„ GBDT ç®—æ³•åŸºäºç»éªŒæŸå¤±å‡½æ•°çš„è´Ÿæ¢¯åº¦æ¥æ„é€ æ–°çš„å†³ç­–æ ‘ï¼Œæ„é€ å®Œæˆåå†è¿›è¡Œåå‰ªæã€‚XGBoost æ·»åŠ äº†é¢„å‰ªææ“ä½œï¼Œå®ƒåœ¨ç›®æ ‡å‡½æ•°ä¸­æ·»åŠ äº†æ­£åˆ™é¡¹ã€‚</p><script type="math/tex; mode=display">L_t=\sum_i L(y_i, F_{t-1}(x_i)+f_t(x_i)) + \Omega(f_t)</script><p>å…¶ä¸­ï¼š</p><script type="math/tex; mode=display">\Omega(f_t)=\gamma T+\frac{1}{2}\lambda \sum_{j=1}^{T}w_{j}^2</script><p>å…¶ä¸­ T ä¸ºè¿™æ£µæ ‘çš„å¶å­ç»“ç‚¹ä¸ªæ•°ï¼Œ$w_j$è¡¨ç¤ºç¬¬ j ä¸ªå¶å­ç»“ç‚¹çš„é¢„æµ‹å€¼ã€‚è¿™æ˜¯ä¸€ä¸ªæ­£åˆ™é¡¹ï¼Œè¯¥å€¼èƒ½å¤Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šä»£è¡¨ä¸€æ£µæ ‘çš„å¤æ‚ç¨‹åº¦ã€‚å› æ­¤åœ¨å»ºæ ‘æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒæ•´è¶…å‚æ•°ï¼Œè¾¾åˆ°é¢„å‰ªæçš„æ•ˆæœï¼Œ $\gamma$ è¶Šå¤§åˆ™ä¸å®¹æ˜“åˆ†å‰ï¼Œè¾ƒå°åˆ™å®¹æ˜“åˆ†å‰ã€‚XGBoost æ·»åŠ æ­¤é¡¹çš„ç›®çš„åœ¨äºæ§åˆ¶ä¸è¦ç”Ÿæˆè¿‡äºå¤æ‚çš„å­æ ‘ç»“æ„ã€‚</p><p>è¦æƒ³ä¼˜åŒ–è¯¥ç›®æ ‡å‡½æ•°ï¼Œä½†æ˜¯ f æœ¬èº«ä¸æ˜¯æ•°å€¼å‹çš„å‡½æ•°ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨æ¢¯åº¦ä¸‹é™è¿›è¡Œä¼˜åŒ–ã€‚å› æ­¤åœ¨è¿™é‡Œå¯¹æŸå¤±å‡½æ•°è¿›è¡ŒäºŒé˜¶æ³°å‹’å±•å¼€ï¼Œç”¨ä½œå‡½æ•°çš„è¿‘ä¼¼ï¼š</p><script type="math/tex; mode=display">\begin{aligned}L_t &=\sum_i L(y_i, F_{t-1}(x_i)+f_t(x_i)) + \Omega(f_t) \\&= \sum_i [L(y_i, F_{t-1}(x_i)) + g_if_t(x_i) + \frac{1}{2}h_if_t^2(x_i)] + \Omega(f_t)\end{aligned}</script><p>å…¶ä¸­ $ g<em>i=\frac{\partial L(y_i, F</em>{t-1}(x<em>i))}{\partial F</em>{t-1}(x<em>i)} $ï¼Œ$ h_i=\frac{\partial^2 L(y_i, F</em>{t-1}(x<em>i))}{\partial^2 F</em>{t-1}(x_i)} $ï¼Œåˆ†åˆ«ä¸ºf çš„ä¸€é˜¶å¯¼æ•°å’ŒäºŒé˜¶å¯¼æ•°</p><p>å¯¹ç¬¬ t æ¬¡è¿­ä»£æ¥è¯´ï¼Œ$ L(y<em>i, F</em>{t-1}(x_i)) $ æ˜¯ä¸ªå¸¸æ•°ï¼Œå› æ­¤ç›®æ ‡å‡½æ•°å¯è¿›ä¸€æ­¥ç®€åŒ–ä¸ºï¼š</p><script type="math/tex; mode=display">L_t=\sum_i [g_if_t(x_i) + \frac{1}{2}h_if_t^2(x_i)] + \Omega(f_t)</script><p>è¿™æ ·åšï¼Œåªéœ€çŸ¥é“æ¯ä¸ªæ ·æœ¬çš„æŸå¤±å‡½æ•°çš„ä¸€é˜¶å¯¼æ•°ã€äºŒé˜¶å¯¼æ•°ï¼Œæ¯ä¸ªæ ·æœ¬åœ¨ç¬¬ t ä¸ªåˆ†ç±»å™¨çš„é¢„æµ‹ç»“æœï¼Œå¶å­ç»“ç‚¹çš„ä¸ªæ•°ï¼Œå¶å­ç»“ç‚¹çš„è¾“å‡ºå€¼ï¼Œå°±çŸ¥é“ç¬¬ t æ­¥çš„æŸå¤±å‡½æ•°å€¼äº†ã€‚</p><p>ä¸Šé¢çš„å…¬å¼ï¼Œæœ‰ä¸¤ä¸ª $\sum$ ï¼Œåœ¨æ•°å­¦ä¸Šä¸å¥½å¤„ç†ï¼šå·¦è¾¹çš„ $\sum$ æ˜¯é€æ ·æœ¬ç´¯åŠ ï¼Œå³è¾¹çš„ $\sum$ æ˜¯é€å¶å­ç´¯åŠ ï¼Œéœ€è¦æŠŠä»–ä»¬åˆå¹¶èµ·æ¥ã€‚</p><p>å¦‚æœæˆ‘ä»¬æŠŠæŸä¸ªå¶å­ç»“ç‚¹ j ä¸Šé¢æ‰€æœ‰æ ·æœ¬çš„æŸå¤±å‡½æ•°çš„ä¸€é˜¶å¯¼æ•°ä¹‹å’Œè®°ä½œ Gï¼ŒäºŒé˜¶å¯¼æ•°ä¹‹å’Œè®°ä½œ Hï¼Œåˆ™ä¸Šå¼å¯ç®€åŒ–ã€‚å…·ä½“åœ°ï¼Œå¦‚æœå¶å­ç»“ç‚¹ j ä¸Šé¢çš„æ ·æœ¬é›†åˆä¸º $I_j={q(x_i)=j}$ ï¼ˆq(x) æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œèƒ½è¾“å…¥ä¸€ä¸ªæ ·æœ¬ï¼Œè¾“å‡ºè¯¥æ ·æœ¬åœ¨æ ‘ä¸Šçš„èŠ‚ç‚¹çš„ä¸‹æ ‡ï¼‰ï¼Œåˆ™ Gã€H çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">G_j=\sum_{i\in I_j}g_i \\H_j=\sum_{i\in I_j}h_i</script><p>ç„¶åæˆ‘ä»¬ä½¿ç”¨å¦‚ä¸‹å˜æ¢ï¼š</p><script type="math/tex; mode=display">\begin{aligned}L_t&=\sum_{i=1}^{N} [g_if_t(x_i) + \frac{1}{2}h_if_t^2(x_i)] + \gamma T + \frac{1}{2}\lambda\sum^{T}_{j=1}w^2_j \\&=\sum_{i=1}^N [g_iw_{q(x_i)}+\frac{1}{2}h_iw^2_{q(x_i)}] + \gamma T + \frac{1}{2}\lambda\sum^{T}_{j=1}w^2_j \\&=\sum_{j=1}^T [\sum_{i\in I_j}g_iw_j+\frac{1}{2}\sum_{i\in I_j}h_iw_j^2] + \gamma T + \frac{1}{2}\lambda\sum^{T}_{j=1}w^2_j \\&=\sum_{j=1}^T(G_jw_j+\frac{1}{2}(H_j+\lambda)w_j^2)+\gamma T\end{aligned}</script><p>è¿™å°±æ˜¯ç›®æ ‡å‡½æ•°çš„æœ€ç»ˆç»“æœã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿä¼˜åŒ–è¯¥ç›®æ ‡å‡½æ•°ï¼Œè®¡ç®—ç¬¬ t è½®æ—¶ä½¿ç›®æ ‡å‡½æ•°æœ€å°çš„å¶èŠ‚ç‚¹çš„è¾“å‡ºåˆ†æ•° wã€‚æˆ‘ä»¬ç›´æ¥å¯¹ w è¿›è¡Œæ±‚å¯¼å¹¶ä»¤å¯¼æ•°ä¸º 0ï¼Œæ­¤æ—¶çš„ w ä¸ºï¼š</p><script type="math/tex; mode=display">w_j=-\frac{G_j}{H_j+\lambda}</script><p>æœ€ç»ˆå¾—åˆ°æŸå¤±å‡½æ•°å½¢å¼ï¼š</p><script type="math/tex; mode=display">L_t=-\frac{1}{2}\sum_{j=1}^T (\frac{G^2_j}{H_j + \lambda}) + \gamma T</script><p>è¯¥å€¼è¶Šå°ï¼Œç›®æ ‡å‡½æ•°è¶Šå°ã€‚</p><p>XGBoost åœ¨åˆ†è£‚æ—¶ï¼Œä¼šéå†è¯¥ç‰¹å¾çš„æ‰€æœ‰å–å€¼ï¼Œå°è¯•è®¡ç®—åˆ†è£‚å‰çš„æŸå¤±å’Œåˆ†è£‚åçš„æŸå¤±ã€‚</p><script type="math/tex; mode=display">\text{Gain}=\frac{1}{2}[\frac{G^2_L}{H_L + \lambda}+\frac{G^2_R}{H_R + \lambda}-\frac{(G_L + G_R)^2}{H_L + H_R + \lambda}] - \gamma</script><p>å…¶ä¸­ç¬¬ä¸€é¡¹æ˜¯å·¦å­æ ‘åˆ†æ•°ï¼Œç¬¬äºŒé¡¹æ˜¯å³å­æ ‘åˆ†æ•°ï¼Œç¬¬ä¸‰é¡¹æ˜¯åˆ†è£‚å‰çš„åˆ†æ•°ï¼Œæœ€åçš„ gamma æ˜¯æ–°å¶å­ç»“ç‚¹çš„å¤æ‚åº¦ã€‚</p><p>gain å€¼è¶Šå¤§ï¼Œè¯´æ˜åˆ†è£‚åèƒ½å¤Ÿæ›´å¤šåœ°è®©æŸå¤±å‡½æ•°å‡å°ï¼Œä¹Ÿå°±æ˜¯è¶Šå¥½ã€‚</p><h3 id="XGBoost-è‡ªå®šä¹‰æŸå¤±å‡½æ•°"><a href="#XGBoost-è‡ªå®šä¹‰æŸå¤±å‡½æ•°" class="headerlink" title="XGBoost è‡ªå®šä¹‰æŸå¤±å‡½æ•°"></a>XGBoost è‡ªå®šä¹‰æŸå¤±å‡½æ•°</h3><p>XGBoost èƒ½å¤Ÿè§£å†³äºŒå…ƒåˆ†ç±»ã€å¤šå…ƒåˆ†ç±»ã€å›å½’é—®é¢˜ã€‚å¯¹äºäºŒå…ƒåˆ†ç±»é—®é¢˜ï¼Œæœ€ç»ˆçš„é¢„æµ‹å€¼ä¼šç»è¿‡ sigmoid å‡½æ•°åæ¯”è¾ƒè¾“å‡ºä¸ 0 æˆ– 1 çš„æ¥è¿‘ç¨‹åº¦ï¼›å¯¹äºå¤šå…ƒåˆ†ç±»é—®é¢˜ï¼Œæœ€ç»ˆçš„é¢„æµ‹å€¼ä¼šç»è¿‡ softmax å‡½æ•°åå¾—åˆ°æŸä¸€ç±»å‹çš„æœ€å¤§æ¦‚ç‡ï¼Œè¾“å‡ºæŸä¸€ç±»å‹çš„å€¼ã€‚</p><p>äºŒå…ƒåˆ†ç±»å™¨çš„ç›®æ ‡å‡½æ•°ï¼š</p><script type="math/tex; mode=display">sigmoid=\frac{1}{1+e^{-x}}</script><pre><code class="lang-py">def sigmoid(x):    return 1.0 / 1 + np.exp(-x)</code></pre><p>æŸå¤±å‡½æ•°ï¼š</p><script type="math/tex; mode=display">logloss=-(y\log(p)+(1-y)\log(1-p))</script><p>å°†æŸå¤±å‡½æ•°ä»£å…¥ sigmoidï¼š</p><script type="math/tex; mode=display">logloss(y_i,\hat{y_i})=(y\ln(1+e^{-\hat{y_i}})+(1-y_i)\ln(1+e^{\hat{y_i}}))</script><p>æŸå¤±å‡½æ•°çš„ä¸€é˜¶å¯¼æ•°å’ŒäºŒé˜¶å¯¼æ•°ï¼š</p><script type="math/tex; mode=display">g_i=p_i^{t-1}-y_i \\h_i=p^{t-1}_i (1-p^{t-1}_i)</script><p>å¤šå…ƒåˆ†ç±»å™¨çš„ç›®æ ‡å‡½æ•°ï¼š</p><script type="math/tex; mode=display">\text{softmax}=\frac{e^{\hat{y_i}}}{\sum_j e^{\hat{y_i}}}</script><pre><code class="lang-py">def softmax(x):    e = np.exp(x)    return e / np.sum(e)</code></pre><p>æŸå¤±å‡½æ•°ï¼š</p><script type="math/tex; mode=display">logloss=-\frac{1}{N}\sum_{i=1}^N\sum_{j=1}^M y_{ij}\log(p_{i,j})</script><p>å…¶ä¸­ N ä¸ºæ ·æœ¬æ•°ï¼ŒM ä¸ºç±»åˆ«æ•°ã€‚ $y<em>{ij}$ ä»£è¡¨ç¬¬ i ä¸ªæ ·æœ¬åˆ†ç±»ä¸º j æ—¶åˆ™ä¸º 1ï¼Œå¦åˆ™ä¸º 0ï¼› $p</em>{i,j}$ ä»£è¡¨ç¬¬ i ä¸ªæ ·æœ¬è¢«é¢„æµ‹ä¸ºç¬¬ j ç±»çš„æ¦‚ç‡ã€‚</p><p>æŸå¤±å‡½æ•°çš„ä¸€é˜¶å¯¼æ•°å’ŒäºŒé˜¶å¯¼æ•°ï¼Œå…¶æ•´ä½“å½¢å¼ä»ä¸äºŒåˆ†ç±»ä¸€è‡´.</p><p>å¦‚æœæˆ‘ä»¬æƒ³è‡ªå®šä¹‰æŸå¤±å‡½æ•°ï¼Œæ¯”å¦‚åœ¨äºŒåˆ†ç±»é—®é¢˜ä¸Šï¼Œæˆ‘ä»¬å¯¹æ•°æ®è¾ƒå°‘çš„é‚£ä¸ªç±»åˆ«äºˆä»¥æ›´å¤šæƒ©ç½šï¼Œå°±å¯ä»¥è¿™æ ·å®ç°ï¼š</p><pre><code class="lang-py">def weighted_binary_cross_entropy(pred, dtrain, imbalance_alpha=10):    label = dtrain.get_label()    sigmoid_pred = 1.0 / (1.0 + np.exp(-pred))    # ä¸€é˜¶å¯¼æ•°    grad = -(imbalance_alpha ** label) * (label - sigmoid_pred)    # äºŒé˜¶å¯¼æ•°    hessian = (imbalance_alpha ** label) * sigmoid_pred* ï¼ˆ1.0 - sigmoid_predï¼‰    return grad, hessian</code></pre><h3 id="XGBoost-å€™é€‰åˆ†è£‚ç‚¹é€‰å–ç­–ç•¥"><a href="#XGBoost-å€™é€‰åˆ†è£‚ç‚¹é€‰å–ç­–ç•¥" class="headerlink" title="XGBoost å€™é€‰åˆ†è£‚ç‚¹é€‰å–ç­–ç•¥"></a>XGBoost å€™é€‰åˆ†è£‚ç‚¹é€‰å–ç­–ç•¥</h3><h3 id="XGBoost-åœ¨å·¥ç¨‹ä¸Šçš„ä¼˜åŒ–"><a href="#XGBoost-åœ¨å·¥ç¨‹ä¸Šçš„ä¼˜åŒ–" class="headerlink" title="XGBoost åœ¨å·¥ç¨‹ä¸Šçš„ä¼˜åŒ–"></a>XGBoost åœ¨å·¥ç¨‹ä¸Šçš„ä¼˜åŒ–</h3><p>XGBoost åœ¨é€‰æ‹©åˆ†è£‚åˆ‡åˆ†ç‚¹æ—¶ï¼Œä¸ä¼šä¸€ä¸ªä¸€ä¸ªåœ°éå†ï¼Œè€Œæ˜¯é€‰æ‹©åˆ†ä½æ•°ç‚¹ã€‚</p><p>XGBoost åœ¨ç”Ÿæˆä¸‹ä¸€æ£µæ ‘æ—¶ï¼Œæ‰€æœ‰æ ·æœ¬çš„æƒé‡ g å’Œ h å¯ä»¥é€šè¿‡å½“å‰æ ‘çš„é¢„æµ‹å€¼å’Œå®é™…å€¼å¾—åˆ°ã€‚å› æ­¤è¦ç¡®å®šæœ€ä½³åˆ†å‰²ç‚¹ï¼Œéœ€è¦æå‰å¯¹ç‰¹å¾å€¼è¿›è¡Œæ’åºã€‚xgboostå¯ä»¥åœ¨è®­ç»ƒä¸‹ä¸€æ£µæ ‘å‰é¢„å…ˆè®¡ç®—å¥½æ¯ä¸ªç‰¹å¾åœ¨ä¸åŒåˆ‡åˆ†ç‚¹çš„å¢ç›Šï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œä¿å­˜ä¸ºblockçš„ç»“æ„ï¼Œè¿­ä»£ä¸­é‡å¤ä½¿ç”¨è¿™ä¸ªç»“æ„ï¼Œå› æ­¤å„ä¸ªç‰¹å¾çš„å¢ç›Šè®¡ç®—å°±å¯ä»¥å¤šçº¿ç¨‹å¹¶è¡Œè¿›è¡Œã€‚</p><h3 id="XGBoost-ä¸-GBDT-çš„åŒºåˆ«"><a href="#XGBoost-ä¸-GBDT-çš„åŒºåˆ«" class="headerlink" title="XGBoost ä¸ GBDT çš„åŒºåˆ«"></a>XGBoost ä¸ GBDT çš„åŒºåˆ«</h3><ol><li><p>åŸºåˆ†ç±»å™¨ä¸åŒã€‚XGBoost ç›®å‰æ”¯æŒä¸‰ç§åŸºåˆ†ç±»å™¨ï¼Œåˆ†åˆ«æ˜¯ gbtreeï¼Œgblinear å’Œ dartï¼Œå¯ä»¥ä½¿ç”¨ <strong>booster</strong> å‚æ•°ä¿®æ”¹ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ gbtree å°±æ˜¯åŸºäº CART å›å½’æ ‘çš„ XGBoostï¼Œgblinear æ˜¯é€»è¾‘å›å½’çº¿æ€§åˆ†ç±»å™¨ï¼Œdart æ˜¯ç”¨äº† dropout çš„æ ‘åˆ†ç±»å™¨ã€‚</p></li><li><p>å¯¼æ•°ä¿¡æ¯ä¸åŒï¼ŒæŸå¤±å‡½æ•°ä¹Ÿä¸åŒã€‚XGBoost å¯¹æŸå¤±å‡½æ•°åšäº†äºŒé˜¶æ³°å‹’å±•å¼€ï¼ŒGBDT åªç”¨äº†ä¸€é˜¶å¯¼æ•°ä¿¡æ¯ã€‚</p></li></ol><p>XGBoost æ²¡æœ‰å®šä¹‰æŸå¤±å‡½æ•°æœ¬èº«ï¼Œåªè¦è¯¥æŸå¤±å‡½æ•°èƒ½å¤Ÿè¿›è¡ŒäºŒé˜¶æ³°å‹’å±•å¼€å³å¯ï¼Œå› æ­¤åŸºå­¦ä¹ å™¨å¯ä»¥æ›´æ¢ã€‚</p><p>XGBoost é»˜è®¤ä½¿ç”¨ CART å›å½’æ ‘ç”¨ä½œåŸºå­¦ä¹ å™¨ï¼Œä½†æ˜¯å¯ä»¥æ›´æ¢ä¸ºå…¶ä»–å­¦ä¹ å™¨ï¼Œæ¯”å¦‚çº¿æ€§æ¨¡å‹ã€‚æ­¤æ—¶çš„æŸå¤±å‡½æ•°éœ€è¦æ›´æ¢ã€‚</p><p>æ¯”å¦‚åˆ†ç±»é—®é¢˜ï¼ŒæŸå¤±å‡½æ•°ä¸€èˆ¬ä¸º logistics æŸå¤±å‡½æ•°</p><ol><li>XGBoost åœ¨æ¯è½®è¿­ä»£æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å…¨éƒ¨æ•°æ®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªåŠ©é‡‡æ ·çš„æ•°æ®ã€‚</li></ol><p>è¿™é‡Œçš„æ€æƒ³ç±»ä¼¼éšæœºæ£®æ—ï¼Œæ¯æ¬¡èŠ‚ç‚¹åˆ†è£‚å¹¶æ²¡æœ‰æ¯”è¾ƒæ‰€æœ‰ç‰¹å¾çš„å¥½åï¼Œè€Œæ˜¯å…ˆéšæœºåœˆå®šä¸€éƒ¨åˆ†ç‰¹å¾ï¼Œåªä½¿ç”¨è¿™éƒ¨åˆ†ç‰¹å¾è¿›è¡Œæ¯”è¾ƒï¼Œä»è€Œåœ¨ç”Ÿæˆæ ‘æ—¶å¼•å…¥äº†éšæœºæ€§ã€‚</p><p>åˆ—é‡‡æ ·æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯å±‚å†…éšæœºï¼Œä¸€å±‚çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½ä½¿ç”¨éšæœºåœˆå®šçš„ç‰¹å¾ï¼›å¦ä¸€ç§æ˜¯æ•´é¢—æ ‘éšæœºï¼Œå³å»ºæ ‘ä¼Šå§‹å°±ä½¿ç”¨éšæœºåœˆå®šçš„ç‰¹å¾ã€‚</p><p>å¦å¤– XGBoost åœ¨å†³å®šç‰¹å¾çš„åˆ†è£‚ç‚¹æ˜¯ï¼Œå¹¶æ²¡æœ‰é€ä¸ªæ¯”è¾ƒæ‰€æœ‰æƒ…å†µï¼Œè€Œæ˜¯é€‰ç”¨äº†äºŒé˜¶æ¢¯åº¦åˆ†ä½ç‚¹ã€‚</p><ol><li>XGBoost èƒ½å¤Ÿè‡ªåŠ¨å­¦ä¹ å‡ºç¼ºå¤±å€¼çš„å¤„ç†ç­–ç•¥ã€‚</li></ol><p>ç¼ºå¤±å€¼å¤„ç†ç­–ç•¥ç›¸å¯¹ç®€å•ï¼Œå³åˆ†åˆ«å°è¯•æŠŠæ‰€æœ‰ç¼ºå¤±è¯¥ç‰¹å¾çš„æ•°æ®æ”¾åœ¨å·¦å­æ ‘å’Œå³å­æ ‘ï¼Œåˆ†åˆ«è®¡ç®—å¢ç›Šï¼Œæ¥å†³å®šç¼ºå¤±æ•°æ®çš„å½’å®¿ã€‚è¿™ä¹Ÿå°±å†³å®šäº† XGBoost æ— æ³•åº”å¯¹ OneHot ç¼–ç è¿™ç§å¤§éƒ¨åˆ†éƒ½ä¸º 0 çš„ç‰¹å¾ã€‚</p><ol><li>XGBoost åœ¨å·¥ç¨‹å®ç°ä¸Šçš„ä¼˜åŒ–</li></ol><p>åœ¨é€‰æ‹©åˆ†è£‚ç‚¹æ—¶ï¼ŒXGBoost ä¼šé¦–å…ˆå°†æ ·æœ¬æŒ‰ç…§ç‰¹å¾è¿›è¡Œæ’åºã€‚æ’åºçš„è¿™ä¸ªæ­¥éª¤å¯ä»¥è¿›è¡Œä¼˜åŒ–ã€‚</p><h2 id="LightGBM"><a href="#LightGBM" class="headerlink" title="LightGBM"></a>LightGBM</h2><h2 id="CatBoost"><a href="#CatBoost" class="headerlink" title="CatBoost"></a>CatBoost</h2><h2 id="LambdaMART"><a href="#LambdaMART" class="headerlink" title="LambdaMART"></a>LambdaMART</h2><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.jianshu.com/p/bac6a0dfac2c">https://www.jianshu.com/p/bac6a0dfac2c</a></p><p><a href="https://blog.csdn.net/zwqjoy/article/details/109311133">https://blog.csdn.net/zwqjoy/article/details/109311133</a></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
      <tag>XGBoost</tag>
      
      <tag>LightGBM</tag>
      
      <tag>CatBoost</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘é€šè¿‡æ–‡å­—æ£€ç´¢è§†é¢‘ç‰‡æ®µï¼šVCEDä¹‹åç«¯é€»è¾‘</title>
    <link href="/2022/11/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED%E4%B9%8B%E5%90%8E%E7%AB%AF%E9%80%BB%E8%BE%91/"/>
    <url>/2022/11/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED%E4%B9%8B%E5%90%8E%E7%AB%AF%E9%80%BB%E8%BE%91/</url>
    
    <content type="html"><![CDATA[<p>æœ¬ç¯‡æ–‡ç« æ˜¯è·¨æ¨¡æ€æ£€ç´¢å·¥å…· VCED ä»‹ç»çš„ç¬¬äº”ç¯‡ï¼Œå‰é¢ä»‹ç»äº†å‰ç«¯éƒ¨åˆ†ï¼Œæœ¬ç¯‡æ¥ç ”ç©¶åç«¯éƒ¨åˆ†ã€‚</p><!--more---><h2 id="ä¸€ã€æ¦‚è§ˆ"><a href="#ä¸€ã€æ¦‚è§ˆ" class="headerlink" title="ä¸€ã€æ¦‚è§ˆ"></a>ä¸€ã€æ¦‚è§ˆ</h2><p>é¡¹ç›®åç«¯å…±ç”±å››ä¸ªæ–‡ä»¶ç»„æˆï¼Œå…¶ä¸­ VideoLoader è´Ÿè´£å¯¹ä¸Šä¼ çš„è§†é¢‘è¿›è¡Œå…³é”®å¸§æå–ï¼ŒCustomClipText è´Ÿè´£å°†ä¸Šä¼ çš„å›¾ç‰‡è½¬æ¢ä¸ºå‘é‡æ•°æ®ï¼ŒCustomClipImage è´Ÿè´£å°†æå–çš„å…³é”®å¸§è½¬æ¢ä¸ºå‘é‡æ•°æ®ï¼ŒSimpleIndexer è´Ÿè´£å‘é‡æ•°æ®çš„æ£€ç´¢ã€‚</p><ul><li>VideoLoader</li><li>CustomClipText</li><li>CustomClipImage</li><li>SimpleIndexer</li></ul><h2 id="äºŒã€VideoLoader"><a href="#äºŒã€VideoLoader" class="headerlink" title="äºŒã€VideoLoader"></a>äºŒã€VideoLoader</h2><p>VideoLoader ç»§æ‰¿è‡ª Executorï¼Œåœ¨æ•´ä¸ªåç«¯ä¸­æ‰§è¡ŒæŠ½å¸§æ“ä½œã€‚</p><p>è¿™é‡Œç®€å•ä»‹ç»ä¸‹æ ¸å¿ƒä»£ç ï¼š</p><pre><code class="lang-py"># å°†æå–å‡½æ•°æ³¨å†Œåœ¨è·¯ç”±çš„ /extract é‡Œ@requests(on=&#39;/extract&#39;)def extract(self, docs: DocumentArray, parameters: Dict, **kwargs):    &quot;&quot;&quot;    Load the video from the Document.uri, extract frames and audio. The extracted data are stored in chunks.    :param docs: the input Documents with either the video file name or data URI in the `uri` field    :param parameters: A dictionary that contains parameters to control        extractions and overrides default values.    Possible values are `ffmpeg_audio_args`, `ffmpeg_video_args`, `librosa_load_args`. Check out more description in the `__init__()`.    For example, `parameters=&#123;&#39;ffmpeg_video_args&#39;: &#123;&#39;s&#39;: &#39;512x320&#39;&#125;`.    &quot;&quot;&quot;    for doc in docs:        # æ¯ä¸ª doc å¯¹åº”ä¸€æ®µè§†é¢‘é“¾æ¥ï¼Œå…ˆæŠŠå®ƒå°è£…æˆä¸€ä¸ªå¯¹è±¡        with tempfile.TemporaryDirectory() as tmpdir:            source_fn = (                self._save_uri_to_tmp_file(doc.uri, tmpdir)                if self._is_datauri(doc.uri)                else doc.uri            )            # extract all the frames video            if &#39;image&#39; in self._modality:                ffmpeg_video_args = deepcopy(self._ffmpeg_video_args)                ffmpeg_video_args.update(parameters.get(&#39;ffmpeg_video_args&#39;, &#123;&#125;))                # è°ƒç”¨å†…éƒ¨å‡½æ•°ï¼ŒæŠŠè§†é¢‘å¸§æŠ½å‡ºæ¥å˜æˆ tensor                frame_tensors = self._convert_video_uri_to_frames(                    source_fn, doc.uri, ffmpeg_video_args                )                for idx, frame_tensor in enumerate(frame_tensors):                    self.logger.debug(f&#39;frame: &#123;idx&#125;&#39;)                    chunk = Document(modality=&#39;image&#39;)                    # chunk.blob = frame_tensor                    max_size = 240                    img = Image.fromarray(frame_tensor)                    if img.size[0] &gt; img.size[1]:                        width = max_size                        height = math.ceil(max_size / img.size[0] * img.size[1])                    else:                        height = max_size                        width = math.ceil(max_size / img.size[1] * img.size[0])                    img = img.resize((width, height))                    chunk.tensor = np.asarray(img).astype(&#39;uint8&#39;)                    print(chunk.tensor.shape)                    # chunk.tensor = np.array(frame_tensor).astype(&#39;uint8&#39;)                    chunk.location = (np.uint32(idx),)                    chunk.tags[&#39;timestamp&#39;] = idx / self._frame_fps                    if self._copy_uri:                        chunk.tags[&#39;video_uri&#39;] = doc.uri                    # åˆ°è¿™é‡Œè§†é¢‘å¸§éƒ½è¢«å­˜åœ¨ doc çš„ chunk é‡Œäº†ã€‚                    doc.chunks.append(chunk)</code></pre><p>VideoLoader çš„å­å‡½æ•°ä¸­ï¼Œæœ‰ä¸“é—¨è´Ÿè´£æå–è§†é¢‘å¸§çš„å‚æ•°ï¼Œæ¥å¾—åˆ°è§†é¢‘åˆ†è¾¨ç‡çš„ï¼›æœ‰è·å–éŸ³é¢‘é‡‡æ ·ç‡ç­‰ä¿¡æ¯çš„ï¼›ä¹Ÿæœ‰è·å–å­—å¹•æ–‡æœ¬çš„ï¼ˆå³å°è¯•æŸ¥æ‰¾ srtå­—å¹•æ–‡ä»¶ï¼‰ã€‚</p><h2 id="ä¸‰ã€CustomClipText"><a href="#ä¸‰ã€CustomClipText" class="headerlink" title="ä¸‰ã€CustomClipText"></a>ä¸‰ã€CustomClipText</h2><p>è¯¥æ¨¡å—è´Ÿè´£è°ƒç”¨ CLIP æ¥å®ç°æŠŠæ–‡æœ¬å˜æˆ embeddings çš„åŠŸèƒ½ã€‚å®ƒçš„å…³é”®ç®—æ³•æ˜¯ï¼š</p><pre><code class="lang-py">def encode(self, docs: DocumentArray, parameters: Dict, **kwargs):    print(&#39;clip_text encode&#39;)    for docs_batch in DocumentArray(        filter(            lambda x: bool(x.text),            docs[parameters.get(&#39;traversal_paths&#39;, self.traversal_paths)],        )    ).batch(batch_size=parameters.get(&#39;batch_size&#39;, self.batch_size)) :        text_batch = docs_batch.texts        t1 = time.time()        with torch.inference_mode():            input_tokens = [self.model.encode_text(clip.tokenize([t, &quot;unknown&quot;]).to(self.device)) for t in text_batch] # self._generate_input_tokens(text_batch)            embeddings = input_tokens # self.model.get_text_features(**input_tokens).cpu().numpy()            for doc, embedding in zip(docs_batch, embeddings):                doc.embedding = embedding                # doc.embedding = np.array(embedding).astype(&#39;float32&#39;)[0]        t2 = time.time()        print(&quot;encode text cost:&quot;, t2 - t1)        print(t1)        print(t2)</code></pre><p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œå®ƒå®é™…ä¸Šå°±æ˜¯è°ƒç”¨äº†ä¸€ä¸ªæ¨¡å‹ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œäº†é¢„å¤„ç†ï¼Œæœ€åå¯¹æ–‡æœ¬æ•°æ®è¿›è¡Œç¼–ç ï¼Œä»¥ DocumentArray å½¢å¼å­˜å‚¨ï¼Œä¾¿äºåç»­ä¼ å€¼ã€‚</p><h2 id="å››ã€CustomClipImage"><a href="#å››ã€CustomClipImage" class="headerlink" title="å››ã€CustomClipImage"></a>å››ã€CustomClipImage</h2><p>ä¸ CustomClipText ç±»ä¼¼ï¼Œé€šè¿‡ CLIP æ¨¡å‹æŠŠå›¾ç‰‡å˜æˆ Embeddingã€‚åªè¦æœ‰ CLIP æ¨¡å‹ï¼Œå¯¹æ•°æ®è¿›è¡Œä¸å¤„ç†åå³å¯å¾—åˆ°å®ƒçš„ Embeddingã€‚</p><pre><code class="lang-py">def encode(self, docs: DocumentArray, parameters: dict, **kwargs):    t1 = time.time()    print(&#39;clip_image encode&#39;, t1)    document_batches_generator =  DocumentArray(        filter(            lambda x: x is not None,            docs[parameters.get(&#39;traversal_paths&#39;, self.traversal_paths)],        )    ).batch(batch_size=parameters.get(&#39;batch_size&#39;, self.batch_size))    with torch.inference_mode():        for batch_docs in document_batches_generator:            print(&#39;in for&#39;)            for d in batch_docs:                print(&#39;in clip image d.uri&#39;, d.uri, len(d.chunks))                # tensor = self._generate_input_features(tensors_batch)                tensors_batch = []                for c in d.chunks:                    if (c.modality == &#39;image&#39;):                        image_embedding = self.model.encode_image(self.preprocessor(Image.fromarray(c.tensor)).unsqueeze(0).to(self.device))                        # tensors_batch.append(image_embedding)                        tensors_batch.append(np.array(image_embedding).astype(&#39;float32&#39;))                embedding = tensors_batch                d.embedding = embedding    t2 = time.time()    print(&#39;clip_image encode end&#39;, t2 - t1, t2)</code></pre><p>æ³¨æ„è¿™é‡Œä¹Ÿå°†embedding ç¼–ç æˆäº† DocArrayå½¢å¼è¿›è¡Œå­˜å‚¨ã€‚</p><h2 id="äº”ã€SimpleIndexer"><a href="#äº”ã€SimpleIndexer" class="headerlink" title="äº”ã€SimpleIndexer"></a>äº”ã€SimpleIndexer</h2><p>è¿™é‡Œå®ç°äº†å…³é”®çš„æ£€ç´¢åŠŸèƒ½ï¼Œé¦–å…ˆéœ€è¦å°†æ‰€æœ‰èµ„æºè½¬åŒ–ä¸ºä»–ä»¬çš„ Embeddingï¼ˆå³ DocArrayï¼‰ï¼Œç„¶åä½¿ç”¨å‘é‡ç›¸ä¼¼åº¦æ¯”è¾ƒçš„æ–¹å¼è¿›è¡Œæ£€ç´¢ã€‚æ£€ç´¢çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="lang-py">    def search(        self,        docs: &#39;DocumentArray&#39;,        parameters: Optional[Dict] = None,        **kwargs,    ):        &quot;&quot;&quot;Perform a vector similarity search and retrieve the full Document match        :param docs: the Documents to search with        :param parameters: the runtime arguments to `DocumentArray`&#39;s match        function. They overwrite the original match_args arguments.        &quot;&quot;&quot;        match_args = (            &#123;**self._match_args, **parameters&#125;            if parameters is not None            else self._match_args        )        traversal_right = parameters.get(            &#39;traversal_right&#39;, self.default_traversal_right        )        traversal_left = parameters.get(&#39;traversal_left&#39;, self.default_traversal_left)        match_args = SimpleIndexer._filter_match_params(docs, match_args)        # print(&#39;in indexer&#39;,docs[traversal_left].embeddings.shape, self._index[traversal_right])        texts: DocumentArray = docs[traversal_left]        stored_docs: DocumentArray = self._index[traversal_right]        doc_ids = parameters.get(&quot;doc_ids&quot;)        t1 = time.time()        with torch.inference_mode():            t1_00 = time.time()            for text in texts:                result = []                text_features = text.embedding                text.embedding = None                for sd in stored_docs:                    if doc_ids is not None and sd.uri not in doc_ids:                        continue                    images_features = sd.embedding                    print(&#39;images len&#39;,len(images_features))                    t1_0 = time.time()                    tensor_images_features = [Tensor(image_features) for image_features in images_features]                    t1_1 = time.time()                    for i, image_features in enumerate(tensor_images_features):                        tensor = image_features                        probs = self.score(tensor, text_features)                        result.append(&#123;                            &quot;score&quot;: probs[0][0],                            &quot;index&quot;: i,                            &quot;uri&quot;: sd.uri,                            &quot;id&quot;: sd.id                        &#125;)                    t1_2 = time.time()                    print(&quot;tensor cost:&quot;, t1_1 - t1_0)                    print(&quot;part score cost:&quot;, t1_2 - t1_1)                    print(t1_0)                    print(t1_1)                    print(t1_2)                t2 = time.time()                print(&#39;score cost:&#39;, t2 - t1)                # print(parameters, type(parameters.get(&quot;thod&quot;)))                index_list = self.getMultiRange(result,0.1 if parameters.get(&quot;thod&quot;) is None else parameters.get(&#39;thod&#39;), parameters.get(&quot;maxCount&quot;))                t3 = time.time()                print(&#39;range cost:&#39;, t3 - t2)                print(t1)                print(t1_00)                print(t2)                print(t3)                # print(index_list)                docArr = DocumentArray.empty(len(index_list))                for i, doc in enumerate(docArr):                    doc.tags[&quot;leftIndex&quot;] = index_list[i][&quot;leftIndex&quot;]                    doc.tags[&quot;rightIndex&quot;] = index_list[i][&quot;rightIndex&quot;]                    # print(index_list[i])                    doc.tags[&quot;maxImageScore&quot;] = float(index_list[i][&quot;maxImage&quot;][&quot;score&quot;])                    doc.tags[&quot;uri&quot;] = index_list[i][&quot;maxImage&quot;][&quot;uri&quot;]                    doc.tags[&quot;maxIndex&quot;] = index_list[i][&quot;maxImage&quot;][&quot;index&quot;]                # print(docArr)                text.matches = docArr</code></pre><p>å¯¹äºæ¯æ®µåŒ¹é…çš„è§†é¢‘å¸§ï¼Œè¿˜ä¼šåœ¨æœ€ç»ˆæœ‰ä¸€ä¸ªæ‰“åˆ†æ’åºçš„æ“ä½œã€‚æ‰“åˆ†çš„è¿‡ç¨‹å…¶å®å°±æ˜¯å¯¹ç‰¹å¾è¿›è¡Œæ ‡å‡†åŒ–ï¼ŒæŒ‰ç…§ä½™å¼¦ç›¸ä¼¼åº¦è®¡ç®—ï¼Œæœ€ç»ˆé€šè¿‡softmaxæ¨¡å‹å¾—å‡ºprobabilityã€‚å®é™…ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="lang-py">    def score(self, image_features, text_features):        logit_scale = self.model.logit_scale.exp()        # normalized features        image_features = image_features / image_features.norm(dim=1, keepdim=True)        text_features = text_features / text_features.norm(dim=1, keepdim=True)        # cosine similarity as logits        logits_per_image = logit_scale * image_features @ text_features.t()        probs = logits_per_image.softmax(dim=-1).cpu().detach().numpy()        # print(&quot; img Label probs:&quot;, probs)        return probs</code></pre><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ€»çš„æ¥çœ‹ VCED çš„åç«¯éƒ¨åˆ†ä¸ç®—å¤æ‚ï¼Œåªæ˜¯å¿ å®åœ°ä½¿ç”¨äº† Jina æä¾›çš„æ¡†æ¶ï¼Œå°†å¤šæ¨¡æ€æ•°æ®æŠ½è±¡ä¸º Document ååˆ©ç”¨ Jina æä¾›çš„ api è¿›è¡Œå¤„ç†ç»§æ‰¿ Executor ç±»ï¼Œç„¶åè‡ªå®šä¹‰è‡ªå·±çš„æ“ä½œã€‚</p><p>å¦‚æœæƒ³è¦å®ç°è‡ªå·±çš„ Executorï¼Œä¹Ÿå¯ä»¥ç±»æ¯”ä¸Šé¢æåˆ°çš„æ¨¡å—æ¥ç»§æ‰¿ä¸€ä¸ªï¼›ä¸è¿‡å¤šæ•°ç”¨æˆ·å¯ä»¥æƒ³åˆ°çš„åŠŸèƒ½éƒ½å·²ç»è¢«ä¸Šä¼ åˆ°Jina Hubä¸Šï¼ŒVideoLoaderçš„ä¸»ä½“ä¹Ÿå¯ä»¥åœ¨hubä¸­è¿›è¡Œè®¿é—®ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨å°è£…å¥½çš„Executorï¼Œå®ç°è‡ªå·±çš„åŠŸèƒ½æ¨¡å—ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VCED</tag>
      
      <tag>multimodal</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘é€šè¿‡æ–‡å­—æ£€ç´¢è§†é¢‘ç‰‡æ®µï¼šVCEDâ€”â€”Streamlitå‰ç«¯ç®€ä»‹</title>
    <link href="/2022/11/21/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED%E2%80%94%E2%80%94Streamlit%E5%89%8D%E7%AB%AF%E7%AE%80%E4%BB%8B/"/>
    <url>/2022/11/21/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED%E2%80%94%E2%80%94Streamlit%E5%89%8D%E7%AB%AF%E7%AE%80%E4%BB%8B/</url>
    
    <content type="html"><![CDATA[<p>æœ¬ç¯‡æ–‡ç« æ˜¯è·¨æ¨¡æ€æ£€ç´¢å·¥å…· VCED ä»‹ç»çš„ç¬¬å››ç¯‡ï¼Œå³å°†æ­æ™“ç¬¬ä¸€ç¯‡ä¸­ demo çš„å‰ç«¯éƒ¨åˆ†æ˜¯å¦‚ä½•å®ç°çš„ï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨ python + Streamlit å·¥å…·å¿«é€Ÿå¼€å‘ä¸€ä¸ªå‰ç«¯ç•Œé¢ã€‚</p><!--more---><p>Streamlit æ˜¯ä¸€ä¸ªåŸºäº Python çš„ Web åº”ç”¨ç¨‹åºæ¡†æ¶ã€‚Streamlit åŸºäº Pythonï¼Œå¼€å‘è€…æ— éœ€å­¦ä¹ å…¶ä»–å°±å¯ä»¥æ­å»ºä¸€ä¸ªè¾ƒä¸ºå®Œæ•´çš„ç³»ç»Ÿã€‚å› æ­¤æ­¤æ¬¡æ•™ç¨‹ï¼ŒVCEDé¡¹ç›®å°±é€šè¿‡ Streamlit + Jina æ„å»ºäº†ä¸€å¥—ç³»ç»Ÿã€‚</p><h2 id="1-å®‰è£…"><a href="#1-å®‰è£…" class="headerlink" title="1. å®‰è£…"></a>1. å®‰è£…</h2><pre><code>pip install streamlit</code></pre><h2 id="2-ä½¿ç”¨-Streamlit-æ„å»º-Web-app"><a href="#2-ä½¿ç”¨-Streamlit-æ„å»º-Web-app" class="headerlink" title="2. ä½¿ç”¨ Streamlit æ„å»º Web app"></a>2. ä½¿ç”¨ Streamlit æ„å»º Web app</h2><pre><code class="lang-py">import pandas as pdimport numpy as npimport streamlit as stst.set_page_config(page_title=&quot;Hello Streamlit&quot;)st.title(&#39;This is your first Streamlit page!&#39;)  # æ ‡é¢˜st.markdown(&#39;Streamlit is **_really_ cool**.&#39;)  # markdowncode = &#39;&#39;&#39;def hello():     print(&quot;Hello, Streamlit!&quot;)&#39;&#39;&#39;st.code(code, language=&#39;python&#39;)  # codedf = pd.DataFrame(    np.random.randn(50, 20),    columns=(&#39;col %d&#39; % i for i in range(20)))st.dataframe(df)  # dataframest.latex(r&#39;&#39;&#39;     a + ar + a r^2 + a r^3 + \cdots + a r^&#123;n-1&#125; =     \sum_&#123;k=0&#125;^&#123;n-1&#125; ar^k =     a \left(\frac&#123;1-r^&#123;n&#125;&#125;&#123;1-r&#125;\right)     &#39;&#39;&#39;)  # latex</code></pre><p>æŒ‰ç…§ä»¥ä¸Šä»£ç å®ç°çš„ç½‘é¡µå¦‚ä¸‹ï¼š</p><p><img src="/2022/11/21/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED%E2%80%94%E2%80%94Streamlit%E5%89%8D%E7%AB%AF%E7%AE%80%E4%BB%8B/streamlit_demo.png" alt></p><h2 id="ä½¿ç”¨-Streamlit-å¤ç°-VCED-é¡¹ç›®çš„å‰ç«¯é¡µé¢"><a href="#ä½¿ç”¨-Streamlit-å¤ç°-VCED-é¡¹ç›®çš„å‰ç«¯é¡µé¢" class="headerlink" title="ä½¿ç”¨ Streamlit å¤ç° VCED é¡¹ç›®çš„å‰ç«¯é¡µé¢"></a>ä½¿ç”¨ Streamlit å¤ç° VCED é¡¹ç›®çš„å‰ç«¯é¡µé¢</h2><p>VCEDé¡¹ç›®å®ç°çš„æµç¨‹æœ‰ï¼šä¸Šä¼ è§†é¢‘ã€è¾“å…¥æè¿°ã€é™å®šæœç´¢ä¸ªæ•°ã€æœç´¢æŒ‰é’®ç­‰åŠŸèƒ½ã€‚</p><pre><code class="lang-py"># å¯¼å…¥éœ€è¦çš„åŒ…import streamlit as stfrom jina import Client, DocumentArray, Documentimport jsonimport osimport timeimport uuidVIDEO_PATH = f&quot;&#123;os.getcwd()&#125;/data&quot;# è§†é¢‘å­˜å‚¨çš„è·¯å¾„if not os.path.exists(VIDEO_PATH):    os.mkdir(VIDEO_PATH)# è§†é¢‘å‰ªè¾‘åå­˜å‚¨çš„è·¯å¾„if not os.path.exists(VIDEO_PATH + &quot;/videos/&quot;):    os.mkdir(VIDEO_PATH + &quot;/videos&quot;)# GRPC ç›‘å¬çš„ç«¯å£port = 45679# åˆ›å»º Jina å®¢æˆ·ç«¯c = Client(host=f&quot;grpc://localhost:&#123;port&#125;&quot;)# è®¾ç½®æ ‡ç­¾æ st.set_page_config(page_title=&quot;VCED&quot;, page_icon=&quot;ğŸ”&quot;)# è®¾ç½®æ ‡é¢˜st.title(&#39;Welcome to VCED!&#39;)# è§†é¢‘ä¸Šä¼ ç»„ä»¶uploaded_file = st.file_uploader(&quot;Choose a video&quot;)video_name = None  # name of the video# åˆ¤æ–­è§†é¢‘æ˜¯å¦ä¸Šä¼ æˆåŠŸif uploaded_file is not None:    # preview, delete and download the video    video_bytes = uploaded_file.read()    st.video(video_bytes)    # save file to disk for later process    video_name = uploaded_file.name    with open(f&quot;&#123;VIDEO_PATH&#125;/&#123;video_name&#125;&quot;, mode=&#39;wb&#39;) as f:        f.write(video_bytes)  # save video to diskvideo_file_path = f&quot;&#123;VIDEO_PATH&#125;/&#123;video_name&#125;&quot;uid = uuid.uuid1()# æ–‡æœ¬è¾“å…¥æ¡†text_prompt = st.text_input(    &quot;Description&quot;, placeholder=&quot;please input the description&quot;, help=&#39;The description of clips from the video&#39;)# top k è¾“å…¥æ¡†topn_value = st.text_input(    &quot;Top N&quot;, placeholder=&quot;please input an integer&quot;, help=&#39;The number of results. By default, n equals 1&#39;)# æ ¹æ®ç§’æ•°è¿˜åŸ ä¾‹å¦‚ 10829s è½¬æ¢ä¸º 03:04:05def getTime(t: int):    m,s = divmod(t, 60)    h, m = divmod(m, 60)    t_str = &quot;%02d:%02d:%02d&quot; % (h, m, s)    print (t_str)    return t_str# æ ¹æ®ä¼ å…¥çš„æ—¶é—´æˆ³ä½ç½®å¯¹è§†é¢‘è¿›è¡Œæˆªå–def cutVideo(start_t: str, length: int, input: str, output: str):    &quot;&quot;&quot;    start_t: èµ·å§‹ä½ç½®    length: æŒç»­æ—¶é•¿    input: è§†é¢‘è¾“å…¥ä½ç½®    output: è§†é¢‘è¾“å‡ºä½ç½®    &quot;&quot;&quot;    os.system(f&#39;ffmpeg -ss &#123;start_t&#125; -i &#123;input&#125; -t &#123;length&#125; -c:v copy -c:a copy -y &#123;output&#125;&#39;)# ä¸åç«¯äº¤äº’éƒ¨åˆ†def search_clip(uid, uri, text_prompt, topn_value):    video = DocumentArray([Document(uri=uri, id=str(uid) + uploaded_file.name)])    t1 = time.time()    c.post(&#39;/index&#39;, inputs=video) # é¦–å…ˆå°†ä¸Šä¼ çš„è§†é¢‘è¿›è¡Œå¤„ç†    text = DocumentArray([Document(text=text_prompt)])    print(topn_value)    resp = c.post(&#39;/search&#39;, inputs=text, parameters=&#123;&quot;uid&quot;: str(uid), &quot;maxCount&quot;:int(topn_value)&#125;) # å…¶æ¬¡æ ¹æ®ä¼ å…¥çš„æ–‡æœ¬å¯¹è§†é¢‘ç‰‡æ®µè¿›è¡Œæœç´¢    data = [&#123;&quot;text&quot;: doc.text,&quot;matches&quot;: doc.matches.to_dict()&#125; for doc in resp] # å¾—åˆ°æ¯ä¸ªæ–‡æœ¬å¯¹åº”çš„ç›¸ä¼¼è§†é¢‘ç‰‡æ®µèµ·å§‹ä½ç½®åˆ—è¡¨    return json.dumps(data)# searchsearch_button = st.button(&quot;Search&quot;)if search_button: # åˆ¤æ–­æ˜¯å¦ç‚¹å‡»æœç´¢æŒ‰é’®    if uploaded_file is not None: # åˆ¤æ–­æ˜¯å¦ä¸Šä¼ è§†é¢‘æ–‡ä»¶        if text_prompt == None or text_prompt == &quot;&quot;: # åˆ¤æ–­æ˜¯å¦è¾“å…¥æŸ¥è¯¢æ–‡æœ¬            st.warning(&#39;Please input the description first!&#39;)        else:            if topn_value == None or topn_value == &quot;&quot;: # å¦‚æœæ²¡æœ‰è¾“å…¥ top k åˆ™é»˜è®¤è®¾ç½®ä¸º1                topn_value = 1            with st.spinner(&quot;Processing...&quot;):                result = search_clip(uid, video_file_path, text_prompt, topn_value)                 result = json.loads(result) # è§£æå¾—åˆ°çš„ç»“æœ                for i in range(len(result)):                    matchLen = len(result[i][&#39;matches&#39;])                    for j in range(matchLen):                        print(j)                        left = result[i][&#39;matches&#39;][j][&#39;tags&#39;][&#39;leftIndex&#39;] # è§†é¢‘ç‰‡æ®µçš„å¼€å§‹ä½ç½®                        right = result[i][&#39;matches&#39;][j][&#39;tags&#39;][&#39;rightIndex&#39;] # è§†é¢‘ç‰‡æ®µçš„ç»“æŸä½ç½®                        print(left)                        print(right)                        start_t = getTime(left) # å°†å…¶è½¬æ¢ä¸ºæ ‡å‡†æ—¶é—´                        output = VIDEO_PATH + &quot;/videos/clip&quot; + str(j) +&quot;.mp4&quot;                        cutVideo(start_t,right-left, video_file_path, output) # å¯¹è§†é¢‘è¿›è¡Œåˆ‡åˆ†                        st.video(output) #å°†è§†é¢‘æ˜¾ç¤ºåˆ°å‰ç«¯ç•Œé¢                st.success(&quot;Done!&quot;)    else:        st.warning(&#39;Please upload video first!&#39;)</code></pre>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VCED</tag>
      
      <tag>multimodal</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘Ernie æ¨¡å‹</title>
    <link href="/2022/11/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Ernie-%E6%A8%A1%E5%9E%8B/"/>
    <url>/2022/11/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Ernie-%E6%A8%A1%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<!--more---><p>æ–‡å¿ƒå¤§æ¨¡å‹ERNIEæ˜¯ç™¾åº¦å‘å¸ƒçš„äº§ä¸šçº§çŸ¥è¯†å¢å¼ºå¤§æ¨¡å‹ã€‚</p><p><a href="https://github.com/PaddlePaddle/ERNIE">https://github.com/PaddlePaddle/ERNIE</a></p><h2 id="Roadmap"><a href="#Roadmap" class="headerlink" title="Roadmap"></a>Roadmap</h2><div class="table-container"><table><thead><tr><th>æ—¶é—´</th><th>å‘å¸ƒæ¨¡å‹</th></tr></thead><tbody><tr><td>2019.3.16</td><td>ERNIE 1.0</td></tr><tr><td>2019.7.7</td><td>ERNIE 2.0</td></tr><tr><td>2021.5.20</td><td>å¤šç²’åº¦è¯­è¨€çŸ¥è¯†æ¨¡å‹ ERNIE-Gramã€è¶…é•¿æ–‡æœ¬åŒå‘å»ºæ¨¡é¢„è®­ç»ƒæ¨¡å‹ERNIE-Doc ï¼Œä»¥åŠå…¶ä»–å›¾æ–‡å¤šæ¨¡æ€æ¨¡å‹</td></tr><tr><td>2021.12.3</td><td>å¤šè¯­è¨€ ERNIE-M</td></tr><tr><td>2022.5.20</td><td>ERNIE 3.0 ç³»åˆ—: 110Må‚æ•°é€šç”¨æ¨¡å‹ERNIE 3.0 Baseã€280Må‚æ•°é‡é‡çº§é€šç”¨æ¨¡å‹ERNIE 3.0 XBaseã€74Mè½»é‡çº§é€šç”¨æ¨¡å‹ERNIE 3.0 Medium</td></tr></tbody></table></div><h2 id="Ernie-1-0"><a href="#Ernie-1-0" class="headerlink" title="Ernie 1.0"></a>Ernie 1.0</h2><p>Ernie: Enhanced representation through knowledge integration</p><p>ç›¸è¾ƒäº BERTï¼ŒErnie 1.0 åœ¨æ¨¡å‹ç»“æ„ä¸Šæ²¡æœ‰æ”¹åŠ¨ï¼Œéƒ½æ˜¯é‡‡ç”¨è‹¥å¹² Transformer çš„ Encoder ç»“æ„ã€‚</p><p>Ernie 1.0 çš„æ”¹åŠ¨åœ¨é¢„è®­ç»ƒä»»åŠ¡ã€‚</p><h3 id="1-Knowledge-Masking"><a href="#1-Knowledge-Masking" class="headerlink" title="1. Knowledge Masking"></a>1. Knowledge Masking</h3><p>BERT çš„é¢„è®­ç»ƒé‡‡ç”¨ masked language-modelï¼ˆMLMï¼‰çš„æ–¹æ³•ï¼Œå³åœ¨è®­ç»ƒçš„æ—¶å€™éšå³ä»è¾“å…¥é¢„æ–™ä¸Šmaskæ‰ä¸€äº›å•è¯ï¼Œç„¶åé€šè¿‡çš„ä¸Šä¸‹æ–‡é¢„æµ‹è¿™äº›å•è¯ï¼Œè¯¥ä»»åŠ¡éå¸¸åƒæˆ‘ä»¬åœ¨ä¸­å­¦æ—¶æœŸç»å¸¸åšçš„å®Œå½¢å¡«ç©ºï¼›ä»¥åŠNext Sentence Predictionï¼ˆNSPï¼‰çš„æ–¹æ³•ï¼Œå³åˆ¤æ–­è¿ä¸ªå¥å­æ˜¯å¦æ˜¯å…·æœ‰å‰åé¡ºæ‰¿å…³ç³»çš„ä¸¤å¥è¯ã€‚</p><p>ERNIEæå‡ºäº†<code>Knowledge Masking</code>çš„ç­–ç•¥ï¼Œå…¶åŒ…å«ä¸‰ä¸ªçº§åˆ«ï¼šERNIEå°†Knowledgeåˆ†æˆäº†ä¸‰ä¸ªç±»åˆ«ï¼š<code>tokençº§åˆ«(Basic-Level)</code>ã€<code>çŸ­è¯­çº§åˆ«(Phrase-Level)</code> å’Œ <code>å®ä½“çº§åˆ«(Entity-Level)</code>ã€‚é€šè¿‡å¯¹è¿™ä¸‰ä¸ªçº§åˆ«çš„å¯¹è±¡è¿›è¡ŒMaskingï¼Œæé«˜æ¨¡å‹å¯¹å­—è¯ã€çŸ­è¯­çš„çŸ¥è¯†ç†è§£ã€‚</p><p>Basic-Level Masking å°±æ˜¯æœ€åŸºç¡€çš„ masking ä»»åŠ¡ï¼Œå’Œ BERT ä¸€æ ·ï¼Œéšæœºé€‰å–æŸäº›å•è¯è¿›è¡Œ maskï¼Œä»¤æ¨¡å‹æ¥é¢„æµ‹è¿™äº› mask æ˜¯ä»€ä¹ˆè¯ã€‚</p><p>Phrase-Level Masking æ˜¯å¯¹è¯­å¥ä¸­çš„çŸ­è¯­è¿›è¡Œ maskingï¼Œå¦‚ a series ofï¼›</p><p>Entity-Level Masking æ˜¯å¯¹è¯­å¥ä¸­çš„å®ä½“è¯è¿›è¡Œ maskingï¼Œå¦‚äººå J. K. Rowlingã€‚</p><p><img src="/2022/11/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Ernie-%E6%A8%A1%E5%9E%8B/knowledge_masking.png" alt></p><h3 id="2-Dialogue-Language-Model"><a href="#2-Dialogue-Language-Model" class="headerlink" title="2. Dialogue Language Model"></a>2. Dialogue Language Model</h3><p>åœ¨ Bert å·²æœ‰çš„é¢„è®­ç»ƒä»»åŠ¡ä¸­ï¼ŒåŠ å…¥äº† Dialogue Language Model ä»»åŠ¡ï¼Œä½¿ ERNIE å­¦ä¹ åˆ°å¯¹è¯ä¸­çš„éšå«å…³ç³»ï¼Œå¢åŠ æ¨¡å‹çš„è¯­ä¹‰è¡¨è¾¾èƒ½åŠ›ã€‚</p><p>åœ¨ç”Ÿæˆé¢„è®­ç»ƒæ•°æ®çš„æ—¶å€™ï¼Œæœ‰ä¸€å®šå‡ ç‡ç”¨å¦å¤–çš„å¥å­æ›¿ä»£é‡Œé¢çš„é—®é¢˜å’Œç­”æ¡ˆï¼Œæ‰€ä»¥æ¨¡å‹è¿˜è¦é¢„æµ‹æ˜¯å¦æ˜¯çœŸå®çš„é—®ç­”å¯¹ã€‚</p><p><img src="/2022/11/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Ernie-%E6%A8%A1%E5%9E%8B/dialogue_language_model.png" alt></p><p>DLM ä¸­ï¼Œä¸å†æ„å»ºå¦‚åŒ â€œ[CLS] + Sentence_A + [SEP] + Sentence_B + [SEP]â€ çš„å¥å­å¯¹ï¼Œ</p><p>è€Œæ˜¯å¦‚åŒ â€œ[CLS] + Query + [SEP] + Response_A + [SEP] + Response_B + [SEP]â€ çš„å¯¹è¯ä¸‰å…ƒç»„ï¼›</p><p>æ˜¯å¦ä¸Šä¸‹æ–‡è¿ç»­çš„äºŒåˆ†ç±»è®­ç»ƒç›®æ ‡è½¬ä¸ºé¢„æµ‹è¯¥å¯¹è¯æ˜¯å¦çœŸå® (real/fake)ã€‚</p><p>ä¸‰å…ƒç»„éšæœºåœ°é‡‡ç”¨ QRQã€QRRã€QQR å…¶ä¸­ä¸€ç§æ„å»ºå½¢å¼ï¼Œä¸Šé¢çš„ä¾‹å­ä¾¿æ˜¯å…¶ä¸­çš„ QRRã€‚</p><p>ä¸ºäº†ç»™å¤„ç†åçš„æ•°æ®æ·»åŠ å™ªå£°ï¼Œéƒ¨åˆ†çš„ Query å’Œ Response ä½¿ç”¨ä¸ç›¸å…³çš„è¯­å¥è¿›è¡Œéšæœºæ›¿æ¢ï¼Œä»¥å¼ºåˆ¶æ¨¡å‹å­¦ä¹ å¯¹è¯ä¸­çš„è¯­å¢ƒå…³è”ã€‚</p><p>åœ¨è®­ç»ƒä¸€èˆ¬è¯­æ–™æ—¶ï¼ŒERNIE é‡‡ç”¨ Knowledge Masking Strategies æ”¹é€ åçš„ Masked LMï¼›è€Œåœ¨è®­ç»ƒå¯¹è¯å‹è¯­æ–™æ—¶ï¼ŒERNIE é‡‡ç”¨ DLMï¼›ä¸¤è€…äº¤æ›¿ä½¿ç”¨ã€‚</p><h3 id="3-æ·»åŠ æ•°æ®"><a href="#3-æ·»åŠ æ•°æ®" class="headerlink" title="3. æ·»åŠ æ•°æ®"></a>3. æ·»åŠ æ•°æ®</h3><p>Ernie è¿˜é‡‡ç”¨å¤šä¸ªæ¥è‡ªä¸åŒæºå¤´çš„æ•°æ®ï¼Œæ¯”å¦‚ç™¾åº¦è´´å§ï¼Œç™¾åº¦æ–°é—»ï¼Œç»´åŸºç™¾ç§‘ç­‰ç­‰å¸®åŠ©æ¨¡å‹è®­ç»ƒã€‚</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://blog.csdn.net/u011150266/article/details/116479149">https://blog.csdn.net/u011150266/article/details/116479149</a></p><p><a href="https://www.cnblogs.com/shona/p/11820492.html">https://www.cnblogs.com/shona/p/11820492.html</a></p><h2 id="Ernie-2-0"><a href="#Ernie-2-0" class="headerlink" title="Ernie 2.0"></a>Ernie 2.0</h2><p>Ernie 2.0: A continual pre-training framework for language understanding</p><h3 id="1-æ€»ä½“æ”¹åŠ¨"><a href="#1-æ€»ä½“æ”¹åŠ¨" class="headerlink" title="1. æ€»ä½“æ”¹åŠ¨"></a>1. æ€»ä½“æ”¹åŠ¨</h3><p>ERNIE 2.0 å°† 1.0 ç‰ˆæœ¬ä¸­çš„åŠŸèƒ½ç‰¹æ€§å…¨éƒ¨äºˆä»¥ä¿ç•™ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šåšæ›´ä¸ºä¸°å¯Œçš„æ‰©å±•å’Œå»¶ä¼¸ã€‚</p><p>Ernie 2.0 æ·»åŠ äº†å¾ˆå¤šå…¶ä»–çš„è‡ªç›‘ç£å­¦ä¹ æ–¹æ³•è¿›è¡Œè®­ç»ƒã€‚è¯¥æ€æƒ³ä¸ ALBERTï¼ˆSOPï¼‰ã€SpanBERTï¼ˆSBOï¼‰ç±»ä¼¼ã€‚</p><p>ä½†æ˜¯ä¸€å‘³å †å ä»»åŠ¡å¯èƒ½å¯¼è‡´å„ç§ä»»åŠ¡éƒ½å­¦ä¸å¥½ï¼ŒErnie 2.0 æå‡ºäº†ä¸€ä¸ªæŒç»­å­¦ä¹ çš„æ¡†æ¶ï¼Œæ¨¡å‹å¯ä»¥æŒç»­æ·»åŠ ä»»åŠ¡ä½†åˆä¸é™ä½ä¹‹å‰ä»»åŠ¡çš„ç²¾åº¦ã€‚</p><p>ç›®æ ‡æ˜¯èƒ½å¤Ÿæ›´å¥½æ›´æœ‰æ•ˆåœ°è·å¾—è¯æ³•lexicalï¼Œå¥æ³•syntacticï¼Œè¯­ä¹‰semanticä¸Šçš„è¡¨è¾¾ã€‚</p><p><img src="/2022/11/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Ernie-%E6%A8%A1%E5%9E%8B/ernie2_0_structure.png" alt></p><h3 id="2-æ·»åŠ é¢„è®­ç»ƒä»»åŠ¡"><a href="#2-æ·»åŠ é¢„è®­ç»ƒä»»åŠ¡" class="headerlink" title="2. æ·»åŠ é¢„è®­ç»ƒä»»åŠ¡"></a>2. æ·»åŠ é¢„è®­ç»ƒä»»åŠ¡</h3><p><strong>1ï¼‰Word-aware Pretraining Tasks</strong>ï¼Œæ•æ‰è¯æ±‡ (lexical) çº§åˆ«çš„ä¿¡æ¯</p><p>Knowledge Masking Taskï¼šæ²¿è¢­ ERNIE 1.0 ä¸­çš„ Knowledge Masking Strategiesï¼Œé¢„æµ‹è¢« Mask çš„å¯¹è±¡ã€‚</p><p>Capitalization Prediction Taskï¼šé¢„æµ‹å¯¹è±¡æ˜¯å¦å¤§å°å†™ (cased/uncased)ï¼›ERNIE 2.0 è®¤ä¸ºå¤§å†™å¼€å¤´çš„è¯æ±‡å…·å¤‡ç‰¹å®šçš„å«ä¹‰ï¼Œä¾‹å¦‚äººåã€åœ°åã€æœºæ„åç­‰ï¼Œè¿™å°†å¯¹å‘½åå®ä½“è¯†åˆ«ä¸€ç±»çš„ä¸‹æ¸¸ä»»åŠ¡æœ‰æ‰€å¸®åŠ©ã€‚</p><p>Token-Document Relation Prediction Taskï¼šé¢„æµ‹å¯¹è±¡æ˜¯å¦åœ¨æ–‡æ¡£ä¸­å…¶ä»–æ–‡æ®µæœ‰å‡ºç°ï¼›æ­£æ¡ˆä¾‹é€šå¸¸åŒ…å«æ–‡æ¡£çš„å…³é”®è¯ä»¥åŠè¯­è¨€é€šç”¨è¯ï¼Œå› æ­¤æ·»åŠ è¿™ä¸€ä»»åŠ¡æœ‰åŠ©äºæ¨¡å‹å°†æ›´å¤šçš„æ³¨æ„åŠ›æ”¾åœ¨è¿™ä¸€ç±»è¯æ±‡ä¸Šã€‚</p><p><strong>2ï¼‰Structure-aware Pretraining Tasks</strong>ï¼Œæ•æ‰è¯­æ–™ä¸­è¯­æ³• (syntactic) çº§åˆ«çš„ä¿¡æ¯</p><p>Sentence Recording Taskï¼šé’ˆå¯¹æ–‡æ¡£ä¸­çš„æ¯ä¸€ä¸ªæ®µè½ï¼Œä»¥å¥å­ä¸ºå•ä½åˆ’åˆ†ä¸º 1~m æ®µï¼Œè€Œåå¯¹æ•´ä¸ªæ–‡æ¡£æ‰€æœ‰æ–‡æ®µè¿›è¡Œæ‰“ä¹±æ’åˆ—ï¼Œå¯¹æ¯ä¸€ä¸ªæ–‡æ®µé¢„æµ‹åŸå§‹ä½ç½®ï¼Œæˆä¸º k åˆ†ç±»é—®é¢˜ã€‚</p><p>Sentence Distance Taskï¼šå–ä»£ Next Sentence Predictionï¼Œé¢„æµ‹è¾“å…¥å¥å­å¯¹çš„ç›¸å¯¹è·ç¦»ï¼›ä¸‰åˆ†ç±»é—®é¢˜ï¼Œ0 ä»£è¡¨ä¸¤ä¸ªå¥å­åœ¨åŒä¸€ç¯‡æ–‡æ¡£ä¸”è·ç¦»ç›¸è¿‘ï¼Œ1 ä»£è¡¨ä¸¤ä¸ªå¥å­åœ¨åŒä¸€ç‰‡æ–‡æ¡£ä½†è·ç¦»è¾ƒè¿œï¼Œ2 ä»£è¡¨ä¸¤ä¸ªå¥å­åœ¨ä¸åŒæ–‡æ¡£ã€‚</p><p><strong>3ï¼‰Semantic-aware Pretraining Tasks</strong>ï¼Œæå–è¯­ä¹‰ (semantic) ç±»çš„ä¿¡æ¯</p><p>Discourse Relation Taskï¼šé¢„æµ‹ä¸¤ä¸ªå¥å­ä¹‹é—´çš„è¯­æ³•åŠä¿®è¾å…³è”ã€‚</p><p><img src="/2022/11/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Ernie-%E6%A8%A1%E5%9E%8B/discourse_relation_task.png" alt></p><p>IR Relevance Taskï¼šä¸“é—¨ä¸ºç™¾åº¦æœç´¢å¼•æ“æ—¥å¿—è®¾è®¡çš„ä»»åŠ¡ï¼Œé¢„æµ‹ Query-Title å¯¹çš„ç›¸å…³æ€§ï¼›ä¸‰åˆ†ç±»é—®é¢˜ï¼Œ0ã€1ã€2 åˆ†åˆ«ä»£è¡¨å¼ºç›¸å…³ã€å¼±ç›¸å…³ä»¥åŠä¸ç›¸å…³ï¼›è¿™å°†æœ‰åŠ©äºæ ‡é¢˜è‡ªåŠ¨ç”Ÿæˆä»¥åŠæ–‡æœ¬æ‘˜è¦ç±»ä»»åŠ¡ã€‚</p><h3 id="3-é¢„è®­ç»ƒæ¡†æ¶"><a href="#3-é¢„è®­ç»ƒæ¡†æ¶" class="headerlink" title="3. é¢„è®­ç»ƒæ¡†æ¶"></a>3. é¢„è®­ç»ƒæ¡†æ¶</h3><p>ä»»åŠ¡å åŠ ï¼Œä¸æ˜¯ä¸€æ¬¡æ€§è¿›è¡Œçš„ï¼ˆMulti-task learningï¼‰ï¼Œè€Œæ˜¯æŒç»­å­¦ä¹ (Continual Pre-training)ï¼Œæ‰€ä»¥å¿…é¡»é¿å…æ¨¡å‹åœ¨å­¦äº†æ–°çš„ä»»åŠ¡ä¹‹åï¼Œå¿˜è®°æ—§çš„ä»»åŠ¡ï¼Œå³åœ¨æ—§çš„ä»»åŠ¡ä¸Šlosså˜é«˜ã€‚</p><p>ä¸ºæ­¤ï¼ŒERNIE 2.0 é¦–æ¬¡å¼•å…¥ è¿ç»­é¢„è®­ç»ƒæœºåˆ¶ â€”â€” ä»¥ä¸²è¡Œçš„æ–¹å¼è¿›è¡Œå¤šä»»åŠ¡å­¦ä¹ ã€‚</p><p>3ã€Sequential Multi-task Learningï¼šERNIE 2.0ä¸­æ–°æå‡ºçš„æ–¹æ³•ï¼Œæ¯å½“æœ‰æ–°ä»»åŠ¡å‡ºç°æ—¶ï¼Œä½¿ç”¨å…ˆå‰å­¦ä¹ çš„å‚æ•°æ¥åˆå§‹åŒ–æ¨¡å‹ï¼Œå¹¶åŒæ—¶è®­ç»ƒæ–°å¼•å…¥çš„ä»»åŠ¡å’ŒåŸå§‹ä»»åŠ¡ã€‚è¿™æ ·è§£å†³äº†å‰ä¸¤ç§æ–¹æ³•çš„é—®é¢˜ï¼Œå¯ä»¥éšæ—¶å¼•å…¥æ–°ä»»åŠ¡ï¼Œå¹¶ä¿ç•™å…ˆå‰å­¦åˆ°çš„çŸ¥è¯†ã€‚</p><p><img src="/2022/11/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Ernie-%E6%A8%A1%E5%9E%8B/ernie2_0_framework.png" alt></p><h3 id="å‚è€ƒ-1"><a href="#å‚è€ƒ-1" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://blog.csdn.net/qq_35386727/article/details/105947650">https://blog.csdn.net/qq_35386727/article/details/105947650</a></p><p><a href="https://zhuanlan.zhihu.com/p/460151166">https://zhuanlan.zhihu.com/p/460151166</a></p><p><a href="https://blog.csdn.net/weixin_43269174/article/details/98437096">https://blog.csdn.net/weixin_43269174/article/details/98437096</a></p><p><a href="https://www.jiqizhixin.com/articles/2020-04-28-3">https://www.jiqizhixin.com/articles/2020-04-28-3</a></p><p><a href="https://aijishu.com/a/1060000000199742">https://aijishu.com/a/1060000000199742</a></p><h2 id="Ernie-gram-å’Œ-Ernie-doc"><a href="#Ernie-gram-å’Œ-Ernie-doc" class="headerlink" title="Ernie gram å’Œ Ernie doc"></a>Ernie gram å’Œ Ernie doc</h2><p>ERNIE-Gram: Pre-Training with Explicitly N-Gram Masked Language Modeling for Natural Language Understanding</p><p>ERNIE-Doc: A Retrospective Long-Document Modeling TransformerÂ¶</p><h3 id="1-Ernie-Gram-çš„æ”¹è¿›"><a href="#1-Ernie-Gram-çš„æ”¹è¿›" class="headerlink" title="1. Ernie-Gram çš„æ”¹è¿›"></a>1. Ernie-Gram çš„æ”¹è¿›</h3><p>å¾ˆç®€å•ï¼Œå³åœ¨ MLM ä»»åŠ¡ä¸­ï¼ŒæŠŠæœ€å° mask å•ä½ä»å­—ç²’åº¦å˜æˆ n-gram ç²’åº¦ã€‚è¿™æ ·åšçš„ç†ç”±æ˜¯åŸæœ‰çš„ masking ç²’åº¦å¤ªç»†äº†ï¼Œåˆ‡åˆ†çš„æ—¶å€™å®¹æ˜“ç ´åè¯­ä¹‰å®Œæ•´æ€§ã€‚</p><p>å› æ­¤ Ernie-Gram ç›´æ¥å»é¢„æµ‹ä¸€ä¸ªn-gramè¯ï¼Œè€Œä¸æ˜¯é¢„æµ‹ä¸€ç³»åˆ—è¿ç»­çš„tokenï¼Œä»è€Œä¿è¯n-gramè¯çš„è¯­ä¹‰å®Œæ•´æ€§ã€‚</p><p>ERNIE-Gramä¸»è¦æå‡ºäº†ä¸¤ç§èåˆæ–¹å¼ï¼šExplictly N-gram MLM å’Œ Comprehensive N-gram Predictionã€‚</p><p>æ­¤å¤–ï¼ŒErnie-Gram è¿˜ä½¿ç”¨äº†RTDé¢„è®­ç»ƒä»»åŠ¡ï¼Œæ¥è¯†åˆ«æ¯ä¸ªtokenæ˜¯å¦æ˜¯ç”Ÿæˆçš„ã€‚</p><h3 id="2-Ernie-Doc-çš„æ”¹è¿›"><a href="#2-Ernie-Doc-çš„æ”¹è¿›" class="headerlink" title="2. Ernie-Doc çš„æ”¹è¿›"></a>2. Ernie-Doc çš„æ”¹è¿›</h3><p>Ernie-Doc å¯ä»¥å¯¹æ›´é•¿çš„è¾“å…¥åºåˆ—è¿›è¡Œå»ºæ¨¡ã€‚</p><h3 id="å‚è€ƒ-2"><a href="#å‚è€ƒ-2" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://zhuanlan.zhihu.com/p/376000666">https://zhuanlan.zhihu.com/p/376000666</a></p><p><a href="https://blog.csdn.net/jokerxsy/article/details/116482035">https://blog.csdn.net/jokerxsy/article/details/116482035</a></p><p><a href="https://www.sohu.com/a/468508378_129720">https://www.sohu.com/a/468508378_129720</a></p><p><a href="https://paddlepedia.readthedocs.io/en/latest/tutorials/pretrain_model/ERNIE-Gram.html">https://paddlepedia.readthedocs.io/en/latest/tutorials/pretrain_model/ERNIE-Gram.html</a></p><h2 id="Ernie-3-0"><a href="#Ernie-3-0" class="headerlink" title="Ernie 3.0"></a>Ernie 3.0</h2><p>ERNIE 3.0: Large-scale Knowledge Enhanced Pre-training for Language Understanding and Generation</p><p>ERNIE 3.0åŒæ—¶ç»“åˆäº†å°†è‡ªå›å½’å’Œè‡ªç¼–ç ç½‘ç»œï¼Œä»è€Œæ¨¡å‹åœ¨æ–‡æœ¬ç”Ÿæˆå’Œè¯­è¨€ç†è§£ä»»åŠ¡è¡¨ç°å‡å¾ˆå¥½ã€‚å¦å¤–ï¼ŒERNiE 3.0åœ¨é¢„è®­ç»ƒé˜¶æ®µä¸­å¼•å…¥äº†çŸ¥è¯†å›¾è°±æ•°æ®ã€‚</p><h3 id="1-ç½‘ç»œç»“æ„æ”¹è¿›"><a href="#1-ç½‘ç»œç»“æ„æ”¹è¿›" class="headerlink" title="1. ç½‘ç»œç»“æ„æ”¹è¿›"></a>1. ç½‘ç»œç»“æ„æ”¹è¿›</h3><p>ERNIE 3.0è®¾è®¡äº†ä¸Šä¸‹ä¸¤å±‚ç½‘ç»œç»“æ„ï¼šUniversal Representation Module å’Œ Task-specific Representation Moduleã€‚</p><p><img src="/2022/11/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Ernie-%E6%A8%A1%E5%9E%8B/ernie3_0_structure.png" alt></p><p>åœ¨æ¨¡å‹åº•å±‚ç»“æ„ä¸Šå…±äº«å‚æ•°ï¼Œç”¨äºè·å–è¯æ±‡ã€å¥æ³•ç­‰é€šç”¨çš„æŠ½è±¡ç‰¹å¾ï¼›åœ¨é¡¶å±‚å¯¹ä¸åŒä»»åŠ¡ä½¿ç”¨ç‹¬ç«‹å‚æ•°ï¼Œç”¨äºè·å–ç‰¹å®šä»»åŠ¡çš„ç‰¹å¾ã€‚</p><p>ERNIE 3.0è®¤ä¸ºä¸åŒçš„ä»»åŠ¡æ¨¡å¼ä¾èµ–çš„è‡ªç„¶è¯­è¨€çš„åº•å±‚ç‰¹å¾æ˜¯ç›¸åŒçš„ï¼Œæ¯”å¦‚è¯æ³•å’Œå¥æ³•ä¿¡æ¯ï¼Œç„¶è€Œä¸åŒçš„ä»»åŠ¡æ¨¡å¼éœ€è¦çš„ä¸Šå±‚å…·ä½“çš„ç‰¹å¾æ˜¯ä¸åŒçš„ã€‚è‡ªç„¶è¯­è¨€ç†è§£çš„ä»»åŠ¡å¾€å¾€å€¾å‘äºå­¦ä¹ è¯­ä¹‰è¿è´¯æ€§ï¼Œç„¶è€Œè‡ªç„¶è¯­ä¹‰ç”Ÿæˆä»»åŠ¡å´æœŸæœ›èƒ½å¤Ÿçœ‹è§æ›´é•¿çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p><p>ç”±äºè‡ªå›å½’æ¨¡å‹åœ¨æ–‡æœ¬ç”Ÿæˆä»»åŠ¡ä¸Šè¡¨ç°æ›´å¥½ï¼Œè‡ªç¼–ç æ¨¡å‹åœ¨è¯­è¨€ç†è§£ä»»åŠ¡ä¸Šè¡¨ç°æ›´å¥½ã€‚å› æ­¤ï¼ŒERNIE 3.0åœ¨ä¸Šå±‚ä½¿ç”¨äº†ä¸¤ä¸ªç½‘ç»œï¼Œä¸€ä¸ªç”¨äºèšç„¦è‡ªç„¶è¯­è¨€ç†è§£ï¼Œä¸€ä¸ªç”¨äºèšç„¦è‡ªç„¶è¯­è¨€ç”Ÿæˆä»»åŠ¡ã€‚ä¸åŒä»»åŠ¡é€‚é…æ›´åˆé€‚çš„ç½‘ç»œï¼Œèƒ½å¤Ÿæé«˜æ¨¡å‹åœ¨ç›¸åº”ä»»åŠ¡ä¸Šçš„è¡¨ç°ã€‚</p><p>åœ¨fine-tuningé˜¶æ®µï¼Œå¯ä»¥å›ºå®šUniversal Representation Moduleï¼Œåªå¾®è°ƒTask-specific Representation Moduleå‚æ•°ï¼Œæé«˜è®­ç»ƒæ•ˆç‡ã€‚</p><p><strong>1ï¼‰Universal Representation Module</strong></p><p>ä½¿ç”¨Transformer-XLä½œä¸ºéª¨å¹²ç½‘ç»œï¼ŒTransformer-XLå…è®¸æ¨¡å‹ä½¿ç”¨è®°å¿†å¾ªç¯æœºåˆ¶å»ºæ¨¡æ›´é•¿çš„æ–‡æœ¬åºåˆ—ä¾èµ–ã€‚</p><p>Transformer-XL åœ¨æ™®é€š transformer åŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ª recurrence memory module ç”¨äºå»ºæ¨¡é•¿æ–‡æœ¬ï¼Œé¿å…äº†æ™®é€š transformer ä¸­ç”±äºè¾“å…¥é•¿åº¦é™åˆ¶ï¼Œä¸å¾—ä¸å¯¹é•¿æ–‡æœ¬è¿›è¡Œåˆ‡åˆ†ä»è€Œå¯¼è‡´æŸå¤±é•¿è·ç¦»ä¾èµ–çš„é—®é¢˜ã€‚</p><p><strong>2ï¼‰Task-specific Representation Module</strong></p><p>åŒæ ·ä½¿ç”¨äº†Transformer-XLä½œä¸ºéª¨å¹²ç½‘ç»œï¼Œä½†ä½¿ç”¨äº†base sizeæ¨¡å‹ã€‚</p><h3 id="2-å¼•å…¥æ–°çš„é¢„è®­ç»ƒä»»åŠ¡"><a href="#2-å¼•å…¥æ–°çš„é¢„è®­ç»ƒä»»åŠ¡" class="headerlink" title="2. å¼•å…¥æ–°çš„é¢„è®­ç»ƒä»»åŠ¡"></a>2. å¼•å…¥æ–°çš„é¢„è®­ç»ƒä»»åŠ¡</h3><p>é™¤äº† Ernie 2.0 å¼•å…¥çš„å¾ˆå¤šä¸ªé¢„è®­ç»ƒä»»åŠ¡ä¹‹å¤–ï¼ŒErnie 3.0 è¿˜å¢åŠ äº† universal knowledge-text predictionï¼ˆUKTPï¼‰ä»»åŠ¡</p><p>ç»™å®šä¸€ä¸ªä¸‰å…ƒç»„\<head, relation, tail\>å’Œä¸€ä¸ªå¥å­ï¼ŒERNIE 3.0ä¼šmaskæ‰ä¸‰å…ƒç»„ä¸­çš„å®ä½“å…³ç³»relationï¼Œæˆ–è€…å¥å­ä¸­çš„å•è¯wordï¼Œç„¶åè®©æ¨¡å‹å»é¢„æµ‹è¿™äº›å†…å®¹ã€‚</head,></p><p>æ¨¡å‹åœ¨é¢„æµ‹ä¸‰å…ƒç»„ä¸­çš„å…³ç³»æ—¶ï¼Œéœ€è¦æ‰¾åˆ°å¯¹åº”å¥å­ä¸­çš„headå’Œtailè¯å¹¶ç¡®å®šä»–ä»¬ä¹‹é—´çš„è¯­ä¹‰å…³ç³»ï¼›è€Œæ¨¡å‹åœ¨é¢„æµ‹å¥å­ä¸­çš„è¯æ—¶ï¼Œåˆ™éœ€è¦åŒæ—¶è€ƒè™‘å¥å­ä¸­çš„ä¾å­˜ä¿¡æ¯ (dependency information) å’Œä¸‰å…ƒç»„ä¸­çš„é€»è¾‘å…³ç³» (logical relationship)ã€‚</p><p>è¿™ä¸ªä»»åŠ¡ä¹‹æ‰€ä»¥æœ‰æ•ˆï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬å‡è®¾ï¼šå¦‚æœä¸€ä¸ªå¥å­ä¸­åŒæ—¶å‡ºç°headå’Œtailä¸¤ä¸ªå®ä½“ï¼Œåˆ™è¿™ä¸ªå¥å­èƒ½å¤Ÿè¡¨è¾¾è¿™ä¸¤ä¸ªå®ä½“çš„å…³ç³»ã€‚</p><p><img src="/2022/11/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Ernie-%E6%A8%A1%E5%9E%8B/universal_knowledge_text_pred.png" alt></p><h3 id="3-é¢„è®­ç»ƒ-Trick"><a href="#3-é¢„è®­ç»ƒ-Trick" class="headerlink" title="3. é¢„è®­ç»ƒ Trick"></a>3. é¢„è®­ç»ƒ Trick</h3><p>ä¸ºäº†åŠ å¿«é¢„è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ¨¡å‹æ”¶æ•›é€Ÿåº¦ï¼Œæœ¬æ–‡æå‡ºäº†é€æ¸å¢åŠ è®­ç»ƒæ­£åˆ™å› å­ (training regularization factor) çš„æ–¹æ³•ã€‚</p><p>å…·ä½“æ¥è¯´å°±æ˜¯åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­é€æ­¥ä¸”åŒæ—¶å¢åŠ è¾“å…¥åºåˆ—é•¿åº¦ã€batch sizeã€å­¦ä¹ ç‡å’Œdropout rateã€‚</p><p>åœ¨ä¸€èˆ¬çš„transformerè®­ç»ƒä¸­éƒ½ä¼šä½¿ç”¨warm-upç­–ç•¥é€æ­¥å¢åŠ å­¦ä¹ ç‡ï¼Œæœ¬æ–‡æå‡ºäº†å°†batch sizeç­‰å…¶ä»–å› å­åŒæ—¶å¢åŠ çš„ç­–ç•¥ã€‚</p><h3 id="å‚è€ƒ-3"><a href="#å‚è€ƒ-3" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://alexyxwang.com/2021/12/09/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0-ERNIE-3-0-Large-scale-Knowledge-Enhanced-Pre-training-for-Language-Understanding-and-Generation/">https://alexyxwang.com/2021/12/09/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0-ERNIE-3-0-Large-scale-Knowledge-Enhanced-Pre-training-for-Language-Understanding-and-Generation/</a></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Ernie</tag>
      
      <tag>BERT</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘NLPæ•°æ®å¢å¼ºæ–¹æ³•è®°å½•</title>
    <link href="/2022/11/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%96%B9%E6%B3%95%E8%AE%B0%E5%BD%95/"/>
    <url>/2022/11/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%96%B9%E6%B3%95%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<!--more---><h2 id="1-åŸºäºè§„åˆ™çš„æ•°æ®å¢å¼º"><a href="#1-åŸºäºè§„åˆ™çš„æ•°æ®å¢å¼º" class="headerlink" title="1. åŸºäºè§„åˆ™çš„æ•°æ®å¢å¼º"></a>1. åŸºäºè§„åˆ™çš„æ•°æ®å¢å¼º</h2><p><a href="https://mp.weixin.qq.com/s?__biz=Mzk0NzMwNjU5Nw==&amp;mid=2247484450&amp;idx=1&amp;sn=953dd0856ee087d52a9c229f68281eb3&amp;chksm=c379ad28f40e243eade7677e16fb4146a257c32c39d8b364952c061bdba0af02b6a49a8d5cb0&amp;scene=178&amp;cur_album_id=2592122537619554305#rd">https://mp.weixin.qq.com/s?__biz=Mzk0NzMwNjU5Nw==&amp;mid=2247484450&amp;idx=1&amp;sn=953dd0856ee087d52a9c229f68281eb3&amp;chksm=c379ad28f40e243eade7677e16fb4146a257c32c39d8b364952c061bdba0af02b6a49a8d5cb0&amp;scene=178&amp;cur_album_id=2592122537619554305#rd</a></p><p>å¯¹äºåŒä¸€ä¸ªå¥å­ï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹çš„æ•°æ®å¢å¼ºæ–¹æ³•ï¼š</p><ul><li>éšæœºåˆ é™¤ä¸€ä¸ªè¯</li><li>éšæœºé€‰æ‹©ä¸€ä¸ªè¯ï¼Œç”¨å®ƒçš„åŒä¹‰è¯æ›¿æ¢</li><li>éšæœºé€‰æ‹©ä¸¤ä¸ªè¯ï¼Œç„¶åäº¤æ¢å®ƒä»¬çš„ä½ç½®</li><li>éšæœºé€‰æ‹©ä¸€ä¸ªè¯ï¼Œç„¶åéšæœºé€‰æ‹©ä¸€ä¸ªå®ƒçš„è¿‘ä¹‰è¯ï¼Œç„¶åéšæœºæ’å…¥å¥å­çš„ä»»æ„ä½ç½®</li></ul><p>é‡ç‚¹æ˜¯ â€œåŒä¹‰è¯æ›¿æ¢â€ï¼Œåœ¨é—®é¢˜ä¸­é€‰æ‹©ä¸€ä¸ªä¸æ˜¯åœæ­¢è¯çš„è¯ï¼Œå¹¶ç”¨ä¸€ä¸ªéšæœºé€‰æ‹©çš„åŒä¹‰è¯æ¥æ›¿æ¢å®ƒã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨nltk WordNetæ¥äº§ç”ŸåŒä¹‰è¯ï¼Œç”Ÿæˆä¸åŸé—®é¢˜ç­‰ä»·çš„æ–°é—®é¢˜ã€‚è¿™æ ·å°±å¾—åˆ°äº†ä¸€æ¡æ–°è®­ç»ƒæ•°æ®ã€‚</p><p>æˆ–è€…æˆ‘ä»¬è¯†åˆ«å®ä½“åï¼Œé€šè¿‡åä¹‰è¯è¿›è¡Œæ›¿æ¢ï¼Œåˆ™å¾—åˆ°è´Ÿä¾‹ã€‚</p><p>å…ˆä½¿ç”¨è§„åˆ™çš„æ–¹æ³•ä»¤å¯å›ç­”å’Œä¸å¯å›ç­”çš„é—®é¢˜å¹³è¡¡ï¼›åœ¨äºŒè€…ä¹‹é—´è¾¾åˆ°å¹³è¡¡ä¹‹åï¼Œæ•°æ®å¢å¼ºå³å¯ç»“æŸã€‚</p><h2 id="2-ä½¿ç”¨æ¨¡å‹ç”Ÿæˆæ•°æ®"><a href="#2-ä½¿ç”¨æ¨¡å‹ç”Ÿæˆæ•°æ®" class="headerlink" title="2. ä½¿ç”¨æ¨¡å‹ç”Ÿæˆæ•°æ®"></a>2. ä½¿ç”¨æ¨¡å‹ç”Ÿæˆæ•°æ®</h2><p>æˆ‘ä»¬å¸Œæœ›å¾—åˆ°ä¸€ä¸ªç”Ÿæˆæ¨¡å‹ï¼Œå°†æ¯ä¸ªç¯‡ç« ä¸å¯¹åº”çš„é—®é¢˜ä»¥åŠç­”æ¡ˆï¼Œè¾“å…¥ç”Ÿæˆæ¨¡å‹ï¼Œæ¨¡å‹è¾“å‡ºæ–°çš„é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜ä¸ç¯‡ç« å¾ˆç›¸å…³ï¼›æˆ–è€…ç›´æ¥è¾“å‡ºæ–°çš„é—®é¢˜å’Œæ–°çš„ç­”æ¡ˆï¼ˆè¿™ä¸ªæ¯”è¾ƒå›°éš¾ï¼‰ã€‚</p><p>UniLM æ¨¡å‹ï¼š</p><p><a href="https://xv44586.github.io/2020/08/22/qa-augmentation/">https://xv44586.github.io/2020/08/22/qa-augmentation/</a></p><p>GPT-2æ¨¡å‹ï¼š</p><p><a href="https://zhuanlan.zhihu.com/p/146382050">https://zhuanlan.zhihu.com/p/146382050</a></p><p>Pair-to-Sequence æ¨¡å‹ï¼š</p><p><a href="https://zhuanlan.zhihu.com/p/74514486">https://zhuanlan.zhihu.com/p/74514486</a></p><h2 id="3-ä½¿ç”¨å¯¹æŠ—è®­ç»ƒæ–¹æ³•æ‰°åŠ¨è¾“å…¥æ•°æ®"><a href="#3-ä½¿ç”¨å¯¹æŠ—è®­ç»ƒæ–¹æ³•æ‰°åŠ¨è¾“å…¥æ•°æ®" class="headerlink" title="3. ä½¿ç”¨å¯¹æŠ—è®­ç»ƒæ–¹æ³•æ‰°åŠ¨è¾“å…¥æ•°æ®"></a>3. ä½¿ç”¨å¯¹æŠ—è®­ç»ƒæ–¹æ³•æ‰°åŠ¨è¾“å…¥æ•°æ®</h2>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Data Augmentation</tag>
      
      <tag>NLP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç«èµ›æ‰“å¡ã€‘ç™¾åº¦æœç´¢ç«èµ›â€”â€”é—®ç­”æŠ½å–èµ›é“</title>
    <link href="/2022/11/20/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E7%99%BE%E5%BA%A6%E6%90%9C%E7%B4%A2%E7%AB%9E%E8%B5%9B%E2%80%94%E2%80%94%E9%97%AE%E7%AD%94%E6%8A%BD%E5%8F%96%E8%B5%9B%E9%81%93/"/>
    <url>/2022/11/20/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E7%99%BE%E5%BA%A6%E6%90%9C%E7%B4%A2%E7%AB%9E%E8%B5%9B%E2%80%94%E2%80%94%E9%97%AE%E7%AD%94%E6%8A%BD%E5%8F%96%E8%B5%9B%E9%81%93/</url>
    
    <content type="html"><![CDATA[<p>å…ˆå å‘ï¼Œç­‰æ¯”èµ›ç»“æŸè®°å½•æ¨¡å‹çš„æ€æƒ³</p><!--more---><p>11 æœˆè‡³ 12 æœˆ 15 ä½œå“æäº¤</p><p>ç»™çœ‹è¯¾ç¨‹çš„åŒå­¦ç®—åŠ›ï¼Œ100 å°æ—¶ï¼›fork é¡¹ç›®ã€åˆ›å»ºé¡¹ç›®ï¼Œæå‡ç”¨æˆ·ç­‰çº§ï¼Œä»è€Œè·å–å…è´¹æ—¶é•¿ï¼›ç›¸å½“å¤šå®é™…é¡¹ç›®ï¼›å…¶ä»–æ¯”èµ›ï¼›å…¶ä»–é¡¹ç›®çš„ baseline paddleNLP åœ¨ github</p><p>baselineï¼š<br>èµ›é“ 1 çš„ baseline 5043272 4960090<br>èµ›é“ 2 çš„ baseline TensorRT 5007642</p><p>åºåˆ—æ ‡æ³¨ä»»åŠ¡çš„æ€è·¯ã€QA çš„æ€è·¯</p><h2 id="æ€è·¯-1ï¼šä½¿ç”¨æŠ½å–å¼é—®ç­”æ€è·¯"><a href="#æ€è·¯-1ï¼šä½¿ç”¨æŠ½å–å¼é—®ç­”æ€è·¯" class="headerlink" title="æ€è·¯ 1ï¼šä½¿ç”¨æŠ½å–å¼é—®ç­”æ€è·¯"></a>æ€è·¯ 1ï¼šä½¿ç”¨æŠ½å–å¼é—®ç­”æ€è·¯</h2><h3 id="baseline1-æ°´å“¥"><a href="#baseline1-æ°´å“¥" class="headerlink" title="baseline1: æ°´å“¥"></a>baseline1: æ°´å“¥</h3><p><a href="https://aistudio.baidu.com/aistudio/projectdetail/5029712?forkThirdPart=1">https://aistudio.baidu.com/aistudio/projectdetail/5029712?forkThirdPart=1</a></p><p>notebooké€»è¾‘</p><pre><code>1. æŒ‰ç…§ã€‚åˆ†å¥ï¼Œéœ€è¦ç»Ÿè®¡è¿˜å¯ä»¥æŒ‰ç…§ä»€ä¹ˆè¿›è¡Œåˆ†å¥åˆ‡å‰²2. åˆ é™¤æ–‡æ¡£ä¸­å­˜åœ¨å•å¥è¶…é•¿çš„æ–‡æ¡£ï¼Œè¯¥éƒ¨åˆ†å¯ä»¥æå‡ï¼Œå¯ä»¥çœ‹ä¸€äº› case å†³å®šæ˜¯ç”±äºåˆ†è¯ä¸ä½³è¿˜æ˜¯æ•°æ®è´¨é‡ä½3. å¯¹è¾“å…¥æ•°æ®è¿›è¡Œç¼–ç ï¼Œ3.1 é—®é¢˜+ç­”æ¡ˆé•¿åº¦è¶…è¿‡ 512 çš„ä¼šè¢«è·³è¿‡3.2 è°ƒç”¨ tokenizer.encode æ¥å£ï¼Œå‚æ•° 1 æ˜¯ queryï¼Œå‚æ•° 2 æ˜¯ sentence3.3 ç¡®è®¤ start_pos å’Œ end_posäº§å‡ºçš„æ•°æ®ä¸º&#39;input_ids&#39;, &#39;token_type_ids&#39;, &#39;seq_len&#39;, &#39;attention_mask&#39;, &#39;position_ids&#39;, &#39;start_positions&#39;, &#39;end_positions&#39;4. æ•°æ®æ‰¹é‡æ‰“åŒ…ï¼Œä½¿ç”¨ batch_size = 6ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨å…¶ä»–çš„ batch_size5. è®¾ç½® SGD ä¼˜åŒ–å™¨ï¼Œlearning rate = 0.0005ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨å…¶ä»–çš„ä¼˜åŒ–å™¨ä»¥åŠlearning rateæŸå¤±å‡½æ•°è®¾ç½®ä¸º CrossEntropyLoss6. å¼€å§‹è®­ç»ƒ7. å¯¼å‡ºç»“æœ</code></pre><p>æ­¥éª¤ï¼š</p><ol><li>å…ˆè·‘é€š Fine tune ä¸­æ–‡é¢„è®­ç»ƒæ¨¡å‹</li><li>è°ƒè¯•ä¸€äº›è¶…å‚æ•°ï¼Œbatch_size/learning rate/epoch/ç­‰</li><li>åº”ç”¨å­¦ä¹ ç‡çš„ä¸€äº› trickï¼Œadam/å­¦ä¹ ç‡è¡°å‡ç­‰</li><li>æå‡æ•°æ®é¢„å¤„ç†çš„æ•ˆæœï¼Œä¸åŒåˆ‡åˆ†æ–¹æ³•ã€ä¸åŒå»ºæ¨¡ç›®æ ‡ã€æ•°æ®å¢å¼ºç­‰ï¼›</li><li>å°è¯•ä½¿ç”¨å…¶ä»–é¢„è®­ç»ƒæ¨¡å‹ï¼Œåšæ¨¡å‹è°ƒç ”å¹¶ä¿®æ”¹ï¼›</li><li>æå‡æ•°æ®åå¤„ç†çš„æ•ˆæœï¼Œæ¨¡å‹èåˆç­‰ï¼›</li></ol><p>ä¼šè®®æåˆ°çš„å…¶ä»–æ€æƒ³</p><p>æ•°æ®æ•´ç†æ‰‹æ®µï¼š</p><ol><li>ã€‚åˆ†æ®µ</li><li>æ»‘åŠ¨çª—å£</li></ol><p>ErnieForQuestionAnswering<br>ErnieTokenizer<br>Ernie ç»“æ„</p><p>é¢„å¤„ç†æ–¹æ³•è°ƒç ”<br>ä¸åŒæ¨¡å‹ã€ä¸åŒæ¡†æ¶è°ƒç ”<br>æ¨¡å‹èåˆè°ƒç ”</p><p>SEO çš„æ€è·¯åº”ç”¨åœ¨æ•°æ®å¢å¼º<br>æ··åˆç²¾åº¦<br>warm up</p><p>optimizer<br>xgboost/lightgbm<br>bert å‚æ•°ä¸ªæ•°</p><p>æ°´å“¥çš„ä¼˜åŒ–æ€è·¯ï¼š<br>1ã€ä»–çš„æ–¹æ¡ˆåªä½¿ç”¨äº† 5000 æ¡è®­ç»ƒæ•°æ®ï¼Œåç»­å¯ä»¥ä½¿ç”¨å…¨é‡æ•°æ®ï¼›<br>2ã€æ•°æ®é¢„å¤„ç†çš„æ”¹è¿›ï¼Œåˆ†å‰² sentences çš„æ–¹å¼ã€æ­£è´Ÿæ ·æœ¬æ¯”ä¾‹çš„é‡‡æ ·æ–¹å¼ã€å¥å­é•¿åº¦æ”¹å°ä¸€ç‚¹æ–¹ä¾¿è®­ç»ƒç­‰ï¼›<br>3ã€é¢„è®­ç»ƒæ¨¡å‹ï¼Œä½¿ç”¨æ›´ large çš„æ¨¡å‹ï¼›<br>4ã€é›†æˆæ¨¡å‹ï¼Œä½¿ç”¨å¤šæŠ˜æ•°æ®ï¼Œæˆ–è€…ä¸åŒæ–‡æœ¬å¤„ç†æ–¹æ³•æ¥è®­ç»ƒä¸åŒæ¨¡å‹ï¼Œç„¶åé›†æˆï¼›<br>5ã€æ ‡é¢˜ä¿¡æ¯å¯èƒ½ä¼šæœ‰ç”¨ï¼Œä¸åŒç±»åˆ«çš„å¸–å­ä¸­åŒ…å«ç­”æ¡ˆçš„æ¦‚ç‡ä¸åŒï¼›æŠŠæ ‡é¢˜ã€domain ç­‰ä¿¡æ¯ä½œä¸ºæ ‘æ¨¡å‹çš„è¾“å…¥è¿›è¡Œåˆ†ç±»ï¼›<br>6ã€ä¸åŒçš„å»ºæ¨¡æ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨ query-answer åŒ¹é…çš„æ€è·¯ï¼ˆnspï¼‰æ¥åšï¼Ÿæœ¬æ€è·¯æ˜¯ä¼ ç»Ÿçš„ QA æ–¹å¼è¿›è¡Œå»ºæ¨¡çš„ï¼Œæä¾› start å’Œ end<br>7ã€æ°´å“¥çš„æ•ˆæœå† 0.4~0.46ï¼Œå®˜æ–¹åŸºçº¿ä¼šæ›´å¥½ï¼Œå› ä¸ºå®˜æ–¹ç”¨åˆ°äº†æ›´å¤§çš„æ¨¡å‹ä»¥åŠæ›´å¤šçš„æ•°æ®ï¼›<br>8ã€å¿…é¡»ç”¨ paddle å¼€å‘ã€‚</p><h3 id="baseline2"><a href="#baseline2" class="headerlink" title="baseline2:"></a>baseline2:</h3><p><a href="https://aistudio.baidu.com/aistudio/projectdetail/4960090">https://aistudio.baidu.com/aistudio/projectdetail/4960090</a></p><h3 id="baseline3"><a href="#baseline3" class="headerlink" title="baseline3:"></a>baseline3:</h3><p><a href="https://aistudio.baidu.com/aistudio/projectdetail/5043272">https://aistudio.baidu.com/aistudio/projectdetail/5043272</a></p><p>é»˜è®¤å›ç­”ï¼šã€ã€‘è¯¦æƒ…è¯·çœ‹è§†é¢‘å›ç­”ã€‘ï¼Œé‡å¤è¶Šé«˜å¯èƒ½é—®é¢˜è¶Šå¤§<br>é•¿åº¦è¿‡çŸ­ï¼šNoanswer è¶Šå¯èƒ½<br>Noanswerï¼šæ•°æ®å  1/3ï¼Œå¯ä»¥æŠŠ haveanswer ä½œä¸ºäºŒåˆ†ç±»ï¼Œæˆ–è€…å¤šä»»åŠ¡å­¦ä¹ æ–¹æ³•</p><p>å¤šç‰‡æ®µæŠ½å–è¯¦è§å‚è€ƒèµ„æ–™ï¼Œæ¡†æ¶åº”è¯¥æ”¯æŒï¼›æ— ç­”æ¡ˆï¼Ÿ<br>å®˜æ–¹çš„ baseline ä¼˜åŒ–çš„æ¯”è¾ƒåº•å±‚<br>å¯¹æŠ—è®­ç»ƒ</p><h2 id="æ€è·¯-2ï¼šä½¿ç”¨åºåˆ—æ ‡æ³¨æ€è·¯"><a href="#æ€è·¯-2ï¼šä½¿ç”¨åºåˆ—æ ‡æ³¨æ€è·¯" class="headerlink" title="æ€è·¯ 2ï¼šä½¿ç”¨åºåˆ—æ ‡æ³¨æ€è·¯"></a>æ€è·¯ 2ï¼šä½¿ç”¨åºåˆ—æ ‡æ³¨æ€è·¯</h2><h3 id="baseline4"><a href="#baseline4" class="headerlink" title="baseline4:"></a>baseline4:</h3><p><a href="https://aistudio.baidu.com/aistudio/projectdetail/5030168">https://aistudio.baidu.com/aistudio/projectdetail/5030168</a></p><h2 id="å¯¹é½"><a href="#å¯¹é½" class="headerlink" title="å¯¹é½"></a>å¯¹é½</h2><p>æ»‘çª—è¦æå‰å¤„ç†</p><p>æ²¡æœ‰ç­”æ¡ˆå°±å°‘æ»‘çª—ï¼Œç­”æ¡ˆçŸ­å°±åˆ’å¾—å¿«ï¼Œç­”æ¡ˆé•¿è¿‡æ»‘åŠ¨çª—å£çš„å¤§å°ï¼Œåˆ™ä»¥æ»‘åŠ¨çª—å£çš„ä¸Šä¸‹æ ‡ä¸ºstartã€end</p><p>focal loss æŸå¤±å‡½æ•°</p><p>æ ‡æ³¨ 0-1 æ”¹é€ æˆé«˜æ–¯åˆ†å¸ƒ</p><p>åˆ†å±‚ä»»åŠ¡ï¼Œå…ˆé¢„æµ‹æ˜¯å¦å­˜åœ¨ç­”æ¡ˆï¼Œç„¶åé¢„æµ‹ç­”æ¡ˆçš„å¼€å§‹å’Œç»“æŸ</p><p>åˆ†è¯æŒ‰ç…§ [ï¼Œã€‚ã€ã€‘ã€] ç­‰ç­‰</p><p>æŸ¥çœ‹æ°´å“¥çš„ä»£ç ï¼Œæ£€éªŒ badcaseï¼›answer list æœ‰å¥½å¤šä¸ªç­”æ¡ˆçš„æƒ…å†µï¼Œä»–ä»¬å¦‚ä½•å¯¹ç­”æ¡ˆè¿›è¡Œå»ºæ¨¡çš„ï¼Ÿ</p><p>åºåˆ—æ ‡æ³¨é—®é¢˜</p><p>doc_stride å°çš„æƒ…å†µä¸‹ï¼Œæ­£è´Ÿæ ·æœ¬å¦‚ä½•å†³å®šï¼Ÿå¦‚æœ window å†…åªæœ‰éƒ¨åˆ†ç­”æ¡ˆï¼Œèƒ½ç®—ä½œæ­£æ ·æœ¬è¿˜æ˜¯è´Ÿæ ·æœ¬ï¼Ÿ</p><p>CRF</p><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>ç®—åŠ›å¦‚ä½•è·å–ï¼Ÿå¤§å®¶ç®—åŠ›å……è¶³å—</p><ol><li>å…¬å¼€ä»£ç ï¼Ÿä»£ç ä»“åº“</li><li>æ—¶é—´è¡¨ï¼›åˆ†å·¥</li></ol><p>å…³é”®æ—¶é—´èŠ‚ç‚¹ï¼š<br>è°ƒç ”æ¨¡å‹ã€æŒ–æ˜ baseline æ€æƒ³ã€æ•°æ®é¢„å¤„ç†ï¼Œæ•°æ®å¢å¼ºç»“æŸ<br>æäº¤ç¬¬ä¸€ç‰ˆæ¨¡å‹ï¼Œé¢„è®¡åˆ†æ•°<br>ä¸åŒæ•°æ®è®­ç»ƒå‡ºæ¥ä¸åŒçš„æ¨¡å‹ï¼Œå¤šä¸ªé«˜æ°´å¹³æ¨¡å‹è¿›è¡ŒæŠ•ç¥¨é›†æˆ</p><p><strong>11 æœˆè‡³ 12 æœˆ 15 ä½œå“æäº¤</strong></p><p>11 æœˆ 21 æ—¥â€”â€”11 æœˆ 27 æ—¥</p><p>11 æœˆ 28 æ—¥â€”â€”12 æœˆ 4 æ—¥</p><p>12 æœˆ 5 æ—¥â€”â€”12 æœˆ 11 æ—¥</p><p>12 æœˆ 12 æ—¥â€”â€”12 æœˆ 15 æ—¥</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Extractive Question Answering</tag>
      
      <tag>Competition</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘æå®æ¯…ML-HW7-ä½¿ç”¨BERTè§£å†³ç­”æ¡ˆæå–é—®é¢˜</title>
    <link href="/2022/11/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-HW7-%E4%BD%BF%E7%94%A8BERT%E8%A7%A3%E5%86%B3%E7%AD%94%E6%A1%88%E6%8F%90%E5%8F%96%E9%97%AE%E9%A2%98/"/>
    <url>/2022/11/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-HW7-%E4%BD%BF%E7%94%A8BERT%E8%A7%A3%E5%86%B3%E7%AD%94%E6%A1%88%E6%8F%90%E5%8F%96%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>æå®æ¯…è€å¸ˆä¸»è®²çš„æœºå™¨å­¦ä¹ MOOCè¯¾ç¨‹çš„ç¬”è®°ï¼Œæœ¬ç¯‡ä¼šè¯•ç€å®Œæˆä½œä¸š 7ï¼Œä»¥åŠåˆ†æé—®ç­”æ¨¡å‹çš„å»ºæ¨¡æ–¹æ³•å’Œä¼˜åŒ–æ–¹æ³•ã€‚</p><!--more---><p>æœ¬ç¯‡åšå®¢è®°å½•è¯¾ç¨‹ä½œä¸š 7 çš„åšæ³•ã€‚</p><h2 id="ä¸€ã€ä»»åŠ¡ç›®æ ‡"><a href="#ä¸€ã€ä»»åŠ¡ç›®æ ‡" class="headerlink" title="ä¸€ã€ä»»åŠ¡ç›®æ ‡"></a>ä¸€ã€ä»»åŠ¡ç›®æ ‡</h2><p>æŠ½å–å¼é—®ç­”ï¼ˆExtractive Question Answeringï¼‰ä»»åŠ¡æ˜¯æŒ‡ï¼šä»ä¸€æ®µæ–‡æœ¬ä¸­æå–å¯¹åº”é—®é¢˜çš„ç­”æ¡ˆã€‚</p><p>ä¸€èˆ¬è€Œè¨€ï¼Œæ¨¡å‹çš„è¾“å…¥ä¸ºæ–‡æœ¬ï¼ˆDocumentï¼‰å’Œé—®é¢˜ï¼ˆQuestionï¼‰ï¼Œè¾“å‡ºç­”æ¡ˆåœ¨æ–‡æœ¬ä¸­çš„ä½ç½®ã€‚å¦‚æœæ¨¡å‹è®¤ä¸ºæ–‡æœ¬ä¸­æ²¡æœ‰ç­”æ¡ˆï¼Œåˆ™è¾“å‡ºä¸€ä¸ªç‰¹å®šçš„å ä½ç¬¦ï¼Œæ¯”å¦‚â€œæ— ç­”æ¡ˆï¼ˆNoAnswerï¼‰â€ã€‚</p><p><img src="/2022/11/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-HW7-%E4%BD%BF%E7%94%A8BERT%E8%A7%A3%E5%86%B3%E7%AD%94%E6%A1%88%E6%8F%90%E5%8F%96%E9%97%AE%E9%A2%98/extractive_question_answering.png" alt></p><p>æœ¬æ¬¡ä½œä¸šçš„ baseline ä½¿ç”¨äº† BERT ä½œä¸ºé¢„è®­ç»ƒæ¨¡å‹ã€‚å…·ä½“åœ°ï¼Œä½¿ç”¨ [SEP] çš„è¿™ä¸ªç‰¹æ®Šå•è¯ï¼Œå°† Query å’Œ Document ä¸€èµ·ä½œä¸ºè¾“å…¥ã€‚ç„¶ååœ¨ Bert ä¸­è·å–è‰¯å¥½çš„ embedding(è¯å‘é‡)ï¼Œç„¶åå°†è¿™ä¸ªembeddingçš„ç»“æœæ¥å…¥ä¸€ä¸ªåˆ†ç±»å™¨ï¼Œåˆ†åˆ«å¾—åˆ°ç­”æ¡ˆåœ¨æ–‡ç« ä¸­ä½ç½®çš„idå’Œç»“æŸä½ç½®çš„idã€‚</p><p>å› ä¸ºæ•°æ®é›†ä¸­çš„ç­”æ¡ˆæ˜¯å¯ä»¥ç›´æ¥åœ¨æ–‡ç« ä¸­æŠ½å–å‡ºæ¥ï¼Œæ‰€ä»¥å¾—åˆ°ç­”æ¡ˆèµ·å§‹ä½ç½®çš„idå’Œç»“æŸä½ç½®çš„idå¯ä»¥ç›´æ¥æŠ½å–å‡ºæ­£ç¡®çš„ç­”æ¡ˆã€‚</p><h2 id="äºŒã€æ•°æ®åˆ†æ"><a href="#äºŒã€æ•°æ®åˆ†æ" class="headerlink" title="äºŒã€æ•°æ®åˆ†æ"></a>äºŒã€æ•°æ®åˆ†æ</h2><p>æœ¬æ¬¡æ•°æ®é›†æ˜¯ç¹ä½“ä¸­æ–‡çš„é˜…è¯»ç†è§£æ•°æ®é›†ã€‚ç±»ä¼¼çš„æ•°æ®é›†è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ <a href="https://rajpurkar.github.io/SQuAD-explorer/">SQuAD æ•°æ®é›†</a>ã€<a href="https://github.com/pluto-junzeng/ChineseSquad">ä¸­æ–‡ SQuAD</a></p><p>é¦–å…ˆæˆ‘ä»¬æ¥åˆ†æä¸‹æ•°æ®é›†ã€‚ä» <a href="https://www.kaggle.com/competitions/ml2021-spring-hw7/data">kaggle çš„å¯¹åº”é“¾æ¥</a> å°±èƒ½ä¸‹è½½æœ¬æ¬¡ä½œä¸šæ‰€éœ€çš„æ•°æ®é›†ã€‚</p><p>æ•°æ®é›†ç”±ä¸‰ä¸ªæ–‡ä»¶ç»„æˆï¼Œåˆ†åˆ«æ˜¯è®­ç»ƒé›†ï¼Œæµ‹è¯•é›†å’ŒéªŒè¯é›†ã€‚æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€æ®µ json æ–‡æœ¬ï¼Œå¯ä»¥ç”±ä»¥ä¸‹ python ä»£ç è¯»å–ï¼š</p><pre><code class="lang-py"># å°† è®­ç»ƒé›† è¯»å…¥å†…å­˜ï¼Œå¹¶æ•´ç†æˆ dict çš„æ•°æ®ç»“æ„def load_file(filename):    with open(filename, &#39;r&#39;, encoding=&#39;utf-8&#39;) as f:        data = json.loads(f.read())    return datatrain_file = &quot;../data/hw7_train.json&quot;test_file = &quot;../data/hw7_test.json&quot;dev_file = &quot;../data/hw7_dev.json&quot;train_data = load_file(train_file)test_data = load_file(test_file)dev_data = load_file(dev_file)print(&quot;Train Data Num: &#123;0&#125;\nTest Data Num: &#123;1&#125;\nDev Data Num: &#123;2&#125;&quot;.format(len(train_data[&quot;questions&quot;]), len(test_data[&quot;questions&quot;]), len(dev_data[&quot;questions&quot;])))</code></pre><p>ä»¥è®­ç»ƒæ•°æ®ä¸ºä¾‹ï¼Œæ•°æ®è¢«åˆ†æˆäº†ä¸¤éƒ¨åˆ†ï¼šquestions å’Œ paragraphs ã€‚</p><pre><code class="lang-py">train_data.keys()# [OUT]: dict_keys([&#39;questions&#39;, &#39;paragraphs&#39;])train_data[&quot;questions&quot;][0]# [OUT]: #  &#123;&#39;id&#39;: 0,#  &#39;paragraph_id&#39;: 3884,#  &#39;question_text&#39;: &#39;ç¾…é¦¬æ•™çš‡åˆ©å¥§ä¸‰ä¸–åœ¨800å¹´æ­£å¼åŠ å†•èª°ç‚ºç¾…é¦¬äººçš„çš‡å¸?&#39;,#  &#39;answer_text&#39;: &#39;æŸ¥ç†å¤§å¸&#39;,#  &#39;answer_start&#39;: 141,#  &#39;answer_end&#39;: 144&#125;train_data[&quot;paragraphs&quot;][3884]#[OUT]: &#39;åˆ©å¥§ä¸‰ä¸–é–‹å‰µçš„ä¼Šè˜‡é‡Œäºç‹æœåœ¨8ä¸–ç´€æœ«æœŸèµ°ä¸Šäº†æœ«è·¯...&#39;</code></pre><p>questions éƒ¨åˆ†å‚¨å­˜äº†é—®é¢˜çš„ç¼–å·ï¼Œä»¥åŠå¯¹åº”çš„æ–‡ç« å‚¨å­˜åœ¨ paragraphs ä¸­çš„ä¸‹æ ‡ã€‚ç”±äº questions å’Œ paragraphs çš„æ•°ç›®ä¸ç›¸ç­‰ï¼Œæœ‰å¤šä¸ªé—®é¢˜å¯¹åº”ä¸€ç¯‡æ–‡ç« ï¼Œå› æ­¤ questions éœ€è¦æŒ‡å®šæŸ¥æ‰¾çš„æ–‡ç« ã€‚</p><p>questions éƒ¨åˆ†è¿˜å‚¨å­˜æœ‰é—®é¢˜çš„æ–‡æœ¬ï¼Œä»¥åŠç­”æ¡ˆçš„æ–‡æœ¬ï¼Œä»¥åŠç­”æ¡ˆåœ¨æ–‡æ¡£ä¸­çš„å¼€å§‹ä½ç½®å’Œèµ·å§‹ä½ç½®ã€‚å¦‚æœè¦æå– paragraphs çš„ç­”æ¡ˆï¼Œç›´æ¥ä½¿ç”¨ <code>train_data[&quot;paragraphs&quot;][3884][answer_start:answer_end+1]</code> å³å¯ã€‚</p><p>paragraphs éƒ¨åˆ†åˆ™æ˜¯çº¯æ–‡æœ¬ã€‚</p><p>è®­ç»ƒé›†ã€æµ‹è¯•é›†å’ŒéªŒè¯é›†çš„å¤§å°å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>Train Data Question Num: 26936Test Data Question Num: 3493Dev Data Question Num: 3524Train Data Para Num: 8014Test Data Para Num: 1000Dev Data Para Num: 1000</code></pre><p>æµ‹è¯•é›† test_data åˆ™æ²¡æœ‰ç­”æ¡ˆï¼Œanswer ç›¸å…³å­—æ®µå…¨éƒ¨ä¸º None ã€‚</p><h2 id="ä¸‰ã€è¾“å‡ºæ ¼å¼è¦æ±‚å’Œå¾—åˆ†æ ‡å‡†"><a href="#ä¸‰ã€è¾“å‡ºæ ¼å¼è¦æ±‚å’Œå¾—åˆ†æ ‡å‡†" class="headerlink" title="ä¸‰ã€è¾“å‡ºæ ¼å¼è¦æ±‚å’Œå¾—åˆ†æ ‡å‡†"></a>ä¸‰ã€è¾“å‡ºæ ¼å¼è¦æ±‚å’Œå¾—åˆ†æ ‡å‡†</h2><p>å¦‚æœæƒ³è¦éªŒè¯è‡ªå·±çš„æ¨¡å‹æ•ˆæœï¼Œåˆ™æäº¤åˆ° kaggle ç³»ç»Ÿä¸­è¿›è¡Œè‡ªåŠ¨è¯„åˆ¤å³å¯ã€‚éœ€è¦ä½¿ç”¨æ¨¡å‹ç»™å‡º test æµ‹è¯•é›†çš„æ‰€æœ‰æ¨ç†ç»“æœï¼Œå¹¶å°†å…¶æ•´ç†æˆ <code>ID,Answer</code> çš„ csv æ–‡æœ¬ï¼Œç„¶åä¸Šä¼ ã€‚</p><p><img src="/2022/11/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-HW7-%E4%BD%BF%E7%94%A8BERT%E8%A7%A3%E5%86%B3%E7%AD%94%E6%A1%88%E6%8F%90%E5%8F%96%E9%97%AE%E9%A2%98/output_standard.png" alt></p><p>å¦‚æœæœ€ç»ˆæˆç»©èƒ½è¾¾åˆ° 0.84 ä»¥ä¸Šï¼Œåˆ™è¯´æ˜æˆç»©å·²ç»éå¸¸ä¼˜ç§€ã€‚</p><h2 id="å››ã€ä¸Šåˆ†æŠ€å·§"><a href="#å››ã€ä¸Šåˆ†æŠ€å·§" class="headerlink" title="å››ã€ä¸Šåˆ†æŠ€å·§"></a>å››ã€ä¸Šåˆ†æŠ€å·§</h2><h3 id="1-ä½¿ç”¨æ»‘åŠ¨çª—å£æˆªå–å¤šæ®µæ–‡æœ¬è§£å†³é•¿æ–‡æœ¬é—®é¢˜"><a href="#1-ä½¿ç”¨æ»‘åŠ¨çª—å£æˆªå–å¤šæ®µæ–‡æœ¬è§£å†³é•¿æ–‡æœ¬é—®é¢˜" class="headerlink" title="1. ä½¿ç”¨æ»‘åŠ¨çª—å£æˆªå–å¤šæ®µæ–‡æœ¬è§£å†³é•¿æ–‡æœ¬é—®é¢˜"></a>1. ä½¿ç”¨æ»‘åŠ¨çª—å£æˆªå–å¤šæ®µæ–‡æœ¬è§£å†³é•¿æ–‡æœ¬é—®é¢˜</h3><p>æ¨¡å‹çš„è¾“å…¥é•¿åº¦ä¸º é—®é¢˜é•¿åº¦ + ç¯‡ç« é•¿åº¦ + 3ï¼ˆç‰¹æ®Šå­—ç¬¦ä¸ªæ•°ï¼‰ã€‚å¯¹äº BERT æ¨¡å‹è€Œè¨€ï¼Œæœ€é•¿è¾“å…¥é•¿åº¦ä¸º 512ã€‚è¿™æ˜¯ç”± self-attention çš„è®¡ç®—é‡é™åˆ¶çš„ã€‚</p><p>ä¸‹é¢æ˜¯å¯¹è®­ç»ƒé›†çš„ paragraphs éƒ¨åˆ†çš„é•¿åº¦ç›´æ–¹å›¾ï¼š</p><p><img src="/2022/11/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-HW7-%E4%BD%BF%E7%94%A8BERT%E8%A7%A3%E5%86%B3%E7%AD%94%E6%A1%88%E6%8F%90%E5%8F%96%E9%97%AE%E9%A2%98/length_of_paragraphs.png" alt></p><p>å› æ­¤ä½¿ç”¨æ•´ç¯‡æ–‡ç« ä½œä¸ºè¾“å…¥æ˜¯ä¸ç°å®çš„ã€‚</p><p>ä½†æ˜¯å¦‚æœå‡å®šæ–‡ç« çš„å¤§éƒ¨åˆ†ä¿¡æ¯å¯¹å›ç­”é—®é¢˜æ²¡æœ‰å¸®åŠ©ï¼Œæˆ‘ä»¬å¯ä»¥åªä½¿ç”¨å±€éƒ¨çš„ä¿¡æ¯è¿›è¡Œè®­ç»ƒã€‚</p><p>å…·ä½“åšæ³•æ˜¯ï¼šè®­ç»ƒæ—¶ï¼Œåœ¨ç¯‡ç« çš„ç­”æ¡ˆé™„è¿‘ï¼Œä»…æˆªå–ä¸€ä¸ªå›ºå®šé•¿åº¦çš„çª—å£å†…çš„æ‰€æœ‰æ–‡æœ¬ï¼Œè¯¥çª—å£å°½å¯èƒ½å¤§ï¼Œæ¯”å¦‚ 32 ä¸ªå­—ç¬¦ã€‚</p><p>æ¨ç†æ—¶ï¼Œç”±äºæˆ‘ä»¬ä¸çŸ¥é“ç­”æ¡ˆåˆ°åº•åœ¨å“ªé‡Œï¼Œå› æ­¤åœ¨ç¯‡ç« ä¸Šæ»‘åŠ¨çª—å£åˆ‡åˆ†å¤šæ®µæ–‡æœ¬ï¼Œä»¤æ¨¡å‹åœ¨æ¯æ®µæ–‡æœ¬ä¸­å¯»æ‰¾ç­”æ¡ˆï¼Œæœ€å total_score è¯„åˆ†æœ€é«˜çš„å°±æ˜¯æœ€ç»ˆçš„è¾“å‡ºã€‚</p><p><img src="/2022/11/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-HW7-%E4%BD%BF%E7%94%A8BERT%E8%A7%A3%E5%86%B3%E7%AD%94%E6%A1%88%E6%8F%90%E5%8F%96%E9%97%AE%E9%A2%98/example_of_sliding_window.png" alt></p><p>ä»¥ä¸Šå›¾çš„ä¸¤ä¸ªçª—å£ä¸¾ä¾‹ï¼Œ window_1 çš„ç­”æ¡ˆä¸­ start_position çš„æ¨¡å‹è¯„åˆ†ä¸º 0.5ï¼Œ end_score ä¸º 0.4ï¼ŒåŠ èµ·æ¥ä¸º 0.9ï¼Œä½äº window_2 çš„ 1.0ï¼Œå› æ­¤æœ€ç»ˆé€‰æ‹© window_2 çš„ start_pos å’Œ end_posã€‚</p><h3 id="2-åŠ¨æ€è°ƒæ•´å­¦ä¹ ç‡"><a href="#2-åŠ¨æ€è°ƒæ•´å­¦ä¹ ç‡" class="headerlink" title="2. åŠ¨æ€è°ƒæ•´å­¦ä¹ ç‡"></a>2. åŠ¨æ€è°ƒæ•´å­¦ä¹ ç‡</h3><p>æ‰‹å·¥è°ƒæ•´å­¦ä¹ ç‡ï¼š</p><p><img src="/2022/11/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-HW7-%E4%BD%BF%E7%94%A8BERT%E8%A7%A3%E5%86%B3%E7%AD%94%E6%A1%88%E6%8F%90%E5%8F%96%E9%97%AE%E9%A2%98/learning_rate_decay.png" alt></p><p><a href="https://huggingface.co/docs/transformers/main_classes/optimizer_schedules#transformers.get_linear_schedule_with_warmup">https://huggingface.co/docs/transformers/main_classes/optimizer_schedules#transformers.get_linear_schedule_with_warmup</a></p><p><a href="https://pytorch.org/docs/stable/optim.html#how-to-adjust-learning-rate">https://pytorch.org/docs/stable/optim.html#how-to-adjust-learning-rate</a></p><h3 id="3-ä¿®æ”¹æ»‘åŠ¨çª—å£çš„æ­¥è¿›å­—ç¬¦æ•°"><a href="#3-ä¿®æ”¹æ»‘åŠ¨çª—å£çš„æ­¥è¿›å­—ç¬¦æ•°" class="headerlink" title="3. ä¿®æ”¹æ»‘åŠ¨çª—å£çš„æ­¥è¿›å­—ç¬¦æ•°"></a>3. ä¿®æ”¹æ»‘åŠ¨çª—å£çš„æ­¥è¿›å­—ç¬¦æ•°</h3><p>doc_stride æŒ‡æ»‘åŠ¨çª—å£æ¯æ¬¡ç§»åŠ¨çš„å­—ç¬¦ä¸ªæ•°ã€‚</p><p>å®é™…ä½¿ç”¨æ¨¡å‹åšæµ‹è¯•æ—¶ï¼Œå¦‚æœç­”æ¡ˆåœ¨çª—å£é™„è¿‘ï¼Œæ¨ªè·¨ä¸¤ä¸ªçª—å£çš„è¯ï¼Œç­”æ¡ˆä¼šè¢«æˆªæ–­ï¼Œæ¨¡å‹ä¼šçœ‹ä¸åˆ°æ­£ç¡®ç­”æ¡ˆã€‚ä¸ºäº†é˜²æ­¢ç­”æ¡ˆè¢«æˆªæ–­ï¼Œæ»‘åŠ¨çª—å£çš„æ­¥è¿›ä¸ªæ•°å¿…é¡»æ¯”æ»‘åŠ¨çª—å£æœ¬èº«è¦å°ï¼Œä¸‹ä¸€ä¸ªæˆªå–çš„å­—ç¬¦ä¸²è¦ä¸ä¸Šä¸€ä¸ªæœ‰ä¸€å®šé‡åˆï¼Œå³ overlapping window ã€‚</p><p>åº”è¯¥å‡å° doc_stride ï¼Œæ‰èƒ½åšåˆ°é‡å çª—å£çš„æ•ˆæœã€‚é»˜è®¤çš„ doc_stride ä¸º 150ï¼Œæˆ‘ä»¬å¯ä»¥å‡åŠä¸º 75ï¼Œä»¥å‡å°‘ç­”æ¡ˆè¢«æˆªæ–­çš„æ¦‚ç‡ã€‚</p><h3 id="4-æ»‘åŠ¨çª—å£åˆ‡åˆ†ä½ç½®çš„ä¼˜åŒ–"><a href="#4-æ»‘åŠ¨çª—å£åˆ‡åˆ†ä½ç½®çš„ä¼˜åŒ–" class="headerlink" title="4. æ»‘åŠ¨çª—å£åˆ‡åˆ†ä½ç½®çš„ä¼˜åŒ–"></a>4. æ»‘åŠ¨çª—å£åˆ‡åˆ†ä½ç½®çš„ä¼˜åŒ–</h3><p>baseline ä¸­é»˜è®¤å°†ç­”æ¡ˆçš„ä¸­ç‚¹ä½œä¸ºåˆ‡åˆ†çª—å£çš„ä¸­ç‚¹ï¼Œå¯¼è‡´åˆ‡åˆ†å‡ºæ¥çš„è®­ç»ƒé›†å¤§éƒ¨åˆ†éƒ½æ˜¯ <code>æ— ç”¨æ–‡æœ¬+ç­”æ¡ˆ+æ— ç”¨æ–‡æœ¬</code> ï¼Œæ¨¡å‹å­¦ä¹ åˆ°äº†å¾ˆå¤šæ— ç”¨æ–‡æœ¬ã€‚</p><p>å®é™…ä¸Šç­”æ¡ˆå¹¶ä¸æ€»åœ¨çª—å£çš„ä¸­é—´ï¼Œåœ¨æµ‹è¯•é˜¶æ®µçª—å£çš„åˆ’åˆ†æ˜¯éšæœºçš„ï¼Œç­”æ¡ˆå¯èƒ½å‡ºç°åœ¨çª—å£çš„å‰åŠéƒ¨åˆ†æˆ–è€…ååŠéƒ¨åˆ†ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦å¯¹è®­ç»ƒé›†çš„çª—å£åˆ‡åˆ†æ–¹å¼åšä¼˜åŒ–ï¼Œæ¯”å¦‚å¼•å…¥éšæœºæ€§ã€‚</p><h3 id="5-ä½¿ç”¨å…¶ä»–çš„é¢„è®­ç»ƒæ¨¡å‹"><a href="#5-ä½¿ç”¨å…¶ä»–çš„é¢„è®­ç»ƒæ¨¡å‹" class="headerlink" title="5. ä½¿ç”¨å…¶ä»–çš„é¢„è®­ç»ƒæ¨¡å‹"></a>5. ä½¿ç”¨å…¶ä»–çš„é¢„è®­ç»ƒæ¨¡å‹</h3><p><a href="https://huggingface.co/models">https://huggingface.co/models</a></p><h3 id="6-æ¨¡å‹åå¤„ç†"><a href="#6-æ¨¡å‹åå¤„ç†" class="headerlink" title="6. æ¨¡å‹åå¤„ç†"></a>6. æ¨¡å‹åå¤„ç†</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ è§„åˆ™ï¼Œæ¥è§„é¿æ¨¡å‹çš„æ˜¾è‘—é”™è¯¯ï¼Œæ¯”å¦‚ start_pos &gt; end_pos çš„æƒ…å†µæ˜¾ç„¶æ˜¯ä¸å¯èƒ½çš„ã€‚</p><h3 id="7-è‡ªåŠ¨æ··åˆç²¾åº¦"><a href="#7-è‡ªåŠ¨æ··åˆç²¾åº¦" class="headerlink" title="7. è‡ªåŠ¨æ··åˆç²¾åº¦"></a>7. è‡ªåŠ¨æ··åˆç²¾åº¦</h3><p>Pytorch è®­ç»ƒæ¨¡å‹é»˜è®¤ä½¿ç”¨ float32 ç²¾åº¦çš„æµ®ç‚¹æ•°ã€‚è‡ªåŠ¨æ··åˆç²¾åº¦ï¼ˆAutomatic mixed precisionï¼‰èƒ½å¤Ÿå…è®¸ä½ ä½¿ç”¨åŠç²¾åº¦æµ®ç‚¹æ•° float16 æ¥åŠ é€Ÿæ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ã€‚è¿™ä¸ªæ“ä½œåªåœ¨ T4/V100 ç­‰ GPU ä¸Šæœ‰ç”¨ã€‚</p><p><img src="/2022/11/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-HW7-%E4%BD%BF%E7%94%A8BERT%E8%A7%A3%E5%86%B3%E7%AD%94%E6%A1%88%E6%8F%90%E5%8F%96%E9%97%AE%E9%A2%98/automatic_mixed_precision.png" alt></p><p><a href="https://huggingface.co/docs/accelerate/index">https://huggingface.co/docs/accelerate/index</a></p><p><a href="https://pytorch.org/blog/accelerating-training-on-nvidia-gpus-with-pytorch-automatic-mixed-precision/">https://pytorch.org/blog/accelerating-training-on-nvidia-gpus-with-pytorch-automatic-mixed-precision/</a></p><h3 id="8-æ¢¯åº¦ç´¯åŠ "><a href="#8-æ¢¯åº¦ç´¯åŠ " class="headerlink" title="8. æ¢¯åº¦ç´¯åŠ "></a>8. æ¢¯åº¦ç´¯åŠ </h3><p>å½“æˆ‘ä»¬å¸Œæœ›ä½¿ç”¨æ›´å¤§çš„ batch_size ä½†æ˜¯æ˜¾å­˜ä¸å¤Ÿæ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ¢¯åº¦ç´¯åŠ ï¼ˆGradient Accumulationï¼‰çš„æ–¹æ³•æ¥èŠ‚çº¦æ˜¾å­˜ã€‚</p><p><a href="https://kozodoi.me/python/deep%20learning/pytorch/tutorial/2021/02/19/gradient-accumulation.html">https://kozodoi.me/python/deep%20learning/pytorch/tutorial/2021/02/19/gradient-accumulation.html</a></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>BERT</tag>
      
      <tag>Machine Learning</tag>
      
      <tag>MOOC</tag>
      
      <tag>Extraction-based Question Answering</tag>
      
      <tag>homework</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘é€šè¿‡æ–‡å­—æ£€ç´¢è§†é¢‘ç‰‡æ®µï¼šVCEDâ€”â€”è·¨æ¨¡æ€æ¨¡å‹ä»‹ç»</title>
    <link href="/2022/11/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED%E2%80%94%E2%80%94%E8%B7%A8%E6%A8%A1%E6%80%81%E6%A8%A1%E5%9E%8B%E4%BB%8B%E7%BB%8D/"/>
    <url>/2022/11/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED%E2%80%94%E2%80%94%E8%B7%A8%E6%A8%A1%E6%80%81%E6%A8%A1%E5%9E%8B%E4%BB%8B%E7%BB%8D/</url>
    
    <content type="html"><![CDATA[<p>æœ¬ç¯‡æ˜¯ VCED è·¨æ¨¡æ€æ£€ç´¢å·¥å…·ä»‹ç»çš„ç¬¬ä¸‰ç¯‡ï¼Œä»‹ç» VCED å®ç°è·¨æ¨¡æ€æ£€ç´¢çš„æ ¸å¿ƒæ¨¡å‹å’Œç®—æ³•ã€‚æœ¬ç¯‡æ–‡ç« åªèƒ½è¯´æµ…å°è¾„æ­¢ï¼Œæ›´æ·±å…¥çš„æ€è€ƒè¿˜éœ€åç»­è¡¥å……ã€‚</p><!--more---><h2 id="ä¸€ã€CLIP-æ¨¡å‹"><a href="#ä¸€ã€CLIP-æ¨¡å‹" class="headerlink" title="ä¸€ã€CLIP æ¨¡å‹"></a>ä¸€ã€CLIP æ¨¡å‹</h2><p>CLIPæ¨¡å‹å°†åŸæœ‰çš„å›¾åƒæ ‡ç­¾æ›¿æ¢ä¸ºå›¾åƒçš„æ–‡æœ¬æè¿°ä¿¡æ¯ï¼Œæ¥ç›‘ç£è§†è§‰ä»»åŠ¡çš„è®­ç»ƒï¼Œåœ¨ä¸‹æ¸¸ä»»åŠ¡ä¸­å¾—åˆ°äº†è¾ƒå¥½çš„zero-shotçš„ç»“æœã€‚</p><p>è¯¥æ¨¡å‹å°†å›¾åƒåˆ†ç±»é—®é¢˜è½¬æ¢ä¸ºå›¾æ–‡åŒ¹é…é—®é¢˜ï¼Œåœ¨ä¸‹æ¸¸ä»»åŠ¡ï¼ˆä»¥å›¾åƒåˆ†ç±»ä¸ºä¾‹ï¼‰çš„å®ç°ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåŸºäºå›¾åƒæ ‡ç­¾é›†åˆï¼Œæ„é€  text prompt å¹¶å°†å…¶é€šè¿‡ clip çš„ text encoder è·å¾—æ–‡æœ¬ç¼–ç å‘é‡ï¼Œä¹‹åï¼Œå°†å›¾ç‰‡é€šè¿‡ image encoder è·å¾—å›¾åƒç¼–ç å‘é‡ã€‚</p><p>å¯¹äºæ¯å¼ å›¾ç‰‡ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—å®ƒä¸æ‰€æœ‰ text prompt ä¹‹é—´çš„è·ç¦»ï¼ˆé€šè¿‡è®¡ç®—å›¾åƒç¼–ç å‘é‡ä¸æ–‡æœ¬ç¼–ç å‘é‡ä¹‹é—´çš„ä½™å¼¦ç›¸ä¼¼åº¦æˆ–ç‚¹ç§¯å¾—åˆ°ï¼‰ï¼Œé€‰æ‹©è·ç¦»æœ€è¿‘çš„ text prompt æ‰€å¯¹åº”çš„æ ‡ç­¾ä½œä¸ºè¯¥å¼ å›¾ç‰‡çš„åˆ†ç±»æ ‡ç­¾ã€‚è¿™æ ·çš„è½¬æ¢ä½¿å¾—æ¨¡å‹åœ¨ zero-shot åœºæ™¯ä¸‹å¯ä»¥è·å¾—ä¸ç›‘ç£å­¦ä¹ æ¯”è‚©çš„æ•ˆæœï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œclip æ¨¡å‹å¯å¹¿æ³›åº”ç”¨åˆ°å›¾åƒæ£€ç´¢ï¼Œè§†é¢‘ç†è§£ï¼Œå›¾åƒç”Ÿæˆç­‰å…¶ä»–é¢†åŸŸã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å¯¹ CLIP æ¨¡å‹è¿›è¡Œç®€å•çš„ä»‹ç»ã€‚</p><h3 id="1-CLIP-åŸç†"><a href="#1-CLIP-åŸç†" class="headerlink" title="1. CLIP åŸç†"></a>1. CLIP åŸç†</h3><p>CLIPå°†å›¾åƒçš„åˆ†ç±»ä»»åŠ¡è½¬åŒ–ä¸ºäº†å›¾æ–‡åŒ¹é…çš„ä»»åŠ¡ï¼Œå°†å›¾åƒä¿¡æ¯å’Œè¯­ä¹‰ä¿¡æ¯æ˜ å°„åˆ°åŒä¸€å¤šæ¨¡æ€è¯­ä¹‰ç©ºé—´ä¸‹ï¼Œå†ä½¿ç”¨å¯¹æ¯”å­¦ä¹ çš„æ–¹æ³•è¿›è¡Œè®­ç»ƒã€‚</p><p>åœ¨é¢„è®­ç»ƒé˜¶æ®µï¼Œæ¨¡å‹çš„æ•°æ®æ¥æºä¸ºä»äº’è”ç½‘ä¸Šæœé›†çš„4äº¿ä¸ªï¼ˆå›¾åƒï¼Œæ–‡æœ¬ï¼‰å¯¹ã€‚å‡è®¾batchä¸­æœ‰Nä¸ªï¼ˆå›¾åƒï¼Œæ–‡æœ¬ï¼‰å¯¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¾¿å¯ä»¥å¾—åˆ°Nä¸ªæ–‡æœ¬å‘é‡ï¼Œè®°ä¸ºï¼št1,t2,â€¦,tn,ä»¥åŠNä¸ªå›¾åƒå‘é‡ï¼Œè®°ä¸ºimg1,img2,â€¦,imgnã€‚æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯è®©t(i)ä¸img(i)ä¹‹é—´çš„è¯­ä¹‰è·ç¦»å°½å¯èƒ½æ¥è¿‘ï¼Œè€Œä¸å…¶ä»–çš„imgä¹‹é—´çš„è·ç¦»å°½å¯èƒ½æ‹‰è¿œã€‚å¦‚æœæˆ‘ä»¬å°†å…¶çœ‹ä¸ºä¸€ä¸ªçŸ©é˜µï¼Œå…¶ä¸­æ¨ªè½´æ–¹å‘ä¸ºæ–‡æœ¬ï¼Œçºµè½´æ–¹å‘ä¸ºå›¾åƒï¼Œä¸”æ–‡æœ¬ã€å›¾åƒçš„æ ‡å·å‡æŒ‰ç…§æ¬¡åºæ’åˆ—ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªN * Nçš„æ–¹é˜µï¼Œæ–¹é˜µçš„æ¯ä¸ªå…ƒç´ (i,j)çš„ä½ç½®ä¸ºt(i)ä¸img(j)ä¹‹é—´çš„è¯­ä¹‰ç›¸ä¼¼åº¦ï¼Œç›¸ä¼¼åº¦å¯é€šè¿‡ä½™å¼¦æˆ–ç‚¹ç§¯çš„æ–¹å¼è·å¾—ã€‚æˆ‘ä»¬çš„ä¼˜åŒ–ç›®æ ‡å°±æ˜¯è®©å¯¹è§’çº¿ä¸Šçš„å…ƒç´ çš„å€¼å°½å¯èƒ½çš„å¤§ï¼Œè€Œå…¶ä½™éƒ¨åˆ†çš„å€¼å°½å¯èƒ½åœ°å°ã€‚</p><p>åœ¨zero shoté˜¶æ®µï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸Šä¸‹æ–‡è¯­ä¹‰å»ºç«‹promptæ¨¡æ¿ï¼Œå¹¶å°†æ ‡ç­¾é›†åˆæ˜ å°„åˆ°è¯¥æ¨¡æ¿ä¸­ï¼Œå¾—åˆ°prompt textæ¨¡æ¿ã€‚æ¯”æ–¹è¯´ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦åšå¯¹(å¤§è±¡ï¼Œå†°ç®±ï¼Œèš‚èš)çš„ä¸‰åˆ†ç±»ä»»åŠ¡ï¼Œpromptæ¨¡æ¿ä¸º â€œè¿™æ˜¯ä¸€å¼ æœ‰å…³{ç±»åˆ«}çš„ç…§ç‰‡â€ï¼Œå°†åˆ†ç±»æ ‡ç­¾æ˜ å°„åˆ°promptæ¨¡æ¿åå¯ä»¥å¾—åˆ°é›†åˆï¼š{â€œè¿™æ˜¯ä¸€å¼ æœ‰å…³å¤§è±¡çš„ç…§ç‰‡â€â€œè¿™æ˜¯ä¸€å¼ æœ‰å…³å†°ç®±çš„ç…§ç‰‡â€â€œè¿™æ˜¯ä¸€å¼ æœ‰å…³èš‚èšçš„ç…§ç‰‡â€}ã€‚å¯¹é›†åˆä¸­çš„æ–‡æœ¬ï¼Œé€šè¿‡clipçš„text encoderä¹‹åï¼Œä¾¿å¯ä»¥å¾—åˆ°ä¸‰ä¸ªç±»åˆ«å¯¹åº”çš„æ–‡æœ¬ç‰¹å¾å‘é‡ï¼Œä¹‹åï¼Œå¯¹äºæ¯ä¸€å¼ éœ€è¦åˆ†ç±»çš„å›¾ç‰‡ï¼Œæˆ‘ä»¬åªéœ€è¦æ¯”è¾ƒè¯¥å›¾ç‰‡çš„ç‰¹å¾å‘é‡ä¸ä¸‰ä¸ªç±»åˆ«å¯¹åº”çš„æ–‡æœ¬ç‰¹å¾å‘é‡ä¹‹é—´çš„è¯­ä¹‰è·ç¦»ï¼Œå¹¶é€‰æ‹©æœ€è¿‘çš„é‚£ä¸€æ¡æ–‡æœ¬æ‰€å¯¹åº”çš„æ ‡ç­¾ä½œä¸ºå›¾åƒçš„åˆ†ç±»ç»“æœã€‚ å…·ä½“ç»†èŠ‚å¯å‚è€ƒè®ºæ–‡ã€ŠLearning transferable visual models from natural language supervisionã€‹ã€‚</p><h3 id="2-å…¶ä»–å¤šæ¨¡æ€æ¨¡å‹"><a href="#2-å…¶ä»–å¤šæ¨¡æ€æ¨¡å‹" class="headerlink" title="2. å…¶ä»–å¤šæ¨¡æ€æ¨¡å‹"></a>2. å…¶ä»–å¤šæ¨¡æ€æ¨¡å‹</h3><p>åœ¨å›¾æ–‡ç”Ÿæˆé¢†åŸŸï¼Œå¹¿ä¸ºäººçŸ¥çš„æ¨¡å‹æœ‰VAEï¼ŒGANç­‰ã€‚æœ€è¿‘å¤§ç«çš„diffusion modelåˆ™ä½¿ç”¨äº†ä¸€ç§éå¸¸æœ‰è¶£çš„æ€æƒ³æ¥åšç”Ÿæˆä»»åŠ¡ã€‚</p><h2 id="äºŒã€å¤šæ¨¡æ€ä¸è·¨æ¨¡æ€çš„åº”ç”¨ï¼šæ–°çš„äº¤äº’æ–¹å¼"><a href="#äºŒã€å¤šæ¨¡æ€ä¸è·¨æ¨¡æ€çš„åº”ç”¨ï¼šæ–°çš„äº¤äº’æ–¹å¼" class="headerlink" title="äºŒã€å¤šæ¨¡æ€ä¸è·¨æ¨¡æ€çš„åº”ç”¨ï¼šæ–°çš„äº¤äº’æ–¹å¼"></a>äºŒã€å¤šæ¨¡æ€ä¸è·¨æ¨¡æ€çš„åº”ç”¨ï¼šæ–°çš„äº¤äº’æ–¹å¼</h2><p>å¤šæ¨¡æ€åº”ç”¨å…è®¸æˆ‘ä»¬é€šè¿‡åˆ©ç”¨æ¯ç§æ–¹å¼çš„ä¼˜åŠ¿æ¥ç»“åˆä¸åŒçš„æ¨¡æ€ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¯¹è¯ä¸­åŒæ—¶ä½¿ç”¨å£è¯­å’Œä¹¦é¢è¯­è¨€ï¼Œä»¥ç¡®ä¿æˆ‘ä»¬ç›¸äº’ç†è§£ã€‚æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å›¾ç‰‡æˆ–è§†é¢‘ç­‰ä½œä¸ºè§†è§‰è¾…åŠ©å·¥å…·ï¼Œæ¥å¸®åŠ©è§£é‡Šä»…ç”¨æ–‡å­—éš¾ä»¥æè¿°çš„äº‹ç‰©ã€‚</p><p>è·¨æ¨¡æ€åº”ç”¨é’ˆå¯¹çš„æ˜¯æ¥è‡ªä¸åŒæ¨¡æ€ï¼ˆå¦‚è§†è§‰å’Œå¬è§‰ï¼‰çš„è¾“å…¥å’Œè¾“å‡ºã€‚å®ƒé€šè¿‡ä½¿ç”¨ä¸€ç§æ„Ÿå®˜çš„ä¿¡æ¯æ¥å¢å¼ºå¦ä¸€ç§æ„Ÿå®˜ï¼Œä½¿ç”¨æˆ·ä½“éªŒæ¯”ä¼ ç»Ÿåº”ç”¨æ›´ä¸Šä¸€å±‚æ¥¼ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è§¦æ‘¸çš„æ–¹å¼æ¥å¸®åŠ©æˆ‘ä»¬ç†è§£åœ¨è§¦è§‰åœ°å›¾æˆ–ç›²æ–‡æ–‡æœ¬ä¸­çœ‹åˆ°çš„å†…å®¹ã€‚æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å£°éŸ³æ¥å¸®åŠ©æˆ‘ä»¬å®šä½ç¯å¢ƒä¸­çš„äº‹ç‰©ï¼Œä¸€èˆ¬é€šè¿‡å£°çº³æˆ–é›·è¾¾æ¥å®Œæˆã€‚</p><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p><a href="https://medium.com/jina-ai/multimodal-and-crossmodal-applications-the-new-way-to-interact-d73d3e932990">https://medium.com/jina-ai/multimodal-and-crossmodal-applications-the-new-way-to-interact-d73d3e932990</a></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VCED</tag>
      
      <tag>multimodal</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘æå®æ¯…ML-Note8-è‡ªç›‘ç£å­¦ä¹ ã€BERT</title>
    <link href="/2022/11/17/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note8-%E8%87%AA%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E3%80%81BERT/"/>
    <url>/2022/11/17/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note8-%E8%87%AA%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E3%80%81BERT/</url>
    
    <content type="html"><![CDATA[<p>æå®æ¯…è€å¸ˆä¸»è®²çš„æœºå™¨å­¦ä¹ MOOCè¯¾ç¨‹çš„ç¬”è®°ï¼Œæœ¬ç¯‡è®°å½•çš„çŸ¥è¯†ç‚¹æœ‰ï¼šè‡ªç›‘ç£å­¦ä¹ ã€BERTã€GPTã€‚</p><!--more---><h2 id="äºŒã€è‡ªç›‘ç£å­¦ä¹ "><a href="#äºŒã€è‡ªç›‘ç£å­¦ä¹ " class="headerlink" title="äºŒã€è‡ªç›‘ç£å­¦ä¹ "></a>äºŒã€è‡ªç›‘ç£å­¦ä¹ </h2><p>è‡ªç›‘ç£å­¦ä¹ ç”± Yann LeCun åœ¨ 2019 å¹´é¦–æ¬¡æå‡ºï¼Œæ¨¡å‹ä¼šä»æ— æ ‡ç­¾çš„æ•°æ®ä¸­é‡‡å–æŸäº›æ–¹æ³•æ„å»ºæ ‡ç­¾ï¼Œç„¶åè¿›è¡Œå­¦ä¹ ã€‚ç”±äºè‡ªç›‘ç£å­¦ä¹ ä¸éœ€è¦äººä¸ºå¯¹æ•°æ®è¿›è¡Œæ ‡ç­¾ï¼Œå› æ­¤è‡ªç›‘ç£å­¦ä¹ å¯ä»¥çœ‹åšæ— ç›‘ç£å­¦ä¹ çš„ä¸€ç§ã€‚</p><p>è‡ªç›‘ç£å­¦ä¹ å¸¸ç”¨äºè®­ç»ƒå¤§è§„æ¨¡çš„è¯­è¨€æ¨¡å‹ï¼Œæ¯”å¦‚ BERTã€GPT ç­‰ã€‚ç”±äºè¿™äº›æ¨¡å‹çš„å‚æ•°é‡éå¸¸å¤§ï¼Œå› æ­¤è®­ç»ƒæ¨¡å‹æ‰€éœ€çš„æ•°æ®é‡ä¹Ÿéå¸¸å¤§ï¼Œç”šè‡³å¤§åˆ°äººå·¥æ ‡æ³¨æ— æ³•å®Œæˆçš„ç¨‹åº¦ã€‚</p><p>BERT çš„è®­ç»ƒæ•°æ®åŒ…å«æ•´ä¸ªç»´åŸºç™¾ç§‘çš„æ— æ ‡ç­¾å·æ–‡æœ¬çš„å¤§è¯­æ–™åº“ä¸­ï¼ˆè¶³è¶³æœ‰25äº¿å­—ï¼ï¼‰ å’Œå›¾ä¹¦è¯­æ–™åº“ï¼ˆæœ‰8äº¿å­—ï¼‰ï¼›ä½¿ç”¨è‡ªç›‘ç£å­¦ä¹ èƒ½æ›´é«˜æ•ˆã€æ›´ç›´æ¥åœ°ä»æ•°æ®ä¸­å­¦åˆ°çŸ¥è¯†ï¼Œé¿å…äººå·¥æ ‡æ³¨å¸¦æ¥çš„æˆæœ¬ã€‚</p><p>ä¸‹é¢ä»‹ç»å‡ ä¸ª BERT ä½¿ç”¨åˆ°çš„è‡ªç›‘ç£å­¦ä¹ æ–¹æ³•ã€‚</p><h3 id="1-Masking-Input"><a href="#1-Masking-Input" class="headerlink" title="1. Masking Input"></a>1. Masking Input</h3><p>BERT çš„è¾“å…¥æ˜¯ä¸€ä¸ªå¥å­ï¼Œå¥å­ç”±è‹¥å¹² token ç»„æˆã€‚Masking Input è®­ç»ƒä»»åŠ¡å°±æ˜¯éšæœº Mask å¥å­ä¸­çš„è¯ï¼Œæ¥æ„å»º {å¡«ç©ºé¢˜, ç­”æ¡ˆ} è¿™æ ·çš„æ•°æ®ã€‚</p><p>Mask æ–¹æ³•æœ‰å¾ˆå¤šï¼Œå¯ä»¥ç›´æ¥æ›¿æ¢ä¸º [MSK] è¿™ç§å…¨æ–°çš„ç‰¹æ®Šç¬¦å·ï¼Œæˆ–è€…æ›¿æ¢ä¸ºä»»æ„ä¸€ä¸ªå…¶ä»–å­—ã€‚</p><p>åˆ°åº•ç”¨å“ªä¸€ç§ä¹Ÿæ˜¯éšæœºå†³å®šçš„ã€‚åœ¨åŸæ–‡ä¸­ï¼Œ80%çš„æ•°æ®æ˜¯ç”± [MSK] ç‰¹æ®Šç¬¦å·æ›¿æ¢æ–¹æ³•æ¥ç”Ÿæˆçš„ï¼Œ10%çš„æ•°æ®æ˜¯ä»¥å…¶ä»–è¯è¿›è¡Œæ›¿æ¢ç”Ÿæˆçš„ï¼Œè¿˜æœ‰ 10%çš„æ•°æ®æ˜¯ä¿æŒåŸæ ·ç”Ÿæˆçš„ã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹ BERT ä¼šé¢„æµ‹ [MSK] å¯¹åº”çš„å­—æ˜¯å“ªä¸€ä¸ªï¼ŒæŠŠç›–ä½çš„éƒ¨åˆ†å¯¹åº”çš„è¾“å‡ºå‘é‡åšçº¿æ€§å˜æ¢ï¼Œåš softmax äº§å‡ºä¸€ä¸ªåˆ†å¸ƒã€‚ç”±æ­¤ï¼Œå˜æˆäº†ä¸€ä¸ªç›‘ç£å­¦ä¹ çš„åˆ†ç±»ä»»åŠ¡ã€‚</p><p><img src="/2022/11/17/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note8-%E8%87%AA%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E3%80%81BERT/masking_input.png" alt></p><p>è®­ç»ƒæ–¹æ³•ï¼šä¸ ground truth è¿›è¡Œæœ€å°åŒ–äº¤å‰ç†µã€‚</p><h3 id="2-Next-Sentence-Prediction"><a href="#2-Next-Sentence-Prediction" class="headerlink" title="2. Next Sentence Prediction"></a>2. Next Sentence Prediction</h3><p>é€‰æ‹©å¥å­Aå’ŒBä½œä¸ºé¢„è®­ç»ƒæ ·æœ¬ï¼šBæœ‰50%çš„å¯èƒ½æ˜¯Açš„ä¸‹ä¸€å¥ï¼Œä¹Ÿæœ‰50%çš„å¯èƒ½æ˜¯æ¥è‡ªè¯­æ–™åº“çš„éšæœºå¥å­ã€‚</p><pre><code>[cls] w1 w2 [sep] w3 w4 w5</code></pre><p>åªå– cls å¯¹åº”çš„è¾“å‡ºï¼Œç„¶åé¢„æµ‹ yes or noï¼Œåˆ¤æ–­è¿™ä¸¤ä¸ªå¥å­æ˜¯å¦ç›¸æ¥ã€‚</p><p><img src="/2022/11/17/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note8-%E8%87%AA%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E3%80%81BERT/next_sentence_pred.png" alt></p><p>è¿™ä¸€æ‹›ä¸å¤ªæœ‰ç”¨ï¼ŒRoBERTa èˆå¼ƒäº†è¯¥æ–¹æ³•ã€‚å¯èƒ½æ˜¯è¿™ä¸ªä»»åŠ¡å¤ªç®€å•äº†ï¼Œå­¦ä¸åˆ°å¤ªæœ‰ç”¨çš„ä¸œè¥¿ã€‚</p><h3 id="3-Sentence-Order-Prediction"><a href="#3-Sentence-Order-Prediction" class="headerlink" title="3. Sentence Order Prediction"></a>3. Sentence Order Prediction</h3><p>ALBERT çš„è®­ç»ƒæ–¹æ³•ï¼Œåˆ¤æ–­ä¸¤å¥çš„é¡ºåºæˆ–è€…é€†åºã€‚</p><h3 id="4-å¦‚ä½•è¯„ä¼°å­¦ä¹ çš„æ•ˆæœï¼Ÿ"><a href="#4-å¦‚ä½•è¯„ä¼°å­¦ä¹ çš„æ•ˆæœï¼Ÿ" class="headerlink" title="4. å¦‚ä½•è¯„ä¼°å­¦ä¹ çš„æ•ˆæœï¼Ÿ"></a>4. å¦‚ä½•è¯„ä¼°å­¦ä¹ çš„æ•ˆæœï¼Ÿ</h3><p>è¯„ä¼°æ–¹æ³•ï¼šGLUEï¼ˆGeneral Language Understanding Evaluationï¼‰</p><p>æœ‰ä¹å¤§ä»»åŠ¡ï¼Œè¯„ä¼°é¢„è®­ç»ƒæ¨¡å‹çš„å¥½åã€‚</p><p><img src="/2022/11/17/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note8-%E8%87%AA%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E3%80%81BERT/glue_score_9_missions.png" alt></p><h2 id="ä¸‰ã€å¦‚ä½•ä½¿ç”¨-BERT"><a href="#ä¸‰ã€å¦‚ä½•ä½¿ç”¨-BERT" class="headerlink" title="ä¸‰ã€å¦‚ä½•ä½¿ç”¨ BERT"></a>ä¸‰ã€å¦‚ä½•ä½¿ç”¨ BERT</h2><p>é¢„è®­ç»ƒæ¨¡å‹å®Œæˆè®­ç»ƒåï¼Œéœ€è¦å°†æ¨¡å‹å­¦ä¹ åˆ°çš„çŸ¥è¯†è¿ç§»åˆ°å…¶ä»–é¢†åŸŸã€‚è¿™ä¸ªè¿ç§»çš„è¿‡ç¨‹å«åšå¾®è°ƒï¼ˆfine-tuningï¼‰ã€‚å¾®è°ƒéœ€è¦ä¸€å®šçš„æ ‡æ³¨æ•°æ®ï¼Œè¿›è¡Œç›‘ç£å­¦ä¹ ã€‚æ ¹æ®ä¸‹æ¸¸ä»»åŠ¡ä¸åŒï¼Œæ‰€éœ€è¦çš„æ ‡æ³¨æ•°æ®ä¸åŒã€‚</p><h3 id="1-æ–‡æœ¬åˆ†ç±»ï¼š"><a href="#1-æ–‡æœ¬åˆ†ç±»ï¼š" class="headerlink" title="1. æ–‡æœ¬åˆ†ç±»ï¼š"></a>1. æ–‡æœ¬åˆ†ç±»ï¼š</h3><p>æ–‡æœ¬åˆ†ç±»ä»¥ä¸€ä¸²æ–‡æœ¬ä¸ºè¾“å…¥ï¼Œè¾“å‡ºä¸ºä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒï¼Œè¡¨æ˜è¯¥ä¸²æ–‡æœ¬è¢«åˆ†æˆå„ä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚</p><p>INPUT:</p><pre><code>[cls] w1 w2 w3</code></pre><p>OUTPUT:<br>çœ‹ [cls] çš„è¾“å‡ºåˆ†å¸ƒï¼Œç„¶åä¸çœŸå®æ ‡æ³¨è¿›è¡Œå¯¹æ¯”ï¼Œæœ€å°äº¤å‰ç†µã€‚</p><p><img src="/2022/11/17/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note8-%E8%87%AA%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E3%80%81BERT/bert_classification.png" alt></p><p>è®­ç»ƒæ—¶ï¼Œlinear çº¿æ€§å˜æ¢çŸ©é˜µçš„å‚æ•°æ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œé¢„è®­ç»ƒçš„å‚æ•°æ˜¯ç›´æ¥ä¸‹è½½çš„ã€‚</p><p>fine tuning æ—¶ï¼Œæ‰€æœ‰éƒ¨åˆ†çš„å‚æ•°éƒ½ä¼šæ¢¯åº¦ä¸‹é™è¿›è¡Œä¼˜åŒ–ã€‚</p><h3 id="2-åºåˆ—æ ‡æ³¨"><a href="#2-åºåˆ—æ ‡æ³¨" class="headerlink" title="2. åºåˆ—æ ‡æ³¨"></a>2. åºåˆ—æ ‡æ³¨</h3><p>è¾“å…¥ä¸€ä¸ªåºåˆ—ï¼Œè¾“å‡ºå¦ä¸€ä¸ªåºåˆ—ã€‚</p><pre><code>[cls] w1 w2 w3 w4</code></pre><p>BERT ä»¥ä¸€ä¸ª [cls] å¼€å¤´çš„åºåˆ—ä¸ºè¾“å…¥ï¼Œå¯¹äºæ¯ä¸ª tokenï¼Œéƒ½ä¼šäº§å‡ºå‘é‡ï¼Œå¹¶è½¬åŒ–ä¸ºé¢„æµ‹è¯¥ token çš„è¯æ€§ã€‚</p><p><img src="/2022/11/17/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note8-%E8%87%AA%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E3%80%81BERT/pos_tagging.png" alt></p><h3 id="3-è¯­ä¹‰æ¨ç†"><a href="#3-è¯­ä¹‰æ¨ç†" class="headerlink" title="3. è¯­ä¹‰æ¨ç†"></a>3. è¯­ä¹‰æ¨ç†</h3><p>Natural Language Inference ï¼Œè¾“å…¥ä¸¤ä¸ªå¥å­ï¼Œè¾“å‡ºä¸¤ä¸ªå¥å­çš„é€»è¾‘å…³ç³»ï¼Œå¤šåˆ†ç±»é—®é¢˜ã€‚</p><p><img src="/2022/11/17/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note8-%E8%87%AA%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E3%80%81BERT/natural_language_inference.png" alt></p><p>å¯ä»¥æ‰©å±•åˆ°è¯„è®ºç«‹åœºåˆ¤æ–­ï¼Œè¾“å…¥åŸæ–‡+è¯„è®ºï¼Œè¾“å‡ºè¯»è€…å¯¹æ­¤çš„æ€åº¦ï¼Œæ”¯æŒåå¯¹è¿˜æ˜¯ä¸­ç«‹ã€‚</p><h3 id="4-é—®ç­”ç³»ç»Ÿ"><a href="#4-é—®ç­”ç³»ç»Ÿ" class="headerlink" title="4. é—®ç­”ç³»ç»Ÿ"></a>4. é—®ç­”ç³»ç»Ÿ</h3><p>ç»™å®šä¸€ç¯‡æ–‡ç« +ä¸€ä¸ªé—®é¢˜ï¼Œæœºå™¨äº§å‡ºç­”æ¡ˆåœ¨åŸæ–‡ä¸­çš„ä½ç½®ï¼Œåˆ†åˆ«æ˜¯èµ·å§‹èŠ‚ç‚¹å’Œç»ˆæ­¢èŠ‚ç‚¹ã€‚</p><p><img src="/2022/11/17/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note8-%E8%87%AA%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E3%80%81BERT/extraction_based_question_answering.png" alt></p><p>æˆ‘ä»¬éœ€è¦å°†è¾“å…¥æ•´ç†æˆ query + documentï¼Œè¾“å‡ºä¸¤ä¸ªä½ç½®ï¼Œstart_pos å’Œ end_pos ï¼Œåœ¨åŸæ–‡ä¸­ [start_pos, end_pos] å†…çš„ä½ç½®å°±æ˜¯æ¨¡å‹è®¤ä¸ºçš„ç­”æ¡ˆã€‚å¦‚æœ start_pos å’Œ end_pos éƒ½ä¸º 0ï¼Œåˆ™æ¨¡å‹è®¤ä¸ºæ²¡æœ‰ç­”æ¡ˆã€‚</p><p><img src="/2022/11/17/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note8-%E8%87%AA%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E3%80%81BERT/extraction_based_qa_input_output.png" alt></p><p>åœ¨è¿™é‡Œå”¯ä¸€éœ€è¦ä»å¤´å¼€å§‹è®­ç»ƒçš„æ¨¡å—æ˜¯å¦‚ä¸Šå›¾æ‰€ç¤ºçš„<font color="Orange">æ©™è‰²</font>å’Œ<font color="Blue">è“è‰²</font>å‘é‡ã€‚</p><p>é¦–å…ˆæŠŠæ©™è‰²å‘é‡è·Ÿæ¯ä¸ª document çš„ N ä¸ªè¯å‘é‡å¯¹åº”çš„è¾“å‡ºå‘é‡åšç‚¹ç§¯ï¼Œç®—å‡º N ä¸ªæ•°å€¼ï¼Œç„¶åè¿‡ä¸€ä¸‹ softmax å¾—åˆ°æ¦‚ç‡åˆ†å¸ƒã€‚å–æœ€é«˜çš„å€¼ä¸º start_posã€‚</p><p><img src="/2022/11/17/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note8-%E8%87%AA%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E3%80%81BERT/extraction_based_qa_input_outout_2.png" alt></p><p>ç„¶åæŠŠè“è‰²å‘é‡è·Ÿæ¯ä¸ª document çš„ N ä¸ªè¯å‘é‡é”™å¯¹åº”çš„è¾“å‡ºå‘é‡åšç‚¹ç§¯ï¼Œç®—å‡º N ä¸ªæ•°å€¼ï¼ŒåŒæ ·å–æœ€å¤§åå†³å®š end_posã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹ç±»æ¯” self-attentionï¼Œå°±å¥½åƒæˆ‘ä»¬è¦è®­ç»ƒ query å‘é‡å¯¹åº”çš„ Q çŸ©é˜µã€‚</p><p>å®é™…ä¸Š BERT çš„è¾“å…¥åºåˆ—ä¸€èˆ¬ä¸º 512ï¼Œè€Œä¸€æ•´ç¯‡æ–‡ç« å¾€å¾€å·¨é•¿æ— æ¯”ï¼Œæˆ‘ä»¬ä¸€èˆ¬æ¯æ¬¡åªæ‹¿ä¸€å°æ®µä¸€å°æ®µ document è¿›è¡Œè®­ç»ƒï¼Œåªæœ‰ä¸€ä¸ªæœ‰æ­£ä¾‹ã€‚</p><h3 id="â€”â€”â€”"><a href="#â€”â€”â€”" class="headerlink" title="â€”â€”â€”"></a>â€”â€”â€”</h3><p>Bert æŸå¤±å‡½æ•°ç»„æˆ</p><p>ç¬¬ä¸€éƒ¨åˆ†æ˜¯æ¥è‡ª Mask-LM çš„å•è¯çº§åˆ«åˆ†ç±»ä»»åŠ¡ï¼›<br>å¦ä¸€éƒ¨åˆ†æ˜¯å¥å­çº§åˆ«çš„åˆ†ç±»ä»»åŠ¡ï¼›</p><p>æ‰€ç”¨çš„æŸå¤±å‡½æ•°å«åšè´Ÿå¯¹æ•°ä¼¼ç„¶å‡½æ•°</p><p>BERT åˆ™æ˜¯é€šè¿‡ã€Œtransformer ç¼–ç å™¨ã€æ¨¡å—æ„å»ºçš„ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>BERT</tag>
      
      <tag>Machine Learning</tag>
      
      <tag>MOOC</tag>
      
      <tag>Self-Supervised Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘é€šè¿‡æ–‡å­—æ£€ç´¢è§†é¢‘ç‰‡æ®µï¼šVCEDä¹‹Jina</title>
    <link href="/2022/11/17/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED%E4%B9%8BJina/"/>
    <url>/2022/11/17/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED%E4%B9%8BJina/</url>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯ VCED è·¨æ¨¡æ€æ£€ç´¢ä»‹ç»çš„ç¬¬äºŒç¯‡ï¼Œæœ¬ç¯‡å°†ä»‹ç» VCED å·¥å…·èƒŒåçš„å…³é”®æ¡†æ¶ï¼šJinaã€‚</p><!--more---><p>Jina æ˜¯ä¸€ä¸ªèƒ½å¤Ÿå°†éç»“æ„åŒ–æ•°æ®ä¾‹å¦‚å›¾åƒï¼Œæ–‡æ¡£è§†é¢‘ç­‰ï¼Œè½¬æ¢ä¸ºå‘é‡æ•°æ®çš„å·¥å…·ã€‚åˆ©ç”¨è¯¥å·¥å…·ï¼Œå¯ä»¥å¿«é€Ÿå®ç°å¤šæ¨¡æ€çš„æ£€ç´¢ä»»åŠ¡ã€‚å¦å¤–ï¼ŒJina ä¹Ÿæ˜¯ä¸€å®¶æ–°çš„å…¬å¸ï¼Œç›®å‰æ­£åœ¨ä¼˜åŒ–ä¸­ã€‚ä»–ä»¬çš„ <a href="https://github.com/jina-ai/jina">GitHub Repo</a>ã€‚</p><p><img src="/2022/11/17/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED%E4%B9%8BJina/jina%20introduction.png" alt></p><p>å…¶å® Jina å…¬å¸æä¾›äº†åŒ…æ‹¬å‘é‡åŒ–ã€æœåŠ¡åŒ–åˆ°å®é™…éƒ¨ç½²çš„å…¨éƒ¨å·¥å…·ï¼Œå¯ä»¥æ”¯æŒåŒ…æ‹¬ PDF æ£€ç´¢ã€è§†é¢‘æ£€ç´¢åœ¨å†…çš„å¾ˆå¤šæ£€ç´¢æ“ä½œã€‚</p><p><img src="/2022/11/17/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED%E4%B9%8BJina/jina_å…¨å®¶æ¡¶.png" alt></p><h2 id="1-Jina-å®‰è£…"><a href="#1-Jina-å®‰è£…" class="headerlink" title="1. Jina å®‰è£…"></a>1. Jina å®‰è£…</h2><p>åœ¨ windows ç³»ç»Ÿä¸Šçš„å®‰è£…æ•™ç¨‹ï¼š</p><p><a href="https://blog.csdn.net/Jina_AI/article/details/122820646">https://blog.csdn.net/Jina_AI/article/details/122820646</a></p><p>æœ¬æ–‡å°†è®°å½•åœ¨ mac ä¸Šå®‰è£… jina çš„è¿‡ç¨‹ã€‚</p><p>é¦–å…ˆç¡®ä¿è‡ªå·±çš„ Python ç‰ˆæœ¬åœ¨ 3.7 åŠä»¥ä¸Šï¼Œç„¶åé€šè¿‡ä¸‹åˆ—æ–¹å¼å®‰è£… jinaï¼š</p><pre><code class="lang-sh"># via pypipip install jina# via condaconda install jina -c conda-forge# via dockerdocker pull jinaai/jina:latest</code></pre><p>ä½¿ç”¨ pip å®‰è£… jina æ—¶ï¼Œæç¤ºï¼š</p><pre><code>lz4/_version.c:32:10: fatal error: &#39;Python.h&#39; file not foundERROR: Failed building wheel for lz4Successfully built jina docarray grpcio jcloud python-multipartFailed to build lz4ERROR: Could not build wheels for lz4, which is required to install pyproject.toml-based projects</code></pre><p>åŸå› ï¼šç³»ç»Ÿä¸­æ²¡æœ‰ Python.hï¼Œæ˜¯å› ä¸ºæ²¡æœ‰å®‰è£… python çš„å¼€å‘ç‰ˆï¼Œå³ Python-devel è¿™ä¸ªåŒ…ã€‚</p><h2 id="2-Jina-çš„åŸºæœ¬ç»„ä»¶"><a href="#2-Jina-çš„åŸºæœ¬ç»„ä»¶" class="headerlink" title="2. Jina çš„åŸºæœ¬ç»„ä»¶"></a>2. Jina çš„åŸºæœ¬ç»„ä»¶</h2><p>è¯¦ç»†çš„æ–‡æ¡£å¯ä»¥å‚è€ƒ<a href="https://docs.jina.ai/fundamentals/architecture-overview/">è¿™é‡Œ</a>ã€‚</p><p>Documentã€Executor å’Œ Flow æ˜¯ Jina çš„ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µï¼Œåˆ†åˆ«ä»£è¡¨æ•°æ®ç±»å‹ï¼Œç®—æ³•å•å…ƒï¼Œå’Œå·¥ä½œæµã€‚</p><p>ç®€å•æ¥è¯´ï¼ŒDocument æ˜¯ä¸€ç§æ•°æ®ç±»å‹çš„å®šä¹‰æ–¹å¼ï¼ŒFlow åˆ™æ˜¯è´Ÿè´£ Document åœ¨æ•´ä¸ªæ¶æ„é—´çš„ä¼ è¾“ï¼Œæœ€å Executor åˆ™å®ç°å…·ä½“çš„ç®—æ³•åŠŸèƒ½ã€‚</p><p>æ¯”å¦‚ä¸‹é¢è¿™ä¸ªç®€å•çš„ Demoï¼Œå®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªè¯·æ±‚ç»™æœåŠ¡å™¨ç«¯ï¼ŒæœåŠ¡å™¨ç«¯å¤„å­˜åœ¨å®šä¹‰å¥½çš„ Flowï¼ŒFlow åˆ™ä¼šæŠŠä¸åŒçš„ Executor ä¸²è”èµ·æ¥ã€‚è¿™é‡Œæœ‰ä¸¤ä¸ªå·²ç»å®šä¹‰å¥½çš„ Executorï¼Œåˆ†åˆ«æ‰§è¡Œå°†å­—ç¬¦ä¸²æœ«å°¾æ·»åŠ ç‰¹å®šå­—ç¬¦çš„æ“ä½œã€‚</p><p>æœåŠ¡å™¨ç«¯ä»£ç ï¼š</p><pre><code class="lang-py">from jina import DocumentArray, Executor, Flow, requestsclass FooExec(Executor):    @requests    async def add_text(self, docs: DocumentArray, **kwargs):        for d in docs:            d.text += &#39;hello, world!&#39;class BarExec(Executor):    @requests    async def add_text(self, docs: DocumentArray, **kwargs):        for d in docs:            d.text += &#39;goodbye!&#39;f = Flow(port=12345).add(uses=FooExec, replicas=3).add(uses=BarExec, replicas=2)with f:    f.block()</code></pre><p>å®¢æˆ·ç«¯ä»£ç ï¼š</p><pre><code class="lang-py">from jina import Client, DocumentArrayc = Client(port=12345)r = c.post(&#39;/&#39;, DocumentArray.empty(2))print(r.texts)</code></pre><p>è¿è¡Œé€»è¾‘åŠ¨å›¾ä¸ºï¼š</p><p><img src="https://docs.jina.ai/_images/arch-overview.svg" alt="jina_overview"></p><p>è¿”å›ç»“æœä¸ºï¼š</p><pre><code>[&#39;hello, world!goodbye!&#39;, &#39;hello, world!goodbye!&#39;]</code></pre><h2 id="3-å¯åŠ¨-jina-ç¤ºä¾‹"><a href="#3-å¯åŠ¨-jina-ç¤ºä¾‹" class="headerlink" title="3. å¯åŠ¨ jina ç¤ºä¾‹"></a>3. å¯åŠ¨ jina ç¤ºä¾‹</h2><p>å®‰è£…å®Œæ¯•åï¼Œæ–°å»º toy.yml ä½œä¸º gRPC æœåŠ¡çš„é…ç½®æ–‡ä»¶ï¼š</p><pre><code class="lang-yaml"># toy.ymljtype: Flowwith:  port: 51000  protocol: grpcexecutors:- uses: FooExecutor  name: foo  py_modules:    - test.py- uses: BarExecutor  name: bar  py_modules:    - test.py</code></pre><p>ç„¶åå®šä¹‰ test.py ï¼Œå®šä¹‰è‹¥å¹² Executor çš„å¤„ç†é€»è¾‘ï¼š</p><p>test.py</p><pre><code class="lang-py"># åˆ›å»º test.py æ–‡ä»¶ä¸ YAML æ–‡ä»¶åœ¨åŒä¸€ç›®å½•ä¸‹# å¯¼å…¥ documentã€executor å’Œ flow ä»¥åŠ requests è£…é¥°å™¨from jina import DocumentArray, Executor, requests, Document# ç¼–å†™ FooExecutor ä¸ BarExecutor ç±»ï¼Œç±»ä¸­å®šä¹‰äº†å‡½æ•° foo å’Œ bar# è¯¥å‡½æ•°ä»ç½‘ç»œè¯·æ±‚æ¥æ”¶ DocumentArray (å…ˆæš‚æ—¶ä¸éœ€è¦ç†è§£å®ƒæ˜¯ä»€ä¹ˆ)ï¼Œå¹¶åœ¨å…¶å†…å®¹åé¢é™„åŠ  &quot;foo was here&quot; ä¸ &quot;bar was here&quot;class FooExecutor(Executor):    @requests # ç”¨äºæŒ‡å®šè·¯ç”±ï¼Œç±»ä¼¼ç½‘é¡µè®¿é—® /index å’Œ /login ä¼šè¢«è·¯ç”±åˆ°ä¸åŒçš„æ–¹æ³•ä¸Šæ˜¯ç”¨æ ·çš„æ¦‚å¿µï¼Œå…³äº request ä¸‹é¢ä¼šå†è¿›è¡Œè¯¦ç»†ä»‹ç»    def foo(self, docs: DocumentArray, **kwargs):        docs.append(Document(text=&#39;foo was here&#39;))class BarExecutor(Executor):    @requests    def bar(self, docs: DocumentArray, **kwargs):        docs.append(Document(text=&#39;bar was here&#39;))</code></pre><p>ç„¶åä½¿ç”¨è¯¥æŒ‡ä»¤å¯åŠ¨æœåŠ¡ï¼š</p><pre><code class="lang-sh">jina flow --uses toy.yml</code></pre><p>å¯åŠ¨æœåŠ¡ä¹‹åæ”¾ç€åˆ«åŠ¨ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ª shell çª—å£ï¼›ç„¶åæ–°å»º client.pyï¼Œç”¨äºå‚¨å­˜å®¢æˆ·ç«¯è¯·æ±‚æ¶ˆæ¯çš„é€»è¾‘ï¼š</p><p>client.py</p><pre><code class="lang-py"># ä» Jina ä¸­å¯¼å…¥è¿æ¥çš„å®¢æˆ·ç«¯ä¸ Documentfrom jina import Client, Documentc = Client(host=&#39;grpc://0.0.0.0:51000&#39;)  # å¦‚æœè¿è¡Œæç¤ºå¤±è´¥ï¼Œå¯å°è¯•ä½¿ç”¨localhostresult = c.post(&#39;/&#39;, Document()) # å°†ä¸€ä¸ªç©ºçš„ Document ä¼ åˆ°æœåŠ¡ç«¯æ‰§è¡Œprint(result.texts)</code></pre><p>éšåå¯åŠ¨å®¢æˆ·ç«¯ï¼š</p><pre><code class="lang-sh">python client.py</code></pre><p>æœ€ç»ˆä¼šæ‰“å°å‡ºä¸€ä¸ª â€œ[â€˜â€™, â€˜foo was hereâ€™, â€˜bar was hereâ€™]â€ å­—ç¬¦ä¸²ã€‚</p><h2 id="4-DocArray-ç®€ä»‹"><a href="#4-DocArray-ç®€ä»‹" class="headerlink" title="4. DocArray ç®€ä»‹"></a>4. DocArray ç®€ä»‹</h2><p>DocArray ä¹Ÿæ˜¯ä¸€ä¸ªå·¥å…·åŒ…ï¼Œå®ƒè¢«æ•´åˆåœ¨ Jina ä¸­ï¼Œä½œä¸º Jina çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œæ–¹ä¾¿å®ç°è·¨æ¨¡æ€åº”ç”¨ã€‚å…³äº DocArray çš„å…¶ä»–èµ„æ–™å¯ä»¥å‚è€ƒ<a href="https://docarray.jina.ai/">è¿™é‡Œ</a>ã€‚</p><p>DocArray ç±»æ¯” Pandasï¼Œå…¶åŸºæœ¬æ•°æ®ç±»å‹ä¸º Documentï¼Œå¹¶æ•´åˆäº†å¤šç§æ“ä½œ Document çš„æ–¹æ³•ã€‚DocArray å¯¹æ•°æ®é‡‡ç”¨åˆ†å±‚ç»“æ„å­˜å‚¨ã€‚</p><blockquote><p>å¯ä»¥åˆ©ç”¨ DocArray å®ç°åœ¨ç¬¬ä¸€å±‚å­˜å…¥è¯¥ç”»é¢çš„è§†é¢‘ï¼Œç¬¬äºŒå±‚å­˜å…¥è¯¥è§†é¢‘çš„ä¸åŒé•œå¤´ï¼Œç¬¬ä¸‰å±‚å¯ä»¥æ˜¯è§†é¢‘çš„æŸä¸€å¸§ï¼Œä¹Ÿå¯ä»¥å­˜å‚¨å°å°è¯ç­‰ç­‰ï¼Œè¿™ä½¿å¾—ä½ å¯ä»¥é€šè¿‡å°è¯å»æœç´¢åˆ°è§†é¢‘ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è§†é¢‘å®šä½æŸå‡ å¸§ç”»é¢ï¼Œè¿™æ ·æœç´¢çš„é¢—ç²’åº¦ï¼Œç»“æ„çš„å¤šæ ·æ€§å’Œç»“æœçš„ä¸°å¯Œåº¦ï¼Œéƒ½æ¯”ä¼ ç»Ÿæ–‡æœ¬æ£€ç´¢å¥½å¾ˆå¤šã€‚</p></blockquote><h2 id="5-é€šè¿‡-DocArray-å¯¼å…¥ä»»æ„æ¨¡æ€çš„æ•°æ®"><a href="#5-é€šè¿‡-DocArray-å¯¼å…¥ä»»æ„æ¨¡æ€çš„æ•°æ®" class="headerlink" title="5. é€šè¿‡ DocArray å¯¼å…¥ä»»æ„æ¨¡æ€çš„æ•°æ®"></a>5. é€šè¿‡ DocArray å¯¼å…¥ä»»æ„æ¨¡æ€çš„æ•°æ®</h2><p>é¡¹ç›®ä»£ç å‚è€ƒ<a href="https://github.com/datawhalechina/vced/tree/main/code/jina_demo">è¿™é‡Œ</a>ã€‚æœ‰å°†å›¾ç‰‡ã€æ–‡æœ¬ã€è§†é¢‘åˆ†åˆ«å¯¼å…¥ Jina çš„å®ä¾‹ã€‚</p><h3 id="5-1-æ–‡æœ¬æ•°æ®å¯¼å…¥"><a href="#5-1-æ–‡æœ¬æ•°æ®å¯¼å…¥" class="headerlink" title="5.1 æ–‡æœ¬æ•°æ®å¯¼å…¥"></a>5.1 æ–‡æœ¬æ•°æ®å¯¼å…¥</h3><p><strong>åˆ›å»ºæ–‡æœ¬</strong></p><pre><code class="lang-py">from jina import Document  # å¯¼åŒ…# åˆ›å»ºç®€å•çš„æ–‡æœ¬æ•°æ®d = Document(text=&#39;hello, world.&#39;)print(d.text)  # é€šè¿‡textè·å–æ–‡æœ¬æ•°æ®# å¦‚æœæ–‡æœ¬æ•°æ®å¾ˆå¤§ï¼Œæˆ–è€…è‡ªURIï¼Œå¯ä»¥å…ˆå®šä¹‰URIï¼Œç„¶åå°†æ–‡æœ¬åŠ è½½åˆ°æ–‡æ¡£ä¸­d = Document(uri=&#39;https://www.w3.org/History/19921103-hypertext/hypertext/README.html&#39;)d.load_uri_to_text()print(d.text)# æ”¯æŒå¤šè¯­è¨€d = Document(text=&#39;ğŸ‘‹    à¤¨à¤®à¤¸à¥à¤¤à¥‡ à¤¦à¥à¤¨à¤¿à¤¯à¤¾!    ä½ å¥½ä¸–ç•Œï¼ã“ã‚“ã«ã¡ã¯ä¸–ç•Œï¼    ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ¼Ğ¸Ñ€!&#39;)print(d.text)</code></pre><p><strong>åˆ‡å‰²æ–‡æœ¬</strong></p><pre><code class="lang-py">from jina import Document  # å¯¼åŒ…d = Document(text=&#39;ğŸ‘‹    à¤¨à¤®à¤¸à¥à¤¤à¥‡ à¤¦à¥à¤¨à¤¿à¤¯à¤¾!    ä½ å¥½ä¸–ç•Œï¼ã“ã‚“ã«ã¡ã¯ä¸–ç•Œï¼    ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ¼Ğ¸Ñ€!&#39;)d.chunks.extend([Document(text=c) for c in d.text.split(&#39;!&#39;)])  # æŒ‰&#39;!&#39;åˆ†å‰²d.summary()</code></pre><p><strong>æ–‡æœ¬åŒ¹é…</strong></p><pre><code class="lang-py">from jina import Document, DocumentArrayd = Document(    uri=&#39;https://www.gutenberg.org/files/1342/1342-0.txt&#39;).load_uri_to_text()  # é“¾æ¥æ˜¯å‚²æ…¢ä¸åè§çš„ç”µå­ä¹¦ï¼Œæ­¤å¤„å°†ç”µå­ä¹¦å†…å®¹åŠ è½½åˆ° Document ä¸­da = DocumentArray(Document(text=s.strip()) for s in d.text.split(&#39;\n&#39;) if s.strip())  # æŒ‰ç…§æ¢è¡Œè¿›è¡Œåˆ†å‰²å­—ç¬¦ä¸²da.apply(lambda d: d.embed_feature_hashing())q = (    Document(text=&#39;she entered the room&#39;)  # è¦åŒ¹é…çš„æ–‡æœ¬    .embed_feature_hashing()  # é€šè¿‡ hash æ–¹æ³•è¿›è¡Œç‰¹å¾ç¼–ç     .match(da, limit=5, exclude_self=True, metric=&#39;jaccard&#39;, use_scipy=True)  # æ‰¾åˆ°äº”ä¸ªä¸è¾“å…¥çš„æ–‡æœ¬æœ€ç›¸ä¼¼çš„å¥å­)print(q.matches[:, (&#39;text&#39;, &#39;scores__jaccard&#39;)])  # è¾“å‡ºå¯¹åº”çš„æ–‡æœ¬ä¸ jaccard ç›¸ä¼¼æ€§åˆ†æ•°# è¾“å‡ºç»“æœï¼š# [[&#39;staircase, than she entered the breakfast-room, and congratulated&#39;, &#39;of the room.&#39;,#   &#39;She entered the room with an air more than usually ungracious,&#39;,#   &#39;entered the breakfast-room, where Mrs. Bennet was alone, than she&#39;, &#39;those in the room.&#39;],#  [&#123;&#39;value&#39;: 0.6&#125;, &#123;&#39;value&#39;: 0.6666666666666666&#125;, &#123;&#39;value&#39;: 0.6666666666666666&#125;, &#123;&#39;value&#39;: 0.6666666666666666&#125;,#   &#123;&#39;value&#39;: 0.7142857142857143&#125;]]</code></pre><h3 id="5-2-ä»å½±ç‰‡å¯¼å…¥"><a href="#5-2-ä»å½±ç‰‡å¯¼å…¥" class="headerlink" title="5.2 ä»å½±ç‰‡å¯¼å…¥"></a>5.2 ä»å½±ç‰‡å¯¼å…¥</h3><pre><code class="lang-py"># è§†é¢‘éœ€è¦ä¾èµ– av åŒ…# pip install avfrom jina import Documentd = Document(uri=&#39;cat.mp4&#39;)d.load_uri_to_video_tensor()# ç›¸è¾ƒäºå›¾åƒï¼Œè§†é¢‘æ˜¯ä¸€ä¸ª 4 ç»´æ•°ç»„ï¼Œç¬¬ä¸€ç»´è¡¨ç¤ºè§†é¢‘å¸§ id æˆ–æ˜¯è§†é¢‘çš„æ—¶é—´ï¼Œå‰©ä¸‹çš„ä¸‰ç»´åˆ™å’Œå›¾åƒä¸€è‡´ã€‚print(d.tensor.shape)  # (31, 1080, 1920, 3)# ä½¿ç”¨ append æ–¹æ³•å°† Document æ”¾å…¥ chunk ä¸­for b in d.tensor:    d.chunks.append(Document(tensor=b))d.chunks.plot_image_sprites(&#39;mov.png&#39;)</code></pre><p>è¿˜æœ‰è®¸å¤šå…¶ä»–çš„æ“ä½œæ–¹æ³•ï¼Œæœ‰å¾…åç»­è¿›ä¸€æ­¥å‘æ˜å’Œä½¿ç”¨ã€‚æ€»ä½“æ„Ÿè§‰è¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://u84gxokzmi.feishu.cn/docx/doxcn30HXXLbqFrsyR6bL5A6o1g">https://u84gxokzmi.feishu.cn/docx/doxcn30HXXLbqFrsyR6bL5A6o1g</a></p><p><a href="https://github.com/datawhalechina/vced">https://github.com/datawhalechina/vced</a></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VCED</tag>
      
      <tag>multimodal</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘é€šè¿‡æ–‡å­—æ£€ç´¢è§†é¢‘ç‰‡æ®µï¼šVCED</title>
    <link href="/2022/11/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED/"/>
    <url>/2022/11/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED/</url>
    
    <content type="html"><![CDATA[<p>æœ¬ç¯‡åšå®¢è®°å½•äº†ç¬”è€…åœ¨æœ¬æœºï¼ˆMacOSï¼‰éƒ¨ç½² VCED å¤šæ¨¡æ€æ•°æ®æ£€ç´¢å·¥å…·çš„å‰ç«¯å’Œåç«¯çš„è¿‡ç¨‹ï¼Œå¹¶å°è¯•ä½¿ç”¨è¯¥å·¥å…·æ£€ç´¢äº†ä¸€ä¸ªåŠ¨ç”»çŸ­ç‰‡ï¼Œå–å¾—äº†ä»¤æˆ‘æƒŠå¥‡çš„æ•ˆæœã€‚</p><!--more---><p>VCED: Video Clip Extraction by description, å¯ä»¥é€šè¿‡ä½ çš„æ–‡å­—æè¿°æ¥è‡ªåŠ¨è¯†åˆ«è§†é¢‘ä¸­ç›¸ç¬¦åˆçš„ç‰‡æ®µè¿›è¡Œè§†é¢‘å‰ªè¾‘ã€‚åŸºäºè·¨æ¨¡æ€æœç´¢ä¸å‘é‡æ£€ç´¢æŠ€æœ¯æ­å»ºã€‚</p><p>æœ¬é¡¹ç›®å‚è€ƒè‡ª <a href="https://github.com/datawhalechina/vced">Datawhale çš„ VCED å­¦ä¹ æ•™ç¨‹</a>ã€‚</p><p>ç¯å¢ƒä¸º Mac Monterey, Apple M1 Pro èŠ¯ç‰‡ï¼Œå†…å­˜ 16GBã€‚</p><h2 id="ç›´æ¥å®‰è£…-docker-é•œåƒ"><a href="#ç›´æ¥å®‰è£…-docker-é•œåƒ" class="headerlink" title="ç›´æ¥å®‰è£… docker é•œåƒ"></a>ç›´æ¥å®‰è£… docker é•œåƒ</h2><p>é¦–å…ˆéœ€è¦å®‰è£… dockerï¼Œåœ¨ mac ä¸Šå®‰è£… docker åªéœ€å»å®˜ç½‘ä¸‹è½½å®¢æˆ·ç«¯ï¼š</p><p><a href="https://docs.docker.com/desktop/install/mac-install/">https://docs.docker.com/desktop/install/mac-install/</a></p><p><img src="/2022/11/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED/macå®‰è£…docker.png" alt></p><p>æ³¨æ„ï¼Œåœ¨ mac ä¸Šå®‰è£… docker éœ€è¦æå‰å®‰è£… rosettaã€‚</p><p>å®‰è£… docker å®Œæˆåï¼Œä¸ºäº†æ–¹ä¾¿ä¸‹è½½é•œåƒï¼Œæˆ‘ä»¬å…ˆä¿®æ”¹ä¸‹æºã€‚</p><p><img src="/2022/11/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED/macä¿®æ”¹æº.png" alt></p><p>åœ¨å¦‚å›¾æ‰€ç¤ºçš„æ–‡æœ¬æ¡†å†…æŒ‰ç…§ json æ ¼å¼æ·»åŠ å¦‚ä¸‹æ–‡æœ¬ï¼š</p><pre><code class="lang-json">&quot;registry-mirrors&quot;: [    &quot;https://hub-mirror.c.163.com&quot;,    &quot;https://mirror.baidubce.com&quot;  ]</code></pre><p>ä¹‹åä½¿ç”¨ç°æœ‰çš„é•œåƒæ–‡ä»¶å³å¯éƒ¨ç½²ï¼š</p><pre><code class="lang-sh">docker pull nil01/vceddocker run -itd -p 8501:8501 -p 45679:45679 --name vced_arm nil01/vced</code></pre><p>æœ€å¤§çš„æ–‡ä»¶æœ‰ 2GBï¼Œéœ€è¦ç­‰å¾…ä¸€ä¼šå„¿ä¸‹è½½ã€‚éƒ¨ç½²å®Œæˆåï¼Œè®¿é—® <code>localhost:8501</code> å³å¯ã€‚</p><p><img src="/2022/11/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED/æµè§ˆå™¨äº¤äº’é¡µé¢.png" alt></p><p>å¯åŠ¨ docker è¿›ç¨‹ä¹‹åï¼Œè¾“å…¥æŒ‡ä»¤ <code>docker ps</code> æŸ¥çœ‹è¿è¡Œä¸­çš„ containerï¼Œè¾“å…¥ <code>docker ps &lt;CONTAINER ID&gt;</code> å³å¯ç»“æŸè¯¥ containerã€‚</p><p><img src="/2022/11/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED/dockeræ“ä½œ.png" alt></p><h2 id="è‡ªè¡Œç¼–è¯‘"><a href="#è‡ªè¡Œç¼–è¯‘" class="headerlink" title="è‡ªè¡Œç¼–è¯‘"></a>è‡ªè¡Œç¼–è¯‘</h2><p>å…ˆå®‰è£… rust</p><pre><code class="lang-sh">curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://sh.rustup.rs | sh</code></pre><p>åœ¨å®‰è£…æ—¶ï¼Œé»˜è®¤çš„ rust ç‰ˆæœ¬é€‚é…â€œaarch64-apple-darwinâ€æ¶æ„çš„ macã€‚å› æ­¤æ”¾å¿ƒå®‰è£…å³å¯ã€‚</p><p>å®‰è£…å®Œæ¯•åï¼Œéœ€è¦é‡å¯ shellï¼Œæµ‹è¯• rustc å‘½ä»¤çœ‹çœ‹èƒ½ä¸èƒ½æ­£å¸¸æ‰§è¡Œå³å¯ã€‚</p><p>å†å®‰è£… CLIPï¼š</p><pre><code class="lang-sh">pip install git+https://github.com/openai/CLIP.git</code></pre><p>ç„¶å clone æˆ‘ä»¬æ‰€å­¦çš„ä»£ç ï¼š</p><pre><code class="lang-sh">git clone &quot;https://github.com/datawhalechina/vced.git&quot;</code></pre><p>è¿›å…¥ <code>vced/code/service</code> ï¼Œç„¶åæ‰§è¡Œ</p><pre><code class="lang-sh">pip install -r requirements.txt</code></pre><p>å®‰è£…ä¾èµ–åŒ…ã€‚è¿™ä¸ªè¿‡ç¨‹éœ€è¦ä¸‹è½½è¾ƒé•¿æ—¶é—´ã€‚ä¸‹è½½å®‰è£…å®Œæ¯•åï¼Œæ‰§è¡Œ</p><pre><code class="lang-sh">python app.py</code></pre><p>å³å¯è¿è¡Œåç«¯æœåŠ¡å™¨ã€‚</p><p><img src="/2022/11/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED/demo.png" alt></p><p>ç„¶åæˆ‘ä»¬è¿˜éœ€è¦è¿è¡Œå‰ç«¯ï¼Œä¿ç•™åŸæ¥çš„ shell ä¸è¦å…³é—­ï¼Œå¦å¼€ä¸€ä¸ª shellï¼Œè¿›å…¥ç›®å½• <code>vced/code/web</code> ï¼Œå¯åŠ¨å‰ç«¯ï¼š</p><pre><code class="lang-sh">streamlit run app.py</code></pre><p><img src="/2022/11/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED/demo_frontend_success.png" alt></p><p>å‰ç«¯é»˜è®¤åœ¨<code>http://localhost:8501/</code>å¼€æ”¾ã€‚</p><h2 id="æµ‹è¯•åŠŸèƒ½"><a href="#æµ‹è¯•åŠŸèƒ½" class="headerlink" title="æµ‹è¯•åŠŸèƒ½"></a>æµ‹è¯•åŠŸèƒ½</h2><p>éšä¾¿é€‰ä¸€ä¸ªæœ¬åœ°çš„è§†é¢‘ï¼Œç„¶åè¾“å…¥ä¸€æ®µæ–‡æœ¬å°è¯•æè¿°ä½ æƒ³è¦èŠ‚é€‰çš„è§†é¢‘ç‰‡æ®µï¼Œç‚¹å‡» search å³å¯ç­‰å¾…ç»“æœã€‚</p><p>ç»“æœé»˜è®¤æ˜¯ä¸€ä¸ª 10s çš„ç‰‡æ®µï¼Œå¦‚æœæ²¡æ‰¾åˆ°ï¼Œåˆ™é»˜è®¤è¿”å›å¼€å¤´çš„ 10sã€‚</p><p><img src="/2022/11/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED/demo_example.png" alt></p><p>æˆ‘ä¸Šä¼ äº†ä¸€æ®µå¦®éœ²è·³èˆçš„è§†é¢‘ï¼Œè¯•å›¾æ£€ç´¢â€œgirlâ€ï¼Œè¾“å‡ºç‰‡æ®µæœçœŸæ˜¯å¦®éœ²è·³èˆçš„è§†é¢‘ç‰‡æ®µã€‚</p><p><img src="/2022/11/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED/demo_example2.png" alt></p><p>æ­¤æ—¶æ›´æ¢æ£€ç´¢è¯â€œboyâ€ï¼ŒçœŸçš„æŠŠç©ºçš„é•œå¤´æ£€ç´¢å‡ºæ¥äº†ã€‚</p><p>æœ€åæˆ‘å°è¯•æ£€ç´¢â€œa boy with sadnessâ€è¿™ç§è¯­æ³•ä¸é€šçš„æ£€ç´¢è¯ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2022/11/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87%E6%96%87%E5%AD%97%E6%A3%80%E7%B4%A2%E8%A7%86%E9%A2%91%E7%89%87%E6%AE%B5%EF%BC%9AVCED/final_example.png" alt></p><p>æŒ‰ç…§æˆ‘çš„æ ‡å‡†ï¼Œå·²ç»å®Œå…¨æ»¡è¶³éœ€æ±‚ï¼ŒçœŸæ˜¯ç¥å™¨ï¼</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç¯‡åšå®¢è®°å½•äº†ç¬”è€…åœ¨æœ¬æœºï¼ˆMacOSï¼‰éƒ¨ç½² VCED å¤šæ¨¡æ€æ•°æ®æ£€ç´¢å·¥å…·çš„å‰ç«¯å’Œåç«¯çš„è¿‡ç¨‹ï¼Œå¹¶å°è¯•ä½¿ç”¨è¯¥å·¥å…·æ£€ç´¢äº†ä¸€ä¸ªåŠ¨ç”»çŸ­ç‰‡ï¼Œå–å¾—äº†ä»¤æˆ‘æƒŠå¥‡çš„æ•ˆæœã€‚åç»­ä¼šé’ˆå¯¹è¯¥å·¥å…·è¿›è¡Œæ·±å…¥ç ”ç©¶ï¼Œæ¢ç´¢è·¨æ¨¡æ€æ£€ç´¢ä½¿ç”¨çš„æŠ€æœ¯å’ŒåŸç†åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œä»¥åŠæŒæ¡å‰ç«¯å’Œåç«¯æ‰€ä½¿ç”¨çš„æŠ€æœ¯ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://github.com/datawhalechina/vced/blob/main/README.md">https://github.com/datawhalechina/vced/blob/main/README.md</a></p><p><a href="https://docs.jina.ai/get-started/install/windows/">https://docs.jina.ai/get-started/install/windows/</a></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VCED</tag>
      
      <tag>multimodal</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘æå®æ¯…ML-Note7-Transformer</title>
    <link href="/2022/10/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note7-Transformer/"/>
    <url>/2022/10/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note7-Transformer/</url>
    
    <content type="html"><![CDATA[<p>æå®æ¯…è€å¸ˆä¸»è®²çš„æœºå™¨å­¦ä¹ MOOCè¯¾ç¨‹çš„ç¬”è®°ï¼Œæœ¬ç¯‡è®°å½•çš„çŸ¥è¯†ç‚¹æœ‰ï¼šTransformerã€‚<br><!--more---></p><h2 id="ä¸€ã€Seq2Seq"><a href="#ä¸€ã€Seq2Seq" class="headerlink" title="ä¸€ã€Seq2Seq"></a>ä¸€ã€Seq2Seq</h2><p>Transformeræ˜¯ä¸€ç±»Seq2seqç»“æ„çš„æ¨¡å‹ï¼Œè¾“å…¥é•¿åº¦ä¸ºNçš„åºåˆ—ï¼Œè¾“å‡ºé•¿åº¦ä¸ºMçš„åºåˆ—ã€‚å…¶ä¸­Mçš„é•¿åº¦æ˜¯ç”±æ¨¡å‹å†³å®šçš„ã€‚è¯¸å¦‚æ–‡æœ¬ç”Ÿæˆã€è¯­éŸ³åˆæˆã€æœºå™¨ç¿»è¯‘ç­‰ä»»åŠ¡éƒ½éœ€è¦åº”ç”¨seq2seqæ¨¡å‹ã€‚</p><p>å¾ˆå¤šä»»åŠ¡å¯ä»¥è¢«è½¬åŒ–ä¸ºseq2seqä»»åŠ¡ï¼Œä½†ä¸ä¸€å®šæ˜¯æœ€ä¼˜è§£ã€‚</p><p>seq2seqæ¨¡å‹ç”±ä¸€ä¸ªç¼–ç å™¨ï¼ˆEncodeerï¼‰å’Œä¸€ä¸ªè§£ç å™¨ï¼ˆDecoderï¼‰ç»„æˆï¼ŒåŸºç¡€æ¶æ„å¦‚ä¸‹ï¼š</p><p><img src="/2022/10/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note7-Transformer/transformer-1.png" alt></p><p>seq2seqæ¨¡å‹æ˜¯ä¸€ç§æ¶æ„ï¼Œåªè§„å®šäº†è¾“å…¥è¾“å‡ºï¼Œå¹¶æ²¡æœ‰è§„å®šå¿…é¡»ä½¿ç”¨å“ªç§å…·ä½“çš„æ¨¡å‹ã€‚</p><h2 id="äºŒã€Encoder"><a href="#äºŒã€Encoder" class="headerlink" title="äºŒã€Encoder"></a>äºŒã€Encoder</h2><p>å¦‚å›¾æ‰€ç¤ºæ˜¯Transformerçš„Encoderï¼š</p><p><img src="/2022/10/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note7-Transformer/transformer-2.png" alt></p><p>Transformer çš„ Encoder æ˜¯ç”±è‹¥å¹²çš„ Block æ„æˆçš„ï¼Œæ¯ä¸ª Block åŒ…å«ä¸€ä¸ª multihead self-attention ç»“æ„å’Œä¸€ä¸ªå…¨è¿æ¥ç½‘ç»œç­‰ï¼Œè¿™äº› Block ä¸²è”èµ·æ¥ç»„æˆ Encoderã€‚</p><p><img src="/2022/10/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note7-Transformer/transformer-3.png" alt></p><p>éœ€è¦å…³æ³¨ä¸¤ä¸ªç»†èŠ‚ï¼š</p><ol><li>self-attention å±‚çš„å‘é‡è¾“å‡ºåï¼Œéœ€è¦ç»è¿‡ä¸€æ­¥æ®‹å·®è¿ç®—ï¼Œå’ŒåŸæ¥çš„è¾“å…¥ç›¸åŠ ï¼›</li><li>æ®‹å·®è¿ç®—åçš„å‘é‡éœ€è¦ LayerNormalization æ“ä½œï¼›</li><li>normalized ä¹‹åçš„å‘é‡éœ€è¦è¾“å…¥å†…éƒ¨çš„å…¨è¿æ¥ç½‘ç»œï¼Œè¾“å‡ºçš„å‘é‡åŒæ ·è¦ä¸è¿™ä¸€æ­¥éª¤çš„è¾“å…¥è¿›è¡Œæ®‹å·®ï¼›</li><li>åœ¨è¾“å‡ºå‰åŒæ ·éœ€è¦ç»è¿‡ normalizationã€‚</li></ol><p><img src="/2022/10/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note7-Transformer/transformer-4.png" alt></p><p>å®é™…ä¸Šï¼Œåœ¨å…·ä½“å®ç°æ—¶ï¼Œä¸Šé¢çš„æ“ä½œé¡ºåºæ˜¯å¯ä»¥æ”¹å˜çš„ï¼Œæœ‰è‹¥å¹²æ–‡ç« å·²ç»åœ¨è®¨è®º LayerNormalization çš„æ‰§è¡Œæ—¶æœºå¯¹æœ€ç»ˆæ€§èƒ½çš„å½±å“ã€‚</p><p><img src="/2022/10/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note7-Transformer/transformer-layer-norm.png" alt></p><h2 id="ä¸‰ã€Decoder"><a href="#ä¸‰ã€Decoder" class="headerlink" title="ä¸‰ã€Decoder"></a>ä¸‰ã€Decoder</h2><p>Decoderè´Ÿè´£ä»¥Encoderçš„è¾“å‡ºä¸ºçŸ¥è¯†ï¼Œç”Ÿæˆä¸€ç³»åˆ—è¾“å‡ºå‘é‡ã€‚</p><h3 id="3-1-Decoder-çš„æ‰§è¡Œæ­¥éª¤"><a href="#3-1-Decoder-çš„æ‰§è¡Œæ­¥éª¤" class="headerlink" title="3.1 Decoder çš„æ‰§è¡Œæ­¥éª¤"></a>3.1 Decoder çš„æ‰§è¡Œæ­¥éª¤</h3><p>Transformer çš„ Decoder æ˜¯ä¸€ä¸ªè‡ªå›å½’ï¼ˆAutoRegressiveï¼‰æ¨¡å‹ï¼Œå³ä½¿ç”¨è‡ªèº«ä»¥å‰çš„äº§å‡ºæ¥é¢„æµ‹å°†æ¥çš„äº§å‡ºã€‚</p><p><img src="/2022/10/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note7-Transformer/transformer-decoder-example-1.png" alt></p><p>åœ¨è¿™é‡Œæˆ‘ä»¬ä»¥è¯­éŸ³è½¬æ–‡å­—ä»»åŠ¡ä¸ºä¾‹ï¼Œä»¥ä¸€ä¸²éŸ³é¢‘ä¸ºè¾“å…¥ï¼ˆåœ¨å›¾ç¤ºçš„ä¾‹å­ä¸­ï¼Œæ˜¯â€œæœºå™¨å­¦ä¹ â€å››ä¸ªå­—ï¼‰ï¼ŒEncoder é¦–å…ˆå­¦ä¹ é€‚å½“çš„è¯­ä¹‰å‘é‡ï¼Œå¹¶å°†å…¶è¾“å…¥ Decoder ä¸­ï¼ŒDecoder æ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼š</p><ol><li>Decoder å…ˆä»¥ [start] ç¬¦å·ä½œä¸ºè¾“å…¥ï¼Œé€šè¿‡ Encoder æä¾›çš„çŸ¥è¯†ï¼Œæ¥é¢„æµ‹è¯¥ç¬¦å·å¯¹åº”çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼›</li><li>Decoder äº§å‡ºçš„é¢„æµ‹å‘é‡æ˜¯ä¸€ä¸ªé•¿åº¦ä¸ºå•è¯è¡¨å¤§å°çš„å‘é‡ï¼Œå‘é‡çš„æ¯ä¸ªåˆ†é‡ä»£è¡¨è¾“å‡ºä¸ºè¯¥è¯æ—¶çš„æ¦‚ç‡å€¼ï¼›</li><li>ç´§æ¥ç€ Decoder ä¼šä»¥è¯¥è¾“å‡ºä¸ºè¾“å…¥ï¼Œæ¥é¢„æµ‹è¾“å‡ºï¼›</li><li>ç”±æ­¤å¾ªç¯å¾€å¤ï¼Œç›´è‡³ Decoder è®¤ä¸ºæ¨¡å‹çš„è¾“å‡ºä¸ºç‰¹æ®Šç¬¦å· [end]ä¸ºæ­¢ã€‚</li></ol><h3 id="3-2-Decoder-çš„å…·ä½“æ¶æ„"><a href="#3-2-Decoder-çš„å…·ä½“æ¶æ„" class="headerlink" title="3.2 Decoder çš„å…·ä½“æ¶æ„"></a>3.2 Decoder çš„å…·ä½“æ¶æ„</h3><p>Transformer çš„ Decoder ä¸ Encoder æ¶æ„ååˆ†ç±»ä¼¼ï¼š</p><p><img src="/2022/10/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note7-Transformer/transformer-decoder-structure.png" alt></p><ol><li>æ¥çº³æ¨¡å‹è¾“å…¥çš„ attention å±‚æ˜¯ masked self-attention å±‚ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯ï¼Œåœ¨è€ƒè™‘æŸä¸ªè¾“å…¥å‘é‡$x_n$çš„è¾“å‡ºæ—¶ï¼Œself-attention ä¼šç»¼åˆæ‰€æœ‰çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè€Œ masked self-attention åªä¼šè€ƒè™‘å·²ç»å‡ºç°è¿‡çš„ $x_1~x_n$ èŒƒå›´å†…çš„æ‰€æœ‰å‘é‡ï¼Œè€Œä¸ä¼šè€ƒè™‘å®ƒçš„ä¸‹æ–‡ï¼›<br> è¿™æ ·åšæ˜¯è‡ªç„¶çš„ï¼Œå› ä¸º Decoder æ˜¯ä»¥è¿‡å»çš„è¾“å‡ºé¢„æµ‹å°†æ¥çš„è¾“å‡ºçš„è‡ªå›å½’æ¨¡å‹ï¼Œå®ƒæ— æ³•å‚è€ƒå°šæœªç”Ÿæˆçš„ä¸‹æ–‡å†…å®¹ï¼›</li><li>ç»è¿‡ masked self-attention çš„ç¼–ç åçš„è¾“å‡ºå‘é‡ï¼Œä¼šè¢«å½“åšä¸‹ä¸€å±‚ self-attention çš„ query æŸ¥è¯¢å‘é‡ï¼Œç„¶åä¸ encoder å¾—åˆ°çš„è¾“å‡ºå‘é‡è®¡ç®—ç›¸å…³æ€§ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œquery æ¥è‡ª Decoder çš„è¾“å…¥ï¼Œè€Œ key å’Œ value éƒ½æ¥è‡ª Encoder å±‚ã€‚è¿™ä¸€æ­¥éª¤å«åš Cross Attentionã€‚<br> åœ¨ Decoder ä¸­åŠ å…¥ Cross Attention ï¼Œæ˜¯å¸Œæœ›æ¨¡å‹èƒ½å¤Ÿæ­£ç¡®åœ°åˆ©ç”¨ Encoder æä¾›çš„çŸ¥è¯†ï¼Œå¹¶æ ¹æ®ç°æœ‰çš„è¾“å…¥ï¼Œè‡ªåŠ¨ç”Ÿæˆåˆé€‚çš„è¾“å‡ºè¡¨ç¤ºã€‚è¦å®Œæˆè¿™ä¸€æ­¥ï¼ŒEncoder æä¾›çš„å…ˆéªŒçŸ¥è¯†ä¸ Decoder æä¾›çš„æŸ¥è¯¢è¯éƒ½æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</li></ol><p><img src="/2022/10/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note7-Transformer/transformer-decoder-cross-attention.png" alt></p><p>Transformer çš„ Encoder ä¸ Decoder çš„è¯¦ç»†æ¶æ„å¦‚å›¾ï¼š</p><p><img src="/2022/10/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note7-Transformer/transformer-encoder-decoder.png" alt></p><p>éœ€è¦æ³¨æ„ï¼ŒåŸæ–‡ä¸­ Transformer çš„å¤šä¸ª Decoder ç»“æ„ä½¿ç”¨çš„ Encoder ä¿¡æ¯éƒ½æ¥è‡ªäºæœ€åä¸€ä¸ª Encoderï¼Œè¿™æ ·åšæ˜¯è‡ªç„¶åœ°ï¼Œæ¯•ç«Ÿæˆ‘ä»¬è®¤ä¸ºæœ€åä¸€å±‚å­¦ä¹ åˆ°çš„çŸ¥è¯†æœ€æŠ½è±¡ï¼Œæ³›åŒ–èƒ½åŠ›æœ€å¼ºï¼›</p><p><img src="/2022/10/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note7-Transformer/transformer-encoder-decoder-2.png" alt></p><p>äº‹å®ä¸Šå¹¶ä¸æ€»æ˜¯è¿™æ ·ï¼Œä¹Ÿæœ‰ä¸€äº›æ–‡ç« åœ¨ç ”ç©¶ä»¤ä¸åŒæ—¶æœŸçš„ Encoder äº§å‡ºçš„å‘é‡é€ç»™ä¸åŒæ—¶æœŸçš„ Decoderï¼Œå¹¶å–å¾—äº†ä¸€å®šçš„æ•ˆæœï¼š</p><p><img src="/2022/10/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note7-Transformer/transformer-cross-attention-various.png" alt></p><h3 id="3-3-éè‡ªå›å½’-Decoder"><a href="#3-3-éè‡ªå›å½’-Decoder" class="headerlink" title="3.3 éè‡ªå›å½’ Decoder"></a>3.3 éè‡ªå›å½’ Decoder</h3><p>å­˜åœ¨ä¸€äº› None AutoRegressive Decoderï¼Œè¿™äº› Decoder ä¸æ˜¯ä»¥è‡ªèº«ä¹‹å‰çš„è¾“å‡ºé¢„æµ‹ä¹‹åçš„è¾“å‡ºï¼Œè€Œæ˜¯ä¸€æ¬¡æ€§ç»™å‡ºæ•´ä¸ªè¾“å‡ºåºåˆ—ã€‚</p><p>è‡ªå›å½’é—®é¢˜æ˜¯é€šè¿‡åœ¨è¾“å‡ºé›†åˆä¸­æ·»åŠ ç‰¹æ®Šç¬¦å· [end] æ¥è§£å†³åºåˆ—ä¸åœæ­¢çš„é—®é¢˜çš„ï¼Œä½†æ˜¯ éè‡ªå›å½’ Decoder ä¸€æ¬¡æ€§è¾“å‡ºæ•´ä¸ªåºåˆ—ï¼Œå®ƒåªèƒ½é¢„å…ˆè®¾å®šä¸€ä¸ªåºåˆ—é•¿åº¦å€¼ï¼Œå¹¶ä¾æ­¤é•¿åº¦è¿›è¡Œè¾“å‡ºã€‚è¿™ç§ç±»å‹çš„ Decoder å½“ç„¶ä¹Ÿä¼šè¾“å‡º [end] ï¼Œä½† Decoder å¹¶ä¸ä¼šæ ¹æ®æ­¤æ¥ç»ˆæ­¢åç»­å­—ç¬¦çš„ç”Ÿæˆã€‚æœ€ç»ˆçš„ç»“æœä¼šæˆªæ–­ [end] ä¹‹åçš„å­—ç¬¦ã€‚</p><p>éƒ¨åˆ†éè‡ªå›å½’ Decoder å¯ä»¥é€šè¿‡å¦å¤–è®­ç»ƒä¸€ä¸ªåˆ†ç±»å™¨ï¼Œé€šè¿‡å­¦ä¹ è¾“å…¥åºåˆ—é•¿åº¦ä¸è¾“å‡ºåºåˆ—é•¿åº¦ä¹‹é—´çš„å…³ç³»æ¥åŠ¨æ€äº§ç”Ÿåºåˆ—çš„é•¿åº¦ã€‚</p><p>éè‡ªå›å½’ Decoder çš„ä¼˜ç‚¹åœ¨äºå¯å¹¶è¡ŒåŒ–ï¼Œå¿«é€Ÿï¼›è€Œä¸”è¾“å‡ºåºåˆ—çš„é•¿åº¦æ˜¯äººä¸ºå¯æ§çš„ï¼›</p><p>ç¼ºç‚¹åœ¨äºå‡†ç¡®ç‡ç­‰ç›¸å¯¹ä¸å¦‚è‡ªå›å½’ Decoderã€‚</p><h2 id="å››ã€Transformer-çš„è®­ç»ƒè¿‡ç¨‹"><a href="#å››ã€Transformer-çš„è®­ç»ƒè¿‡ç¨‹" class="headerlink" title="å››ã€Transformer çš„è®­ç»ƒè¿‡ç¨‹"></a>å››ã€Transformer çš„è®­ç»ƒè¿‡ç¨‹</h2><p>å…¶å®å°±æ˜¯è®­ç»ƒä¸€ä¸ªåˆ†ç±»é—®é¢˜ã€‚å‡è®¾é—®é¢˜ä¸ºä¸€æ®µè¯­éŸ³ï¼Œé—®é¢˜çš„ç­”æ¡ˆä¸ºâ€œæˆ‘çˆ±ä¸­å›½â€å››ä¸ªå­—ï¼Œåˆ™ Encoder ä¼šå­¦ä¹ è¯¥è¯­éŸ³çš„å‘é‡è¡¨ç¤ºå¹¶è¾“å‡ºç»™ Decoderï¼ŒDecoder åˆ™ä¼šåˆ†åˆ«è¾“å…¥ <code>BOSã€æˆ‘ã€çˆ±ã€ä¸­ã€å›½</code>ï¼Œä½œä¸ºäº”ä¸ªè®­ç»ƒæ ·æœ¬ï¼›ä»–ä»¬çš„æ­£ç¡®ç­”æ¡ˆä¸º<code>æˆ‘ã€çˆ±ã€ä¸­ã€å›½ã€EOS</code>ï¼Œæ¯ä¸ªå­—å¯¹åº”ä¸€ä¸ª one-hot å‘é‡ã€‚æœ€åé€šè¿‡ä¼˜åŒ–äº¤å‰ç†µæŸå¤±å‡½æ•°ï¼ŒæŒ‰ç…§æ­£å¸¸çš„æ¢¯åº¦ä¸‹é™ç®—æ³•è¿›è¡Œä¼˜åŒ–å³å¯ã€‚</p><p><img src="/2022/10/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note7-Transformer/transformer-training.png" alt></p><p>è¿™ç§ä»¥æ­£ç¡®ç­”æ¡ˆä¸ºè¾“å…¥çš„è®­ç»ƒæ–¹æ³•ç§°ä½œ Teacher Forcingã€‚</p><h2 id="äº”ã€Transformer-è®­ç»ƒæŠ€å·§"><a href="#äº”ã€Transformer-è®­ç»ƒæŠ€å·§" class="headerlink" title="äº”ã€Transformer è®­ç»ƒæŠ€å·§"></a>äº”ã€Transformer è®­ç»ƒæŠ€å·§</h2><h3 id="5-1-Copy-Mechanism"><a href="#5-1-Copy-Mechanism" class="headerlink" title="5.1 Copy Mechanism"></a>5.1 Copy Mechanism</h3><p>å¯¹äºä¸€äº›é—®ç­”ç­‰é—®é¢˜ï¼Œå½“è¾“å…¥ä¸­åŒ…å«ä¸€äº›å®ä½“æ—¶ï¼Œæ¨¡å‹å¯ä»¥ç›´æ¥æŠŠè¯¥å®ä½“å¤åˆ¶åˆ°è¾“å‡ºåºåˆ—ä¸­è¿›è¡ŒåŸæ ·è¾“å‡ºï¼Œç§°ä¹‹ä¸ºâ€œå¤åˆ¶æœºåˆ¶â€ï¼Œè¿™éœ€è¦ä¿è¯è¾“å…¥ä¿¡æ¯åˆ°è¾“å‡ºä¿¡æ¯ä¹‹é—´çš„ç•…é€šã€‚</p><p>å®ç° Copy Mechanism çš„ç½‘ç»œç»“æ„æœ‰æŒ‡é’ˆç½‘ç»œç­‰ã€‚</p><h3 id="5-2-Guided-Attention"><a href="#5-2-Guided-Attention" class="headerlink" title="5.2 Guided Attention"></a>5.2 Guided Attention</h3><p>é€šè¿‡äººä¸ºé™åˆ¶æ³¨æ„åŠ›çš„å­¦ä¹ æ–¹å‘ã€å­¦ä¹ é‡ç‚¹ç­‰ï¼Œæå‡æ¨¡å‹çš„å­¦ä¹ èƒ½åŠ›ã€‚æ¯”å¦‚è§„å®šè¯­éŸ³åˆæˆä»»åŠ¡çš„æ³¨æ„åŠ›åªèƒ½ä»å·¦å¾€å³å­¦ä¹ ç­‰ã€‚</p><h3 id="5-3-Beam-Search"><a href="#5-3-Beam-Search" class="headerlink" title="5.3 Beam Search"></a>5.3 Beam Search</h3><p>Beam Search æ˜¯ä¸€ç§å¸®åŠ©æ‰¾åˆ°æœ€ä¼˜è§£çš„æ–¹æ³•ï¼Œå…¶æ€æƒ³ç±»ä¼¼äºåŠ¨æ€è§„åˆ’ï¼Œæ˜¯ä¸ºäº†è§£å†³ Decoder åœ¨è´ªå¿ƒåœ°é€‰æ‹©æœ€ä¼˜è¾“å‡ºæ—¶ï¼Œé”™è¿‡äº†æ¬¡ä¼˜è¾“å‡ºï¼Œå¯¼è‡´åç»­è¾“å‡ºå…¨é”™çš„é—®é¢˜ã€‚</p><p>Beam Search å¹¶ä¸æ€»ä¸€å®šèƒ½æ‰¾åˆ°æœ€ä¼˜è§£ï¼Œè€Œä¸”ä¸€å‘³è¿½å¯»æœ€ä¼˜è§£ï¼Œåœ¨ä¸€äº›éœ€è¦å‘æŒ¥åˆ›æ„çš„ä»»åŠ¡ä¸­ï¼Œåè€Œä¸å¥½ï¼Œæ¯”å¦‚æ–°é—»ç”Ÿæˆä»»åŠ¡ç­‰ã€‚</p><h3 id="5-4-ä¼˜åŒ–è¯„ä¼°æŒ‡æ ‡"><a href="#5-4-ä¼˜åŒ–è¯„ä¼°æŒ‡æ ‡" class="headerlink" title="5.4 ä¼˜åŒ–è¯„ä¼°æŒ‡æ ‡"></a>5.4 ä¼˜åŒ–è¯„ä¼°æŒ‡æ ‡</h3><p>ä¸€èˆ¬è€Œè¨€ Decoder çš„æŸå¤±å‡½æ•°éƒ½æ˜¯äº¤å‰ç†µï¼Œè¿™æ˜¯å› ä¸ºäº¤å‰ç†µæ–¹ä¾¿æ±‚å¯¼å¥½è®­ç»ƒï¼›è€Œè¯„ä¼°æ¨¡å‹æ—¶ä½¿ç”¨çš„å¾€å¾€æ˜¯ BLEUã€‚ä½†å¦‚æœæˆ‘ä»¬ä½¿ç”¨ BLEU è¿™ç§ç›¸å¯¹ç§‘å­¦ä¸€ç‚¹çš„è¯„ä¼°å‡½æ•°æ¥åšæŸå¤±å‡½æ•°çš„è¯ï¼Œå¯èƒ½éœ€è¦å€ŸåŠ©å¼ºåŒ–å­¦ä¹ ï¼ˆReinforcement Learning, RLï¼‰çš„æ€æƒ³ï¼Œå¼ºè¡ŒæŠŠ BLEU ç§»æ¤åˆ°æ¨¡å‹ä¸­ã€‚</p><h3 id="5-5-scheduled-sampling"><a href="#5-5-scheduled-sampling" class="headerlink" title="5.5 scheduled sampling"></a>5.5 scheduled sampling</h3><p>Decoder åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œè®­ç»ƒæ ·æœ¬æ°¸è¿œéƒ½æ˜¯æ­£ç¡®ç­”æ¡ˆï¼Œç¼ºä¹ä¸€äº›è´Ÿæ ·æœ¬ï¼Œå‘Šè¯‰ Decoder ä½ ä¸åº”è¯¥å°†é¢„æµ‹å€¼é¢„æµ‹ä¸ºè¯¥å€¼ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è®­ç»ƒæ—¶éšæœºåœ¨è¾“å…¥åºåˆ—ä¸­æ·»åŠ å™ªéŸ³ï¼Œä½†è¿™ä¸€ä¸¾æªå¯èƒ½ä¼šæŸå¤±è®­ç»ƒçš„å¹¶è¡ŒåŒ–èƒ½åŠ›ã€‚</p><h2 id="å…­ã€æ€»ç»“å’Œé—®ç­”"><a href="#å…­ã€æ€»ç»“å’Œé—®ç­”" class="headerlink" title="å…­ã€æ€»ç»“å’Œé—®ç­”"></a>å…­ã€æ€»ç»“å’Œé—®ç­”</h2><h3 id="ä¸ºä»€ä¹ˆè¦åŠ å…¥æ®‹å·®æ¨¡å—ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦åŠ å…¥æ®‹å·®æ¨¡å—ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦åŠ å…¥æ®‹å·®æ¨¡å—ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦åŠ å…¥æ®‹å·®æ¨¡å—ï¼Ÿ</h3><h3 id="ä¸ºä»€ä¹ˆè¦åŠ å…¥-LayerNormalization-æ¨¡å—ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦åŠ å…¥-LayerNormalization-æ¨¡å—ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦åŠ å…¥ LayerNormalization æ¨¡å—ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦åŠ å…¥ LayerNormalization æ¨¡å—ï¼Ÿ</h3><h3 id="BatchNormalization-å’Œ-LayerNormalization-çš„åŒºåˆ«ï¼Ÿ"><a href="#BatchNormalization-å’Œ-LayerNormalization-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="BatchNormalization å’Œ LayerNormalization çš„åŒºåˆ«ï¼Ÿ"></a>BatchNormalization å’Œ LayerNormalization çš„åŒºåˆ«ï¼Ÿ</h3><h3 id="Transformer-ä½¿ç”¨åˆ°çš„å‡ ç§-Mask"><a href="#Transformer-ä½¿ç”¨åˆ°çš„å‡ ç§-Mask" class="headerlink" title="Transformer ä½¿ç”¨åˆ°çš„å‡ ç§ Mask"></a>Transformer ä½¿ç”¨åˆ°çš„å‡ ç§ Mask</h3><h3 id="å‰é¦ˆç¥ç»ç½‘ç»œåœ¨-Transformer-ä¸­çš„ä½œç”¨"><a href="#å‰é¦ˆç¥ç»ç½‘ç»œåœ¨-Transformer-ä¸­çš„ä½œç”¨" class="headerlink" title="å‰é¦ˆç¥ç»ç½‘ç»œåœ¨ Transformer ä¸­çš„ä½œç”¨"></a>å‰é¦ˆç¥ç»ç½‘ç»œåœ¨ Transformer ä¸­çš„ä½œç”¨</h3><h3 id="Gelu-çš„ä½œç”¨"><a href="#Gelu-çš„ä½œç”¨" class="headerlink" title="Gelu çš„ä½œç”¨"></a>Gelu çš„ä½œç”¨</h3><h2 id="ä¸ƒã€transformer-çš„ä»£ç å®ç°"><a href="#ä¸ƒã€transformer-çš„ä»£ç å®ç°" class="headerlink" title="ä¸ƒã€transformer çš„ä»£ç å®ç°"></a>ä¸ƒã€transformer çš„ä»£ç å®ç°</h2>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
      <tag>MOOC</tag>
      
      <tag>Self-Attention</tag>
      
      <tag>Transformer</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘æå®æ¯…ML-Note6-æ³¨æ„åŠ›æœºåˆ¶</title>
    <link href="/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/"/>
    <url>/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<p>æå®æ¯…è€å¸ˆä¸»è®²çš„æœºå™¨å­¦ä¹ MOOCè¯¾ç¨‹çš„ç¬”è®°ï¼Œæœ¬ç¯‡è®°å½•çš„çŸ¥è¯†ç‚¹æœ‰ï¼šè‡ªæ³¨æ„åŠ›æœºåˆ¶ã€‚<br><!--more---></p><h2 id="ä¸€ã€è¾“å…¥ä»å›¾åƒåˆ°åºåˆ—"><a href="#ä¸€ã€è¾“å…¥ä»å›¾åƒåˆ°åºåˆ—" class="headerlink" title="ä¸€ã€è¾“å…¥ä»å›¾åƒåˆ°åºåˆ—"></a>ä¸€ã€è¾“å…¥ä»å›¾åƒåˆ°åºåˆ—</h2><p>å›¾åƒåˆ†ç±»ä»»åŠ¡çš„è¾“å…¥æ˜¯å›ºå®šçš„ï¼Œæ¯”å¦‚éƒ½æ˜¯28*28åƒç´ çš„é»‘ç™½å›¾ç‰‡ç­‰ç­‰ã€‚ä½†æ˜¯ä¸€äº›è¾“å…¥å’Œè¾“å‡ºä¸æ˜¯å®šé•¿åºåˆ—çš„ä»»åŠ¡ï¼Œæ¯”å¦‚æœºå™¨ç¿»è¯‘ã€è¯­éŸ³è½¬æ–‡å­—ç­‰ä»»åŠ¡ï¼Œä¼ ç»Ÿæ¨¡å‹åœ¨è¿™äº›ä»»åŠ¡ä¸Šçš„è¡¨ç°ä¸å¥½ã€‚</p><p><img src="/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/ä¸åŒè¾“å‡ºå¯¹åº”ä¸åŒä»»åŠ¡.png" alt></p><p>æ¯”å¦‚è¯æ€§æ ‡æ³¨ä»»åŠ¡ï¼Œæ¨¡å‹çš„è¾“å…¥æ˜¯Nä¸ªå‘é‡ï¼Œè¾“å‡ºæ˜¯Nä¸ªåˆ†ç±»æ ‡ç­¾ï¼›æ¯”å¦‚æ–‡æœ¬åˆ†ç±»ä»»åŠ¡ï¼Œæ¨¡å‹çš„è¾“å…¥æ˜¯Nä¸ªå‘é‡ï¼Œè¾“å‡ºåªæ˜¯ä¸€ä¸ªåˆ†ç±»æ ‡ç­¾ï¼›æ¯”å¦‚æ–‡æœ¬ç¿»è¯‘ä»»åŠ¡ï¼Œæ¨¡å‹çš„è¾“å…¥æ˜¯Nä¸ªå‘é‡ï¼Œè¾“å‡ºå¯èƒ½æ˜¯Nâ€™ä¸ªå‘é‡ï¼Œæ­¤æ—¶Nâ€™æ˜¯æœªçŸ¥çš„ï¼Œéœ€è¦æœºå™¨è‡ªå·±è¿›è¡Œåˆ¤æ–­å’Œå­¦ä¹ ï¼›è¿™ç§ä»»åŠ¡å«åš sequences to sequences (seq2seq) ã€‚</p><p>è¿™äº›ä»»åŠ¡çš„è¾“å…¥ç‰¹ç‚¹æ˜¯ï¼Œéƒ½æœ‰å¤šä¸ªå‘é‡ä½œä¸ºä¸€ä¸ªè¾“å…¥ï¼Œä¸”å‘é‡çš„ç›¸å¯¹ä½ç½®ä¼šå½±å“è¾“å…¥çš„å«ä¹‰ã€‚</p><p>ä»¥è¯æ€§æ ‡æ³¨ä»»åŠ¡ä¸¾ä¾‹ï¼Œè¯¥ä»»åŠ¡çš„è¾“å…¥å’Œè¾“å‡ºå‘é‡ä¸ªæ•°éƒ½ä¸ºNã€‚æˆ‘ä»¬é¦–å…ˆæŠŠä¸€å¥è¯åˆ‡åˆ†ä¸ºNä¸ªè¯ï¼Œç„¶ååˆ©ç”¨ä¸€äº›ç¼–ç æ–¹å¼ï¼ˆæ¯”å¦‚ one-hot æˆ–è€… word2vecï¼‰å°†å…¶å˜æˆNä¸ªå®šé•¿å‘é‡ã€‚æˆ‘ä»¬å°†è¿™Nä¸ªå‘é‡ä½œä¸ºä¸€ä¸ªè¾“å…¥åºåˆ—ï¼Œè¾“å…¥åˆ°æ¨¡å‹ä¸­ï¼Œå¯„å¸Œæœ›äºæ¨¡å‹èƒ½å¤ŸæŠŠæ¯ä¸ªè¯çš„è¯æ€§æ ‡æ³¨å‡ºæ¥ã€‚æ‰€ä»¥è¿™å…¶å®æ˜¯ä¸€ä¸ªåˆ†ç±»ä»»åŠ¡ã€‚</p><p>ä½†æ˜¯å½“æˆ‘ä»¬è¾“å…¥å¥å­â€I saw a saw.â€œæ—¶ï¼Œå‰åä¸¤ä¸ªsawçš„è¯æ€§æ˜¯ä¸åŒçš„ï¼Œå¦‚æœæ¨¡å‹åªä»¥è¯æ±‡å‘é‡ä¸ºè¾“å…¥ï¼Œä¸è€ƒè™‘ä¸Šä¸‹æ–‡çš„è¯ï¼Œæ˜¯æ— æ³•å¾—çŸ¥è¿™ä»¶äº‹çš„ã€‚</p><p>ä¸ºæ­¤ï¼Œå‰äººä»¬åšäº†ä»¥ä¸‹æ”¹è¿›ï¼Œè¯•å›¾ä½¿ç”¨ä¼ ç»Ÿæ¨¡å‹è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p><ol><li><p>é€šè¿‡ N-gram æ¨¡å‹ï¼Œå°†ä¸¤ä¸‰ä¸ªè¯æ‰“åŒ…æˆä¸€ä¸ªæ–°è¯ï¼Œâ€I saw a sawâ€œç»è¿‡3-gramæ¨¡å‹çš„ç¼–ç ï¼Œä¼šäº§ç”Ÿå¦‚ä¸‹è¾“å…¥åºåˆ—ï¼š</p><pre><code> I saw a saw -&gt; [i saw a], [saw a saw]</code></pre><p> ç”±æ­¤ï¼Œæ¨¡å‹èƒ½å¤Ÿçœ‹åˆ°çš„ä¸Šä¸‹æ–‡å°±æ‰©å±•åˆ°äº†ä¸‰ä¸ªå•è¯ã€‚ä½†æ˜¯è¯¥ç§æ–¹æ³•ä¼šå¿«é€Ÿæ‰©å¤§å•è¯é‡ï¼Œå¢åŠ è®¡ç®—è´Ÿæ‹…ï¼Œä¸”æ— æ³•æŠŠè·ç¦»è¾ƒè¿œçš„ä¸Šä¸‹æ–‡ä¹ŸåŠ å…¥è¿›æ¥ã€‚</p></li><li><p>ä½¿ç”¨TextCNN</p><p> TextCNN æ˜¯æŠŠå›¾åƒé¢†åŸŸå¤§è´§æˆåŠŸçš„CNNæ¨¡å‹çš„ç»éªŒç§»æ¤åˆ°äº†NLPé¢†åŸŸçš„æˆæœï¼Œå®ƒä½¿ç”¨ä¸€ç»´å·ç§¯æ ¸ã€‚ä½†ç©¶å…¶æœ¬è´¨è¿˜æ˜¯å—é™äºå·ç§¯æ ¸çš„å¤§å°ã€‚</p></li></ol><p><img src="/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/å‘é‡ä¹‹é—´çš„ç›¸å¯¹ä½ç½®.png" alt></p><p>æœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•èƒ½å¤Ÿè€ƒè™‘è¾“å…¥å‘é‡çš„å…¨éƒ¨ä¸Šä¸‹æ–‡å‘¢ï¼Ÿ self-attention å¯ä»¥åšåˆ°ã€‚</p><p><img src="/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/self-attentionä¸FCçš„åŒºåˆ«.png" alt></p><p>self-attention æ¥å—Nä¸ªè¾“å…¥å‘é‡ï¼Œè¾“å‡ºNä¸ªè¾“å‡ºå‘é‡ã€‚è¾“å‡ºçš„å‘é‡ä¸ä»…ä¿ç•™äº†åŸæ¥å‘é‡çš„è¯­ä¹‰ä¿¡æ¯ï¼Œè¿˜é¢å¤–æ·»åŠ äº†è¯¥å‘é‡ä¸Šä¸‹æ–‡çš„ä¿¡æ¯ã€‚</p><p>æœ‰äº†è¿™ä¸ªå…¨æ–°çš„å‘é‡ï¼Œæˆ‘ä»¬ä¾¿ä¸å¿…ä½¿ç”¨è¯¸å¦‚ n-gram ç­‰ç‰¹å¾å·¥ç¨‹æ‰‹æ®µäº†ï¼Œself-attention å°±èƒ½å¤Ÿäº§ç”Ÿéå¸¸å¥½çš„ç¨ å¯†å‘é‡ï¼Œè¯¥å‘é‡è€ƒè™‘çš„ä¸Šä¸‹æ–‡èŒƒå›´æ˜¯æ•´ç¯‡æ–‡æ¡£ã€‚</p><p>self-attention é€‚åˆç¼–ç æ•´ç¯‡æ–‡æ¡£çš„ä¿¡æ¯ï¼Œäº§å‡ºå‘é‡åå¯ä»¥æ¥ä¸€ä¸ªå…¨è¿æ¥ç½‘ç»œæ¥è¿›è¡Œå…·ä½“çš„åˆ†ç±»ï¼›ä¹Ÿå¯ä»¥åƒä¹‹å‰çš„å·ç§¯ç½‘ç»œä¸€æ ·ï¼Œå¤šå±‚ self-attention + FCå…¨è¿æ¥è¿›è¡Œå †å ã€‚è¿™å®é™…ä¸Šå°±æ˜¯Transformerçš„åŸºæœ¬æ€æƒ³ã€‚</p><p><img src="/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/transformerçš„ç®€åŒ–ç»“æ„.png" alt></p><p>self-attention æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿ</p><h2 id="äºŒã€self-attention-çš„å®ç°åŸç†"><a href="#äºŒã€self-attention-çš„å®ç°åŸç†" class="headerlink" title="äºŒã€self-attention çš„å®ç°åŸç†"></a>äºŒã€self-attention çš„å®ç°åŸç†</h2><p>self-attention çš„è¾“å…¥æ˜¯Nä¸ªå‘é‡ç»„æˆçš„è¾“å…¥åºåˆ—ï¼Œè¾“å‡ºä¹Ÿæ˜¯Nä¸ªå‘é‡ç»„æˆçš„åºåˆ—ã€‚åŒºåˆ«åœ¨äºï¼Œè¾“å…¥çš„å‘é‡æœ¬èº«ä¸åŒ…å«ä»»ä½•ä¸ä¸Šä¸‹æ–‡æœ‰å…³çš„ä¿¡æ¯ï¼Œä½†æ˜¯ä¸è¾“å…¥å‘é‡å¯¹åº”çš„è¾“å‡ºå‘é‡ä¼šåŒ…å«ä¸€å®šçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p><p><img src="/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/self-attentionçš„æŠ½è±¡ç»“æ„.png" alt></p><p>å¦‚æœè¦äº§ç”Ÿb1å‘é‡ï¼Œå…¶å®æ˜¯è€ƒè™‘äº†a1/a2/a3/a4å…¨éƒ¨å››ä¸ªå‘é‡åçš„ç»“æœã€‚</p><p>å…·ä½“åœ°ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦è€ƒè™‘a1å‘é‡ä¸å…¶ä»–å‘é‡a2/a3/a4ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œä¸¤ä¸ªå‘é‡ä¹‹é—´çš„ç›¸å…³æ€§æ˜¯ä¸€ä¸ªæ ‡é‡ï¼Œæˆ‘ä»¬ç”¨$\alpha$æ¥è¡¨ç¤ºï¼š</p><p><img src="/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/self-attentionåŸç†1_ç›¸å…³æ€§.png" alt></p><p>ç›¸å…³æ€§æ˜¯å¦‚ä½•è®¡ç®—å¾—åˆ°çš„ï¼Ÿæœ‰å¾ˆå¤šåšæ³•å¯ä»¥å®ç°ç›¸å…³æ€§çš„è®¡ç®—ã€‚éœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œçš„<strong>ç›¸å…³æ€§</strong>å¹¶éçŸ©é˜µå‘é‡ç©ºé—´ä¸­çš„ç›¸ä¼¼æ€§ï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>éœ€è¦æœºå™¨ä»æ•°æ®ä¸­å­¦ä¹ </strong>çš„å‚æ•°ã€‚ä¸‹å›¾æ˜¯ä¸¤ç§ä¸åŒçš„ç›¸å…³æ€§çš„è®¡ç®—æ–¹å¼ã€‚</p><p><img src="/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/self-attentionåŸç†2_ç›¸å…³æ€§çš„è®¡ç®—æ–¹æ³•.png" alt></p><p>ä¸Šå›¾å·¦è¾¹æ˜¯ä¸€ç§å¸¸ç”¨çš„å‘é‡ç›¸å…³æ€§è®¡ç®—æ³•ï¼Œé¦–å…ˆæŠŠä¸¤ä¸ªå‘é‡å„è‡ªä¹˜ä»¥ä¸€ä¸ªå‚æ•°çŸ©é˜µï¼Œå…¶ä¸­è¾“å…¥å‘é‡ä¼šå¾—åˆ°å¯¹åº”çš„æŸ¥è¯¢å‘é‡ queryï¼Œä¸Šä¸‹æ–‡å‘é‡ä¼šå¾—åˆ°å¯¹åº”çš„å…³é”®å‘é‡ keyï¼Œç„¶åæˆ‘ä»¬æŠŠqueryå’Œkeyè¿›è¡Œç‚¹ç§¯ï¼Œå¾—åˆ°çš„å°±æ˜¯ä¸¤ä¸ªå‘é‡çš„ç›¸å…³æ€§ã€‚å‚æ•°çŸ©é˜µæ˜¯å¯ä»¥é€šè¿‡æ•°æ®è¿›è¡Œå­¦ä¹ çš„ã€‚</p><p><img src="/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/self-attentionåŸç†3_ç›¸å…³æ€§è®¡ç®—æ–¹æ³•2.png" alt></p><p>ç”±æ­¤æˆ‘ä»¬æ¨å¹¿å¼€æ¥ï¼Œæ¯ä¸ªè¾“å…¥å‘é‡éƒ½å¯ä»¥è®¡ç®—å±äºè‡ªå·±çš„æŸ¥è¯¢å‘é‡queryï¼Œä»¥åŠå…¶ä»–è¾“å…¥å‘é‡çš„å…³é”®å‘é‡keyã€‚</p><p><img src="/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/self-attentionåŸç†4_ç›¸å…³æ€§è®¡ç®—æ–¹æ³•3.png" alt></p><p>è¾“å…¥å‘é‡è¿˜éœ€è¦ä¸è‡ªå·±è®¡ç®—ç›¸å…³æ€§ï¼Œè¿™æ ·å‡‘é½4ä¸ªç›¸å…³æ€§æ•°å€¼ã€‚ç”±æ­¤æˆ‘ä»¬å°±å¾—åˆ°äº†è¾“å…¥å‘é‡a1ä¸å…¶ä»–ï¼ˆåŒ…å«è‡ªå·±çš„ï¼‰å››ä¸ªå‘é‡ä¹‹é—´çš„ç›¸å…³ç¨‹åº¦ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åšçš„ï¼Œå°±æ˜¯æŠŠå››ä¸ªè¾“å…¥å‘é‡éƒ½ä¸è¯¥ç›¸å…³æ€§è¿›è¡Œä¹˜ç§¯ï¼Œç„¶åç›¸åŠ ï¼Œå°±å¾—åˆ°äº†åŒ…å«ä¸Šä¸‹æ–‡ç›¸å…³ä¿¡æ¯çš„è¾“å‡ºå‘é‡b1ã€‚</p><p><img src="/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/self-attentionåŸç†5_ç›¸å…³æ€§è®¡ç®—æ–¹æ³•4.png" alt></p><p>å†åˆ†åˆ«å¯¹a2/a3/a4å‘é‡å¦‚æ³•ç‚®åˆ¶ï¼Œå°±å¯ä»¥åˆ†åˆ«å¾—åˆ°å››ä¸ªè¾“å‡ºå‘é‡ã€‚</p><p>éœ€è¦æ³¨æ„ï¼Œè¾“å…¥å‘é‡æœ€åå‚ä¸è®¡ç®—æ—¶ï¼Œä¸ºäº†å°†å…¶è½¬åŒ–ä¸ºç¨ å¯†å‘é‡ï¼Œä¹Ÿéœ€è¦ä¹˜ä»¥ä¸€ä¸ªçŸ©é˜µåæ‰èƒ½å‚ä¸è®¡ç®—ã€‚</p><h2 id="ä¸‰ã€self-attention-çš„å¹¶è¡Œè®¡ç®—"><a href="#ä¸‰ã€self-attention-çš„å¹¶è¡Œè®¡ç®—" class="headerlink" title="ä¸‰ã€self-attention çš„å¹¶è¡Œè®¡ç®—"></a>ä¸‰ã€self-attention çš„å¹¶è¡Œè®¡ç®—</h2><p>å‘é‡çš„è½¬åŒ–æ“ä½œéƒ½æ˜¯çŸ©é˜µä¹˜æ³•ï¼Œè¿™æ„å‘³ç€å¯¹å‘é‡è¿›è¡Œè½¬åŒ–çš„æ“ä½œæ˜¯å¯ä»¥å¹¶è¡Œè®¡ç®—çš„ã€‚</p><ol><li>é€šè¿‡å‚æ•°å­¦ä¹ ï¼Œå°†è¾“å…¥å‘é‡ï¼ˆä¸€èˆ¬æ˜¯ç¨€ç–çš„ï¼‰è½¬åŒ–ä¸ºquery/key/valueï¼ˆç¨ å¯†å‘é‡ï¼‰ï¼Œç„¶åå°†å‘é‡æ‹¼åˆå½¢æˆçŸ©é˜µï¼Œå¾—åˆ°çŸ©é˜µQã€Kã€Vï¼š</li></ol><p><img src="/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/self-attentionçš„å¹¶è¡Œè®¡ç®—1.png" alt></p><ol><li>çŸ©é˜µQä¸Kåšç‚¹ä¹˜ï¼Œå¾—åˆ°ç›¸å…³æ€§ç³»æ•°çŸ©é˜µA</li></ol><p><img src="/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/self-attention-parallel-2.png" alt></p><ol><li>ç›¸å…³æ€§çŸ©é˜µAç»è¿‡softmaxè¿›è¡Œæ¦‚ç‡å½’ä¸€åŒ–åï¼Œä¸çŸ©é˜µVè¿›è¡Œç‚¹ä¹˜ï¼Œå¾—åˆ°è¾“å‡ºå‘é‡B</li></ol><p><img src="/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/self-attention-parallel-3.png" alt></p><p><strong>self-attentionå°†è¾“å…¥å‘é‡è½¬åŒ–ä¸ºè¾“å‡ºå‘é‡çš„è¿‡ç¨‹åˆ°æ­¤ç»“æŸã€‚æ•´ä¸ªè¿‡ç¨‹æ€»ç»“å¦‚ä¸‹</strong>ï¼š</p><p><img src="/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/self-attention-parallel-summary.png" alt></p><h2 id="å››ã€å¤šå¤´æ³¨æ„åŠ›-Multihead-Self-attention"><a href="#å››ã€å¤šå¤´æ³¨æ„åŠ›-Multihead-Self-attention" class="headerlink" title="å››ã€å¤šå¤´æ³¨æ„åŠ› Multihead Self-attention"></a>å››ã€å¤šå¤´æ³¨æ„åŠ› Multihead Self-attention</h2><p>å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶ï¼Œå°±æ˜¯åŒæ—¶å­¦ä¹ å¤šç§ç›¸å…³æ€§çš„æœºåˆ¶ã€‚</p><p>è¿™æ ·åšçš„ç†ç”±æ˜¯ï¼šè¯­è¨€æ˜¯å­˜åœ¨åŒä¹‰è¯ã€ä¸€è¯å¤šä¹‰ç­‰ç°è±¡çš„ï¼Œå³ä¾¿æ˜¯åŒä¸€å¥è¯ï¼Œåœ¨ä¸åŒè¯­å¢ƒä¸‹é˜è¿°ä¹Ÿä¼šäº§ç”Ÿä¸åŒçš„æ•ˆæœã€‚å¦‚æœåªç®—ä¸€ç§ç›¸å…³æ€§ï¼Œæ¨¡å‹ä¾¿æ— æ³•æŒæ¡ä¸€è¯å¤šä¹‰ç­‰èƒ½åŠ›ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å­¦ä¹ å¤šä¸ªç›¸å…³æ€§çŸ©é˜µAã€‚</p><p>å¦‚æœæƒ³è¦å­¦ä¹ å¤šä¸ªç›¸å…³æ€§çŸ©é˜µAï¼Œ</p><ol><li>å°±å¿…é¡»æœ‰å¤šä¸ªè¾“å…¥çŸ©é˜µQ/K/Vä¸ä¹‹å¯¹åº”ï¼Œæ¯å¤šä¸€ä¸ªAï¼Œå°±è¦å¤šå­¦ä¹ ä¸€ç±»å‚æ•°çŸ©é˜µï¼›</li><li>ä¼šäº§ç”Ÿå¤šç»„è¾“å‡ºçŸ©é˜µBï¼Œéœ€è¦å†å­¦ä¹ ä¸€ä¸ªå‚æ•°çŸ©é˜µï¼Œå°†ä¸€ç³»åˆ—çš„è¾“å‡ºçŸ©é˜µåˆå¹¶èµ·æ¥ï¼›</li></ol><p>å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶åœ¨åŸæœ‰æ³¨æ„åŠ›æœºåˆ¶çš„åŸºç¡€ä¸Šï¼ŒæŠŠåŸæœ‰çš„queryå‘é‡å†å¤šä¹˜nä¸ªå‚æ•°çŸ©é˜µï¼Œå°†queryå¤åˆ¶ä¸ºnä¸ªå­å‘é‡ï¼›keyå’Œvalueå‘é‡äº¦æ˜¯å¦‚æ­¤ï¼š</p><p><img src="/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/multi-head-self-attention-1.png" alt></p><p>queryå‘é‡çš„ç¬¬ä¸€ä¸ªå¤åˆ¶ä½“ä¼šä¸å„ä¸ªkeyå‘é‡çš„ç¬¬ä¸€ä¸ªå¤åˆ¶ä½“è¿›è¡Œè®¡ç®—ç›¸å…³æ€§ï¼Œç”Ÿæˆç›¸å…³æ€§çŸ©é˜µA1ï¼Œç¬¬äºŒä¸ªå¤åˆ¶ä½“ä¼šä¸å„ä¸ªkeyå‘é‡çš„ç¬¬äºŒä¸ªå¤åˆ¶ä½“è®¡ç®—ç›¸å…³æ€§ï¼Œç”Ÿæˆç›¸å…³æ€§çŸ©é˜µA2ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p><img src="/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/multi-head-self-attention-2.png" alt></p><p>ç”±æ­¤ä¼šäº§å‡ºnä»½ä¸åŒçš„è¾“å‡ºå‘é‡ï¼Œä»–ä»¬åˆ†åˆ«æ˜¯è€ƒè™‘nç§ä¸åŒç›¸å…³æ€§ä¸‹è®¡ç®—å‡ºæ¥çš„è¾“å‡ºå‘é‡ã€‚ä½¿ç”¨ä¸€ä¸ªå‚æ•°çŸ©é˜µå°†ä»–ä»¬åˆå¹¶èµ·æ¥ï¼š</p><p><img src="/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/multi-head-self-attention-3.png" alt></p><p>è¿™å°±æ˜¯å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶çš„è®¾è®¡æ€è·¯ã€‚å¦‚æœè¦è®¡ç®—Nç§ç›¸å…³æ€§ï¼Œå°±å«åšNå¤´æ³¨æ„åŠ›æœºåˆ¶ã€‚</p><h2 id="äº”ã€ä½ç½®ç¼–ç "><a href="#äº”ã€ä½ç½®ç¼–ç " class="headerlink" title="äº”ã€ä½ç½®ç¼–ç "></a>äº”ã€ä½ç½®ç¼–ç </h2><p>ä¸Šé¢çš„æœºåˆ¶åªä»‹ç»äº† self-attention å¦‚ä½•æŠŠè¾“å…¥å‘é‡å’Œå®ƒçš„ä¸Šä¸‹æ–‡ä¿¡æ¯è¿›è¡Œç¼–ç ï¼Œä½†æ˜¯å¿½ç•¥äº†ä¸Šä¸‹æ–‡ä¹Ÿæ˜¯æœ‰ä½ç½®å…³ç³»çš„ï¼Œç†è®ºä¸Šç¦»å½“å‰ä½ç½®æ›´è¿‘çš„ä¸Šä¸‹æ–‡åº”è¯¥è·å¾—æ›´å¤šæ³¨æ„åŠ›ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦é¢å¤–æ·»åŠ ä¸€ä¸ªèƒ½å¤Ÿè¡¨ç¤ºä½ç½®çš„å‚æ•°ã€‚</p><p>åšæ³•ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨è¾“å…¥å±‚ä¸ºæ¯ä¸ªå‘é‡æ·»åŠ ä¸€ä¸ªé¢å¤–çš„ä½ç½®å‘é‡å³å¯ã€‚</p><p><img src="/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/positional-encoding-1.png" alt></p><p>è¿™ä¸ªä½ç½®å‘é‡å¯ä»¥æ˜¯ä½ è‡ªå·±å®šä¹‰çš„ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°æ”¾åˆ°ç½‘ç»œä¸­è¿›è¡Œå­¦ä¹ ã€‚æ€»ä¹‹å®ƒç†è®ºä¸Šåº”è¯¥èƒ½å¤Ÿè¡¨ç¤ºä½ç½®çš„è¿œè¿‘å…³ç³»ã€‚</p><h2 id="å…­ã€self-attention-çš„å…·ä½“åº”ç”¨"><a href="#å…­ã€self-attention-çš„å…·ä½“åº”ç”¨" class="headerlink" title="å…­ã€self-attention çš„å…·ä½“åº”ç”¨"></a>å…­ã€self-attention çš„å…·ä½“åº”ç”¨</h2><p>ä¸Šé¢æˆ‘ä»¬æ˜¯ä»¥æ–‡æœ¬ä¸ºä¾‹ä»‹ç»çš„self-attentionï¼Œå®é™…ä¸Šæœ‰å¾ˆå¤šå…¶ä»–ä»»åŠ¡ä¹Ÿå¯ä»¥ç”¨self-attentionæ¥è§£å†³ï¼ˆè™½ç„¶ä¸è§å¾—æ˜¯æœ€ä½³æ–¹æ¡ˆï¼‰ã€‚</p><p>è¯­éŸ³è¯†åˆ«ä»»åŠ¡é‡Œï¼Œé€šè¿‡å°†ä¸€æ®µéŸ³é¢‘æŒ‰ç…§ä¸€å®šæ—¶é—´çª—å£è¿›è¡Œåˆ‡åˆ†ï¼Œä¹Ÿå¯ä»¥å¾—åˆ°ä¸€ä¸ªåŒ…å«å¾ˆå¤šå‘é‡çš„è¾“å…¥åºåˆ—ï¼›åˆ™å¤„ç†æ–¹æ³•ä¸æ–‡æœ¬ä»»åŠ¡å¤§åŒå°å¼‚ï¼Œåªä¸è¿‡è¯­éŸ³åˆ†å‰²æ—¶äº§ç”Ÿçš„è¾“å…¥åºåˆ—ä¼šéå¸¸é•¿ï¼Œæ­¤æ—¶éœ€è¦å¯¹è®¡ç®—è¿‡ç¨‹åŠ ä»¥ä¼˜åŒ–ã€‚ä¾‹å­ï¼šTruncate Self-Attention</p><p>å›¾åƒè¯†åˆ«ä»»åŠ¡é‡Œï¼Œæ¯ä¸ªå›¾åƒæŒ‰ç…§åƒç´ è¿›è¡Œåˆ†å‰²ï¼Œå¹¶é€è¡Œéå†ï¼Œä¹Ÿå¯ä»¥å½¢æˆä¸€ä¸ªåºåˆ—ï¼Œè¿™ä¸ªåºåˆ—é‡Œçš„æ¯ä¸ªè¾“å…¥å‘é‡æ˜¯(R,G,B)çš„ä¸‰ç»´å‘é‡ã€‚ä¾‹å­ï¼šSelf-Attention GAN</p><h2 id="ä¸ƒã€å…¶ä»–å˜ç§-self-attention"><a href="#ä¸ƒã€å…¶ä»–å˜ç§-self-attention" class="headerlink" title="ä¸ƒã€å…¶ä»–å˜ç§ self-attention"></a>ä¸ƒã€å…¶ä»–å˜ç§ self-attention</h2><h2 id="å…«ã€æ€»ç»“å’Œæé—®"><a href="#å…«ã€æ€»ç»“å’Œæé—®" class="headerlink" title="å…«ã€æ€»ç»“å’Œæé—®"></a>å…«ã€æ€»ç»“å’Œæé—®</h2><h3 id="1-Self-Attention-çš„æ ¸å¿ƒæ€æƒ³ï¼Ÿ"><a href="#1-Self-Attention-çš„æ ¸å¿ƒæ€æƒ³ï¼Ÿ" class="headerlink" title="1. Self-Attention çš„æ ¸å¿ƒæ€æƒ³ï¼Ÿ"></a>1. Self-Attention çš„æ ¸å¿ƒæ€æƒ³ï¼Ÿ</h3><p>é€šè¿‡ç»¼åˆè€ƒè™‘è¾“å…¥è¯ä¸ä¸Šä¸‹æ–‡ä¹‹é—´çš„ç›¸å…³å…³ç³»ï¼Œå¾—åˆ°åŒ…å«ä¸Šä¸‹æ–‡è¯­ä¹‰ä¿¡æ¯çš„è¾“å‡ºå‘é‡ã€‚</p><h3 id="2-Self-attention-æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Ÿ"><a href="#2-Self-attention-æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Ÿ" class="headerlink" title="2. Self-attention æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Ÿ"></a>2. Self-attention æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Ÿ</h3><script type="math/tex; mode=display">\text{Attention}(Q,K,V)=\text{softmax}(\frac{QK^T}{\sqrt{d_k}})V</script><p>å…¶ä¸­Qã€Kã€Véƒ½æ˜¯ä»è¾“å…¥å‘é‡å­¦ä¹ è€Œæ¥çš„ç¨ å¯†å‘é‡ç»„æˆçš„çŸ©é˜µï¼Œå®ƒä»¬ä¸åŒ…å«ä¸Šä¸‹æ–‡çš„è¯­ä¹‰ä¿¡æ¯ï¼›</p><ul><li>Qï¼šæŸ¥è¯¢å‘é‡ï¼Œç›®æ ‡å­—ä½œä¸º Queryï¼›</li><li>Kï¼šé”®å‘é‡ï¼Œå…¶ä¸Šä¸‹æ–‡çš„å„ä¸ªå­—ä½œä¸º Keyï¼›</li><li>Vï¼šå€¼å‘é‡ï¼Œä¸Šä¸‹æ–‡å„ä¸ªå­—çš„ Valueï¼›</li></ul><p>$d_k$æ˜¯Q/K/Vçš„ç»´åº¦ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†é™ä½åˆ†é‡ä¹‹é—´çš„æ–¹å·®ï¼Œé˜²æ­¢è¾“å…¥å‘é‡çš„ç»´åº¦è¿‡é«˜å¯¼è‡´ç‚¹å‡»å‡ºæ¥çš„ç»“æœè¿‡å¤§ï¼Œä½¿softmaxå‡ºæ¥çš„ç»“æœå‡ºç°ä¸€äº›æç«¯æƒ…å†µï¼ˆæ¯”å¦‚åªæœ‰ä¸€ä¸ªåˆ†é‡æ˜¯0.99999ï¼Œå…¶ä»–åˆ†é‡éƒ½æ˜¯0ï¼‰ï¼Œè¿›è€Œå¯¼è‡´è®­ç»ƒå›°éš¾çš„ç°è±¡ã€‚</p><h3 id="3-Self-Attention-å’Œ-CNN-çš„å¼‚åŒï¼Ÿ"><a href="#3-Self-Attention-å’Œ-CNN-çš„å¼‚åŒï¼Ÿ" class="headerlink" title="3. Self-Attention å’Œ CNN çš„å¼‚åŒï¼Ÿ"></a>3. Self-Attention å’Œ CNN çš„å¼‚åŒï¼Ÿ</h3><p>CNNæ˜¯ä¸€ç±»ç‰¹æ®Šçš„Attentionï¼Œå³å°†æ³¨æ„åŠ›èšç„¦äºæ„Ÿå—é‡ï¼ˆå·ç§¯æ ¸ï¼‰ä¸­çš„ä¸€ç§self-attentionç½‘ç»œç»“æ„ã€‚</p><p>è€Œself-attentionçš„æ„Ÿå—é‡èŒƒå›´æ˜¯æ•´ä¸ªåºåˆ—ï¼Œå¯ä»¥è‡ªè¡Œå­¦ä¹ å“ªäº›æ˜¯éœ€è¦é‡ç‚¹å…³æ³¨çš„ã€‚</p><p>è¿™ä¹Ÿå°±æ„å‘³ç€self-attentionç›¸è¾ƒäºCNNè€Œè¨€æ›´å¤æ‚ã€å‚æ•°æ›´å¤šï¼Œéœ€è¦æ›´å¤šæ•°æ®è¿›è¡Œè®­ç»ƒã€‚</p><p>æœ‰è®¨è®ºäºŒè€…å…³ç³»çš„è®ºæ–‡ï¼š</p><blockquote><p>On the Relationship between Self-Attention and Convolutional Layers</p></blockquote><p>ä»æ‰€éœ€çš„æ•°æ®é‡å’Œå‡†ç¡®ç‡æ¯”è¾ƒä¸Šï¼Œå¯ä»¥è¾…è¯è¿™ä¸€ç‚¹ï¼š</p><p><img src="/2022/10/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note6-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/self-attention-versus-cnn.png" alt></p><p>é‚£å°±æ˜¯åœ¨æ•°æ®é‡è¾ƒå°çš„æƒ…å†µä¸‹ï¼ŒCNNä½œä¸ºç®€å•æ¨¡å‹å¯ä»¥è¡¨ç°å¾—æ›´å¥½ï¼›ä½†æ˜¯æ•°æ®é‡å……è¶³æ—¶ï¼Œself-attentionå…·æœ‰æ›´é«˜çš„ä¸Šé™ã€‚</p><h3 id="4-Self-Attention-ä¸-RNN-çš„æ¯”è¾ƒï¼Ÿ"><a href="#4-Self-Attention-ä¸-RNN-çš„æ¯”è¾ƒï¼Ÿ" class="headerlink" title="4. Self-Attention ä¸ RNN çš„æ¯”è¾ƒï¼Ÿ"></a>4. Self-Attention ä¸ RNN çš„æ¯”è¾ƒï¼Ÿ</h3><p>RNNè™½ç„¶ä¹Ÿèƒ½å¤Ÿå­¦ä¹ é•¿è·ç¦»ä¾èµ–å…³ç³»ï¼Œä½†æ˜¯å®ƒçš„ç»“æ„å’Œè¿ä½œæ–¹å¼ï¼ˆè¦æƒ³è®¡ç®—b2ï¼Œå¿…é¡»å…ˆè®¡ç®—b1ï¼Œå­˜åœ¨å…ˆåä¾èµ–å…³ç³»ï¼‰å†³å®šäº†å®ƒéš¾ä»¥å¹¶è¡ŒåŒ–ï¼Œè¿™å°±å¯¼è‡´å®ƒçš„è®­ç»ƒè¿‡ç¨‹éå¸¸ç¼“æ…¢ã€‚</p><p>å¦å¤–RNNåœ¨è¾“å…¥åºåˆ—è¿‡é•¿æ—¶ï¼Œä¹Ÿå­˜åœ¨æ¢¯åº¦æ¶ˆå¤±æˆ–è€…æ¢¯åº¦çˆ†ç‚¸çš„é—®é¢˜ï¼Œå¯¼è‡´æ— æ³•è®°å¿†é•¿è·ç¦»ä¿¡æ¯ã€‚</p><p>Self-Attentionçš„å†…éƒ¨æœ‰å¤§é‡çŸ©é˜µä¹˜æ³•è¿ç®—ï¼Œå¯ä»¥è¢«GPUä¼˜åŒ–çš„å¾ˆå¿«ã€‚</p><h3 id="5-MultiHead-Attention-çš„ç”Ÿæ•ˆåŸç†ï¼Ÿ"><a href="#5-MultiHead-Attention-çš„ç”Ÿæ•ˆåŸç†ï¼Ÿ" class="headerlink" title="5. MultiHead Attention çš„ç”Ÿæ•ˆåŸç†ï¼Ÿ"></a>5. MultiHead Attention çš„ç”Ÿæ•ˆåŸç†ï¼Ÿ</h3><p>å€Ÿé‰´äº†CNNä¸­åŒä¸€å·ç§¯å±‚å†…ä½¿ç”¨å¤šä¸ªå·ç§¯æ ¸çš„æ€æƒ³ã€‚ç±»ä¼¼äºCNNä¸­é€šè¿‡å¤šé€šé“æœºåˆ¶è¿›è¡Œç‰¹å¾é€‰æ‹©ã€‚</p><p>Transformerä¸­ä½¿ç”¨åˆ‡å¤´(split)çš„æ–¹æ³•ï¼Œæ˜¯ä¸ºäº†åœ¨ä¸å¢åŠ å¤æ‚åº¦ï¼ˆ$O(n^2 d)$ï¼‰çš„å‰æä¸‹äº«å—ç±»ä¼¼CNNä¸­â€œä¸åŒå·ç§¯æ ¸â€çš„ä¼˜åŠ¿ã€‚</p><p>åœ¨æ¯ä¸ªå¤´çš„è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œå½¼æ­¤ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œå‚æ•°ä¸å…±äº«ï¼Œä»…åœ¨æœ€åå°†ç»“æœæ‹¼æ¥èµ·æ¥ï¼Œè¿™æ ·å¯ä»¥å…è®¸æ¨¡å‹åœ¨ä¸åŒçš„è¡¨ç¤ºå­ç©ºé—´é‡Œå­¦ä¹ åˆ°ç›¸å…³çš„ä¿¡æ¯ã€‚</p><p>æœ€åæ•´åˆå¤šä¸ªå‘é‡ï¼ŒæŠŠä»–ä»¬é™ç»´åˆ°ä¸€ä¸ªå‘é‡çš„é•¿åº¦ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿæ˜¯åœ¨å­¦ä¹ â€åˆ°åº•å“ªä¸ªå¤´å­¦åˆ°çš„çŸ¥è¯†æ˜¯æœ‰æ•ˆçš„â€ã€‚</p><h3 id="6-ä½ç½®ç¼–ç çš„è®¡ç®—æ–¹æ³•ï¼Ÿ"><a href="#6-ä½ç½®ç¼–ç çš„è®¡ç®—æ–¹æ³•ï¼Ÿ" class="headerlink" title="6. ä½ç½®ç¼–ç çš„è®¡ç®—æ–¹æ³•ï¼Ÿ"></a>6. ä½ç½®ç¼–ç çš„è®¡ç®—æ–¹æ³•ï¼Ÿ</h3><p>Attention is all you need è®ºæ–‡ä¸­çš„ä½ç½®ç¼–ç çš„å®ç°æ–¹å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\text{PosEncoding}_{(\text{pos}, 2i)}=\sin{(\frac{\text{pos}}{10000^{2i/d_{model}}})} \\\text{PosEncoding}_{(\text{pos}, 2i+1)}=\cos{(\frac{\text{pos}}{10000^{2i/d_{model}}})}</script><p>å…¶ä¸­posè¡¨ç¤ºè¯åœ¨å¥å­ä¸­çš„ä½ç½®ï¼Œiåˆ™è¡¨ç¤ºå‘é‡çš„åˆ†é‡ã€‚è¿™ç§è®¡ç®—æ–¹æ³•æ— éœ€å­¦ä¹ ä»»ä½•å‚æ•°ã€‚</p><p>åœ¨BERTè®ºæ–‡ä¸­ï¼Œé‡‡ç”¨çš„ä½ç½®ç¼–ç å°±å˜æˆäº†Embeddingçš„æ–¹æ³•è‡ªåŠ¨å­¦ä¹ å¾—åˆ°ã€‚</p><h2 id="é™„ã€self-attention-çš„ä»£ç å®ç°"><a href="#é™„ã€self-attention-çš„ä»£ç å®ç°" class="headerlink" title="é™„ã€self-attention çš„ä»£ç å®ç°"></a>é™„ã€self-attention çš„ä»£ç å®ç°</h2>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
      <tag>MOOC</tag>
      
      <tag>Self-Attention</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘æå®æ¯…2019ML-Note5-å·ç§¯ç¥ç»ç½‘ç»œ</title>
    <link href="/2022/10/22/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note5-%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/"/>
    <url>/2022/10/22/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note5-%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/</url>
    
    <content type="html"><![CDATA[<p>æå®æ¯…è€å¸ˆä¸»è®²çš„æœºå™¨å­¦ä¹ MOOCè¯¾ç¨‹çš„ç¬”è®°ï¼Œæœ¬ç¯‡è®°å½•çš„çŸ¥è¯†ç‚¹æœ‰ï¼šå·ç§¯ç¥ç»ç½‘ç»œã€‚<br><!--more---></p><h2 id="ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ç”¨CNNï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ç”¨CNNï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ç”¨CNNï¼Ÿ"></a>ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ç”¨CNNï¼Ÿ</h2><p>è¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆè¦è¯´æ˜ä¸ºä»€ä¹ˆå…¨è¿æ¥ç½‘ç»œä¸é€‚åˆåšå›¾åƒè¯†åˆ«ä»»åŠ¡ã€‚</p><p><img src="/2022/10/22/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note5-%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/ä¸ºä»€ä¹ˆè¦ç”¨CNN_1.png" alt></p><p>ä»¥å›¾åƒä¸ºè¾“å…¥ï¼Œä¼šå¯¼è‡´è¾“å…¥åºåˆ—ç‰¹åˆ«é•¿ã€‚å‡è®¾è¾“å…¥æ˜¯ä¸€å¼ <code>100*100</code>åƒç´ çš„å›¾ç‰‡ï¼Œæ¯ä¸ªåƒç´ æœ‰<code>R/G/B</code>ä¸‰ä¸ªåˆ†é‡ï¼Œè¦æƒ³å°†å®ƒæ•´ç†ä¸ºè¾“å…¥åºåˆ—ï¼Œæ¯å¼ å›¾ç‰‡çš„ç»´åº¦ä¸º<code>100*100*3=30000</code>ã€‚</p><p>è¾“å…¥å±‚çš„å‚æ•°è¿‡å¤šï¼Œä¼šå¯¼è‡´ä¸­é—´å±‚çš„å‚æ•°è¿‡å¤šï¼Œç½‘ç»œä¸ä»…è®­ç»ƒä»£ä»·æå‡ï¼Œè¿˜æœ‰è¿‡æ‹Ÿåˆçš„é£é™©ã€‚å®é™…ä¸Šå›¾åƒåˆ†ç±»ä»»åŠ¡ç”¨ä¸ç€é‚£ä¹ˆå¤šå‚æ•°ï¼ŒåŸå› æœ‰ä¸‰ï¼š</p><ol><li>æ¯ç§ç‰¹å¾æ‰€éœ€çš„ä»…ä»…æ˜¯å›¾ç‰‡çš„ä¸€å°éƒ¨åˆ†</li></ol><p>ä»ç¥ç»ç½‘ç»œçš„å¯è§£é‡Šæ€§ä¸Šæ¥è¯´ï¼Œç½‘ç»œçš„ç¬¬ä¸€å±‚å­¦ä¹ åˆ°çš„æ˜¯æœ€ç®€å•çš„ç‰¹å¾åˆ†ç±»ï¼Œæ¯”å¦‚ä¸€å¼ è¾“å…¥å›¾ç‰‡â€æœ‰æ²¡æœ‰ç»¿è‰²å‡ºç°ï¼Œæœ‰æ²¡æœ‰é»„è‰²å‡ºç°ï¼Œæœ‰æ²¡æœ‰æ–œçš„æ¡çº¹â€œç­‰ç­‰ï¼›ç¬¬äºŒå±‚ä¼šå­¦åˆ°æ›´å¤æ‚ä¸€äº›çš„ç‰¹å¾ç»„åˆï¼Œè¶Šå¾€åå­¦åˆ°çš„ç‰¹å¾è¶ŠæŠ½è±¡ã€‚</p><p>ä½†æ˜¯å¯¹äºä¸€ä¸ªæ£€æµ‹â€æ˜¯å¦æœ‰é¸Ÿå˜´â€œçš„åˆ†ç±»å™¨æ¥è¯´ï¼Œä¸éœ€è¦çœ‹æ•´å¼ å›¾ç‰‡å°±å¯ä»¥çŸ¥é“è¿™ä»¶äº‹ï¼›<strong>è¾“å…¥åºåˆ—å¯ä»¥ä»ä¸€æ•´å¼ å›¾ç‰‡ä¼˜åŒ–ä¸ºåŸå›¾çš„ä¸€å°éƒ¨åˆ†</strong>ã€‚</p><p><img src="/2022/10/22/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note5-%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/ä¸ºä»€ä¹ˆè¦ç”¨CNN_2.png" alt></p><ol><li>è¯†åˆ«åŒä¸€ç‰¹å¾çš„åˆ†ç±»å™¨çš„éƒ¨åˆ†å‚æ•°å¯ä»¥å…±äº«</li></ol><p>å¯¹äºæ£€æµ‹é¸Ÿå˜´çš„åˆ†ç±»å™¨è€Œè¨€ï¼Œé¸Ÿå˜´å‡ºç°åœ¨å›¾ç‰‡çš„ä¸åŒä½ç½®æ ¹æœ¬æ— æ‰€è°“ã€‚æˆ‘ä»¬ä¸éœ€è¦è®­ç»ƒä¸¤ç»„å‚æ•°ï¼Œæ¥åˆ†åˆ«æ£€æµ‹åˆ°åº•æ˜¯å·¦ä¸‹æ–¹çš„é¸Ÿå˜´è¿˜æ˜¯å³ä¸Šæ–¹çš„é¸Ÿå˜´ã€‚è¿™æ„å‘³ç€<strong>åšåŒä¸€ç‰¹å¾åˆ†ç±»çš„å‚æ•°å¯ä»¥å…±äº«</strong>ã€‚</p><p><img src="/2022/10/22/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note5-%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/ä¸ºä»€ä¹ˆè¦ç”¨CNN_3_å‚æ•°å…±äº«.png" alt></p><ol><li><strong>è¾“å…¥åºåˆ—çš„éƒ¨åˆ†ä¿¡æ¯å¯ä»¥ç•¥è¿‡</strong></li></ol><p><img src="/2022/10/22/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note5-%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/ä¸ºä»€ä¹ˆè¦ç”¨CNN_4.png" alt></p><p>å¯¹å›¾ç‰‡è¿›è¡Œé‡‡æ ·ï¼Œå¾—åˆ°çš„åƒç´ æ›´ä½çš„å›¾ç‰‡ï¼Œå¹¶ä¸ä¼šå½±å“äººå¯¹è¿™å¼ å›¾ç‰‡çš„ç†è§£ã€‚</p><h2 id="CNN-æ¶æ„"><a href="#CNN-æ¶æ„" class="headerlink" title="CNN æ¶æ„"></a>CNN æ¶æ„</h2><p>å·ç§¯ç¥ç»ç½‘ç»œæœ‰ä¸¤ä¸ªåŸºæœ¬å•å…ƒï¼šå·ç§¯å±‚(Convolution Layers)å’Œæ± åŒ–å±‚(MaxPooling Layers)ï¼Œå¯ä»¥å®ç°ä¸Šé¢ä¸‰ç‚¹æ€§èƒ½ä¼˜åŒ–ã€‚</p><p>ä¸€ä¸ªå®Œæ•´çš„å·ç§¯ç¥ç»ç½‘ç»œå¤§æ¦‚é•¿è¿™æ ·ï¼š</p><p><img src="/2022/10/22/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note5-%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/CNNæ¶æ„_1.png" alt></p><p>å·ç§¯å±‚ï¼šæ˜¯ä¸€ç§åˆ©ç”¨å·ç§¯æ“ä½œæå–å›¾åƒçš„å±€éƒ¨ç‰¹å¾çš„ç½‘ç»œç»“æ„ã€‚é€šè¿‡é€‰æ‹©å·ç§¯æ ¸ï¼Œä¸æ–­æ‰§è¡Œå·ç§¯æ“ä½œï¼Œå¾—åˆ°åŸå›¾åƒçš„ç‰¹å¾å›¾ï¼›åç»­çš„ç½‘ç»œæ ¹æ®è¯¥ç‰¹å¾å›¾ä¸ºè¾“å…¥ï¼Œç»§ç»­æå–ç‰¹å¾ã€‚</p><p>æ± åŒ–å±‚ï¼šæœ‰æœ€å¤§æ± åŒ–å’Œå¹³å‡æ± åŒ–ä¸¤ç§æ–¹å¼ï¼Œæœ€å¤§æ± åŒ–æ˜¯å–æ»‘åŠ¨çª—å£å†…æœ€å¤§çš„å…ƒç´ ä½œä¸ºè¾“å‡ºã€‚</p><h2 id="CNN-å·ç§¯å±‚ä¸å…¨è¿æ¥å±‚çš„è”ç³»"><a href="#CNN-å·ç§¯å±‚ä¸å…¨è¿æ¥å±‚çš„è”ç³»" class="headerlink" title="CNN å·ç§¯å±‚ä¸å…¨è¿æ¥å±‚çš„è”ç³»"></a>CNN å·ç§¯å±‚ä¸å…¨è¿æ¥å±‚çš„è”ç³»</h2><p>å·ç§¯æ ¸ä¸­çš„æƒå€¼æ¯æ¬¡æ»‘åŠ¨è®¡ç®—æ—¶åªæ˜¯å±€éƒ¨è¿æ¥ï¼Œä¸”åœ¨å·ç§¯åˆ—ä¸­çš„ç¥ç»å…ƒå…±äº«å‚æ•°â€”â€”è®¡ç®—å±€éƒ¨ä¿¡æ¯ï¼Œè€Œå…¨è¿æ¥å±‚ç¥ç»å…ƒçš„æƒå€¼ä¸æ‰€æœ‰è¾“å…¥ç›¸è¿â€”â€”è®¡ç®—å…¨å±€ä¿¡æ¯ã€‚</p><p>å·ç§¯å±‚çš„ä½œç”¨æ˜¯ä»è¾“å…¥æ•°æ®ä¸­é‡‡é›†å…³é”®æ•°æ®å†…å®¹ã€‚å…¨è¿æ¥å±‚åœ¨æ·±åº¦å·ç§¯ç¥ç»ç½‘ç»œä¸­çš„ä½œç”¨æ˜¯å°†å‰é¢ç»è¿‡å¤šæ¬¡å·ç§¯åé«˜åº¦æŠ½è±¡çš„ç‰¹å¾è¿›è¡Œæ•´åˆã€‚</p><p><img src="/2022/10/22/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note5-%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/CNNå·ç§¯å±‚ä¸å…¨è¿æ¥å±‚çš„å…³ç³».png" alt></p><h2 id="ç”¨Keraså®ç°CNNç½‘ç»œ"><a href="#ç”¨Keraså®ç°CNNç½‘ç»œ" class="headerlink" title="ç”¨Keraså®ç°CNNç½‘ç»œ"></a>ç”¨Keraså®ç°CNNç½‘ç»œ</h2><p>ä»¥<a href="https://www.tensorflow.org/tutorials/images/cnn">tensorflowçš„å›¾åƒåˆ†ç±»æ•™ç¨‹</a>ä¸ºä¾‹ï¼Œå®è·µä½¿ç”¨kerasæ­å»ºå·ç§¯æ¨¡å‹çš„æ–¹æ³•ï¼š</p><p>å…ˆå¯¼å…¥ç›¸å…³åŒ…</p><pre><code class="lang-py">import tensorflow as tffrom tensorflow.keras import datasets, layers, modelsimport matplotlib.pyplot as plt</code></pre><p>ç„¶åä¸‹è½½å¹¶å‡†å¤‡ CIFAR10 æ•°æ®é›†</p><pre><code class="lang-py">(train_images, train_labels), (test_images, test_labels) = datasets.cifar10.load_data()# å½’ä¸€åŒ–åƒç´ å€¼åˆ° 0 ~ 1train_images, test_images = train_images / 255.0, test_images / 255.0</code></pre><p>éªŒè¯æ•°æ®</p><pre><code class="lang-py">class_names = [&#39;airplane&#39;, &#39;automobile&#39;, &#39;bird&#39;, &#39;cat&#39;, &#39;deer&#39;,               &#39;dog&#39;, &#39;frog&#39;, &#39;horse&#39;, &#39;ship&#39;, &#39;truck&#39;]plt.figure(figsize=(10,10))for i in range(25):    plt.subplot(5,5,i+1)    plt.xticks([])    plt.yticks([])    plt.grid(False)    plt.imshow(train_images[i])    # The CIFAR labels happen to be arrays,     # which is why you need the extra index    plt.xlabel(class_names[train_labels[i][0]])plt.show()</code></pre><p><img src="/2022/10/22/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note5-%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/CIFAR10æ ·ä¾‹.png" alt></p><p>æ¥ä¸‹æ¥å¼€å§‹æ­å»ºç½‘ç»œï¼š</p><pre><code class="lang-py">model = models.Sequential()model.add(layers.Conv2D(32, (3, 3), activation=&#39;relu&#39;, input_shape=(32, 32, 3)))model.add(layers.MaxPooling2D((2, 2)))model.add(layers.Conv2D(64, (3, 3), activation=&#39;relu&#39;))model.add(layers.MaxPooling2D((2, 2)))model.add(layers.Conv2D(64, (3, 3), activation=&#39;relu&#39;))</code></pre><p>å·ç§¯ç½‘ç»œè¢«å°è£…ä¸º<code>Conv2D</code>ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå·ç§¯æ ¸ä¸ªæ•°ï¼Œä½ å¯ä»¥ç†è§£ä¸ºéšè—å±‚ç¥ç»å…ƒä¸ªæ•°ï¼›æˆ‘ä»¬è¿™é‡Œå®šä¹‰ä¸º32ä¸ªï¼Œå®ƒä¼šæå–32ç§ä¸åŒç±»åˆ«çš„ç‰¹å¾ã€‚</p><p>ç¬¬äºŒä¸ªå‚æ•°æ˜¯(3,3)ï¼Œä»£è¡¨å·ç§¯æ ¸çš„å¤§å°æ˜¯<code>3*3</code>çš„ï¼Œè¿™ä¸æè€å¸ˆè¯¾å ‚ä¸Šçš„ç¤ºä¾‹ä¸€è‡´ï¼›</p><p>ç¬¬ä¸‰ä¸ªå‚æ•°ä»£è¡¨æˆ‘ä»¬é€‰æ‹©æ¿€æ´»å‡½æ•°ä¸º<code>relu</code>ï¼›</p><p>ç¬¬å››ä¸ªå‚æ•°æ˜¯åªæœ‰åœ¨ä¸´è¿‘è¾“å…¥å±‚çš„å·ç§¯å±‚æ‰ä¼šæœ‰çš„ï¼Œä»£è¡¨è¾“å…¥å‘é‡çš„ç»´åº¦ã€‚è¿™é‡Œçš„å›¾åƒæ˜¯å½©è‰²çš„ï¼Œä¸ä½†æœ‰é•¿å®½ï¼Œè¿˜æœ‰é€šé“æ•°(channels)ä¸º3ï¼Œå› æ­¤è¾“å…¥å‘é‡çš„å¤§å°ä¸º(32,32,3)ã€‚</p><p>åœ¨æ­å»ºå®Œç¬¬ä¸€å±‚Conv2Dåï¼Œç´§æ¥ç€ä¼šæ­å»ºæœ€å¤§æ± åŒ–å±‚ï¼Œæ± åŒ–å±‚filterä¸º<code>2*2</code>ã€‚åç»­çš„æ“ä½œä¹Ÿæ˜¯é‡å¤çš„ï¼Œéƒ½æ˜¯ä¸€å±‚å·ç§¯ã€ä¸€å±‚æ± åŒ–ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ¨¡å‹ç»“æ„å¦‚ä¸‹ï¼š</p><pre><code class="lang-py">model.summary()</code></pre><pre><code>Model: &quot;sequential&quot;_________________________________________________________________ Layer (type)                Output Shape              Param #   ================================================================= conv2d (Conv2D)             (None, 30, 30, 32)        896        max_pooling2d (MaxPooling2D  (None, 15, 15, 32)       0          )                                                                conv2d_1 (Conv2D)           (None, 13, 13, 64)        18496      max_pooling2d_1 (MaxPooling  (None, 6, 6, 64)         0          2D)                                                              conv2d_2 (Conv2D)           (None, 4, 4, 64)          36928     =================================================================Total params: 56,320Trainable params: 56,320Non-trainable params: 0_________________________________________________________________</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç¬¬ä¸€å±‚Conv2Dçš„è¾“å‡ºå‘é‡çš„å¤§å°å˜æˆäº†(30,30,32)ï¼Œè¿™é‡Œ32æ˜¯æˆ‘ä»¬ä¹‹å‰å®šä¹‰çš„å·ç§¯æ ¸ä¸ªæ•°ï¼Œ<code>30*30</code>åˆ™æ˜¯ç‰¹å¾å›¾å¤§å°ã€‚æ¯æ¬¡å·ç§¯æ“ä½œéƒ½ä¼šå¯¼è‡´å®½åº¦å’Œé«˜åº¦çš„æ”¶ç¼©ã€‚</p><p>å‚æ•°é‡ä¸º896ï¼Œè¿™æ˜¯å¦‚ä½•è®¡ç®—æ¥çš„å‘¢ï¼Ÿé¦–å…ˆæ¯ä¸ªå·ç§¯æ ¸æ˜¯<code>3*3</code>ï¼ŒåŒæ—¶å›¾åƒæœ‰3ä¸ªchannelï¼Œå› æ­¤æ¯ä¸ªå·ç§¯æ ¸çš„å‚æ•°ä¸ªæ•°ä¸º<code>3*3*3</code>ï¼Œå†åŠ ä¸Šä¸€ä¸ªåç½®é‡ï¼Œå°±æ˜¯28ä¸ªå‚æ•°ã€‚ä¸€å…±32ä¸ªå·ç§¯æ ¸ï¼Œæœ€åçš„å‚æ•°é‡å³ä¸º<code>[(height * width * channel) + 1] * filter</code>ã€‚</p><p>å·ç§¯å±‚åªæ˜¯ç‰¹å¾æå–å™¨ï¼Œæœ€åä¸ºäº†å®Œæˆåˆ†ç±»æ“ä½œï¼Œæˆ‘ä»¬éœ€è¦åœ¨å·ç§¯å±‚åé¢æ‹¼æ¥å…¨è¿æ¥å±‚ã€‚ä¸ç”¨å¤ªå¤šï¼Œå‡ å±‚å°±å¤Ÿäº†ï¼š</p><pre><code class="lang-py">model.add(layers.Flatten())model.add(layers.Dense(64, activation=&#39;relu&#39;))model.add(layers.Dense(10))model.summary()</code></pre><pre><code>Model: &quot;sequential&quot;_________________________________________________________________ Layer (type)                Output Shape              Param #   ================================================================= conv2d (Conv2D)             (None, 30, 30, 32)        896        max_pooling2d (MaxPooling2D  (None, 15, 15, 32)       0          )                                                                conv2d_1 (Conv2D)           (None, 13, 13, 64)        18496      max_pooling2d_1 (MaxPooling  (None, 6, 6, 64)         0          2D)                                                              conv2d_2 (Conv2D)           (None, 4, 4, 64)          36928      flatten (Flatten)           (None, 1024)              0          dense (Dense)               (None, 64)                65600      dense_1 (Dense)             (None, 10)                650       =================================================================Total params: 122,570Trainable params: 122,570Non-trainable params: 0_________________________________________________________________</code></pre><p>å·ç§¯å±‚çš„è¾“å‡ºåœ¨è¾“å…¥ä¸¤ä¸ª Dense å±‚ä¹‹å‰éœ€è¦è¢«å±•å¹³ï¼ˆFlattenï¼‰ä¸ºå½¢çŠ¶ä¸º (1024) çš„å‘é‡ã€‚</p><p>ä»…æ·»åŠ äº†ä¸¤å±‚å…¨è¿æ¥å±‚ï¼Œå‚æ•°é‡å°±å¤šäº†65600+650ä¸ªï¼Œå¯ä»¥çœ‹åˆ°å…¨è¿æ¥å±‚çœŸçš„æ¯”CNNå¤šå¾ˆå¤šå†—ä½™å‚æ•°ã€‚</p><p>æœ€åç¼–è¯‘å¹¶è®­ç»ƒä¸€ä¸‹ï¼š</p><pre><code class="lang-py">model.compile(optimizer=&#39;adam&#39;,              loss=tf.keras.losses.SparseCategoricalCrossentropy(from_logits=True),              metrics=[&#39;accuracy&#39;])history = model.fit(train_images, train_labels, epochs=10,                     validation_data=(test_images, test_labels))plt.plot(history.history[&#39;accuracy&#39;], label=&#39;accuracy&#39;)plt.plot(history.history[&#39;val_accuracy&#39;], label = &#39;val_accuracy&#39;)plt.xlabel(&#39;Epoch&#39;)plt.ylabel(&#39;Accuracy&#39;)plt.ylim([0.5, 1])plt.legend(loc=&#39;lower right&#39;)plt.show()test_loss, test_acc = model.evaluate(test_images,  test_labels, verbose=2)</code></pre><p><img src="/2022/10/22/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note5-%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/è®­ç»ƒç»“æœ.png" alt></p><p>å‡†ç¡®ç‡åªæœ‰ä¸åˆ°70%ï¼Œå¯ä»¥æ”¹è¿›çš„åœ°æ–¹è¿˜æœ‰å¾ˆå¤šã€‚ä¸è¿‡å¯¹äºä¸€ä¸ªç®€å•æ¨¡å‹è€Œè¨€ï¼Œåœ¨10åˆ†ç±»ä»»åŠ¡ä¸Šèƒ½è¾¾åˆ°å¦‚æ­¤æˆç»©å·²æ˜¯ä¸å®¹æ˜“äº†ã€‚</p><h2 id="CNNå­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ"><a href="#CNNå­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="CNNå­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ"></a>CNNå­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ</h2><p>åˆ†æç¬¬ä¸€å±‚Convåˆ°åº•å­¦åˆ°äº†ä»€ä¹ˆè¿˜æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œå› ä¸ºæ¯ä¸ªå·ç§¯æ ¸å®é™…ä¸Šæ˜¯åœ¨è®¡ç®—å°èŒƒå›´å†…æ˜¯å¦åŒ…å«æŒ‡å®šç‰¹å¾ã€‚ä½†æ˜¯åç»­Convä¼šæ ¹æ®è¯¥ç‰¹å¾å›¾è®¡ç®—æ›´æŠ½è±¡çš„ç‰¹å¾ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•åˆ†æï¼Ÿ</p><p>å¯ä»¥é‡‡ç”¨è¿™ç§åˆ†ææ–¹æ³•ï¼Œé¦–å…ˆå›ºå®šå‚æ•°ï¼Œç„¶åé€šè¿‡æ¢¯åº¦ä¸‹é™æ³•å»æ‰¾èƒ½å¤Ÿè®©æŸä¸ªç¥ç»å…ƒçš„è¾“å‡ºå€¼æœ€å¤§çš„è¾“å…¥å›¾ç‰‡ã€‚</p><p><img src="/2022/10/22/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note5-%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/ç”Ÿæˆæœ€èƒ½æ¿€æ´»æŸä¸ªç¥ç»å…ƒçš„å›¾ç‰‡.png" alt></p><p>ä¸Šé¢å°±æ˜¯12ä¸ªfilterå¯¹åº”çš„ç»“æœï¼Œè¿™äº›å›¾ç‰‡çš„ç‰¹å¾æ˜¯æŸç§çº¹è·¯åœ¨å›¾ä¸Šä¸æ–­çš„é‡å¤ã€‚å› æ­¤å®é™…ä¸Šç¥ç»å…ƒä¼šå¯¹è¿™ç§ä¸æ–­é‡å¤çš„èŠ±çº¹åšå‡ºæœ€å¤§çš„ååº”ã€‚</p><p>å½“æˆ‘ä»¬ä»¥åŒæ ·çš„åˆ†ææ–¹æ³•åˆ†æå·ç§¯ç½‘ç»œæœ€åçš„å…¨è¿æ¥å±‚ï¼ˆè¿™é‡Œæ±‡èšäº†å·ç§¯å±‚æå–å‡ºæ¥çš„å„è·¯ç‰¹å¾ï¼‰ï¼Œå¾—åˆ°çš„å›¾åƒä¸ºï¼š</p><p><img src="/2022/10/22/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note5-%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/å…¨è¿æ¥_ç”Ÿæˆæœ€èƒ½æ¿€æ´»æŸä¸ªç¥ç»å…ƒçš„å›¾ç‰‡.png" alt></p><p>å‘ç°æœ€èƒ½æ¿€æ´»æŸä¸ªç¥ç»å…ƒçš„å›¾ç‰‡ï¼Œä¸å†æ˜¯é‚£äº›çº¹è·¯å•ä¸€çš„å›¾åƒäº†ï¼Œè€Œæ˜¯å¸¦æœ‰æŸç§èŠ±çº¹ï¼Œä¼¼ä¹æœ‰æŸäº›å«ä¹‰ã€‚</p><p>ä½†æ˜¯å½“æˆ‘ä»¬ç”¨åŒæ ·çš„æ–¹æ³•åˆ†æè¾“å‡ºå±‚æ—¶ï¼Œå¾—åˆ°çš„å›¾åƒç†è®ºä¸Šåº”è¯¥æ˜¯ç¡®åˆ‡çš„æ•°å­—ï¼Œå®é™…ä¸Šç¡®å®ä¹±ç ä¸€æ ·æ— æ³•è¢«è¾¨è®¤çš„å›¾ç‰‡ï¼š</p><p><img src="/2022/10/22/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note5-%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/è¾“å‡ºå±‚_ç”Ÿæˆæœ€èƒ½æ¿€æ´»æŸä¸ªç¥ç»å…ƒçš„å›¾ç‰‡.png" alt></p><p>äººç±»è™½ç„¶æ— æ³•è¾¨è¯†ï¼Œä½†æ˜¯æœºå™¨ååˆ†ç¡®å®šåœ°å‘Šè¯‰æˆ‘ä»¬ï¼Œå·¦ä¸Šè§’çš„å›¾ç‰‡å°±æ˜¯0ï¼Œå³ä¸‹è§’å°±æ˜¯8ã€‚è¿™ç§ç°è±¡å¾ˆæœ‰æ„æ€ã€‚</p><p>è¿™ç§æ€æƒ³è¢«åº”ç”¨äºå¯¹æŠ—æ ·æœ¬æ”»å‡»ä¹‹ä¸­ï¼Œå¯ä»¥ç”Ÿæˆä¸€äº›ä»¤æ¨¡å‹è¯¯åˆ¤çš„è¯¡å¼‚å›¾ç‰‡ï¼Œå¹¶å°†å…¶æ”¹é€ åŸæœ¬çš„æ•°æ®é›†ï¼Œå°±å¯ä»¥ä»¤æ¨¡å‹çŠ¯é”™ã€‚</p><p>å…³äºæ–‡æœ¬é¢†åŸŸå¯¹æŠ—æ ·æœ¬çš„è®¨è®ºåœ¨<a href="https://superlova.github.io/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Deep-Text-Classification-Can-be-Fooled/">è¿™é‡Œ</a></p><p>Deep Dreamåˆ™åˆ©ç”¨è¯¥æ€æƒ³ï¼Œå°†CNNå˜æˆä¸€ä¸ªå›¾åƒç”Ÿæˆå™¨ï¼Œå¤¸å¤§åŒ–åŸæœ‰çš„è¾“å…¥å›¾åƒï¼š</p><p><img src="/2022/10/22/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note5-%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/DeepDreamå¤¸å¤§çš„å›¾åƒ.png" alt></p><p>å³è¾¹æœ‰ä¸€åªç†Šï¼Œè¿™ä¸ªç†ŠåŸæ¥æ˜¯ä¸€ä¸ªçŸ³å¤´(å¯¹æœºå™¨æ¥è¯´ï¼Œè¿™ä¸ªçŸ³å¤´æœ‰ç‚¹åƒç†Šï¼Œå®ƒå°±ä¼šå¼ºåŒ–è¿™ä»¶äº‹æƒ…ï¼Œæ‰€ä»¥å®ƒå°±çœŸçš„å˜æˆäº†ä¸€åªç†Š)ã€‚</p><h2 id="CNNçš„å…¶ä»–åº”ç”¨åœºæ™¯"><a href="#CNNçš„å…¶ä»–åº”ç”¨åœºæ™¯" class="headerlink" title="CNNçš„å…¶ä»–åº”ç”¨åœºæ™¯"></a>CNNçš„å…¶ä»–åº”ç”¨åœºæ™¯</h2><p>CNNå¯ä»¥åº”ç”¨äºæ¸¸æˆé¢†åŸŸï¼Œæ¯”å¦‚å›´æ£‹</p><p>CNNå¯ä»¥åº”ç”¨äºè‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸï¼Œæ¯”å¦‚æ–‡æœ¬åˆ†ç±»ã€è¯­éŸ³è¯†åˆ«</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
      <tag>MOOC</tag>
      
      <tag>Convolutional Neural Network</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘æå®æ¯…ML-Note4-æ·±åº¦å­¦ä¹ ä¼˜åŒ–</title>
    <link href="/2022/10/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%BC%98%E5%8C%96/"/>
    <url>/2022/10/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%BC%98%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<p>æå®æ¯…è€å¸ˆä¸»è®²çš„æœºå™¨å­¦ä¹ MOOCè¯¾ç¨‹çš„ç¬”è®°ï¼Œæœ¬ç¯‡è®°å½•çš„çŸ¥è¯†ç‚¹æœ‰ï¼šæ·±åº¦å­¦ä¹ ç®—æ³•çš„ä¼˜åŒ–ã€‚<br><!--more---></p><p>ç¥ç»ç½‘ç»œè®­ç»ƒä¸å¥½æ€ä¹ˆåŠï¼Ÿä¸ºä»€ä¹ˆlossä¸ä¸‹é™ï¼Ÿè¿™é‡Œè®¨è®ºçš„è®­ç»ƒä¸å¥½ï¼Œæ˜¯æŒ‡åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­çš„losså§‹ç»ˆé™ä¸ä¸‹æ¥ã€‚ä»æ•°å­¦ä¼˜åŒ–çš„è§’åº¦ï¼Œæ­¤æ—¶å¯èƒ½é™·å…¥äº†å±€éƒ¨æœ€å°å€¼æˆ–è€…éç‚¹ç­‰å¾®åˆ†ä¸ºé›¶çš„ç‚¹ã€‚</p><h2 id="1-ä¼˜åŒ–é™·å…¥éç‚¹-Saddle-Point-æˆ–å±€éƒ¨æå°å€¼-Local-Minima"><a href="#1-ä¼˜åŒ–é™·å…¥éç‚¹-Saddle-Point-æˆ–å±€éƒ¨æå°å€¼-Local-Minima" class="headerlink" title="1. ä¼˜åŒ–é™·å…¥éç‚¹ (Saddle Point) æˆ–å±€éƒ¨æå°å€¼ (Local Minima)"></a>1. ä¼˜åŒ–é™·å…¥éç‚¹ (Saddle Point) æˆ–å±€éƒ¨æå°å€¼ (Local Minima)</h2><p><img src="/2022/10/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%BC%98%E5%8C%96/é™·å…¥éç‚¹æˆ–è€…å±€éƒ¨æœ€å°ç‚¹.png" alt></p><p>éç‚¹æ˜¯æŒ‡åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šçš„gradient=0ï¼Œä½†æ˜¯åœ¨å…¶ä»–æ–¹å‘çš„gradientä¸ä¸ºé›¶ï¼Œè¯´æ˜lossä»æœ‰ç»§ç»­ä¼˜åŒ–çš„ç©ºé—´ã€‚</p><p>å±€éƒ¨æœ€å°ç‚¹åˆ™æ˜¯æ‰€æœ‰æ–¹å‘çš„gradientå‡ä¸ºé›¶ï¼Œæ­¤æ—¶æ— è®ºå¾€å“ªä¸ªæ–¹å‘èµ°éƒ½æ— æ³•ä»¤lossç»§ç»­å˜å°ã€‚è¿™ç§æƒ…å†µæ¯”è¾ƒæ£˜æ‰‹ã€‚</p><p>å¦‚ä½•ç¡®è®¤åˆ°åº•æ˜¯éç‚¹è¿˜æ˜¯å±€éƒ¨æå€¼ï¼Ÿ</p><p>è¿™é‡Œæœ‰ä¸ªç»“è®ºï¼šå¦‚æœè¯¥ç‚¹å¤„çš„äºŒé˜¶åå¯¼æ•°çŸ©é˜µï¼ˆæµ·å¡çŸ©é˜µï¼‰æ˜¯æ­£å®šçš„ï¼Œå³è¯¥æµ·å¡çŸ©é˜µçš„æ‰€æœ‰ç‰¹å¾å€¼éƒ½å¤§äºé›¶ï¼Œè¯´æ˜è¯¥ç‚¹é™„è¿‘çš„æ‰€æœ‰å€¼å‡å¤§äºè¯¥ç‚¹ï¼Œå³è¯¥ç‚¹ä¸ºå±€éƒ¨æœ€å°å€¼ã€‚</p><p>å¦‚æœæµ·å¡çŸ©é˜µçš„ç‰¹å¾å€¼å…¨ä¸ºè´Ÿï¼Œåˆ™è¯´æ˜è¿™é‡Œæ˜¯å±€éƒ¨æœ€å¤§å€¼ã€‚</p><p>å…¶ä»–æƒ…å†µä¸‹ï¼Œå¦‚æœæµ·å¡çŸ©é˜µçš„ç‰¹å¾å€¼æœ‰æ­£æœ‰è´Ÿï¼Œè¯´æ˜è¿™é‡Œæ˜¯ä¸ªéç‚¹ã€‚</p><p>æ±‚è§£è¯¥ç‚¹å¤„çš„äºŒé˜¶åå¯¼æ•°ä¸ä½†å¯ä»¥å¸®åŠ©åˆ¤æ–­æ˜¯å¦ä¸ºéç‚¹ï¼Œè¿˜å¯ä»¥å¸®åŠ©æˆ‘ä»¬é€‰æ‹©ä¼˜åŒ–çš„æ–¹å‘ã€‚å¦‚æœè¯¥å¤„æ˜¯ä¸€ä¸ªéç‚¹ï¼Œåˆ™æˆ‘ä»¬å°±é€‰æ‹©ä¸€ä¸ªæµ·å¡çŸ©é˜µç‰¹å¾å€¼ä¸ºè´Ÿå€¼çš„ç‰¹å¾å‘é‡ï¼Œæœç€è¿™ä¸ªç‰¹å¾å‘é‡çš„æ–¹å‘è¿›è¡Œç§»åŠ¨ï¼Œå°±èƒ½å¤Ÿæœ€å¿«é€Ÿèµ°å‡ºéç‚¹ã€‚</p><p><img src="/2022/10/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%BC%98%E5%8C%96/å¿«é€Ÿèµ°å‡ºéç‚¹.png" alt></p><p>å®é™…ä¸Šæ±‚æµ·å¡çŸ©é˜µæ˜¯ä¸€ä¸ªè®¡ç®—é‡æ¯”è¾ƒå¤§çš„æ“ä½œï¼Œé™¤éæœ‰å¿…è¦ï¼Œå¦åˆ™è¿™ç§æ–¹æ³•å…¶å®å¾ˆå°‘ä½¿ç”¨ã€‚äº‹å®ä¸Šï¼Œå¾ˆå°‘æœ‰ä¼˜åŒ–ç®—æ³•å…·å¤‡æŠŠæŸå¤±å‡½æ•°ç»™ä¼˜åŒ–åˆ°å±€éƒ¨æœ€å°å€¼æˆ–è€…éç‚¹çš„ç¨‹åº¦ï¼Œåœ¨æ­¤ä¹‹å‰æˆ‘ä»¬ä¼šå—åˆ°å…¶ä»–é—®é¢˜çš„å›°æ‰°ï¼Œæ¯”å¦‚batchæ²¡æœ‰é€‰æ‹©å¥½ã€ä¼˜åŒ–æ–¹æ³•å¹¶ä¸å¤Ÿä¼˜ç§€ç­‰ã€‚</p><h2 id="2-batchæ²¡æœ‰é€‰æ‹©å¥½"><a href="#2-batchæ²¡æœ‰é€‰æ‹©å¥½" class="headerlink" title="2. batchæ²¡æœ‰é€‰æ‹©å¥½"></a>2. batchæ²¡æœ‰é€‰æ‹©å¥½</h2><p>åœ¨ä½¿ç”¨éšæœºæ¢¯åº¦ä¸‹é™ç®—æ³•æ—¶ï¼Œæˆ‘ä»¬ä¼šå®šä¹‰ä¸€ä¸ªbatchå¤§å°ï¼Œå¹¶æŠŠè®­ç»ƒé›†åˆ†å‰²æˆbatchå¤§å°çš„ä¸€ä¸ªä¸ªå­é›†ï¼Œæ¯æ¬¡æ¢¯åº¦ä¸‹é™åªåœ¨å­é›†ä¸Šè¿›è¡Œéå†ï¼Œæ¯æ¬¡è®­ç»ƒå®Œä¸€ä¸ªå­é›†çš„å†…å®¹å«åšä¸€ä¸ªepochã€‚</p><p>batchçš„å¤§å°è‡ªç„¶ä¼šå½±å“ç½‘ç»œè®­ç»ƒçš„é€Ÿåº¦ä»¥åŠä¼˜åŒ–æ•ˆæœã€‚å°batchå¯ä»¥åŠ é€Ÿè®­ç»ƒï¼Œç¼ºç‚¹æ˜¯å°batchéšæœºæ€§æ›´å¤§ï¼Œæ²¡åŠæ³•ä»£è¡¨æ•´ä½“çš„æ•°æ®é›†ã€‚æç«¯æƒ…å†µä¸‹ï¼Œbatch=1æ—¶ï¼Œç”šè‡³ä¼šå‡ºç°lossåœ¨åŸåœ°ä¸æ–­éœ‡è¡çš„æƒ…å†µã€‚</p><p>ç„¶è€Œbatchè¿‡å¤§åˆ™å¤±å»äº†æ„ä¹‰ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´è®­ç»ƒé€Ÿåº¦å˜æ…¢ã€‚</p><p><img src="/2022/10/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%BC%98%E5%8C%96/batchå¤§å°çš„æƒè¡¡.png" alt></p><p>å¦‚æœå¼•å…¥å¹¶è¡Œè®¡ç®—ï¼ˆå³GPUè¿ç®—ï¼‰ï¼Œé‚£ä¹ˆbatch_sizeåœ¨ä¸€å®šç¨‹åº¦å†…éƒ½å¯ä»¥å¾ˆå¿«ã€‚ä½†æ˜¯ä¸åŒGPUæ”¯æŒçš„batch_sizeæ˜¯æœ‰æé™çš„ï¼ˆå–å†³äºæ˜¾å­˜ï¼‰ã€‚</p><p>batch_size å¯¹æœ€ç»ˆçš„ä¼˜åŒ–æ•ˆæœæœ‰å½±å“å—ï¼Ÿæ˜¯æœ‰çš„ã€‚å¤§çš„batch_sizeå¯èƒ½ä¼šå¯¼è‡´ä¼˜åŒ–é˜¶æ®µäº§ç”Ÿé—®é¢˜ã€‚</p><p><img src="/2022/10/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%BC%98%E5%8C%96/batch_sizeå¯¹æœ€ç»ˆä¼˜åŒ–æ•ˆæœçš„å½±å“.png" alt></p><p>è¿™ç§é—®é¢˜æ˜¯æ€ä¹ˆäº§ç”Ÿçš„å‘¢ï¼Ÿæœ‰ä¸€ç§è§£é‡Šæ˜¯è¿™æ ·çš„ï¼Œå½“æˆ‘ä»¬è¯•å›¾ä»¥ä¸€ä¸ªæ¯”è¾ƒå¤§çš„batch_sizeè®­ç»ƒæ¨¡å‹æ—¶ï¼Œå¯èƒ½ä¼šå¡åœ¨å®¢è§‚å­˜åœ¨çš„å±€éƒ¨æå€¼ç‚¹ï¼›ä½†æ˜¯å¦‚æœæˆ‘ä»¬ä½¿ç”¨æ¯”è¾ƒå°çš„batchï¼Œç›¸å½“äºäººä¸ºå¼•å…¥äº†æ›´å¤šçš„éšæœºæ€§ã€‚wåœ¨batch_Aä¸Šæ˜¯å±€éƒ¨æå€¼ç‚¹ï¼Œä½†æ˜¯åœ¨batch_Bä¸Šå°±ä¸ä¸€å®šäº†ã€‚</p><p>å¦å¤–ï¼Œåœ¨testingçš„æ—¶å€™ï¼Œé€‰æ‹©ä¸åŒçš„batchä¹Ÿä¼šè®©accuracyä¸ä¸€æ ·ã€‚å¦‚æœå¤§çš„Batchå¯¹åº”çš„Testingç»“æœå·® ï¼Œä»£è¡¨ Overfitting ã€‚</p><p>æœ€åæ€»ç»“ä¸€ä¸‹ï¼Œbatch_sizeå¯èƒ½é€ æˆçš„å½±å“ï¼š</p><p><img src="/2022/10/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%BC%98%E5%8C%96/batch_sizeçš„é€‰æ‹©æ€»ç»“.png" alt></p><h2 id="3-è™½ç„¶-gradient-æ²¡æœ‰é™ä½åˆ°0ï¼Œä½†æ˜¯-loss-å·²ç»ä¸å†-å˜å°-äº†ï¼ˆæ²¡æœ‰é€‰æ‹©åˆé€‚çš„ä¼˜åŒ–ç®—æ³•ï¼‰"><a href="#3-è™½ç„¶-gradient-æ²¡æœ‰é™ä½åˆ°0ï¼Œä½†æ˜¯-loss-å·²ç»ä¸å†-å˜å°-äº†ï¼ˆæ²¡æœ‰é€‰æ‹©åˆé€‚çš„ä¼˜åŒ–ç®—æ³•ï¼‰" class="headerlink" title="3. è™½ç„¶ gradient æ²¡æœ‰é™ä½åˆ°0ï¼Œä½†æ˜¯ loss å·²ç»ä¸å† å˜å° äº†ï¼ˆæ²¡æœ‰é€‰æ‹©åˆé€‚çš„ä¼˜åŒ–ç®—æ³•ï¼‰"></a>3. è™½ç„¶ gradient æ²¡æœ‰é™ä½åˆ°0ï¼Œä½†æ˜¯ loss å·²ç»ä¸å† å˜å° äº†ï¼ˆæ²¡æœ‰é€‰æ‹©åˆé€‚çš„ä¼˜åŒ–ç®—æ³•ï¼‰</h2><p>å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸ä¼šæœ‰çœŸæ­£é™·å…¥ critical point çš„æœºä¼šï¼Œè€Œæ˜¯åœ¨ critical point é™„è¿‘å¾˜å¾Šã€‚</p><p><img src="/2022/10/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%BC%98%E5%8C%96/è®­ç»ƒå¡ä½äº†å¹¶ä¸ä¸€å®šæ„å‘³ç€gradientå¾ˆå°.png" alt></p><p>å› æ­¤éœ€è¦æˆ‘ä»¬è°ƒæ•´å­¦ä¹ ç‡ã€‚æ¯ä¸ªä¸åŒçš„å‚æ•°åº”è¯¥åœ¨è®­ç»ƒçš„ä¸åŒé˜¶æ®µæ‹¥æœ‰ä¸åŒçš„å­¦ä¹ ç‡ã€‚è¿™ç§é€šè¿‡æ”¹å˜å­¦ä¹ ç‡æ¥ä¼˜åŒ–ç®—æ³•çš„è®­ç»ƒé€Ÿåº¦çš„æ–¹æ³•ï¼Œåœ¨Note2ä¸­å·²æœ‰ä»‹ç»ã€‚</p><p>å¸¸ç”¨çš„è‡ªé€‚åº”æ”¹å˜å‚æ•°å­¦ä¹ ç‡çš„ç®—æ³•æœ‰Adagradç®—æ³•ã€RMSPropç®—æ³•ç­‰ã€‚</p><p>ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å¸¦æœ‰momentumçš„ä¼˜åŒ–ç®—æ³•ã€‚åŠ¨é‡æ³•åœ¨Note2é‡Œå·²æœ‰ä»‹ç»ï¼Œæˆ‘ä»¬å°†æ¢¯åº¦ä¸‹é™çš„ä¼˜åŒ–è¿‡ç¨‹æ¯”å–»æˆå°çƒæ»šè½å±±å¡çš„è¿‡ç¨‹ã€‚ä½†æ˜¯æ¢¯åº¦ä¸‹é™çš„ä¼˜åŒ–è¿‡ç¨‹å¿½ç•¥äº†å°çƒæœ¬èº«å…·æœ‰åŠ¨é‡ï¼Œä¸ç°å®ä¸­æœ‰ä¸€å®šåŒºåˆ«ã€‚å¦‚æœæˆ‘ä»¬å°†æ¢¯åº¦ä¸‹é™ç®—æ³•æ·»åŠ ä¸ŠåŠ¨é‡çš„æ¨¡æ‹Ÿï¼Œåˆ™å°çƒåœ¨é™·å…¥å±€éƒ¨æœ€ä¼˜è§£æ—¶ï¼Œè¶³å¤Ÿé«˜çš„åŠ¨é‡èƒ½å¸®åŠ©å°çƒâ€œå†²â€å‡ºå±€éƒ¨æœ€ä¼˜è§£ã€‚</p><p><img src="/2022/10/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%BC%98%E5%8C%96/åŠ¨é‡æ³•æ¨¡æ‹Ÿ.png" alt></p><p>ä½¿ç”¨åŠ¨é‡æ³•çš„ä¼˜åŒ–ç®—æ³•æœ‰Adamç­‰ã€‚å®é™…ä¸Šï¼ŒAdamæ˜¯Adagradå’ŒMomentumåŠ¨é‡æ³•çš„ç»“åˆã€‚</p><p>æ­¤å¤–ï¼Œä»ç»éªŒä¸Šçœ‹ï¼Œå­¦ä¹ ç‡ä¸€å¼€å§‹è¦ä¿æŒå¤§ä¸€äº›ï¼Œæ¥ä¿è¯æ”¶æ•›åˆ°æœ€ä¼˜ç‚¹é™„è¿‘ï¼›ç„¶åè¦å‡å°å­¦ä¹ ç‡æ¥é¿å…éœ‡è¡ã€‚é‚£ä¹ˆæˆ‘ä»¬è‡ªç„¶å¯ä»¥æƒ³åˆ°ï¼Œå­¦ä¹ ç‡è·Ÿéšè®­ç»ƒè½®æ¬¡å˜å¤§é€æ¸å˜å°ã€‚è¿™å°±æ˜¯<strong>å­¦ä¹ ç‡è¡°å‡</strong>ã€‚</p><p>åœ¨åˆšå¼€å§‹è®­ç»ƒæ—¶ï¼Œç”±äºå‚æ•°æ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œæ¢¯åº¦ä¹Ÿå¾€å¾€æ¯”è¾ƒå¤§ï¼Œå†åŠ ä¸Šæ¯”è¾ƒå¤§çš„åˆå§‹å­¦ä¹ ç‡ï¼Œä¼šä½¿å¾—è®­ç»ƒä¸ç¨³å®šã€‚å› æ­¤æˆ‘ä»¬å¸Œæœ›åˆšå¼€å§‹å‡ è½®è¿­ä»£çš„å­¦ä¹ ç‡è¾ƒå°ï¼Œç­‰æ¢¯åº¦ä¸‹é™åˆ°ä¸€å®šç¨‹åº¦æ—¶å†æ¢å¤å­¦ä¹ ç‡ã€‚è¿™ç§æ–¹æ³•ç§°ä¹‹ä¸º<strong>å­¦ä¹ ç‡é¢„çƒ­</strong>ã€‚ç­‰é¢„çƒ­å®Œæ¯•ååœ¨è¿›è¡Œå­¦ä¹ ç‡è¡°å‡ã€‚</p><p>åˆ©ç”¨è¿™ä¸¤ä¸ªæ€æƒ³ï¼Œæ”¹è¿›Adamåï¼Œå°±æ˜¯ä¼˜åŒ–ç®—æ³•RAdamã€‚</p><h2 id="4-æŸå¤±å‡½æ•°ä¹Ÿä¼šæœ‰å½±å“"><a href="#4-æŸå¤±å‡½æ•°ä¹Ÿä¼šæœ‰å½±å“" class="headerlink" title="4. æŸå¤±å‡½æ•°ä¹Ÿä¼šæœ‰å½±å“"></a>4. æŸå¤±å‡½æ•°ä¹Ÿä¼šæœ‰å½±å“</h2><p>åˆ†ç±»é—®é¢˜çš„æŸå¤±å‡½æ•°å¯ä»¥é€‰æ‹©MSEå’ŒCross-entropyã€‚ç°åœ¨æˆ‘ä»¬æ›´å¤šé€‰æ‹©äº¤å‰ç†µã€‚ä¸ºä»€ä¹ˆMSEä¸è¡Œå‘¢ï¼Ÿ</p><p>MSEåœ¨losså¤§çš„åœ°æ–¹éå¸¸å¹³å¦ï¼Œæ¢¯åº¦è¶‹è¿‘äºé›¶ï¼Œæœ€åstuckå¡ä½ï¼éš¾ä»¥ä¼˜åŒ–ã€‚</p><p>Cross-entropy ï¼šå·¦ä¸Šè§’æœ‰æ–œç‡ï¼Œå¯ä»¥é€è¿‡æ¢¯åº¦ï¼Œä¸€è·¯å¾€å³ä¸‹è§’èµ°ã€‚æ›´æ˜“æ”¶æ•›ã€‚</p><p><img src="/2022/10/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%85ML-Note4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%BC%98%E5%8C%96/MSEå’ŒCross-entropy.png" alt></p><h2 id="5-ä¹Ÿè®¸éœ€è¦-normalization"><a href="#5-ä¹Ÿè®¸éœ€è¦-normalization" class="headerlink" title="5. ä¹Ÿè®¸éœ€è¦ normalization"></a>5. ä¹Ÿè®¸éœ€è¦ normalization</h2><p>ä¸€èˆ¬è€Œè¨€ï¼Œæ ·æœ¬ç‰¹å¾ç”±äºæ¥æºä»¥åŠåº¦é‡å•ä½ä¸åŒï¼Œä»–ä»¬çš„å°ºåº¦ (Scale) å³å–å€¼èŒƒå›´ä¹Ÿä¸åŒã€‚å¯¹äºæŸäº›æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œä¼šå¯¹é‚£äº›å°ºåº¦æ›´å¤§çš„æ•°æ®æ›´æ•æ„Ÿã€‚å› æ­¤å¯¹äºå°ºåº¦æ•æ„Ÿçš„æ¨¡å‹ï¼Œå¿…é¡»å…ˆå¯¹æ ·æœ¬è¿›è¡Œé¢„å¤„ç†ï¼Œå°†å„ä¸ªç»´åº¦çš„ç‰¹å¾è½¬æ¢åˆ°ç›¸åŒçš„å–å€¼åŒºé—´å†…ï¼Œå¹¶ä¸”æ¶ˆé™¤ä¸åŒç‰¹å¾ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œæ‰èƒ½å–å¾—ç†æƒ³çš„æ•ˆæœã€‚</p><p>å½’ä¸€åŒ– (Normalization) æ–¹æ³•æ³›æŒ‡æŠŠæ•°æ®ç‰¹å¾è½¬æ¢ä¸ºç›¸åŒå°ºåº¦çš„æ–¹æ³•ï¼Œæ¯”å¦‚æŠŠæ•°æ®ç‰¹å¾æ˜ å°„åˆ° [0,1] åŒºé—´å†…ï¼Œæˆ–è€…ç›´æ¥æ˜ å°„ä¸ºå‡å€¼ä¸º0ã€æ–¹å·®ä¸º1çš„æ­£æ€åˆ†å¸ƒã€‚</p><p><strong>æœ€å°æœ€å¤§å€¼å½’ä¸€åŒ–</strong>ï¼šå°†æ¯ä¸ªç‰¹å¾ç¼©æ”¾åˆ° [0,1] æˆ–è€… [-1,1] ä¹‹é—´ã€‚å‡è®¾æˆ‘ä»¬æœ‰ N å“¥æ ·æœ¬ ${x^{(n)}}^{N}_{n=1}$ï¼Œå¯¹æ¯ä¸€ç»´ç‰¹å¾xï¼Œå½’ä¸€åŒ–åçš„ç‰¹å¾ä¸ºï¼š</p><script type="math/tex; mode=display">\hat{x}^{(n)}=\frac{x^{(n)}-\min_n(x^{(n)})}{\max_n(x^{(n)})-\min_n(x^{(n)})}</script><p><strong>æ ‡å‡†åŒ–</strong>ï¼šå°†æ¯ç»´ç‰¹å¾éƒ½è°ƒæ•´åˆ°æ ‡å‡†æ­£æ€åˆ†å¸ƒï¼š</p><script type="math/tex; mode=display">\hat{x}^{(n)}=\frac{x^{(n)}-\mu}{\sigma}</script><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰Batch-Normalizationå’ŒLayer-Normalizationçš„ç®—æ³•ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
      <tag>MOOC</tag>
      
      <tag>Deep Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘æå®æ¯…2019ML-Note3-æ·±åº¦å­¦ä¹ ä»‹ç»å’Œåå‘ä¼ æ’­</title>
    <link href="/2022/10/16/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%8F%8D%E5%90%91%E4%BC%A0%E6%92%AD/"/>
    <url>/2022/10/16/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%8F%8D%E5%90%91%E4%BC%A0%E6%92%AD/</url>
    
    <content type="html"><![CDATA[<p>æå®æ¯…è€å¸ˆä¸»è®²çš„æœºå™¨å­¦ä¹ MOOCè¯¾ç¨‹çš„ç¬”è®°ï¼Œæœ¬ç¯‡è®°å½•çš„çŸ¥è¯†ç‚¹æœ‰ï¼šæ·±åº¦å­¦ä¹ ç®—æ³•ä»‹ç»ã€åå‘ä¼ æ’­æœºåˆ¶ã€‚<br><!--more---></p><h1 id="æ·±åº¦å­¦ä¹ "><a href="#æ·±åº¦å­¦ä¹ " class="headerlink" title="æ·±åº¦å­¦ä¹ "></a>æ·±åº¦å­¦ä¹ </h1><p>æ·±åº¦å­¦ä¹ å¤§å®¶å·²ç»å¾ˆç†Ÿæ‚‰äº†ã€‚æ·±åº¦å­¦ä¹ æŠ€æœ¯å±äºä¸€ç±»æœºå™¨å­¦ä¹ æŠ€æœ¯ã€‚ä½¿ç”¨æ·±åº¦å­¦ä¹ è§£å†³é—®é¢˜çš„è¿‡ç¨‹åŒæ ·éœ€è¦ä¸‰æ­¥éª¤ï¼š</p><p>Step1ï¼šé€‰æ‹©æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼šç¥ç»ç½‘ç»œï¼ˆNeural networkï¼‰ï¼Œç¥ç»ç½‘ç»œæœ‰å„ç§ä¸åŒç±»å‹ï¼Œæ¯”å¦‚å‰é¦ˆç¥ç»ç½‘ç»œã€å·ç§¯ç¥ç»ç½‘ç»œç­‰ï¼›<br>Step2ï¼šæ¨¡å‹è¯„ä¼°ï¼ˆGoodness of functionï¼‰ï¼›<br>Step3ï¼šé€‰æ‹©æœ€ä¼˜å‡½æ•°ï¼ˆPick best functionï¼‰ï¼Œä¸åŒçš„ç½‘ç»œç»“æ„éœ€è¦å®šä¹‰ä¸åŒçš„å‚æ•°å­¦ä¹ æ–¹æ³•ï¼Œæ¯”å¦‚åå‘ä¼ æ’­ç®—æ³•ï¼›</p><p>æ¥ä¸‹æ¥é€ä¸€ä»‹ç»ä¸‰ä¸ªæ­¥éª¤çš„å…·ä½“å†…å®¹ã€‚</p><h2 id="ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©ç¥ç»ç½‘ç»œï¼šä»å‰é¦ˆç½‘ç»œå¼€å§‹"><a href="#ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©ç¥ç»ç½‘ç»œï¼šä»å‰é¦ˆç½‘ç»œå¼€å§‹" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©ç¥ç»ç½‘ç»œï¼šä»å‰é¦ˆç½‘ç»œå¼€å§‹"></a>ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©ç¥ç»ç½‘ç»œï¼šä»å‰é¦ˆç½‘ç»œå¼€å§‹</h2><p>å‰é¦ˆï¼ˆfeedforwardï¼‰ä¹Ÿå¯ä»¥ç§°ä¸ºå‰å‘ï¼Œä»ä¿¡å·æµå‘æ¥ç†è§£å°±æ˜¯è¾“å…¥ä¿¡å·è¿›å…¥ç½‘ç»œåï¼Œä¿¡å·æµåŠ¨æ˜¯å•å‘çš„ï¼Œå³ä¿¡å·ä»å‰ä¸€å±‚æµå‘åä¸€å±‚ï¼Œä¸€ç›´åˆ°è¾“å‡ºå±‚ï¼Œå…¶ä¸­ä»»æ„ä¸¤å±‚ä¹‹é—´çš„è¿æ¥å¹¶æ²¡æœ‰åé¦ˆï¼ˆfeedbackï¼‰ï¼Œäº¦å³ä¿¡å·æ²¡æœ‰ä»åä¸€å±‚åˆè¿”å›åˆ°å‰ä¸€å±‚ã€‚</p><p>ä¸‹å›¾æ˜¯ä¸€ä¸ªç”±ä¸€å±‚è¾“å…¥å±‚ã€Nå±‚éšè—å±‚å’Œä¸€å±‚è¾“å‡ºå±‚æ„æˆçš„ã€æ¯å±‚åŒ…å«Mä¸ªç¥ç»å…ƒçš„å…¨è¿æ¥ç½‘ç»œï¼Œç¥ç»å…ƒçš„æ¿€æ´»å‡½æ•°ä¸ºsigmoidï¼š</p><p><img src="/2022/10/16/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%8F%8D%E5%90%91%E4%BC%A0%E6%92%AD/å‰é¦ˆç½‘ç»œ.png" alt></p><p>ä¸ºä»€ä¹ˆå«å…¨é“¾æ¥å‘¢ï¼Ÿå› ä¸ºlayer1ä¸layer2ä¹‹é—´ä¸¤ä¸¤éƒ½æœ‰è¿æ¥ï¼Œæ‰€ä»¥å«åšFully Connectï¼›</p><p>ä¸ºä»€ä¹ˆå«å‰é¦ˆå‘¢ï¼Ÿå› ä¸ºç°åœ¨ä¼ é€’çš„æ–¹å‘æ˜¯ç”±åå¾€å‰ä¼ ï¼Œæ‰€ä»¥å«åšFeedforwardã€‚</p><p>å½“éšè—å±‚Néå¸¸å¤§æ—¶ï¼Œæˆ‘ä»¬å°±è¯´è¿™ä¸ªç½‘ç»œéå¸¸æ·±ã€‚ç°å¦‚ä»Šçš„ç½‘ç»œç»“æ„åŠ¨è¾„å‡ ç™¾å±‚ï¼Œéšä¹‹å¸¦æ¥å¾ˆå¤§çš„è®¡ç®—å¼€é”€ã€‚ä¸€ä¸ªä¸€ä¸ªè®¡ç®—ç¥ç»å…ƒçš„è¾“å…¥è¾“å‡ºæ˜¯ä¸ç°å®çš„ï¼Œä¸€ç§åŠ é€Ÿæ–¹æ³•æ˜¯å°†ç¥ç»ç½‘ç»œçš„ä¿¡æ¯ä¼ é€’è¿‡ç¨‹å…·è±¡åŒ–ä¸ºçŸ©é˜µè¿ç®—ã€‚</p><p>å‡è®¾ä¸‹å›¾çš„å‰é¦ˆç½‘ç»œï¼š</p><p><img src="/2022/10/16/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%8F%8D%E5%90%91%E4%BC%A0%E6%92%AD/å‰é¦ˆç½‘ç»œ-çŸ©é˜µè®¡ç®—æ¼”ç¤º.png" alt></p><p>è®¡ç®—æ–¹æ³•å°±æ˜¯ï¼šsigmoidï¼ˆæƒé‡wã€é»„è‰²ã€‘ * è¾“å…¥ã€è“è‰²ã€‘+ åç§»é‡bã€ç»¿è‰²ã€‘ï¼‰= è¾“å‡º</p><p>å¦‚æœæœ‰å¾ˆå¤šå±‚ï¼Œå°±è¿›è¡ŒåµŒå¥—</p><p><img src="/2022/10/16/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%8F%8D%E5%90%91%E4%BC%A0%E6%92%AD/å¾ˆå¤šå±‚çš„å…¨è¿æ¥ç½‘ç»œçš„çŸ©é˜µè®¡ç®—.png" alt></p><p>æ‰€ä»¥æ•´ä¸ªç¥ç»ç½‘ç»œè¿ç®—å°±ç›¸å½“äºä¸€è¿ä¸²çš„çŸ©é˜µè¿ç®—ã€‚çŸ©é˜µè¿ç®—æ˜¯å¯ä»¥è¢«GPUå¹¶è¡ŒåŠ é€Ÿçš„ï¼Œå› æ­¤æ·±åº¦å­¦ä¹ æ¨¡å‹æ‰èƒ½å¤Ÿåœ¨å¦‚ä»Šè¿™ä¸ªç®—åŠ›å¤§çˆ†å‘çš„å¹´ä»£å¤§æ”¾å¼‚å½©ã€‚</p><p><strong>æ·±åº¦å­¦ä¹ çš„æœ¬è´¨æ˜¯åˆ©ç”¨éšè—å±‚å­¦ä¹ åˆ°äº†è¾“å…¥ç‰¹å¾çš„æœ‰æ•ˆè¡¨ç¤ºæ–¹æ³•ï¼Œä»£æ›¿äº†ä¹‹å‰ä¾é æ•°æ®ç§‘å­¦å®¶çš„ç»éªŒçš„ç‰¹å¾å·¥ç¨‹ã€‚</strong></p><h2 id="ç¬¬äºŒæ­¥ï¼šæ¨¡å‹è¯„ä¼°æ–¹æ³•ï¼šé€‰æ‹©æŸå¤±å‡½æ•°"><a href="#ç¬¬äºŒæ­¥ï¼šæ¨¡å‹è¯„ä¼°æ–¹æ³•ï¼šé€‰æ‹©æŸå¤±å‡½æ•°" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šæ¨¡å‹è¯„ä¼°æ–¹æ³•ï¼šé€‰æ‹©æŸå¤±å‡½æ•°"></a>ç¬¬äºŒæ­¥ï¼šæ¨¡å‹è¯„ä¼°æ–¹æ³•ï¼šé€‰æ‹©æŸå¤±å‡½æ•°</h2><p>å¯¹äºæ¨¡å‹çš„è¯„ä¼°ï¼Œæˆ‘ä»¬ä¸€èˆ¬é‡‡ç”¨æŸå¤±å‡½æ•°æ¥ååº”æ¨¡å‹çš„å¥½å·®ï¼Œæ‰€ä»¥å¯¹äºç¥ç»ç½‘ç»œæ¥è¯´ï¼Œæˆ‘ä»¬é‡‡ç”¨äº¤å‰ç†µï¼ˆcross entropyï¼‰å‡½æ•°æ¥å¯¹$y$å’Œ$\hat{y}$çš„æŸå¤±è¿›è¡Œè®¡ç®—ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ˜¯è°ƒæ•´å‚æ•°ï¼Œè®©äº¤å‰ç†µè¶Šå°è¶Šå¥½ã€‚</p><h2 id="ç¬¬ä¸‰æ­¥ï¼šé€‰æ‹©æœ€ä¼˜æ¨¡å‹ï¼šæ¢¯åº¦ä¸‹é™ï¼Œä»¥åŠç”¨åå‘ä¼ æ’­ç®—æ³•ä¼˜åŒ–è®¡ç®—"><a href="#ç¬¬ä¸‰æ­¥ï¼šé€‰æ‹©æœ€ä¼˜æ¨¡å‹ï¼šæ¢¯åº¦ä¸‹é™ï¼Œä»¥åŠç”¨åå‘ä¼ æ’­ç®—æ³•ä¼˜åŒ–è®¡ç®—" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šé€‰æ‹©æœ€ä¼˜æ¨¡å‹ï¼šæ¢¯åº¦ä¸‹é™ï¼Œä»¥åŠç”¨åå‘ä¼ æ’­ç®—æ³•ä¼˜åŒ–è®¡ç®—"></a>ç¬¬ä¸‰æ­¥ï¼šé€‰æ‹©æœ€ä¼˜æ¨¡å‹ï¼šæ¢¯åº¦ä¸‹é™ï¼Œä»¥åŠç”¨åå‘ä¼ æ’­ç®—æ³•ä¼˜åŒ–è®¡ç®—</h2><p>æ¢¯åº¦ä¸‹é™ç®—æ³•åœ¨ä¹‹å‰çš„ç¬”è®°å·²ç»è®²è¿‡ï¼Œç¥ç»ç½‘ç»œçš„æ¢¯åº¦ä¸‹é™ç®—æ³•ä¹Ÿæ˜¯ç›¸åŒçš„ã€‚</p><p><img src="/2022/10/16/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%8F%8D%E5%90%91%E4%BC%A0%E6%92%AD/æ¢¯åº¦ä¸‹é™.png" alt></p><p>æ¢¯åº¦ä¸‹é™çš„å…·ä½“è¿‡ç¨‹ï¼š</p><p><img src="/2022/10/16/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML-Note3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%8F%8D%E5%90%91%E4%BC%A0%E6%92%AD/æ¢¯åº¦ä¸‹é™çš„è¿‡ç¨‹.png" alt></p><ol><li>ç»™åˆ°$\theta$(weight and bias)</li><li>å…ˆé€‰æ‹©ä¸€ä¸ªåˆå§‹çš„ $\theta^0$ï¼Œè®¡ç®— $\theta^0$ çš„æŸå¤±å‡½æ•°ï¼ˆLoss Functionï¼‰è®¾ä¸€ä¸ªå‚æ•°çš„åå¾®åˆ†</li><li>è®¡ç®—å®Œè¿™ä¸ªå‘é‡ï¼ˆvectorï¼‰åå¾®åˆ†ï¼Œç„¶åå°±å¯ä»¥å»æ›´æ–°çš„ä½  $\theta$</li><li>ç™¾ä¸‡çº§åˆ«çš„å‚æ•°ï¼ˆmillions of parametersï¼‰</li><li>åå‘ä¼ æ’­ï¼ˆBackpropagationï¼‰æ˜¯ä¸€ä¸ªæ¯”è¾ƒæœ‰æ•ˆç‡çš„ç®—æ³•ï¼Œè®©ä½ è®¡ç®—æ¢¯åº¦ï¼ˆGradientï¼‰ çš„å‘é‡ï¼ˆVectorï¼‰æ—¶ï¼Œå¯ä»¥æœ‰æ•ˆç‡çš„è®¡ç®—å‡ºæ¥</li></ol>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
      <tag>MOOC</tag>
      
      <tag>Backpropagation</tag>
      
      <tag>Deep Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘æå®æ¯…2019MLè¯¾ç¨‹-Note2</title>
    <link href="/2022/10/13/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-Note2/"/>
    <url>/2022/10/13/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-Note2/</url>
    
    <content type="html"><![CDATA[<p>æå®æ¯…è€å¸ˆä¸»è®²çš„æœºå™¨å­¦ä¹ MOOCè¯¾ç¨‹çš„ç¬”è®°ï¼Œæœ¬ç¯‡è®°å½•çš„çŸ¥è¯†ç‚¹æœ‰ï¼šåå·®å’Œæ–¹å·®ã€æ¨¡å‹é€‰æ‹©ã€æ¢¯åº¦ä¸‹é™ç®—æ³•ã€‚<br><!--more---></p><h1 id="ä¸€ã€è¯¯å·®çš„æ¥æºï¼šåå·®ä¸æ–¹å·®"><a href="#ä¸€ã€è¯¯å·®çš„æ¥æºï¼šåå·®ä¸æ–¹å·®" class="headerlink" title="ä¸€ã€è¯¯å·®çš„æ¥æºï¼šåå·®ä¸æ–¹å·®"></a>ä¸€ã€è¯¯å·®çš„æ¥æºï¼šåå·®ä¸æ–¹å·®</h1><p>å¯¹å­¦ä¹ ç®—æ³•é™¤äº†é€šè¿‡å®éªŒä¼°è®¡å…¶æ³›åŒ–æ€§èƒ½ï¼Œäººä»¬å¾€å¾€è¿˜å¸Œæœ›èƒ½äº†è§£ä¸ºä»€ä¹ˆå…·æœ‰è¿™æ ·çš„æ€§èƒ½ã€‚è¯¯å·®æ¥æºäºåå·® (bias) å’Œæ–¹å·® (Variance)ä»¥åŠä¸å¯é¿å…çš„å™ªå£°ã€‚</p><h2 id="1-åå·®å’Œæ–¹å·®çš„æ¦‚å¿µå’Œæ¥æº"><a href="#1-åå·®å’Œæ–¹å·®çš„æ¦‚å¿µå’Œæ¥æº" class="headerlink" title="1. åå·®å’Œæ–¹å·®çš„æ¦‚å¿µå’Œæ¥æº"></a>1. åå·®å’Œæ–¹å·®çš„æ¦‚å¿µå’Œæ¥æº</h2><p><strong>åå·®</strong>åº¦é‡äº†é¢„æµ‹å€¼ä¸çœŸå®å€¼çš„åç¦»ç¨‹åº¦ï¼Œå¯¹åº”çš„æ˜¯å­¦ä¹ ç®—æ³•æœ¬èº«çš„æ‹Ÿåˆèƒ½åŠ›ï¼›<strong>æ–¹å·®</strong>åº¦é‡äº†æ•°æ®æ‰°åŠ¨å¯¹æ¨¡å‹çš„å½±å“ï¼Œå¯¹åº”çš„æ˜¯æ¨¡å‹çš„ç¨³å®šæ€§ï¼›<strong>å™ªå£°</strong>åˆ™æ˜¯å¯¹åº”é—®é¢˜å¯¹åº”çš„éš¾åº¦ã€‚</p><p>ä¸Šé¢çš„ç»“è®ºè¯´æ˜ï¼Œæ¨¡å‹çš„æ€§èƒ½æ˜¯ç”±æ¨¡å‹èƒ½åŠ›ã€æ•°æ®çš„å……åˆ†æ€§ä»¥åŠé—®é¢˜æœ¬èº«çš„éš¾åº¦å†³å®šçš„ã€‚ç”±äºå™ªéŸ³æ˜¯é—®é¢˜æœ¬èº«çš„ç‰¹æ€§ï¼Œä¸å¥½è§£å†³ï¼Œå› æ­¤è¦æƒ³æå‡æ¨¡å‹çš„æ€§èƒ½ï¼Œå°±éœ€è¦é‡‡å–æªæ–½é™ä½åå·®å’Œæ–¹å·®ã€‚</p><h2 id="4-åå·®å’Œæ–¹å·®åˆ†è§£ï¼šé‡æ–°è€ƒè™‘æ¬ æ‹Ÿåˆã€è¿‡æ‹Ÿåˆé—®é¢˜"><a href="#4-åå·®å’Œæ–¹å·®åˆ†è§£ï¼šé‡æ–°è€ƒè™‘æ¬ æ‹Ÿåˆã€è¿‡æ‹Ÿåˆé—®é¢˜" class="headerlink" title="4. åå·®å’Œæ–¹å·®åˆ†è§£ï¼šé‡æ–°è€ƒè™‘æ¬ æ‹Ÿåˆã€è¿‡æ‹Ÿåˆé—®é¢˜"></a>4. åå·®å’Œæ–¹å·®åˆ†è§£ï¼šé‡æ–°è€ƒè™‘æ¬ æ‹Ÿåˆã€è¿‡æ‹Ÿåˆé—®é¢˜</h2><p>ä¸ºäº†é¿å…è¿‡æ‹Ÿåˆï¼Œæˆ‘ä»¬ç»å¸¸ä¼šåœ¨æ¨¡å‹çš„æ‹Ÿåˆèƒ½åŠ›å’Œå¤æ‚åº¦ä¹‹é—´è¿›è¡Œæƒè¡¡ã€‚æ‹Ÿåˆèƒ½åŠ›å¼ºçš„æ¨¡å‹ä¸€èˆ¬å¤æ‚åº¦ä¼šæ¯”è¾ƒé«˜ï¼Œå®¹æ˜“å¯¼è‡´è¿‡æ‹Ÿåˆã€‚ç›¸åï¼Œå¦‚æœé™åˆ¶æ¨¡å‹çš„å¤æ‚åº¦ï¼Œé™ä½å…¶æ‹Ÿåˆèƒ½åŠ›ï¼Œæœ‰å¯èƒ½å¯¼è‡´æ¬ æ‹Ÿåˆã€‚å› æ­¤ï¼Œå¦‚ä½•åœ¨æ¨¡å‹çš„æ‹Ÿåˆèƒ½åŠ›ä¸å¤æ‚åº¦ä¹‹é—´å–å¾—å¹³è¡¡ï¼Œå¯¹æœºå™¨å­¦ä¹ ç®—æ³•æ¥è¯´ååˆ†é‡è¦ã€‚</p><p>åå·®-æ–¹å·®åˆ†è§£ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¾ˆå¥½ç”¨çš„åˆ†æå·¥å…·ã€‚æ•°å­¦æ¨å¯¼è¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œç»“è®ºä¸ºï¼š</p><p><strong>æœ€å°åŒ–æœŸæœ›é”™è¯¯ç­‰ä»·äºæœ€å°åŒ–åå·®å’Œæ–¹å·®ä¹‹å’Œã€‚</strong></p><p>ä¸‹å›¾ç»™å‡ºäº†æœºå™¨å­¦ä¹ æ¨¡å‹å››ç§åå·®å’Œæ–¹å·®çš„ç»„åˆæƒ…å†µã€‚</p><p><img src="/2022/10/13/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-Note2/åå·®å’Œæ–¹å·®.png" alt></p><p>æ¯ä¸ªå›¾çš„ä¸­å¿ƒåº—ä¸ºæœ€ä¼˜æ¨¡å‹$f(x)$ï¼Œè“ç‚¹ä¸ºä¸åŒè®­ç»ƒé›†ä¸Šå¾—åˆ°çš„æ¨¡å‹$f^*(x)$ã€‚å·¦ä¸Šè§’çš„å›¾æ˜¯ä¸€ç§ç†æƒ³æƒ…å†µï¼Œæ–¹å·®å’Œåå·®éƒ½æ¯”è¾ƒä½ï¼›å³ä¸Šè§’ä¸ºé«˜åå·®ä½æ–¹å·®çš„æƒ…å†µï¼Œè¡¨ç¤ºæ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›å¾ˆå¥½ï¼Œä½†æ˜¯æ‹Ÿåˆèƒ½åŠ›ä¸è¶³ï¼Œç±»ä¼¼äºæˆ‘ä»¬ä¹‹å‰çš„çº¿æ€§æ¨¡å‹ï¼›å·¦ä¸‹è§’æ˜¯ä½åå·®é«˜æ–¹å·®çš„æƒ…å†µï¼Œè¡¨ç¤ºæ¨¡å‹çš„æ‹Ÿåˆèƒ½åŠ›å¾ˆå¥½ï¼Œä½†æ˜¯æ³›åŒ–èƒ½åŠ›è¾ƒå·®ã€‚å½“è®­ç»ƒæ•°æ®æ¯”è¾ƒå°‘çš„æ—¶å€™å¾€å¾€ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ä¸€èˆ¬æŠŠä»–ç§°ä¹‹ä¸ºè¿‡æ‹Ÿåˆï¼›å³ä¸‹è§’ä¸ºé«˜åå·®é«˜æ–¹å·®çš„æƒ…å†µï¼Œæ˜¯æœ€å·®çš„æƒ…å†µï¼Œç­‰äºæ²¡è®­ç»ƒã€‚</p><p>æ–¹å·®ä¸€èˆ¬ä¼šéšç€è®­ç»ƒæ ·æœ¬çš„å¢åŠ è€Œå‡å°ã€‚å½“æ ·æœ¬æ¯”è¾ƒå¤šï¼Œæ–¹å·®æ¯”è¾ƒå°ï¼Œè¿™æ˜¯å¯ä»¥é€‰æ‹©èƒ½åŠ›å¼ºçš„æ¨¡å‹æ¥å‡å°‘åå·®ï¼›å½“è®­ç»ƒé›†æ¯”è¾ƒæœ‰é™æ—¶ï¼Œæœ€ä¼˜çš„åå·®å’Œæ–¹å·®å¾€å¾€æ— æ³•å…¼é¡¾ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œåå·®-æ–¹å·®çª˜å¢ƒâ€ã€‚</p><p><img src="/2022/10/13/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-Note2/åå·®æ–¹å·®çª˜å¢ƒ.png" alt></p><p>åå·®-æ–¹å·®çª˜å¢ƒè¯´çš„æ˜¯ï¼Œæ¨¡å‹å¤æ‚åº¦å¢åŠ åï¼Œè™½ç„¶ä½ å’Œèƒ½åŠ›å˜å¼ºå¯¼è‡´åå·®å‡å°‘ï¼Œä½†æ˜¯æ–¹å·®ä¼šå¢å¤§ï¼Œè¿‡æ‹Ÿåˆç°è±¡ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</p><p>åå·®-æ–¹å·®åˆ†è§£ç»™æœºå™¨å­¦ä¹ æ¨¡å‹æä¾›äº†ä¸€ç§åˆ†æé€”å¾„ï¼Œèƒ½å¤ŸæŒ‡å¯¼æˆ‘ä»¬è§£å†³è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆçš„é—®é¢˜ï¼Œä½†æ˜¯å®é™…æ“ä½œä¸­å¾ˆéš¾ç›´æ¥è¡¡é‡ã€‚ä¸‹é¢æ˜¯ä¸€äº›é€šç”¨çš„æ–¹æ³•ã€‚</p><pre><code>æ¬ æ‹Ÿåˆç°è±¡ï¼šæ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šçš„é”™è¯¯ç‡å¾ˆé«˜ï¼Œæ­¤æ—¶è¯´æ˜æ¨¡å‹åå·®è¾ƒå¤§ã€‚æ¬ æ‹Ÿåˆè§£å†³ï¼š1. å¢åŠ æ•°æ®ç‰¹å¾2. æé«˜æ¨¡å‹å¤æ‚åº¦3. å‡å°æ­£åˆ™åŒ–ç³»æ•°</code></pre><pre><code>è¿‡æ‹Ÿåˆç°è±¡ï¼šæ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šçš„é”™è¯¯ç‡è¾ƒä½ï¼Œä½†æ˜¯åœ¨æµ‹è¯•é›†ä¸Šè¾ƒé«˜ï¼Œæ­¤æ—¶è¯´æ˜æ¨¡å‹æ–¹å·®è¾ƒå¤§ã€‚è¿‡æ‹Ÿåˆè§£å†³ï¼š1. é™ä½æ¨¡å‹å¤æ‚åº¦ï¼›2. åŠ å¤§æ­£åˆ™åŒ–ç³»æ•°ï¼›3. å¼•å…¥å…ˆéªŒçŸ¥è¯†ï¼Œæ¯”å¦‚æ•°æ®æ¸…æ´—ï¼Œå‰”é™¤æ— ç”¨ç‰¹å¾ç­‰ï¼›4. ä½¿ç”¨æ›´å¤šæ•°æ®è¿›è¡Œè®­ç»ƒï¼Œä½†è¿™ä¸ªå¾€å¾€æˆæœ¬æœ€é«˜ã€‚</code></pre><p>æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç§é™ä½æ–¹å·®çš„æ–¹æ³•ï¼šé›†æˆæ¨¡å‹ï¼Œå³é€šè¿‡å¤šä¸ªé«˜æ–¹å·®æ¨¡å‹è¿›è¡Œå¹³å‡ï¼Œæ¥é™ä½æ–¹å·®ã€‚è¿™èƒŒåçš„åŸç†åœ¨ä»‹ç»é›†æˆå­¦ä¹ æ—¶ä¼šä»‹ç»ã€‚</p><h1 id="äºŒã€æ¨¡å‹é€‰æ‹©æ–¹æ³•"><a href="#äºŒã€æ¨¡å‹é€‰æ‹©æ–¹æ³•" class="headerlink" title="äºŒã€æ¨¡å‹é€‰æ‹©æ–¹æ³•"></a>äºŒã€æ¨¡å‹é€‰æ‹©æ–¹æ³•</h1><p>å‰é¢è®¨è®ºäº†æœºå™¨å­¦ä¹ çš„ä¸‰ä¸ªæ­¥éª¤ï¼Œä»¥åŠå¦‚ä½•æ”¹è¿›æ¨¡å‹çš„æ€§èƒ½ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ­£ç¡®è¯„ä¼°æ¨¡å‹å‘¢ï¼Ÿ</p><p>ä¹‹å‰çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æŠŠæ•°æ®é›†åˆ†æˆä¸¤éƒ¨åˆ†ï¼ŒTraining Setã€Test Setã€‚ä¸€èˆ¬æ¯”ä¾‹æ§åˆ¶åœ¨4:1å·¦å³ã€‚æˆ‘ä»¬åœ¨è®­ç»ƒç»“æŸåï¼Œä½¿ç”¨æµ‹è¯•é›†è¿›è¡Œè¯„ä¼°ï¼Œå¹¶åˆ¤æ–­è®­ç»ƒæ•ˆæœã€‚</p><p>è¿™æ ·åšå…¶å®å­˜åœ¨é—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬çœŸçš„ä½¿ç”¨æµ‹è¯•é›†æ¥æŒ‡å¯¼æ¨¡å‹çš„é€‰æ‹©ã€å‚æ•°çš„æ”¹è¿›ç­‰å„ä¸ªæ­¥éª¤ï¼Œé‚£ç®—ä¸ç®—æ¨¡å‹æ­£åœ¨å­¦ä¹ æµ‹è¯•é›†çš„å†…å®¹å‘¢ï¼Ÿå°±å¥½åƒå­¦ç”Ÿåšå®Œè€ƒå·åï¼Œè€å¸ˆè™½ç„¶ä¸ä¼šç›´æ¥å‘Šè¯‰å­¦ç”Ÿæ­£ç¡®ç­”æ¡ˆï¼Œä½†æ˜¯ä¼šä¸æ–­åœ°ç»™å­¦ç”Ÿæœºä¼šï¼Œå‘Šè¯‰ä½ ï¼šä½ è¿™é‡Œé”™äº†ï¼Œé‚£é‡Œé”™äº†ã€‚è¿™ç®—ä¸ç®—æ˜¯å¦ä¸€ç§æ³„é¢˜å‘¢ï¼Ÿ</p><p>ä¸Šé¢çš„æ•°æ®æ³„éœ²ç°è±¡æ˜¯ç»å¸¸å‘ç”Ÿçš„ã€‚ä¸ºäº†é¿å…æ•°æ®æ³„éœ²ï¼Œä¸€èˆ¬å¯ä»¥é€šè¿‡æŠŠæ•°æ®åˆ†æˆä¸‰éƒ¨åˆ†ï¼šè®­ç»ƒé›† (Training Set)ã€éªŒè¯é›† (Validation Set) å’Œæµ‹è¯•é›† (Test Set)ã€‚æ¨¡å‹å‚æ•°çš„æ”¹è¿›ã€æ¨¡å‹é€‰æ‹©ç­‰è¿‡ç¨‹ï¼Œåªä½¿ç”¨éªŒè¯é›†ï¼›æœ€åè¯„ä¼°æ¨¡å‹æ—¶ä½¿ç”¨æµ‹è¯•é›†ã€‚</p><p>ä½†æ˜¯è¿™æ ·åˆä¼šå¸¦æ¥å¦ä¸€ä¸ªé—®é¢˜ï¼šæœ¬æ¥æ•°æ®å°±åŒ®ä¹ï¼Œåˆåˆ†å‰²å‡ºä¸¤å¤§éƒ¨åˆ†ä¸èƒ½ä½¿ç”¨ï¼Œå¯ä¾›å­¦ä¹ çš„æ•°æ®å°±æ›´å°‘äº†ã€‚<strong>kæŠ˜äº¤å‰éªŒè¯</strong>å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><h2 id="2-1-äº¤å‰éªŒè¯"><a href="#2-1-äº¤å‰éªŒè¯" class="headerlink" title="2.1 äº¤å‰éªŒè¯"></a>2.1 äº¤å‰éªŒè¯</h2><p>äº¤å‰éªŒè¯ (Cross-Validation) æ˜¯ä¸€ç§è¯„ä¼°æ³›åŒ–æ€§èƒ½çš„ç»Ÿè®¡å­¦æ–¹æ³•ã€‚å®ƒæ¯”å•æ¬¡åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„æ–¹æ³•æ›´åŠ ç¨³å®šã€‚æœ€å¸¸ç”¨çš„äº¤å‰éªŒè¯æ–¹æ³•æ˜¯<strong>kæŠ˜äº¤å‰éªŒè¯</strong>ã€‚</p><p>é¦–å…ˆæŠŠæ•°æ®é›†åˆ†æˆå¤§è‡´ç›¸ç­‰çš„kä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸€éƒ¨åˆ†å«åšä¸€æŠ˜ï¼›æ¥ä¸‹æ¥è®­ç»ƒkä¸ªæ¨¡å‹ï¼Œç¬¬ä¸€ä¸ªæ¨¡å‹ä»¥ç¬¬1æŠ˜æ•°æ®ä½œä¸ºæµ‹è¯•é›†ï¼Œå…¶ä»–ä½œä¸ºè®­ç»ƒé›†ï¼›ç¬¬äºŒä¸ªæ¨¡å‹ä»¥ç¬¬2æŠ˜æ•°æ®ä½œä¸ºæµ‹è¯•é›†ï¼Œå…¶ä»–ä½œä¸ºè®­ç»ƒé›†â€¦â€¦æœ€åæˆ‘ä»¬å¾—åˆ°äº†kä¸ªæ¨¡å‹ï¼Œä»¥åŠå¯¹åº”çš„kä¸ªç²¾åº¦å€¼ã€‚æ¨¡å‹çš„æœ€ç»ˆç²¾åº¦å°±æ˜¯è¿™kä¸ªç²¾åº¦å€¼çš„å¹³å‡å€¼ã€‚</p><p><img src="/2022/10/13/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-Note2/äº¤å‰éªŒè¯.png" alt></p><p>äº¤å‰éªŒè¯çš„ä¼˜ç‚¹ï¼š</p><ol><li>å¸®åŠ©æ›´å¥½è¯„ä¼°æ¨¡å‹çš„çœŸå®æ³›åŒ–æ€§èƒ½ï¼Œé˜²æ­¢æ•°æ®é›†åˆ†å‰²æ—¶çš„éšæœºæ€§å½±å“è¯„ä¼°å‡†ç¡®ç‡ï¼›</li><li>æ‰€æœ‰æ•°æ®éƒ½æœ‰æœºä¼šè¢«è®­ç»ƒï¼Œæé«˜æ•°æ®åˆ©ç”¨ç‡ï¼›</li></ol><p>äº¤å‰éªŒè¯çš„ç¼ºç‚¹ï¼š</p><ul><li>æ˜¾è‘—å¢åŠ äº†è®¡ç®—æˆæœ¬ï¼Œéœ€è¦è®­ç»ƒkä¸ªæ¨¡å‹ï¼Œæ˜¯åŸæ¥çš„kå€ã€‚</li></ul><h1 id="ä¸‰ã€æ¢¯åº¦ä¸‹é™ç®—æ³•è¯¦è§£ï¼Œä»¥åŠä¼˜åŒ–æ–¹æ³•"><a href="#ä¸‰ã€æ¢¯åº¦ä¸‹é™ç®—æ³•è¯¦è§£ï¼Œä»¥åŠä¼˜åŒ–æ–¹æ³•" class="headerlink" title="ä¸‰ã€æ¢¯åº¦ä¸‹é™ç®—æ³•è¯¦è§£ï¼Œä»¥åŠä¼˜åŒ–æ–¹æ³•"></a>ä¸‰ã€æ¢¯åº¦ä¸‹é™ç®—æ³•è¯¦è§£ï¼Œä»¥åŠä¼˜åŒ–æ–¹æ³•</h1><p>ç›®å‰ï¼Œæœºå™¨å­¦ä¹ ä¸­å‚æ•°å­¦ä¹ çš„ä¸»è¦æ–¹å¼æ˜¯é€šè¿‡æ¢¯åº¦ä¸‹é™æ³•æ¥å¯»æ‰¾ä¸€ç»„æœ€å°åŒ–æŸå¤±å‡½æ•°çš„å‚æ•°ã€‚å†å…·ä½“è§†çº¿ä¸­ï¼Œæ¢¯åº¦ä¸‹é™æ³•å¯ä»¥åˆ†ä¸ºï¼šæ‰¹é‡æ¢¯åº¦ä¸‹é™ã€éšæœºæ¢¯åº¦ä¸‹é™ä»¥åŠå°æ‰¹é‡æ¢¯åº¦ä¸‹é™ä¸‰ç§å½¢å¼ã€‚</p><p>æœ¬èŠ‚è¿˜ä¼šä»‹ç»ä¸€äº›æ¢¯åº¦ä¸‹é™ç®—æ³•çš„å˜ç§ï¼Œä»–ä»¬å¤§å¤šæ”¹å–„äº†ä»¥ä¸‹ä¸¤éƒ¨åˆ†çš„å†…å®¹ï¼š1) è°ƒæ•´å­¦ä¹ ç‡ï¼Œä½¿ä¼˜åŒ–æ›´ç¨³å®šï¼›2) æ¢¯åº¦ä¼°è®¡ä¿®æ­£ï¼Œæå‡è®­ç»ƒé€Ÿåº¦ã€‚</p><h2 id="3-1-æ¢¯åº¦ä¸‹é™ç®—æ³•çš„ç±»åˆ«"><a href="#3-1-æ¢¯åº¦ä¸‹é™ç®—æ³•çš„ç±»åˆ«" class="headerlink" title="3.1 æ¢¯åº¦ä¸‹é™ç®—æ³•çš„ç±»åˆ«"></a>3.1 æ¢¯åº¦ä¸‹é™ç®—æ³•çš„ç±»åˆ«</h2><h3 id="3-1-1-æ‰¹é‡æ¢¯åº¦ä¸‹é™"><a href="#3-1-1-æ‰¹é‡æ¢¯åº¦ä¸‹é™" class="headerlink" title="3.1.1 æ‰¹é‡æ¢¯åº¦ä¸‹é™"></a>3.1.1 æ‰¹é‡æ¢¯åº¦ä¸‹é™</h3><p>æœ€ä¼ ç»Ÿçš„æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œä¸Šç¯‡ç¬”è®°å·²ç»ä»‹ç»ã€‚</p><p>æ¢¯åº¦ä¸‹é™çš„å…·ä½“è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ol><li>é€‰æ‹©ä¸€ä¸ªåˆå§‹$\theta_0$</li><li>è®¡ç®—è¯¥ä½ç½®ä¸‹$\theta$å¯¹Lçš„å¾®åˆ†ï¼Œè¿™ä¸ªå¾®åˆ†å¯¹åº”å‡½æ•°åœ¨æ­¤å¤„ä¸‹é™æœ€å¿«çš„æ–¹å‘ï¼›</li><li>å°†$\theta_0$æœç€è¿™ä¸ªæ–¹å‘ç§»åŠ¨ä¸€å°æ­¥$ \eta$</li><li>åœ¨æ–°çš„ä½ç½®å¼€å§‹æ–°ä¸€è½®è¿­ä»£è®¡ç®—ï¼Œç›´åˆ°$w$ä¸å†å˜åŒ–ä¸ºæ­¢ã€‚</li></ol><p><img src="/2022/10/13/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-Note2/æ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•.png" alt></p><p>å…¶ä¸­$\eta$å«åšå­¦ä¹ ç‡ï¼Œå®ƒæ§åˆ¶äº†æ¯æ¬¡æ¢¯åº¦ä¸‹é™è¿­ä»£çš„ä¼˜åŒ–å¹…åº¦ã€‚$\eta$è¶Šå¤§ï¼Œå­¦ä¹ å¾—è¶Šå¿«ã€‚ç„¶è€Œ$\eta$å¹¶ä¸æ˜¯è¶Šå¤§è¶Šå¥½ã€‚</p><p><img src="/2022/10/13/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-Note2/æ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•çš„æ¢¯åº¦æ·±è°·.png" alt></p><p>å¦‚æœ$\eta$è¿‡å¤§ï¼Œä¼˜åŒ–è¿‡ç¨‹å¾ˆå¯èƒ½ä¼šè·¨è¶Šæœ€ä½ç‚¹ï¼Œä»è€Œæ°¸è¿œè¾¾ä¸åˆ°æœ€ä¼˜è§£ï¼›å¦‚æœ$\eta$è¿‡å°ï¼Œåˆ™ä¼šé€ æˆè®­ç»ƒç¼“æ…¢ï¼Œç”šè‡³é™·å…¥å±€éƒ¨æœ€ä¼˜è§£ã€‚å› æ­¤è°ƒæ•´å­¦ä¹ ç‡$\eta$æ˜¯ä¼˜åŒ–æ¢¯åº¦ä¸‹é™ç®—æ³•çš„ä¸€å¤§æ€è·¯ã€‚</p><p>æ¢¯åº¦ä¸‹é™ç®—æ³•çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå½“è®­ç»ƒæ•°æ®å¾ˆå¤§æ—¶ï¼ˆè¿™å¾ˆå¸¸è§ï¼‰ï¼Œæ¢¯åº¦ä¸‹é™ç®—æ³•ä¼šèŠ±è´¹å¾ˆé•¿æ—¶é—´å»éå†æ•´ä¸ªè®­ç»ƒé›†ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸å¿…éå†æ‰€æœ‰è®­ç»ƒé›†ã€‚</p><h3 id="3-1-2-éšæœºæ¢¯åº¦ä¸‹é™"><a href="#3-1-2-éšæœºæ¢¯åº¦ä¸‹é™" class="headerlink" title="3.1.2 éšæœºæ¢¯åº¦ä¸‹é™"></a>3.1.2 éšæœºæ¢¯åº¦ä¸‹é™</h3><p>åœ¨è®­ç»ƒæœºå™¨å­¦ä¹ æ¨¡å‹æ—¶ï¼Œè®­ç»ƒæ•°æ®çš„è§„æ¨¡æ¯”è¾ƒå¤§çš„æƒ…å†µä¸‹ï¼Œæ‰¹é‡æ¢¯åº¦ä¸‹é™çš„æ¯æ¬¡æ¢¯åº¦è¿­ä»£éƒ½è¦éå†æ•´ä¸ªæ•°æ®é›†ï¼Œè¿™ä¼šé€ æˆè®¡ç®—èµ„æºçš„æµªè´¹ã€‚ä¸ºäº†è§£å†³æ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•å¯¼è‡´çš„è®­ç»ƒç¼“æ…¢çš„é—®é¢˜ï¼Œéšæœºæ¢¯åº¦ä¸‹é™ç®—æ³•åº”è¿è€Œç”Ÿã€‚å…¶æ€æƒ³æ˜¯é€šè¿‡éšæœºé€‰å–å°‘é‡è®­ç»ƒè¾“å…¥æ ·æœ¬æ¥è®¡ç®—$\nabla L_x$ï¼Œè¿›è€Œä¼°ç®—$\nabla L$ã€‚</p><p>æ›´å‡†ç¡®åœ°è¯´ï¼Œéšæœºæ¢¯åº¦ä¸‹é™é€šè¿‡éšæœºé€‰å–å°‘é‡çš„mä¸ªè®­ç»ƒæ•°æ®æ¥è®­ç»ƒã€‚ä¹Ÿå«åšå°æ‰¹é‡æ¢¯åº¦ä¸‹é™æ³• (Mini-Batch Gradient Descent)ã€‚</p><p>å‡è®¾æ ·æœ¬æ•°é‡mè¶³å¤Ÿå¤§ï¼Œæˆ‘ä»¬æœŸæœ›$\nabla L<em>{X_j}$çš„å¹³å‡å€¼å¤§è‡´ç›¸ç­‰äºæ•´ä¸ª$\nabla L</em>{x}$çš„å¹³å‡å€¼ï¼Œå³ï¼š</p><script type="math/tex; mode=display">\frac{\sum^m_{j-1}\nabla L_{X_j}}{m}\approx \frac{\sum_x \nabla L_x}{n}=\nabla L</script><p>è¿™é‡Œç¬¬äºŒä¸ªæ±‚å’Œç¬¦å·å®åœ¨æ•´ä¸ªè®­ç»ƒæ•°æ®ä¸Šè¿›è¡Œçš„ã€‚äº¤æ¢ä¸¤è¾¹æˆ‘ä»¬å¾—åˆ°ï¼š</p><script type="math/tex; mode=display">\nabla L \approx \frac{1}{m}\sum^m_{j=1}\nabla L_{X_j}</script><p>è¯å®äº†æˆ‘ä»¬å¯ä»¥è¿›é€šè¿‡è®¡ç®—éšæœºé€‰å–çš„å°æ‰¹é‡æ•°æ®çš„æ¢¯åº¦æ¥ä¼°ç®—æ•´ä½“çš„æ¢¯åº¦ã€‚</p><p>å½±å“å°æ‰¹é‡æ¢¯åº¦ä¸‹é™çš„ä¸»è¦å› ç´ æœ‰ï¼š1ï¼‰æ‰¹å¤§å°mï¼Œ2ï¼‰å­¦ä¹ ç‡$\eta$ï¼Œ3ï¼‰æ¢¯åº¦ä¼°è®¡æ–¹æ³•ã€‚</p><h2 id="3-2-æ‰¹é‡å¤§å°é€‰æ‹©"><a href="#3-2-æ‰¹é‡å¤§å°é€‰æ‹©" class="headerlink" title="3.2 æ‰¹é‡å¤§å°é€‰æ‹©"></a>3.2 æ‰¹é‡å¤§å°é€‰æ‹©</h2><p>ç›´è§‚æ¥è¯´ï¼Œæ‰¹åŒ…å«çš„æ•°æ®è¶Šå¤§ï¼Œæ–¹å·®ä¹Ÿå°±è¶Šå°ï¼Œè®­ç»ƒè¶Šç¨³å®šã€‚è¯¥ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªè¾ƒå¤§çš„å­¦ä¹ ç‡ã€‚å­¦ä¹ ç‡è¶Šå¤§ï¼Œéœ€è¦çš„æ‰¹å¤§å°å°±è¶Šå¤§ã€‚</p><p>å¦å¤–ï¼Œæ ¹æ®ç»éªŒï¼Œæ‰¹è¶Šå¤§è¶Šå¯èƒ½æ”¶æ•›åˆ°â€œå°–é”æœ€å°å€¼â€ï¼›æ‰¹è¶Šå°è¶Šèƒ½æ”¶æ•›åˆ°â€œå¹³å¦æœ€å°å€¼â€ã€‚</p><h2 id="3-3-å­¦ä¹ ç‡è°ƒæ•´"><a href="#3-3-å­¦ä¹ ç‡è°ƒæ•´" class="headerlink" title="3.3 å­¦ä¹ ç‡è°ƒæ•´"></a>3.3 å­¦ä¹ ç‡è°ƒæ•´</h2><p>å­¦ä¹ ç‡è¿‡å¤§ä¼šå¯¼è‡´æ¨¡å‹ä¸æ”¶æ•›ï¼Œå¦‚æœè¿‡å°ä¼šå¯¼è‡´æ”¶æ•›å¤ªæ…¢ã€‚ç”±æ­¤ï¼Œæœ‰ä¸€äº›å­¦è€…æ ¹æ®å­¦ä¹ çš„ä¸åŒé˜¶æ®µï¼Œåˆ¶å®šäº†å­¦ä¹ ç‡çš„ä¸åŒå˜åŒ–ç­–ç•¥ã€‚</p><p>ä»ç»éªŒä¸Šçœ‹ï¼Œå­¦ä¹ ç‡ä¸€å¼€å§‹è¦ä¿æŒå¤§ä¸€äº›ï¼Œæ¥ä¿è¯æ”¶æ•›åˆ°æœ€ä¼˜ç‚¹é™„è¿‘ï¼›ç„¶åè¦å‡å°å­¦ä¹ ç‡æ¥é¿å…éœ‡è¡ã€‚é‚£ä¹ˆæˆ‘ä»¬è‡ªç„¶å¯ä»¥æƒ³åˆ°ï¼Œå­¦ä¹ ç‡è·Ÿéšè®­ç»ƒè½®æ¬¡å˜å¤§é€æ¸å˜å°ã€‚è¿™å°±æ˜¯<strong>å­¦ä¹ ç‡è¡°å‡</strong>ã€‚</p><p>åœ¨åˆšå¼€å§‹è®­ç»ƒæ—¶ï¼Œç”±äºå‚æ•°æ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œæ¢¯åº¦ä¹Ÿå¾€å¾€æ¯”è¾ƒå¤§ï¼Œå†åŠ ä¸Šæ¯”è¾ƒå¤§çš„åˆå§‹å­¦ä¹ ç‡ï¼Œä¼šä½¿å¾—è®­ç»ƒä¸ç¨³å®šã€‚å› æ­¤æˆ‘ä»¬å¸Œæœ›åˆšå¼€å§‹å‡ è½®è¿­ä»£çš„å­¦ä¹ ç‡è¾ƒå°ï¼Œç­‰æ¢¯åº¦ä¸‹é™åˆ°ä¸€å®šç¨‹åº¦æ—¶å†æ¢å¤å­¦ä¹ ç‡ã€‚è¿™ç§æ–¹æ³•ç§°ä¹‹ä¸º<strong>å­¦ä¹ ç‡é¢„çƒ­</strong>ã€‚ç­‰é¢„çƒ­å®Œæ¯•ååœ¨è¿›è¡Œå­¦ä¹ ç‡è¡°å‡ã€‚</p><h3 id="3-3-3-AdaGrad-ç®—æ³•"><a href="#3-3-3-AdaGrad-ç®—æ³•" class="headerlink" title="3.3.3 AdaGrad ç®—æ³•"></a>3.3.3 AdaGrad ç®—æ³•</h3><p>AdaGradç®—æ³•çš„åšæ³•æ˜¯ï¼Œæ¯æ¬¡è¿­ä»£æ—¶ï¼Œæ¯ä¸ªå‚æ•°çš„å­¦ä¹ ç‡éƒ½æŠŠå®ƒé™¤ä¸Šä¹‹å‰å¾®åˆ†çš„å‡æ–¹æ ¹ã€‚</p><p>æ™®é€šçš„æ¢¯åº¦ä¸‹é™ç®—æ³•é‡‡ç”¨çš„å‚æ•°æ›´æ–°æ€è·¯ï¼š</p><script type="math/tex; mode=display">w^{t+1}\leftarrow w^t-\eta^tg^t \\\eta^t=\frac{\eta^t}{\sqrt{t + 1}}</script><p>åˆ™Adagradæ˜¯è¿™æ ·æ›´æ–°çš„ï¼š</p><script type="math/tex; mode=display">w^{t+1}\leftarrow w^t-\frac{\eta^t}{\sigma^t}g^t \\g^t =\frac{\partial L(\theta^t)}{\partial w}</script><p>å…¶ä¸­$\sigma^t$æ˜¯ä¹‹å‰å‚æ•°çš„æ‰€æœ‰å¾®åˆ†çš„å‡æ–¹æ ¹ï¼Œå¯¹äºæ¯ä¸ªå‚æ•°éƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><p>å°†Adagradçš„å¼å­åŒ–ç®€ï¼š</p><p><img src="/2022/10/13/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-Note2/åŒ–ç®€åçš„adagrad.png" alt></p><p>Adagradçš„è®¾è®¡æ€è·¯ä¸ºï¼Œå¦‚æœæŸä¸ªå‚æ•°çš„åå¯¼æ•°ç´¯è®¡æ¯”è¾ƒå¤§ï¼Œå…¶å­¦ä¹ ç‡å°±ä¼šç›¸å¯¹è¾ƒå°ï¼›ç›¸åï¼Œå¦‚æœåå¯¼æ•°ç´¯è®¡è¾ƒå°ï¼Œåˆ™å­¦ä¹ ç‡ç›¸å¯¹è¾ƒå¤§ã€‚ä½†æ˜¯æ•´ä½“ä¸Šè¿­ä»£æ¬¡æ•°è¶Šå¤šï¼Œå­¦ä¹ ç‡è¶Šå°ã€‚</p><p>AdaGradçš„ç¼ºç‚¹æ˜¯ï¼Œå¦‚æœåœ¨ç»è¿‡ä¸€å®šæ¬¡æ•°çš„è¿­ä»£ï¼Œä¾ç„¶æ²¡æœ‰æ‰¾åˆ°æœ€ä¼˜ç‚¹æ—¶ï¼Œç”±äºå­¦ä¹ ç‡å·²ç»éå¸¸å°ï¼Œå¾ˆéš¾å†ç»§ç»­ä¼˜åŒ–äº†ã€‚</p><h3 id="3-3-4-RMSprop-ç®—æ³•"><a href="#3-3-4-RMSprop-ç®—æ³•" class="headerlink" title="3.3.4 RMSprop ç®—æ³•"></a>3.3.4 RMSprop ç®—æ³•</h3><p>RMSPropç®—æ³•å¯ä»¥å¸®åŠ©è§£å†³æŸäº›æƒ…å†µä¸‹Adagradç®—æ³•è¿‡æ—©è¡°å‡çš„é—®é¢˜ã€‚</p><p>RMSPropç®—æ³•åœ¨AdaGradçš„åŸºç¡€ä¸Šï¼Œæ”¹è¿›äº†å‚æ•°åå¯¼æ•°çš„ç´¯è®¡æ–¹å¼ã€‚Adagradç®—æ³•æ˜¯è®¡ç®—æ¯ä¸ªå‚æ•°æ¢¯åº¦å¹³æ–¹çš„ç´¯è®¡å€¼ï¼š</p><script type="math/tex; mode=display">G_t=\sum^t_{\tau=1}\textbf{g}_{\tau}\odot\textbf{g}_{\tau}</script><p>å…¶ä¸­$\textbf{g}_{\tau}\in\mathbb{R}^{|\theta|}$æ˜¯ç¬¬$\tau$ æ¬¡è¿­ä»£æ—¶çš„æ¢¯åº¦ã€‚</p><p>RMSPropç®—æ³•é¦–å…ˆè®¡ç®—æ¯æ¬¡è¿­ä»£æ¢¯åº¦ $\textbf{g}_t$å¹³æ–¹çš„æŒ‡æ•°è¡°å‡ç§»åŠ¨å¹³å‡ï¼š</p><script type="math/tex; mode=display">G_t=\beta G_{t-1}+(1-\beta)\textbf{g}_t\odot\textbf{g}_t \\=(1-\beta)\sum^t_{\tau=1}\beta^{t-\tau}\textbf{g}_{\tau}\odot\textbf{g}_{\tau}</script><p>å…¶ä¸­$\beta$ä¸ºè¡°å‡ç‡ï¼Œä¸€èˆ¬ä¸º0.9ã€‚</p><p>RMSPropç®—æ³•çš„å‚æ•°æ›´æ–°å·®å€¼ä¸ºï¼š</p><script type="math/tex; mode=display">\Delta\theta_t=-\frac{\alpha}{\sqrt{G_t+\epsilon}}\odot\textbf{g}_t</script><p>å…¶ä¸­$\alpha$æ˜¯åˆå§‹çš„å­¦ä¹ ç‡ï¼Œæ¯”å¦‚0.001ã€‚</p><p>åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œç”±äºæ¯ä¸ªå‚æ•°çš„å­¦ä¹ ç‡å¹¶ä¸æ˜¯è¡°å‡è¶‹åŠ¿ï¼Œå› æ­¤æ—¢å¯ä»¥å˜å°ä¹Ÿå¯ä»¥å˜å¤§ã€‚</p><h2 id="3-4-æ¢¯åº¦ä¼°è®¡"><a href="#3-4-æ¢¯åº¦ä¼°è®¡" class="headerlink" title="3.4 æ¢¯åº¦ä¼°è®¡"></a>3.4 æ¢¯åº¦ä¼°è®¡</h2><p>é™¤äº†è°ƒæ•´å­¦ä¹ ç‡ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è¿›è¡Œæ¢¯åº¦ä¼°è®¡çš„ä¿®æ­£ã€‚è¿™æ ·åšçš„åŸå› æ˜¯ï¼Œå°æ‰¹é‡æ¢¯åº¦ä¸‹é™é€‰å–çš„æ ·æœ¬å…·æœ‰éšæœºæ€§ï¼Œå¦‚æœæ¯æ¬¡é€‰å–çš„æ ·æœ¬æ•°é‡æ¯”è¾ƒå°ï¼Œåˆ™æŸå¤±å¯èƒ½ä¼šå‘ˆç°éœ‡è¡çš„æ–¹å¼ä¸‹é™ã€‚ä¸€èˆ¬æˆ‘ä»¬å¯ä»¥é‡‡å–ä½¿ç”¨æœ€è¿‘ä¸€æ®µæ—¶é—´å†…çš„å¹³å‡æ¢¯åº¦æ¥ä»£æ›¿å½“å‰æ—¶åˆ»çš„éšæœºæ¢¯åº¦çš„åšæ³•æ¥ç¼“è§£éšæœºæ€§ï¼Œæå‡ä¼˜åŒ–é€Ÿåº¦ã€‚</p><h3 id="3-4-1-åŠ¨é‡æ³•"><a href="#3-4-1-åŠ¨é‡æ³•" class="headerlink" title="3.4.1 åŠ¨é‡æ³•"></a>3.4.1 åŠ¨é‡æ³•</h3><p>è¿˜è®°å¾—ä¹‹å‰æˆ‘ä»¬è¯´è¿‡çš„ï¼Œæ¢¯åº¦ä¸‹é™ç®—æ³•å®¹æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜è§£å—ï¼Ÿæˆ‘ä»¬å°†æ¢¯åº¦ä¸‹é™çš„ä¼˜åŒ–è¿‡ç¨‹æ¯”å–»æˆå°çƒæ»šè½å±±å¡çš„è¿‡ç¨‹ã€‚ä½†æ˜¯æ¢¯åº¦ä¸‹é™çš„ä¼˜åŒ–è¿‡ç¨‹å¿½ç•¥äº†å°çƒæœ¬èº«å…·æœ‰åŠ¨é‡ï¼Œä¸ç°å®ä¸­æœ‰ä¸€å®šåŒºåˆ«ã€‚å¦‚æœæˆ‘ä»¬å°†æ¢¯åº¦ä¸‹é™ç®—æ³•æ·»åŠ ä¸ŠåŠ¨é‡çš„æ¨¡æ‹Ÿï¼Œåˆ™å°çƒåœ¨é™·å…¥å±€éƒ¨æœ€ä¼˜è§£æ—¶ï¼Œè¶³å¤Ÿé«˜çš„åŠ¨é‡èƒ½å¸®åŠ©å°çƒâ€œå†²â€å‡ºå±€éƒ¨æœ€ä¼˜è§£ã€‚</p><p><img src="/2022/10/13/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-Note2/æ¢¯åº¦ä¸‹é™ç®—æ³•å®¹æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜.png" alt></p><p>åœ¨ç¬¬tæ¬¡è¿­ä»£æ˜¯ï¼Œè®¡ç®—è´Ÿæ¢¯åº¦çš„â€œåŠ æƒç§»åŠ¨å¹³å‡â€ä½œä¸ºå‚æ•°çš„æ›´æ–°æ–¹å‘ï¼š</p><script type="math/tex; mode=display">\Delta\theta_t=\rho\Delta\theta_{t-1}-\alpha\textbf{g}_t=-\alpha\sum^t_{\tau=1}\rho^{t-\tau}\textbf{g}_{\tau}</script><p>å…¶ä¸­$\rho$ä¸ºåŠ¨é‡å› å­ï¼Œä¸€èˆ¬ä¸º0.9ï¼Œ$\alpha$ä¸ºå­¦ä¹ ç‡ã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œæ¯ä¸ªå‚æ•°çš„å®é™…æ›´æ–°å·®å€¼å–å†³äºæœ€è¿‘ä¸€æ®µæ—¶é—´å†…æ¢¯åº¦çš„åŠ æƒå¹³å‡å€¼ã€‚å½“æŸä¸ªå‚æ•°åœ¨æœ€è¿‘ä¸€æ®µæ—¶é—´å†…çš„æ¢¯åº¦æ–¹å‘éƒ½ä¸€è‡´ï¼Œå…¶çœŸæ˜¯æ›´æ–°å‚æ•°çš„å¹…åº¦ä¼šå˜å¤§ï¼Œç›¸å½“äºåŠ é€Ÿå†²åˆºï¼›å½“æŸä¸ªå‚æ•°åœ¨æœ€è¿‘ä¸€æ®µæ—¶é—´å†…çš„æ¢¯åº¦æ–¹å‘ä¸ä¸€è‡´ï¼Œåˆ™å‚æ•°æ›´æ–°å¹…åº¦ä¼šå˜å°ï¼Œç›¸å½“äºåˆ¹è½¦ã€‚ä»æŸç§è§’åº¦æ¥è¯´ï¼Œå½“å‰æ¢¯åº¦å åŠ éƒ¨åˆ†ä¸Šæ¬¡çš„æ¢¯åº¦ï¼Œè¿™ç§åšæ³•å¯ä»¥è¿‘ä¼¼çœ‹åšäºŒé˜¶æ¢¯åº¦ã€‚</p><h3 id="3-4-3-Adam-ç®—æ³•"><a href="#3-4-3-Adam-ç®—æ³•" class="headerlink" title="3.4.3 Adam ç®—æ³•"></a>3.4.3 Adam ç®—æ³•</h3><p>Adamç®—æ³•æ˜¯å¦‚ä»Šæœ€å¸¸ç”¨çš„ä¼˜åŒ–ç®—æ³•äº†ï¼Œå®ƒæ˜¯RMSPropç®—æ³•å’ŒåŠ¨é‡æ³•çš„ç»“åˆï¼Œä¸ä½†ä½¿ç”¨åŠ¨é‡ä½œä¸ºå‚æ•°æ›´æ–°æ–¹å‘ï¼Œè€Œä¸”å¯ä»¥è‡ªé€‚åº”è°ƒæ•´å­¦ä¹ ç‡ã€‚</p><h2 id="3-3-æ•°æ®é¢„å¤„ç†"><a href="#3-3-æ•°æ®é¢„å¤„ç†" class="headerlink" title="3.3 æ•°æ®é¢„å¤„ç†"></a>3.3 æ•°æ®é¢„å¤„ç†</h2><p>ä¸€èˆ¬è€Œè¨€ï¼Œæ ·æœ¬ç‰¹å¾ç”±äºæ¥æºä»¥åŠåº¦é‡å•ä½ä¸åŒï¼Œä»–ä»¬çš„å°ºåº¦ (Scale) å³å–å€¼èŒƒå›´ä¹Ÿä¸åŒã€‚å¯¹äºæŸäº›æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œä¼šå¯¹é‚£äº›å°ºåº¦æ›´å¤§çš„æ•°æ®æ›´æ•æ„Ÿã€‚å› æ­¤å¯¹äºå°ºåº¦æ•æ„Ÿçš„æ¨¡å‹ï¼Œå¿…é¡»å…ˆå¯¹æ ·æœ¬è¿›è¡Œé¢„å¤„ç†ï¼Œå°†å„ä¸ªç»´åº¦çš„ç‰¹å¾è½¬æ¢åˆ°ç›¸åŒçš„å–å€¼åŒºé—´å†…ï¼Œå¹¶ä¸”æ¶ˆé™¤ä¸åŒç‰¹å¾ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œæ‰èƒ½å–å¾—ç†æƒ³çš„æ•ˆæœã€‚</p><p>å½’ä¸€åŒ– (Normalization) æ–¹æ³•æ³›æŒ‡æŠŠæ•°æ®ç‰¹å¾è½¬æ¢ä¸ºç›¸åŒå°ºåº¦çš„æ–¹æ³•ï¼Œæ¯”å¦‚æŠŠæ•°æ®ç‰¹å¾æ˜ å°„åˆ° [0,1] åŒºé—´å†…ï¼Œæˆ–è€…ç›´æ¥æ˜ å°„ä¸ºå‡å€¼ä¸º0ã€æ–¹å·®ä¸º1çš„æ­£æ€åˆ†å¸ƒã€‚</p><p><strong>æœ€å°æœ€å¤§å€¼å½’ä¸€åŒ–</strong>ï¼šå°†æ¯ä¸ªç‰¹å¾ç¼©æ”¾åˆ° [0,1] æˆ–è€… [-1,1] ä¹‹é—´ã€‚å‡è®¾æˆ‘ä»¬æœ‰ N å“¥æ ·æœ¬ ${x^{(n)}}^{N}_{n=1}$ï¼Œå¯¹æ¯ä¸€ç»´ç‰¹å¾xï¼Œå½’ä¸€åŒ–åçš„ç‰¹å¾ä¸ºï¼š</p><script type="math/tex; mode=display">\hat{x}^{(n)}=\frac{x^{(n)}-\min_n(x^{(n)})}{\max_n(x^{(n)})-\min_n(x^{(n)})}</script><p><strong>æ ‡å‡†åŒ–</strong>ï¼šå°†æ¯ç»´ç‰¹å¾éƒ½è°ƒæ•´åˆ°æ ‡å‡†æ­£æ€åˆ†å¸ƒï¼š</p><script type="math/tex; mode=display">\hat{x}^{(n)}=\frac{x^{(n)}-\mu}{\sigma}</script><h2 id="3-4-æ¢¯åº¦ä¸‹é™ç®—æ³•çš„å±€é™æ€§"><a href="#3-4-æ¢¯åº¦ä¸‹é™ç®—æ³•çš„å±€é™æ€§" class="headerlink" title="3.4 æ¢¯åº¦ä¸‹é™ç®—æ³•çš„å±€é™æ€§"></a>3.4 æ¢¯åº¦ä¸‹é™ç®—æ³•çš„å±€é™æ€§</h2><p>ä¸Šä¸€ç¯‡ç¬”è®°å·²ç»æœ‰æåˆ°è¯¥éƒ¨åˆ†å†…å®¹ï¼š</p><p>é¦–å…ˆï¼Œ<strong>æ¢¯åº¦ä¸‹é™ç®—æ³•å®¹æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜ï¼Œæ‰¾ä¸åˆ°å…¨å±€æœ€ä¼˜è§£</strong>ã€‚</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå½“æ¢¯åº¦ä¸‹é™ç®—æ³•ä¼˜åŒ–åˆ°local minima æ—¶ï¼Œå‰é¢æœ‰åº§é«˜å±±ï¼Œå®ƒçš„æ¢¯åº¦æ˜¯æ­£çš„ï¼Œä¼˜åŒ–ç®—æ³•ä¼šå¼ºè¿«æˆ‘ä»¬å¾€å›èµ°ã€‚</p><p><img src="/2022/10/13/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-Note2/æ¢¯åº¦ä¸‹é™ç®—æ³•å±€éƒ¨æœ€ä¼˜.png" alt></p><p><img src="/2022/10/13/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-Note2/æ¢¯åº¦ä¸‹é™å±€éƒ¨æœ€ä¼˜2.png" alt></p><p>è¿™ä¸ªé—®é¢˜åœ¨æˆ‘ä»¬çš„çº¿æ€§å›å½’æ¨¡å‹é‡Œæš‚æ—¶é‡ä¸åˆ°ï¼Œå› ä¸ºçº¿æ€§æ¨¡å‹éå¸¸ç®€å•ï¼Œæ˜¯ä¸€ä¸ªå‡¸å‡½æ•°ã€‚ä½†å½“æˆ‘ä»¬è¯•å›¾åˆ©ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•è®­ç»ƒå¤æ‚æ¨¡å‹ï¼Œæ¯”å¦‚ç¥ç»ç½‘ç»œæ—¶ï¼Œå°±å¾ˆæœ‰å¯èƒ½é­é‡è¯¥é—®é¢˜ã€‚</p><p>æœ‰å¾ˆå¤šæ–¹æ³•èƒ½å¤Ÿè§£å†³æ¢¯åº¦ä¸‹é™ç®—æ³•çš„å…¨å±€æœ€ä¼˜è§£é—®é¢˜ï¼ŒåŒ…æ‹¬è°ƒæ•´æ¯æ¬¡è¡Œè¿›çš„æ­¥é•¿$\eta$ï¼Œä½¿å…¶æ›´æœ‰å¸Œæœ›è·¨è¶Šâ€œå¤§å±±â€ç­‰æ‰‹æ®µç­‰ç­‰ã€‚</p><p>å…¶æ¬¡ï¼Œæ¢¯åº¦ä¸‹é™ç®—æ³•è¦æ±‚ç›®æ ‡å‡½æ•°æ˜¯å¯å¾®çš„ï¼Œè¿™åœ¨æŸäº›æƒ…å†µä¸‹ä¼š<strong>äº§ç”Ÿç›¸å½“å¤§çš„è®¡ç®—ä»£ä»·</strong>ã€‚å‡è®¾æˆ‘ä»¬çš„é—®é¢˜æœ‰ä¸Šç™¾ä¸‡ç»´ï¼Œè®¡ç®—äºŒé˜¶åå¯¼æ•°å°±éœ€è¦ä¸Šä¸‡äº¿ï¼ˆç™¾ä¸‡çš„å¹³æ–¹ï¼‰æ¬¡ï¼</p><p>å†æ¬¡ï¼Œ<strong>å½“è®­ç»ƒæ•°æ®ç›¸å½“å¤šæ—¶ï¼Œæ¢¯åº¦ä¸‹é™ç®—æ³•ä¼šå˜å¾—å¾ˆæ…¢</strong>ã€‚åœ¨å®è·µä¸­ï¼Œä¸ºäº†è®¡ç®—æ¢¯åº¦$\nabla L$ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºäº†æ¯ä¸ªè®­ç»ƒæ ·æœ¬xå•ç‹¬è®¡ç®—æ¢¯åº¦$\nabla L_x$ï¼Œç„¶åæ±‚å¹³å‡å€¼ã€‚è¿™ä¼šèŠ±è´¹å¾ˆé•¿æ—¶é—´ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
      <tag>MOOC</tag>
      
      <tag>Gradient Descent</tag>
      
      <tag>Bias and Variance</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘æå®æ¯…2019MLè¯¾ç¨‹-Note1</title>
    <link href="/2022/10/10/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-P1/"/>
    <url>/2022/10/10/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-P1/</url>
    
    <content type="html"><![CDATA[<p>æå®æ¯…è€å¸ˆä¸»è®²çš„æœºå™¨å­¦ä¹ MOOCè¯¾ç¨‹çš„ç¬”è®°ï¼Œæœ¬ç¯‡è®°å½•çš„çŸ¥è¯†ç‚¹æœ‰ï¼šæœºå™¨å­¦ä¹ çš„æ¦‚å¿µå’Œåˆ†ç±»ã€åˆ©ç”¨çº¿æ€§æ¨¡å‹è§£å†³å›å½’é—®é¢˜ä»¥åŠæ¢¯åº¦ä¸‹é™ã€‚<br><!--more---></p><h3 id="ä¸€ã€æœºå™¨å­¦ä¹ ä»‹ç»"><a href="#ä¸€ã€æœºå™¨å­¦ä¹ ä»‹ç»" class="headerlink" title="ä¸€ã€æœºå™¨å­¦ä¹ ä»‹ç»"></a>ä¸€ã€<a href="https://www.bilibili.com/video/av59538266">æœºå™¨å­¦ä¹ ä»‹ç»</a></h3><p>è¯´ä¸€ä¸‹æˆ‘å­¦è¿™é—¨è¯¾çš„åˆè¡·å§ã€‚å…¶å®æœºå™¨å­¦ä¹ çš„è¯¾ç¨‹åœ¨ç ”ç©¶ç”Ÿé˜¶æ®µå°±å·²ç»ä¸Šè¿‡äº†ï¼Œä½†æ˜¯å·¥ä½œä¹‹åæ‰å‘ç°æœ‰ä¸€äº›åŸºç¡€æ²¡ææ‡‚æˆ–è€…å·²ç»é—å¿˜ï¼Œå› æ­¤åœ¨å­¦ä¹ æ–°çŸ¥è¯†æ—¶å­˜åœ¨éšœç¢ã€‚æ°é€¢Datawhaleç»™äº†è¿™æ¬¡ç»„é˜Ÿå­¦ä¹ çš„æœºä¼šï¼Œæˆ‘ä¾¿æƒ³ä¸ç¾¤å‹ä»¬ä¸€èµ·æŠŠè¿™é—¨åŸºç¡€è¯¾ç¨‹æå®šã€‚</p><h4 id="1-æ¦‚è¦"><a href="#1-æ¦‚è¦" class="headerlink" title="1. æ¦‚è¦"></a>1. æ¦‚è¦</h4><p>æœ¬èŠ‚é€šä¿—æ˜“æ‡‚åœ°ä»‹ç»äº†æœºå™¨å­¦ä¹ çš„æ¦‚å¿µï¼Œä»‹ç»äº†AIçš„å‘å±•å†å²ï¼Œä»¥åŠä¸ä¼ ç»Ÿè§„åˆ™çš„åŒºåˆ«ã€‚ç®€å•æ¥è¯´ï¼Œ<strong>æœºå™¨å­¦ä¹ </strong>æ˜¯ä¸€ç§ä»æœ‰é™æ•°æ®ä¸­å­¦ä¹ è§„å¾‹å¹¶å¯¹æœªçŸ¥æ•°æ®è¿›è¡Œé¢„æµ‹çš„æ–¹æ³•ã€‚</p><p>åˆšå¼€å§‹è®²äº†æ¯”è¾ƒå¤šçš„åè¯å’Œæ¦‚å¿µã€‚è€å¸ˆæœ€åçš„å›¾é‡Œå¾ˆå¥½åœ°æ€»ç»“äº†æœ¬æ¬¡è¯¾çš„å†…å®¹ï¼š</p><p><img src="/2022/10/10/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-P1/æœºå™¨å­¦ä¹ ä»‹ç»01.png" alt></p><h4 id="é¦–å…ˆï¼Œæœºå™¨å­¦ä¹ çš„è¿‡ç¨‹åˆ†æˆä¸‰ä¸ªæ­¥éª¤ï¼š"><a href="#é¦–å…ˆï¼Œæœºå™¨å­¦ä¹ çš„è¿‡ç¨‹åˆ†æˆä¸‰ä¸ªæ­¥éª¤ï¼š" class="headerlink" title="é¦–å…ˆï¼Œæœºå™¨å­¦ä¹ çš„è¿‡ç¨‹åˆ†æˆä¸‰ä¸ªæ­¥éª¤ï¼š"></a>é¦–å…ˆï¼Œæœºå™¨å­¦ä¹ çš„è¿‡ç¨‹åˆ†æˆä¸‰ä¸ªæ­¥éª¤ï¼š</h4><ol><li>æ ¹æ®é—®é¢˜çš„ä¸åŒï¼Œé€‰æ‹©æ¨¡å‹ï¼ˆfunctionï¼‰ï¼›</li><li>æ ¹æ®æ¨¡å‹çš„ä¸åŒï¼Œå®šä¹‰èƒ½å¤Ÿåº¦é‡å­¦ä¹ æ•ˆæœçš„æŸå¤±å‡½æ•°ï¼›</li><li>ä»æœ‰é™æ•°æ®ä¸­æŒç»­è®­ç»ƒæ¨¡å‹ï¼Œä½¿å¾—æŸå¤±å‡½æ•°æœ€å°ã€‚</li></ol><h4 id="å…¶æ¬¡ï¼Œæ ¹æ®å­¦ä¹ æ‰€éœ€çš„æ•°æ®æ˜¯å¦å­˜åœ¨æ ‡ç­¾ï¼Œæœºå™¨å­¦ä¹ å¯ä»¥åˆ†æˆå¦‚ä¸‹å‡ ç±»ï¼ˆå›¾ä¸­è“è‰²æ¡†æ¡†çš„éƒ¨åˆ†ï¼‰ï¼š"><a href="#å…¶æ¬¡ï¼Œæ ¹æ®å­¦ä¹ æ‰€éœ€çš„æ•°æ®æ˜¯å¦å­˜åœ¨æ ‡ç­¾ï¼Œæœºå™¨å­¦ä¹ å¯ä»¥åˆ†æˆå¦‚ä¸‹å‡ ç±»ï¼ˆå›¾ä¸­è“è‰²æ¡†æ¡†çš„éƒ¨åˆ†ï¼‰ï¼š" class="headerlink" title="å…¶æ¬¡ï¼Œæ ¹æ®å­¦ä¹ æ‰€éœ€çš„æ•°æ®æ˜¯å¦å­˜åœ¨æ ‡ç­¾ï¼Œæœºå™¨å­¦ä¹ å¯ä»¥åˆ†æˆå¦‚ä¸‹å‡ ç±»ï¼ˆå›¾ä¸­è“è‰²æ¡†æ¡†çš„éƒ¨åˆ†ï¼‰ï¼š"></a>å…¶æ¬¡ï¼Œæ ¹æ®å­¦ä¹ æ‰€éœ€çš„æ•°æ®æ˜¯å¦å­˜åœ¨æ ‡ç­¾ï¼Œæœºå™¨å­¦ä¹ å¯ä»¥åˆ†æˆå¦‚ä¸‹å‡ ç±»ï¼ˆå›¾ä¸­è“è‰²æ¡†æ¡†çš„éƒ¨åˆ†ï¼‰ï¼š</h4><ol><li>ç›‘ç£å­¦ä¹ ï¼ŒæŒ‡å­¦ä¹ æ‰€éœ€çš„æ•°æ®æ˜¯ç»è¿‡äººå·¥æ ‡æ³¨çš„ï¼›</li><li>æ— ç›‘ç£å­¦ä¹ ï¼ŒæŒ‡å­¦ä¹ æ‰€éœ€çš„æ•°æ®ä¸éœ€äººå·¥æ ‡æ³¨ï¼›</li><li>å…¶ä»–å­¦ä¹ æ–¹æ³•ï¼Œæ¯”å¦‚åŠç›‘ç£å­¦ä¹ ã€è¿ç§»å­¦ä¹ ã€å¼ºåŒ–å­¦ä¹ ç­‰ã€‚</li></ol><h4 id="åœ¨ç›‘ç£å­¦ä¹ é‡Œï¼Œæ ¹æ®æƒ³è¦è§£å†³çš„é—®é¢˜ä¸åŒï¼Œå¯åˆ†ä¸ºå¦‚ä¸‹å‡ ç±»ï¼ˆå›¾ä¸­é»„è‰²æ¡†æ¡†çš„éƒ¨åˆ†ï¼‰ï¼š"><a href="#åœ¨ç›‘ç£å­¦ä¹ é‡Œï¼Œæ ¹æ®æƒ³è¦è§£å†³çš„é—®é¢˜ä¸åŒï¼Œå¯åˆ†ä¸ºå¦‚ä¸‹å‡ ç±»ï¼ˆå›¾ä¸­é»„è‰²æ¡†æ¡†çš„éƒ¨åˆ†ï¼‰ï¼š" class="headerlink" title="åœ¨ç›‘ç£å­¦ä¹ é‡Œï¼Œæ ¹æ®æƒ³è¦è§£å†³çš„é—®é¢˜ä¸åŒï¼Œå¯åˆ†ä¸ºå¦‚ä¸‹å‡ ç±»ï¼ˆå›¾ä¸­é»„è‰²æ¡†æ¡†çš„éƒ¨åˆ†ï¼‰ï¼š"></a>åœ¨ç›‘ç£å­¦ä¹ é‡Œï¼Œæ ¹æ®æƒ³è¦è§£å†³çš„é—®é¢˜ä¸åŒï¼Œå¯åˆ†ä¸ºå¦‚ä¸‹å‡ ç±»ï¼ˆå›¾ä¸­é»„è‰²æ¡†æ¡†çš„éƒ¨åˆ†ï¼‰ï¼š</h4><ol><li>åˆ†ç±»é—®é¢˜ï¼ŒæŒ‡æˆ‘ä»¬å¸Œæœ›æ¨¡å‹ç»™å‡ºyesæˆ–noè¿™æ ·å…·ä½“çš„è¯„ä»·ï¼›</li><li>å›å½’é—®é¢˜ï¼ŒæŒ‡æˆ‘ä»¬å¸Œæœ›æ¨¡å‹èƒ½å¤Ÿç»™å‡ºä¸€ä¸ªæ•°å€¼ï¼Œè¿™ä¸ªæ•°å€¼çš„å¤§å°æœ‰ç°å®æ„ä¹‰ï¼›</li><li>ç»“æ„åŒ–é—®é¢˜ï¼Œæˆ‘ä»¬å¸Œæœ›æ¨¡å‹ç›´æ¥è¾“å‡ºç»“æ„åŒ–ç»“æœï¼Œæ¯”å¦‚è¯­è¨€ç¿»è¯‘æ¨¡å‹èƒ½å¤Ÿäº§å‡ºä¸€æ®µæ–‡æœ¬ï¼Œdall-eèƒ½å¤Ÿç”Ÿæˆå›¾åƒï¼Œç­‰ç­‰ã€‚</li></ol><h4 id="åˆ†ç±»é—®é¢˜æ˜¯æ¯”è¾ƒç®€å•çš„é—®é¢˜ï¼Œæœ‰å¾ˆå¤šæ¨¡å‹å¯ä»¥è§£å†³åˆ†ç±»é—®é¢˜ï¼ˆå›¾ä¸­ç»¿è‰²æ¡†æ¡†çš„éƒ¨åˆ†ï¼‰ï¼š"><a href="#åˆ†ç±»é—®é¢˜æ˜¯æ¯”è¾ƒç®€å•çš„é—®é¢˜ï¼Œæœ‰å¾ˆå¤šæ¨¡å‹å¯ä»¥è§£å†³åˆ†ç±»é—®é¢˜ï¼ˆå›¾ä¸­ç»¿è‰²æ¡†æ¡†çš„éƒ¨åˆ†ï¼‰ï¼š" class="headerlink" title="åˆ†ç±»é—®é¢˜æ˜¯æ¯”è¾ƒç®€å•çš„é—®é¢˜ï¼Œæœ‰å¾ˆå¤šæ¨¡å‹å¯ä»¥è§£å†³åˆ†ç±»é—®é¢˜ï¼ˆå›¾ä¸­ç»¿è‰²æ¡†æ¡†çš„éƒ¨åˆ†ï¼‰ï¼š"></a>åˆ†ç±»é—®é¢˜æ˜¯æ¯”è¾ƒç®€å•çš„é—®é¢˜ï¼Œæœ‰å¾ˆå¤šæ¨¡å‹å¯ä»¥è§£å†³åˆ†ç±»é—®é¢˜ï¼ˆå›¾ä¸­ç»¿è‰²æ¡†æ¡†çš„éƒ¨åˆ†ï¼‰ï¼š</h4><ol><li>çº¿æ€§æ¨¡å‹ï¼›</li><li>éçº¿æ€§æ¨¡å‹ï¼Œæ¯”å¦‚æ·±åº¦å­¦ä¹ ã€SVMã€å†³ç­–æ ‘ç­‰æ–¹æ³•ã€‚</li></ol><p>åç»­æˆ‘ä»¬ä¼šå­¦åˆ°ä»€ä¹ˆæ˜¯çº¿æ€§æ¨¡å‹ã€ä»€ä¹ˆæ˜¯éçº¿æ€§æ¨¡å‹ï¼Œä»¥åŠä¸Šé¢çš„å…·ä½“æ¨¡å‹çš„è®¾è®¡ç»†èŠ‚ã€‚</p><h4 id="ä¸ºä»€ä¹ˆè¦å­¦ä¹ æœºå™¨å­¦ä¹ è¿™é—¨è¯¾ç¨‹ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦å­¦ä¹ æœºå™¨å­¦ä¹ è¿™é—¨è¯¾ç¨‹ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å­¦ä¹ æœºå™¨å­¦ä¹ è¿™é—¨è¯¾ç¨‹ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦å­¦ä¹ æœºå™¨å­¦ä¹ è¿™é—¨è¯¾ç¨‹ï¼Ÿ</h4><p><del>å½“ç„¶æ˜¯ä¸ºäº†æŒ£é’±äº†</del></p><p>ç”±äºç›®å‰è¿˜æ²¡æœ‰ä¸€ä¸ªæ™®é€‚çš„å­¦ä¹ æ¨¡å‹ï¼Œèƒ½å¤Ÿè§£å†³ä¸–ç•Œä¸€åˆ‡å¯ä»¥ç”¨æœºå™¨å­¦ä¹ æ–¹æ³•è§£å†³çš„é—®é¢˜ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¾èµ–ç»éªŒå’ŒçŸ¥è¯†ï¼Œæ¥æ ¹æ®ä¸åŒçš„é—®é¢˜ï¼Œé€‰æ‹©ä¸åŒçš„å­¦ä¹ æ¨¡å‹å’Œå’ŒæŸå¤±å‡½æ•°ã€‚è¿˜è®°å¾—æœºå™¨å­¦ä¹ çš„ä¸‰ä¸ªæ­¥éª¤å—ï¼Ÿé€‰æ‹©æ¨¡å‹ã€å®šä¹‰æŸå¤±å‡½æ•°ã€è®­ç»ƒæ¨¡å‹è¿‡ç¨‹çš„çŸ¥è¯†ï¼Œéƒ½æ˜¯èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¾—åˆ°æ›´åŠ å¯é çš„æœºå™¨å­¦ä¹ ç³»ç»Ÿçš„æŠ€èƒ½ã€‚å­¦ä¹ è¿™é—¨è¯¾ç¨‹ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æˆä¸ºä¸€åæ›´å¥½çš„æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆã€‚</p><h3 id="äºŒã€æœºå™¨å­¦ä¹ æ¡ˆä¾‹â€”â€”å›å½’é—®é¢˜"><a href="#äºŒã€æœºå™¨å­¦ä¹ æ¡ˆä¾‹â€”â€”å›å½’é—®é¢˜" class="headerlink" title="äºŒã€æœºå™¨å­¦ä¹ æ¡ˆä¾‹â€”â€”å›å½’é—®é¢˜"></a>äºŒã€<a href="https://www.bilibili.com/video/BV1Ht411g7Ef?p=3">æœºå™¨å­¦ä¹ æ¡ˆä¾‹â€”â€”å›å½’é—®é¢˜</a></h3><p>è¿™éƒ¨åˆ†ä»¥ä¸€ä¸ªå›å½’é—®é¢˜ä¸ºå¼•å­ï¼Œå¼•å¯¼æˆ‘ä»¬æ¢ç´¢æœºå™¨å­¦ä¹ çš„ä¸‰å¤§æ­¥éª¤ã€‚å›å½’é—®é¢˜æ¯”è¾ƒæ™®éï¼Œåƒè‚¡ç¥¨é¢„æµ‹ã€æ¸©åº¦é¢„æµ‹ã€æˆ¿ä»·é¢„æµ‹ç­‰ï¼Œéƒ½æ˜¯å›å½’é—®é¢˜ã€‚</p><p>æœºå™¨å­¦ä¹ çš„ä¸‰å¤§æ­¥éª¤åˆ†åˆ«ä¸ºï¼š</p><ol><li>æ ¹æ®é—®é¢˜çš„ä¸åŒï¼Œé€‰æ‹©æ¨¡å‹ï¼ˆfunctionï¼‰ï¼›</li><li>æ ¹æ®æ¨¡å‹çš„ä¸åŒï¼Œå®šä¹‰èƒ½å¤Ÿåº¦é‡å­¦ä¹ æ•ˆæœçš„æŸå¤±å‡½æ•°ï¼›</li><li>ä»æœ‰é™æ•°æ®ä¸­æŒç»­è®­ç»ƒæ¨¡å‹ï¼Œä½¿å¾—æŸå¤±å‡½æ•°æœ€å°ã€‚</li></ol><h4 id="ç¬¬ä¸€æ­¥ï¼Œä¸ºå›å½’é—®é¢˜é€‰æ‹©åˆé€‚çš„æ¨¡å‹"><a href="#ç¬¬ä¸€æ­¥ï¼Œä¸ºå›å½’é—®é¢˜é€‰æ‹©åˆé€‚çš„æ¨¡å‹" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼Œä¸ºå›å½’é—®é¢˜é€‰æ‹©åˆé€‚çš„æ¨¡å‹"></a>ç¬¬ä¸€æ­¥ï¼Œä¸ºå›å½’é—®é¢˜é€‰æ‹©åˆé€‚çš„æ¨¡å‹</h4><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çº¿æ€§æ¨¡å‹è¯•è¯•æ°´ã€‚æ‰€è°“<strong>çº¿æ€§æ¨¡å‹</strong> (Linear Model) æ˜¯æŠŠè¾“å…¥æ•°æ®çš„å„ç§ç‰¹å¾ï¼Œé€šè¿‡çº¿æ€§ç»„åˆçš„æ–¹å¼è¿›è¡Œé¢„æµ‹ã€‚</p><script type="math/tex; mode=display">y=b+\Sigma\omega_{i}x_{i}</script><p>å…¶ä¸­yæ˜¯é¢„æµ‹å€¼ï¼Œxæ˜¯ç‰¹å¾æœ¬èº«ï¼Œwæ˜¯ç‰¹å¾å¯¹åº”çš„å‚æ•°ã€‚æˆ‘ä»¬çš„å­¦ä¹ ç›®æ ‡å°±æ˜¯æ‰¾åˆ°æ­£ç¡®çš„wï¼Œä»¤é¢„æµ‹å€¼yå°½å¯èƒ½é è°±ã€‚</p><h4 id="ç¬¬äºŒæ­¥ï¼Œä¸ºçº¿æ€§æ¨¡å‹é€‰æ‹©åˆé€‚çš„è¯„ä¼°å‡½æ•°"><a href="#ç¬¬äºŒæ­¥ï¼Œä¸ºçº¿æ€§æ¨¡å‹é€‰æ‹©åˆé€‚çš„è¯„ä¼°å‡½æ•°" class="headerlink" title="ç¬¬äºŒæ­¥ï¼Œä¸ºçº¿æ€§æ¨¡å‹é€‰æ‹©åˆé€‚çš„è¯„ä¼°å‡½æ•°"></a>ç¬¬äºŒæ­¥ï¼Œä¸ºçº¿æ€§æ¨¡å‹é€‰æ‹©åˆé€‚çš„è¯„ä¼°å‡½æ•°</h4><p>çŸ¥é”™èƒ½æ”¹ï¼Œå–„è«å¤§ç„‰ã€‚æ¯å½“æ¨¡å‹é¢„æµ‹å¾—åˆ°ä¸€ä¸ªå€¼ï¼Œä¸ºäº†è®©æ¨¡å‹è®¤è¯†åˆ°è‡ªå·±çš„é¢„æµ‹å€¼yä¸çœŸå®å€¼$\hat{y}$çš„å·®è·ï¼Œæˆ‘ä»¬ä¸å¦¨ç›´æ¥å–äºŒè€…ä¹‹å·®ï¼Œä½œä¸ºè®¡ç®—å·®è·çš„<strong>æŸå¤±å‡½æ•°</strong> (Loss Function)ã€‚</p><script type="math/tex; mode=display">L(f)=\sum (y-\hat{y})</script><p>è¿™æ ·è‚¯å®šæ˜¯æœ‰é—®é¢˜çš„ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸¤ç»„æ•°æ®ï¼Œä¸€ç»„è¶…è¿‡çœŸå®å€¼0.5ï¼Œå¦ä¸€ç»„ä½äºé¢„æµ‹å€¼0.5ï¼Œå®ƒä»¬ä¸çœŸå®å€¼çš„å·®å€¼åˆ†åˆ«æ˜¯0.5ä¸-0.5ã€‚ç»“æœç»è¿‡æˆ‘ä»¬çš„è®¡ç®—ï¼ŒæŸå¤±å‡½æ•°å±…ç„¶ä¸º0ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰æŸå¤±ï¼Ÿ</p><p>ä¸ºäº†é¿å…ä¸Šè¿°æƒ…å†µçš„å‡ºç°ï¼Œæˆ‘ä»¬é€‰æ‹©å¹³æ–¹æŸå¤±å‡½æ•°ä½œä¸ºè¡¡é‡å·®è·çš„æ‰‹æ®µï¼š</p><script type="math/tex; mode=display">L(f)=\sum (y-\hat{y})^2</script><p>å…¶å®ä¹Ÿæœ‰å…¶ä»–çš„æŸå¤±å‡½æ•°å®šä¹‰æ–¹æ³•å¯ä»¥è§„é¿ç¬¬ä¸€ä¸ªæŸå¤±å‡½æ•°çš„é—®é¢˜ï¼Œæ¯”å¦‚ä½¿ç”¨ç»å¯¹å€¼ã€‚ä½†è¿™é‡Œæˆ‘ä»¬å°±é’¦å®šå¹³æ–¹æŸå¤±å‡½æ•°äº†ï¼Œå®ƒæœ‰å¾ˆå¤šå¥½å¤„ï¼Œä½†æ˜¯æˆ‘ä»¬å…ˆæŒ‰ä¸‹ä¸è¡¨ã€‚</p><h4 id="ç¬¬ä¸‰æ­¥ï¼Œè¿›è¡Œè®­ç»ƒï¼Œå¹¶åˆ©ç”¨æŸå¤±å‡½æ•°æŒ‡å¯¼è®­ç»ƒè¿‡ç¨‹"><a href="#ç¬¬ä¸‰æ­¥ï¼Œè¿›è¡Œè®­ç»ƒï¼Œå¹¶åˆ©ç”¨æŸå¤±å‡½æ•°æŒ‡å¯¼è®­ç»ƒè¿‡ç¨‹" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼Œè¿›è¡Œè®­ç»ƒï¼Œå¹¶åˆ©ç”¨æŸå¤±å‡½æ•°æŒ‡å¯¼è®­ç»ƒè¿‡ç¨‹"></a>ç¬¬ä¸‰æ­¥ï¼Œè¿›è¡Œè®­ç»ƒï¼Œå¹¶åˆ©ç”¨æŸå¤±å‡½æ•°æŒ‡å¯¼è®­ç»ƒè¿‡ç¨‹</h4><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æœ‰å¾ˆå¤šå¸¦æ ‡ç­¾çš„æ•°æ® $(x,\hat{y})$ï¼Œæœ‰çº¿æ€§æ¨¡å‹ï¼Œæœ‰æŸå¤±å‡½æ•°ã€‚é‚£æˆ‘è¯¥æ€ä¹ˆå¾—åˆ°è®­ç»ƒå¥½çš„æ¨¡å‹å‘¢ï¼Ÿ</p><p><strong>æœ€å¥½çš„æ¨¡å‹</strong>åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿå¯¹äºçº¿æ€§æ¨¡å‹æ¥è¯´ï¼Œå…¶å®æ±‚è§£æœ€ä¼˜çš„$w$å’Œ$b$ï¼Œä»è€Œå¯ä»¥è®©æˆ‘ä»¬çš„æ¨¡å‹æ— è®ºè¾“å…¥ä»€ä¹ˆ$x$ï¼Œéƒ½èƒ½å‡†ç¡®å¾—åˆ°ä¸çœŸå®å€¼ç›¸å·®æ— å‡ çš„$y$ã€‚</p><p>è®©æˆ‘ä»¬å¿˜æ‰wå’Œbçš„å…·ä½“å«ä¹‰ã€æ™¦æ¶©ä¸æ¸…çš„Lå‡½æ•°ï¼Œä¸“å¿ƒè§£å†³è¿™ä¸ªé—®é¢˜ï¼šå¦‚ä½•ä¼˜åŒ–$w$å’Œ$b$ï¼Œä»¥ä¾¿Lè¾¾åˆ°æœ€å°ï¼Ÿ</p><script type="math/tex; mode=display">w^*=arg\min_{w}L(w) \\b^*=arg\min_{b}L(b)</script><p>ä¸€ç§è§£å†³é—®é¢˜çš„æ–¹æ³•ä½¿ç”¨å¾®ç§¯åˆ†æ¥å—¯ç®—ï¼Œé€šè¿‡è®¡ç®—å¯¼æ•°å»å¯»æ‰¾Lçš„æå€¼ç‚¹ã€‚è¿æ°”å¥½çš„è¯ï¼ŒLçš„å˜é‡ä¸å¤šï¼Œè¯¥æ–¹æ³•çœ‹ä¼¼å¯è¡Œï¼›è¿æ°”ä¸å¥½çš„è¯ï¼Œæˆ‘ä»¬é¢å¯¹çš„é—®é¢˜è¿‡äºå¤æ‚ã€å‚æ•°è¿‡å¤šï¼Œé—®é¢˜å°±ä¸å¥½è§£å†³äº†ã€‚</p><p>è¿˜æœ‰ä¸€ç§ç¬¨åŠæ³•æ˜¯ç©·ä¸¾æ‰€æœ‰å¯èƒ½çš„$w$ï¼Œé€‰æ‹©èƒ½ä½¿Læœ€å°çš„$w^*$å³å¯ã€‚è¿™ç§æ–¹æ³•è™½ç„¶å¯è¡Œï¼Œä½†æ˜¯æ²¡æœ‰æ•ˆç‡ã€‚</p><p>æœ‰ä¸€ç§é€šç”¨çš„æœ€ä¼˜åŒ–æ–¹æ³•ï¼Œå«åš<strong>æ¢¯åº¦ä¸‹é™</strong> (Gradient Descent) æ–¹æ³•ï¼Œä¸“é—¨ç”¨äºè§£å†³è¿™ç§å‡¸ä¼˜åŒ–é—®é¢˜ã€‚ä½¿ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•çš„å‰ææ˜¯ä¼˜åŒ–ç›®æ ‡æ˜¯å¯å¾®çš„ã€‚</p><h5 id="1-æ¢¯åº¦ä¸‹é™ç®—æ³•ç®€ä»‹"><a href="#1-æ¢¯åº¦ä¸‹é™ç®—æ³•ç®€ä»‹" class="headerlink" title="1. æ¢¯åº¦ä¸‹é™ç®—æ³•ç®€ä»‹"></a>1. æ¢¯åº¦ä¸‹é™ç®—æ³•ç®€ä»‹</h5><p>æ°å¥½ï¼Œæˆ‘ä»¬çš„æŸå¤±å‡½æ•°Læ˜¯å¯å¾®çš„ï¼Œä¹Ÿå°±æ˜¯äºŒé˜¶å¯å¯¼çš„ã€‚å¦‚æœæˆ‘ä»¬å½“åˆé€‰å–æŸå¤±å‡½æ•°æ—¶ï¼Œä½¿ç”¨ç»å¯¹å€¼ä½œä¸ºæŸå¤±å‡½æ•°ï¼Œå¤„ç†èµ·æ¥ä¾¿æ²¡æœ‰è¿™ä¹ˆä¾¿åˆ©äº†ã€‚</p><p>æ¢¯åº¦ä¸‹é™çš„å…·ä½“è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ol><li>é€‰æ‹©ä¸€ä¸ªåˆå§‹$w_0$</li><li>è®¡ç®—è¯¥ä½ç½®ä¸‹wå¯¹Lçš„å¾®åˆ†ï¼Œè¿™ä¸ªå¾®åˆ†å¯¹åº”å‡½æ•°åœ¨æ­¤å¤„ä¸‹é™æœ€å¿«çš„æ–¹å‘ï¼›</li><li>å°†$w_0$æœç€è¿™ä¸ªæ–¹å‘ç§»åŠ¨ä¸€å°æ­¥$ \eta$<script type="math/tex; mode=display">w\prime=w_0-\eta\frac{\mathrm{d}L}{\mathrm{d}w}</script></li><li>åœ¨æ–°çš„ä½ç½®å¼€å§‹æ–°ä¸€è½®è¿­ä»£è®¡ç®—ï¼Œç›´åˆ°$w$ä¸å†å˜åŒ–ä¸ºæ­¢ã€‚</li></ol><p>ä¸å¦¨å°†æ¢¯åº¦ä¸‹é™ç®—æ³•çš„æ±‚è§£è¿‡ç¨‹æƒ³è±¡ä¸ºäººä¸‹å±±çš„è¿‡ç¨‹ï¼Œäººä¼šå…ˆæ‰¾åˆ°ä¸‹å±±æœ€å¿«çš„æ–¹å‘ï¼Œç„¶åæœç€é‚£ä¸ªæ–¹å‘èµ°ä¸€æ­¥ï¼Œç›´åˆ°æŠµè¾¾æœ€ä½ç‚¹ã€‚</p><p><img src="/2022/10/10/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-P1/æ¨¡æ‹Ÿæ¢¯åº¦ä¸‹é™.png" alt></p><p>åœ¨ä¸Šå›¾ä¸­ï¼Œæ¯ä¸€æ¡çº¿å›´æˆçš„åœˆå°±æ˜¯ç­‰é«˜çº¿ï¼Œä»£è¡¨æŸå¤±å‡½æ•°çš„å€¼ï¼Œé¢œè‰²çº¦æ·±çš„åŒºåŸŸä»£è¡¨çš„æŸå¤±å‡½æ•°è¶Šå°ï¼›çº¢è‰²çš„ç®­å¤´ä»£è¡¨ç­‰é«˜çº¿çš„æ³•çº¿æ–¹å‘ã€‚</p><p>ä¸Šè¿°è¿‡ç¨‹æ˜¯æ±‚è§£Låœ¨å˜é‡wä¸‹çš„æœ€ä¼˜è§£çš„æ¢¯åº¦ä¸‹é™è¿‡ç¨‹ï¼Œä½†æ˜¯Lè¿˜ä¸åç§»é‡bå­˜åœ¨å¯¹åº”å…³ç³»ï¼Œæ‰€ä»¥å®é™…ä¸Šæ¢¯åº¦ä¸‹é™åœ¨çº¿æ€§æ¨¡å‹çš„å…·ä½“å…¬å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">w_k\rightarrow w'_k=w_k-\eta\frac{\partial C}{\partial w_k} \\b_l\rightarrow b'_l=b_l-\eta\frac{\partial C}{\partial b_l}</script><p>å…¶ä¸­ï¼Œåå¾®åˆ†çš„å…·ä½“å…¬å¼å¦‚ä¸‹ï¼š</p><p><img src="/2022/10/10/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-P1/çº¿æ€§å›å½’åå¾®åˆ†æ–¹ç¨‹.png" alt></p><h5 id="2-æ¢¯åº¦ä¸‹é™ç®—æ³•çš„å±€é™æ€§"><a href="#2-æ¢¯åº¦ä¸‹é™ç®—æ³•çš„å±€é™æ€§" class="headerlink" title="2. æ¢¯åº¦ä¸‹é™ç®—æ³•çš„å±€é™æ€§"></a>2. æ¢¯åº¦ä¸‹é™ç®—æ³•çš„å±€é™æ€§</h5><p>é¦–å…ˆï¼Œ<strong>æ¢¯åº¦ä¸‹é™ç®—æ³•å®¹æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜ï¼Œæ‰¾ä¸åˆ°å…¨å±€æœ€ä¼˜è§£</strong>ã€‚</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå½“æ¢¯åº¦ä¸‹é™ç®—æ³•ä¼˜åŒ–åˆ°local minima æ—¶ï¼Œå‰é¢æœ‰åº§é«˜å±±ï¼Œå®ƒçš„æ¢¯åº¦æ˜¯æ­£çš„ï¼Œä¼˜åŒ–ç®—æ³•ä¼šå¼ºè¿«æˆ‘ä»¬å¾€å›èµ°ã€‚</p><p><img src="/2022/10/10/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-P1/æ¢¯åº¦ä¸‹é™ç®—æ³•å±€éƒ¨æœ€ä¼˜.png" alt></p><p><img src="/2022/10/10/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-P1/æ¢¯åº¦ä¸‹é™å±€éƒ¨æœ€ä¼˜2.png" alt></p><p>è¿™ä¸ªé—®é¢˜åœ¨æˆ‘ä»¬çš„çº¿æ€§å›å½’æ¨¡å‹é‡Œæš‚æ—¶é‡ä¸åˆ°ï¼Œå› ä¸ºçº¿æ€§æ¨¡å‹éå¸¸ç®€å•ï¼Œæ˜¯ä¸€ä¸ªå‡¸å‡½æ•°ã€‚ä½†å½“æˆ‘ä»¬è¯•å›¾åˆ©ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•è®­ç»ƒå¤æ‚æ¨¡å‹ï¼Œæ¯”å¦‚ç¥ç»ç½‘ç»œæ—¶ï¼Œå°±å¾ˆæœ‰å¯èƒ½é­é‡è¯¥é—®é¢˜ã€‚</p><p>æœ‰å¾ˆå¤šæ–¹æ³•èƒ½å¤Ÿè§£å†³æ¢¯åº¦ä¸‹é™ç®—æ³•çš„å…¨å±€æœ€ä¼˜è§£é—®é¢˜ï¼ŒåŒ…æ‹¬è°ƒæ•´æ¯æ¬¡è¡Œè¿›çš„æ­¥é•¿$\eta$ï¼Œä½¿å…¶æ›´æœ‰å¸Œæœ›è·¨è¶Šâ€œå¤§å±±â€ç­‰æ‰‹æ®µç­‰ç­‰ã€‚</p><p>å…¶æ¬¡ï¼Œæ¢¯åº¦ä¸‹é™ç®—æ³•è¦æ±‚ç›®æ ‡å‡½æ•°æ˜¯å¯å¾®çš„ï¼Œè¿™åœ¨æŸäº›æƒ…å†µä¸‹ä¼š<strong>äº§ç”Ÿç›¸å½“å¤§çš„è®¡ç®—ä»£ä»·</strong>ã€‚å‡è®¾æˆ‘ä»¬çš„é—®é¢˜æœ‰ä¸Šç™¾ä¸‡ç»´ï¼Œè®¡ç®—äºŒé˜¶åå¯¼æ•°å°±éœ€è¦ä¸Šä¸‡äº¿ï¼ˆç™¾ä¸‡çš„å¹³æ–¹ï¼‰æ¬¡ï¼</p><p>å†æ¬¡ï¼Œ<strong>å½“è®­ç»ƒæ•°æ®ç›¸å½“å¤šæ—¶ï¼Œæ¢¯åº¦ä¸‹é™ç®—æ³•ä¼šå˜å¾—å¾ˆæ…¢</strong>ã€‚åœ¨å®è·µä¸­ï¼Œä¸ºäº†è®¡ç®—æ¢¯åº¦$\nabla L$ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºäº†æ¯ä¸ªè®­ç»ƒæ ·æœ¬xå•ç‹¬è®¡ç®—æ¢¯åº¦$\nabla L_x$ï¼Œç„¶åæ±‚å¹³å‡å€¼ã€‚è¿™ä¼šèŠ±è´¹å¾ˆé•¿æ—¶é—´ã€‚</p><h4 id="æ£€éªŒï¼šå¦‚ä½•æ£€éªŒæ¨¡å‹æ˜¯å¦è®­ç»ƒæˆåŠŸï¼Ÿæ›´åŠ å¤æ‚çš„æ¨¡å‹ä»¥åŠå¯¹åº”çš„é£é™©ã€‚"><a href="#æ£€éªŒï¼šå¦‚ä½•æ£€éªŒæ¨¡å‹æ˜¯å¦è®­ç»ƒæˆåŠŸï¼Ÿæ›´åŠ å¤æ‚çš„æ¨¡å‹ä»¥åŠå¯¹åº”çš„é£é™©ã€‚" class="headerlink" title="æ£€éªŒï¼šå¦‚ä½•æ£€éªŒæ¨¡å‹æ˜¯å¦è®­ç»ƒæˆåŠŸï¼Ÿæ›´åŠ å¤æ‚çš„æ¨¡å‹ä»¥åŠå¯¹åº”çš„é£é™©ã€‚"></a>æ£€éªŒï¼šå¦‚ä½•æ£€éªŒæ¨¡å‹æ˜¯å¦è®­ç»ƒæˆåŠŸï¼Ÿæ›´åŠ å¤æ‚çš„æ¨¡å‹ä»¥åŠå¯¹åº”çš„é£é™©ã€‚</h4><p>ç»è¿‡ä¸€è½®åˆä¸€è½®çš„ä¼˜åŒ–ï¼Œæˆ‘ä»¬ç»ˆäºæ±‚å¾—äº†è¯¥é—®é¢˜ä¸‹çº¿æ€§å›å½’æ¨¡å‹çš„æœ€ä¼˜å‚æ•°$w$å’Œ$b$ã€‚æ¥ä¸‹æ¥è¯¥å¦‚ä½•æ£€éªŒæ¨¡å‹åœ¨æœªçŸ¥æ•°æ®ä¸Šçš„æ³›åŒ–èƒ½åŠ›å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥åœ¨è®­ç»ƒä¹‹å‰ï¼ŒæŠŠæ•°æ®é›†åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†ç”¨ä½œåç»­çš„è®­ç»ƒï¼Œå¦ä¸€éƒ¨åˆ†ç”¨ä½œæœ€åçš„éªŒæ”¶ã€‚å¦‚æœåœ¨è¿™éƒ¨åˆ†æµ‹è¯•æ•°æ®ä¸Šçš„è¡¨ç°ä¸è®­ç»ƒè¿‡ç¨‹ä¸­çš„è¡¨ç°ä¸€è‡´ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥éªŒæ”¶ã€‚</p><p>è¿™ç§é€šè¿‡åˆ’åˆ†æ•°æ®é›†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„æ–¹æ³•ï¼Œä¸å…¶è¯´æ˜¯ä¸€ç§æŠ€æœ¯ç»†èŠ‚ï¼Œä¸å¦‚è¯´æ˜¯ä¸€ç§å·¥ç¨‹å®è·µä¸Šçš„ç»éªŒã€‚é€šè¿‡è®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„æ€§èƒ½æ¯”è¾ƒï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°æ¨¡å‹å­˜åœ¨çš„æ½œåœ¨é—®é¢˜ï¼š</p><p><strong>1. è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸Šçš„è¡¨ç°éƒ½ä¸å¤ªé«˜ï¼›</strong></p><p>è¿™ç§æƒ…å†µæˆ‘ä»¬ç§°ä¹‹ä¸ºæ¬ æ‹Ÿåˆã€‚çº¿æ€§æ¨¡å‹ç”±äºè¿‡äºç®€å•ï¼Œå½“é¢å¯¹ä¸€äº›è¾ƒå¤æ‚çš„ç°å®é—®é¢˜æ—¶ï¼Œæ¬ æ‹Ÿåˆä¾¿å‡ºç°äº†ã€‚ä½ ä¼šå‘ç°æ— è®ºå¦‚ä½•è®­ç»ƒï¼Œæ— è®ºæŠ•å…¥å¤šå°‘æ•°æ®éƒ½å¾ˆéš¾æå‡æ¨¡å‹çš„æ€§èƒ½äº†ã€‚æˆ‘ä»¬éœ€è¦æ›´åŠ å¤æ‚çš„æ¨¡å‹ï¼Œç„¶åè¿›è¡Œä¸Šé¢æ‰€è¯´çš„æœºå™¨å­¦ä¹ ä¸‰ä¸ªæ­¥éª¤ï¼šé€‰æ‹©æ–°æ¨¡å‹ï¼Œé€‰æ‹©åˆé€‚çš„æŸå¤±å‡½æ•°ï¼Œé€‰æ‹©ä¼˜åŒ–æ–¹æ³•è¿›è¡Œè®­ç»ƒã€‚</p><p>å¯¹äºä¸€äº›ç°å®é—®é¢˜ï¼Œç±»ä¼¼$y=wx+b$è¿™ç§ä¸€æ¬¡æ¨¡å‹ç¡®å®è¿‡äºç®€å•äº†ã€‚æ¯”å¦‚é¢„æµ‹æˆ¿ä»·ï¼Œå¯èƒ½ä¸æˆ¿å±‹é¢ç§¯æœ‰å…³ï¼Œä¹Ÿå¯ä»¥ä¸æˆ¿å±‹é¢ç§¯çš„å¹³æ–¹æœ‰å…³ï¼Œç”šè‡³æ˜¯ä¸‰æ¬¡æ–¹ã€å››æ¬¡æ–¹ã€‚</p><p>è¯¾å ‚ä¸Šè€å¸ˆä¸¾äº†ä¸€ä¸ªä¾‹å­ï¼Œç”¨ä¸€æ¬¡å‡½æ•°æ¨¡å‹é¢„æµ‹å®å¯æ¢¦æ•°æ®é›†ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2022/10/10/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-P1/å®å¯æ¢¦1.png" alt></p><p>æ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šçš„è¯¯å·®å¹³å‡å€¼ä¸º 35.0</p><p>å½“æˆ‘ä»¬ä½¿ç”¨æ›´å¤æ‚çš„2æ¬¡æ¨¡å‹æ—¶ï¼Œæ¨¡å‹æ€§èƒ½æœ‰æ˜æ˜¾å¥½è½¬ï¼š</p><p><img src="/2022/10/10/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-P1/å®å¯æ¢¦2.png" alt></p><p>æ¨¡å‹çš„å›¾åƒä»ä¸€æ¬¡å‡½æ•°å˜ä¸ºäºŒæ¬¡å‡½æ•°äº†ï¼Œæ›´å¥½æ‹Ÿåˆäº†è®­ç»ƒé›†å’Œæµ‹è¯•é›†ã€‚æµ‹è¯•é›†å¹³å‡è¯¯å·®é™è‡³ 18.4 äº†ã€‚é‚£æ˜¯ä¸æ˜¯æ¨¡å‹è¶Šå¤æ‚ï¼Œæ€§èƒ½è¶Šå¥½å‘¢ï¼Ÿ</p><p><strong>2. è®­ç»ƒé›†ä¸Šçš„è¡¨ç°è‰¯å¥½ï¼Œæµ‹è¯•é›†ä¸Šçš„è¡¨ç°å¾ˆå·®</strong></p><p>å½“æˆ‘ä»¬æŒç»­ä¼˜åŒ–æ¨¡å‹å¤æ‚åº¦åˆ°3æ¬¡æ–¹å‡½æ•°ã€4æ¬¡æ–¹å‡½æ•°æ—¶ï¼Œæµ‹è¯•é›†å¹³å‡è¯¯å·®å¼€å§‹åœæ»ï¼Œ4æ¬¡æ–¹å‡½æ•°çš„å¹³å‡è¯¯å·®ä¸é™åå¢ï¼š</p><p><img src="/2022/10/10/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-P1/å®å¯æ¢¦3.png" alt></p><p><img src="/2022/10/10/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-P1/å®å¯æ¢¦4.png" alt></p><p>è®­ç»ƒé›†å¹³å‡è¯¯å·®ã€15.4ã€‘ã€15.3ã€‘ã€14.9ã€‘ã€12.8ã€‘<br>æµ‹è¯•é›†å¹³å‡è¯¯å·®ã€18.4ã€‘ã€18.1ã€‘ã€28.8ã€‘ã€232.1ã€‘</p><p>è¿™ç§æƒ…å†µç§°ä¹‹ä¸ºè¿‡æ‹Ÿåˆã€‚æ‰€è°“â€œè¿‡çŠ¹ä¸åŠâ€ï¼Œé‚£æˆ‘ä»¬åº”è¯¥æ€æ ·é€‰æ‹©æ¨¡å‹çš„å¤æ‚åº¦ï¼Œé¿å…è¿‡æ‹Ÿåˆå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å°†æ¨¡å‹å¤æ‚åº¦ä¸æµ‹è¯•é›†æ€§èƒ½ä¹‹é—´çš„å…³ç³»ç»˜åˆ¶æˆå›¾åƒï¼Œé€šè¿‡å¯»æ‰¾å›¾åƒçš„â€œæ‹ç‚¹â€æ¥å†³å®šæ¨¡å‹çš„å¤æ‚åº¦ã€‚</p><p><img src="/2022/10/10/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-P1/å®å¯æ¢¦æ€§èƒ½å˜åŒ–.png" alt></p><h4 id="åæ€ï¼šæ”¹è¿›æ¨¡å‹æ€§èƒ½çš„å…¶ä»–æ–¹æ³•"><a href="#åæ€ï¼šæ”¹è¿›æ¨¡å‹æ€§èƒ½çš„å…¶ä»–æ–¹æ³•" class="headerlink" title="åæ€ï¼šæ”¹è¿›æ¨¡å‹æ€§èƒ½çš„å…¶ä»–æ–¹æ³•"></a>åæ€ï¼šæ”¹è¿›æ¨¡å‹æ€§èƒ½çš„å…¶ä»–æ–¹æ³•</h4><p>ä¸Šé¢çš„å®å¯æ¢¦CPå€¼é¢„æµ‹é—®é¢˜ï¼Œè€å¸ˆä¹‹åç»™å‡ºäº†æ›´å¤šçš„æ•°æ®ï¼Œç»˜åˆ¶åœ¨åæ ‡å›¾ä¸Šï¼š</p><p><img src="/2022/10/10/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-P1/å®å¯æ¢¦5.png" alt></p><p>å¾ˆæ˜¾ç„¶ï¼Œä»»ä½•æ›²çº¿çš„çº¿æ€§æ¨¡å‹éƒ½æ²¡åŠæ³•æ‹Ÿåˆè¿™ç§æ•°æ®ç‚¹ã€‚è¿™æ˜¯å“ªé‡Œå‡ºäº†é—®é¢˜ï¼Ÿç­”æ¡ˆæ˜¯æˆ‘ä»¬å¿½ç•¥äº†æ•°æ®ç‚¹çš„å…¶ä»–ç‰¹å¾ã€‚å½“æˆ‘ä»¬å¼•å…¥å…¶ä»–ç‰¹å¾åˆ°æ¨¡å‹åï¼Œçº¿æ€§æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›å°±å¢å¼ºäº†ã€‚ä¸‹é¢å°±æ˜¯å¼•å…¥äº†å®å¯æ¢¦ç§ç±»çš„ç‰¹å¾ï¼š</p><p><img src="/2022/10/10/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-P1/å®å¯æ¢¦6.png" alt></p><p>ä½†æ˜¯å½“æˆ‘ä»¬ç»§ç»­å¼•å…¥ä¸€äº›æ— å…³ç‰¹å¾ï¼Œæ¯”å¦‚å®å¯æ¢¦çš„æ€§åˆ«ã€å¹´é¾„ç­‰ï¼Œè¿‡æ‹Ÿåˆç°è±¡å†æ¬¡å‡ºç°ï¼š</p><p><img src="/2022/10/10/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-P1/å®å¯æ¢¦7.png" alt></p><p>è¿™æ˜¯ç”±äºåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼ŒæŸäº›ç‰¹å¾çš„æƒé‡è¿‡å¤§å¯¼è‡´çš„ã€‚ä¸€ç§ç›´è§‚çš„è§£é‡Šæ˜¯ï¼Œæ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¹Ÿä¼šå·æ‡’ï¼å¦‚æœæ•°æ®é‡ä¸è¶³ï¼Œæ¨¡å‹ä¼šè‡ªåŠ¨é€‰å–æŸå‡ ä¸ªå½±å“åŠ›å¤§çš„ç‰¹å¾ï¼Œèµ‹äºˆè¾ƒé«˜çš„æƒå€¼ï¼Œç„¶åå¿½ç•¥å…¶ä»–ç‰¹å¾ï¼Œé‚£äº›è¢«å¿½ç•¥çš„ç‰¹å¾ä¸­å¯èƒ½åŒ…å«æ›´åŠ æœ‰ç”¨çš„ä¿¡æ¯ã€‚</p><p>æˆ‘ä»¬å¸Œæœ›æœ€ç»ˆå¾—åˆ°çš„æ¨¡å‹ä¸è¦å‡ºç°å¤ªå¤§çš„æƒé‡ï¼Œä¸ºäº†é˜²æ­¢æŸäº›ç‰¹å¾çš„æƒå€¼è¿‡å¤§ï¼Œé™åˆ¶æƒé‡çš„å¢é•¿é€Ÿåº¦ï¼Œå¯ä»¥ä½¿ç”¨æ­£åˆ™åŒ–æ–¹æ³•ã€‚</p><p><img src="/2022/10/10/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9D%8E%E5%AE%8F%E6%AF%852019ML%E8%AF%BE%E7%A8%8B-P1/æ­£åˆ™åŒ–1.png" alt></p><p>æ”¹é€ åçš„æŸå¤±å‡½æ•°ï¼Œæœ«å°¾æ·»åŠ ä¸Šäº†ä¸€ä¸ªæ­£åˆ™åŒ–é¡¹ï¼Œè¿™ä¸ªæ­£åˆ™åŒ–é¡¹çš„å¤§å°ä»…ä¸æ¨¡å‹çš„å‚æ•°å¤§å°æœ‰å…³ã€‚å‚æ•°è¶Šå¤§ï¼Œæ­£åˆ™åŒ–é¡¹è¶Šå¤§ã€‚æœ‰äº†æ­£åˆ™åŒ–é¡¹ï¼Œæ¨¡å‹åœ¨ä¼˜åŒ–è¿‡ç¨‹å°±ä¼šæ›´å€¾å‘äºé€‰æ‹©å‚æ•°å€¼æ›´å°çš„æ¨¡å‹äº†ã€‚</p><p>åœ¨å¾ˆå¤šåº”ç”¨åœºæ™¯ä¸­ï¼Œå¹¶ä¸æ˜¯ $w$ è¶Šå°æ¨¡å‹è¶Šå¹³æ»‘è¶Šå¥½ï¼Œä½†æ˜¯ç»éªŒå€¼å‘Šè¯‰æˆ‘ä»¬ $w$ è¶Šå°å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ˜¯å¥½çš„ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ol><li>æœºå™¨å­¦ä¹ çš„æ¦‚å¿µã€åˆ†ç±»å’Œä¸‰ä¸ªæ­¥éª¤ï¼šé€‰æ‹©æ¨¡å‹ã€é€‰æ‹©æŸå¤±å‡½æ•°ã€é€‰æ‹©ä¼˜åŒ–æ–¹æ³•ï¼›</li><li>æ ¹æ®ä¸‰ä¸ªæ­¥éª¤ï¼Œå®è·µè§£å†³å›å½’é—®é¢˜ï¼šä½¿ç”¨çº¿æ€§æ¨¡å‹ï¼Œè§£å†³å®å¯æ¢¦CPå€¼é¢„æµ‹é—®é¢˜ï¼›</li></ol><p>è¿™é‡Œçš„é‡ç‚¹æ˜¯æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œåé¢è¿˜ä¼šç»§ç»­å­¦ä¹ è¯¥ç®—æ³•ã€‚</p><ol><li>é€šè¿‡åˆ†æä¾‹å­çš„ä¼˜åŒ–ç‚¹ï¼Œå¼•å‡ºæ¨¡å‹å¸¸ç”¨çš„ä¼˜åŒ–æ–¹æ³•ä»¥åŠé£é™©ï¼šè¿‡æ‹Ÿåˆã€æ¬ æ‹Ÿåˆï¼Œä»¥åŠä»–ä»¬çš„è§£å†³æ–¹æ¡ˆã€‚</li></ol><p>è¿‡æ‹Ÿåˆé—®é¢˜çš„è§£å†³æ–¹æ³•æœ‰ï¼šé™ä½æ¨¡å‹å¤æ‚åº¦ã€å¢åŠ è®­ç»ƒæ ·æœ¬ã€å¢åŠ è®­ç»ƒæ ·æœ¬çš„ç‰¹å¾ã€æ·»åŠ æ­£åˆ™åŒ–é¡¹ç­‰ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
      <tag>MOOC</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘æœºå™¨å­¦ä¹ ç¼–è¯‘â€”â€”Note2</title>
    <link href="/2022/09/13/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%BC%96%E8%AF%91%E2%80%94%E2%80%94Note2/"/>
    <url>/2022/09/13/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%BC%96%E8%AF%91%E2%80%94%E2%80%94Note2/</url>
    
    <content type="html"><![CDATA[<p>é™ˆå¤©å¥‡è€å¸ˆä¸»è®²çš„æœºå™¨å­¦ä¹ ç¼–è¯‘ç›¸å…³çš„è¯¾ç¨‹ï¼Œæœ¬èŠ‚è¯¾è®¨è®ºå¼ é‡ç¨‹åºæŠ½è±¡ä»¥åŠç›¸å…³å®ç°ã€‚<br><!--more---></p><p>æœºå™¨å­¦ä¹ ç¼–è¯‘çš„è¿‡ç¨‹å¯ä»¥çœ‹åšæ˜¯å¯¹å¼ é‡å‡½æ•°çš„å˜æ¢è¿‡ç¨‹ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
      <tag>Compilation</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘èŒä¸šç´ å…»</title>
    <link href="/2022/08/01/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E8%81%8C%E4%B8%9A%E7%B4%A0%E5%85%BB/"/>
    <url>/2022/08/01/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E8%81%8C%E4%B8%9A%E7%B4%A0%E5%85%BB/</url>
    
    <content type="html"><![CDATA[<p>æœ‰å…³æ–°äººåŸ¹å…»æ‰‹å†Œçš„ä¸€äº›é˜…è¯»ä½“ä¼šå’Œæ€è€ƒ<br><!--more---></p><h2 id="æ‰§è¡Œä»»åŠ¡å¹¶æ¼‚äº®åœ°å®Œæˆ"><a href="#æ‰§è¡Œä»»åŠ¡å¹¶æ¼‚äº®åœ°å®Œæˆ" class="headerlink" title="æ‰§è¡Œä»»åŠ¡å¹¶æ¼‚äº®åœ°å®Œæˆ"></a>æ‰§è¡Œä»»åŠ¡å¹¶æ¼‚äº®åœ°å®Œæˆ</h2><p>åˆ†æé—®é¢˜ã€è§£å†³é—®é¢˜æ˜¯å·¥ç¨‹å¸ˆçš„æ—¥å¸¸å·¥ä½œï¼Œå¦‚ä½•å¯¹å¾…å·¥ä½œã€å¦‚ä½•æ‰§è¡Œå·¥ä½œï¼Œåæ˜ äº†ä¸€ä¸ªå·¥ç¨‹å¸ˆçš„åŸºæœ¬ç´ è´¨ã€‚</p><p>ä¸åŒçº§åˆ«çš„å·¥ç¨‹å¸ˆé€‚åˆå¤„ç†ä¸åŒéš¾åº¦çš„ä»»åŠ¡ã€‚æ ¹æ®ä»»åŠ¡éš¾åº¦ï¼Œå¯ä»¥åˆ†ç±»ä¸ºï¼š</p><ol><li>ä»»åŠ¡å·²ç»æ‹†è§£å®Œæ¯•ï¼Œæˆ‘åªè´Ÿè´£æŸä¸ªç®€å•å­ä»»åŠ¡çš„æ‰§è¡Œï¼›</li><li>ä»»åŠ¡å·²ç»æ‹†è§£å®Œæ¯•ï¼Œæˆ‘è´Ÿè´£å„ä¸ªæ­¥éª¤çš„æ‰§è¡Œï¼Œæˆ–è€…å…¶ä¸­è¾ƒå›°éš¾çš„éƒ¨åˆ†ï¼›</li><li>å¤æ‚çš„äº‹æƒ…éœ€è¦è‡ªå·±åšæ‹†è§£ç„¶åæ‰§è¡Œã€‚</li></ol><p>ä¸€èˆ¬æˆ‘ä»¬æŠŠç®€å•çš„æ‰§è¡Œä»»åŠ¡äº¤ä»˜ç»™ T5 å·¦å³çº§åˆ«å·¥ç¨‹å¸ˆå»æ‰§è¡Œï¼ŒæŠŠå¤æ‚çš„ä»»åŠ¡äº¤ç»™ T7 å·¦å³çš„å·¥ç¨‹å¸ˆæ‰§è¡Œã€‚è€Œ T8 åŠä»¥ä¸Šçš„å·¥ç¨‹å¸ˆï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½ç‹¬ç«‹å®Œæˆä»»åŠ¡æ‹†è§£å¹¶æ‰§è¡Œã€‚T10 ä»¥ä¸Šçš„å·¥ç¨‹å¸ˆï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿæ‰¿æ‹…ä¸€ä¸ªæŠ€æœ¯æ–¹å‘ä¸Šçš„éš¾é¢˜ã€‚</p><p>æ— è®ºä»»åŠ¡éš¾åº¦å¦‚ä½•ï¼Œå·¥ç¨‹å¸ˆè¿˜æ˜¯è¦æ ¹æ®ç»“æœçš„å®Œæˆåº¦æ¥è¯„ä»·ã€‚æ ¹æ®ç»“æœåˆ†ç±»ï¼š</p><ul><li>æœ€ä½è¯„ä»·ï¼šä¸èƒ½æŒ‰æ—¶å®Œæˆä»»åŠ¡ï¼›</li><li>è¾ƒä½è¯„ä»·ï¼šæŒ‰æ—¶å®Œæˆä»»åŠ¡ï¼Œä½†æ˜¯è´¨é‡è¾ƒå·®ï¼›</li><li>åˆæ ¼è¯„ä»·ï¼šæŒ‰æ—¶å®Œæˆä»»åŠ¡ï¼Œè´¨é‡åˆæ ¼ã€‚</li></ul><h2 id="ç‹¬ç«‹æ€è€ƒ"><a href="#ç‹¬ç«‹æ€è€ƒ" class="headerlink" title="ç‹¬ç«‹æ€è€ƒ"></a>ç‹¬ç«‹æ€è€ƒ</h2><p>ä»€ä¹ˆå«åšç‹¬ç«‹æ€è€ƒï¼Ÿå·¥ä½œæ˜¯ç”±æ€è€ƒå’Œæ‰§è¡Œä¸¤éƒ¨åˆ†ç»„æˆçš„ï¼Œä»»åŠ¡çš„åˆ†æå’Œæ‹†è§£è¿‡ç¨‹ã€å‡ºç°é—®é¢˜åçš„æ€»ç»“å’Œå¤ç›˜ã€å¯¹ç°æœ‰æŠ€æœ¯æ–¹æ¡ˆçš„è°ƒç ”ï¼Œéƒ½ç®—æ˜¯ç‹¬ç«‹æ€è€ƒã€‚</p><p>æ¯”å¦‚è¯´ï¼Œå½“æˆ‘è´Ÿè´£çš„æ¨¡å—å‡ºç° Bugï¼Œæˆ–è€…æˆ‘çš„å›¢é˜Ÿè´Ÿè´£çš„æ¨¡å—æŠ¥è­¦æ—¶ï¼Œè¿›è¡Œåˆ†æé—®é¢˜ã€æ€»ç»“å’Œå¤ç›˜çš„è¿‡ç¨‹ï¼Œç®—æ˜¯ç‹¬ç«‹æ€è€ƒï¼›<br>æ¯”å¦‚è¯´ï¼Œé¡¹ç›®çš„æŠ€æœ¯æ–¹æ¡ˆä¸å¤Ÿå®Œç¾æˆ–å­˜åœ¨ç¼ºé™·ï¼Œæˆ‘å¯¹ç°æœ‰æŠ€æœ¯æ–¹æ¡ˆè¿›è¡Œè°ƒç ”ï¼Œç®—æ˜¯ç‹¬ç«‹æ€è€ƒï¼›<br>æ¯”å¦‚è¯´ï¼Œæˆ‘å¯¹é—®é¢˜è¿›è¡Œåˆ†æå’Œæ€»ç»“ï¼Œç»å¸¸åæ€æ˜¯å¦å·²ç»æ— å¯æŒ‘å‰”ã€ä¸ä¼šè¢«äººæŒ‘æ¯›ç—…ï¼Œç®—æ˜¯ç‹¬ç«‹æ€è€ƒã€‚</p><p>ç‹¬ç«‹æ€è€ƒä»£è¡¨ç€ä¸‰ä¸ªå·¥ç¨‹å¸ˆå®è´µçš„èƒ½åŠ›ï¼šè´£ä»»å¿ƒã€äº‹ä¸šå¿ƒå’Œç¡¬å®åŠ›ã€‚ä¸€ä¸ªé«˜ç»©æ•ˆçš„å·¥ç¨‹å¸ˆï¼Œå¾€å¾€æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p><ol><li>å·¥ä½œæ€åº¦ä¸Šï¼Œå¯¹ä¸šåŠ¡è´Ÿè´£ï¼Œä»æ¥ä¸ä¼šæ¶ˆææ€ å·¥ï¼Œè´Ÿè´£çš„æ¨¡å—å‡ºç°äº‹æ•…å¾ˆå°‘ï¼›</li><li>åšäº‹æ–¹æ³•ä¸Šï¼Œè§„èŒƒã€åŠæ—¶æ²Ÿé€šï¼Œäº‹æƒ…äº¤ç»™ä»–å¾ˆæ”¾å¿ƒï¼Œä¸ä¼šæŠŠè‡ªå·±å½“æˆå·¥å…·äººï¼›</li><li>åšäº‹æ•ˆç‡ä¸Šï¼Œæƒ³å¾—æ¸…æ¥šåšå¾—å¿«ï¼Œç´§æ€¥é—®é¢˜å¾—äº¤ç»™ä»–ï¼Œåšäº‹ä¸ä¼šååå¤å¤ï¼›</li><li>æŠ€æœ¯å®åŠ›ä¸Šï¼Œæ­¤æ–¹å‘çš„ä»»ä½•é—®é¢˜éƒ½å¯ä»¥å’¨è¯¢ä»–ã€‚</li></ol><h2 id="åä½œæ²Ÿé€š"><a href="#åä½œæ²Ÿé€š" class="headerlink" title="åä½œæ²Ÿé€š"></a>åä½œæ²Ÿé€š</h2><p>ä»¥ä¸Šå‡ ç‚¹æ˜¯å·¥ç¨‹å¸ˆä¸ªäººçš„èƒ½åŠ›è¯„ä»·ï¼Œä½†æ˜¯åœ¨å…¬å¸ä¸­å…ä¸äº†è¦ä¸å…¶ä»–å·¥ç¨‹å¸ˆæ‰“äº¤é“ï¼Œä¹Ÿå°±æ˜¯æ²Ÿé€šã€‚</p><p>åä½œæ²Ÿé€šæ—¶æœ‰ä¸€äº›å¸¸è§çš„é—®é¢˜ï¼Œæ–°æ‰‹å·¥ç¨‹å¸ˆå¯èƒ½ä¸å¤ªäº†è§£ï¼Œéœ€è¦ç¢ç£¨ä¸€ä¸‹ï¼›åœ¨æ­¤æˆ‘æŠŠä¸€äº›å®šå¾‹åˆ—ä¸¾å‡ºæ¥ï¼Œæ–¹ä¾¿ç›´æ¥ç…§åšï¼š</p><ol><li>æ”¶åˆ°æ¶ˆæ¯å¿…å›å¤ï¼Œå¡‘é€ æ”¶åˆ°æ¶ˆæ¯åŠæ—¶å›å¤çš„å½¢è±¡ï¼›ä¸ä»…å¦‚æ­¤ï¼Œåœ¨è‡ªå·±è´Ÿè´£é€šçŸ¥æ—¶ï¼Œä¹Ÿè¦ç¡®è®¤ç›¸å…³è´£ä»»äººæ”¶åˆ°æ¶ˆæ¯ã€‚</li><li>æ²Ÿé€šæ—¶å…ˆæƒ³å¥½è¯‰æ±‚ï¼Œé—®å¯¹äº†é—®é¢˜æ˜¯æˆåŠŸçš„ä¸€åŠï¼›è¦æœ‰ç¤¼è²Œï¼Œå…ˆå¸¦å¥½ç§°å‘¼ï¼Œå†ç»„ç»‡è¯­è¨€ï¼Œé€»è¾‘é€šé¡ºï¼›è¦ç¡®è®¤ä¸‹è§£å†³é—®é¢˜çš„æ—¶é—´èŠ‚ç‚¹ï¼Œå¹¶ä¸”å°†è®¨è®ºçš„å…±è¯†å‘åˆ°ç¾¤é‡Œè¿›è¡ŒåŒæ­¥ï¼›</li><li>è¦åŠæ—¶è·Ÿè¿›é—®é¢˜ï¼Œå°±æ¯”å¦‚è¯´å½“ä½ æ‰¾å¯¹æ–¹è¦æ—¶é—´èŠ‚ç‚¹æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°ï¼šâ€œè¿˜ä¸çŸ¥é“ï¼Œéœ€è¦è¯„ä¼°â€ã€â€œäº‹æƒ…å¤ªå¤šï¼Œä¸å¥½è¯´â€ã€ç­‰ç­‰ç±»ä¼¼çš„æ— æ³•ç»™å‡ºæ—¶é—´ç‚¹çš„æƒ…å†µï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦åŠæ—¶è·Ÿè¿›ã€‚åŠæ—¶è·Ÿè¿›çš„åšæ³•ä¸æ˜¯æ¯è¿‡ä¸€æ®µæ—¶é—´å°±é—®ä¸€æ¬¡ï¼Œé‚£æ ·å¾ˆæ‹›äººçƒ¦ï¼›æ­£ç¡®åšæ³•æ˜¯ä¸€èµ·æ‹†åˆ†é—®é¢˜ï¼Œå¯¹æ–¹ä¸€æ—¦å®Œæˆå­ä»»åŠ¡ï¼Œå°±é€šçŸ¥è‡ªå·±ã€‚</li><li>å³ä¾¿ä½ è´Ÿè´£çš„æ˜¯ä¸€ä¸ªé¡¹ç›®é‡Œçš„ä¸€å°éƒ¨åˆ†ï¼Œä½ ä¹Ÿéœ€è¦çŸ¥é“æ•´ä¸ªé¡¹ç›®çš„è®¡åˆ’èŠ‚å¥ã€‚</li></ol>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Career</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘å¦‚ä½•å®ç°æ¨¡å‹çš„çƒ­æ›´æ–°ï¼Ÿ</title>
    <link href="/2022/07/22/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%A8%A1%E5%9E%8B%E7%9A%84%E7%83%AD%E6%9B%B4%E6%96%B0%EF%BC%9F/"/>
    <url>/2022/07/22/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%A8%A1%E5%9E%8B%E7%9A%84%E7%83%AD%E6%9B%B4%E6%96%B0%EF%BC%9F/</url>
    
    <content type="html"><![CDATA[<p>é™ˆå¤©å¥‡è€å¸ˆä¸»è®²çš„æœºå™¨å­¦ä¹ ç¼–è¯‘ç›¸å…³çš„è¯¾ç¨‹ï¼Œå›ç­”äº†æœºå™¨å­¦ä¹ æ¨¡å‹æ˜¯å¦‚ä½•ä»å¼€å‘çŠ¶æ€åˆ°éƒ¨ç½²çŠ¶æ€çš„ã€‚æ•´ä¸ªè¿‡ç¨‹ç±»ä¼¼æºä»£ç åˆ°å¯æ‰§è¡Œç¨‹åºçš„ç¼–è¯‘è¿‡ç¨‹ï¼Œå› æ­¤å¾—åæœºå™¨å­¦ä¹ ç¼–è¯‘ã€‚æ®ä»–æœ¬äººæ‰€è¿°ï¼Œè¿™é—¨è¯¾æ˜¯ç›®å‰å…¨ä¸–ç•Œç¬¬ä¸€é—¨ä¸»è®²æœºå™¨å­¦ä¹ ç¼–è¯‘çš„è¯¾ç¨‹ã€‚<br><!--more---></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
      <tag>Compilation</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘æœºå™¨å­¦ä¹ ç¼–è¯‘â€”â€”Note1</title>
    <link href="/2022/07/04/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%BC%96%E8%AF%91%E2%80%94%E2%80%94Note1/"/>
    <url>/2022/07/04/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%BC%96%E8%AF%91%E2%80%94%E2%80%94Note1/</url>
    
    <content type="html"><![CDATA[<p>é™ˆå¤©å¥‡è€å¸ˆä¸»è®²çš„æœºå™¨å­¦ä¹ ç¼–è¯‘ç›¸å…³çš„è¯¾ç¨‹ï¼Œå›ç­”äº†æœºå™¨å­¦ä¹ æ¨¡å‹æ˜¯å¦‚ä½•ä»å¼€å‘çŠ¶æ€åˆ°éƒ¨ç½²çŠ¶æ€çš„ã€‚æ•´ä¸ªè¿‡ç¨‹ç±»ä¼¼æºä»£ç åˆ°å¯æ‰§è¡Œç¨‹åºçš„ç¼–è¯‘è¿‡ç¨‹ï¼Œå› æ­¤å¾—åæœºå™¨å­¦ä¹ ç¼–è¯‘ã€‚æ®ä»–æœ¬äººæ‰€è¿°ï¼Œè¿™é—¨è¯¾æ˜¯ç›®å‰å…¨ä¸–ç•Œç¬¬ä¸€é—¨ä¸»è®²æœºå™¨å­¦ä¹ ç¼–è¯‘çš„è¯¾ç¨‹ã€‚<br><!--more---></p><p>ã€Šæœºå™¨å­¦ä¹ ç¼–è¯‘ã€‹æ˜¯é™ˆå¤©å¥‡è€å¸ˆçš„å…¬å¼€è¯¾ã€‚ç›®å‰åœ¨Bilibiliä¸Šæ›´æ–°è§†é¢‘ã€‚<a href="https://space.bilibili.com/1663273796">è¿™é‡Œ</a>æ˜¯é™ˆå¤©å¥‡è€å¸ˆåœ¨Bilibiliçš„ä¸ªäººä¸»é¡µï¼Œå¦‚æœå¯¹è¯¾ç¨‹æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å…è´¹è§‚æ‘©ã€‚</p><p>å¦å¤–è¯¾ä»¶åœ°å€åœ¨è¿™é‡Œï¼š<a href="https://mlc.ai/zh/chapter_introduction/">Machine Learning Compilation</a></p><h1 id="ä¸€ã€ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ç¼–è¯‘ï¼Ÿå­¦ä¹ è¿™é—¨è¯¾çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ç¼–è¯‘ï¼Ÿå­¦ä¹ è¿™é—¨è¯¾çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ç¼–è¯‘ï¼Ÿå­¦ä¹ è¿™é—¨è¯¾çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ç¼–è¯‘ï¼Ÿå­¦ä¹ è¿™é—¨è¯¾çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p><strong>æœºå™¨å­¦ä¹ ç¼–è¯‘</strong> (machine learning compilation, MLC) æ˜¯æŒ‡ï¼Œå°†æœºå™¨å­¦ä¹ ç®—æ³•ä»å¼€å‘é˜¶æ®µï¼Œé€šè¿‡å˜æ¢å’Œä¼˜åŒ–ç®—æ³•ï¼Œä½¿å…¶å˜æˆéƒ¨ç½²çŠ¶æ€ã€‚</p><p>å¼€å‘é˜¶æ®µï¼šç”¨ PyTorchã€TensorFlow æˆ– JAX ç­‰é€šç”¨æ¡†æ¶ç¼–å†™çš„æ¨¡å‹æè¿° + å¯¹åº”çš„æƒé‡æ–‡ä»¶ã€‚</p><p>éƒ¨ç½²çŠ¶æ€ï¼šåœ¨è€ƒè™‘æ”¯æ’‘ä»£ç ã€å†…å­˜ç®¡ç†ã€ä¸åŒè¯­è¨€çš„å¼€å‘æ¥å£ç­‰å› ç´ åï¼ŒæˆåŠŸæ‰§è¡Œåœ¨è®¾å¤‡ä¸Šçš„çŠ¶æ€ã€‚</p><p>è¯¥è¿‡ç¨‹ç±»ä¼¼äºæŠŠæºä»£ç è½¬æ¢ä¸ºå¯æ‰§è¡Œæ–‡ä»¶çš„ç¨‹åºç¼–è¯‘è¿‡ç¨‹ï¼Œä½†æ˜¯äºŒè€…æœ‰æ¯”è¾ƒå¤§çš„ä¸åŒã€‚</p><p>é¦–å…ˆæ˜¯ç›®æ ‡ä¸åŒï¼Œæœºå™¨å­¦ä¹ ç¼–è¯‘çš„ç›®æ ‡æœ‰ï¼š</p><ul><li>é›†æˆæ‰“åŒ… + æœ€å°åŒ–ä¾èµ–ï¼Œå³å°†å¿…è¦çš„å…ƒç´ ç»„åˆåœ¨ä¸€èµ·ä»¥ç”¨äºéƒ¨ç½²åº”ç”¨ç¨‹åºï¼›</li><li>åˆ©ç”¨ç¡¬ä»¶åŠ é€Ÿï¼Œåˆ©ç”¨ç¡¬ä»¶æœ¬èº«çš„ç‰¹æ€§è¿›è¡ŒåŠ é€Ÿï¼›</li><li>é€šç”¨ä¼˜åŒ–ï¼Œä»¥æœ€å°åŒ–å†…å­˜ä½¿ç”¨æˆ–æé«˜æ‰§è¡Œæ•ˆç‡ä¸ºç›®æ ‡è½¬æ¢æ¨¡å‹æ‰§è¡Œæ–¹å¼ã€‚</li></ul><p>è¿™äº›ç›®æ ‡æ²¡æœ‰ä¸¥æ ¼çš„ç•Œé™ã€‚</p><p>å…¶æ¬¡ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸ä¸€å®šæ¶‰åŠä»£ç ç”Ÿæˆï¼›ä¾‹å¦‚å°†å¼€å‘çŠ¶æ€è½¬åŒ–ä¸ºéƒ¨ç½²å½¢å¼ï¼Œå¯èƒ½åªæ˜¯å°†æŠ½è±¡çš„æ¨¡å‹å®šä¹‰ï¼Œè½¬åŒ–ä¸ºå¯¹æŸå‡ ä¸ªé¢„å®šä¹‰çš„åº“å‡½æ•°çš„è°ƒç”¨ã€‚</p><p>æœ€åï¼Œé‡åˆ°çš„æŒ‘æˆ˜å’Œè§£å†³æ–¹æ¡ˆä¹Ÿå¤§ä¸ç›¸åŒã€‚éšç€ç¡¬ä»¶å’Œæ¨¡å‹ç§ç±»çš„å¢é•¿ï¼Œæœºå™¨å­¦ä¹ ç¼–è¯‘éš¾ä»¥è¡¨ç¤ºå•ä¸€ç¨³å®šçš„è§£å†³æ–¹æ¡ˆã€‚</p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬èƒ½å¤Ÿä»è¿™é—¨è¯¾å­¦ä¹ åˆ°ä»€ä¹ˆï¼Ÿ</p><p>å¯¹äºåœ¨ä»äº‹æœºå™¨å­¦ä¹ å·¥ä½œå·¥ç¨‹å¸ˆï¼Œæœºå™¨å­¦ä¹ ç¼–è¯‘æä¾›äº†ä»¥åŸºç¡€çš„è§£å†³é—®é¢˜çš„æ–¹æ³•å’Œå·¥å…·ã€‚å®ƒæœ‰åŠ©äºå›ç­”æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä»€ä¹ˆæ–¹æ³•æ¥ç‰¹å®šæ¨¡å‹çš„éƒ¨ç½²å’Œå†…å­˜æ•ˆç‡ï¼Œå¦‚ä½•å°†ä¼˜åŒ–æ¨¡å‹çš„å•ä¸ªéƒ¨åˆ†çš„ç»éªŒæ¨å¹¿åˆ°æ›´ç«¯åˆ°ç«¯è§£å†³æ–¹æ¡ˆç­‰ä¸€ç³»åˆ—é—®é¢˜ã€‚</p><p>å¯¹äºæœºå™¨å­¦ä¹ ç§‘å­¦å®¶ï¼Œå­¦ä¹ æœºå™¨å­¦ä¹ ç¼–è¯‘å¯ä»¥æ›´æ·±å…¥åœ°äº†è§£å°†æ¨¡å‹æŠ•å…¥ç”Ÿäº§æ‰€éœ€çš„æ­¥éª¤ã€‚æœºå™¨å­¦ä¹ æ¡†æ¶æœ¬èº«éšè—äº†ä¸€äº›æŠ€æœ¯å¤æ‚æ€§ï¼Œä½†æ˜¯å½“æˆ‘ä»¬å°è¯•å¼€å§‹éƒ¨ç½²æ–°æ¨¡å‹æˆ–å°†æ¨¡å‹éƒ¨ç½²åˆ°æ¡†æ¶æ”¯æŒä¸å®Œå–„çš„å¹³å°æ—¶ï¼Œä»ç„¶ä¼šé¢ä¸´å·¨å¤§çš„æŒ‘æˆ˜ã€‚æœºå™¨å­¦ä¹ ç¼–è¯‘ä½¿æœºå™¨å­¦ä¹ ç®—æ³•ç§‘å­¦å®¶æœ‰æœºä¼šäº†è§£èƒŒåçš„åŸºæœ¬åŸç†ï¼Œå¹¶ä¸”çŸ¥æ™“ä¸ºä»€ä¹ˆæˆ‘çš„æ¨¡å‹çš„è¿è¡Œé€Ÿåº¦ä¸åŠé¢„æœŸï¼Œä»¥åŠå¦‚ä½•æ¥ä½¿éƒ¨ç½²æ›´æœ‰æ•ˆã€‚</p><p>æœ€åï¼Œå­¦ä¹  MLC æœ¬èº«å¾ˆæœ‰è¶£ã€‚å€ŸåŠ©è¿™å¥—ç°ä»£æœºå™¨å­¦ä¹ ç¼–è¯‘å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥è¿›å…¥æœºå™¨å­¦ä¹ æ¨¡å‹ä»é«˜çº§ã€ä»£ç ä¼˜åŒ–åˆ°è£¸æœºçš„å„ä¸ªé˜¶æ®µã€‚ç«¯åˆ°ç«¯ (end to end) åœ°äº†è§£è¿™é‡Œå‘ç”Ÿçš„äº‹æƒ…å¹¶ä½¿ç”¨å®ƒä»¬æ¥è§£å†³æˆ‘ä»¬çš„é—®é¢˜ã€‚</p><h1 id="äºŒã€æœºå™¨å­¦ä¹ ç¼–è¯‘çš„å…³é”®è¦ç´ "><a href="#äºŒã€æœºå™¨å­¦ä¹ ç¼–è¯‘çš„å…³é”®è¦ç´ " class="headerlink" title="äºŒã€æœºå™¨å­¦ä¹ ç¼–è¯‘çš„å…³é”®è¦ç´ "></a>äºŒã€æœºå™¨å­¦ä¹ ç¼–è¯‘çš„å…³é”®è¦ç´ </h1><h2 id="1-å¼ é‡å’Œå¼ é‡å‡½æ•°"><a href="#1-å¼ é‡å’Œå¼ é‡å‡½æ•°" class="headerlink" title="1. å¼ é‡å’Œå¼ é‡å‡½æ•°"></a>1. å¼ é‡å’Œå¼ é‡å‡½æ•°</h2><p>å¼ é‡ (Tensor) æ˜¯æ‰§è¡Œä¸­æœ€é‡è¦çš„å…ƒç´ ã€‚å¼ é‡æ˜¯è¡¨ç¤ºç¥ç»ç½‘ç»œæ¨¡å‹æ‰§è¡Œçš„è¾“å…¥ã€è¾“å‡ºå’Œä¸­é—´ç»“æœçš„å¤šç»´æ•°ç»„ã€‚</p><p>å¼ é‡å‡½æ•° (Tensor functions) æŒ‡æ¥å—å¼ é‡å’Œè¾“å‡ºå¼ é‡çš„è®¡ç®—åºåˆ—ã€‚</p><p>ä¸‹é¢è¿™å¼ å›¾å±•ç¤ºäº†æœºå™¨å­¦ä¹ ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œä¸¤ç§ä¸åŒå½¢å¼çš„å¼ é‡å‡½æ•°çš„å˜æ¢è¿‡ç¨‹ã€‚ä»å·¦è¾¹æ¯”è¾ƒæŠ½è±¡çš„è¡¨ç¤ºå½¢å¼ï¼Œè½¬æ¢ä¸ºå³ä¾§è¾ƒä¸ºå…·ä½“çš„è¡¨ç¤ºå½¢å¼ã€‚</p><p><img src="https://mlc.ai/zh/_images/mlc-elem-transform.png" alt="æœºå™¨å­¦ä¹ ç¼–è¯‘è¿‡ç¨‹ä¸­çš„å¼ é‡å‡½æ•°å˜æ¢"></p><p>æœºå™¨å­¦ä¹ ç¼–è¯‘çš„è¿‡ç¨‹å°±æ˜¯æ˜¯å°†ä¸Šå›¾å·¦ä¾§çš„å†…å®¹è½¬æ¢ä¸ºå³ä¾§çš„è¿‡ç¨‹ã€‚åœ¨ä¸åŒçš„åœºæ™¯ä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥æ˜¯æ‰‹åŠ¨å®Œæˆçš„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€äº›è‡ªåŠ¨è½¬æ¢å·¥å…·ï¼Œæˆ–ä¸¤è€…å…¼è€Œæœ‰ä¹‹ã€‚</p><h2 id="2-æŠ½è±¡å’Œå®ç°"><a href="#2-æŠ½è±¡å’Œå®ç°" class="headerlink" title="2. æŠ½è±¡å’Œå®ç°"></a>2. æŠ½è±¡å’Œå®ç°</h2><p>ä¸Šä¸€éƒ¨åˆ†æåˆ°äº†æŠ½è±¡å’Œå®ç°ã€‚å¯¹äºåŒæ ·çš„ç›®æ ‡ï¼Œæˆ‘ä»¬ä¼šæœ‰ä¸åŒçš„ æŠ½è±¡è¡¨ç°ï¼Œä½†æ˜¯ä¸åŒæŠ½è±¡è¡¨ç¤ºæœ‰äº›ç»†èŠ‚ä¸åŒã€‚æˆ‘ä»¬ä¼šæŠŠæ›´ç»†åŒ–çš„æŠ½è±¡è¡¨ç¤ºç§°ä¸ºåŸæœ‰æŠ½è±¡è¡¨ç¤ºçš„ä¸€ä¸ªå…·ä½“å®ç°ã€‚</p><p>æŠ½è±¡å’Œå®ç°å¯èƒ½æ˜¯æ‰€æœ‰è®¡ç®—æœºç³»ç»Ÿä¸­æœ€é‡è¦çš„å…³é”®å­—ã€‚æŠ½è±¡æŒ‡å®šâ€œåšä»€ä¹ˆâ€ï¼Œå®ç°æä¾›â€œå¦‚ä½•â€åšã€‚æ²¡æœ‰å…·ä½“çš„ç•Œé™ã€‚æ ¹æ®æˆ‘ä»¬çš„çœ‹æ³•ï¼Œfor å¾ªç¯æœ¬èº«å¯ä»¥è¢«è§†ä¸ºä¸€ç§æŠ½è±¡ï¼Œå› ä¸ºå®ƒå¯ä»¥ä½¿ç”¨ python è§£é‡Šå™¨å®ç°æˆ–ç¼–è¯‘ä¸ºæœ¬åœ°æ±‡ç¼–ä»£ç ã€‚</p><p>MLC å®é™…ä¸Šæ˜¯åœ¨ç›¸åŒæˆ–ä¸åŒæŠ½è±¡ä¸‹è½¬æ¢å’Œç»„è£…å¼ é‡å‡½æ•°çš„è¿‡ç¨‹ã€‚</p><p>æœ¬è¯¾ç¨‹ä¼šä»‹ç»å››ç§ä¸åŒå½¢å¼çš„æŠ½è±¡è¡¨ç¤º</p><ul><li>è®¡ç®—å›¾çš„æŠ½è±¡</li><li>å¼ é‡ç¨‹åºçš„æŠ½è±¡</li><li>ç®—å­åº“å’Œè¿è¡Œæ—¶çš„æŠ½è±¡</li><li>ç¡¬ä»¶å±‚é¢çš„æŠ½è±¡</li></ul>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
      <tag>Compilation</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘æœºå™¨å­¦ä¹ ä¹‹é›†æˆæ–¹æ³•ï¼Œéšæœºæ£®æ—å’Œæ¢¯åº¦æå‡æ ‘</title>
    <link href="/2022/06/27/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E9%9B%86%E6%88%90%E6%96%B9%E6%B3%95%EF%BC%8C%E9%9A%8F%E6%9C%BA%E6%A3%AE%E6%9E%97%E5%92%8C%E6%A2%AF%E5%BA%A6%E6%8F%90%E5%8D%87%E6%A0%91/"/>
    <url>/2022/06/27/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E9%9B%86%E6%88%90%E6%96%B9%E6%B3%95%EF%BC%8C%E9%9A%8F%E6%9C%BA%E6%A3%AE%E6%9E%97%E5%92%8C%E6%A2%AF%E5%BA%A6%E6%8F%90%E5%8D%87%E6%A0%91/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¼šä»‹ç»é›†æˆæ–¹æ³•ï¼Œbagging å’Œ boosting ä¸¤ç§æ€è·¯ï¼Œä»¥åŠä¸¤ç§æ€è·¯çš„ä»£è¡¨æ€§æ¨¡å‹ï¼šéšæœºæ£®æ—å’Œæ¢¯åº¦æå‡æ ‘ã€‚</p><!--more---><p>ä¸‰ä¸ªè‡­çš®åŒ é¡¶ä¸€ä¸ªè¯¸è‘›äº®ã€‚å³ä¾¿æ˜¯å¾ˆå¤šé¢„æµ‹å‡†ç¡®ç‡ä»…å¼ºäºéšæœºçš„ä¸ªä½“å­¦ä¹ å™¨çš„ç»„åˆï¼Œç»è¿‡ä¸€å®šçš„å®‰æ’ï¼Œä¹Ÿå¯ä»¥å‘æŒ¥ä»¤äººæƒŠè®¶çš„æ•ˆæœã€‚åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œè¿™ç§çœ‹èµ·æ¥æ²¡ä»€ä¹ˆå«é‡‘é‡çš„å­¦ä¹ ç­–ç•¥ç§°ä¹‹ä¸º<strong>é›†æˆå­¦ä¹ </strong>ã€‚</p><p>é›†æˆå­¦ä¹ é¦–å…ˆéœ€è¦ä¸€ç³»åˆ—çš„ä¸ªä½“å­¦ä¹ å™¨ã€‚ä¹‹åé‡‡ç”¨æŸäº›ç­–ç•¥ç»“åˆå®ƒä»¬çš„åˆ¤æ–­ã€‚</p><h2 id="1-é›†æˆå­¦ä¹ çš„è¦æ±‚"><a href="#1-é›†æˆå­¦ä¹ çš„è¦æ±‚" class="headerlink" title="1. é›†æˆå­¦ä¹ çš„è¦æ±‚"></a>1. é›†æˆå­¦ä¹ çš„è¦æ±‚</h2><ul><li>æ„æˆé›†æˆå­¦ä¹ å™¨çš„ä¸ªä½“å­¦ä¹ å™¨ï¼Œå…¶æ€§èƒ½ä¸èƒ½å¤ªå·®ï¼Œè‡³å°‘è¦ä¸ºå¼ºäºéšæœºçš„<strong>å¼±å­¦ä¹ å™¨</strong>ã€‚å½“ç„¶å¼ºå­¦ä¹ å™¨æ›´å¥½ã€‚åœ¨æœ€åçš„ç»“æœæ±‡æ€»é˜¶æ®µï¼Œä¹Ÿä¼šæ›´å¤šå¬å–å¼ºå­¦ä¹ å™¨çš„æ„è§ã€‚</li><li>ä¸ªä½“å­¦ä¹ å™¨è¦å…·æœ‰ä¸€å®šçš„å¤šæ ·æ€§ã€‚æ¨¡å‹ä¹‹é—´çš„å·®åˆ«è¦å°½å¯èƒ½çš„å¤§ã€‚ä¸€æ–¹é¢å¯ä»¥é€šè¿‡åˆ’åˆ†ä¸åŒçš„æ•°æ®é›†ï¼Œç‹¬ç«‹è®­ç»ƒæ¥å¾—åˆ°å·®å¼‚æ€§ï¼›å¦ä¸€æ–¹é¢æˆ‘ä»¬ä¹Ÿå¯ä»¥é€‰å–ä¸åŒçš„è®­ç»ƒæ¨¡å‹ï¼Œæ¯”å¦‚SVMã€å†³ç­–æ ‘ã€é€»è¾‘å›å½’ã€‚</li></ul><h2 id="2-ä¸ºä»€ä¹ˆé›†æˆå­¦ä¹ æ•ˆæœå¥½"><a href="#2-ä¸ºä»€ä¹ˆé›†æˆå­¦ä¹ æ•ˆæœå¥½" class="headerlink" title="2. ä¸ºä»€ä¹ˆé›†æˆå­¦ä¹ æ•ˆæœå¥½"></a>2. ä¸ºä»€ä¹ˆé›†æˆå­¦ä¹ æ•ˆæœå¥½</h2><p>é›†æˆå­¦ä¹ æ³•çš„å‡†ç¡®ç‡æ¯”é›†æˆå­¦ä¹ ä¸­è¡¨ç°æœ€å¥½çš„åˆ†ç±»å™¨å‡†ç¡®ç‡è¿˜é«˜ï¼Œ<strong>è¿™ç©¶ç«Ÿæ˜¯ä¸ºä»€ä¹ˆï¼Ÿ</strong></p><p>æˆ‘ä»¬æ¥æ‰“ä¸ªæ¯”æ–¹ã€‚å‡è®¾æˆ‘æœ‰ä¸€æšç¡¬å¸ï¼Œè¿™æšç¡¬å¸ç»è¿‡åŠ å·¥å¤„ç†ï¼Œæ­£é¢æœä¸Šçš„å¯èƒ½æ€§æ¯”èƒŒé¢è¦é«˜é‚£ä¹ˆä¸€ç‚¹ç‚¹ï¼Œ51%çš„å¯èƒ½æ€§æ˜¯æ­£é¢ã€‚é—®ï¼Œå¦‚æœæˆ‘æŠ•æ·1000æ¬¡ç¡¬å¸ï¼Œæ­£é¢æœä¸Šæ¬¡æ•°å¤§äºèƒŒé¢æœä¸Šæ¬¡æ•°çš„å¯èƒ½æ€§å æ¯”å¤šå°‘ï¼Ÿä¸€ä¸‡æ¬¡å‘¢ï¼Ÿ</p><p>äº‹å®ä¸Šï¼Œ1000æ¬¡æŠ•æ·ï¼Œæœ€åæ­£é¢æ¬¡æ•°æ¯”èƒŒé¢å¤šçš„æ¦‚ç‡å°±è¾¾åˆ°äº†0.72ï¼Œå¦‚æœæŠ•æ·10000æ¬¡ï¼Œé‚£ä¹ˆå°±æ˜¯0.94ï¼Œå‡ ä¹æ˜¯å¿…ç„¶äº‹ä»¶ã€‚</p><p>å°†å…¶ç±»æ¯”åˆ°é›†æˆå­¦ä¹ ä¸­æ¥ï¼Œå¦‚æœç›¸äº’ç‹¬ç«‹çš„ä¸ªä½“å­¦ä¹ å™¨è¶³å¤Ÿå¤šï¼Œé‚£ä¹ˆæˆ‘ä»¬å¾—åˆ°æ­£ç¡®ç»“è®ºçš„æ¦‚ç‡å°†å¤§å¤§æå‡ã€‚ä¸è¿‡è¿™é‡Œæœ‰ä¸€ä¸ªæœ€å…³é”®çš„ç‚¹ï¼š<strong>æ¨¡å‹ä¹‹é—´ç›¸äº’ç‹¬ç«‹</strong>ã€‚è¿™ä¸ªè¦æ±‚å…¶å®æ˜¯è›®éš¾è¾¾åˆ°çš„ï¼Œå› ä¸ºå³ä¾¿æ˜¯ä¸åŒçš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œå¦‚æœé‡‡ç”¨ç›¸åŒæˆ–è€…ç›¸ä¼¼çš„æ•°æ®é›†è¿›è¡Œè®­ç»ƒï¼Œé‚£ä¹ˆä»–ä»¬ä¹‹é—´å¿…ç„¶å­˜åœ¨æŸç§ç›¸å…³æ€§ã€‚æ›´ä¸ç”¨è¯´è¿æ¨¡å‹éƒ½æ˜¯ä¸€æ¨¡ä¸€æ ·çš„æƒ…å†µäº†ã€‚</p><h2 id="2-Boosting"><a href="#2-Boosting" class="headerlink" title="2. Boosting"></a>2. Boosting</h2><p>Boosting ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯åˆ†å‰²è®­ç»ƒé›†ï¼Œç”¨åŒä¸€ç§æœºå™¨å­¦ä¹ ç®—æ³•å¾—åˆ°å·®å¼‚åŒ–çš„ä¸€ç³»åˆ—æ¨¡å‹ã€‚ä»åå·®-æ–¹å·®åˆ†è§£çš„è§’åº¦æ¥çœ‹ï¼Œ<strong>boosting ç®—æ³•ä¸»è¦å…³æ³¨åå·®</strong>ï¼Œå› æ­¤èƒ½ä»å¼±å­¦ä¹ å™¨æ„å»ºå‡ºå¾ˆå¼ºçš„é›†æˆã€‚</p><p>å…ˆä»åˆå§‹è®­ç»ƒé›†è®­ç»ƒå‡ºä¸€ä¸ªåŸºå­¦ä¹ å™¨ï¼Œå†æ ¹æ®åŸºå­¦ä¹ å™¨çš„è¡¨ç°å¯¹è®­ç»ƒæ ·æœ¬çš„åˆ†å¸ƒè¿›è¡Œè°ƒæ•´ï¼Œä½¿å¾—å…ˆå‰åŸºå­¦ä¹ å™¨<strong>åšé”™çš„è®­ç»ƒæ ·æœ¬</strong>åœ¨åç»­å—åˆ°æ›´å¤šåœ°å…³æ³¨ã€‚</p><p>ç„¶ååŸºäºè°ƒæ•´åçš„æ ·æœ¬åˆ†é›†åˆè®­ç»ƒä¸‹ä¸€ä¸ªåŸºå­¦ä¹ å™¨ã€‚å¦‚æ­¤åå¤è¿›è¡Œã€‚è®­ç»ƒTä¸ªåŸºå­¦ä¹ å™¨ï¼Œæœ€ç»ˆåŠ æƒæŠ•ç¥¨ã€‚</p><h3 id="2-1-Adaboost"><a href="#2-1-Adaboost" class="headerlink" title="2.1 Adaboost"></a>2.1 Adaboost</h3><p>ä»¥ AdaBoost ä¸ºä¾‹ä»‹ç» boosting ç®—æ³•ã€‚</p><p>AdaBoost ç®—æ³•æ˜¯ T ä¸ªåŸºå­¦ä¹ å™¨çš„çº¿æ€§ç»„åˆï¼š</p><script type="math/tex; mode=display">H(\boldsymbol{x})=\sum_{t=1}^{T}\alpha_{t}h_{t}(\boldsymbol{x})</script><p>å…¶ä¸­ $\alpha_{t}$ æ˜¯ç¬¬ t ä¸ªåˆ†ç±»å™¨çš„æƒé‡ã€‚</p><p>å‡è®¾è®­ç»ƒé›† $D={(\boldsymbol{x}_1,y_1),(\boldsymbol{x}_2,y_2),\dots,(\boldsymbol{x}_m,y_m)}$</p><p>åˆ™æ¯ä¸ªæ ·æœ¬çš„åˆå§‹æƒé‡ä¸º $1/m$ã€‚</p><p>å‡è®¾åŸºå­¦ä¹ å™¨ $h_t$ åœ¨æ•°æ®é›†ä¸Šçš„è¯¯å·®ä¸º $\epsilon_t$ï¼Œåˆ™å…¶æƒé‡ä¸º </p><script type="math/tex; mode=display">\alpha_t=\frac{1}{2}\ln{(\frac{1-\epsilon_t}{\epsilon_t})}</script><p>å¯¹åº”çš„ï¼Œæ•°æ®é›†ä¸­çš„æ¯ä¸ªæ ·æœ¬çš„æƒé‡ä¹Ÿè¦å‘ç”Ÿå˜åŒ–ï¼š</p><script type="math/tex; mode=display">D_{t+1}(\boldsymbol{x})=D_t(\boldsymbol{x})\times\exp{(-\alpha_t)}, \text{if  } h_t(\boldsymbol{x})=f(\boldsymbol{x}) \\D_{t+1}(\boldsymbol{x})=D_t(\boldsymbol{x})\times\exp{(\alpha_t)}, \text{if  } h_t(\boldsymbol{x})\neq f(\boldsymbol{x})</script><p>ä»¥æ­¤è¿­ä»£ç›´è‡³å¾—åˆ° T ä¸ªæ»¡è¶³è¯¯å·®ä½äºæŒ‡å®šé˜ˆå€¼çš„åˆ†ç±»å™¨ï¼Œçº¿æ€§æ±‚å’Œå³å¯ã€‚</p><p>AdaBoost åªé€‚ç”¨äºäºŒåˆ†ç±»ä»»åŠ¡ã€‚</p><h3 id="2-2-æ¢¯åº¦æå‡æ ‘"><a href="#2-2-æ¢¯åº¦æå‡æ ‘" class="headerlink" title="2.2 æ¢¯åº¦æå‡æ ‘"></a>2.2 æ¢¯åº¦æå‡æ ‘</h3><p>æ¢¯åº¦æå‡å†³ç­–æ ‘ï¼ˆGradient Boosting Decision Tree, GBDTï¼‰æ˜¯ Boosting ç®—æ³•ä¸­éå¸¸æµè¡Œçš„æ¨¡å‹ï¼Œåˆå«åš MARTï¼ˆMultiple Additive Regression Tree)ã€‚</p><p>å…¶åŸºæœ¬åŸç†æ˜¯æ ¹æ®å½“å‰æ¨¡å‹æŸå¤±å‡½æ•°çš„è´Ÿæ¢¯åº¦ä¿¡æ¯æ¥è®­ç»ƒæ–°åŠ å…¥çš„å¼±åˆ†ç±»å™¨ï¼Œç„¶åå°†è®­ç»ƒå¥½çš„å¼±åˆ†ç±»å™¨ä»¥ç´¯åŠ çš„å½¢å¼ç»“åˆåˆ°ç°æœ‰æ¨¡å‹ä¸­ã€‚</p><p>ä»‹ç»æ¢¯åº¦æå‡æ ‘ä¹‹å‰éœ€è¦äº†è§£ä¸‹ä»€ä¹ˆæ˜¯æ¢¯åº¦æå‡ã€‚æ¢¯åº¦æå‡ï¼ˆGradient Boostingï¼‰ æ˜¯ Boosting ä¸­çš„ä¸€å¤§ç±»ç®—æ³•ï¼Œå…¶å«ä¹‰ä¸ºå€ŸåŠ©æ¢¯åº¦ä¸‹é™æ€æƒ³çš„ Boosting ç®—æ³•ã€‚æ³¨æ„ï¼Œæ¢¯åº¦æå‡å¹¶éæ¢¯åº¦ä¸Šå‡ï¼Œå…¶æœ¬è´¨ä¹Ÿæ˜¯ä¸€ç§æ¢¯åº¦ä¸‹é™ã€‚åªä¸è¿‡ç›¸æ¯”äºæ™®é€šæ¢¯åº¦ä¸‹é™é€šè¿‡ç›´æ¥æ›´æ–°å‚æ•°æ¥æ¢¯åº¦ä¸‹é™ï¼Œæ¢¯åº¦æå‡é€šè¿‡ç´¯åŠ å¼±å­¦ä¹ å™¨æ¥æ¢¯åº¦ä¸‹é™ã€‚</p><p>åœ¨æ¢¯åº¦æå‡çš„ç¬¬ t æ­¥ï¼Œæˆ‘ä»¬å·²ç»å¾—åˆ°äº†ä¸€ä¸ªä¸å®Œç¾çš„æ¨¡å‹ $F<em>{t-1}$ ã€‚æ¢¯åº¦æå‡ç®—æ³•ä¸ä¼šæ”¹å˜ $F</em>{t-1}$ ï¼Œè€Œæ˜¯ä¼šè¯•å›¾å¢åŠ ä¸€ä¸ªæ–°æ¨¡å‹ $f$ æ¥æ”¹è¿›åŸæ¨¡å‹çš„æ€§èƒ½ï¼Œä½¿å…¶æ›´åŠ é€¼è¿‘ Ground Truthï¼š</p><script type="math/tex; mode=display">F_{t} = F_{t-1} + f \Rightarrow y</script><p>å› æ­¤æˆ‘ä»¬å¸Œæœ›èƒ½æ‰¾åˆ°è¯¥ $f$ ï¼Œå…¶ä¸­</p><script type="math/tex; mode=display">f = y - F_{t-1}</script><p>é‚£ä¹ˆæ–°æ¨¡å‹çš„ä»»åŠ¡å°±æ˜¯å°½å¯èƒ½æ¥è¿‘ä¸Šä¸€ä¸ªæ¨¡å‹çš„è¾“å‡ºå€¼ä¸çœŸå®å€¼ä¹‹é—´çš„å·®è·ï¼Œå³æ®‹å·®ï¼ˆResidualï¼‰ï¼Œè€Œä¸æ˜¯çœŸå®å€¼æœ¬èº«ã€‚</p><p>æœ€ç»ˆæ¨¡å‹çš„äº§å‡ºå°±æ˜¯ T ä¸ªå­æ ‘çš„è¾“å‡ºå€¼ä¹‹å’Œã€‚ç”±äºæ±‚å­æ ‘è¿‡ç¨‹ä¸­éœ€è¦è®¡ç®—ç´¯åŠ ç­‰æ“ä½œï¼Œå› æ­¤åœ¨è¿™é‡Œä½¿ç”¨çš„åŸºåˆ†ç±»å™¨å¿…é¡»ä¸ºå›å½’æ ‘ï¼Œä¹Ÿå°±æ˜¯ CART çš„å›å½’æ ‘ç‰ˆæœ¬ã€‚</p><p>é‚£ä¹ˆæ¢¯åº¦åœ¨å“ªé‡Œå‘¢ï¼Ÿå…¶å® GBDT åœ¨è§£å†³å›å½’é—®é¢˜æ—¶ï¼Œæ®‹å·®å°±æ˜¯æŸå¤±å‡½æ•°çš„è´Ÿæ¢¯åº¦ã€‚å› ä¸ºæˆ‘ä»¬åœ¨è§£å†³å›å½’é—®é¢˜æ—¶ï¼Œä¸€èˆ¬ä¼šé€‰æ‹©å¹³æ–¹æŸå¤±å‡½æ•°ï¼š</p><script type="math/tex; mode=display">L(y,f_{t}(\boldsymbol{x}))=\frac{1}{2}(y-f(\boldsymbol{x}))^{2}</script><p>å¯¹è¯¥å¼æ±‚è´Ÿæ¢¯åº¦ï¼Œç»“æœæ­£å¥½ä¸ºæ®‹å·®ã€‚å› æ­¤å¯¹äºå›å½’é—®é¢˜ï¼Œè´Ÿæ¢¯åº¦è·Ÿæ®‹å·®æ˜¯ç­‰ä»·çš„ã€‚ä½†æ˜¯åœ¨åˆ†ç±»é—®é¢˜ï¼Œæˆ–è€…å…¶ä»–æŸå¤±å‡½æ•°å®šä¹‰çš„é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦ä»¥æŸå¤±å‡½æ•°çš„è´Ÿæ¢¯åº¦ä½œä¸ºæ®‹å·®çš„è¿‘ä¼¼å€¼äº†ã€‚</p><p>æ¢¯åº¦æå‡æ ‘çš„ä¼˜åŠ¿åœ¨äºå¯è§£é‡Šæ€§å¼ºï¼Œæ³›åŒ–èƒ½åŠ›ä¹Ÿå¾ˆå¼ºï¼Œæœ€éš¾èƒ½å¯è´µçš„æ˜¯ï¼Œå¯¹è¾“å…¥æ•°æ®çš„å½¢å¼æ²¡æœ‰å¤ªé«˜è¦æ±‚ï¼Œä¸éœ€è¦ç‰¹æ®Šé¢„å¤„ç†ã€‚</p><p>æ¢¯åº¦æå‡æ ‘çš„åŠ£åŠ¿åœ¨äºï¼Œå¿…é¡»ä¸²è¡Œè®­ç»ƒå¯¼è‡´é€Ÿåº¦æ…¢ï¼Œå¯¹é«˜ç»´ä¸”ç¨€ç–çš„é—®é¢˜ï¼Œæ¯”å¦‚æ–‡æœ¬å¤„ç†é—®é¢˜ï¼Œæ•ˆæœä¸å¤Ÿå¥½ã€‚æ‰€ä»¥ä¸€èˆ¬éƒ½ç”¨æ¥å¤„ç†ä¸€äº›æ•°å€¼ç‰¹å¾ã€‚</p><h2 id="3-Bagging"><a href="#3-Bagging" class="headerlink" title="3. Bagging"></a>3. Bagging</h2><p>bagging ç®—æ³•çš„æ€è·¯åŒæ ·æ˜¯é€šè¿‡æ„å»ºä¸åŒçš„è®­ç»ƒé›†ï¼Œè®­ç»ƒå¤šä¸ªåŸºå­¦ä¹ å™¨çš„ã€‚bagging å¸Œæœ›æ¯ä¸ªåŸºå­¦ä¹ å™¨åªä½¿ç”¨å…¨éƒ¨è®­ç»ƒé›†çš„å­é›†ï¼Œå¦‚æœå„ä¸ªåŸºå­¦ä¹ å™¨ä½¿ç”¨çš„å­é›†å®Œå…¨ä¸åŒï¼Œåˆ™é¢„æœŸå„ä¸ªåŸºå­¦ä¹ å™¨ä¹‹é—´ä¾¿æœ‰äº†å·®å¼‚ã€‚</p><p>ä½†æ˜¯è¿™æ ·å­˜åœ¨é£é™©ï¼Œå°¤å…¶æ˜¯åœ¨æ•°æ®é‡ä¸å¤§æ—¶ï¼Œæ¯ä¸ªåŸºå­¦ä¹ å™¨åªç”¨åˆ°äº†ä¸€å°éƒ¨åˆ†è®­ç»ƒæ•°æ®ï¼Œç”šè‡³æ— æ³•æœ‰æ•ˆå­¦ä¹ ã€‚å› æ­¤æˆ‘ä»¬åœ¨é€‰æ‹©è®­ç»ƒæ•°æ®æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ç›¸äº’æœ‰äº¤å çš„é‡‡æ ·å­é›†ã€‚</p><p>é‡‡ç”¨è‡ªåŠ©é‡‡æ ·ï¼ˆå³æœ‰æ”¾å›é‡‡æ ·ï¼‰çš„æ–¹æ³•æˆ‘ä»¬å¯ä»¥å¾—åˆ°å¾ˆå¤šçš„å¯èƒ½æœ‰é‡å¤æ ·æœ¬çš„æ•°æ®å­é›†ã€‚å¯¹äºæ¯ä¸ªé€‰å–çš„å­é›†ï¼Œå¹³å‡ä¸‹æ¥åªæœ‰ 63% çš„è®­ç»ƒå®ä¾‹è¢«é‡‡æ ·ã€‚æˆ‘ä»¬å¯¹æ•°æ®é›†è¿›è¡Œ T æ¬¡è‡ªåŠ©é‡‡æ ·ï¼Œå³å¯å¾—åˆ° T ä¸ªä¸åŒçš„å­æ•°æ®é›†ã€‚</p><p>ç”±æ­¤æˆ‘ä»¬å¾—åˆ°äº† T ä¸ªåŸºå­¦ä¹ å™¨ï¼Œå¯¹äºåˆ†ç±»é—®é¢˜ä½¿ç”¨ç®€å•æŠ•ç¥¨æ–¹æ³•ï¼Œå¯¹äºå›å½’é—®é¢˜ä½¿ç”¨ç®€å•å¹³å‡æ³•ã€‚Bagging çš„ä¼˜ç‚¹æ˜¯å¯ä»¥é€‚ç”¨äºå¤šåˆ†ç±»å’Œå›å½’ç­‰ä»»åŠ¡ã€‚</p><p><strong>Bagging ç®—æ³•æ›´åŠ å…³æ³¨é™ä½æ–¹å·®</strong>ï¼Œå› æ­¤ä»–åœ¨ä¸å‰ªæçš„å†³ç­–æ ‘ç­‰å®¹æ˜“è¢«æ ·æœ¬æ‰°åŠ¨çš„å­¦ä¹ å™¨ä¸Šçš„é›†æˆæ•ˆæœæ›´ä¸ºæ˜æ˜¾ã€‚</p><h3 id="3-1-éšæœºæ£®æ—"><a href="#3-1-éšæœºæ£®æ—" class="headerlink" title="3.1 éšæœºæ£®æ—"></a>3.1 éšæœºæ£®æ—</h3><p>éšæœºæ£®æ—ï¼ˆRandom Forestï¼‰å°±é‡‡ç”¨äº† Bagging é‡‡æ ·æ–¹æ³•æ¥è®­ç»ƒå¾ˆå¤šçš„å†³ç­–æ ‘ã€‚å¦å¤–ï¼Œéšæœºæ£®æ—åœ¨è®­ç»ƒæ¯ä¸ªå­æ ‘çš„æ—¶å€™ï¼Œè¿˜é¢å¤–å¼•å…¥äº†éšæœºæ€§ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œä¼ ç»Ÿå†³ç­–æ ‘åœ¨é€‰æ‹©åˆ’åˆ†ç‰¹å¾æ—¶ï¼Œæ€»æ˜¯åœ¨å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰ç‰¹å¾ä¸Šå–æœ€ä¼˜ï¼›ä½†æ˜¯åœ¨ RF ä¸­ï¼Œå…ˆéšæœºä» d ä¸ªç‰¹å¾ä¸­é€‰æ‹© k ä¸ªç‰¹å¾ï¼Œç„¶åå†ä»è¿™ k ä¸ªç‰¹å¾å­é›†ä¸­é€‰æœ€ä¼˜ã€‚å¦‚æœ k=dï¼Œåˆ™é€€åŒ–ä¸ºä¸åŸæœ¬çš„å†³ç­–æ ‘åˆ†è£‚ç®—æ³•ä¸€è‡´ï¼›å¦‚æœ k=1ï¼Œåˆ™å®Œå…¨éšæœºé€‰æ‹©ç‰¹å¾è¿›è¡Œåˆ’åˆ†ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ¨è $k=\log_2{d}$ ã€‚</p><p>éšæœºæ£®æ—ç®€å•ï¼Œå®¹æ˜“å®ç°ï¼Œè®¡ç®—å¼€é”€å°ã€‚éšæœºæ£®æ—ä¸ä»…ä»è®­ç»ƒé›†çš„é€‰æ‹©ä¸Šå¼•å…¥äº†éšæœºæ€§ï¼Œè€Œä¸”åœ¨æ ‘çš„ç”Ÿé•¿ä¸Šä¹Ÿå¼•å…¥äº†éšæœºæ€§ï¼Œè¿™ä½¿å¾—åŸºåˆ†ç±»å™¨ä¹‹é—´çš„å·®å¼‚è¿›ä¸€æ­¥æå‡ã€‚</p><p>å¦å¤–éšæœºæ£®æ—å¯ä»¥å¸®åŠ©åˆ¤æ–­ç‰¹å¾çš„é‡è¦ç¨‹åº¦ã€‚å¦‚æœä½ è§‚å¯Ÿå•ä¸€çš„å†³ç­–æ ‘ï¼Œé‡è¦çš„ç‰¹å¾ä¼šå‡ºç°åœ¨æ›´é è¿‘æ ¹éƒ¨çš„ä½ç½®ï¼Œä¸é‡è¦çš„ç‰¹å¾ä¼šç»å¸¸å‡ºç°åœ¨é è¿‘å¶å­çš„ä½ç½®ã€‚</p><p>å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¡ç®—ä¸€ä¸ªç‰¹å¾åœ¨æ£®æ—çš„å…¨éƒ¨æ ‘ä¸­å‡ºç°çš„å¹³å‡æ·±åº¦æ¥é¢„æµ‹ç‰¹å¾çš„é‡è¦æ€§ã€‚</p><h2 id="4-Voting-å’Œ-Stacking"><a href="#4-Voting-å’Œ-Stacking" class="headerlink" title="4. Voting å’Œ Stacking"></a>4. Voting å’Œ Stacking</h2><p>ä¸Šè¿°æ–¹æ³•æ˜¯è®­ç»ƒè‹¥å¹²å¼±åˆ†ç±»å™¨ï¼Œå¹¶å°†ä»–ä»¬ç»“åˆå½¢æˆå¼ºåˆ†ç±»å™¨çš„è¿‡ç¨‹ã€‚åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½å·²ç»æœ‰äº†è‹¥å¹²è®­ç»ƒå®Œæ¯•çš„æ¨¡å‹ï¼Œæ¨¡å‹æ— æ³•æ”¹åŠ¨äº†ã€‚é‚£ä¹ˆå¦‚ä½•é‡‡ç”¨æ°å½“çš„èåˆæ–¹å¼ï¼Œæ¥æå‡æ¨¡å‹çš„ç»¼åˆè¡¨ç°å‘¢ï¼Ÿ</p><p>ä¸€ä¸ªæœ´ç´ çš„æƒ³æ³•å°±æ˜¯æŠ•ç¥¨æ³•ï¼ˆVotingï¼‰ï¼Œå³æŠŠæ¯ä¸ªæ¨¡å‹çš„ç»“æœçº¿æ€§ç»„åˆä¸‹ã€‚å¯¹äºåˆ†ç±»é—®é¢˜ï¼Œæ•´ä½“çš„åˆ†ç±»ç»“æœä¸ºå¤§éƒ¨åˆ†å­æ¨¡å‹è®¤ä¸ºçš„é‚£ä¸ªåˆ†ç±»ç»“æœï¼›å¯¹äºå›å½’æ¨¡å‹ï¼Œæ•´ä½“çš„è¾“å‡ºå€¼ä¸ºå„ä¸ªæ¨¡å‹çš„åŠ æƒæ±‚å’Œã€‚</p><p>ç„¶è€Œæœ‰äº›æ¨¡å‹çš„ç»“æœä¸å¤Ÿå‡†ç¡®ï¼Œå¯èƒ½ä¼šæ‹‰ä½æ•´ä½“çš„æ€§èƒ½ã€‚Stacking çš„æ•´ä½“æ€æƒ³å°±æ˜¯ï¼Œé¢å¤–å†è®­ç»ƒä¸€ä¸ªç®€å•æ¨¡å‹ï¼Œä»¥åŸºåˆ†ç±»å™¨çš„ç»“æœä¸ºè¾“å…¥ï¼Œè¾“å‡ºæœ€ç»ˆçš„ä¸€ä¸ªå€¼ï¼Œä½œä¸ºå…¨éƒ¨æ¨¡å‹çš„è¾“å‡ºã€‚</p><p><img src="/2022/06/27/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E9%9B%86%E6%88%90%E6%96%B9%E6%B3%95%EF%BC%8C%E9%9A%8F%E6%9C%BA%E6%A3%AE%E6%9E%97%E5%92%8C%E6%A2%AF%E5%BA%A6%E6%8F%90%E5%8D%87%E6%A0%91/stacking.png" alt></p><p>ç”±ç®€å•æ¨¡å‹å»å­¦ä¹ å„ä¸ªåŸºåˆ†ç±»å™¨çš„æƒé‡çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œé‡‡ç”¨çš„è®­ç»ƒé›†å¿…é¡»è¦æ˜¯å…¨æ–°çš„ã€æ²¡æœ‰è¢«åŸºåˆ†ç±»å™¨ä½¿ç”¨è¿‡çš„ã€‚å¦åˆ™æ— æ³•å‘ç°åŸºåˆ†ç±»å™¨çš„è¿‡æ‹Ÿåˆç°è±¡ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Boosting</tag>
      
      <tag>Bagging</tag>
      
      <tag>Machine Learning</tag>
      
      <tag>Random Forest</tag>
      
      <tag>GBDT</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç«èµ›æ‰“å¡ã€‘ç§‘å¤§è®¯é£-éæ ‡å‡†åŒ–ç–¾ç—…è¯‰æ±‚çš„ç®€å•åˆ†è¯ŠæŒ‘æˆ˜èµ›</title>
    <link href="/2022/06/20/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E7%A7%91%E5%A4%A7%E8%AE%AF%E9%A3%9E-%E9%9D%9E%E6%A0%87%E5%87%86%E5%8C%96%E7%96%BE%E7%97%85%E8%AF%89%E6%B1%82%E7%9A%84%E7%AE%80%E5%8D%95%E5%88%86%E8%AF%8A%E6%8C%91%E6%88%98%E8%B5%9B/"/>
    <url>/2022/06/20/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E7%A7%91%E5%A4%A7%E8%AE%AF%E9%A3%9E-%E9%9D%9E%E6%A0%87%E5%87%86%E5%8C%96%E7%96%BE%E7%97%85%E8%AF%89%E6%B1%82%E7%9A%84%E7%AE%80%E5%8D%95%E5%88%86%E8%AF%8A%E6%8C%91%E6%88%98%E8%B5%9B/</url>
    
    <content type="html"><![CDATA[<p>æ–‡æœ¬åˆ†ç±»é—®é¢˜ï¼Œæ”¶é›†ç”¨æˆ·é—®è¯Šä¿¡æ¯ï¼Œéœ€è¦åˆ†åˆ«å°†ä¸€æ®µæé—®å°±é—®è¯Šç±»å‹ï¼ˆ20ç§ï¼‰å’Œç–¾ç—…ç±»å‹ï¼ˆ60ç§ï¼‰è¿›è¡Œåˆ†ç±»ã€‚ç±»åˆ«åŒ…å«è¾ƒå¤šç¼ºå¤±å€¼ï¼Œtrickè¾ƒå¤šã€‚ç¬”è€…ç”¨åˆ°äº†Tfidf+Logisticå›å½’ä½œä¸ºBaselineï¼Œç„¶åä½¿ç”¨Pytorchè®­ç»ƒRoBERTaç”¨ä½œç¬¬ä¸€ç‰ˆæäº¤æ¨¡å‹ï¼Œæœ€ç»ˆæ ¹æ®æ•°æ®çš„ç‰¹å¾ï¼Œå–å¾—äº†XXï¼ˆæ’åï¼‰ã€‚<br><!--more---></p><p>æ¯”èµ›åœ°å€ï¼š<br><a href="https://challenge.xfyun.cn/topic/info?type=disease-claims-2022&amp;option=ssgy">https://challenge.xfyun.cn/topic/info?type=disease-claims-2022&amp;option=ssgy</a></p><p>baselineåœ°å€ï¼š<br><a href="https://mp.weixin.qq.com/s/KiozLF7FaJ_CVx74J3KNWA">https://mp.weixin.qq.com/s/KiozLF7FaJ_CVx74J3KNWA</a></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Datawhale</tag>
      
      <tag>Data Mining</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘MacBook Pro M1Pro Javaç¯å¢ƒéƒ¨ç½²å’Œå¼€å‘å‡†å¤‡</title>
    <link href="/2022/05/25/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Java%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E5%92%8C%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87/"/>
    <url>/2022/05/25/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Java%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E5%92%8C%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡è®°å½•äº†åœ¨MacBook Pro M1Proä¸‹éƒ¨ç½²Javaå¼€å‘ç¯å¢ƒé‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ³•<br><!--more---></p><h2 id="ä¸‹è½½å¹¶å®‰è£…JDK"><a href="#ä¸‹è½½å¹¶å®‰è£…JDK" class="headerlink" title="ä¸‹è½½å¹¶å®‰è£…JDK"></a>ä¸‹è½½å¹¶å®‰è£…JDK</h2><p>M1èŠ¯ç‰‡å¸¦æ¥çš„åå¤„æ˜¯è®¸å¤šjdkç‰ˆæœ¬ä¸æ”¯æŒarmæ¶æ„ã€‚è¿™é‡Œå¯ä»¥é€‰æ‹©<code>Zulu JDK</code>ï¼Œå¯ä»¥è¿›å…¥<a href="https://www.azul.com/downloads/?version=java-8-lts&amp;os=macos&amp;architecture=arm-64-bit&amp;package=jdk">æ­¤é“¾æ¥ä¸‹è½½</a>å¹¶å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„JDKã€‚</p><p><img src="/2022/05/25/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Java%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E5%92%8C%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87/2022-05-25-15-46-32.png" alt="å®‰è£…é¡µé¢"></p><p>å®‰è£…å®Œæ¯•åï¼Œä¸å¿…è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œç›´æ¥åœ¨å‘½ä»¤è¡Œè¿è¡Œ<code>java -version</code>æ£€æŸ¥æ˜¯å¦è¿è¡ŒæˆåŠŸï¼š</p><pre><code>% java -versionopenjdk version &quot;1.8.0_332&quot;OpenJDK Runtime Environment (Zulu 8.62.0.19-CA-macos-aarch64) (build 1.8.0_332-b09)OpenJDK 64-Bit Server VM (Zulu 8.62.0.19-CA-macos-aarch64) (build 25.332-b09, mixed mode)</code></pre><h2 id="ä¸‹è½½å¹¶å®‰è£…Maven"><a href="#ä¸‹è½½å¹¶å®‰è£…Maven" class="headerlink" title="ä¸‹è½½å¹¶å®‰è£…Maven"></a>ä¸‹è½½å¹¶å®‰è£…Maven</h2><p>å¯åœ¨<a href="https://maven.apache.org/download.cgi">æ­¤é“¾æ¥ä¸­</a>é€‰æ‹©å¦‚å›¾æ‰€ç¤ºçš„é“¾æ¥è¿›è¡Œä¸‹è½½å‹ç¼©åŒ…ï¼š</p><p><img src="/2022/05/25/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Java%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E5%92%8C%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87/ä¸‹è½½Maven.png" alt></p><p>è¿™æ˜¯ä¸ªå‹ç¼©æ–‡ä»¶ï¼Œæˆ–è€…è¯´â€œç»¿è‰²ç‰ˆâ€ã€‚ç„¶åå°†å…¶è§£å‹åˆ°ä½ æƒ³è¦æ”¾å…¥çš„æ–‡ä»¶å¤¹ï¼ˆæˆ‘ä¸€èˆ¬ç§»åŠ¨åˆ°<code>/opt</code>ç›®å½•ä¸‹ï¼‰ã€‚</p><p>æ¥ä¸‹æ¥éœ€è¦æˆ‘ä»¬è‡ªå·±é…ç½®ç¯å¢ƒå˜é‡ã€‚é¦–å…ˆéœ€è¦ç¡®è®¤ä½ çš„BASHç±»åˆ«ã€‚</p><p>æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„SHELLï¼š</p><pre><code>% echo $SHELL/bin/zsh</code></pre><p>æŸ¥çœ‹æœ¬æœºå¯ç”¨çš„æ‰€æœ‰SHELL</p><pre><code>% cat /etc/shells# List of acceptable shells for chpass(1).# Ftpd will not allow users to connect who are not using# one of these shells./bin/bash/bin/csh/bin/dash/bin/ksh/bin/sh/bin/tcsh/bin/zsh</code></pre><p>æˆ‘è¿™é‡Œæ˜¾ç¤ºæ˜¯zshï¼Œåˆ™æˆ‘éœ€è¦ä¿®æ”¹<code>~/.zshrc</code><br>å¦‚æœä½ çš„shellæ˜¯<code>/bin/bash</code>ï¼Œåˆ™éœ€è¦ä¿®æ”¹<code>~/.bash_profile</code></p><p>å°†ä»¥ä¸‹æ–‡æœ¬åŠ å…¥é…ç½®æ–‡ä»¶æœ«å°¾ï¼š</p><pre><code class="lang-sh">export MAVEN_HOME=/opt/apache-maven-3.8.5export PATH=$PATH:$MAVEN_HOME/bin</code></pre><p>ç„¶åç«‹å³è½½å…¥ç¯å¢ƒå˜é‡ï¼š</p><pre><code>% source ~/.zshrc</code></pre><p>æœ€åæµ‹è¯•æ˜¯å¦åº”ç”¨ä¿®æ”¹ï¼š</p><pre><code>% mvn -vApache Maven 3.8.5 (3599d3414f046de2324203b78ddcf9b5e4388aa0)Maven home: /opt/apache-maven-3.8.5Java version: 1.8.0_332, vendor: Azul Systems, Inc., runtime: /Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home/jreDefault locale: zh_CN, platform encoding: UTF-8OS name: &quot;mac os x&quot;, version: &quot;12.3.1&quot;, arch: &quot;aarch64&quot;, family: &quot;mac&quot;</code></pre>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘æœºå™¨å­¦ä¹ ä¹‹å†³ç­–æ ‘ç®—æ³•</title>
    <link href="/2022/05/22/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%86%B3%E7%AD%96%E6%A0%91%E7%AE%97%E6%B3%95/"/>
    <url>/2022/05/22/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%86%B3%E7%AD%96%E6%A0%91%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>å†³ç­–æ ‘ç®—æ³•æ˜¯ä¸€ç±»ç»å…¸çš„ç›‘ç£å­¦ä¹ ç®—æ³•ï¼Œå®ƒçš„å®ç°ç®€å•ã€å¯è§£é‡Šæ€§å¼ºã€èƒ½é€‚åº”å¤šç§ç±»å‹çš„è¾“å…¥æ•°æ®ï¼Œå¹¶ä¸”å¤šé¢—å†³ç­–æ ‘å¯ä»¥é›†æˆä¸ºå¼ºå¤§çš„æ¨¡å‹ã€‚å¸¸ç”¨äºå¤æ‚é—®é¢˜çš„ baseline è§£å†³æ–¹æ¡ˆï¼Œä»¥åŠåˆ†æç‰¹å¾é‡è¦ç¨‹åº¦ã€‚</p><!--more---><h2 id="1-æ ‘çš„åˆ’åˆ†æµç¨‹ï¼šåŸç†ä¸æ€æƒ³"><a href="#1-æ ‘çš„åˆ’åˆ†æµç¨‹ï¼šåŸç†ä¸æ€æƒ³" class="headerlink" title="1. æ ‘çš„åˆ’åˆ†æµç¨‹ï¼šåŸç†ä¸æ€æƒ³"></a>1. æ ‘çš„åˆ’åˆ†æµç¨‹ï¼šåŸç†ä¸æ€æƒ³</h2><h3 id="1-1-å†³ç­–æ ‘çš„å·¥ä½œåŸç†"><a href="#1-1-å†³ç­–æ ‘çš„å·¥ä½œåŸç†" class="headerlink" title="1.1 å†³ç­–æ ‘çš„å·¥ä½œåŸç†"></a>1.1 å†³ç­–æ ‘çš„å·¥ä½œåŸç†</h3><p>å†³ç­–æ ‘æ˜¯å¹¿æ³›ç”¨äºåˆ†ç±»å’Œå›å½’ä»»åŠ¡çš„æ¨¡å‹ã€‚æœ¬è´¨ä¸Šï¼Œå®ƒä»ä¸€å±‚å±‚çš„if/else é—®é¢˜ä¸­è¿›è¡Œå­¦ä¹ ï¼Œå¹¶å¾—å‡ºç»“è®ºã€‚</p><p><img src="/2022/05/22/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%86%B3%E7%AD%96%E6%A0%91%E7%AE%97%E6%B3%95/2019-05-22-21-00-49.png" alt="åŒºåˆ†å‡ ç§åŠ¨ç‰©çš„å†³ç­–æ ‘"></p><p>åœ¨è¿™å¼ å›¾ä¸­ï¼Œæ ‘çš„æ¯ä¸ªç»“ç‚¹ä»£è¡¨ä¸€ä¸ªé—®é¢˜æˆ–ä¸€ä¸ªåŒ…å«ç­”æ¡ˆçš„ç»ˆç»“ç‚¹ï¼ˆä¹Ÿå«å¶ç»“ç‚¹ï¼‰ã€‚æ ‘çš„è¾¹å°†é—®é¢˜çš„ç­”æ¡ˆä¸å°†é—®çš„ä¸‹ä¸€ä¸ªé—®é¢˜è¿æ¥èµ·æ¥ã€‚</p><p>ç”¨æœºå™¨å­¦ä¹ çš„è¯­è¨€æ¥è¯´å°±æ˜¯ï¼Œä¸ºäº†åŒºåˆ†å››ç±»åŠ¨ç‰©ï¼ˆé¹°ã€ä¼é¹…ã€æµ·è±šå’Œç†Šï¼‰ï¼Œæˆ‘ä»¬åˆ©ç”¨ä¸‰ä¸ªç‰¹å¾ï¼ˆâ€œæœ‰æ²¡æœ‰ç¾½æ¯›â€â€œä¼šä¸ä¼šé£â€å’Œâ€œæœ‰æ²¡æœ‰é³â€ï¼‰æ¥æ„å»ºä¸€ä¸ªæ¨¡å‹ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç›‘ç£å­¦ä¹ ä»æ•°æ®ä¸­å­¦ä¹ æ¨¡å‹ï¼Œè€Œæ— éœ€äººä¸ºæ„å»ºæ¨¡å‹ã€‚</p><h3 id="1-2-å†³ç­–æ ‘çš„æ€æƒ³"><a href="#1-2-å†³ç­–æ ‘çš„æ€æƒ³" class="headerlink" title="1.2 å†³ç­–æ ‘çš„æ€æƒ³"></a>1.2 å†³ç­–æ ‘çš„æ€æƒ³</h3><p>åŸåˆ™ä¸Šè®²ï¼Œå¯¹äºç»™å®šçš„å±æ€§é›†ï¼Œå¯ä»¥æ„é€ çš„å†³ç­–æ ‘çš„æ•°ç›®è¾¾æŒ‡æ•°çº§ã€‚å°½ç®¡æŸäº›å†³ç­–æ ‘æ¯”å…¶ä»–å†³ç­–æ ‘æ›´å‡†ç¡®ï¼Œä½†æ˜¯ç”±äºæœç´¢ç©ºé—´æ˜¯æŒ‡æ•°è§„æ¨¡çš„ï¼Œéå†æ‰¾å‡ºæœ€ä½³å†³ç­–æ ‘åœ¨è®¡ç®—ä¸Šæ˜¯ä¸å¯è¡Œçš„ã€‚</p><p>å°½ç®¡å¦‚æ­¤ï¼Œäººä»¬è¿˜æ˜¯å¼€å‘å‡ºäº†ä¸€å†™æœ‰æ•ˆçš„ç®—æ³•ï¼Œè¿™äº›ç®—æ³•é€šå¸¸åŸºäºè´ªå¿ƒç­–ç•¥ï¼Œåœ¨é€‰æ‹©åˆ’åˆ†æ•°æ®çš„å±æ€§æ—¶ï¼Œé‡‡å–ä¸€ç³»åˆ—å±€éƒ¨æœ€ä¼˜å†³ç­–æ¥æ„é€ å†³ç­–æ ‘ã€‚</p><p>ä¸€ç§æœ´ç´ çš„æ„å»ºå†³ç­–æ ‘çš„æ€è·¯å¦‚ä¸‹ï¼š</p><ol><li>å¦‚æœæŸèŠ‚ç‚¹ä¸­æ‰€æœ‰è®°å½•éƒ½ä¸ºåŒä¸€ç±»åˆ«ï¼Œåˆ™æ— éœ€åˆ†ç±»ï¼Œè¯¥èŠ‚ç‚¹ä¸ºå¶å­ç»“ç‚¹ï¼›</li><li>å¦‚æœæŸèŠ‚ç‚¹ä¸­åŒ…å«å¤šä¸ªç±»åˆ«çš„è®°å½•ï¼Œåˆ™æŒ‰ç…§æŸä¸ªç‰¹å¾çš„å¤§å°ä¸ºå‚è€ƒï¼Œä»¤èŠ‚ç‚¹åˆ†è£‚ä¸ºå¤šä¸ªå­èŠ‚ç‚¹ï¼›æ¯”å¦‚è¯¥ç‰¹å¾å¤§äºæŸå€¼åˆ™ä»¤è®°å½•è¿›å…¥å­èŠ‚ç‚¹ 1ï¼Œå¦åˆ™è¿›å…¥å­èŠ‚ç‚¹ 2ï¼›</li><li>å¯¹æ‰€æœ‰å­èŠ‚ç‚¹é€’å½’è°ƒç”¨è¯¥ç®—æ³•ï¼Œç›´åˆ°è¯¥èŠ‚ç‚¹å†…çš„æ‰€æœ‰è®°å½•éƒ½å±äºåŒä¸€ä¸ªç±»åˆ«ï¼Œæˆ–è€…æ‰€æœ‰è®°å½•çš„é€‰å®šç‰¹å¾éƒ½ç›¸åŒã€‚</li></ol><p>è¯¥ç®—æ³•ä¼šå¼•å‡ºä¸¤ä¸ªå…³é”®é—®é¢˜ï¼š</p><ol><li><strong>å¦‚ä½•é€‰æ‹©ç‰¹å¾è¿›è¡Œåˆ†è£‚</strong>ï¼Ÿéœ€è¦å»ºç«‹ä¸€ç§è¯„ä¼°æ–¹æ³•ï¼Œè¯„ä¼°ä¸åŒç‰¹å¾å¯¹è¯¥èŠ‚ç‚¹çš„åˆ†ç±»èƒ½åŠ›ï¼Œå¹¶ä¼˜å…ˆé€‰æ‹©åˆ†ç±»æ•ˆæœå¥½çš„ç‰¹å¾ï¼›</li><li><strong>å¦‚ä½•åœæ­¢åˆ†è£‚</strong>ï¼Ÿæ•°æ®æœ¬èº«å­˜åœ¨å™ªå£°ï¼Œé€’å½’åˆ†è£‚è¿‡æ·±ä¼šå¯¼è‡´è¿‡æ‹Ÿåˆï¼Œå¦‚ä½•å‰ªææ¥ä¿è¯æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Ÿ</li></ol><h2 id="2-å¦‚ä½•é€‰æ‹©ç‰¹å¾è¿›è¡Œåˆ†è£‚ï¼Ÿ"><a href="#2-å¦‚ä½•é€‰æ‹©ç‰¹å¾è¿›è¡Œåˆ†è£‚ï¼Ÿ" class="headerlink" title="2. å¦‚ä½•é€‰æ‹©ç‰¹å¾è¿›è¡Œåˆ†è£‚ï¼Ÿ"></a>2. å¦‚ä½•é€‰æ‹©ç‰¹å¾è¿›è¡Œåˆ†è£‚ï¼Ÿ</h2><p>å†³ç­–æ ‘æœ€å…³é”®çš„æ˜¯é€‰æ‹©åˆé€‚çš„åˆ’åˆ†æ–¹æ³•ï¼Œæ¥ä½¿å¾—é—®é¢˜çš„è§„æ¨¡æœ€å¤§ç¨‹åº¦çš„ç®€åŒ–ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›ä¼˜å…ˆé€‰æ‹©é‚£äº›èƒ½å¤Ÿæœ€å¤§ç¨‹åº¦ç®€åŒ–é—®é¢˜çš„ç‰¹å¾ã€‚å¯¹äºäºŒåˆ†ç±»ä»»åŠ¡ï¼Œå¦‚æœå­˜åœ¨æŸä¸ªç‰¹å¾ï¼Œå¤§äºæŸå€¼çš„è®°å½•å…¨éƒ½æ˜¯ç±»åˆ« 1ï¼Œå°äºæŸå€¼çš„è®°å½•å…¨æ˜¯ç±»åˆ« 2ï¼Œåˆ™è¯¥ç‰¹å¾å°±èƒ½æœ€å¤§ç¨‹åº¦ç®€åŒ–é—®é¢˜ã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼Œç”·å¥³æ€§åˆ«åˆ†ç±»ä»»åŠ¡ï¼Œâ€æœ‰æ²¡æœ‰å–‰ç»“â€œå°±æ˜¯ä¸€ä¸ªå¥½ç‰¹å¾ï¼Œâ€å¤´å‘é•¿åº¦â€œã€â€èº«é«˜â€œåˆ™ç›¸å¯¹åˆ†ç±»èƒ½åŠ›ä¸é‚£ä¹ˆå¼ºã€‚</p><h3 id="2-1-ä¿¡æ¯ç†µ"><a href="#2-1-ä¿¡æ¯ç†µ" class="headerlink" title="2.1 ä¿¡æ¯ç†µ"></a>2.1 ä¿¡æ¯ç†µ</h3><p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç‰©ç†é‡ï¼Œæ¥åº¦é‡æŸèŠ‚ç‚¹å†…çš„æ‰€æœ‰è®°å½•çš„ç±»åˆ«å•çº¯ç¨‹åº¦ã€‚å¦‚æœä¸€ä¸ªèŠ‚ç‚¹ä¸­çš„è®°å½•å…¨éƒ½æ˜¯åŒä¸€ç±»åˆ«ï¼Œåˆ™æˆ‘ä»¬è®¤ä¸ºè¯¥èŠ‚ç‚¹ååˆ†çº¯æ´ã€‚</p><p>ç„¶ååˆ¤æ–­ç‰¹å¾çš„ä¼˜åŠ£ï¼Œåªéœ€æ±‚ç›®å‰çš„çº¯åº¦ï¼Œç„¶åæ ¹æ®è¯¥ç‰¹å¾è¿›è¡Œåˆ†è£‚ï¼Œå†è®¡ç®—ä¸€éçº¯åº¦ï¼Œåˆ™çº¯åº¦ä¸‹é™çš„å€¼ï¼Œå°±å¯ä»¥ç”¨æ¥åº¦é‡è¯¥ç‰¹å¾çš„åˆ†ç±»èƒ½åŠ›äº†ã€‚</p><p><strong>çº¯åº¦ï¼ˆpurityï¼‰</strong> çš„å®šä¹‰æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œæ¯”å¦‚ä¿¡æ¯ç†µï¼ˆinformation entropyï¼‰ã€‚å‡è®¾ $Y$ ä¸ºç±»åˆ«é›†åˆï¼Œ$D$ ä¸ºèŠ‚ç‚¹ä¸­çš„æ ·æœ¬é›†åˆï¼Œ$p_k$ ä¸ºå½“å‰é›†åˆ $D$ ä¸­ç¬¬ $k$ ç±»æ ·æœ¬å æ¯”ï¼Œåˆ™ä¿¡æ¯ç†µçš„å®šä¹‰ä¸ºï¼š</p><script type="math/tex; mode=display">\text{Entropy}(D)=-\sum_{k=1}^{|Y|} p_k\ln{p_k}</script><p>å‡è®¾å¶å­ç»“ç‚¹æœ‰ 10 ä¸ªæ ·æœ¬ï¼Œå®ƒä»¬çš„ç±»åˆ«åˆ†åˆ«ä¸ºï¼š {1,2,2,3,3,3,3,3,3,3}ï¼Œåˆ™æ­¤æ—¶è¯¥ç‰¹å¾å¯¹åº”çš„ä¿¡æ¯ç†µä¸ºï¼š</p><script type="math/tex; mode=display">\text{Entropy}=-(\frac{1}{10}\ln{\frac{1}{10}}+\frac{2}{10}\ln{\frac{2}{10}}+\frac{7}{10}\ln{\frac{7}{10}})\approx0.8</script><p>å¯¹äºæ ·æœ¬é›†åˆ {1,1,1,2,2,2,3,3,3,3}ï¼Œåˆ™æ­¤æ—¶çš„ä¿¡æ¯ç†µä¸ºï¼š</p><script type="math/tex; mode=display">\text{Entropy}=-(\frac{3}{10}\ln{\frac{3}{10}}+\frac{3}{10}\ln{\frac{3}{10}}+\frac{4}{10}\ln{\frac{4}{10}})\approx1.09</script><p>æ¯”è¾ƒä¸Šè¿°ä¸¤ä¸ªæ ·æœ¬é›†åˆï¼Œé›†åˆ 1 å¤§éƒ¨åˆ†æ ·æœ¬æ˜¯ç±»åˆ« 3ï¼Œé›†åˆ 2 çš„ç±»åˆ«åˆ†å¸ƒæ¯”è¾ƒå‡åŒ€ï¼Œåˆ™é›†åˆ 1 çš„ä¿¡æ¯ç†µæ¯”é›†åˆ 2 çš„è¦å°ï¼Œè¿™è¯´æ˜é›†åˆ 1 æ›´çº¯ã€‚</p><h3 id="2-2-ä¿¡æ¯å¢ç›Š"><a href="#2-2-ä¿¡æ¯å¢ç›Š" class="headerlink" title="2.2 ä¿¡æ¯å¢ç›Š"></a>2.2 ä¿¡æ¯å¢ç›Š</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦é€‰å®šç‰¹å¾ï¼Œæ¯”å¦‚èº«é«˜è¿™ä¸ªç‰¹å¾ï¼Œå¯èƒ½äº§å‡ºä¸‰ç§åˆ†æ”¯èŠ‚ç‚¹ï¼š[0m, 1m), [1m, 2m], [2m, +inf] ï¼Œæ¯ä¸ªåˆ†æ”¯èŠ‚ç‚¹å†…éƒ¨éƒ½å¯¹åº”äº†ä¸€äº›äººã€‚åˆ™èº«é«˜è¿™ä¸ªç‰¹å¾åˆ’åˆ†èŠ‚ç‚¹åçš„ä¿¡æ¯ç†µä¹‹å’Œï¼Œä¸æœªåˆ’åˆ†æ—¶çš„ä¿¡æ¯ç†µä¹‹å·®ï¼Œå°±æ˜¯<strong>ä¿¡æ¯å¢ç›Šï¼ˆ information gainï¼‰</strong>ã€‚</p><p>å‡å®šç‰¹å¾ a æœ‰ V ç§å–å€¼ï¼Œåˆ™å¯¹åº” V ç§å¶å­ç»“ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«çš„æ ·æœ¬é›†åˆä¸º $D_v$ ã€‚åˆ™ $D_v$ çš„ä¿¡æ¯ç†µä¸ºï¼š$\text{Entropy}(D_v)$ï¼Œæ­¤æ—¶å…¨éƒ¨æ ·æœ¬æŒ‰ç…§ç‰¹å¾ a è¿›è¡Œåˆ†è£‚çš„ä¿¡æ¯å¢ç›Šä¸º:</p><script type="math/tex; mode=display">\text{Gain}(D, a)=\text{Entropy}(D)-\sum^{V}_{v=1}\frac{|D_v|}{|D|}\text{Entropy}(D_v)</script><p>ä¿¡æ¯å¢ç›Šè¶Šå¤§ï¼Œåˆ™æ„å‘³ç€ä½¿ç”¨å±æ€§ a æ¥è¿›è¡Œåˆ’åˆ†æ‰€è·å¾—çš„â€çº¯åº¦æå‡â€œè¶Šå¤§ã€‚é€šè¿‡éå†æ‰€æœ‰ç‰¹å¾ï¼Œå–å½“å‰èŠ‚ç‚¹å¯¹åº”çš„ä¿¡æ¯å¢ç›Šæœ€å¤§çš„ç‰¹å¾è¿›è¡Œåˆ†è£‚ï¼Œè¿™ç§åšæ³•å°±æ˜¯ ID3 å†³ç­–æ ‘ç”Ÿæˆç®—æ³• æ‰€é‡‡ç”¨çš„ã€‚</p><h3 id="2-3-ä¿¡æ¯å¢ç›Šç‡"><a href="#2-3-ä¿¡æ¯å¢ç›Šç‡" class="headerlink" title="2.3 ä¿¡æ¯å¢ç›Šç‡"></a>2.3 ä¿¡æ¯å¢ç›Šç‡</h3><p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬å‘ç°å•çº¯ä½¿ç”¨ä¿¡æ¯å¢ç›Šè¿›è¡Œåˆ†è£‚ï¼Œåˆ™å†³ç­–æ ‘æ€»æ˜¯è¯•å›¾å…ˆä½¿ç”¨é‚£äº›å–å€¼æ•°ç›®è¾ƒä¸°å¯Œçš„ç‰¹å¾ã€‚å‡å¦‚æ ·æœ¬å­˜åœ¨ç¼–å·ï¼Œå¹¶æŠŠç¼–å·å½“åšåˆ†ç±»ç‰¹å¾ï¼ˆè¿™ä¸ªç‰¹å¾å½“ç„¶æ²¡æœ‰æ„ä¹‰ï¼‰ï¼Œé‚£ä¹ˆ ID3 å°†æ€»ä¼šé€‰æ‹© ç¼–å·ç‰¹å¾ä½œä¸ºå¶ç‰‡çš„åˆ†è£‚ç‰¹å¾ã€‚å› æ­¤éœ€è¦æƒ©ç½šé‚£äº›å…·æœ‰è¿‡å¤šå–å€¼çš„ç‰¹å¾ã€‚</p><p>å…·ä½“åœ°ï¼Œå¯¹æ¯ä¸ªç‰¹å¾çš„ä¿¡æ¯å¢ç›Šï¼Œé™¤ä»¥å›ºæœ‰å€¼ï¼ˆintrinsic valueï¼‰ï¼Œå°±å¾—åˆ°äº†<strong>ä¿¡æ¯å¢ç›Šç‡</strong>ï¼ˆgain ratioï¼‰:</p><script type="math/tex; mode=display">\text{Gain Ratio}(D, a)=\frac{\text{Gain}(D, a)}{\text{IV}(a)}</script><p>å…¶ä¸­</p><script type="math/tex; mode=display">\text{IV}(a)=-\sum^{V}_{v=1}\frac{|D_v|}{|D|}\log{\frac{|D_v|}{|D|}}</script><p>C4.5 å†³ç­–æ ‘ç”Ÿæˆç®—æ³•é‡‡ç”¨äº†è¯¥æ€æƒ³ï¼Œå¹¶åšäº†ä¸€å®šä¼˜åŒ–ï¼šå…ˆä»å€™é€‰ç‰¹å¾é›†åˆä¸­ï¼Œé€‰æ‹©é‚£äº›ä¿¡æ¯å¢ç›Šé«˜äºå¹³å‡æ°´å¹³çš„ç‰¹å¾ï¼Œå†ä»ä¸­é€‰æ‹©ä¿¡æ¯å¢ç›Šç‡æœ€é«˜çš„ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢ä¸€ä¸Šæ¥å°±é€‰æ‹©ä¿¡æ¯å¢ç›Šç‡æœ€å¤§çš„ç‰¹å¾ï¼Œå¯¼è‡´ç®—æ³•æ»‘å‘å¦ä¸€ä¸ªæç«¯ï¼šæ€»æ˜¯é€‰å–å¯å–å€¼æ•°ç›®è¾ƒå°‘çš„é‚£äº›ç‰¹å¾ã€‚</p><h3 id="2-4-åŸºå°¼ç³»æ•°"><a href="#2-4-åŸºå°¼ç³»æ•°" class="headerlink" title="2.4 åŸºå°¼ç³»æ•°"></a>2.4 åŸºå°¼ç³»æ•°</h3><p>é™¤äº†ä½¿ç”¨ä¿¡æ¯ç†µä½œä¸ºè¡¡é‡èŠ‚ç‚¹çº¯åº¦çš„æ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨åŸºå°¼å€¼æ¥è¡¡é‡ã€‚æ•°æ®é›†çš„<strong>åŸºå°¼ç³»æ•°ï¼ˆGiniï¼‰</strong>å¯ä»¥å®šä¹‰ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{align*}\text{Gini}(D) &= \sum^{|Y|}_{k=1}\sum_{k'\neq k}p_k p_{k'} \\               &= 1-\sum^{|Y|}_{k=1}p_k^{2}\end{align*}</script><p>ç›´è§‚æ¥è¯´ï¼Œ$\text{Gini}(D)$ åæ˜ äº†ä»æ•°æ®é›† D ä¸­éšæœºæŠ½å–ä¸¤ä¸ªæ ·æœ¬ï¼Œå…¶ç±»åˆ«æ ‡ç­¾ä¸ä¸€è‡´çš„æ¦‚ç‡ã€‚$\text{Gini}(D)$ è¶Šå°ï¼Œæ•°æ®é›†çš„çº¯åº¦è¶Šé«˜ã€‚</p><p>åˆ™é€‰æ‹©ç‰¹å¾æ—¶ï¼Œåªéœ€éå†ç‰¹å¾å¹¶é€‰æ‹©èƒ½å¤Ÿä»¤èŠ‚ç‚¹çš„åŸºå°¼ç³»æ•°æœ€å°çš„ç‰¹å¾ä½œä¸ºåˆ†è£‚ç‰¹å¾å³å¯ã€‚</p><script type="math/tex; mode=display">\text{Gini Index}(D, a)=\sum_{v=1}^{V}\frac{|D_v|}{|D|}\text{Gini}(D_v)</script><p>è¯¥æ€æƒ³è¢«åº”ç”¨åœ¨ CART ç®—æ³•ä¸­ï¼ŒCARTå†³ç­–æ ‘çš„å…¨ç§°ä¸ºClassification and Regression Treeï¼Œå¯ä»¥åº”ç”¨äºåˆ†ç±»å’Œå›å½’ã€‚</p><h2 id="3-å¦‚ä½•åœæ­¢åˆ†è£‚ï¼Ÿ"><a href="#3-å¦‚ä½•åœæ­¢åˆ†è£‚ï¼Ÿ" class="headerlink" title="3. å¦‚ä½•åœæ­¢åˆ†è£‚ï¼Ÿ"></a>3. å¦‚ä½•åœæ­¢åˆ†è£‚ï¼Ÿ</h2><p>éšç€èŠ‚ç‚¹åˆ’åˆ†é€’å½’è¿›è¡Œï¼Œå†³ç­–æ ‘åˆ†æ”¯å˜å¾—è¿‡å¤šï¼Œç”šè‡³æ¯ä¸ªæ ·æœ¬å¯¹åº” 1 ä¸ªå¶å­ã€‚å¦‚æœä¸å¯¹åˆ†è£‚è¿‡ç¨‹åŠ ä»¥å¹²é¢„ï¼Œå¯èƒ½å¯¼è‡´è®­ç»ƒæ ·æœ¬å‡†ç¡®ç‡ 100%ï¼Œä½†æ˜¯å®é™…é¢„æµ‹æ—¶æ•ˆæœæå·®ï¼Œè¿™å°±æ˜¯è¿‡æ‹Ÿåˆï¼ˆoverfittingï¼‰ç°è±¡ã€‚</p><p>ä¸ºäº†è§„é¿è¿‡æ‹Ÿåˆç°è±¡ï¼Œæˆ‘ä»¬å¯ä»¥æå‰ç»ˆæ­¢åˆ†è£‚ï¼Œæˆ–è€…åœ¨ç”Ÿæˆå®Œæ¯•çš„æ ‘ç»“æ„ä¸Šä¿®å‰ªéƒ¨åˆ†åˆ†æ”¯ã€‚</p><h3 id="3-1-é¢„å‰ªæï¼ˆæå‰ç»ˆäºè§„åˆ™ï¼‰ï¼š"><a href="#3-1-é¢„å‰ªæï¼ˆæå‰ç»ˆäºè§„åˆ™ï¼‰ï¼š" class="headerlink" title="3.1 é¢„å‰ªæï¼ˆæå‰ç»ˆäºè§„åˆ™ï¼‰ï¼š"></a>3.1 é¢„å‰ªæï¼ˆæå‰ç»ˆäºè§„åˆ™ï¼‰ï¼š</h3><p>åœæ­¢ç”Ÿé•¿çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚å¯ä»¥å½“è§‚å¯Ÿåˆ°çš„ä¸çº¯æ€§åº¦é‡çš„å¢ç›Šä½äºæŸä¸ªç¡®å®šçš„é˜ˆå€¼æ—¶å°±åœæ­¢æ‰©å±•å¶ç»“ç‚¹ï¼›å½“åˆ†è£‚åçš„å‡†ç¡®ç‡ä¸‹é™æ—¶åœæ­¢åˆ†è£‚ï¼›æˆ–è€…å¹²è„†é™åˆ¶æ ‘çš„é«˜åº¦ç­‰ã€‚</p><p>é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œé™åˆ¶äº§å‡ºè¿‡äºå¤æ‚çš„å­æ ‘ï¼Œå‡å°‘äº†è®­ç»ƒæ—¶é—´ã€‚åœ¨ Sklearn ä¸­æœ‰å…·ä½“çš„å®ç°ã€‚</p><blockquote><p><strong>Sklearn ä¸­çš„é¢„å‰ªææ“ä½œ</strong></p></blockquote><p>Sklearn æ˜¯ python çš„ä¸€ä¸ªæœºå™¨å­¦ä¹ å·¥å…·åŒ…ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®ç°å„ç§æœºå™¨å­¦ä¹ ç®—æ³•ã€‚åœ¨ Sklearn ä¸­ï¼Œå†³ç­–æ ‘æœ‰å¦‚ä¸‹å‚æ•°ï¼Œæ§åˆ¶é¢„å‰ªæè¿‡ç¨‹ï¼š</p><ol><li>max_depthï¼Œ æœ€å¸¸ç”¨ï¼Œé™åˆ¶æ ‘çš„æœ€å¤§æ·±åº¦ã€‚åœ¨æ ·æœ¬é‡è¾ƒå°‘æ—¶å¾ˆæœ‰ç”¨ã€‚</li><li>min_samples_leafï¼Œ æ¯ä¸ªç»“ç‚¹åŒ…å«çš„æœ€å°‘æ ·æœ¬é‡ã€‚å¦‚æœåˆ†è£‚åï¼Œå­˜åœ¨ä¸€ä¸ªå­å¶ï¼Œæ ·æœ¬é‡è¿‡å°‘ï¼Œåˆ™æ²¡å¿…è¦åˆ†è£‚ã€‚</li><li>min_samples_splitï¼Œ æ¯ä¸ªèŠ‚ç‚¹åŒ…å«çš„æœ€å°‘æ ·æœ¬é‡ã€‚å¦‚æœåˆ†è£‚å‰ï¼ŒèŠ‚ç‚¹åŒ…å«è¿‡å°‘çš„æ ·æœ¬ï¼Œåˆ™æ²¡å¿…è¦åˆ†è£‚ã€‚å’Œä¸Šä¸ªå‚æ•°çš„å«ä¹‰ç›¸åŒã€‚</li><li>max_featuresï¼Œ é™åˆ¶åˆ†è£‚æ—¶è€ƒè™‘çš„ç‰¹å¾ä¸ªæ•°ï¼Œè¶…è¿‡é™åˆ¶ä¸ªæ•°çš„ç‰¹å¾éƒ½ä¼šè¢«èˆå¼ƒã€‚è¯¥å‚æ•°æ¯”è¾ƒæš´åŠ›ï¼Œä½¿ç”¨é¢‘ç‡è¾ƒä½ã€‚</li><li>min_impurity_decreaseï¼Œ é™åˆ¶ä¿¡æ¯å¢ç›Šçš„å¤§å°ï¼Œä¿¡æ¯å¢ç›Šå°äºè®¾å®šæ•°å€¼çš„åˆ†è£‚ä¸ä¼šå‘ç”Ÿã€‚</li></ol><h3 id="3-2-åå‰ªæï¼š"><a href="#3-2-åå‰ªæï¼š" class="headerlink" title="3.2 åå‰ªæï¼š"></a>3.2 åå‰ªæï¼š</h3><p>åˆå§‹å†³ç­–æ ‘æŒ‰ç…§æœ€å¤§è§„æ¨¡ç”Ÿé•¿ï¼Œç„¶åè¿›è¡Œå‰ªæçš„æ­¥éª¤ï¼ŒæŒ‰ç…§è‡ªåº•å‘ä¸Šçš„æ–¹å¼ä¿®å‰ªå®Œå…¨å¢é•¿ç„¶åä¿®å‰ªã€‚</p><p>ä¿®å‰ªæœ‰ä¸¤ç§åšæ³•ï¼š</p><ol><li>ç”¨æ–°çš„å¶å­èŠ‚ç‚¹æ›¿æ¢å­æ ‘ï¼Œè¯¥å¶ç»“ç‚¹çš„ç±»æ ‡å·ç”±å­æ ‘ä¸‹è®°å½•ä¸­çš„å¤šæ•°ç±»å†³å®šã€‚å­æ ‘æ›¿æ¢</li><li>ç”¨å­æ ‘ä¸­æœ€å¸¸ä½¿ç”¨çš„åˆ†æ”¯ä»£æ›¿å­æ ‘ã€‚å½“æ¨¡å‹ä¸èƒ½å†æ”¹è¿›æ—¶ç»ˆæ­¢å‰ªææ­¥éª¤ã€‚å­æ ‘æå‡</li></ol><p>åå‰ªæçš„æ³›åŒ–æ€§èƒ½å¾€å¾€å¼ºäºåªä½¿ç”¨é¢„å‰ªæçš„å†³ç­–æ ‘ï¼Œä½†æ˜¯åå‰ªæéœ€è¦å…ˆäº§å‡ºå®Œæ•´çš„æ ‘å†å‰ªæï¼Œæ—¶é—´å’Œç©ºé—´æˆæœ¬è¦æ›´é«˜ã€‚å¦å¤–ï¼ŒSklearn ä¸­æ²¡æœ‰ä¸“é—¨é’ˆå¯¹åå‰ªæçš„å®ç°æ–¹æ³•ã€‚</p><h2 id="4-å¦‚ä½•å¤„ç†è¿ç»­ã€ç¼ºå¤±å€¼"><a href="#4-å¦‚ä½•å¤„ç†è¿ç»­ã€ç¼ºå¤±å€¼" class="headerlink" title="4. å¦‚ä½•å¤„ç†è¿ç»­ã€ç¼ºå¤±å€¼"></a>4. å¦‚ä½•å¤„ç†è¿ç»­ã€ç¼ºå¤±å€¼</h2><p>å†³ç­–æ ‘çš„ä¸€å¤§ä¼˜åŠ¿æ˜¯å¯ä»¥ä¸åŠ é¢„å¤„ç†åœ°åº”å¯¹ç¦»æ•£å’Œè¿ç»­ä¸¤ç§è¾“å…¥ï¼Œå¹¶èƒ½å¤Ÿçµæ´»åº”å¯¹æ•°æ®é›†ä¸­éƒ¨åˆ†æ ·æœ¬çš„ç‰¹å¾ç¼ºå¤±æƒ…å†µï¼Œè¿™ä»¤å†³ç­–æ ‘ç®—æ³•çš„é€‚ç”¨åœºæ™¯ååˆ†å®½å¹¿ã€‚</p><p>éœ€è¦æå‰å£°æ˜ï¼Œä¸åŒå†³ç­–æ ‘ç”Ÿæˆç®—æ³•ä¼šé‡‡ç”¨ä¸åŒçš„å¤„ç†ç­–ç•¥ï¼Œä¸‹é¢ä¸¾çš„ä¾‹å­å¦‚æœæ²¡æœ‰å•ç‹¬å£°æ˜ï¼Œéƒ½æ˜¯ C4.5 ç®—æ³•çš„å¤„ç†ç­–ç•¥ã€‚</p><h3 id="4-1-è¿ç»­å€¼å¦‚ä½•åˆ’åˆ†ï¼Ÿ"><a href="#4-1-è¿ç»­å€¼å¦‚ä½•åˆ’åˆ†ï¼Ÿ" class="headerlink" title="4.1 è¿ç»­å€¼å¦‚ä½•åˆ’åˆ†ï¼Ÿ"></a>4.1 è¿ç»­å€¼å¦‚ä½•åˆ’åˆ†ï¼Ÿ</h3><p>å¦‚æœæˆ‘ä»¬è¦ä»¥â€èº«é«˜â€œä¸ºç‰¹å¾è¿›è¡Œåˆ†è£‚ï¼Œä½†æ˜¯â€œèº«é«˜â€æ˜¯ä¸€ä¸ªè¿ç»­å€¼ï¼Œæ— æ³•æšä¸¾æ‰€æœ‰æƒ…å†µï¼Œå¦‚ä½•åˆ†è£‚å‘¢ï¼Ÿ</p><p>è½¬æ¢ä¸€ä¸‹æ€è·¯ï¼Œè™½ç„¶â€œèº«é«˜â€æ— æ³•æšä¸¾ï¼Œä½†æ˜¯æ•°æ®é›†æ˜¯å¯ä»¥éå†çš„ã€‚å°†è¯¥èŠ‚ç‚¹å†…çš„æ‰€æœ‰æ•°æ®çš„èº«é«˜å–å‡ºæ¥ï¼ŒæŒ‰ç…§å¤§å°æ’åºï¼Œç„¶åéå†æ‰€æœ‰æ½œåœ¨çš„åˆ†è£‚ç‚¹ï¼Œä¾æ¬¡è®¡ç®—çº¯åº¦å³å¯å°†è¿ç»­å€¼åˆ’åˆ†ä¸ºä¸¤æ®µä¸è¿ç»­çš„åŒºé—´ï¼Œå–æœ€é«˜çš„çº¯åº¦ä¸ºåŒºé—´åˆ†å‰²ç‚¹ï¼Œè¿›è€Œåˆ†è£‚ä¸ºä¸¤ä¸ªä¸åŒçš„èŠ‚ç‚¹ã€‚</p><h3 id="4-2-å¦‚ä½•å¤„ç†ç‰¹å¾ç¼ºå¤±ï¼Ÿ"><a href="#4-2-å¦‚ä½•å¤„ç†ç‰¹å¾ç¼ºå¤±ï¼Ÿ" class="headerlink" title="4.2 å¦‚ä½•å¤„ç†ç‰¹å¾ç¼ºå¤±ï¼Ÿ"></a>4.2 å¦‚ä½•å¤„ç†ç‰¹å¾ç¼ºå¤±ï¼Ÿ</h3><p><img src="/2022/05/22/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%86%B3%E7%AD%96%E6%A0%91%E7%AE%97%E6%B3%95/æ•°æ®ç¼ºå¤±.png" alt></p><p>æ•°æ®çš„ç‰¹å¾ç¼ºå¤±ç°è±¡å¾ˆæ™®éï¼Œå¸¸è§çš„ç¼ºå¤±æ•°æ®å¤„ç†æ–¹æ³•æœ‰ï¼š</p><p><strong>1ï¼‰æŠ›å¼ƒç¼ºå¤±å€¼</strong></p><p>æŠ›å¼ƒæå°‘é‡çš„ç¼ºå¤±å€¼çš„æ ·æœ¬å¯¹å†³ç­–æ ‘çš„åˆ›å»ºå½±å“ä¸æ˜¯å¤ªå¤§ã€‚ä½†æ˜¯å¦‚æœå±æ€§ç¼ºå¤±å€¼è¾ƒå¤šæˆ–æ˜¯å…³é”®å±æ€§å€¼ç¼ºå¤±ï¼Œåˆ›å»ºçš„å†³ç­–æ ‘å°†æ˜¯ä¸å®Œå…¨çš„ï¼ŒåŒæ—¶å¯èƒ½ç»™ç”¨æˆ·é€ æˆçŸ¥è¯†ä¸Šçš„å¤§é‡é”™è¯¯ä¿¡æ¯ï¼Œæ‰€ä»¥æŠ›å¼ƒç¼ºå¤±å€¼ä¸€èˆ¬ä¸é‡‡ç”¨ã€‚</p><p>åªæœ‰åœ¨æ•°æ®åº“å…·æœ‰æå°‘é‡çš„ç¼ºå¤±å€¼åŒæ—¶ç¼ºå¤±å€¼ä¸æ˜¯å…³é”®çš„å±æ€§å€¼æ—¶ï¼Œä¸”ä¸ºäº†åŠ å¿«åˆ›å»ºå†³ç­–æ ‘çš„é€Ÿåº¦ï¼Œæ‰é‡‡ç”¨æŠ›å¼ƒå±æ€§ç¼ºå¤±å€¼çš„æ–¹å¼åˆ›å»ºå†³ç­–æ ‘ã€‚</p><p>ID3 ç”Ÿæˆç®—æ³•æ— æ³•åº”å¯¹ç¼ºå¤±å€¼ï¼Œå› æ­¤è¦æƒ³ä½¿ç”¨ ID3 ç®—æ³•ç”Ÿæˆå†³ç­–æ ‘å°±åªèƒ½æŠ›å¼ƒç¼ºå¤±å€¼ã€‚</p><p><strong>2ï¼‰è¡¥å……ç¼ºå¤±å€¼</strong></p><p>å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå¸¸é‡æ¥å¡«å……ç¼ºå¤±å€¼ï¼Œæ¯”å¦‚â€œUnknownâ€æˆ–è€… 0ï¼›ä½†æ˜¯æ›´å¸¸è§çš„æ˜¯ä½¿ç”¨ç¼ºå¤±æ•°å€¼æ‰€åœ¨è¡Œæˆ–åˆ—çš„å‡å€¼ã€ä¸­ä½æ•°ã€ä¼—æ•°æ¥æ›¿ä»£ç¼ºå¤±å€¼ã€‚åè€…è¿™ç§æ–¹æ³•ç§°ä¸ºæ’å€¼æ³•ï¼ˆImputationï¼‰ï¼Œè¢«åº”ç”¨åœ¨ QUESTã€CRUISE ç­‰å†³ç­–æ ‘ç”Ÿæˆç®—æ³•ä¸­ã€‚</p><p>ç¼ºå¤±å€¼è¾ƒå°‘æ—¶æŒ‰ç…§æˆ‘ä»¬ä¸Šé¢çš„è¡¥å……è§„åˆ™æ˜¯å¯è¡Œçš„ã€‚ä½†å¦‚æœæ•°æ®åº“çš„æ•°æ®è¾ƒå¤§ã€ç¼ºå¤±å€¼è¾ƒå¤šï¼Œè¿™æ ·æ ¹æ®å¡«å……åçš„æ•°æ®åº“åˆ›å»ºçš„å†³ç­–æ ‘å¯èƒ½å’Œæ ¹æ®æ­£ç¡®å€¼åˆ›å»ºçš„å†³ç­–æ ‘æœ‰å¾ˆå¤§å˜åŒ–ã€‚</p><p><strong>3ï¼‰æ¦‚ç‡åŒ–ç¼ºå¤±å€¼</strong></p><p>æ¦‚ç‡æƒé‡ï¼ˆProbability weightsï¼‰ï¼Œæ˜¯ C4.5 ç®—æ³•æ‰€é‡‡çº³çš„ã€‚</p><p>å®ƒçš„æ€æƒ³æ˜¯å¯¹ç¼ºå¤±å€¼çš„æ ·æœ¬èµ‹äºˆè¯¥å±æ€§æ‰€æœ‰å±æ€§å€¼çš„æ¦‚ç‡åˆ†å¸ƒï¼Œå³å°†ç¼ºå¤±å€¼æŒ‰ç…§å…¶æ‰€åœ¨å±æ€§å·²çŸ¥å€¼çš„ç›¸å¯¹æ¦‚ç‡åˆ†å¸ƒæ¥åˆ›å»ºå†³ç­–æ ‘ã€‚</p><p>é¦–å…ˆéœ€è¦é€‰æ‹©æœ€ä¼˜ç‰¹å¾ã€‚ä¸€å…± 1000 ä¸ªè¥¿ç“œï¼Œå¦‚æœåªçŸ¥é“ 500 ä¸ªçš„è¥¿ç“œçš„å“ç§ï¼Œå…¶ä»– 500 ä¸ªä¸çŸ¥é“ï¼Œåˆ™è¯¥ç‰¹å¾æœ€ç»ˆè®¡ç®—å‡ºæ¥çš„ä¿¡æ¯å¢ç›Šç‡ï¼Œå°±è¦ä¹˜ä¸Š 500/1000=0.5ã€‚</p><p>å…¶ä»–ç‰¹å¾å¦‚æœå­˜åœ¨ç¼ºå¤±å€¼ï¼Œä¹Ÿæ˜¯å…ˆå¿½ç•¥æ‰€æœ‰ç¼ºå¤±å€¼ï¼Œè®¡ç®—å‡ºæ¥ä¿¡æ¯å¢ç›Šç‡ä¹‹åï¼Œä¹˜ä¸Š 1-ç¼ºå¤±å€¼å æ¯”ã€‚</p><p>ä½†å¦‚æœæœ€ä¼˜ç‰¹å¾ä¹Ÿå­˜åœ¨ç¼ºå¤±å€¼ï¼Œå¦‚ä½•é€‰æ‹©åˆ†è£‚ç‚¹å‘¢ï¼Ÿ</p><p>åˆ™æˆ‘ä»¬éœ€è¦é™ä½ç¼ºå¤±å€¼åœ¨è®¡ç®—ä¸­çš„æƒé‡ï¼Œä¸æŠŠç¼ºå¤±å€¼å½“åšä¸€ä¸ªå®Œæ•´çš„æ ·æœ¬çœ‹å¾…ã€‚</p><p>å‡è®¾å­˜åœ¨ 1000 ä¸ªæ ·æœ¬ï¼Œå…¶ä¸­ 500 ä¸ªæ ·æœ¬ç¼ºå°‘è¯¥ç‰¹å¾ï¼Œå‰©ä½™ 500 ä¸ªå®Œæ•´çš„æ ·æœ¬ã€‚è¿™ 500 ä¸ªå®Œæ•´çš„æ ·æœ¬æœ€ç»ˆä¼šåˆ†è£‚æˆäº”ä¸ªå­èŠ‚ç‚¹ï¼Œåˆ†åˆ«å¯¹åº” 100/100/100/100/100ä¸ªæ ·æœ¬ï¼Œåˆ™ç¼ºå¤±çš„æ¯ä¸ª 500 ä¸ªæ ·æœ¬çš„æƒé‡å°±æ˜¯ 1/5ã€‚</p><p>é™¤äº†è¯¥æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„æ–¹æ³•ï¼š</p><p><strong>4ï¼‰æ›¿ä»£æ³•ï¼ˆAlternate/Surrogate Splitsï¼‰</strong></p><p>è¯¥æ–¹æ³•æ˜¯ CART å†³ç­–æ ‘ä½¿ç”¨çš„æ–¹æ³•ã€‚</p><p>åœ¨é€‰æ‹©ç‰¹å¾æ—¶ï¼ŒCART ä½¿ç”¨å’Œ C4.5 ç±»ä¼¼çš„æ–¹æ³•ï¼Œå³æœ€ç»ˆçš„åŸºå°¼ç³»æ•°ä¹˜ä»¥ 1-ç¼ºå¤±å€¼å æ¯”ï¼Œæ¥é€‰æ‹©åˆ†è£‚ç‰¹å¾ã€‚</p><p>ä½†æ˜¯å½“å†³å®šåˆ†è£‚ç‰¹å¾åï¼Œå¦‚æœè¯¥ç‰¹å¾å­˜åœ¨ç¼ºå¤±å€¼ï¼ŒCART ä¼šæŸ¥æ‰¾å…¶ä»–ä¸å­˜åœ¨ç¼ºå¤±å€¼çš„ç‰¹å¾ï¼Œé€‰æ‹©ä¸€ä¸ªä¸è¯¥ç‰¹å¾åˆ†è£‚ååŸºå°¼å¢ç›Šæœ€æ¥è¿‘çš„ç‰¹å¾ï¼Œå€ŸåŠ©è¯¥ç‰¹å¾è¿›è¡Œåˆ†è£‚ã€‚</p><p>ä½†æ˜¯å¦‚æœæ²¡æœ‰ä¸å­˜åœ¨ç¼ºå¤±å€¼çš„ç‰¹å¾ï¼Œæˆ–è€…æœ¬ç‰¹å¾ä¸å…¶ä»–ç‰¹å¾çš„åŸºå°¼å¢ç›Šç›¸å·®è¿‡å¤§çš„æƒ…å†µï¼Œç¼ºå¤±å€¼é»˜è®¤è¿›å…¥æ ·æœ¬æœ€å¤šçš„å¶å­ç»“ç‚¹ã€‚</p><p>è¿™æ ·åšçš„ç¼ºç‚¹æ˜¯è®¡ç®—é‡éå¸¸å¤§ï¼Œæˆ‘ä»¬éœ€è¦éå†å…¶ä»–æ‰€æœ‰ç‰¹å¾æ¥å†³å®šé€‰æ‹©å“ªä¸ªç‰¹å¾ä½œä¸ºä»£ç†ã€‚</p><p>å¦å¤–ï¼Œsklearn å®ç°çš„ CART æ ‘æ— æ³•å¤„ç†ç¼ºå¤±å€¼ã€‚</p><h2 id="5-æ€»ç»“"><a href="#5-æ€»ç»“" class="headerlink" title="5. æ€»ç»“"></a>5. æ€»ç»“</h2><div class="table-container"><table><thead><tr><th>å†³ç­–æ ‘ç®—æ³•</th><th>åˆ†ç±»æ–¹æ³•</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>ID3</td><td>ä¿¡æ¯å¢ç›Š</td><td></td><td>æ€»æ˜¯è¯•å›¾å…ˆä½¿ç”¨é‚£äº›å–å€¼æ•°ç›®è¾ƒä¸°å¯Œçš„ç‰¹å¾ï¼›<br>æ— å‰ªæç­–ç•¥ï¼Œå®¹æ˜“è¿‡æ‹Ÿåˆï¼›<br>åªèƒ½å¤„ç†ç¦»æ•£æ•°æ®ï¼›<br>åªèƒ½å¤„ç†åˆ†ç±»é—®é¢˜ï¼›<br>æ²¡æœ‰è€ƒè™‘ç¼ºå¤±å€¼</td></tr><tr><td>C4.5</td><td>ä¿¡æ¯å¢ç›Šç‡</td><td>æ”¹è¿›äº† ID3 å¯¹å–å€¼ä¸°å¯Œçš„ç‰¹å¾çš„åå¥½ï¼›<br>å¼•å…¥äº†å‰ªæçš„æ¦‚å¿µï¼ˆæ‚²è§‚å‰ªæï¼‰ï¼›<br>å¼•å…¥äº†å¯¹è¿ç»­å€¼çš„äºŒåˆ†å¤„ç†ï¼›<br>å¼•å…¥äº†å¯¹ç¼ºå¤±å€¼çš„å¤„ç†</td><td>å¤šå‰æ ‘æ•ˆç‡ä½ï¼›<br>å¢ç›Šçš„è®¡ç®—åªèƒ½é’ˆå¯¹ç±»åˆ«æ ‡ç­¾ï¼Œå› æ­¤åªèƒ½ç”¨äºåˆ†ç±»ï¼›<br>è®¡ç®—ç†µçš„å¯¹æ•°è¿ç®—ã€è¿ç»­å€¼çš„æ’åºå¾ˆè€—æ—¶</td></tr><tr><td>CART</td><td>åŸºå°¼ç³»æ•°</td><td>ä½¿ç”¨äºŒå‰æ ‘ï¼Œåˆ†è£‚æ•ˆç‡é«˜ï¼›å¯ä»¥å¤„ç†è¿ç»­å’Œç¦»æ•£å€¼ï¼›giniå¯ä»¥å¤„ç†åˆ†ç±»å’Œå›å½’é—®é¢˜ï¼›gini è®¡ç®—é‡ä½</td><td>ç¼ºå¤±å€¼å¤„ç†æ—¶éœ€è¦éå†å…¶ä»–æ‰€æœ‰ç‰¹å¾ï¼Œè®¡ç®—é‡å¾ˆå¤§ï¼Œä½†æ˜¯æ•ˆæœæå‡æœ‰é™</td></tr></tbody></table></div><p>æœ¬ç¯‡ç¬”è®°æ•´ç†äº†å†³ç­–æ ‘çš„ç»å…¸ç”Ÿæˆç®—æ³•ï¼ŒåŒ…æ‹¬ ID3ã€C4.5ã€CARTï¼Œæ¯”è¾ƒäº†ä»–ä»¬çš„å¼‚åŒï¼Œå¹¶å•ç‹¬è®¨è®ºäº†å‰ªæå’Œè¿ç»­å€¼ã€ç¼ºå¤±å€¼å¤„ç†æ“ä½œã€‚</p><p>å®é™…ä¸Šåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬æ›´å¤šçš„æ˜¯ä½¿ç”¨é›†æˆå­¦ä¹ ç®—æ³•ï¼Œæ•´åˆå¤šé¢—å†³ç­–æ ‘ï¼Œæ„å»ºæ€§èƒ½æ›´å¥½çš„æ¨¡å‹ï¼Œæ¯”å¦‚éšæœºæ£®æ—ã€æ¢¯åº¦æå‡æ ‘ç­‰ã€‚</p><p>åç»­ä¼šä»‹ç» éšæœºæ£®æ—ã€GBDTã€XGBoostã€LightGBM ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>machine learning</tag>
      
      <tag>decision tree</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘å¦‚ä½•ä½¿ç”¨æ ‘æ¨¡å‹é¢„æµ‹ç»“æ„åŒ–æ•°æ®</title>
    <link href="/2022/03/06/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E6%A0%91%E6%A8%A1%E5%9E%8B%E9%A2%84%E6%B5%8B%E7%BB%93%E6%9E%84%E5%8C%96%E6%95%B0%E6%8D%AE/"/>
    <url>/2022/03/06/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E6%A0%91%E6%A8%A1%E5%9E%8B%E9%A2%84%E6%B5%8B%E7%BB%93%E6%9E%84%E5%8C%96%E6%95%B0%E6%8D%AE/</url>
    
    <content type="html"><![CDATA[<p>TODO</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘Attentionå’ŒTransformer</title>
    <link href="/2021/08/18/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Attention%E5%92%8CTransformer/"/>
    <url>/2021/08/18/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Attention%E5%92%8CTransformer/</url>
    
    <content type="html"><![CDATA[<p>åˆ†äº«ä¸‹çŸ¥è¯†ï¼Œä»‹ç»ä¸‹æˆ‘å¯¹Attentionçš„ç†è§£ï¼Œç„¶ååˆ©ç”¨Tensorflowå®ç°ä¸€ä¸ªå®Œæ•´çš„Transformeræ¨¡å‹ã€‚</p><!--more---><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><h2 id="å¸¸è§çš„NLPä»»åŠ¡"><a href="#å¸¸è§çš„NLPä»»åŠ¡" class="headerlink" title="å¸¸è§çš„NLPä»»åŠ¡"></a>å¸¸è§çš„NLPä»»åŠ¡</h2><p>æ–‡æœ¬åˆ†ç±»ï¼Œå®ä½“æŠ½å–ç­‰</p><h1 id="Attention"><a href="#Attention" class="headerlink" title="Attention"></a>Attention</h1><p>Attentionæ˜¯ä¸€ç§ç¼–ç æœºåˆ¶ï¼Œæœ€åˆæ˜¯ç”¨äºè§£å†³æœºå™¨ç¿»è¯‘ï¼ˆseq2seqä»»åŠ¡ï¼‰çš„é•¿ç¨‹é—å¿˜é—®é¢˜ã€‚å› ä¸ºåŸºäºRNNæ¨¡å‹ä¸èƒ½å¾ˆå¥½åœ°åº”å¯¹é•¿æ–‡æœ¬çš„ç¿»è¯‘ï¼Œå³ä¾¿æ˜¯LSTMä¹Ÿå—é™äºåºåˆ—é•¿åº¦ç­‰å› ç´ çš„å½±å“ã€‚è€ŒAttentionå¯ä»¥é€šè¿‡è®­ç»ƒä¸€ä¸ªåŠ¨æ€çš„å‚æ•°çŸ©é˜µï¼Œå†³å®šå…³æ³¨é•¿æ–‡æœ¬çš„å“ªäº›éƒ¨åˆ†ã€‚Attentionçš„ä¸€ä¸ªä¼˜ç‚¹æ˜¯ï¼Œç›¸è¾ƒäºLSTMçš„åŸºäºæ—¶é—´çš„åå“ä¼ æ’­ç®—æ³•ï¼ŒAttentionçš„è®¡ç®—å¯ä»¥å¹¶è¡ŒåŒ–ï¼Œè¿™ä¸ºå…¶å †å æ¯”è¾ƒåºå¤§çš„æ¨¡å‹æ‰“ä¸‹äº†åŸºç¡€ã€‚</p><h1 id="self-attention"><a href="#self-attention" class="headerlink" title="self-attention"></a>self-attention</h1><p>Attentionæœºåˆ¶å…¶å®ç”¨åœ¨RNNçš„æœºå™¨ç¿»è¯‘æ¨¡å‹ä¸Šå°±å·²ç»å¯ä»¥æå‡æœºå™¨ç¿»è¯‘æ¨¡å‹çš„æ•ˆæœäº†ï¼Œäºæ˜¯æœ‰äººæƒ³ï¼Œä¸å¦‚æˆ‘ä»¬ç›´æ¥æŠŠRNNä»æ¨¡å‹ä¸­æ‘˜æ‰ï¼Œä¸ç®¡encoderå’Œdecoderéƒ½ä½¿ç”¨Attentionè®¡ç®—å•å…ƒï¼Œæ€§èƒ½ä¸å°±æ›´å¥½äº†ï¼Ÿè¿™ä¹Ÿæ˜¯Attention is all you need è¿™ç¯‡è®ºæ–‡çš„ç”±æ¥ã€‚</p><h1 id="Transformer"><a href="#Transformer" class="headerlink" title="Transformer"></a>Transformer</h1><p>Transformeræ˜¯ç”±Attentionæ¨¡å—ç»„æˆçš„è®¡ç®—å•å…ƒã€‚</p><p>åœ¨encoderé˜¶æ®µï¼Œç”±6ä¸ªself-attentionæ¨¡å—ç»„æˆçš„å¤šå±‚ç¼–ç å™¨è´Ÿè´£ç¼–ç è¿ç®—ï¼Œæœ€åä½¿ç”¨ä¸€å±‚å‰é¦ˆç¥ç»ç½‘ç»œæ±‡æ€»ï¼ˆå…¶å®å°±æ˜¯åŠ æƒæ±‡æ€»ï¼‰ï¼›åœ¨decoderæ–¹é¢ï¼Œè¾“å…¥ä¸ä½†æœ‰ç¼–ç å™¨ä¼ è¿›æ¥çš„ä¸€éƒ¨åˆ†ä¿¡æ¯ï¼Œè€Œä¸”è¿˜æœ‰å¥å­æœ¬èº«ã€‚</p><p>Transformeré‡Œé¢ä½¿ç”¨å¤šç§Attentionï¼Œå…³æ³¨åºåˆ—çš„ä¸åŒå±‚æ¬¡çš„ä¿¡æ¯ï¼Œè¿™ç§å«åšå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶ã€‚åœ¨RNNæ¨ªè¡Œå¤©ä¸‹çš„æ—¶ä»£ï¼Œè¿™ç§å †å æ¨¡å¼å¸¦æ¥çš„åºå¤§è®­ç»ƒå’Œæ¨ç†è´Ÿæ‹…ä½¿å¾—éš¾ä»¥æ¨åŠ¨æ­¤ç±»æ¨¡å‹ä¸Šçº¿ã€‚</p><pre><code class="lang-py">class MultiheadAttention(nn.Module):    # n_headsï¼šå¤šå¤´æ³¨æ„åŠ›çš„æ•°é‡    # hid_dimï¼šæ¯ä¸ªè¯è¾“å‡ºçš„å‘é‡ç»´åº¦    def __init__(self, hid_dim, n_heads, dropout):        super(MultiheadAttention, self).__init__()        self.hid_dim = hid_dim        self.n_heads = n_heads        # å¼ºåˆ¶ hid_dim å¿…é¡»æ•´é™¤ h        assert hid_dim % n_heads == 0        # å®šä¹‰ W_q çŸ©é˜µ        self.w_q = nn.Linear(hid_dim, hid_dim)        # å®šä¹‰ W_k çŸ©é˜µ        self.w_k = nn.Linear(hid_dim, hid_dim)        # å®šä¹‰ W_v çŸ©é˜µ        self.w_v = nn.Linear(hid_dim, hid_dim)        self.fc = nn.Linear(hid_dim, hid_dim)        self.do = nn.Dropout(dropout)        # ç¼©æ”¾        self.scale = torch.sqrt(torch.FloatTensor([hid_dim // n_heads]))    def forward(self, query, key, value, mask=None):        # K: [64,10,300], batch_size ä¸º 64ï¼Œæœ‰ 12 ä¸ªè¯ï¼Œæ¯ä¸ªè¯çš„ Query å‘é‡æ˜¯ 300 ç»´        # V: [64,10,300], batch_size ä¸º 64ï¼Œæœ‰ 10 ä¸ªè¯ï¼Œæ¯ä¸ªè¯çš„ Query å‘é‡æ˜¯ 300 ç»´        # Q: [64,12,300], batch_size ä¸º 64ï¼Œæœ‰ 10 ä¸ªè¯ï¼Œæ¯ä¸ªè¯çš„ Query å‘é‡æ˜¯ 300 ç»´        bsz = query.shape[0]        Q = self.w_q(query)        K = self.w_k(key)        V = self.w_v(value)        # è¿™é‡ŒæŠŠ K Q V çŸ©é˜µæ‹†åˆ†ä¸ºå¤šç»„æ³¨æ„åŠ›ï¼Œå˜æˆäº†ä¸€ä¸ª 4 ç»´çš„çŸ©é˜µ        # æœ€åä¸€ç»´å°±æ˜¯æ˜¯ç”¨ self.hid_dim // self.n_heads æ¥å¾—åˆ°çš„ï¼Œè¡¨ç¤ºæ¯ç»„æ³¨æ„åŠ›çš„å‘é‡é•¿åº¦, æ¯ä¸ª head çš„å‘é‡é•¿åº¦æ˜¯ï¼š300/6=50        # 64 è¡¨ç¤º batch sizeï¼Œ6 è¡¨ç¤ºæœ‰ 6ç»„æ³¨æ„åŠ›ï¼Œ10 è¡¨ç¤ºæœ‰ 10 è¯ï¼Œ50 è¡¨ç¤ºæ¯ç»„æ³¨æ„åŠ›çš„è¯çš„å‘é‡é•¿åº¦        # K: [64,10,300] æ‹†åˆ†å¤šç»„æ³¨æ„åŠ› -&gt; [64,10,6,50] è½¬ç½®å¾—åˆ° -&gt; [64,6,10,50]        # V: [64,10,300] æ‹†åˆ†å¤šç»„æ³¨æ„åŠ› -&gt; [64,10,6,50] è½¬ç½®å¾—åˆ° -&gt; [64,6,10,50]        # Q: [64,12,300] æ‹†åˆ†å¤šç»„æ³¨æ„åŠ› -&gt; [64,12,6,50] è½¬ç½®å¾—åˆ° -&gt; [64,6,12,50]        # è½¬ç½®æ˜¯ä¸ºäº†æŠŠæ³¨æ„åŠ›çš„æ•°é‡ 6 æ”¾åˆ°å‰é¢ï¼ŒæŠŠ 10 å’Œ 50 æ”¾åˆ°åé¢ï¼Œæ–¹ä¾¿ä¸‹é¢è®¡ç®—        Q = Q.view(bsz, -1, self.n_heads, self.hid_dim //                   self.n_heads).permute(0, 2, 1, 3)        K = K.view(bsz, -1, self.n_heads, self.hid_dim //                   self.n_heads).permute(0, 2, 1, 3)        V = V.view(bsz, -1, self.n_heads, self.hid_dim //                   self.n_heads).permute(0, 2, 1, 3)        # ç¬¬ 1 æ­¥ï¼šQ ä¹˜ä»¥ Kçš„è½¬ç½®ï¼Œé™¤ä»¥scale        # [64,6,12,50] * [64,6,50,10] = [64,6,12,10]        # attentionï¼š[64,6,12,10]        attention = torch.matmul(Q, K.permute(0, 1, 3, 2)) / self.scale        # æŠŠ mask ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆå°±æŠŠ mask ä¸º 0 çš„ä½ç½®çš„ attention åˆ†æ•°è®¾ç½®ä¸º -1e10        if mask isnotNone:            attention = attention.masked_fill(mask == 0, -1e10)        # ç¬¬ 2 æ­¥ï¼šè®¡ç®—ä¸Šä¸€æ­¥ç»“æœçš„ softmaxï¼Œå†ç»è¿‡ dropoutï¼Œå¾—åˆ° attentionã€‚        # æ³¨æ„ï¼Œè¿™é‡Œæ˜¯å¯¹æœ€åä¸€ç»´åš softmaxï¼Œä¹Ÿå°±æ˜¯åœ¨è¾“å…¥åºåˆ—çš„ç»´åº¦åš softmax        # attention: [64,6,12,10]        attention = self.do(torch.softmax(attention, dim=-1))        # ç¬¬ä¸‰æ­¥ï¼Œattentionç»“æœä¸Vç›¸ä¹˜ï¼Œå¾—åˆ°å¤šå¤´æ³¨æ„åŠ›çš„ç»“æœ        # [64,6,12,10] * [64,6,10,50] = [64,6,12,50]        # x: [64,6,12,50]        x = torch.matmul(attention, V)        # å› ä¸º query æœ‰ 12 ä¸ªè¯ï¼Œæ‰€ä»¥æŠŠ 12 æ”¾åˆ°å‰é¢ï¼ŒæŠŠ 5 å’Œ 60 æ”¾åˆ°åé¢ï¼Œæ–¹ä¾¿ä¸‹é¢æ‹¼æ¥å¤šç»„çš„ç»“æœ        # x: [64,6,12,50] è½¬ç½®-&gt; [64,12,6,50]        x = x.permute(0, 2, 1, 3).contiguous()        # è¿™é‡Œçš„çŸ©é˜µè½¬æ¢å°±æ˜¯ï¼šæŠŠå¤šç»„æ³¨æ„åŠ›çš„ç»“æœæ‹¼æ¥èµ·æ¥        # æœ€ç»ˆç»“æœå°±æ˜¯ [64,12,300]        # x: [64,12,6,50] -&gt; [64,12,300]        x = x.view(bsz, -1, self.n_heads * (self.hid_dim // self.n_heads))        x = self.fc(x)        return x# batch_size ä¸º 64ï¼Œæœ‰ 12 ä¸ªè¯ï¼Œæ¯ä¸ªè¯çš„ Query å‘é‡æ˜¯ 300 ç»´query = torch.rand(64, 12, 300)# batch_size ä¸º 64ï¼Œæœ‰ 12 ä¸ªè¯ï¼Œæ¯ä¸ªè¯çš„ Key å‘é‡æ˜¯ 300 ç»´key = torch.rand(64, 10, 300)# batch_size ä¸º 64ï¼Œæœ‰ 10 ä¸ªè¯ï¼Œæ¯ä¸ªè¯çš„ Value å‘é‡æ˜¯ 300 ç»´value = torch.rand(64, 10, 300)attention = MultiheadAttention(hid_dim=300, n_heads=6, dropout=0.1)output = attention(query, key, value)## output: torch.Size([64, 12, 300])print(output.shape)</code></pre><h1 id="è¡¨ç¤ºåºåˆ—ä¸­å•è¯é¡ºåºçš„æ–¹æ³•"><a href="#è¡¨ç¤ºåºåˆ—ä¸­å•è¯é¡ºåºçš„æ–¹æ³•" class="headerlink" title="è¡¨ç¤ºåºåˆ—ä¸­å•è¯é¡ºåºçš„æ–¹æ³•"></a>è¡¨ç¤ºåºåˆ—ä¸­å•è¯é¡ºåºçš„æ–¹æ³•</h1><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒTransformer æ¨¡å‹å¯¹æ¯ä¸ªè¾“å…¥çš„å‘é‡éƒ½æ·»åŠ äº†ä¸€ä¸ªå‘é‡ã€‚è¿™äº›å‘é‡éµå¾ªæ¨¡å‹å­¦ä¹ åˆ°çš„ç‰¹å®šæ¨¡å¼ï¼Œæœ‰åŠ©äºç¡®å®šæ¯ä¸ªå•è¯çš„ä½ç½®ï¼Œæˆ–è€…å¥å­ä¸­ä¸åŒå•è¯ä¹‹é—´çš„è·ç¦»ã€‚è¿™ç§åšæ³•èƒŒåçš„ç›´è§‰æ˜¯ï¼šå°†è¿™äº›è¡¨ç¤ºä½ç½®çš„å‘é‡æ·»åŠ åˆ°è¯å‘é‡ä¸­ï¼Œå¾—åˆ°äº†æ–°çš„å‘é‡ï¼Œè¿™äº›æ–°å‘é‡æ˜ å°„åˆ° Q/K/Vï¼Œç„¶åè®¡ç®—ç‚¹ç§¯å¾—åˆ° attention æ—¶ï¼Œå¯ä»¥æä¾›æœ‰æ„ä¹‰çš„ä¿¡æ¯ã€‚</p><h1 id="æ®‹å·®è¿æ¥"><a href="#æ®‹å·®è¿æ¥" class="headerlink" title="æ®‹å·®è¿æ¥"></a>æ®‹å·®è¿æ¥</h1><p>ç¼–ç å™¨ç»“æ„ä¸­æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç»†èŠ‚æ˜¯ï¼šç¼–ç å™¨çš„æ¯ä¸ªå­å±‚ï¼ˆSelf Attention å±‚å’Œ FFNNï¼‰éƒ½æœ‰ä¸€ä¸ªæ®‹å·®è¿æ¥å’Œå±‚æ ‡å‡†åŒ–ï¼ˆlayer-normalizationï¼‰ã€‚åœ¨è§£ç å™¨çš„å­å±‚é‡Œé¢ä¹Ÿæœ‰å±‚æ ‡å‡†åŒ–ï¼ˆlayer-normalizationï¼‰ã€‚</p><p><img src="https://github.com/datawhalechina/learn-nlp-with-transformers/blob/main/docs/%E7%AF%87%E7%AB%A02-Transformer%E7%9B%B8%E5%85%B3%E5%8E%9F%E7%90%86/pictures/0-1-transformer-arc.png" alt="11"></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>NLP</tag>
      
      <tag>Attention</tag>
      
      <tag>Transformer&#39;</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€è®ºæ–‡é˜…è¯»ç¬”è®°ã€‘å®ç° MapReduce è®ºæ–‡é™„å½• A çš„ Word Count ç¨‹åº</title>
    <link href="/2021/05/07/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91%E5%AE%9E%E7%8E%B0-MapReduce-%E8%AE%BA%E6%96%87%E9%99%84%E5%BD%95-A-%E7%9A%84-Word-Count-%E7%A8%8B%E5%BA%8F/"/>
    <url>/2021/05/07/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91%E5%AE%9E%E7%8E%B0-MapReduce-%E8%AE%BA%E6%96%87%E9%99%84%E5%BD%95-A-%E7%9A%84-Word-Count-%E7%A8%8B%E5%BA%8F/</url>
    
    <content type="html"><![CDATA[<p>ç»™å‡ºä¸€ä¸ªMapå’ŒReduceçš„å…·ä½“å®ç°ï¼Œå»é™¤äº†æ‰€æœ‰åˆ†å¸ƒå¼çš„ç‰¹æ€§ã€å¯èƒ½ä»Šåä¼šæ·»åŠ ã€‘</p><!--more---><p>MapReduceæ–‡ç« æœ€åçš„é™„å½•Aæœ‰ä¸€æ®µC++ä»£ç ï¼Œæè¿°äº†Mapå’ŒReduceå‡½æ•°çš„ç¼–å†™å’Œä½¿ç”¨æ–¹æ³•ã€‚ä½†æ˜¯ä»…é çœ‹ä»£ç æ€»æ˜¯ä¸èƒ½æ·±å…¥ç†è§£MapReduceçš„å®ç°ç»†èŠ‚ï¼Œé˜…è¯»å…¶ä»–äººçš„MapReduceå­¦ä¹ æ›²çº¿åˆå¤ªè¿‡é™¡å³­ã€‚å› æ­¤æˆ‘å†³å®šè‡ªå·±å®ç°Mapå‡½æ•°å’ŒReduceå‡½æ•°ï¼Œå¹¶å°½å¯èƒ½ä½¿ç”¨æ›¿ä»£æ–¹æ³•å°†é‚£äº›æ²¡æœ‰ç»™å‡ºçš„apiå®ç°ã€‚</p><p>ä¿ƒä½¿æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„å¦ä¸€ä¸ªåŸå› æ˜¯ï¼Œç½‘ç»œä¸Šçš„å¤§éƒ¨åˆ†å®ç°Word Countçš„æ–‡ç« éƒ½æ˜¯ä¾èµ–äºæŸæŸæ¡†æ¶çš„ï¼Œæ¯”å¦‚ä¾èµ–Hadoopã€‚ä½†æˆ‘è§‰å¾—è¿‡æ—©ä¾èµ–äºæŸä¸ªå¹³å°ä¸åˆ©äºæ·±å…¥ç†è§£èƒŒåçš„åŸç†ï¼Œå› æ­¤æˆ‘å†³å®šè‡ªå·±å®ç°å„ç§apiï¼Œä½“ä¼šç¨‹åºè®¾è®¡è€…å¯èƒ½é‡åˆ°çš„é—®é¢˜ã€‚ä»Šååœ¨å­¦ä¹ åˆ†å¸ƒå¼ç³»ç»Ÿã€åˆ†å¸ƒå¼æ¡†æ¶æ—¶ï¼Œä¾¿èƒ½å¤Ÿå¯¹ç—‡ä¸‹è¯ã€æœ‰çš„æ”¾çŸ¢ã€‚</p><p>ä¸è¿‡è¿˜è¯·å„ä½åŸè°…ï¼Œè¿™é‡Œçš„Mapå’ŒReduceåªèƒ½è¿è¡Œåœ¨å•æœºç¯å¢ƒå•¦ã€‚</p><p>ä¸‹é¢ç»™å‡ºåŸæ–‡ä¸­çš„C++ä»£ç ï¼š</p><pre><code class="lang-cpp">#include &quot;mapreduce/mapreduce.h&quot;//ç”¨æˆ·mapå‡½æ•°class WordCounter : public Mapper &#123;public:    virtual void Map(const MapInput&amp; input) &#123;        const string&amp; text = input.value();        const int n = text.size();        for (int i = 0; i &lt; n; ) &#123;            //è·³è¿‡å‰å¯¼ç©ºæ ¼            while ((i &lt; n) &amp;&amp; isspace(text[i]))                i++;            // æŸ¥æ‰¾å•è¯çš„ç»“æŸä½ç½®            int start = i;            while ((i &lt; n) &amp;&amp; !isspace(text[i]))                i++;            if (start &lt; i)                Emit(text.substr(start,i-start),&quot;1&quot;);        &#125;    &#125;&#125;;REGISTER_MAPPER(WordCounter);//ç”¨æˆ·çš„reduceå‡½æ•°class Adder : public Reducer &#123;    virtual void Reduce(ReduceInput* input) &#123;        //è¿­ä»£å…·æœ‰ç›¸åŒkeyçš„æ‰€æœ‰æ¡ç›®,å¹¶ä¸”ç´¯åŠ å®ƒä»¬çš„value        int64 value = 0;        while (!input-&gt;done()) &#123;            value += StringToInt(input-&gt;value());            input-&gt;NextValue();        &#125;        //æäº¤è¿™ä¸ªè¾“å…¥keyçš„ç»¼åˆ        Emit(IntToString(value));    &#125;&#125;;REGISTER_REDUCER(Adder);int main(int argc, char** argv) &#123;    ParseCommandLineFlags(argc, argv);    MapReduceSpecification spec;    // æŠŠè¾“å…¥æ–‡ä»¶åˆ—è¡¨å­˜å…¥&quot;spec&quot;    for (int i = 1; i &lt; argc; i++) &#123;        MapReduceInput* input = spec.add_input();        input-&gt;set_format(&quot;text&quot;);        input-&gt;set_filepattern(argv[i]);        input-&gt;set_mapper_class(&quot;WordCounter&quot;);    &#125;    //æŒ‡å®šè¾“å‡ºæ–‡ä»¶:    // /gfs/test/freq-00000-of-00100    // /gfs/test/freq-00001-of-00100    // ...    MapReduceOutput* out = spec.output();    out-&gt;set_filebase(&quot;/gfs/test/freq&quot;);    out-&gt;set_num_tasks(100);    out-&gt;set_format(&quot;text&quot;);    out-&gt;set_reducer_class(&quot;Adder&quot;);    // å¯é€‰æ“ä½œ:åœ¨mapä»»åŠ¡ä¸­åšéƒ¨åˆ†ç´¯åŠ å·¥ä½œ,ä»¥ä¾¿èŠ‚çœå¸¦å®½    out-&gt;set_combiner_class(&quot;Adder&quot;);    // è°ƒæ•´å‚æ•°: ä½¿ç”¨2000å°æœºå™¨,æ¯ä¸ªä»»åŠ¡100MBå†…å­˜    spec.set_machines(2000);    spec.set_map_megabytes(100);    spec.set_reduce_megabytes(100);    // è¿è¡Œ    MapReduceResult result;    if (!MapReduce(spec, &amp;result)) abort();    // å®Œæˆ: &#39;result&#39;ç»“æ„åŒ…å«è®¡æ•°,èŠ±è´¹æ—¶é—´,å’Œä½¿ç”¨æœºå™¨çš„ä¿¡æ¯    return 0;&#125;</code></pre><h2 id="æŠ½è±¡åŸºç±»-Mapperã€Reducer"><a href="#æŠ½è±¡åŸºç±»-Mapperã€Reducer" class="headerlink" title="æŠ½è±¡åŸºç±» Mapperã€Reducer"></a>æŠ½è±¡åŸºç±» Mapperã€Reducer</h2><p>é¦–å…ˆæˆ‘æ‰“ç®—å®ç°<code>WordCounter</code>çš„çˆ¶ç±»<code>Mapper</code>å’Œ<code>Adder</code>çš„çˆ¶ç±»<code>Reducer</code>ã€‚</p><pre><code class="lang-cpp">class Mapper &#123;public:    virtual void Map(const MapInput&amp; input) = 0;&#125;;class Reducer &#123;public:    virtual void Reduce(ReduceInput* input) = 0;&#125;;</code></pre><p>ç®€å•å®ç°Mapå’ŒReduceæ¥å£ï¼Œå¹¶æŠŠå®ƒä»¬è®¾ç½®æˆçº¯è™šæ–¹æ³•ã€‚</p><h2 id="WordCounterç±»"><a href="#WordCounterç±»" class="headerlink" title="WordCounterç±»"></a>WordCounterç±»</h2><pre><code class="lang-cpp">class WordCounter : public Mapper &#123;public:    void Map(const MapInput&amp; input) override &#123;        const string&amp; text = input.value(); // è¯»å–ä¸€è¡Œæ–‡æœ¬        const int n = text.size();        for (int i = 0; i &lt; n; ) &#123;            // è·³è¿‡è¡Œé¦–ç©ºç™½            while ((i &lt; n) &amp;&amp; isspace(text[i])) i++;            // ç¡®å®šå•è¯çš„å¼€å¤´å’Œç»“å°¾            int start = i;            while ((i &lt; n) &amp;&amp; !isspace(text[i])) i++;            if (start &lt; i)                Emit(text.substr(start, i-start), &quot;1&quot;);        &#125;    &#125;&#125;;</code></pre><p>è¿™ä¸€éƒ¨åˆ†ç›¸è¾ƒäºåŸæ–‡æ²¡ä»€ä¹ˆå˜åŒ–ã€‚å…¶ä¸»è¦ä½œç”¨åœ¨äºåˆ†è¯ï¼Œç„¶åæ¯ä¸ªå•è¯ç»„å»ºæˆä¸€ä¸ªé”®å€¼å¯¹ï¼Œä»¥(word, 1)çš„ç»“æ„å‘å°„å‡ºå»ã€‚å‘å°„åˆ°å“ªé‡Œå‘¢ï¼Ÿæˆ‘å°±å·æ‡’ç›´æ¥æŒä¹…åŒ–åˆ°æœ¬åœ°çš„æ¶ˆæ¯å­˜å‚¨è£…ç½®äº†ã€‚</p><pre><code class="lang-cpp">static void Emit(const string&amp; key, const string&amp; value) &#123;    mw.put(key, value);&#125;</code></pre><p>mw æ˜¯ MiddleWare çš„å®ä¾‹ï¼Œæ˜¯ä¸€ä¸ªç”¨äºä¿å­˜Emitè¾“å‡ºçš„é”®å€¼å¯¹çš„å…¨å±€å˜é‡ã€‚åç»­ä¼šç»§ç»­è®²è§£ã€‚</p><h2 id="ç”¨äºä¿å­˜-Mapper-å¾—åˆ°çš„é”®å€¼å¯¹çš„-MiddleWare-ç±»"><a href="#ç”¨äºä¿å­˜-Mapper-å¾—åˆ°çš„é”®å€¼å¯¹çš„-MiddleWare-ç±»" class="headerlink" title="ç”¨äºä¿å­˜ Mapper å¾—åˆ°çš„é”®å€¼å¯¹çš„ MiddleWare ç±»"></a>ç”¨äºä¿å­˜ Mapper å¾—åˆ°çš„é”®å€¼å¯¹çš„ MiddleWare ç±»</h2><pre><code class="lang-cpp">class MiddleWare &#123;private:    vector&lt;pair&lt;string, string&gt;&gt; kv_pairs;    static bool compare_pair(const pair&lt;string, string&gt;&amp; lhs, const pair&lt;string, string&gt;&amp; rhs) &#123;        return lhs.first &lt; rhs.first;    &#125;public:    MiddleWare() = default;    void put(const string&amp; key, const string&amp; value) &#123;        kv_pairs.emplace_back(key, value);    &#125;    vector&lt;pair&lt;string, string&gt;&gt; get() &#123;        std::sort(kv_pairs.begin(), kv_pairs.end(), compare_pair); // å°†å…¶æŒ‰ç…§keyç›¸åŒçš„ä¸€ç»„æ¥æ’åº        return kv_pairs;    &#125;&#125;;MiddleWare mw; // å…¨å±€å˜é‡ï¼šæ¶ˆæ¯é˜Ÿåˆ—</code></pre><p>è¿™æ˜¯æˆ‘ä¸ºæœ¬åœ°è¿è¡Œé¡ºåˆ©è€Œå‡­ç©ºæ„å»ºå‡ºæ¥çš„ç±»ï¼Œä½œç”¨æ˜¯å‚¨å­˜(key, value)å¯¹ã€‚ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œå†…éƒ¨æœ‰getå’Œputæ–¹æ³•ã€‚å…¶ä¸­å¦‚æœReduceréœ€è¦getæ•°æ®äº†ï¼Œé‚£ä¹ˆé¦–å…ˆä¼šæŒ‰ç…§keyå¯¹è¿™äº›pairè¿›è¡Œæ’åºã€‚è¿™ä¹Ÿæ˜¯ä¸MapReduceçš„æµç¨‹ç›¸å»åˆçš„ã€‚</p><p>æ—¢ç„¶æ˜¯æ’åºï¼Œé‚£ä¹ˆå°±è¦å®šä¹‰æ¯”è¾ƒå™¨ compare_pairã€‚æˆ‘çš„æ¯”è¾ƒå™¨ç›´æ¥ä½¿ç”¨stringçš„æ¯”è¾ƒï¼Œç¡®ä¿ç›¸åŒkeyå€¼çš„pairåœ¨ç›¸é‚»ä½ç½®ã€‚</p><h2 id="Adderç±»"><a href="#Adderç±»" class="headerlink" title="Adderç±»"></a>Adderç±»</h2><pre><code class="lang-cpp">// ç”¨æˆ·è‡ªå®šä¹‰ Reduce å‡½æ•°class Adder : public Reducer &#123;public:    void Reduce(ReduceInput* input) override &#123;        // è¿­ä»£æ‰€æœ‰æ‹¥æœ‰ç›¸åŒkeyçš„é”®å€¼å¯¹ï¼ŒæŠŠå®ƒä»¬çš„valuesåŠ èµ·æ¥        int64_t value = 0;        string currentKey = input-&gt;key();        while (!input-&gt;end() &amp;&amp; currentKey == input-&gt;key()) &#123; // ç›´åˆ°ä¸‹ä¸€ä¸ªé”®å€¼å¯¹çš„keyä¸å½“å‰é”®å€¼å¯¹çš„keyä¸åŒä¸ºæ­¢            value += std::stoi(input-&gt;value());            input-&gt;NextValue(); // æ‰¾åˆ°ä¸‹ä¸€ä¸ªæ‹¥æœ‰ç›¸åŒkeyçš„é”®å€¼å¯¹        &#125;        // Emit sum for input-&gt;key()        Emit(to_string(value));    &#125;&#125;;</code></pre><p>ä¸è®ºæ–‡ä¸­çš„Adderæœ‰é€»è¾‘å‡ºå…¥ï¼Œä¸»è¦å˜åŒ–åœ¨æŠŠåŒæ ·keyåˆ†æˆä¸åŒç»„çš„é€»è¾‘ä¸Šï¼Œæˆ‘ç›´æ¥ä¿å­˜äº†å½“å‰ç»„çš„keyã€‚åŸæ¥è®ºæ–‡é‡Œæ˜¯æ²¡æœ‰è¿™ç§æ“ä½œçš„ã€‚</p><h2 id="Map-çš„è¾“å…¥-MapInput"><a href="#Map-çš„è¾“å…¥-MapInput" class="headerlink" title="Map çš„è¾“å…¥ MapInput"></a>Map çš„è¾“å…¥ MapInput</h2><p>è§‚å¯Ÿä¸€ä¸‹Mapçš„å‚æ•°é‡Œæœ‰ä¸€ä¸ªMapInputç±»å‹çš„å¯¹è±¡ï¼Œé‚£ä¹ˆç¬¬äºŒæ­¥å°±æ˜¯æ–°å»ºä¸€ä¸ªMapInputç±»ã€‚è¦æƒ³è·‘é€šMapå‡½æ•°çš„ä»£ç ï¼Œè¿™ä¸ªç±»å¿…é¡»å®ç°value()æ–¹æ³•ã€‚</p><p>çŒœæµ‹ä¸€ä¸‹ï¼ŒMapInputæ˜¯Mapçš„è¾“å…¥ï¼Œè€ŒMapReduceæ¡†æ¶çš„è¾“å…¥è¾“å‡ºéƒ½åº”è¯¥æ˜¯é”®å€¼å¯¹çš„å½¢å¼ã€‚å› æ­¤æ¯ä¸ªMapInputéƒ½åº”è¯¥åŒ…å«ä¸€ä¸ªkeyå’Œä¸€ä¸ªvalueæˆå‘˜ã€‚</p><pre><code class="lang-cpp">class MapInput &#123;private:    string map_value;    string map_key;public:    explicit MapInput(string filename, string text) : map_key(std::move(filename)), map_value(std::move(text)) &#123; &#125;    [[nodiscard]] const string&amp; value() const &#123;        return map_value;    &#125;&#125;;</code></pre><p>MapInputçš„æ„é€ å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ–‡æœ¬æ–‡ä»¶åï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ–‡ä»¶çš„å†…å®¹ã€‚å…¶å®ç¬¬ä¸€ä¸ªå‚æ•°åœ¨æˆ‘ä»¬çš„ç¨‹åºä¸­æ²¡å•¥ä½œç”¨ï¼Œä½†æ˜¯ä¸ºäº†æ ¼å¼çš„ç»Ÿä¸€ï¼Œå°±å†™ä¸Šå§ã€‚</p><p>explicitä¿®é¥°æ„é€ å‡½æ•°ï¼Œä»£è¡¨è¯¥ç±»çš„å¯¹è±¡ç¦æ­¢å‘ç”Ÿéšå¼ç±»å‹è½¬æ¢ï¼Œè¦æƒ³è½¬æ¢å¿…é¡»ä»¥<strong>æ˜ç¡®çš„(explicit)</strong>æ–¹å¼è¿›è¡Œæ˜¾å¼ç±»å‹è½¬æ¢ã€‚</p><p>å†’å·åé¢çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­ï¼Œä½¿ç”¨äº†moveç‰¹æ€§ï¼Œé¿å…äº†å‡½æ•°ä¼ å‚å¯¼è‡´çš„å˜é‡å¤åˆ¶ã€‚</p><p>[[nodiscard]] å«ä¹‰æ˜¯è¯¥å‡½æ•°çš„è¿”å›å€¼å¿…é¡»è¢«ä½¿ç”¨ï¼Œä¸èƒ½ä¸¢å¼ƒã€‚C++ 17ç‰ˆæœ¬æ–°å¢äº†å‡ ä¸ªä¸­æ‹¬å·æ ‡è¯†çš„æç¤ºç¬¦ï¼Œå½“ä»£ç ä¸ç¬¦åˆè¦æ±‚çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šçœŸçš„è­¦å‘Šã€‚ç›¸å½“äºæŠŠä»¥å‰çš„æ³¨é‡ŠåŠ å¼ºäº†ã€‚é™¤[[nodiscard]]ä¹‹å¤–ï¼Œè¿˜æœ‰è¡¨ç¤ºswitchè¯­å¥ä¸­ä¸å¿…åŠ breakçš„[[fallthrough]]ã€å˜é‡å®šä¹‰ä¹‹åæ²¡æœ‰ä½¿ç”¨ä¹Ÿæ²¡å…³ç³»çš„æ ‡è¯†ç¬¦[[maybe_unused]]ã€‚</p><h2 id="Reduce-çš„è¾“å…¥-ReduceInput"><a href="#Reduce-çš„è¾“å…¥-ReduceInput" class="headerlink" title="Reduce çš„è¾“å…¥ ReduceInput"></a>Reduce çš„è¾“å…¥ ReduceInput</h2><p>ReduceInputçš„è®¾è®¡å°±æ¯”è¾ƒéº»çƒ¦äº†ã€‚é¦–å…ˆReduceå‡½æ•°çš„è¾“å…¥æ˜¯ReduceInputçš„æŒ‡é’ˆï¼Œä½¿ç”¨åˆ°çš„æ¥å£æœ‰done()/value()/NextValue()/key()ï¼Œç„¶åæ ¹æ®Reduceå‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ï¼Œæ„Ÿè§‰ReduceInputåƒæ˜¯ä¸€ä¸ªè¿­ä»£å™¨ã€‚</p><pre><code class="lang-cpp">class ReduceInput &#123;private:    vector&lt;pair&lt;string, string&gt;&gt; data;    int currentKey = 0;public:    explicit ReduceInput(vector&lt;pair&lt;string, string&gt;&gt; _data) : data(std::move(_data)) &#123;  &#125;//    bool done() &#123;//        // ç›´åˆ°ä¸‹ä¸€ä¸ªé”®å€¼å¯¹çš„keyä¸å½“å‰é”®å€¼å¯¹çš„keyä¸åŒä¸ºæ­¢//        // å¦‚æœåˆ°äº†æœ«å°¾ï¼Œæˆ–è€…ä¸‹ä¸€ä¸ªkeyä¸ä¸€æ ·ï¼Œéƒ½æ˜¯done//        if (currentKey == 0) return false;//        if (end() || data[currentKey].first != data[currentKey-1].first) return true;//        return false;//    &#125;    const string&amp; value() &#123;        return data[currentKey].second;    &#125;    const string&amp; key() &#123;        return data[currentKey].first;    &#125;    void NextValue() &#123;        currentKey++;    &#125;    bool end() &#123;        return currentKey &gt;= data.size();    &#125;&#125;;</code></pre><p>ä¸Šé¢æ˜¯æˆ‘å®ç°çš„ReduceInputï¼Œå·ä¸ªæ‡’æŠŠæ‰€æœ‰æ•°æ®å­˜æ”¾åˆ°ReduceInputä¸­æ–¹ä¾¿éå†ï¼Œåœ¨çœŸå®åœºæ™¯çš„è®¾è®¡ä¸­ä¸ä¼šåƒæˆ‘è¿™æ ·çš„ã€‚</p><p>æ­¤å¤–ï¼ŒDoneå‡½æ•°çš„é€»è¾‘æ˜¯æœ‰é—®é¢˜çš„ã€‚å…³é”®åœ¨äºReduceå‡½æ•°ä¸­çš„è¿™å¥è¯ï¼š</p><pre><code class="lang-cpp">while (!input-&gt;done()) &#123;    value += StringToInt(input-&gt;value());    input-&gt;NextValue();&#125;</code></pre><p>è¡¨é¢ä¸Šçœ‹èµ·æ¥æ˜¯å¸Œæœ›inputä½œä¸ºä¸€ä¸ªè¿­ä»£å™¨ï¼Œå½“å®ƒè¿­ä»£åˆ°keyä¸ä¸‹ä¸€ä¸ªkeyä¸åŒæ—¶ï¼Œç»ˆæ­¢è¿­ä»£ï¼ˆå³doneè¿”å›trueè¡¨æ˜è¿­ä»£å®Œæˆï¼‰ï¼Œç„¶è€Œä¸‹æ¬¡è¿­ä»£çš„å¼€å§‹è¿˜æ˜¯ä»è¿™ä¸ªä½ç½®ï¼Œå…¶ç»“æœä»ç¨‹åºé€»è¾‘ä¸Šæ¥è®²ï¼Œå´åˆå¸Œæœ›è¿”å›falseã€‚åŒä¸€ä¸ªä½ç½®ï¼Œæˆ‘ä»¬å¸Œæœ›è¿”å›ä¸¤ä¸ªä¸åŒçš„å€¼ï¼Œè¿™æ˜¾ç„¶æ˜¯è¯´ä¸é€šçš„ã€‚å› æ­¤æˆ‘åœ¨Reduceæœ€ç»ˆå®ç°çš„ä¸»ä»£ç éƒ¨åˆ†åšäº†é€‚å½“çš„é€»è¾‘ä¿®æ”¹ã€‚</p><h2 id="è¾“å‡ºç»“æœçš„å•å‚æ•°Emit"><a href="#è¾“å‡ºç»“æœçš„å•å‚æ•°Emit" class="headerlink" title="è¾“å‡ºç»“æœçš„å•å‚æ•°Emit"></a>è¾“å‡ºç»“æœçš„å•å‚æ•°Emit</h2><p>ä¸ºäº†è¾“å‡ºæ–¹ä¾¿ï¼Œæœ€ç»ˆæˆ‘å®šä¹‰äº†å•å‚æ•°çš„é‡è½½Emitï¼Œä¸ä¿å­˜Reducerçš„è®¡ç®—ç»“æœï¼Œç›´æ¥è¾“å‡ºï¼š</p><pre><code class="lang-cpp">static void Emit(const string&amp; key) &#123;    cout &lt;&lt; &quot;Sum of values:&quot; &lt;&lt; key &lt;&lt; endl;&#125;</code></pre><h2 id="æœ€åçš„main"><a href="#æœ€åçš„main" class="headerlink" title="æœ€åçš„main"></a>æœ€åçš„main</h2><pre><code class="lang-cpp">int main(int argc, char* argv[]) &#123;    ifstream in(R&quot;(C:\Users\zyt\CLionProjects\leetcode_2021\lyrics.txt)&quot;);    string content((istreambuf_iterator&lt;char&gt;(in)), istreambuf_iterator&lt;char&gt;());    MapInput minput(&quot;lyrics.txt&quot;, content);    cout &lt;&lt; &quot;minput:\n&quot; &lt;&lt; minput.value() &lt;&lt; endl;    WordCounter wc;    wc.Map(minput);    auto *rinput = new ReduceInput(mw.get());    while (!rinput-&gt;end()) &#123;        cout &lt;&lt; &quot;Key: &quot; &lt;&lt; rinput-&gt;key() &lt;&lt; &quot;\t&quot;;        Adder adder; // æ¨¡æ‹Ÿå¾ˆå¤š adder        adder.Reduce(rinput);        rinput-&gt;NextValue();    &#125;    return 0;&#125;</code></pre><p>ifstreamè¯»å…¥æœ¬åœ°æ–‡æœ¬æ–‡æ¡£ï¼Œæ³¨æ„ifstreamçš„å‚æ•°å¾—æ˜¯ç»å¯¹è·¯å¾„ï¼ˆç›¸å¯¹è·¯å¾„ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¯»å–ä¸å‡ºæ¥ä¸œè¥¿ï¼‰ã€‚</p><p>ç„¶åWordCountæŠŠåˆ†è¯ç»“æœçš„é”®å€¼å¯¹ä¿å­˜åœ¨å…¨å±€å˜é‡mwä¸­ï¼Œä½¿ç”¨mwæ„å»ºReduceInputï¼Œå†æŠŠReduceInputè¾“å…¥è¿›Adderé‡Œé¢ã€‚</p><p>æ³¨æ„ä¸€ä¸ªReducerå¤„ç†ä¸€ä¸ªGroupï¼ˆæˆ‘æŠŠkeyç›¸åŒçš„ä¸€ç»„é”®å€¼å¯¹ç§°ä¹‹ä¸ºGroupï¼‰ï¼Œé‚£ä¹ˆæˆ‘å°±ä»¥Whileå¾ªç¯æ¥ä»£æ›¿å•¦ã€‚</p><p>è¿™å°±æ˜¯ä»£ç çš„æ‰€æœ‰å†…å®¹äº†ï¼</p><p><img src="/2021/05/07/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91%E5%AE%9E%E7%8E%B0-MapReduce-%E8%AE%BA%E6%96%87%E9%99%84%E5%BD%95-A-%E7%9A%84-Word-Count-%E7%A8%8B%E5%BA%8F/result.png" alt></p><pre><code class="lang-cpp">#include &quot;stdafx.h&quot;using namespace std;class MiddleWare &#123;private:    vector&lt;pair&lt;string, string&gt;&gt; kv_pairs;    static bool compare_pair(const pair&lt;string, string&gt;&amp; lhs, const pair&lt;string, string&gt;&amp; rhs) &#123;        return lhs.first &lt; rhs.first;    &#125;public:    MiddleWare() = default;    void put(const string&amp; key, const string&amp; value) &#123;        kv_pairs.emplace_back(key, value);    &#125;    vector&lt;pair&lt;string, string&gt;&gt; get() &#123;        std::sort(kv_pairs.begin(), kv_pairs.end(), compare_pair); // å°†å…¶æŒ‰ç…§keyç›¸åŒçš„ä¸€ç»„æ¥æ’åº        return kv_pairs;    &#125;&#125;;MiddleWare mw; // å…¨å±€å˜é‡ï¼šæ¶ˆæ¯é˜Ÿåˆ—class MapInput &#123;private:    string map_value;    string map_key;public:    explicit MapInput(string filename, string text) : map_key(std::move(filename)), map_value(std::move(text)) &#123; &#125;    [[nodiscard]] const string&amp; value() const &#123;        return map_value;    &#125;&#125;;class ReduceInput &#123;private:    vector&lt;pair&lt;string, string&gt;&gt; data;    int currentKey = 0;public:    explicit ReduceInput(vector&lt;pair&lt;string, string&gt;&gt; _data) : data(std::move(_data)) &#123;  &#125;//    bool done() &#123;//        // ç›´åˆ°ä¸‹ä¸€ä¸ªé”®å€¼å¯¹çš„keyä¸å½“å‰é”®å€¼å¯¹çš„keyä¸åŒä¸ºæ­¢//        // å¦‚æœåˆ°äº†æœ«å°¾ï¼Œæˆ–è€…ä¸‹ä¸€ä¸ªkeyä¸ä¸€æ ·ï¼Œéƒ½æ˜¯done//        if (currentKey == 0) return false;//        if (end() || data[currentKey].first != data[currentKey-1].first) return true;//        return false;//    &#125;    const string&amp; value() &#123;        return data[currentKey].second;    &#125;    const string&amp; key() &#123;        return data[currentKey].first;    &#125;    void NextValue() &#123;        currentKey++;    &#125;    bool end() &#123;        return currentKey &gt;= data.size();    &#125;&#125;;static void Emit(const string&amp; key, const string&amp; value) &#123;    mw.put(key, value);&#125;static void Emit(const string&amp; key) &#123;    cout &lt;&lt; &quot;Sum of values:&quot; &lt;&lt; key &lt;&lt; endl;&#125;class Mapper &#123;public:    virtual void Map(const MapInput&amp; input) = 0;&#125;;class Reducer &#123;public:    virtual void Reduce(ReduceInput* input) = 0;&#125;;class WordCounter : public Mapper &#123;public:    void Map(const MapInput&amp; input) override &#123;        const string&amp; text = input.value(); // è¯»å–ä¸€è¡Œæ–‡æœ¬        const int n = text.size();        for (int i = 0; i &lt; n; ) &#123;            // è·³è¿‡è¡Œé¦–ç©ºç™½            while ((i &lt; n) &amp;&amp; isspace(text[i])) i++;            // ç¡®å®šå•è¯çš„å¼€å¤´å’Œç»“å°¾            int start = i;            while ((i &lt; n) &amp;&amp; !isspace(text[i])) i++;            if (start &lt; i)                Emit(text.substr(start, i-start), &quot;1&quot;);        &#125;    &#125;&#125;;// ç”¨æˆ·è‡ªå®šä¹‰ Reduce å‡½æ•°class Adder : public Reducer &#123;public:    void Reduce(ReduceInput* input) override &#123;        // è¿­ä»£æ‰€æœ‰æ‹¥æœ‰ç›¸åŒkeyçš„é”®å€¼å¯¹ï¼ŒæŠŠå®ƒä»¬çš„valuesåŠ èµ·æ¥        int64_t value = 0;        string currentKey = input-&gt;key();        while (!input-&gt;end() &amp;&amp; currentKey == input-&gt;key()) &#123; // ç›´åˆ°ä¸‹ä¸€ä¸ªé”®å€¼å¯¹çš„keyä¸å½“å‰é”®å€¼å¯¹çš„keyä¸åŒä¸ºæ­¢            value += std::stoi(input-&gt;value());            input-&gt;NextValue(); // æ‰¾åˆ°ä¸‹ä¸€ä¸ªæ‹¥æœ‰ç›¸åŒkeyçš„é”®å€¼å¯¹        &#125;        // Emit sum for input-&gt;key()        Emit(to_string(value));    &#125;&#125;;int main(int argc, char* argv[]) &#123;    ifstream in(R&quot;(C:\Users\zyt\CLionProjects\leetcode_2021\lyrics.txt)&quot;);    string content((istreambuf_iterator&lt;char&gt;(in)), istreambuf_iterator&lt;char&gt;());    MapInput minput(&quot;lyrics.txt&quot;, content);    cout &lt;&lt; &quot;minput:\n&quot; &lt;&lt; minput.value() &lt;&lt; endl;    WordCounter wc;    wc.Map(minput);    auto *rinput = new ReduceInput(mw.get());    while (!rinput-&gt;end()) &#123;        cout &lt;&lt; &quot;Key: &quot; &lt;&lt; rinput-&gt;key() &lt;&lt; &quot;\t&quot;;        Adder adder; // æ¨¡æ‹Ÿå¾ˆå¤š adder        adder.Reduce(rinput);        rinput-&gt;NextValue();    &#125;    return 0;&#125;</code></pre>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Word Count</tag>
      
      <tag>MapReduce</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘ç”¨Hadoopå®ç°Word Count</title>
    <link href="/2021/05/06/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E7%94%A8Hadoop%E5%AE%9E%E7%8E%B0Word-Count/"/>
    <url>/2021/05/06/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E7%94%A8Hadoop%E5%AE%9E%E7%8E%B0Word-Count/</url>
    
    <content type="html"><![CDATA[<p>å¥½åƒä¸ç®¡ä»€ä¹ˆHadoopå­¦ä¹ éƒ½æ˜¯ä»Word Countå¼€å§‹ï¼Œè·¨è¶Šè¯­è¨€çš„Word Count</p><!--more---><p>Word Countæ˜¯MapReduce çš„ç»å…¸å…¥é—¨æ¡ˆä¾‹ï¼Œå…¶ç›®æ ‡æ˜¯ç»Ÿè®¡ç»™å®šä¸€ç³»åˆ—æ–‡æœ¬æ–‡ä»¶çš„å•è¯å‡ºç°æ¬¡æ•°ã€‚</p><p>ç¼–ç¨‹æ€è·¯ï¼š</p><p><code>map</code>é˜¶æ®µï¼šæŠŠè¾“å…¥çš„æ•°æ®è¿›è¡Œåˆ†è¯ï¼Œå¹¶å°†å…¶ç»„åˆæˆé”®å€¼å¯¹çš„å½¢å¼ï¼Œkeyæ˜¯å•è¯ï¼Œvalueå…¨éƒ¨æ ‡è®°ä¸º1ã€‚</p><p><code>shuffle</code> é˜¶æ®µï¼šç»è¿‡é»˜è®¤çš„æ’åºåˆ†åŒºåˆ†ç»„ï¼Œkeyç›¸åŒçš„å•è¯ä¼šä½œä¸ºä¸€ç»„æ•°æ®æ„æˆæ–°çš„é”®å€¼å¯¹ã€‚</p><p><code>reduce</code>é˜¶æ®µï¼šå¤„ç† <code>shuffle</code> å®Œçš„ä¸€ç»„æ•°æ®ï¼Œè¯¥ç»„æ•°æ®å°±æ˜¯è¯¥å•è¯æ‰€æœ‰çš„é”®å€¼å¯¹ã€‚</p><p><img src="/2021/05/06/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E7%94%A8Hadoop%E5%AE%9E%E7%8E%B0Word-Count/Word_Count_MRé˜¶æ®µ.png" alt></p><h2 id="Mapç±»çš„ç¼–å†™"><a href="#Mapç±»çš„ç¼–å†™" class="headerlink" title="Mapç±»çš„ç¼–å†™"></a>Mapç±»çš„ç¼–å†™</h2><pre><code class="lang-java">/** * @description: WordCount Mapperç±»ï¼Œå¯¹åº”MapTask * @author: ZYT * KEYIN mapé˜¶æ®µçš„è¾“å…¥ * VALUEIN  todo MapReduce æœ‰é»˜è®¤è¯»å–æ•°æ®çš„ç»„ä»¶ï¼šTextInputFormat *          todo é€è¡Œè¯»å–ã€‚kæ˜¯åç§»é‡ï¼ˆLongWritableï¼‰ï¼Œæ— æ„ä¹‰ï¼›væ˜¯æ¯è¡Œçš„æ–‡æœ¬å†…å®¹ï¼ˆTextï¼‰ã€‚ * KEYOUT å•è¯ç±»å‹ï¼ŒText * VALUEOUT æ¬¡æ•°ï¼ŒLongWritable */public class WordCountMapper extends Mapper&lt;LongWritable, Text, Text, LongWritable&gt; &#123;    /**     * æ¯å½“TextInputFormatè¿”å›ä¸€ä¸ªé”®å€¼å¯¹ï¼Œmapå°±è°ƒç”¨ä¸€æ¬¡ã€‚     * æ ¹æ®TextInputFormatçš„ç‰¹æ€§ï¼Œäº‹å®ä¸Šæ˜¯æ¯ä¸€è¡Œæ–‡æœ¬è°ƒç”¨ä¸€æ¬¡Mapæ–¹æ³•ã€‚     * @param key     * @param value     * @param context     * @throws IOException     * @throws InterruptedException     */    @Override    protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException &#123;//        super.map(key, value, context);        String text = value.toString();        String[] words = text.split(&quot;\\s+&quot;);        for (String word : words) &#123;            context.write(new Text(word), new LongWritable(1));        &#125;    &#125;&#125;</code></pre><p>ä¼˜åŒ–</p><pre><code class="lang-java">public class WordCountMapper extends Mapper&lt;LongWritable, Text, Text, LongWritable&gt; &#123;    private Text outKey = new Text();    private static final LongWritable outValue = new LongWritable(1);    /**     * æ¯å½“TextInputFormatè¿”å›ä¸€ä¸ªé”®å€¼å¯¹ï¼Œmapå°±è°ƒç”¨ä¸€æ¬¡ã€‚     * æ ¹æ®TextInputFormatçš„ç‰¹æ€§ï¼Œäº‹å®ä¸Šæ˜¯æ¯ä¸€è¡Œæ–‡æœ¬è°ƒç”¨ä¸€æ¬¡Mapæ–¹æ³•ã€‚     * @param key     * @param value     * @param context     * @throws IOException     * @throws InterruptedException     */    @Override    protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException &#123;//        super.map(key, value, context);        String text = value.toString();        String[] words = text.split(&quot;\\s+&quot;);        for (String word : words) &#123;            outKey.set(word);            context.write(outKey, outValue);        &#125;    &#125;&#125;</code></pre><h2 id="Reduceç±»çš„ç¼–å†™"><a href="#Reduceç±»çš„ç¼–å†™" class="headerlink" title="Reduceç±»çš„ç¼–å†™"></a>Reduceç±»çš„ç¼–å†™</h2><pre><code class="lang-java">public class WordCountReducer extends Reducer&lt;Text, LongWritable, Text, LongWritable&gt; &#123;    private LongWritable outValue = new LongWritable(0);    /**     * todo q: å½“mapçš„è¾“å‡ºæ•°æ®æ¥åˆ°reduceä¹‹åè¯¥å¦‚ä½•è°ƒç”¨ï¼Ÿ     * 1. æ’åºæ‰€æœ‰pair     * 2. åˆ†ç»„pairï¼Œkeyç›¸åŒçš„åˆ†æˆä¸€ç»„     * 3. æ¯ä¸€ç»„è°ƒç”¨ä¸€æ¬¡reduce     * @param key     * @param values     * @param context     * @throws IOException     * @throws InterruptedException     * è¾“å‡ºkeyï¼šè¯¥ç»„çš„å•è¯     * è¾“å‡ºvalueï¼šè¯¥ç»„æ‰€æœ‰æ¬¡æ•°çš„è¿­ä»£å™¨ã€‚     */    @Override    protected void reduce(Text key, Iterable&lt;LongWritable&gt; values, Context context) throws IOException, InterruptedException &#123;//        super.reduce(key, values, context);        long count = 0;        for (LongWritable value : values) &#123;            count += value.get();        &#125;        outValue.set(count);        context.write(key, outValue);    &#125;&#125;</code></pre><h2 id="Driverç±»çš„ç¼–å†™"><a href="#Driverç±»çš„ç¼–å†™" class="headerlink" title="Driverç±»çš„ç¼–å†™"></a>Driverç±»çš„ç¼–å†™</h2><pre><code class="lang-java">/** * è¯¥ç±»æ˜¯MapReduceç¨‹åºå®¢æˆ·ç«¯é©±åŠ¨ç±»ã€‚ä¸»è¦æ˜¯ä¸ºäº†æ„é€ Jobå¯¹è±¡ï¼ŒæŒ‡å®šå„ç§ç»„ä»¶çš„å±æ€§ã€‚ * åŒ…æ‹¬Mapperã€Reducerã€è¾“å…¥è¾“å‡ºç±»å‹ã€æ•°æ®è·¯å¾„ã€æäº¤ä½œä¸šç­‰ã€‚ */public class WordCountDriver &#123;    public static void main(String[] args) throws IOException, InterruptedException, ClassNotFoundException &#123;        // åˆ›å»ºé…ç½®å¯¹è±¡        Configuration conf = new Configuration();        // æ„å»ºJobä½œä¸šå®ä¾‹ï¼Œ å‚æ•°ä¸ºConfã€Jobåå­—        Job job = Job.getInstance(conf, WordCountDriver.class.getSimpleName());        // è®¾ç½®MRç¨‹åºè¿è¡Œçš„ä¸»ç±»        job.setJarByClass(WordCountDriver.class);        // è®¾ç½®æœ¬æ¬¡MRç¨‹åºçš„Mapperã€Reducerç±»        job.setMapperClass(WordCountMapper.class);        job.setReducerClass(WordCountReducer.class);        // æŒ‡å®šMapperé˜¶æ®µè¾“å‡ºçš„kvç±»å‹        job.setMapOutputKeyClass(Text.class);        job.setMapOutputValueClass(LongWritable.class);        // æŒ‡å®šReduceré˜¶æ®µkvç±»å‹ï¼Œä¹Ÿæ˜¯æœ€ç»ˆè¾“å‡ºçš„kvç±»å‹        job.setOutputKeyClass(Text.class);        job.setOutputValueClass(LongWritable.class);        // é…ç½®æœ¬æ¬¡ä½œä¸šçš„è¾“å…¥è¾“å‡ºæ•°æ®è·¯å¾„        // todo: é»˜è®¤ç»„ä»¶ TextInputFormatã€TextOutputFormat        FileInputFormat.setInputPaths(job, new Path(args[0]));        FileOutputFormat.setOutputPath(job, new Path(args[1]));        // æäº¤ä½œä¸š//        job.submit();        // é‡‡ç”¨waitForCompletionæ–¹å¼æäº¤job å‚æ•°è¡¨ç¤ºæ˜¯å¦å¼€å¯å®æ—¶è¿½è¸ªä½œä¸šæ‰§è¡Œæƒ…å†µçš„åŠŸèƒ½        boolean res_flag = job.waitForCompletion(true);        // é€€å‡ºç¨‹åºï¼Œå’Œjobç»“æœè¿›è¡Œç»‘å®š        System.exit(res_flag ? 0 : 1);    &#125;&#125;</code></pre><p>ç»§æ‰¿å·¥å…·ç±»Toolçš„Driver</p><pre><code class="lang-java">/** * ä½¿ç”¨ToolRunneræäº¤MapReduceä½œä¸š */public class WordCountDriver_v2 extends Configured implements Tool &#123;    public static void main(String[] args) throws Exception &#123;        // åˆ›å»ºé…ç½®å¯¹è±¡        Configuration conf = new Configuration();        // ä½¿ç”¨ToolRunneræäº¤ç¨‹åº        int status = ToolRunner.run(conf, new WordCountDriver_v2(), args);        // é€€å‡ºå®¢æˆ·ç«¯        System.exit(status);    &#125;    @Override    public int run(String[] args) throws Exception &#123;        // æ„å»ºJobä½œä¸šå®ä¾‹ï¼Œ å‚æ•°ä¸ºConfã€Jobåå­—        Job job = Job.getInstance(getConf(), WordCountDriver_v2.class.getSimpleName());        // è®¾ç½®MRç¨‹åºè¿è¡Œçš„ä¸»ç±»        job.setJarByClass(WordCountDriver_v2.class);        // è®¾ç½®æœ¬æ¬¡MRç¨‹åºçš„Mapperã€Reducerç±»        job.setMapperClass(WordCountMapper.class);        job.setReducerClass(WordCountReducer.class);        // æŒ‡å®šMapperé˜¶æ®µè¾“å‡ºçš„kvç±»å‹        job.setMapOutputKeyClass(Text.class);        job.setMapOutputValueClass(LongWritable.class);        // æŒ‡å®šReduceré˜¶æ®µkvç±»å‹ï¼Œä¹Ÿæ˜¯æœ€ç»ˆè¾“å‡ºçš„kvç±»å‹        job.setOutputKeyClass(Text.class);        job.setOutputValueClass(LongWritable.class);        // é…ç½®æœ¬æ¬¡ä½œä¸šçš„è¾“å…¥è¾“å‡ºæ•°æ®è·¯å¾„        // todo: é»˜è®¤ç»„ä»¶ TextInputFormatã€TextOutputFormat        FileInputFormat.setInputPaths(job, new Path(args[0]));        FileOutputFormat.setOutputPath(job, new Path(args[1]));        return job.waitForCompletion(true) ? 0 : 1;    &#125;&#125;</code></pre><h2 id="å¦‚ä½•è¿è¡ŒMapReduceç¨‹åºï¼Ÿ"><a href="#å¦‚ä½•è¿è¡ŒMapReduceç¨‹åºï¼Ÿ" class="headerlink" title="å¦‚ä½•è¿è¡ŒMapReduceç¨‹åºï¼Ÿ"></a>å¦‚ä½•è¿è¡ŒMapReduceç¨‹åºï¼Ÿ</h2><p>MapReduceç¨‹åºæ˜¯å•æœºè¿è¡Œè¿˜æ˜¯åˆ†å¸ƒå¼è¿è¡Œï¼Ÿ</p><p>MapReduceç¨‹åºéœ€è¦çš„è¿ç®—èµ„æºæ˜¯Hadoop YARNåˆ†é…è¿˜æ˜¯æœ¬æœºè‡ªå·±åˆ†é…ï¼Ÿ</p><p>è¿è¡Œåœ¨ä½•ç§æ¨¡å¼ï¼Œå–å†³äº mapreduce.framwork.name</p><p>yarn: é›†ç¾¤æ¨¡å¼</p><p>local: æœ¬åœ°æ¨¡å¼</p><p>å¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤æ˜¯localæ¨¡å¼ã€‚</p><p>åœ¨ mapred-default.xml ä¸­å®šä¹‰ã€‚å¦‚æœä»£ç ä¸­ï¼ˆconf.setï¼‰ã€è¿è¡Œçš„ç¯å¢ƒä¸­ï¼ˆmapred-site.xmlï¼‰æœ‰é…ç½®ï¼Œåˆ™ä¼šè¦†ç›–defaultçš„é…ç½®ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hadoop</tag>
      
      <tag>Word Count</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘æ•°æ®å¯†é›†æ€§åº”ç”¨ç³»ç»Ÿè®¾è®¡CH1ç¬”è®°</title>
    <link href="/2021/05/04/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%95%B0%E6%8D%AE%E5%AF%86%E9%9B%86%E6%80%A7%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1CH1%E7%AC%94%E8%AE%B0/"/>
    <url>/2021/05/04/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%95%B0%E6%8D%AE%E5%AF%86%E9%9B%86%E6%80%A7%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1CH1%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p>ç¬¬ä¸€ç« ï¼šå¯é ã€å¯æ‰©å±•å’Œå¯ç»´æŠ¤çš„åº”ç”¨ç³»ç»Ÿ<br><!--more---></p><h3 id="æ•°æ®å¯†é›†å‹é—®é¢˜çš„æŒ‘æˆ˜ï¼š"><a href="#æ•°æ®å¯†é›†å‹é—®é¢˜çš„æŒ‘æˆ˜ï¼š" class="headerlink" title="æ•°æ®å¯†é›†å‹é—®é¢˜çš„æŒ‘æˆ˜ï¼š"></a>æ•°æ®å¯†é›†å‹é—®é¢˜çš„æŒ‘æˆ˜ï¼š</h3><p>æ•°æ®é‡ï¼Œæ•°æ®å¤æ‚åº¦ï¼Œæ•°æ®çš„å¿«é€Ÿå¤šå˜æ€§ï¼›</p><h3 id="æ•°æ®å¯†é›†å‹åº”ç”¨åŒ…å«ä»¥ä¸‹æ¨¡å—ï¼š"><a href="#æ•°æ®å¯†é›†å‹åº”ç”¨åŒ…å«ä»¥ä¸‹æ¨¡å—ï¼š" class="headerlink" title="æ•°æ®å¯†é›†å‹åº”ç”¨åŒ…å«ä»¥ä¸‹æ¨¡å—ï¼š"></a>æ•°æ®å¯†é›†å‹åº”ç”¨åŒ…å«ä»¥ä¸‹æ¨¡å—ï¼š</h3><ul><li>æ•°æ®åº“ï¼›</li><li>é«˜é€Ÿç¼“å­˜ï¼›</li><li>ç´¢å¼•ï¼šç”¨æˆ·å¯ä»¥æŒ‰å…³é”®å­—æœç´¢æ•°æ®äº•æ”¯æŒå„ç§è¿‡æ»¤æ“ä½œï¼›</li><li>æµå¼å¤„ç†ï¼šæŒç»­å‘é€æ¶ˆæ¯è‡³å¦ä¸€ä¸ªè¿›ç¨‹ï¼Œå¤„ç†é‡‡ç”¨å¼‚æ­¥æ–¹å¼ï¼›</li><li>æ‰¹å¤„ç†ï¼šå®šæœŸå¤„ç†å¤§é‡ç´¯è®¡æ•°æ®ã€‚</li></ul><h3 id="æ•°æ®ç³»ç»Ÿ"><a href="#æ•°æ®ç³»ç»Ÿ" class="headerlink" title="æ•°æ®ç³»ç»Ÿ"></a>æ•°æ®ç³»ç»Ÿ</h3><p>æœ¬ç« æå‡º<strong>æ•°æ®ç³»ç»Ÿ</strong>çš„æ¦‚å¿µï¼ŒåŒ…æ‹¬<strong>æ•°æ®åº“</strong>ã€<strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>å’Œ<strong>é«˜é€Ÿç¼“å­˜</strong>ç­‰ä¸åŒç±»å‹çš„ç³»ç»Ÿã€‚è¿™æ ·åˆ†ç±»çš„åŸå› æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ol><li><p>éƒ½èƒ½å°†æ•°æ®ä¿å­˜ä¸€æ®µæ—¶é—´ã€‚åŒºåˆ«åœ¨äºè®¿é—®æ¨¡å¼ä¸åŒï¼Œä»¥åŠç”±äºä¸åŒè®¿é—®æ¨¡å¼å¯¼è‡´çš„ä¸åŒæ€§èƒ½ã€‚</p></li><li><p>æ–°æŠ€æœ¯ã€å·¥å…·æ‹¥æœ‰å¤šç§åŠŸèƒ½ï¼Œç³»ç»Ÿä¹‹é—´çš„ç•Œé™å˜å¾—æ¨¡ç³Šã€‚æ¯”å¦‚redisæ—¢èƒ½<strong>å­˜å‚¨</strong>ä¹Ÿèƒ½ä½œä¸º<strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>ï¼Œkafkaä½œä¸º<strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>ä¹Ÿèƒ½<strong>æŒä¹…åŒ–å­˜å‚¨</strong>ã€‚</p></li><li><p>ç³»ç»Ÿä¹Ÿéœ€è¦ç»†åˆ†ï¼ŒåŸæœ‰çš„ä½†å„ç»„ä»¶æ— æ³•æ»¡è¶³æ•°æ®å¤„ç†ä¸å­˜å‚¨éœ€æ±‚ï¼Œä¸‰åˆ†ç±»æ¦‚å¿µéœ€è¦è¿›ä¸€æ­¥åˆ†è§£ã€‚ä¾‹å¦‚ï¼Œå³ä¾¿æ˜¯ä¸€ä¸ªç®€å•çš„æ•°æ®ç³»ç»Ÿï¼Œä¹Ÿå¯èƒ½ç”±å¾ˆå¤šå­ç»„ä»¶æ„æˆï¼š</p></li></ol><p><img src="/2021/05/04/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%95%B0%E6%8D%AE%E5%AF%86%E9%9B%86%E6%80%A7%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1CH1%E7%AC%94%E8%AE%B0/ä¸€ç§æ•°æ®ç³»ç»Ÿæ¶æ„.png" alt></p><p>è¿™ä¸ªåº”ç”¨åŒ…å«ç¼“å­˜å±‚ï¼ˆMemcachedï¼‰å’Œå…¨æ–‡ç´¢å¼•æœåŠ¡å™¨ï¼ˆElasticsearchæˆ–è€…Solrï¼‰ä»¥åŠæ•°æ®åº“ã€‚ç¨‹åºå‘˜ç¼–å†™åº”ç”¨ä»£ç æ¥æ§åˆ¶ç¼“å­˜ã€ç´¢å¼•å’Œæ•°æ®åŒæ­¥æ“ä½œã€‚</p><h3 id="æ•°æ®ç³»ç»Ÿçš„ä¸‰ç§å…³é”®ç‰¹æ€§ï¼š"><a href="#æ•°æ®ç³»ç»Ÿçš„ä¸‰ç§å…³é”®ç‰¹æ€§ï¼š" class="headerlink" title="æ•°æ®ç³»ç»Ÿçš„ä¸‰ç§å…³é”®ç‰¹æ€§ï¼š"></a>æ•°æ®ç³»ç»Ÿçš„ä¸‰ç§å…³é”®ç‰¹æ€§ï¼š</h3><ul><li><p>å¯é æ€§ï¼ˆReliabilityï¼‰ï¼šå½“å‡ºç°æ„å¤–æƒ…å†µï¼Œå¦‚è½¯ä»¶ã€ç¡¬ä»¶æ•…éšœï¼Œäººä¸ºæ“ä½œå¤±è¯¯ç­‰ç°è±¡æ—¶ï¼Œç³»ç»Ÿä»å¯ä»¥æ­£å¸¸è¿è½¬çš„èƒ½åŠ›ã€‚è¿™é‡Œçš„æ­£å¸¸è¿è½¬ï¼Œæ˜¯æŒ‡ç‰ºç‰²éƒ¨åˆ†æ€§èƒ½æ¡ä»¶ä¸‹ï¼Œæä¾›æ­£ç¡®çš„æœåŠ¡ã€‚</p></li><li><p>å¯æ‰©å±•æ€§ï¼ˆScalabilityï¼‰ï¼šéšç€é—®é¢˜è§„æ¨¡çš„å¢é•¿ï¼Œæ¯”å¦‚æµé‡ã€æ•°æ®é‡æˆ–è€…ä»»åŠ¡å¤æ‚åº¦ï¼Œç³»ç»Ÿä»¥åˆç†æ–¹å¼åŒ¹é…è¿™ç§å¢é•¿çš„èƒ½åŠ›ã€‚</p></li><li><p>å¯ç»´æŠ¤æ€§ï¼ˆMaintainabilityï¼‰ï¼šæ–°çš„å¼€å‘æˆ–è€…ç»´æŠ¤äººå‘˜ä¸Šæ‰‹çš„å®¹æ˜“ç¨‹åº¦ï¼Œä»¥åŠé€‚é…æ–°åœºæ™¯çš„èƒ½åŠ›ã€‚</p></li></ul><h3 id="å¯é æ€§"><a href="#å¯é æ€§" class="headerlink" title="å¯é æ€§"></a>å¯é æ€§</h3><p>ä»€ä¹ˆæ˜¯å¯é æ€§ï¼Ÿå³ä½¿å‘ç”Ÿäº†æŸäº›é”™è¯¯ï¼Œç³»ç»Ÿä»å¯ä»¥ç»§ç»­æ­£å¸¸å·¥ä½œçš„èƒ½åŠ›ã€‚</p><ul><li>æ•…éšœæˆ–é”™è¯¯ï¼ˆfaultï¼‰ï¼šç»„ä»¶åç¦»æ­£ç¡®è§„æ ¼çš„ç°è±¡ã€‚</li><li>å¤±æ•ˆï¼ˆfailureï¼‰ï¼šç³»ç»Ÿå®•æœºï¼Œæ— æ³•æä¾›æœåŠ¡ã€‚</li></ul><p>ä¸ºä¿è¯å¯é æ€§ï¼Œéœ€è¦è®¾è®¡å®¹é”™æœºåˆ¶ï¼ˆfault-tolerantï¼‰æ¥é¿å…æ•…éšœå¼•å‘ç³»ç»Ÿå¤±æ•ˆï¼Œè€Œä¸æ˜¯é¿å…æ•…éšœï¼ˆå½“ç„¶ï¼Œé¿å…æ•…éšœä¹Ÿæ˜¯æå‡å¯é æ€§çš„æ‰‹æ®µï¼‰ã€‚</p><h3 id="å¯é æ€§æŒ‡æ ‡"><a href="#å¯é æ€§æŒ‡æ ‡" class="headerlink" title="å¯é æ€§æŒ‡æ ‡"></a>å¯é æ€§æŒ‡æ ‡</h3><h4 id="å¤±æ•ˆå‰å¹³å‡æ—¶é—´ï¼ˆMTTFï¼‰"><a href="#å¤±æ•ˆå‰å¹³å‡æ—¶é—´ï¼ˆMTTFï¼‰" class="headerlink" title="å¤±æ•ˆå‰å¹³å‡æ—¶é—´ï¼ˆMTTFï¼‰"></a>å¤±æ•ˆå‰å¹³å‡æ—¶é—´ï¼ˆMTTFï¼‰</h4><p>æ˜¯é’ˆå¯¹ä¸å¯ä¿®å¤ç³»ç»Ÿè€Œè¨€çš„ï¼Œæ˜¯æŒ‡ç³»ç»Ÿå‘ç”Ÿå¤±æ•ˆå‰çš„å¹³å‡å·¥ä½œï¼ˆæˆ–å­˜å‚¨ï¼‰ æ—¶é—´æˆ–å·¥ä½œæ¬¡æ•°ã€‚è¶Šé«˜è¶Šå¥½ã€‚</p><h4 id="å¹³å‡æ— æ•…éšœæ—¶é—´ï¼ˆMTBFï¼‰"><a href="#å¹³å‡æ— æ•…éšœæ—¶é—´ï¼ˆMTBFï¼‰" class="headerlink" title="å¹³å‡æ— æ•…éšœæ—¶é—´ï¼ˆMTBFï¼‰"></a>å¹³å‡æ— æ•…éšœæ—¶é—´ï¼ˆMTBFï¼‰</h4><p>æ˜¯é’ˆå¯¹å¯ä¿®å¤ç³»ç»Ÿè€Œè¨€çš„ï¼ŒæŒ‡ä¸¤æ¬¡ç›¸é‚»å¤±æ•ˆï¼ˆæ•…éšœï¼‰ ä¹‹é—´çš„å·¥ä½œæ—¶é—´ï¼Œ è€Œä¸æ˜¯æŒ‡æ•´ä¸ªç³»ç»Ÿçš„æŠ¥åºŸæ—¶é—´ã€‚è¶Šé«˜è¶Šå¥½ã€‚</p><h4 id="å¹³å‡ä¿®å¤æ—¶é—´ï¼ˆMTTRï¼‰"><a href="#å¹³å‡ä¿®å¤æ—¶é—´ï¼ˆMTTRï¼‰" class="headerlink" title="å¹³å‡ä¿®å¤æ—¶é—´ï¼ˆMTTRï¼‰"></a>å¹³å‡ä¿®å¤æ—¶é—´ï¼ˆMTTRï¼‰</h4><p>æ˜¯å¯¹å¯ä¿®å¤ç³»ç»Ÿè€Œè¨€çš„ï¼ŒæŒ‡ä»å‡ºç°æ•…éšœåˆ°ä¿®å¤ä¸­é—´çš„è¿™æ®µæ—¶é—´ã€‚è¶Šä½è¶Šå¥½ã€‚</p><h4 id="å¯ç”¨æ€§"><a href="#å¯ç”¨æ€§" class="headerlink" title="å¯ç”¨æ€§"></a>å¯ç”¨æ€§</h4><p>åˆç§°ä¸ºæœ‰æ•ˆæ€§ï¼Œä¸€èˆ¬ç”¨å¯ç”¨åº¦æ¥å®šé‡è®¡ç®—ï¼Œå…¬å¼ä¸º</p><script type="math/tex; mode=display">A=\frac{\text{MTBF}}{\text{MTBF}+\text{MTTR}}</script><p>å¯é æ€§é€šå¸¸ä½äºå¯ç”¨æ€§ã€‚å¯¹äºä¸å¯ç»´ä¿®ç³»ç»Ÿï¼Œ å¯ç”¨åº¦å°±ä»…ä»…å†³å®šäºä¸”ç­‰äºå¯é åº¦ã€‚</p><h3 id="æ•°æ®ç³»ç»Ÿå¯èƒ½å‘ç”Ÿå“ªäº›æ•…éšœï¼Ÿå¦‚ä½•æå‡å®¹é”™èƒ½åŠ›ï¼Ÿ"><a href="#æ•°æ®ç³»ç»Ÿå¯èƒ½å‘ç”Ÿå“ªäº›æ•…éšœï¼Ÿå¦‚ä½•æå‡å®¹é”™èƒ½åŠ›ï¼Ÿ" class="headerlink" title="æ•°æ®ç³»ç»Ÿå¯èƒ½å‘ç”Ÿå“ªäº›æ•…éšœï¼Ÿå¦‚ä½•æå‡å®¹é”™èƒ½åŠ›ï¼Ÿ"></a>æ•°æ®ç³»ç»Ÿå¯èƒ½å‘ç”Ÿå“ªäº›æ•…éšœï¼Ÿå¦‚ä½•æå‡å®¹é”™èƒ½åŠ›ï¼Ÿ</h3><h4 id="1-ç¡¬ä»¶æ•…éšœ"><a href="#1-ç¡¬ä»¶æ•…éšœ" class="headerlink" title="1. ç¡¬ä»¶æ•…éšœ"></a>1. ç¡¬ä»¶æ•…éšœ</h4><p>åŒ…æ‹¬ç¡¬ç›˜é”™è¯¯ã€ç”µæºé”™è¯¯ã€ç½‘å£æ¥è§¦ä¸è‰¯ç­‰ã€‚</p><p>æœ€è€ç”¨çš„ç¡¬ç›˜çš„MTTFä¸º10~50å¹´ï¼Œå› æ­¤ä¸€ä¸ªåŒ…æ‹¬10000ä¸ªç£ç›˜çš„å­˜å‚¨é›†ç¾¤ä¸­ï¼Œä¸€å¤©åä¸€ä¸ªä¹Ÿæ˜¯å¾ˆæ­£å¸¸çš„ï¼ˆå‡è®¾è´­ä¹°ç¡¬ç›˜åœ¨æ—¶é—´ä¸Šæ˜¯å‡åŒ€åˆ†å¸ƒï¼‰ã€‚</p><p>åº”å¯¹æ–¹æ¡ˆæ˜¯æ·»åŠ å†—ä½™ï¼Œæ¯”å¦‚ä¸Šè¿°ç¡¬ç›˜é—®é¢˜å°±å¯ä»¥ç”¨RAIDï¼Œç”µæºç”¨åŒç”µæºï¼Œç”šè‡³çƒ­æ’æ‹”CPUç­‰ã€‚</p><p>ä»¥ä¸Šæ˜¯ä»ç¡¬ä»¶è§’åº¦è§£å†³ç¡¬ä»¶æ•…éšœï¼Œå…¶å®å¯ä»¥é€šè¿‡è½¯ä»¶è§’åº¦è§£å†³ç¡¬ä»¶æ•…éšœé—®é¢˜ã€‚</p><h4 id="2-è½¯ä»¶é”™è¯¯"><a href="#2-è½¯ä»¶é”™è¯¯" class="headerlink" title="2. è½¯ä»¶é”™è¯¯"></a>2. è½¯ä»¶é”™è¯¯</h4><p>æ“ä½œç³»ç»Ÿå†…æ ¸çš„Bugï¼Œç³»ç»Ÿä¾èµ–çš„æœåŠ¡çªç„¶æ²¡æœ‰å“åº”ï¼ŒæŸä¸ªç»„ä»¶çš„å¤±æ§ç­‰ã€‚</p><p>è½¯ä»¶ç³»ç»Ÿçš„é—®é¢˜æœ‰æ—¶æ²¡æœ‰å¿«é€Ÿè§£å†³çš„åŠæ³•ï¼Œåªèƒ½é€šè¿‡æ£€æŸ¥ä¾èµ–å‡è®¾å’Œç³»ç»Ÿäº¤äº’ã€è¿›è¡Œå…¨é¢æµ‹è¯•ç­‰æ–¹æ³•æ¥é¢„é˜²ï¼Œæˆ–è€…å…è®¸è¿›ç¨‹é‡å¯ã€è¯„ä¼°è¿è¡Œæ—¶è¡¨ç°ç­‰åº”å¯¹ã€‚</p><h4 id="3-äººä¸ºå¤±è¯¯"><a href="#3-äººä¸ºå¤±è¯¯" class="headerlink" title="3. äººä¸ºå¤±è¯¯"></a>3. äººä¸ºå¤±è¯¯</h4><p>äººæ˜¯æœ€ä¸å¯é çš„å› ç´ ã€‚è¿ç»´äººå‘˜é…ç½®é”™è¯¯å¾€å¾€æ˜¯ç³»ç»Ÿä¸‹çº¿çš„ä¸»è¦åŸå› ã€‚</p><p>è¿™éƒ¨åˆ†çš„é¢„é˜²ä»¥åŠåº”å¯¹ï¼Œæ›´åŠ ä¾èµ–è½¯ä»¶å·¥ç¨‹é¢†åŸŸçš„çŸ¥è¯†ã€‚</p><h3 id="å¯æ‰©å±•æ€§"><a href="#å¯æ‰©å±•æ€§" class="headerlink" title="å¯æ‰©å±•æ€§"></a>å¯æ‰©å±•æ€§</h3><p>å¯æ‰©å±•æ€§æ˜¯ç”¨æ¥æè¿°ç³»ç»Ÿåº”å¯¹è´Ÿè½½å¢åŠ çš„èƒ½åŠ›çš„æœ¯è¯­ã€‚ä¸€ä¸ªç³»ç»Ÿæ·»åŠ è®¡ç®—å•å…ƒè¶Šå®¹æ˜“ï¼Œæ·»åŠ è®¡ç®—å•å…ƒåè®¡ç®—èƒ½åŠ›çš„å¢é•¿è¶Šå¤šï¼Œå°±ç§°è¿™ä¸ªç³»ç»Ÿçš„å¯æ‰©å±•æ€§è¶Šå¼ºã€‚</p><h3 id="å¦‚ä½•åº¦é‡ç³»ç»Ÿè´Ÿè½½"><a href="#å¦‚ä½•åº¦é‡ç³»ç»Ÿè´Ÿè½½" class="headerlink" title="å¦‚ä½•åº¦é‡ç³»ç»Ÿè´Ÿè½½"></a>å¦‚ä½•åº¦é‡ç³»ç»Ÿè´Ÿè½½</h3><p>æ¯ç§’è¯·æ±‚å¤„ç†æ¬¡æ•°ã€æ•°æ®åº“ä¸­å†™å…¥çš„æ¯”ä¾‹ã€èŠå¤©å®¤çš„åŒæ—¶æ´»åŠ¨ç”¨æˆ·æ•°é‡ã€ç¼“å­˜å‘½ä¸­ç‡ç­‰ï¼Œ</p><p>è¿˜è¦æ³¨æ„åˆ†æå¹³å‡å€¼å’Œå³°å€¼å¯¹æ€§èƒ½çš„å½±å“</p><h3 id="å®ä¾‹ï¼štwitterçš„ä¸¤ä¸ªå®ç°ç‰ˆæœ¬"><a href="#å®ä¾‹ï¼štwitterçš„ä¸¤ä¸ªå®ç°ç‰ˆæœ¬" class="headerlink" title="å®ä¾‹ï¼štwitterçš„ä¸¤ä¸ªå®ç°ç‰ˆæœ¬"></a>å®ä¾‹ï¼štwitterçš„ä¸¤ä¸ªå®ç°ç‰ˆæœ¬</h3><p>twitteræœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼ˆç±»æ¯”å¾®åšï¼Œä¸ºäº†æ–¹ä¾¿ç†è§£æˆ‘æ¥ä¸‹æ¥ä»¥å¾®åšä»£æ›¿æ¨ç‰¹ï¼‰ï¼Œæ ¹æ®å…¶2012å¹´çš„æ•°æ®ï¼Œå…¶åŠŸèƒ½å’Œè´Ÿè½½å¦‚ä¸‹ï¼š</p><p>å‘å¾®åšï¼šå¹³å‡æ¯ç§’4600æ¡å‘å¸ƒç”³è¯·ï¼Œå³°å€¼12000æ¡æ¨ç‰¹ç”³è¯·å‘å¸ƒã€‚</p><p>æ”¶å¾®åšï¼šå¹³å‡æ¯ç§’300,000æ¡æ”¶å¾®åšçš„è¯·æ±‚ã€‚</p><p>twitterç¬¬ä¸€ä¸ªç‰ˆæœ¬ä½¿ç”¨å¦‚ä¸‹ç³»ç»Ÿè®¾è®¡å®Œæˆå¾®åšçš„æ”¶å‘ï¼š</p><p>å‘é€å¾®åšï¼šç”¨æˆ·å‘é€çš„å¾®åšæ’å…¥å…¨å±€å¾®åšé›†åˆã€‚</p><p>ç”¨æˆ·ç”³è¯·æŸ¥çœ‹è‡ªå·±çš„æ—¶é—´çº¿ï¼š  </p><ul><li>éå†æ‰€æœ‰Userçš„å…³æ³¨å¯¹è±¡ï¼›</li><li>æå–æ‰€æœ‰å…³æ³¨å¯¹è±¡çš„å¾®åšï¼›</li><li>æŒ‰ç…§å‘è¡¨æ—¶é—´æ’åºå¹¶åˆå¹¶ã€‚</li></ul><p>éšç€æ³¨å†Œç”¨æˆ·å˜å¤šï¼Œè´Ÿè½½å‹åŠ›ä¸æ—¥ä¿±å¢ï¼Œå› æ­¤é‡‡å–ç¬¬äºŒç§æ–¹æ³•ï¼š</p><p>æ¯ä¸ªç”¨æˆ·çš„æ—¶é—´çº¿ç»´æŠ¤ä¸€ä¸ªç¼“å­˜ã€‚</p><p>ç”¨æˆ·å‘è¡¨æ–°çš„å¾®åšï¼š</p><ul><li>æŸ¥è¯¢å…³æ³¨å¯¹è±¡ï¼›</li><li>æ’å…¥åˆ°æ¯ä¸ªç²‰ä¸çš„æ—¶é—´çº¿ç¼“å­˜ã€‚</li></ul><p>æ–¹æ³•äºŒçš„å¥½å¤„æ˜¯ï¼Œç”¨æˆ·å‘å¸ƒå¾®åšæ—¶å¤šåšä¸€äº›äº‹æƒ…å¯ä»¥åŠ é€Ÿç”¨æˆ·æ¥æ”¶å¾®åšæ—¶çš„æ€§èƒ½ã€‚è€Œç”¨æˆ·æ¥æ”¶å¾®åšçš„è¯·æ±‚è´Ÿè½½æ¯”å‘é€è´Ÿè½½é«˜ä¸¤ä¸ªæ•°é‡çº§ã€‚</p><p>Twitteré’ˆå¯¹é‚£äº›ç²‰ä¸é‡ç‰¹åˆ«å¤šçš„å¤§Vé‡‡ç”¨æ–¹æ³•ä¸€ï¼Œé’ˆå¯¹ç²‰ä¸é‡ä¸å¤ªå¤§çš„ç»å¤§å¤šæ•°ç”¨æˆ·ä½¿ç”¨æ–¹æ³•äºŒã€‚</p><h3 id="å¦‚ä½•åº¦é‡ç³»ç»Ÿæ€§èƒ½"><a href="#å¦‚ä½•åº¦é‡ç³»ç»Ÿæ€§èƒ½" class="headerlink" title="å¦‚ä½•åº¦é‡ç³»ç»Ÿæ€§èƒ½"></a>å¦‚ä½•åº¦é‡ç³»ç»Ÿæ€§èƒ½</h3><p><strong>ååé‡</strong></p><p>ååé‡æ˜¯åœ¨ä¸€ä¸ªç‰¹å®šæ—¶é—´æ®µå†…å®Œæˆçš„ä»»åŠ¡çš„è®¡æ•°ï¼Œä¾‹å¦‚ï¼šæ¯ç§’ç‚¹å‡»æ•°ã€‚</p><p>ç³»ç»Ÿååé‡å‡ ä¸ªé‡è¦å‚æ•°ï¼šQPSï¼ˆTPSï¼‰ã€å¹¶å‘æ•°ã€å“åº”æ—¶é—´</p><p>å¹¶å‘æ•°ï¼š ç³»ç»ŸåŒæ—¶å¤„ç†çš„request/äº‹åŠ¡æ•°</p><p>TPSï¼šTransactions Per Secondï¼ˆæ¯ç§’ä¼ è¾“çš„äº‹ç‰©å¤„ç†ä¸ªæ•°ï¼‰ï¼Œå³æœåŠ¡å™¨æ¯ç§’å¤„ç†çš„äº‹åŠ¡æ•°ã€‚</p><p>QPSï¼šæ¯ç§’æŸ¥è¯¢ç‡ï¼Œå³å¯¹ä¸€ä¸ªç‰¹å®šçš„æŸ¥è¯¢æœåŠ¡å™¨åœ¨è§„å®šæ—¶é—´å†…æ‰€å¤„ç†æµé‡å¤§å°ã€‚</p><p><strong>å“åº”æ—¶é—´</strong></p><p>ä»å®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°æ¥å—å“åº”ä¹‹é—´çš„é—´éš”æ—¶é•¿ã€‚åœ¨çº¿ç³»ç»Ÿé€šå¸¸æ›´çœ‹é‡å“åº”æ—¶é—´ï¼Œæ‰¹å¤„ç†ç³»ç»Ÿæ›´å…³å¿ƒååé‡ã€‚</p><p>ç”±äºæ¯æ¬¡è¯·æ±‚çš„å“åº”æ—¶é—´æœä»ä¸€ä¸ªåˆ†å¸ƒï¼Œå› æ­¤æˆ‘ä»¬æ›´å…³å¿ƒå¹³å‡å“åº”æ—¶é•¿ï¼Œæˆ–è€…<strong>ç™¾åˆ†ä½æ•°æ—¶é•¿</strong>ã€‚å°†å“åº”æ—¶é•¿æ’åºï¼Œå–50ç™¾åˆ†ä½æ•°ï¼ˆä¸­ä½æ•°ï¼‰æ¯”å¹³å‡æ•°æ›´æœ‰æ„ä¹‰ã€‚å…¶ä»–æœ‰æ„ä¹‰çš„ç™¾åˆ†ä½æ•°æœ‰95ã€99å’Œ99.9ç™¾åˆ†ä½æ•°ã€‚</p><p>é‡‡ç”¨è¾ƒé«˜çš„å“åº”æ—¶é—´ç™¾åˆ†ä½æ•°å¾ˆé‡è¦ï¼Œå› ä¸ºä»–ä»¬ç›´æ¥å½±å“ç”¨æˆ·çš„æ€»ä½“æœåŠ¡ä½“éªŒã€‚95ç™¾åˆ†ä½æ•°çš„å“åº”æ—¶é—´ä¸º1.5ç§’ï¼Œæ„å‘³ç€100ä¸ªè¯·æ±‚ä¸­5ä¸ªè¯·æ±‚æ…¢äº1.5ç§’ï¼Œä½†æ˜¯å¯¹äºç”µå•†å¹³å°æ¥è¯´ï¼Œæœ‰å¯èƒ½æ°æ°æ˜¯è¿™äº›é¡¾å®¢è´­ä¹°äº†æ›´å¤šçš„å•†å“å¯¼è‡´è®¿é—®å˜æ…¢ã€‚</p><p>æ’é˜Ÿå»¶è¿Ÿæ˜¯å½±å“é«˜ç™¾åˆ†æ•°å“åº”æ—¶é—´çš„ä¸»è¦å»¶è¿Ÿæ¥æºã€‚å› æ­¤ï¼Œå¦‚æœåœ¨æ€§èƒ½æµ‹è¯•æ—¶ï¼Œè´Ÿè½½ç”Ÿæˆå®¢æˆ·ç«¯åœ¨æœåŠ¡å™¨å¤„ç†å®Œä¹‹å‰è¯·æ±‚åå†å‘é€æ–°çš„è¯·æ±‚ï¼Œå°±ä¼šå¿½è§†äº†æ’é˜Ÿé€ æˆçš„å»¶è¿Ÿã€‚</p><h3 id="é•¿å°¾æ•ˆåº”"><a href="#é•¿å°¾æ•ˆåº”" class="headerlink" title="é•¿å°¾æ•ˆåº”"></a>é•¿å°¾æ•ˆåº”</h3><p>ä¸€ä¸ªæœåŠ¡æ¶‰åŠå¤šä¸ªä¸åŒçš„åç«¯è°ƒç”¨ï¼Œåˆ™æœ€æ…¢çš„è°ƒç”¨ä¼šæ‹–ç´¯æ•´ä¸ªæœåŠ¡çš„å“åº”æ—¶é—´ï¼Œè¿™ç§ç°è±¡ç§°ä¹‹ä¸ºé•¿å°¾æ•ˆåº”ã€‚</p><p>ç”¨æˆ·æ€»æ˜¯éœ€è¦ç­‰å¾…æœ€æ…¢çš„é‚£ä¸ªè°ƒç”¨å®Œæˆã€‚å› æ­¤å³ä¾¿åªæœ‰å¾ˆå°æ¯”ä¾‹çš„è¯·æ±‚ç¼“æ…¢ï¼Œä¹Ÿå¯èƒ½ç”±äºæŸä¸€ä¸ªç”¨æˆ·é¢‘ç¹äº§ç”Ÿè¿™ç§è°ƒç”¨è€Œå¯¼è‡´æ€»ä½“å˜æ…¢ã€‚</p><h3 id="å¦‚ä½•åº”å¯¹è´Ÿè½½å¢åŠ ï¼Œæå‡å¯æ‰©å±•æ€§ï¼Ÿ"><a href="#å¦‚ä½•åº”å¯¹è´Ÿè½½å¢åŠ ï¼Œæå‡å¯æ‰©å±•æ€§ï¼Ÿ" class="headerlink" title="å¦‚ä½•åº”å¯¹è´Ÿè½½å¢åŠ ï¼Œæå‡å¯æ‰©å±•æ€§ï¼Ÿ"></a>å¦‚ä½•åº”å¯¹è´Ÿè½½å¢åŠ ï¼Œæå‡å¯æ‰©å±•æ€§ï¼Ÿ</h3><p>å‚ç›´æ‰©å±•ï¼šå‡çº§åˆ°æ›´å¼ºå¤§çš„æœºå™¨ã€‚</p><p>æ°´å¹³æ‰©å±•ï¼šå°†è´Ÿè½½åˆ†å¸ƒåˆ°æ›´å¤šå°æœºå™¨ã€‚</p><p>ç³»ç»Ÿè®¾è®¡æ—¶ï¼Œè¦åœ¨è¿™ä¸¤ç§æ‰©å±•ä¸­é—´ä½œå–èˆã€‚åŒæ—¶è¦æ ¹æ®ä¸åŒçš„ååé‡ã€è¯·æ±‚æ–¹å¼ç­‰åšé’ˆå¯¹æ€§ä¼˜åŒ–ã€‚</p><h3 id="å¯ç»´æŠ¤æ€§"><a href="#å¯ç»´æŠ¤æ€§" class="headerlink" title="å¯ç»´æŠ¤æ€§"></a>å¯ç»´æŠ¤æ€§</h3><p>è½¯ä»¶å·¥ç¨‹å¸ˆä¸å–œæ¬¢è¯»åˆ«äººç•™ä¸‹çš„ä»£ç ï¼Œä¸å–œæ¬¢ç»´æŠ¤åˆ«äººå¼€å‘çš„è€ç³»ç»Ÿï¼Œè¿™å·²ç»æ˜¯ä¼—æ‰€å‘¨çŸ¥çš„äº‹å®ã€‚</p><p>ä½†æ˜¯æ¢ä¸ªè§’åº¦ï¼Œä¸å¦‚è¯´å¤§å¤šæ•°ç³»ç»Ÿåœ¨è®¾è®¡ä¹‹åˆå°±æ²¡æœ‰è€ƒè™‘ä»¤åç»­å¼€å‘è€…æ–¹ä¾¿åœ°ç»´æŠ¤è¿™ä¸€ä¸ªç‰¹æ€§ã€‚</p><p>ä¸ºäº†æå‡ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ï¼Œå‡å°‘ç»´æŠ¤æœŸé—´çš„éº»çƒ¦ï¼Œå¯ä»¥éµå¾ªè½¯ä»¶ç³»ç»Ÿçš„ä¸‰ä¸ªè®¾è®¡åŸåˆ™ï¼š</p><p>å¯è¿ç»´æ€§ã€ç®€å•æ€§ã€å¯æ¼”åŒ–æ€§ã€‚</p><h4 id="å¯è¿ç»´æ€§"><a href="#å¯è¿ç»´æ€§" class="headerlink" title="å¯è¿ç»´æ€§"></a>å¯è¿ç»´æ€§</h4><p>ç›®æ ‡æ˜¯ä»¤è¿ç»´äººå‘˜æ›´è½»æ¾ã€‚ä¹‹å‰è®¨è®ºè¿‡ï¼Œäººæ˜¯ç³»ç»Ÿä¸­æœ€ä¸ç¨³å®šçš„å› ç´ ã€‚å› æ­¤ç®€åŒ–è¿ç»´äººå‘˜çš„æ“ä½œï¼Œä½¿è¿ç»´äººå‘˜èƒ½å¤Ÿä¸“æ³¨äºé«˜é™„åŠ å€¼çš„ä»»åŠ¡ï¼Œèƒ½å¤Ÿæå‡ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€‚</p><p>å¯ä»¥ä»ä»¥ä¸‹è§’åº¦æå‡å¯è¿ç»´æ€§ï¼š</p><ul><li>æä¾›ç³»ç»Ÿè¿è¡Œæ—¶ç›‘æ§å·¥å…·ï¼Œæ–¹ä¾¿ç›‘æ§ï¼›</li><li>è‡ªåŠ¨åŒ–å·¥å…·ï¼›</li><li>é¿å…ç»‘å®šç‰¹å®šçš„æœºå™¨ï¼›</li><li>æä¾›è‰¯å¥½çš„æ–‡æ¡£ï¼›</li><li>æä¾›è‰¯å¥½çš„é»˜è®¤é…ç½®ï¼›</li><li>å°è¯•è‡ªæˆ‘ä¿®å¤ç­‰ã€‚</li></ul><h4 id="ç®€å•æ€§"><a href="#ç®€å•æ€§" class="headerlink" title="ç®€å•æ€§"></a>ç®€å•æ€§</h4><p>ç®€å•æ€§æ˜¯å¤æ‚æ€§çš„åé¢ã€‚è€Œå¤æ‚æ€§æœ‰å„ç§å„æ ·çš„è¡¨ç°æ–¹å¼ï¼Œæ¯”å¦‚æ¨¡å—ç´§è€¦åˆï¼ŒçŠ¶æ€ç©ºé—´è†¨èƒ€ï¼Œä¾èµ–å…³ç³»å¤æ‚ï¼Œå‘½åæ–¹æ³•æ··ä¹±ï¼Œå„ç§æ€§èƒ½trickç­‰ã€‚</p><p>æ¶ˆé™¤å¤æ‚æ€§çš„æœ€å¥½æ‰‹æ®µä¹‹ä¸€æ˜¯æŠ½è±¡ï¼Œé€šè¿‡æŠ½è±¡æ©ç›–å¤§é‡å®ç°ç»†èŠ‚ï¼Œæä¾›å¹²å‡€çš„æ¥å£ã€‚</p><h4 id="å¯æ¼”åŒ–æ€§"><a href="#å¯æ¼”åŒ–æ€§" class="headerlink" title="å¯æ¼”åŒ–æ€§"></a>å¯æ¼”åŒ–æ€§</h4><p>æå‡å¯æ¼”åŒ–æ€§æ˜¯ä»¤ç³»ç»Ÿæ˜“äºæ”¹å˜çš„å¦ä¸€ç§è¯´æ³•ã€‚ç›®æ ‡æ˜¯å¯ä»¥è½»æ¾åœ°ä¿®æ”¹æ•°æ®ç³»ç»Ÿï¼Œä½¿å…¶é€‚åº”ä¸æ–­å˜åŒ–çš„éœ€æ±‚ã€‚</p><p>åœ¨ç»„ç»‡æµç¨‹æ–¹é¢ï¼Œæ•æ·å¼€å‘æ¨¡å¼ä¸ºé€‚åº”å˜åŒ–æä¾›äº†å¾ˆå¥½çš„å‚è€ƒã€‚å› æ­¤æ•æ·æ€§ä¸å¯æ¼”åŒ–æ€§å¾ˆç±»ä¼¼ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Big Data</tag>
      
      <tag>Distributed System</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€è®ºæ–‡é˜…è¯»ç¬”è®°ã€‘MapReduce: Simplified Data Processing on Large Clusters</title>
    <link href="/2021/05/04/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91MapReduce-Simplified-Data-Processing-on-Large-Clusters/"/>
    <url>/2021/05/04/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91MapReduce-Simplified-Data-Processing-on-Large-Clusters/</url>
    
    <content type="html"><![CDATA[<p>ç½‘ç»œä¸Šæå†™MapReduceçš„æ–‡ç« ä¸å¯èƒœè®¡ï¼Œå”¯å€œå‚¥éå¸¸ä¹‹æ–‡ç« ç•™å­˜ã€‚</p><!--more---><h2 id="ä¸€ã€MapReduceçš„æ¦‚å¿µæ¦‚æ‹¬"><a href="#ä¸€ã€MapReduceçš„æ¦‚å¿µæ¦‚æ‹¬" class="headerlink" title="ä¸€ã€MapReduceçš„æ¦‚å¿µæ¦‚æ‹¬"></a>ä¸€ã€MapReduceçš„æ¦‚å¿µæ¦‚æ‹¬</h2><p>MapReduceæ˜¯Googleæå‡ºçš„ä¸€ä¸ªè½¯ä»¶æ¶æ„ï¼Œç”¨äºå¤§è§„æ¨¡æ•°æ®é›†çš„å¹¶è¡Œè¿ç®—ã€‚</p><p>MapReduceæ˜¯ä¸€ä¸ªç¼–ç¨‹èŒƒå¼ï¼Œæ—¨åœ¨ä½¿ç”¨<code>map</code>æŠŠå¤§è§„æ¨¡çš„é—®é¢˜åˆ†è§£æˆå­é—®é¢˜ï¼Œç„¶ååˆ©ç”¨<code>reduce</code>æŠŠå­é—®é¢˜çš„è§£æ±‡æ€»ã€‚è¿™ç§ç¼–ç¨‹èŒƒå¼ç‰¹åˆ«é€‚åˆåº”ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿã€‚</p><p>è¦ç†è§£<code>map</code>å’Œ<code>reduce</code>çš„æ“ä½œï¼Œæœ€é‡è¦æ˜¯è¦ç†è§£ä¸‹å¼ï¼š</p><p><img src="/2021/05/04/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91MapReduce-Simplified-Data-Processing-on-Large-Clusters/mapå’Œreduce.png" alt></p><p>k1å’Œv1æ˜¯åŸå§‹çš„è¾“å…¥keyå’Œvalueï¼›<br>list(k2, v2)æ˜¯<code>map</code>æŠŠk1å’Œv1åˆ†å¸ƒå¼è®¡ç®—åçš„ä¸­é—´ç»“æœé›†åˆï¼›<br>reduce(k2, list(v2))æ˜¯<code>reduce</code>å‡½æ•°æ ¹æ®k2çš„å€¼æ¥åˆå¹¶v2ï¼›<br>æœ€ç»ˆæˆ‘ä»¬æƒ³è¦å¾—åˆ°çš„ç»“æœæ˜¯list(v2)ã€‚</p><h2 id="äºŒã€MapReduceçš„åº”ç”¨åœºæ™¯ï¼š"><a href="#äºŒã€MapReduceçš„åº”ç”¨åœºæ™¯ï¼š" class="headerlink" title="äºŒã€MapReduceçš„åº”ç”¨åœºæ™¯ï¼š"></a>äºŒã€MapReduceçš„åº”ç”¨åœºæ™¯ï¼š</h2><ol><li>WordCountâ€”â€”åˆ†å¸ƒå¼ç³»ç»Ÿçš„â€œHello Worldâ€</li></ol><p><code>map</code>å‡½æ•°è¾“å‡ºæ–‡æ¡£ä¸­çš„æ¯ä¸ªè¯ä»¥åŠå®ƒçš„é¢‘ç‡(word, 1)ï¼Œ<code>reduce</code>å‡½æ•°è´Ÿè´£æŠŠæ‰€æœ‰åŒæ ·è¯çš„é¢‘ç‡ç´¯åŠ èµ·æ¥ã€‚å¾—åˆ°æ¯ä¸ªè¯å‡ºç°çš„é¢‘ç‡ã€‚è¿™ä¸€ä¸ªåº”ç”¨å®ç°è¯·çœ‹è¿™é‡ŒTODOã€‚</p><ol><li>åˆ†å¸ƒå¼å­—ç¬¦ä¸²åŒ¹é… grep</li></ol><p><code>map</code>å‡½æ•°è¾“å‡ºåŒ¹é…æŸä¸ªæ¨¡å¼çš„ä¸€è¡Œï¼Œ<code>reduce</code>åˆ™ä»€ä¹ˆè®¡ç®—ä¹Ÿä¸åšï¼Œåªè´Ÿè´£å°†é‚£ä¸€è¡Œè¾“å‡ºã€‚å¾—åˆ°åŒ¹é…çš„æ–‡æœ¬è¡Œã€‚</p><ol><li>è®¡ç®— URL çš„è®¿é—®é¢‘ç‡</li></ol><p><code>map</code>å‡½æ•°è®°å½•requestsï¼Œè¾“å‡º(url, 1)ï¼Œ<code>reduce</code>å‡½æ•°å°†ç›¸åŒurlçš„è®¿é—®åŠ èµ·æ¥ï¼Œäº§ç”Ÿ(url, sum_of_count)ã€‚</p><ol><li>å€’è½¬ç½‘ç»œé“¾æ¥å…³ç³»</li></ol><p>æœç´¢å¼•æ“æ’åºç®—æ³• pagerank éœ€è¦ä½¿ç”¨çˆ¬è™«çˆ¬å–æ‰€æœ‰é¡µé¢ source åŠé¡µé¢å†…éƒ¨çš„é“¾æ¥ target ã€‚æ¯ä¸ª source å†…éƒ¨å¯èƒ½å­˜åœ¨å¤šä¸ª targetã€‚é‡åˆ°é—¨æˆ·ç½‘ç«™ï¼Œä¸€ä¸ª source æœ‰ä¸Šåƒä¸ª target éƒ½ä¸å¥‡æ€ªã€‚</p><p>é‚£ä¹ˆæœç´¢å¼•æ“æ˜¯å¦‚ä½•å†³å®šå“ªä¸ª target æ¯”è¾ƒé‡è¦çš„å‘¢ï¼Ÿ</p><p>pagerankç®—æ³•è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå‡è®¾å¦‚æœä¸€ä¸ªç½‘é¡µè¢«å¾ˆå¤šå…¶ä»–ç½‘é¡µæ‰€é“¾æ¥ï¼Œè¯´æ˜å®ƒå—åˆ°æ™®éçš„å…³æ³¨å’Œä¿¡èµ–ï¼Œé‚£ä¹ˆå®ƒçš„æ’åå°±é«˜ã€‚åŒæ—¶ï¼Œæ¯ä¸ªç½‘é¡µçš„æƒé‡ä¸åŒï¼Œé‚£äº›æƒé‡è¾ƒå¤§çš„ç½‘é¡µæ‹¥æœ‰çš„é“¾æ¥æ›´å¯é ï¼Œè¿™äº›é“¾æ¥çš„æ’åå¾€å¾€æ›´é å‰ã€‚</p><p>è¿™å°±éœ€è¦ç½‘ç»œçˆ¬è™«ç»Ÿè®¡æ¯ä¸ªé“¾æ¥ target è¢«å“ªäº› source å¼•ç”¨è¿‡è¿™ç§ä¿¡æ¯äº†ã€‚ä½†æ˜¯ä¹‹å‰æˆ‘ä»¬è·å¾—çš„æ˜¯ (source, target)æ•°æ®å¯¹ï¼Œå¦‚ä½•æŠŠè¿™ä¸€éƒ¨åˆ†æ•°æ®è½¬æ¢æˆ(target, list(source))å‘¢ï¼Ÿè¿™å°±è½®åˆ°MapReduceå‡ºåœºäº†ã€‚</p><p><code>map</code>è´Ÿè´£è¾“å‡º (source, target) å¯¹ï¼Œ<code>reduce</code> è´Ÿè´£å°†ç›¸åŒçš„ target å½’å¹¶ï¼Œç”Ÿæˆ (target, list(source))ã€‚</p><ol><li>ç¡®å®šæ¯ä¸ªHostçš„æ£€ç´¢è¯å‘é‡ï¼ˆTerm-Vectorï¼‰ <span id="1"></span></li></ol><p>æ£€ç´¢è¯å‘é‡æ˜¯ä¸€ç³»åˆ—ï¼ˆå•è¯ï¼Œè¯é¢‘ï¼‰å¯¹ï¼Œè¿™äº›æ•°æ®å¯¹èƒ½å¤Ÿæ€»ç»“ä¸€ç¯‡æ–‡æ¡£æˆ–è€…ä¸€ç³»åˆ—æ–‡ç« çš„æœ€é‡è¦å•è¯ï¼ˆå‡è®¾è¯é¢‘è¶Šé«˜è¶Šé‡è¦ï¼‰ã€‚</p><p>ä¸€ä¸ªHostå¯èƒ½æœ‰éå¸¸å¤šæ–‡æ¡£ï¼Œå¦‚ä½•ç¡®å®šä¸€ä¸ªHostçš„æ£€ç´¢è¯å‘é‡ï¼Ÿ</p><p><code>map</code>è´Ÿè´£è¾“å‡ºæ¯ä¸ªè¾“å…¥æ–‡æ¡£çš„(host, term-vector)ï¼Œ<code>reduce</code>è´Ÿè´£æ±‡æ€»ç»™å®šhostçš„æ‰€æœ‰term-vectorï¼Œä¸¢å¼ƒæ‰€æœ‰ä½é¢‘è¯ï¼Œè¾“å‡ºæœ€ç»ˆå”¯ä¸€çš„(host, term-vector)ã€‚</p><ol><li>å€’æ’ç´¢å¼•</li></ol><p>ä»€ä¹ˆæ˜¯æ­£æ’ç´¢å¼•ï¼Ÿ(document, {keys})è¿™ç§ç´¢å¼•å½¢å¼ï¼Œä»æ–‡æ¡£å‡ºå‘ï¼Œæ£€ç´¢å…³é”®è¯ã€‚</p><p>ä¸è¿‡æ­£æ’ç´¢å¼•åœ¨æœç´¢å¼•æ“ä¸­æ˜¾ç„¶æ²¡ä»€ä¹ˆä½œç”¨ï¼Œå› ä¸ºæˆ‘ä»¬çš„åº”ç”¨åœºæ™¯æ˜¯æ ¹æ®å…³é”®è¯æ£€ç´¢åˆ°å¯¹åº”çš„æ‰€æœ‰æ–‡æ¡£ã€‚å› æ­¤æˆ‘ä»¬æ›´éœ€è¦(key, {documents})è¿™ç§ç´¢å¼•å½¢å¼ã€‚</p><p>å€’æ’ç´¢å¼•å°±æ˜¯å…³é”®è¯åˆ°æ–‡æ¡£çš„æ˜ å°„ã€‚æ¯ä¸ªå…³é”®è¯éƒ½å¯¹åº”ç€ä¸€ç³»åˆ—çš„æ–‡æ¡£ã€‚</p><p><code>map</code>åˆ†ææ¯ä¸ªæ–‡æ¡£ï¼Œä¸ºæ¯ä¸ªwordç”Ÿæˆ(word, document)çš„æ˜ å°„ï¼Œ<code>reduce</code>æ±‡æ€»æ‰€æœ‰ç›¸åŒwordçš„æ•°æ®å¯¹ï¼Œè¾“å‡º(word, {documents})ï¼ˆå¯èƒ½è¿˜ä¼šæ’åºï¼‰ã€‚</p><h2 id="ä¸‰ã€MapReduceçš„å®ç°"><a href="#ä¸‰ã€MapReduceçš„å®ç°" class="headerlink" title="ä¸‰ã€MapReduceçš„å®ç°"></a>ä¸‰ã€MapReduceçš„å®ç°</h2><p>æ—¢ç„¶MapReduceè¿™ä¹ˆå¥½ï¼Œé‚£ä¹ˆç©¶ç«Ÿè¯¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿ</p><p>æ ¹æ®ä¸åŒçš„é›†ç¾¤ä»¥åŠèŠ‚ç‚¹æ€§èƒ½ï¼ŒMapReduceæœ‰å¤šç§ä¸åŒçš„å®ç°æ–¹å¼ã€‚ </p><p>å‡è®¾å­˜åœ¨ä»¥ä¸‹åº”ç”¨åœºæ™¯ï¼šæ™®é€šé…ç½®çš„PCçº¦1000å°ï¼Œæœºå™¨ä¹‹é—´ä½¿ç”¨äº¤æ¢æœºè¿æ¥ï¼Œç½‘é€Ÿä¸ºç™¾å…†ï¼Œå­˜å‚¨ä»‹è´¨ä¸ºå»‰ä»·çš„IDEç¡¬ç›˜ã€‚ç”¨æˆ·å¸Œæœ›èƒ½å¤Ÿé€šè¿‡å‘è°ƒåº¦ç³»ç»Ÿæäº¤jobï¼Œè‡ªåŠ¨å°†jobå¯¹åº”çš„ä¸€ç³»åˆ—tasksåˆ†å‘åˆ°é›†ç¾¤çš„å„ä¸ªèŠ‚ç‚¹ä¸Šã€‚</p><h3 id="3-1-MapReduceæ‰§è¡Œæµç¨‹æ¦‚æ‹¬"><a href="#3-1-MapReduceæ‰§è¡Œæµç¨‹æ¦‚æ‹¬" class="headerlink" title="3.1 MapReduceæ‰§è¡Œæµç¨‹æ¦‚æ‹¬"></a>3.1 MapReduceæ‰§è¡Œæµç¨‹æ¦‚æ‹¬</h3><p>æœ¬èŠ‚æˆ‘ä¼šç»¼åˆè®ºæ–‡åŸæ–‡çš„ MapReduce ä¸ Hadoop MapReduce çš„å…·ä½“å®ç°ï¼Œç»™å‡ºäºŒè€…çš„æ‰§è¡Œæ­¥éª¤ã€‚</p><h4 id="3-1-1-è®ºæ–‡ä¸­çš„-MapReduce-æ‰§è¡Œæµç¨‹"><a href="#3-1-1-è®ºæ–‡ä¸­çš„-MapReduce-æ‰§è¡Œæµç¨‹" class="headerlink" title="3.1.1 è®ºæ–‡ä¸­çš„ MapReduce æ‰§è¡Œæµç¨‹"></a>3.1.1 è®ºæ–‡ä¸­çš„ MapReduce æ‰§è¡Œæµç¨‹</h4><ol><li><p>åœ¨mapé˜¶æ®µï¼ŒMapReduceä¼šå¯¹è¦å¤„ç†çš„æ•°æ®è¿›è¡Œåˆ†ç‰‡ï¼ˆsplitï¼‰æ“ä½œï¼Œä¸ºæ¯ä¸€ä¸ªåˆ†ç‰‡åˆ†é…ä¸€ä¸ªMapTaskä»»åŠ¡ã€‚å°†è¾“å…¥åˆ†æˆMéƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†çš„å¤§å°ä¸€èˆ¬åœ¨16M~64Mä¹‹é—´ï¼ˆç”¨æˆ·æ¥å®šä¹‰ï¼‰ã€‚è¾“å‡ºä¹Ÿåˆ†ä¸ºRéƒ¨åˆ†ï¼ˆï¼Ÿï¼‰ã€‚ç„¶ååœ¨å„ä¸ªæœºå™¨ä¸Šforkç¨‹åºå‰¯æœ¬ã€‚</p></li><li><p>é€‰å®šé›†ç¾¤ä¸­çš„ä¸€ä¸ªæœºå™¨ä¸ºmasterèŠ‚ç‚¹ï¼Œè´Ÿè´£åˆ†å‘ä»»åŠ¡ï¼›å…¶ä»–èŠ‚ç‚¹æ˜¯workerï¼Œè´Ÿè´£è®¡ç®—å’Œå‘masteræäº¤ä»»åŠ¡ç»“æœã€‚</p></li><li><p>ä¹‹å‰æŒ‡å®šäº†Mä¸ªmapä»»åŠ¡å’ŒRä¸ªreduceä»»åŠ¡ï¼ŒmasterèŠ‚ç‚¹ç»™æ¯ä¸ªç©ºé—²çš„workeråˆ†é…ä¸€ä¸ªmapä»»åŠ¡æˆ–è€…ä¸€ä¸ªreduceä»»åŠ¡ã€‚</p></li><li><p>è¢«åˆ†é…mapä»»åŠ¡çš„workerä¼šè¯»å–å¯¹åº”çš„è¾“å…¥ç‰‡æ®µï¼Œè¾“å…¥ç”¨æˆ·å®šä¹‰çš„mapå‡½æ•°ï¼Œè¾“å‡ºä¸­é—´ç»“æœï¼Œå°†è¿™äº›ä¸­é—´ç»“æœç¼“å­˜åœ¨å†…å­˜ä¸­ã€‚è¿™äº›ä¸­é—´ç»“æœä¼šå®šæœŸåœ°ä¿å­˜åœ¨æœ¬åœ°æ­¤ç‰ˆä¸­ã€‚ç”±partitionå‡½æ•°å°†å…¶åˆ†æˆRéƒ¨åˆ†ã€‚workerè´Ÿè´£å°†è¿™äº›ç¼“å­˜æ•°æ®å¯¹åœ¨ç£ç›˜ä¸­çš„ä½ç½®ä¸Šä¼ ç»™masterã€‚</p></li><li><p>masterè´Ÿè´£æ”¶é›†map workerå‘é€å›æ¥çš„æ•°æ®å¯¹ä½ç½®ï¼Œç„¶åæŠŠè¿™äº›ä½ç½®å‘é€ç»™ reduce workerã€‚å½“ä¸€ä¸ªreduce workeræŠŠè¿™äº›ä¸­é—´ç»“æœè¯»å–å®Œæ¯•åï¼Œå®ƒä¼šé¦–å…ˆå¯¹è¿™äº›ä¸­é—´ç»“æœæ’åºï¼Œè¿™æ ·åŒæ ·keyçš„ä¸­é—´ç»“æœå°±ä¼šç›¸é‚»äº†ã€‚</p></li></ol><p>keyå¾ˆå¤šç§ç±»çš„æƒ…å†µä¸‹ï¼Œæ’åºæ˜¯æœ‰å¿…è¦çš„å—ï¼Ÿå®è·µè¡¨æ˜ï¼Œæ’åºæ˜¯æœ‰å¿…è¦çš„ï¼Œå› ä¸ºæ•°æ®åˆ†ç‰‡åï¼Œå¾€å¾€åŒä¸€keyçš„æ•°æ®åœ¨åŒä¸€ç‰‡Mä¸­ã€‚è¿™ä½“ç°äº†æ•°æ®åœ¨ç©ºé—´ä¸Šçš„å±€éƒ¨æ€§ã€‚</p><p>ä½†æ˜¯å¦‚æœæ•°æ®é‡è¿‡å¤§ï¼Œä¸­é—´ç»“æœè¿‡å¤šï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å¤–éƒ¨æ’åºã€‚</p><ol><li><p>reduce workerè¿­ä»£æ‰€æœ‰ä¸­é—´ç»“æœï¼Œç”±äºè¿™äº›ä¸­é—´ä¿¡æ¯æŒ‰ç…§keyæ’åºè¿‡äº†ï¼Œå› æ­¤å¾ˆå®¹æ˜“è·å¾—åŒæ ·keyçš„æ‰€æœ‰é”®å€¼å¯¹é›†åˆ(key, {values})ã€‚å°†è¿™ä¸€éƒ¨åˆ†æ•´åˆkeyåçš„ä¿¡æ¯ä¼ é€’ç»™Reduceå‡½æ•°ã€‚Reduceå‡½æ•°çš„è¾“å‡ºè¢«è¿½åŠ åˆ°æ‰€å±åˆ†åŒºRçš„è¾“å‡ºæ–‡ä»¶ä¸­ã€‚</p></li><li><p>å½“æ‰€æœ‰Mapå’ŒReduceä»»åŠ¡éƒ½å®Œæˆåï¼Œmasterå”¤é†’ç”¨æˆ·ç¨‹åºï¼Œç”¨æˆ·ç¨‹åºè¿”å›è°ƒç”¨ç»“æœã€‚</p></li></ol><p>ä¸‹å›¾æ˜¯MapReduceè®ºæ–‡ä¸­çš„æµç¨‹æ¦‚æ‹¬å›¾ã€‚</p><p><img src="/2021/05/04/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91MapReduce-Simplified-Data-Processing-on-Large-Clusters/æµç¨‹æ¦‚æ‹¬.png" alt></p><h4 id="3-1-2-Hadoop-MapReduce-æ‰§è¡Œæµç¨‹"><a href="#3-1-2-Hadoop-MapReduce-æ‰§è¡Œæµç¨‹" class="headerlink" title="3.1.2 Hadoop MapReduce æ‰§è¡Œæµç¨‹"></a>3.1.2 Hadoop MapReduce æ‰§è¡Œæµç¨‹</h4><p><img src="/2021/05/04/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91MapReduce-Simplified-Data-Processing-on-Large-Clusters/MRæµç¨‹.png" alt></p><ol><li><strong>Mapé˜¶æ®µæ‰§è¡Œè¿‡ç¨‹</strong></li></ol><p>å¯¹åº”æµç¨‹å›¾çš„å·¦åŠéƒ¨åˆ†ã€‚</p><ul><li>1) æŠŠè¾“å…¥ç›®å½•ä¸‹æ–‡ä»¶æŒ‰ç…§ä¸€å®šæ ‡å‡†é€ä¸ªè¿›è¡Œ<strong>é€»è¾‘åˆ‡ç‰‡</strong>ï¼Œå½¢æˆåˆ‡ç‰‡è§„åˆ’</li></ul><p>é»˜è®¤åˆ‡ç‰‡å¤§å°å’Œå—å¤§å°æ˜¯ç›¸åŒçš„ï¼Œæ¯ä¸ªåˆ‡ç‰‡ç”±ä¸€ä¸ªMapTaskæ¥å¤„ç†ã€‚</p><ul><li>2) å¯¹åˆ‡ç‰‡ä¸­çš„æ•°æ®æŒ‰ç…§ä¸€å®šè§„åˆ™è§£æå¹¶è¿”å›(key,value)å¯¹</li></ul><p>å¦‚æœæ˜¯æ–‡æœ¬æ•°æ®ï¼Œåˆ™è°ƒç”¨TextInputFormatç±»ã€‚é»˜è®¤æŒ‰è¡Œè¯»å–æ•°æ®ï¼Œkeyæ˜¯æ¯ä¸€è¡Œçš„èµ·å§‹åç§»é‡ï¼Œvalueæ˜¯æœ¬è¡Œçš„æ–‡æœ¬å†…å®¹ã€‚</p><p>keyå¯¹åº”çš„åç§»é‡æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿæ‰“å¼€notepad++ï¼Œåº•æ çš„Poså°±æ˜¯å½“å‰å…‰æ ‡æ‰€å¯¹åº”å­—ç¬¦çš„åç§»é‡ã€‚</p><p><img src="/2021/05/04/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91MapReduce-Simplified-Data-Processing-on-Large-Clusters/åç§»é‡.png" alt></p><ul><li>3) è°ƒç”¨Mapperç±»ä¸­çš„mapæ–¹æ³•å¤„ç†æ•°æ®ã€‚</li></ul><p>æ¯è¯»å–è§£æå‡ºæ¥çš„ä¸€ä¸ª(key,value)ï¼Œè°ƒç”¨ä¸€æ¬¡mapæ–¹æ³•ã€‚mapæ–¹æ³•æ˜¯ç”¨æˆ·è‡ªå·±å®šä¹‰çš„ä¸šåŠ¡é€»è¾‘ã€‚</p><ul><li><p>4) æŒ‰ç…§ä¸€å®šçš„è§„åˆ™å¯¹Mapè¾“å‡ºçš„é”®å€¼å¯¹è¿›è¡Œåˆ†åŒº(partition)ã€‚åˆ†åŒºçš„æ•°é‡å°±æ˜¯reduce taskçš„æ•°é‡ã€‚</p></li><li><p>5) Mapè¾“å‡ºæ•°æ®å†™å…¥å†…å­˜ç¼“å†²åŒºï¼Œè¾¾åˆ°ä¸€å®šæ¯”ä¾‹åæº¢å‡º(spill)åˆ°ç£ç›˜ä¸Šã€‚æº¢å‡ºçš„æ—¶å€™æ ¹æ®keyæ’åº(sort)ã€‚</p></li><li><p>6) å¯¹æ‰€æœ‰æº¢å‡ºçš„æ–‡ä»¶è¿›è¡Œåˆå¹¶(merge)ï¼Œå½¢æˆä¸€ä¸ªæ–‡ä»¶ã€‚</p></li></ul><p>è‡³æ­¤ï¼ŒMapé˜¶æ®µç»“æŸã€‚map workerå¹¶ä¸ä¼šå°†è‡ªå·±çš„ç»“æœå‘é€ç»™reduceï¼Œè€Œæ˜¯ä¼šé™é™åœ°ç­‰å¾…reduce workeræ¥ä¸»åŠ¨æ‹‰å–æ•°æ®ã€‚</p><ol><li><strong>Reduceé˜¶æ®µæ‰§è¡Œè¿‡ç¨‹</strong></li></ol><p>å¯¹åº”æµç¨‹å›¾çš„å³åŠéƒ¨åˆ†ã€‚</p><ul><li><p>1) Reduce taskä¼šä¸»åŠ¨ä»MapTaskå¤åˆ¶æ‹‰å–å…¶è¾“å‡ºçš„é”®å€¼å¯¹ï¼›</p></li><li><p>2) æŠŠå¤åˆ¶åˆ°Reduce workerçš„æœ¬åœ°æ•°æ®å…¨éƒ¨åˆå¹¶(merge)ï¼Œå†å¯¹åˆå¹¶çš„æ•°æ®æ’åºã€‚</p></li><li><p>3) å¯¹æ’åºåçš„é”®å€¼å¯¹è°ƒç”¨Reduceæ–¹æ³•ã€‚</p></li></ul><p>é”®ç›¸ç­‰çš„é”®å€¼å¯¹è°ƒç”¨ä¸€æ¬¡reduceæ–¹æ³•ã€‚</p><p>æœ€åæŠŠè¿™äº›è¾“å‡ºçš„é”®å€¼å¯¹å†™å…¥åˆ°HDFSæ–‡ä»¶ä¸­ã€‚</p><h3 id="3-2-MasterèŠ‚ç‚¹çš„æ•°æ®ç»“æ„"><a href="#3-2-MasterèŠ‚ç‚¹çš„æ•°æ®ç»“æ„" class="headerlink" title="3.2 MasterèŠ‚ç‚¹çš„æ•°æ®ç»“æ„"></a>3.2 MasterèŠ‚ç‚¹çš„æ•°æ®ç»“æ„</h3><p>MasterèŠ‚ç‚¹ä¼šä¿å­˜æ¯ä¸ªmapä»»åŠ¡å’Œreduceä»»åŠ¡çš„æ‰§è¡ŒçŠ¶æ€ï¼ˆç©ºé—² idleã€æ­£åœ¨æ‰§è¡Œ in-progressï¼Œæ‰§è¡Œå®Œæ¯• completedï¼‰ï¼Œè¿˜ä¼šç»™è¢«åˆ†é…ä»»åŠ¡äº†çš„workerä¿å­˜ä¸€ä¸ªæ ‡æ³¨ã€‚</p><p>Masterè¿˜ä¼šåƒä¸€ä¸ªç®¡é“ä¸€æ ·å‚¨å­˜mapä»»åŠ¡å®Œæˆåçš„ä¸­é—´ä¿¡æ¯å­˜å‚¨ä½ç½®ï¼Œå¹¶æŠŠè¿™äº›ä½ç½®ä¿¡æ¯ä¼ è¾“ç»™reduce workerã€‚</p><h3 id="3-3-å®¹é”™æœºåˆ¶"><a href="#3-3-å®¹é”™æœºåˆ¶" class="headerlink" title="3.3 å®¹é”™æœºåˆ¶"></a>3.3 å®¹é”™æœºåˆ¶</h3><h4 id="worker-failure"><a href="#worker-failure" class="headerlink" title="worker failure"></a>worker failure</h4><p>masterä¼šå‘¨æœŸæ€§åœ°pingæ¯ä¸ªworkerï¼Œè§„å®šæ—¶é—´å†…æ²¡æœ‰è¿”å›ä¿¡æ¯ï¼Œåˆ™masterå°†å…¶æ ‡è®°ä¸ºfailã€‚masterå°†æ‰€æœ‰ç”±è¿™ä¸ªå¤±æ•ˆçš„workeråšå®Œçš„ï¼ˆcompletedï¼‰ã€æ­£åœ¨åšçš„ï¼ˆin-progressï¼‰<code>map</code>ä»»åŠ¡æ ‡è®°ä¸ºåˆå§‹çŠ¶æ€ï¼ˆidleï¼‰ï¼Œç­‰å¾…å…¶ä»–workerè®¤é¢†ä»»åŠ¡ã€‚</p><p>workeræ•…éšœæ—¶ï¼Œå¯¹äºmapä»»åŠ¡ç»“æœå’Œreduceä»»åŠ¡ç»“æœçš„å¤„ç†æ–¹æ³•æœ‰æ‰€ä¸åŒã€‚mapä»»åŠ¡çš„ç»“æœç”±äºéœ€è¦é€šçŸ¥masterå­˜å‚¨ä½ç½®ï¼Œä¸­é€”ä¸­æ–­ä¼šå¯¼è‡´å­˜å‚¨ä½ç½®ä¸¢å¤±ï¼Œå› æ­¤å¤±è´¥çš„mapä»»åŠ¡éœ€è¦é‡æ–°æ‰§è¡Œï¼›reduceä»»åŠ¡çš„ç»“æœå­˜å‚¨ä½ç½®åœ¨å…¨å±€æ–‡ä»¶ç³»ç»Ÿä¸Šï¼Œå› æ­¤ä¸éœ€è¦å†æ¬¡æ‰§è¡Œã€‚</p><p>å½“worker Bæ¥æ‰‹äº†å¤±è´¥çš„worker Açš„taskï¼Œæ‰€æœ‰reduce workeréƒ½ä¼šçŸ¥æ™“ã€‚å› æ­¤æ‰€æœ‰è¿˜æ²¡æœ‰ä»worker Aå“ªé‡Œè·å¾—æ•°æ®çš„reduce workerä¼šè‡ªåŠ¨å‘worker Bè·å–æ•°æ®ã€‚</p><h4 id="master-failure"><a href="#master-failure" class="headerlink" title="master failure"></a>master failure</h4><p>é¦–å…ˆè¦æœ‰æ£€æŸ¥ç‚¹ï¼ˆcheckpointï¼‰æœºåˆ¶ï¼Œå‘¨æœŸæ€§åœ°å°†masterèŠ‚ç‚¹å­˜å‚¨çš„æ•°æ®ä¿å­˜è‡³ç£ç›˜ã€‚</p><p>ä½†æ˜¯ç”±äºåªæœ‰ä¸€ä¸ªmasterè¿›ç¨‹ï¼Œå› æ­¤masterå¤±æ•ˆåMapReduceè¿ç®—ä¼šä¸­æ­¢ã€‚ç”±ç”¨æˆ·äº²è‡ªæ£€æŸ¥ï¼Œæ ¹æ®éœ€è¦é‡æ–°æ‰§è¡ŒMapReduceã€‚</p><h4 id="Semantics-in-the-Presence-of-Failures"><a href="#Semantics-in-the-Presence-of-Failures" class="headerlink" title="Semantics in the Presence of Failures"></a>Semantics in the Presence of Failures</h4><p>Semanticsï¼Œè¯­ä¹‰ã€‚è¿™ä¸ªè¯ä¸å¤ªå¥½ç†è§£ï¼Œæ€»ä¹‹æœ¬èŠ‚è®¨è®ºFailureçš„å‡ºç°å¯¹ç¨‹åºè¯­ä¹‰çš„å½±å“ã€‚</p><p>ä¸ªäººç†è§£ï¼Œå¯¹äºä¸€ä¸ªç¡®å®šæ€§çš„ç¨‹åºè€Œè¨€ï¼Œç¨‹åºçš„å¯“æ„å°±æ˜¯ç¨‹åºçš„æ‰§è¡Œé¡ºåºï¼›ä½†æ˜¯å¯¹äºéç¡®å®šæ€§ç¨‹åºè€Œè¨€ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œå¤šæ¬¡å¯èƒ½å¾—åˆ°ä¸åŒç»“æœçš„ç¨‹åºè€Œè¨€ï¼Œè¯­ä¹‰æ˜¯å¦èƒ½ä¿è¯ï¼Œç›´æ¥ä¸æœ€åç»“æœæ˜¯å¦æ­£ç¡®ç›¸å…³ã€‚</p><p>MapReduceä¿è¯ï¼Œå½“Mapå’ŒReduceçš„æ“ä½œéƒ½æ˜¯ç¡®å®šæ€§å‡½æ•°ï¼ˆåªè¦ç›¸åŒè¾“å…¥å°±ä¼šå¾—åˆ°ç›¸åŒè¾“å‡ºçš„å‡½æ•°ï¼‰ï¼Œé‚£ä¹ˆMapReduceå¤„ç†å¾—åˆ°çš„ç»“æœä¹Ÿéƒ½æ˜¯ç¡®å®šæ€§çš„ï¼Œä¸è®ºé›†ç¾¤å†…éƒ¨æœ‰æ²¡æœ‰é”™è¯¯ã€æ‰§è¡Œé¡ºåºã€‚</p><p>è¿™ç§å¼ºä¿è¯æ˜¯ç”±Mapå’ŒReduceä¸­çš„commitæ“ä½œçš„åŸå­æ€§æ¥ä¿è¯çš„ã€‚</p><p>æ¯ä¸ª in-progress task éƒ½å°†å…¶è¾“å‡ºå†™è¿›ç§æœ‰ä¸´æ—¶æ–‡ä»¶ä¸­ã€‚æ¯ä¸ªreduceäº§ç”Ÿä¸€ä¸ªç§æœ‰ä¸´æ—¶æ–‡ä»¶ï¼Œæ¯ä¸ªmapäº§ç”ŸRä¸ªç§æœ‰ä¸´æ—¶æ–‡ä»¶ï¼ˆå› ä¸ºå¯¹åº”Rä¸ªreduceä»»åŠ¡ï¼‰ã€‚</p><p>å½“mapä»»åŠ¡å®Œæˆï¼Œmap workerå‘é€ç»™masterçš„æ˜¯é‚£Rä¸ªä¸´æ—¶æ–‡ä»¶çš„åç§°ï¼Œå¹¶æ ‡æ³¨â€œæˆ‘åšå®Œäº†â€ã€‚masteråœ¨æ”¶åˆ°æ¶ˆæ¯åï¼Œå°±å°†è¿™Rä¸ªæ–‡ä»¶åè®°å½•åœ¨è‡ªå·±çš„æ•°æ®ç»“æ„ä¸­ã€‚<strong>å¦‚æœè¿™ä¸ªæ—¶å€™ç”±äºæŸäº›é”™è¯¯</strong>ï¼Œmasteråˆæ”¶åˆ°ä¸€éâ€œæˆ‘åšå®Œäº†â€ï¼Œmasterå°†ä¼šå¿½ç•¥ã€‚</p><p>å½“reduceä»»åŠ¡å®Œæˆï¼Œreduce workeræŠŠä¸´æ—¶æ–‡ä»¶é‡å‘½åä¸ºæœ€ç»ˆçš„è¾“å‡ºæ–‡ä»¶åã€‚é‡å‘½åæ“ä½œæ˜¯åŸå­çš„ï¼Œå³è¦ä¸å°±å…¨éƒ¨é‡å‘½åæˆåŠŸï¼Œè¦ä¸å°±ä¸€ä¸ªéƒ½ä¸ä¼šé‡å‘½åã€‚è¿™é‡Œå­˜åœ¨ä¸€ç§è¯­ä¹‰é£é™©ï¼Œé‚£å°±æ˜¯å¦‚æœåŒä¸€ä¸ªreduce taskåœ¨å¤šå°æœºå™¨ä¸Šæ‰§è¡Œï¼ŒåŒä¸€ä¸ªç»“æœæ–‡ä»¶æœ‰å¯èƒ½è¢«é‡å‘½åå¤šæ¬¡ã€‚ä¸ºä¿è¯æœ€ç»ˆæ–‡ä»¶ç³»ç»ŸåªåŒ…å«ä¸€ä¸ªreduceä»»åŠ¡äº§ç”Ÿçš„æ•°æ®ï¼ŒMapReduceä¾èµ–åº•å±‚æ–‡ä»¶ç³»ç»Ÿæä¾›çš„é‡å‘½åæ“ä½œï¼ˆï¼Ÿï¼‰ã€‚</p><p>å¦ç™½è¯´ï¼Œå…³äºå¼±è¯­ä¹‰å¦‚ä½•ä¿è¯è¿™ä¸€å—å„¿æ²¡çœ‹æ‡‚ï¼Œç­‰ä»Šåå†å›æ¥è¡¥å§ã€‚TODO</p><h3 id="3-4-å­˜å‚¨ä½ç½®"><a href="#3-4-å­˜å‚¨ä½ç½®" class="headerlink" title="3.4 å­˜å‚¨ä½ç½®"></a>3.4 å­˜å‚¨ä½ç½®</h3><p>è¿™ä¸€éƒ¨åˆ†çš„è®¾è®¡è¦å°½å¯èƒ½èŠ‚çº¦å¸¦å®½ï¼Œå› ä¸ºå¸¦å®½æ˜¯ç›¸å½“åŒ®ä¹çš„èµ„æºã€‚</p><p>MapReduceçš„è§£å†³æ–¹æ¡ˆæ˜¯é€šè¿‡GFS (Google File System)å°†æ¯ä¸ªæ–‡ä»¶åˆ†æˆ 64 MBçš„å—ï¼Œç„¶åå°†æ¯å—ä¿å­˜å‡ ä¸ªå‰¯æœ¬ï¼ˆé€šå¸¸ä¸º3ä»½ï¼‰åœ¨ä¸åŒçš„æœºå™¨ä¸Šã€‚MapReduce å°½é‡å°†è¿™äº›ä½ç½®ä¿¡æ¯ä¿å­˜ä¸‹æ¥ç„¶åå°½é‡å°†å«æœ‰æŸä¸ªæ–‡ä»¶ä¸»æœºçš„ä»»åŠ¡åˆ†é…ç»™å®ƒï¼Œè¿™æ ·å°±å¯ä»¥å‡å°‘ç½‘ç»œçš„ä¼ é€’ä½¿ç”¨ã€‚å¦‚æœå¤±è´¥ï¼Œé‚£ä¹ˆå°†ä¼šå°è¯•ä»é è¿‘è¾“å…¥æ•°æ®çš„ä¸€ä¸ªå‰¯æœ¬ä¸»æœºå»å¯åŠ¨è¿™ä¸ªä»»åŠ¡ã€‚å½“åœ¨ä¸€ä¸ªé›†ç¾¤ä¸Šæ‰§è¡Œå¤§å‹çš„ MapReduce æ“ä½œçš„æ—¶å€™ï¼Œè¾“å…¥æ•°æ®ä¸€èˆ¬éƒ½æ˜¯æœ¬åœ°è¯»å–ï¼Œå‡å°‘ç½‘ç»œå¸¦å®½çš„ä½¿ç”¨ã€‚</p><h3 id="3-5-ä»»åŠ¡ç²’åº¦"><a href="#3-5-ä»»åŠ¡ç²’åº¦" class="headerlink" title="3.5 ä»»åŠ¡ç²’åº¦"></a>3.5 ä»»åŠ¡ç²’åº¦</h3><p>ç†æƒ³çŠ¶å†µä¸‹ï¼ŒMå’ŒRåº”å½“ä¸workeræ•°ç›®å¤§å¾ˆå¤šï¼Œè¿™æ ·æ‰èƒ½æé«˜é›†ç¾¤çš„åŠ¨æ€è´Ÿè½½å‡è¡¡èƒ½åŠ›ï¼Œå¹¶ä¸”èƒ½åŠ å¿«æ•…éšœæ¢å¤çš„é€Ÿåº¦ï¼ŒåŸå› æ˜¯å¤±æ•ˆçš„workerä¸Šæ‰§è¡Œçš„mapä»»åŠ¡å¯ä»¥åˆ†å¸ƒåˆ°æ‰€æœ‰å…¶ä»–çš„workeræœºå™¨ä¸Šæ‰§è¡Œã€‚</p><p>ä½†æ˜¯Må’ŒRä¹Ÿæ˜¯æœ‰é™åˆ¶çš„ï¼Œè¿™ä¸€éƒ¨åˆ†é™åˆ¶ä¸»è¦æ˜¯ç”±äºmasteréœ€è¦æ‰§è¡ŒO(M+R)æ¬¡è°ƒåº¦ã€‚</p><p>æˆ‘ä»¬é€šå¸¸ä¼šæŒ‰ç…§è¿™æ ·çš„æ¯”ä¾‹æ‰§è¡Œï¼šM=200,000ï¼ŒR=5,000ï¼Œworkeræœ‰2,000å°ã€‚</p><h3 id="3-6-å¤‡ç”¨ä»»åŠ¡"><a href="#3-6-å¤‡ç”¨ä»»åŠ¡" class="headerlink" title="3.6 å¤‡ç”¨ä»»åŠ¡"></a>3.6 å¤‡ç”¨ä»»åŠ¡</h3><p>é•¿å°¾åˆ†å¸ƒç°è±¡ï¼ˆæˆ–è€…è¯´â€œæ°´æ¡¶æ•ˆåº”â€ï¼‰åœ¨MapReduceä¸­ä¹Ÿæœ‰ä½“ç°ï¼Œå› ä¸ºMapReduceè®¡ç®—æ—¶é—´å¾€å¾€å–å†³äºå…¶è¿è¡Œé€Ÿåº¦æœ€æ…¢çš„workerã€‚</p><p>æœ‰ä¸€ä¸ªåŠæ³•æ¥å‡å°‘â€œstragglerâ€ï¼ˆè½ä¼çš„äººï¼‰ï¼Œmasterä¼šåœ¨ä»»åŠ¡å¿«å®Œæˆæ—¶ï¼Œè°ƒç”¨backupè¿›ç¨‹æ¥è§£å†³é‚£äº› in-progress ä»»åŠ¡ã€‚è¿™æ ·ï¼Œæ— è®ºæ˜¯åŸæ¥çš„è¿›ç¨‹è¿˜æ˜¯ backup è¿›ç¨‹ä¸­çš„å“ªä¸ªå…ˆå®Œæˆï¼Œmasteréƒ½ç«‹å³å°†å…¶æ ‡è®°ä¸ºå®Œæˆã€‚</p><h2 id="å››ã€MapReduceè°ƒä¼˜æŠ€å·§"><a href="#å››ã€MapReduceè°ƒä¼˜æŠ€å·§" class="headerlink" title="å››ã€MapReduceè°ƒä¼˜æŠ€å·§"></a>å››ã€MapReduceè°ƒä¼˜æŠ€å·§</h2><h3 id="4-1-åˆ†åŒºå‡½æ•°"><a href="#4-1-åˆ†åŒºå‡½æ•°" class="headerlink" title="4.1 åˆ†åŒºå‡½æ•°"></a>4.1 åˆ†åŒºå‡½æ•°</h3><p>åˆ†åŒºå‡½æ•°ä¸€èˆ¬æ˜¯Hashï¼Œ<code>Hash(key) % R</code>ï¼Œè¿™æ ·å°±èƒ½æŠŠkeyåˆ†æˆRä»½äº†ã€‚ä½†æ˜¯æœ‰çš„æ—¶å€™æˆ‘ä»¬å¸Œæœ›è‡ªå·±å®šä¹‰Rçš„åˆ†åŒºæ–¹æ³•ï¼Œæ¯”å¦‚åœ¨ç¬¬äºŒç« çš„åº”ç”¨åœºæ™¯<a href="#1">Host Term-Vector</a>ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›ä»¥Hostä¸ºåˆ†Ræ ‡å‡†ï¼Œé‚£ä¹ˆåˆ†åŒºå‡½æ•°å°±å¯ä»¥è¿™ä¹ˆå†™ï¼š<code>hash(Hostname(urlkey)) % R</code>ã€‚ï¼Œè¿™æ ·å…·æœ‰ç›¸åŒçš„ hostname çš„URLå°†ä¼šå‡ºç°åœ¨åŒä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ä¸­ã€‚</p><h3 id="4-2-é¡ºåºä¿è¯"><a href="#4-2-é¡ºåºä¿è¯" class="headerlink" title="4.2 é¡ºåºä¿è¯"></a>4.2 é¡ºåºä¿è¯</h3><p>åœ¨ä¸€ä¸ªåˆ†åŒºRä¸­ï¼ŒMapReduceä¿è¯æ‰€æœ‰ä¸­é—´k/vå¯¹éƒ½æ˜¯æŒ‰keyæ’åºçš„ã€‚</p><h3 id="4-3-Combiner"><a href="#4-3-Combiner" class="headerlink" title="4.3 Combiner"></a>4.3 Combiner</h3><p>æŸäº›ä»»åŠ¡çš„ä¸­é—´ç»“æœåœ¨ä»mapä¼ è¾“åˆ°reduceçš„æ—¶å€™å¯ä»¥å…ˆå¤„ç†ä¸€ä¸‹å†ä¼ ã€‚æ¯”å¦‚word countåº”ç”¨ï¼Œä¸­é—´ç»“æœæ˜¯ä¸€å †(word, 1)æ•°æ®å¯¹ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬åˆ©ç”¨æŸä¸ªcombinerå‡½æ•°ï¼Œå°†æœ¬åœ°çš„ä¸­é—´ç»“æœåˆå¹¶ä¸€ä¸‹ï¼Œæ¯”å¦‚åˆå¹¶ç›¸åŒçš„100ä¸ª(word, 1)ä¸º(word, 100)ï¼Œå°±å¤§é‡é™ä½äº†æ•°æ®ä¼ è¾“å ç”¨çš„å¸¦å®½ã€‚</p><p>Combinerå‡½æ•°ä¼šåœ¨æ¯å°æ‰§è¡ŒMapä»»åŠ¡çš„æœºå™¨ä¸Šæ‰§è¡Œä¸€æ¬¡ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼ŒCombinerå‡½æ•°å’ŒReduceå‡½æ•°çš„å®ç°ä»£ç æ˜¯ä¸€æ ·çš„ã€‚</p><h3 id="4-4-è¾“å…¥å’Œè¾“å‡º"><a href="#4-4-è¾“å…¥å’Œè¾“å‡º" class="headerlink" title="4.4 è¾“å…¥å’Œè¾“å‡º"></a>4.4 è¾“å…¥å’Œè¾“å‡º</h3><p>MapReduceåº“æ”¯æŒä¸åŒçš„æ ¼å¼çš„è¾“å…¥æ•°æ®ã€‚æ¯”å¦‚æ–‡æœ¬æ¨¡å¼ï¼Œkeyæ˜¯è¡Œæ•°ï¼Œvalueæ˜¯è¯¥è¡Œå†…å®¹ã€‚</p><p>ç¨‹åºå‘˜å¯ä»¥å®šä¹‰Readeræ¥å£æ¥é€‚åº”ä¸åŒçš„è¾“å…¥ç±»å‹ã€‚ç¨‹åºå‘˜éœ€è¦ä¿è¯å¿…é¡»èƒ½æŠŠè¾“å…¥æ•°æ®åˆ‡åˆ†æˆæ•°æ®ç‰‡æ®µï¼Œä¸”è¿™äº›è¯å®¿å„’ç‰‡æ®µèƒ½å¤Ÿç”±å•ç‹¬çš„Mapä»»åŠ¡æ¥å¤„ç†å°±è¡Œäº†ã€‚</p><p>Readerçš„æ•°æ®æºå¯èƒ½æ˜¯æ•°æ®åº“ï¼Œå¯èƒ½æ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œç”šè‡³æ˜¯å†…å­˜ç­‰ã€‚è¾“å…¥WriteråŒæ ·å¯ä»¥è‡ªå®šä¹‰ã€‚</p><h3 id="4-5-å‰¯ä½œç”¨"><a href="#4-5-å‰¯ä½œç”¨" class="headerlink" title="4.5 å‰¯ä½œç”¨"></a>4.5 å‰¯ä½œç”¨</h3><p>ç¨‹åºå‘˜åœ¨å†™Mapå’ŒReduceæ“ä½œçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå¤„äºæ–¹ä¾¿ï¼Œå®šä¹‰å¾ˆå¤šé¢å¤–åŠŸèƒ½ï¼Œæ¯”å¦‚ç”Ÿæˆè¾…åŠ©æ–‡ä»¶ç­‰ã€‚ä½†åº”å½“æ—¶åˆ»è®°ä½ï¼ŒMapå’ŒReduceæ“ä½œåº”å½“ä¿è¯åŸå­æ€§å’Œå¹‚ç­‰æ€§ã€‚</p><p>æ¯”å¦‚ï¼Œä¸€ä¸ªtaskç”Ÿæˆäº†å¤šä¸ªè¾“å‡ºæ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰åŸå­åŒ–å¤šæ®µcommitçš„æ“ä½œã€‚è¿™å°±éœ€è¦ç¨‹åºå‘˜è‡ªå·±ä¿è¯ç”Ÿæˆå¤šä¸ªè¾“å‡ºçš„ä»»åŠ¡æ˜¯ç¡®å®šæ€§ä»»åŠ¡ã€‚</p><h3 id="4-6-è·³è¿‡æŸåçš„çºªå½•"><a href="#4-6-è·³è¿‡æŸåçš„çºªå½•" class="headerlink" title="4.6 è·³è¿‡æŸåçš„çºªå½•"></a>4.6 è·³è¿‡æŸåçš„çºªå½•</h3><p>æœ‰æ—¶ç›¸æ¯”äºä¿®å¤ä¸å¯æ‰§è¡Œçš„Bugï¼Œè·³è¿‡è¯¥éƒ¨åˆ†å¼•èµ·Bugçš„Recordæ›´åŠ å¯å–ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›MapReduceæ£€æµ‹åˆ°å¯èƒ½å¼•èµ·å´©æºƒçš„Recordæ—¶ï¼Œè‡ªåŠ¨è·³è¿‡ã€‚</p><p>MapReduceå¦‚ä½•è‡ªåŠ¨æ£€æµ‹è¿™ç§ç°è±¡ï¼Ÿé¦–å…ˆæ¯ä¸ªworkerä¼šé€šè¿‡ä¸€ä¸ªhandleræ¥æ•è·å¼‚å¸¸ï¼Œå¹¶åˆ©ç”¨ä¸€ä¸ªå…¨å±€å˜é‡æ¥ä¿å­˜å¼‚å¸¸åºå·ã€‚workerä¼šåœ¨ä¹‹åå‘é€ç»™masterçš„å·¥ä½œæ±‡æŠ¥ä¸­å†™ä¸Šè¯¥signalåºå·ï¼ˆä»¥UDPå‘é€ï¼‰ã€‚masterçœ‹åˆ°è¯¥UDPåŒ…ä¸­å­˜åœ¨å¤šæ¬¡æ•…éšœï¼Œé‚£ä¹ˆå°†æ¥è¯¥workerå¤±è´¥äº†ï¼Œmasterå°±ä¸ä¼šé‡å¤æ‰§è¡Œè¯¥taskï¼Œè€Œæ˜¯è·³è¿‡è¯¥recordã€‚</p><h3 id="4-7-æœ¬åœ°æ‰§è¡Œ"><a href="#4-7-æœ¬åœ°æ‰§è¡Œ" class="headerlink" title="4.7 æœ¬åœ°æ‰§è¡Œ"></a>4.7 æœ¬åœ°æ‰§è¡Œ</h3><p>å°±æ˜¯è¯´ä¸€ä¸Šæ¥å°±åœ¨æˆåƒä¸Šä¸‡å°æœºå™¨ä¸Šè¿›è¡Œè°ƒè¯•æ˜¯éå¸¸æ£˜æ‰‹çš„ï¼Œå› æ­¤MapReduceå¼€å‘äº†åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šæ¨¡æ‹ŸMapReduceä»»åŠ¡çš„é¡¹ç›®ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚</p><h3 id="4-8-çŠ¶æ€ä¿¡æ¯"><a href="#4-8-çŠ¶æ€ä¿¡æ¯" class="headerlink" title="4.8 çŠ¶æ€ä¿¡æ¯"></a>4.8 çŠ¶æ€ä¿¡æ¯</h3><p>masterå†…éƒ¨æœ‰ä¸€ä¸ªå†…ç½®çš„HTTPæœåŠ¡å™¨ï¼Œå¯ä»¥ç”¨æ¥å±•ç¤ºä¸€ç»„çŠ¶æ€ä¿¡æ¯é¡µé¢ã€‚çŠ¶æ€é¡µé¢ä¼šæ˜¾ç¤ºè®¡ç®—è¿›åº¦ï¼Œä¾‹å¦‚ï¼šå·²ç»å®Œæˆçš„ä»»åŠ¡æ•°é‡ã€æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡æ•°é‡ã€è¾“å…¥çš„å­—èŠ‚æ•°ã€ä¸­é—´æ•°æ®çš„å­—èŠ‚æ•°ã€è¾“å‡ºçš„å­—èŠ‚æ•°ã€å¤„ç†ç‡ç­‰ç­‰ã€‚</p><p>è¿™äº›é¡µé¢ä¹ŸåŒ…å«äº†æŒ‡å‘æ¯ä¸ªä»»åŠ¡çš„æ ‡å‡†å·®ä»¥åŠç”Ÿæˆçš„æ ‡å‡†è¾“å‡ºæ–‡ä»¶çš„é“¾æ¥ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨è¿™äº›æ•°æ®æ¥é¢„æµ‹è®¡ç®—éœ€è¦å¤šä¹…æ‰èƒ½å®Œæˆï¼Œæ˜¯å¦éœ€è¦å¾€è¯¥è®¡ç®—ä¸­å¢åŠ æ›´å¤šèµ„æºã€‚å½“è®¡ç®—æ¶ˆè€—çš„æ—¶é—´æ¯”é¢„æœŸæ—¶é—´æ›´é•¿çš„æ—¶å€™ï¼Œè¿™äº›é¡µé¢ä¹Ÿå¯ä»¥ç”¨æ¥æ‰¾å‡ºä¸ºä»€ä¹ˆæ‰§è¡Œé€Ÿåº¦å¾ˆæ…¢çš„åŸå› ã€‚</p><p>æ­¤å¤–ï¼Œé¡¶å±‚çš„çŠ¶æ€é¡µé¢ä¼šæ˜¾ç¤ºé‚£äº›æ•…éšœçš„workerï¼Œä»¥åŠå®ƒä»¬æ•…éšœæ—¶æ­£åœ¨è¿è¡Œçš„Mapå’ŒReduceä»»åŠ¡ã€‚è¿™äº›ä¿¡æ¯å¯¹äºè°ƒè¯•ç”¨æˆ·ä»£ç ä¸­çš„bugå¾ˆæœ‰å¸®åŠ©ã€‚</p><p>è¿™ä¸€ç‚¹HDFSä¹Ÿæœ‰ç±»ä¼¼å®ç°ï¼Œæ¯”å¦‚HDFS åœ¨å¯åŠ¨å®Œæˆä¹‹åï¼Œè¿˜ä¼šç”±å†…éƒ¨çš„ Web æœåŠ¡æä¾›ä¸€ä¸ªæŸ¥çœ‹é›†ç¾¤çŠ¶æ€çš„ç½‘é¡µï¼š</p><p><a href="http://localhost:50070/">http://localhost:50070/</a></p><p><strong>æä¾›å¯è§†åŒ–ç›‘æ§ç•Œé¢ï¼Œæ˜¯æå‡åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§çš„é‡è¦æ‰‹æ®µ</strong>ã€‚</p><h3 id="4-9-è®¡æ•°å™¨"><a href="#4-9-è®¡æ•°å™¨" class="headerlink" title="4.9 è®¡æ•°å™¨"></a>4.9 è®¡æ•°å™¨</h3><p>MapReduceå†…éƒ¨æä¾›è®¡æ•°å™¨æœºåˆ¶ï¼Œç”¨æ¥ç»Ÿè®¡ä¸åŒæ“ä½œå‘ç”Ÿæ¬¡æ•°ã€‚è¦æƒ³ä½¿ç”¨è®¡æ•°å™¨ï¼Œç¨‹åºå‘˜éœ€è¦åˆ›å»ºCounterå¯¹è±¡ï¼Œç„¶ååœ¨Mapå’ŒReduceå‡½æ•°ä¸­ä»¥æ­£ç¡®çš„æ–¹å¼å¢åŠ counterã€‚</p><p>å½“èšåˆè¿™äº›counterçš„å€¼æ—¶ï¼Œmasterä¼šå»æ‰é‚£äº›é‡å¤æ‰§è¡Œçš„ç›¸åŒmapæˆ–è€…reduceæ“ä½œçš„æ¬¡æ•°ï¼Œä»¥æ­¤é¿å…é‡å¤è®¡æ•°ï¼ˆä¹‹å‰æåˆ°çš„å¤‡ç”¨ä»»åŠ¡å’Œæ•…éšœåé‡æ–°æ‰§è¡Œä»»åŠ¡ï¼Œè¿™ä¸¤ç§æƒ…å†µä¼šå¯¼è‡´ç›¸åŒçš„ä»»åŠ¡è¢«å¤šæ¬¡æ‰§è¡Œï¼‰ã€‚</p><p>æœ‰äº›counterå€¼æ˜¯ç”±MapReduceåº“è‡ªåŠ¨ç»´æŠ¤çš„ï¼Œä¾‹å¦‚å·²ç»å¤„ç†è¿‡çš„è¾“å…¥é”®å€¼å¯¹çš„æ•°é‡ä»¥åŠç”Ÿæˆçš„è¾“å‡ºé”®å€¼å¯¹çš„æ•°é‡ã€‚</p><h2 id="äº”ã€MapReduceçš„æ€§èƒ½è¯„ä¼°"><a href="#äº”ã€MapReduceçš„æ€§èƒ½è¯„ä¼°" class="headerlink" title="äº”ã€MapReduceçš„æ€§èƒ½è¯„ä¼°"></a>äº”ã€MapReduceçš„æ€§èƒ½è¯„ä¼°</h2><h2 id="å…­ã€MapReduceä½¿ç”¨ç»éªŒ"><a href="#å…­ã€MapReduceä½¿ç”¨ç»éªŒ" class="headerlink" title="å…­ã€MapReduceä½¿ç”¨ç»éªŒ"></a>å…­ã€MapReduceä½¿ç”¨ç»éªŒ</h2><p>æœ¬æ–‡åªå…³æ³¨MapReduceçš„æŠ€æœ¯ç»†èŠ‚ï¼Œæ•…ç¬¬äº”ã€å…­èŠ‚ç•¥è¿‡ã€‚</p><h2 id="ä¸ƒã€å‚è€ƒ"><a href="#ä¸ƒã€å‚è€ƒ" class="headerlink" title="ä¸ƒã€å‚è€ƒ"></a>ä¸ƒã€å‚è€ƒ</h2><p>Lassen S B . MapReduce: Simplified Data Processing on Large Clusters (work by Jeffrey Dean and Sanjay Ghemawat). </p><p><a href="https://chunlife.top/2020/04/18/Google-MapReduce%E4%B8%AD%E6%96%87%E7%89%88/">https://chunlife.top/2020/04/18/Google-MapReduce%E4%B8%AD%E6%96%87%E7%89%88/</a></p>]]></content>
    
    
    <categories>
      
      <category>paper</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Big Data</tag>
      
      <tag>Distributed System</tag>
      
      <tag>MapReduce</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘Hadoopä»‹ç»å’Œå®‰è£…</title>
    <link href="/2021/05/04/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Hadoop%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%AE%89%E8%A3%85/"/>
    <url>/2021/05/04/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Hadoop%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<p>Hadoopå­¦ä¹ ç¬”è®°ç¬¬ä¸€ç¯‡ã€‚<br><!--more---></p><h1 id="Hadoopä»‹ç»"><a href="#Hadoopä»‹ç»" class="headerlink" title="Hadoopä»‹ç»"></a>Hadoopä»‹ç»</h1><p>Apache Hadoop è½¯ä»¶åº“æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå…è®¸åœ¨<strong>é›†ç¾¤æœåŠ¡å™¨</strong>ä¸Šä½¿ç”¨ç®€å•çš„<strong>ç¼–ç¨‹æ¨¡å‹</strong>ï¼Œ<strong>å¯¹å¤§æ•°æ®é›†è¿›è¡Œåˆ†å¸ƒå¼å¤„ç†</strong>ã€‚</p><p>Hadoop å¯æ‰©å±•æ€§å¼ºï¼Œèƒ½ä»å•å°æœåŠ¡å™¨æ‰©å±•åˆ°æ•°ä»¥åƒè®¡çš„æœåŠ¡å™¨ï¼›Hadoop é«˜å¯ç”¨ï¼Œå…¶ä»£ç åº“è‡ªèº«å°±èƒ½åœ¨åº”ç”¨å±‚ä¾¦æµ‹å¹¶å¤„ç†ç¡¬ä»¶æ•…éšœã€‚</p><p>Hadoop çš„ç”Ÿæ€ç³»ç»Ÿä¸ä»…åŒ…å« Hadoopï¼Œè€Œä¸”è¿˜åŒ…å« HDFSã€HBaseç­‰åŸºæœ¬ç»„ä»¶ã€‚</p><p><img src="/2021/05/04/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Hadoop%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%AE%89%E8%A3%85/Hadoopç”Ÿæ€ç³»ç»Ÿ.png" alt></p><p><strong>HDFS (Hadoop Distributed File System)</strong></p><p>HDFSæ˜¯åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿçš„ä¸€ç§ã€‚HDFSæ˜¯Hadoopç”Ÿæ€ç³»ç»Ÿçš„åŸºæœ¬ç»„æˆï¼Œå®ƒå°†æ•°æ®ä¿å­˜åœ¨è®¡ç®—æœºé›†ç¾¤ä¸Šã€‚HDFSæ˜¯HBaseç­‰å·¥å…·çš„åŸºç¡€ã€‚</p><p><strong>MapReduce</strong></p><p>MapReduceæ˜¯ä¸€ç§åˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ã€å¹¶è¡Œå¤„ç†çš„ç¼–ç¨‹æ¨¡å‹ã€‚MapReduceæŠŠä»»åŠ¡åˆ†ä¸º<code>map</code>é˜¶æ®µå’Œ<code>reduce</code>é˜¶æ®µï¼Œ<code>map</code>é˜¶æ®µå°†ä»»åŠ¡åˆ†è§£æˆå­ä»»åŠ¡åæ˜ å°„åˆ°é›†ç¾¤ä¸Šï¼Œ<code>reduce</code>å°†ç»“æœåŒ–ç®€å¹¶æ•´åˆã€‚</p><p>æ­£æ˜¯åˆ©ç”¨äº†MapReduceçš„å·¥ä½œç‰¹æ€§ï¼ŒHadoopå› æ­¤èƒ½ä»¥å¹¶è¡Œçš„æ–¹å¼è®¿é—®æ•°æ®ï¼Œä»è€Œå®ç°åˆ†å¸ƒå¼è®¡ç®—ã€‚</p><p>å…³äºMapReduceçš„è®ºæ–‡è®²è§£ï¼Œè¯·çœ‹<a href="https://superlova.github.io/2021/05/04/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91MapReduce-Simplified-Data-Processing-on-Large-Clusters/">è¿™é‡Œ</a>ã€‚</p><p><strong>HBase</strong></p><p>HBase æ˜¯ä¸€ä¸ªå»ºç«‹åœ¨ HDFS ä¹‹ä¸Šï¼Œé¢å‘åˆ—çš„ NoSQL æ•°æ®åº“ï¼Œç”¨äºå¿«é€Ÿè¯» / å†™å¤§é‡æ•°æ®ã€‚HBase ä½¿ç”¨ Zookeeper è¿›è¡Œç®¡ç†ã€‚</p><p><strong>ZooKeeper</strong></p><p>ZooKeeper ä¸ºå¤§å‹åˆ†å¸ƒå¼è®¡ç®—æä¾›å¼€æºçš„åˆ†å¸ƒå¼é…ç½®æœåŠ¡ã€åŒæ­¥æœåŠ¡å’Œå‘½åæ³¨å†Œã€‚</p><p>Hadoop çš„è®¸å¤šç»„ä»¶ä¾èµ–äº Zookeeperï¼Œå®ƒè¿è¡Œåœ¨è®¡ç®—æœºé›†ç¾¤ä¸­ï¼Œç”¨äºç®¡ç† Hadoop é›†ç¾¤ã€‚</p><p><strong>Pig</strong></p><p>Pigæ˜¯ä¸€ä¸ªåŸºäºHadoopçš„å¤§è§„æ¨¡æ•°æ®åˆ†æå¹³å°ï¼Œå®ƒä¸º MapReduce ç¼–ç¨‹æ¨¡å‹æä¾›äº†ä¸€ä¸ªç®€å•çš„æ“ä½œå’Œç¼–ç¨‹æ¥å£ã€‚å®ƒæä¾›çš„SQL-LIKEè¯­è¨€å«Pig Latinï¼Œè¯¥è¯­è¨€çš„ç¼–è¯‘å™¨ä¼šæŠŠç±»SQLçš„æ•°æ®åˆ†æè¯·æ±‚è½¬æ¢ä¸ºä¸€ç³»åˆ—ç»è¿‡ä¼˜åŒ–å¤„ç†çš„MapReduceè¿ç®—ã€‚</p><p><strong>Hive</strong><br>Apache Hiveæ˜¯ä¸€ä¸ªå»ºç«‹åœ¨Hadoopæ¶æ„ä¹‹ä¸Šçš„æ•°æ®ä»“åº“ã€‚å®ƒèƒ½å¤Ÿæä¾›æ•°æ®çš„ç²¾ç‚¼ï¼ŒæŸ¥è¯¢å’Œåˆ†æã€‚åƒ Pig ä¸€æ ·ï¼ŒHive ä½œä¸ºä¸€ä¸ªæŠ½è±¡å±‚å·¥å…·ï¼Œå¸å¼•äº†å¾ˆå¤šç†Ÿæ‚‰ SQL è€Œä¸æ˜¯ Java ç¼–ç¨‹çš„æ•°æ®åˆ†æå¸ˆã€‚</p><p>ä¸Pigçš„åŒºåˆ«åœ¨äºï¼ŒPigæ˜¯ä¸€ä¸­ç¼–ç¨‹è¯­è¨€ï¼Œä½¿ç”¨å‘½ä»¤å¼æ“ä½œåŠ è½½æ•°æ®ã€è¡¨è¾¾è½¬æ¢æ•°æ®ä»¥åŠå­˜å‚¨æœ€ç»ˆç»“æœã€‚Pigä¸­æ²¡æœ‰è¡¨çš„æ¦‚å¿µã€‚è€ŒHiveæ›´åƒæ˜¯SQLï¼Œä½¿ç”¨ç±»ä¼¼äºSQLè¯­æ³•è¿›è¡Œæ•°æ®æŸ¥è¯¢ã€‚</p><p><strong>Sqoop</strong></p><p>ç”¨äºåœ¨å…³ç³»æ•°æ®åº“ã€æ•°æ®ä»“åº“å’Œ Hadoop ä¹‹é—´è½¬ç§»æ•°æ®ã€‚</p><p><strong>Flume</strong></p><p>æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ã€å¯é ã€é«˜å¯ç”¨çš„æµ·é‡æ—¥å¿—é‡‡é›†ã€èšåˆå’Œä¼ è¾“çš„ç³»ç»Ÿï¼Œç”¨äºæœ‰æ•ˆåœ°æ”¶é›†ã€èšåˆå’Œå°†å¤§é‡æ—¥å¿—æ•°æ®ä»è®¸å¤šä¸åŒçš„æºç§»åŠ¨åˆ°ä¸€ä¸ªé›†ä¸­çš„æ•°æ®å­˜å‚¨ï¼ˆå¦‚æ–‡æœ¬ã€HDFSã€Hbaseç­‰ï¼‰ã€‚</p><p><strong>Yarn</strong></p><p>æ˜¯ä»Hadoop 2.0ç‰ˆæœ¬å¼€å§‹æ²¿ç”¨çš„ä»»åŠ¡è°ƒåº¦å’Œé›†ç¾¤èµ„æºç®¡ç†çš„æ¡†æ¶ã€‚</p><p><strong>Spark</strong></p><p>ä¸€ä¸ªå¿«é€Ÿé€šç”¨çš„ Hadoop æ•°æ®è®¡ç®—å¼•æ“ï¼Œå…·æœ‰ç®€å•å’Œå¯Œæœ‰è¡¨è¾¾åŠ›çš„ç¼–ç¨‹æ¨¡å‹ï¼Œæ”¯æŒæ•°æ® ETLï¼ˆæå–ã€è½¬æ¢å’ŒåŠ è½½ï¼‰ã€æœºå™¨å­¦ä¹ ã€æµå¤„ç†å’Œå›¾å½¢è®¡ç®—ç­‰æ–¹é¢çš„åº”ç”¨ã€‚</p><p>Spark è¿™ä¸€åˆ†å¸ƒå¼å†…å­˜è®¡ç®—æ¡†æ¶å°±æ˜¯è„±èƒäº Hadoop ä½“ç³»çš„ï¼Œå®ƒå¯¹ HDFS ã€YARN ç­‰ç»„ä»¶æœ‰äº†è‰¯å¥½çš„ç»§æ‰¿ï¼ŒåŒæ—¶ä¹Ÿæ”¹è¿›äº† Hadoop ç°å­˜çš„ä¸€äº›ä¸è¶³ã€‚</p><p>ä¸‹å›¾æ˜¯Hadoopé›†ç¾¤çš„åŸºæœ¬æ¶æ„ã€‚</p><p><img src="/2021/05/04/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Hadoop%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%AE%89%E8%A3%85/Hadoopé›†ç¾¤åŸºæœ¬æ¶æ„.png" alt></p><h1 id="Hadoop-å¯ä»¥åšä»€ä¹ˆ"><a href="#Hadoop-å¯ä»¥åšä»€ä¹ˆ" class="headerlink" title="Hadoop å¯ä»¥åšä»€ä¹ˆ"></a>Hadoop å¯ä»¥åšä»€ä¹ˆ</h1><p>æ®Hadoop Wikiè®°è½½ï¼Œé˜¿é‡Œå·´å·´ä½¿ç”¨15ä¸ªèŠ‚ç‚¹ç»„æˆçš„Hadoopé›†ç¾¤ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ‹¥æœ‰8æ ¸å¿ƒã€16GBå†…å­˜å’Œ1.4TBå­˜å‚¨ã€‚é˜¿é‡Œå·´å·´ä½¿ç”¨è¿™äº›èŠ‚ç‚¹æ¥å¤„ç†å•†ä¸šæ•°æ®çš„æ’åºå’Œç»„åˆï¼Œåº”ç”¨äºäº¤æ˜“ç½‘ç«™çš„å‚ç›´æœç´¢ã€‚</p><p>Ebayæ‹¥æœ‰32ä¸ªèŠ‚ç‚¹ç»„æˆçš„é›†ç¾¤ï¼Œä½¿ç”¨Javaç¼–å†™çš„MapReduceåº”ç”¨ï¼Œæ¥ä¼˜åŒ–æœç´¢å¼•æ“ã€‚</p><p>FaceBookä½¿ç”¨Hadoopæ¥å­˜å‚¨å†…éƒ¨æ—¥å¿—å’Œç»“æ„åŒ–æ•°æ®æºå‰¯æœ¬ï¼Œå¹¶ä¸”å°†å…¶ä½œä¸ºæ•°æ®æŠ¥å‘Šã€æ•°æ®åˆ†æå’Œæœºå™¨å­¦ä¹ çš„æ•°æ®æºã€‚</p><h1 id="Hadoop-ä¸åŒç‰ˆæœ¬"><a href="#Hadoop-ä¸åŒç‰ˆæœ¬" class="headerlink" title="Hadoop ä¸åŒç‰ˆæœ¬"></a>Hadoop ä¸åŒç‰ˆæœ¬</h1><p><strong>å…³äºå‘è¡Œæ–¹ï¼š</strong></p><p>ç›®å‰Hadoopå‘è¡Œç‰ˆéå¸¸å¤šï¼Œæœ‰Intelå‘è¡Œç‰ˆï¼Œåä¸ºå‘è¡Œç‰ˆã€Clouderaå‘è¡Œç‰ˆï¼ˆCDHï¼‰ã€Hortonworksç‰ˆæœ¬ç­‰ï¼Œæ‰€æœ‰è¿™äº›å‘è¡Œç‰ˆå‡æ˜¯åŸºäºApache Hadoopè¡ç”Ÿå‡ºæ¥çš„ï¼Œä¹‹æ‰€ä»¥æœ‰è¿™ä¹ˆå¤šçš„ç‰ˆæœ¬ï¼Œæ˜¯ç”±äºApache Hadoopçš„å¼€æºåè®®å†³å®šçš„ï¼šä»»ä½•äººå¯ä»¥å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œå¹¶ä½œä¸ºå¼€æºæˆ–å•†ä¸šäº§å“å‘å¸ƒ/é”€å”®ã€‚</p><p><strong>å…³äºç‰ˆæœ¬ï¼š</strong></p><p>ç°åœ¨æœ€æ–°çš„Hadoopå·²ç»è¾¾åˆ°3.Xäº†ï¼Œç„¶è€Œå¤§éƒ¨åˆ†å…¬å¸ä½¿ç”¨Hadoop 2.Xã€‚åˆç”±äºHadoop 2.Xä¸1.Xç›¸æ¯”æœ‰è¾ƒå¤§å˜åŒ–ï¼Œå› æ­¤ç›´æ¥ä½¿ç”¨2.Xæ˜¯æ¯”è¾ƒåˆç†çš„é€‰æ‹©ã€‚</p><p>Hadoop2.0æ–°å¢äº†HDFS HAæœºåˆ¶ï¼ŒHAå¢åŠ äº†standbynamenodeè¿›è¡Œçƒ­å¤‡ä»½ï¼Œè§£å†³äº†1.0çš„å•ç‚¹æ•…éšœé—®é¢˜ã€‚</p><p>Hadoop2.0æ–°å¢äº†HDFS federationï¼Œè§£å†³äº†HDFSæ°´å¹³å¯æ‰©å±•èƒ½åŠ›ã€‚ </p><p>2.0ç›¸æ¯”äº1.0 æ–°å¢äº†YARNæ¡†æ¶ï¼ŒMapreduceçš„è¿è¡Œç¯å¢ƒå‘ç”Ÿäº†å˜åŒ–</p><h1 id="Hadoop-å®‰è£…"><a href="#Hadoop-å®‰è£…" class="headerlink" title="Hadoop å®‰è£…"></a>Hadoop å®‰è£…</h1><p>Hadoopæœ‰ä¸‰ç§å®‰è£…æ–¹å¼</p><ul><li>å•æœºæ¨¡å¼ï¼šå®‰è£…ç®€å•ï¼Œå‡ ä¹ä¸ç”¨åšä»»ä½•é…ç½®ï¼Œä½†ä»…é™äºè°ƒè¯•ç”¨é€”ã€‚</li><li>ä¼ªåˆ†å¸ƒæ¨¡å¼ï¼šåœ¨å•èŠ‚ç‚¹ä¸ŠåŒæ—¶å¯åŠ¨ NameNodeã€DataNodeã€JobTrackerã€TaskTrackerã€Secondary Namenode ç­‰ 5 ä¸ªè¿›ç¨‹ï¼Œæ¨¡æ‹Ÿåˆ†å¸ƒå¼è¿è¡Œçš„å„ä¸ªèŠ‚ç‚¹ã€‚</li><li>å®Œå…¨åˆ†å¸ƒå¼æ¨¡å¼ï¼šæ­£å¸¸çš„ Hadoop é›†ç¾¤ï¼Œç”±å¤šä¸ªå„å¸å…¶èŒçš„èŠ‚ç‚¹æ„æˆã€‚</li></ul><p>æœ¬æ–‡ä»‹ç» Hadoop ä¼ªåˆ†å¸ƒå¼æ¨¡å¼éƒ¨ç½²æ–¹æ³•ï¼ŒHadoop ç‰ˆæœ¬ä¸º 2.6.1ã€‚</p><h2 id="1-è®¾ç½®ç”¨æˆ·å’Œç»„"><a href="#1-è®¾ç½®ç”¨æˆ·å’Œç»„" class="headerlink" title="1. è®¾ç½®ç”¨æˆ·å’Œç»„"></a>1. è®¾ç½®ç”¨æˆ·å’Œç»„</h2><pre><code>sudo adduser hadoopsudo usermod -G sudo hadoop</code></pre><h2 id="2-å®‰è£…JDK"><a href="#2-å®‰è£…JDK" class="headerlink" title="2. å®‰è£…JDK"></a>2. å®‰è£…JDK</h2><p>ä¸åŒç‰ˆæœ¬çš„ Hadoop å¯¹ Java çš„ç‰ˆæœ¬éœ€æ±‚æœ‰ç»†å¾®çš„å·®åˆ«ï¼Œå¯ä»¥åœ¨<a href="https://cwiki.apache.org/confluence/display/HADOOP2/HadoopJavaVersions">è¿™ä¸ªç½‘ç«™</a>æŸ¥è¯¢ Hadoop ç‰ˆæœ¬ä¸ Java ç‰ˆæœ¬çš„å…³ç³»ã€‚</p><p>æµ‹è¯•jdkæ˜¯å¦éƒ¨ç½²æˆåŠŸï¼š</p><pre><code class="lang-sh">java -version</code></pre><h2 id="3-é…ç½®SSHå…å¯†ç ç™»å½•"><a href="#3-é…ç½®SSHå…å¯†ç ç™»å½•" class="headerlink" title="3. é…ç½®SSHå…å¯†ç ç™»å½•"></a>3. é…ç½®SSHå…å¯†ç ç™»å½•</h2><p>å®‰è£…å’Œé…ç½® SSH çš„ç›®çš„æ˜¯ä¸ºäº†è®© Hadoop èƒ½å¤Ÿæ–¹ä¾¿åœ°è¿è¡Œè¿œç¨‹ç®¡ç†å®ˆæŠ¤è¿›ç¨‹çš„ç›¸å…³è„šæœ¬ã€‚è¿™äº›è„šæœ¬éœ€è¦ç”¨åˆ° sshd æœåŠ¡ã€‚</p><pre><code class="lang-sh">su hadoopcd /home/hadoopssh-keygen -t rsa# å°†ç”Ÿæˆçš„å…¬é’¥æ·»åŠ åˆ°ä¸»æœºè®¤è¯è®°å½•ä¸­ã€‚cat .ssh/id_rsa.pub &gt;&gt; .ssh/authorized_keys# ä¸º authorized_keys æ–‡ä»¶èµ‹äºˆå†™æƒé™chmod 600 .ssh/authorized_keys# å°è¯•ç™»å½•åˆ°æœ¬æœºssh localhost</code></pre><h2 id="4-ä¸‹è½½-Hadoop"><a href="#4-ä¸‹è½½-Hadoop" class="headerlink" title="4. ä¸‹è½½ Hadoop"></a>4. ä¸‹è½½ Hadoop</h2><pre><code class="lang-sh">wget https://archive.apache.org/dist/hadoop/common/hadoop-2.6.1/hadoop-2.6.1.tar.gztar zxvf hadoop-2.6.1.tar.gzsudo mv hadoop-2.6.1 /opt/hadoop-2.6.1sudo chown -R hadoop:hadoop /opt/hadoop-2.6.1vim /home/hadoop/.bashrc</code></pre><p>åœ¨ /home/hadoop/.bashrc æ–‡ä»¶çš„æœ«å°¾æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><pre><code class="lang-sh">export HADOOP_HOME=/opt/hadoop-2.6.1export JAVA_HOME=/usr/lib/jvm/java-8-oracleexport PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin</code></pre><p>åœ¨ç»ˆç«¯ä¸­è¾“å…¥ source å‘½ä»¤æ¥æ¿€æ´»æ–°æ·»åŠ çš„ç¯å¢ƒå˜é‡ã€‚</p><pre><code class="lang-sh">source /home/hadoop/.bashrc</code></pre><h2 id="5-ä¼ªåˆ†å¸ƒå¼æ¨¡å¼é…ç½®"><a href="#5-ä¼ªåˆ†å¸ƒå¼æ¨¡å¼é…ç½®" class="headerlink" title="5. ä¼ªåˆ†å¸ƒå¼æ¨¡å¼é…ç½®"></a>5. ä¼ªåˆ†å¸ƒå¼æ¨¡å¼é…ç½®</h2><p>Hadoop è¿˜å¯ä»¥ä»¥ä¼ªåˆ†å¸ƒå¼æ¨¡å¼è¿è¡Œåœ¨å•ä¸ªèŠ‚ç‚¹ä¸Šï¼Œé€šè¿‡å¤šä¸ªç‹¬ç«‹çš„ Java è¿›ç¨‹æ¥æ¨¡æ‹Ÿå¤šèŠ‚ç‚¹çš„æƒ…å†µã€‚åœ¨åˆå§‹å­¦ä¹ é˜¶æ®µï¼Œæš‚æ—¶æ²¡æœ‰å¿…è¦è€—è´¹å¤§é‡çš„èµ„æºæ¥åˆ›å»ºä¸åŒçš„èŠ‚ç‚¹ã€‚</p><p>5.1 <strong>æ‰“å¼€ core-site.xml æ–‡ä»¶:</strong></p><pre><code class="lang-sh">vim /opt/hadoop-2.6.1/etc/hadoop/core-site.xml</code></pre><p>å°† configuration æ ‡ç­¾çš„å€¼ä¿®æ”¹ä¸ºä»¥ä¸‹å†…å®¹ï¼š</p><pre><code class="lang-xml">&lt;configuration&gt;    &lt;property&gt;        &lt;name&gt;fs.defaultFS&lt;/name&gt;        &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;    &lt;/property&gt;    &lt;property&gt;        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;        &lt;value&gt;/home/hadoop/tmp&lt;/value&gt;    &lt;/property&gt;&lt;/configuration&gt;</code></pre><p>fs.defaultFS é…ç½®é¡¹ç”¨äºæŒ‡ç¤ºé›†ç¾¤é»˜è®¤ä½¿ç”¨çš„æ–‡ä»¶ç³»ç»Ÿçš„ä½ç½®ã€‚</p><p>5.2 <strong>æ‰“å¼€å¦ä¸€ä¸ªé…ç½®æ–‡ä»¶ hdfs-site.xml</strong></p><pre><code class="lang-sh">vim /opt/hadoop-2.6.1/etc/hadoop/hdfs-site.xml</code></pre><p>å°† configuration æ ‡ç­¾çš„å€¼ä¿®æ”¹ä¸ºä»¥ä¸‹å†…å®¹ï¼š</p><pre><code class="lang-xml">&lt;configuration&gt;    &lt;property&gt;        &lt;name&gt;dfs.replication&lt;/name&gt;        &lt;value&gt;1&lt;/value&gt;    &lt;/property&gt;&lt;/configuration&gt;</code></pre><p>è¯¥é…ç½®é¡¹ç”¨äºæŒ‡ç¤º HDFS ä¸­æ–‡ä»¶å‰¯æœ¬çš„æ•°é‡ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ 3 ä»½ï¼Œç”±äºæˆ‘ä»¬åœ¨å•å°èŠ‚ç‚¹ä¸Šä»¥ä¼ªåˆ†å¸ƒå¼çš„æ–¹å¼éƒ¨ç½²ï¼Œæ‰€ä»¥å°†å…¶ä¿®æ”¹ä¸º 1 ã€‚</p><p>5.3 <strong>ç¼–è¾‘ hadoop-env.sh æ–‡ä»¶ï¼š</strong></p><pre><code class="lang-sh">vim /opt/hadoop-2.6.1/etc/hadoop/hadoop-env.sh</code></pre><p>å°†å…¶ä¸­ <code>export JAVA_HOME</code> çš„å€¼ä¿®æ”¹ä¸º JDK çš„å®é™…ä½ç½®ï¼Œå³ <code>/usr/lib/jvm/java-8-oracle</code> ã€‚</p><p>5.4 <strong>ç¼–è¾‘ yarn-site.xml æ–‡ä»¶ï¼š</strong></p><pre><code class="lang-sh">vim /opt/hadoop-2.6.1/etc/hadoop/yarn-site.xml</code></pre><p>åœ¨ configuration æ ‡ç­¾å†…æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><pre><code class="lang-xml">&lt;configuration&gt;    &lt;property&gt;        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;    &lt;/property&gt;&lt;/configuration&gt;</code></pre><p>5.5 <strong>ç¼–è¾‘ mapred-site.xml æ–‡ä»¶ã€‚é¦–å…ˆéœ€è¦ä»æ¨¡æ¿å¤åˆ¶è¿‡æ¥ï¼š</strong></p><pre><code class="lang-sh">cp /opt/hadoop-2.6.1/etc/hadoop/mapred-site.xml.template /opt/hadoop-2.6.1/etc/hadoop/mapred-site.xmlvim /opt/hadoop-2.6.1/etc/hadoop/mapred-site.xml</code></pre><p>åœ¨ configuration æ ‡ç­¾å†…æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><pre><code class="lang-xml">&lt;configuration&gt;    &lt;property&gt;        &lt;name&gt;mapreduce.framework.name&lt;/name&gt;        &lt;value&gt;yarn&lt;/value&gt;    &lt;/property&gt;&lt;/configuration&gt;</code></pre><h2 id="6-Hadoop-å¯åŠ¨æµ‹è¯•"><a href="#6-Hadoop-å¯åŠ¨æµ‹è¯•" class="headerlink" title="6. Hadoop å¯åŠ¨æµ‹è¯•"></a>6. Hadoop å¯åŠ¨æµ‹è¯•</h2><pre><code class="lang-sh">su -l hadoopvim /home/hadoop/.bashrc</code></pre><p>å‘<code>.bashrc</code>æ·»åŠ  Java çš„ç¯å¢ƒå˜é‡ï¼š</p><pre><code class="lang-sh">export JAVA_HOME=/usr/lib/jvm/java-8-oracleexport PATH=$PATH:$JAVA_HOME/bin</code></pre><h1 id="HDFS-çš„åŸºæœ¬ä½¿ç”¨"><a href="#HDFS-çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="HDFS çš„åŸºæœ¬ä½¿ç”¨"></a>HDFS çš„åŸºæœ¬ä½¿ç”¨</h1><h2 id="1-åˆå§‹åŒ–HDFS"><a href="#1-åˆå§‹åŒ–HDFS" class="headerlink" title="1. åˆå§‹åŒ–HDFS"></a>1. åˆå§‹åŒ–HDFS</h2><pre><code class="lang-sh">hdfs namenode -format</code></pre><p>æ ¼å¼åŒ–çš„æ“ä½œåªéœ€è¦è¿›è¡Œä¸€æ¬¡å³å¯ï¼Œä¸éœ€è¦å¤šæ¬¡æ ¼å¼åŒ–ã€‚æ¯ä¸€æ¬¡æ ¼å¼åŒ– namenode éƒ½ä¼šæ¸…é™¤ HDFS åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ‰€æœ‰æ•°æ®æ–‡ä»¶ã€‚åŒæ—¶ï¼Œå¤šæ¬¡æ ¼å¼åŒ–å®¹æ˜“å‡ºç° namenode å’Œ datanode ä¸åŒæ­¥çš„é—®é¢˜ã€‚</p><h2 id="2-å¯åŠ¨HDFS"><a href="#2-å¯åŠ¨HDFS" class="headerlink" title="2. å¯åŠ¨HDFS"></a>2. å¯åŠ¨HDFS</h2><p>HDFS åˆå§‹åŒ–å®Œæˆä¹‹åï¼Œå°±å¯ä»¥å¯åŠ¨ NameNode å’Œ DataNode çš„å®ˆæŠ¤è¿›ç¨‹ã€‚å¯åŠ¨ä¹‹åï¼ŒHadoop çš„åº”ç”¨ï¼ˆå¦‚ MapReduce ä»»åŠ¡ï¼‰å°±å¯ä»¥ä» HDFS ä¸­è¯»å†™æ–‡ä»¶ã€‚</p><p>åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹ï¼š</p><pre><code class="lang-sh">start-dfs.sh</code></pre><p>ä¸ºäº†ç¡®è®¤ä¼ªåˆ†å¸ƒå¼æ¨¡å¼ä¸‹çš„ Hadoop å·²ç»æˆåŠŸè¿è¡Œï¼Œå¯ä»¥åˆ©ç”¨ Java çš„è¿›ç¨‹æŸ¥çœ‹å·¥å…· <code>jps</code> æ¥æŸ¥çœ‹æ˜¯å¦æœ‰ç›¸åº”çš„è¿›ç¨‹ã€‚</p><p>å¦‚æœæ‰§è¡Œ jps å‘ç°æ²¡æœ‰ NameNode æœåŠ¡è¿›ç¨‹ï¼Œå¯ä»¥å…ˆæ£€æŸ¥ä¸€ä¸‹æ˜¯å¦æ‰§è¡Œäº† namenode çš„åˆå§‹åŒ–æ“ä½œã€‚å¦‚æœæ²¡æœ‰åˆå§‹åŒ– namenode ï¼Œå…ˆæ‰§è¡Œ stop-dfs.sh ,ç„¶åæ‰§è¡Œ hdfs namenode -format ,æœ€åæ‰§è¡Œ start-dfs.sh å‘½ä»¤ï¼Œé€šå¸¸æ¥è¯´è¿™æ ·å°±èƒ½å¤Ÿä¿è¯è¿™ä¸‰ä¸ªæœåŠ¡è¿›ç¨‹æˆåŠŸå¯åŠ¨</p><h2 id="3-æŸ¥çœ‹æ—¥å¿—å’ŒWebUI"><a href="#3-æŸ¥çœ‹æ—¥å¿—å’ŒWebUI" class="headerlink" title="3. æŸ¥çœ‹æ—¥å¿—å’ŒWebUI"></a>3. æŸ¥çœ‹æ—¥å¿—å’ŒWebUI</h2><p>ä½œä¸ºå¤§æ•°æ®é¢†åŸŸçš„å­¦ä¹ è€…ï¼ŒæŒæ¡åˆ†ææ—¥å¿—çš„èƒ½åŠ›ä¸å­¦ä¹ ç›¸å…³è®¡ç®—æ¡†æ¶çš„èƒ½åŠ›åŒæ ·é‡è¦ã€‚</p><p>Hadoop çš„å®ˆæŠ¤è¿›ç¨‹æ—¥å¿—é»˜è®¤è¾“å‡ºåœ¨å®‰è£…ç›®å½•çš„ log æ–‡ä»¶å¤¹ä¸­ï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤è¿›å…¥åˆ°æ—¥å¿—ç›®å½•ï¼š</p><pre><code class="lang-sh">cd /opt/hadoop-2.6.1/logsls</code></pre><p>HDFS åœ¨å¯åŠ¨å®Œæˆä¹‹åï¼Œè¿˜ä¼šç”±å†…éƒ¨çš„ Web æœåŠ¡æä¾›ä¸€ä¸ªæŸ¥çœ‹é›†ç¾¤çŠ¶æ€çš„ç½‘é¡µï¼š</p><p><a href="http://localhost:50070/">http://localhost:50070/</a></p><p>æ‰“å¼€ç½‘é¡µåï¼Œå¯ä»¥åœ¨å…¶ä¸­æŸ¥çœ‹åˆ°é›†ç¾¤çš„æ¦‚è§ˆã€DataNode çš„çŠ¶æ€ç­‰ä¿¡æ¯ã€‚</p><h2 id="4-HDFSæ–‡ä»¶ä¸Šä¼ æµ‹è¯•"><a href="#4-HDFSæ–‡ä»¶ä¸Šä¼ æµ‹è¯•" class="headerlink" title="4. HDFSæ–‡ä»¶ä¸Šä¼ æµ‹è¯•"></a>4. HDFSæ–‡ä»¶ä¸Šä¼ æµ‹è¯•</h2><p>HDFS è¿è¡Œèµ·æ¥ä¹‹åï¼Œå¯å°†å…¶è§†ä½œä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿã€‚æ­¤å¤„è¿›è¡Œæ–‡ä»¶ä¸Šä¼ çš„æµ‹è¯•ï¼Œé¦–å…ˆéœ€è¦æŒ‰ç…§ç›®å½•å±‚çº§é€ä¸ªåˆ›å»ºç›®å½•ï¼Œå¹¶å°è¯•å°† Linux ç³»ç»Ÿä¸­çš„ä¸€äº›æ–‡ä»¶ä¸Šä¼ åˆ° HDFS ä¸­ã€‚</p><pre><code class="lang-sh">cd ~hdfs dfs -mkdir /userhdfs dfs -mkdir /user/hadoop</code></pre><p>å¦‚æœéœ€è¦æŸ¥çœ‹åˆ›å»ºå¥½çš„æ–‡ä»¶å¤¹ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><pre><code class="lang-sh">hdfs dfs -ls /user</code></pre><p>ç›®å½•åˆ›å»ºæˆåŠŸä¹‹åï¼Œä½¿ç”¨ <code>hdfs dfs -put</code> å‘½ä»¤å°†æœ¬åœ°ç£ç›˜ä¸Šçš„æ–‡ä»¶ï¼ˆæ­¤å¤„æ˜¯éšæ„é€‰å–çš„ Hadoop é…ç½®æ–‡ä»¶ï¼‰ä¸Šä¼ åˆ° HDFS ä¹‹ä¸­ã€‚</p><pre><code class="lang-sh">hdfs dfs -put /opt/hadoop-2.6.1/etc/hadoop /user/hadoop/input</code></pre><p>å¦‚æœè¦æŸ¥çœ‹ä¸Šä¼ çš„æ–‡ä»¶ï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><pre><code class="lang-sh">hdfs dfs -ls /user/hadoop/input</code></pre><h1 id="WordCount"><a href="#WordCount" class="headerlink" title="WordCount"></a>WordCount</h1><p>WordCount æ˜¯ Hadoop çš„ â€œHelloWorldâ€ ç¨‹åºã€‚</p><p>ç»å¤§å¤šæ•°éƒ¨ç½²åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒå¹¶ä¸”è§£å†³å®é™…é—®é¢˜çš„ Hadoop åº”ç”¨ç¨‹åºéƒ½æ˜¯åŸºäº WordCount æ‰€ä»£è¡¨çš„ MapReduce ç¼–ç¨‹æ¨¡å‹å˜åŒ–è€Œæ¥ã€‚</p><p>åœ¨ç»ˆç«¯ä¸­é¦–å…ˆå¯åŠ¨ YARN è®¡ç®—æœåŠ¡ï¼š</p><pre><code class="lang-sh">start-yarn.sh</code></pre><p>ç„¶åè¾“å…¥ä»¥ä¸‹å‘½ä»¤ä»¥å¯åŠ¨ä»»åŠ¡</p><pre><code class="lang-sh">hadoop jar /opt/hadoop-2.6.1/share/hadoop/mapreduce/hadoop-mapreduce-examples-2.6.1.jar wordcount /user/hadoop/input/ output</code></pre><p>ä¸Šè¿°å‚æ•°ä¸­ï¼Œå…³äºè·¯å¾„çš„å‚æ•°æœ‰ä¸‰ä¸ªï¼Œåˆ†åˆ«æ˜¯ jar åŒ…çš„ä½ç½®ã€è¾“å…¥æ–‡ä»¶çš„ä½ç½®å’Œè¾“å‡ºç»“æœçš„å­˜æ”¾ä½ç½®ã€‚åœ¨å¡«å†™è·¯å¾„æ—¶ï¼Œåº”å½“å…»æˆå¡«å†™ç»å¯¹è·¯å¾„çš„ä¹ æƒ¯ã€‚è¿™æ ·åšå°†æœ‰åˆ©äºå®šä½é—®é¢˜å’Œä¼ é€’å·¥ä½œã€‚</p><p>ç­‰å¾…è®¡ç®—å®Œæˆï¼Œç„¶åå°† HDFS ä¸Šçš„æ–‡ä»¶å¯¼å‡ºåˆ°æœ¬åœ°ç›®å½•æŸ¥çœ‹ï¼š</p><pre><code class="lang-sh">rm -rf /home/hadoop/outputhdfs dfs -get /user/hadoop/output outputcat output/*</code></pre><p>è®¡ç®—å®Œæ¯•åï¼Œå¦‚æ— å…¶ä»–è½¯ä»¶éœ€è¦ä½¿ç”¨ HDFS ä¸Šçš„æ–‡ä»¶ï¼Œåˆ™åº”åŠæ—¶å…³é—­ HDFS å®ˆæŠ¤è¿›ç¨‹ã€‚</p><p>ä½œä¸ºåˆ†å¸ƒå¼é›†ç¾¤å’Œç›¸å…³è®¡ç®—æ¡†æ¶çš„ä½¿ç”¨è€…ï¼Œåº”å½“å…»æˆè‰¯å¥½çš„ä¹ æƒ¯ï¼Œåœ¨æ¯æ¬¡æ¶‰åŠåˆ°é›†ç¾¤å¼€å¯å’Œå…³é—­ã€è½¯ç¡¬ä»¶å®‰è£…å’Œæ›´æ–°çš„æ—¶å€™ï¼Œéƒ½ä¸»åŠ¨æ£€æŸ¥ç›¸å…³è½¯ç¡¬ä»¶çš„çŠ¶æ€ã€‚</p><pre><code class="lang-sh">stop-yarn.shstop-dfs.sh</code></pre>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hadoop</tag>
      
      <tag>Big Data</tag>
      
      <tag>Distributed System</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘è®¡ç®—äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°</title>
    <link href="/2021/05/03/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E8%AE%A1%E7%AE%97%E4%BA%8C%E8%BF%9B%E5%88%B6%E4%B8%AD1%E7%9A%84%E4%B8%AA%E6%95%B0/"/>
    <url>/2021/05/03/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E8%AE%A1%E7%AE%97%E4%BA%8C%E8%BF%9B%E5%88%B6%E4%B8%AD1%E7%9A%84%E4%B8%AA%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<p>äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°çš„ä¸¤ç§è®¡ç®—æ–¹æ³•</p><!--more---><p>ç¬¬ä¸€ç§è§£æ³•ï¼Œ<code>n &amp;= (n - 1);</code>è¿™ä¸€å¥æ¶ˆç­äº†äºŒè¿›åˆ¶æœ«å°¾çš„1ã€‚å¾ªç¯æ¬¡æ•°ä¸äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°ç›¸åŒã€‚</p><pre><code class="lang-cpp">int hammingWeight(uint32_t n) &#123;    int count = 0;    while (n != 0) &#123;        n &amp;= (n - 1);        ++count;    &#125;    return count;&#125;</code></pre><p>ç¬¬äºŒç§è§£æ³•ï¼Œæ˜¯æŠŠæ€§èƒ½æŒ–æ˜åˆ°æè‡´çš„è§£æ³•ï¼š</p><pre><code class="lang-cpp">size_t hammingWeight(uint64_t V) &#123;    V -= ((V &gt;&gt; 1) &amp; 0x5555555555555555); // 010101010101    V = (V &amp; 0x3333333333333333) + ((V &gt;&gt; 2) &amp; 0x3333333333333333);    return ((V + (V &gt;&gt; 4) &amp; 0xF0F0F0F0F0F0F0F) * 0x101010101010101) &gt;&gt; 56;&#125;</code></pre><p>åªä¾é ä½è¿ç®—ï¼Œä¸è¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œæ–¹ä¾¿å¹¶è¡Œè®¡ç®—ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>leetcode</tag>
      
      <tag>binary</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç«èµ›æ‰“å¡ã€‘ä¸é™ç²¾åº¦çš„å¤§æ•´æ•°è¡¨ç¤º</title>
    <link href="/2021/05/03/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E4%B8%8D%E9%99%90%E7%B2%BE%E5%BA%A6%E7%9A%84%E6%95%B4%E6%95%B0%E4%B9%98%E6%B3%95/"/>
    <url>/2021/05/03/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E4%B8%8D%E9%99%90%E7%B2%BE%E5%BA%A6%E7%9A%84%E6%95%B4%E6%95%B0%E4%B9%98%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>ä¸¤ä¸ªå¤§æ•´æ•°ç›¸ä¹˜ï¼Œå¦‚ä½•åœ¨ä¸æŸå¤±ç²¾åº¦çš„å‰æä¸‹è®¡ç®—å¾—åˆ°æ­£ç¡®çš„ç»“æœï¼Ÿ<br><!--more---></p><h1 id="ä¸é™ç²¾åº¦çš„æ•´æ•°è¿ç®—"><a href="#ä¸é™ç²¾åº¦çš„æ•´æ•°è¿ç®—" class="headerlink" title="ä¸é™ç²¾åº¦çš„æ•´æ•°è¿ç®—"></a>ä¸é™ç²¾åº¦çš„æ•´æ•°è¿ç®—</h1><p>å‰ä¸€ç¯‡æ–‡ç« æˆ‘ä»¬è®¨è®ºäº†ä¸¤ä¸ª64ä½æ•´æ•°çš„ä¹˜æ³•ï¼Œæœ¬ç¯‡æ–‡ç« æˆ‘ä»¬è®¨è®ºé«˜ç²¾åº¦æ•°å€¼çš„åŠ å‡è¿ç®—é—®é¢˜ã€‚</p><h2 id="å¤§æ•´æ•°å­˜å‚¨"><a href="#å¤§æ•´æ•°å­˜å‚¨" class="headerlink" title="å¤§æ•´æ•°å­˜å‚¨"></a>å¤§æ•´æ•°å­˜å‚¨</h2><p>å¾ˆç®€å•ï¼Œä½¿ç”¨æ•°ç»„å³å¯ã€‚æ³¨æ„æ•´æ•°çš„é«˜ä½å­˜å‚¨åœ¨æ•°ç»„çš„æœ«å°¾ï¼Œæ•´æ•°çš„ä½ä½å­˜å‚¨åœ¨æ•°ç»„çš„å¼€å¤´ã€‚</p><pre><code class="lang-py"># 235813d[0] = 3d[1] = 1d[2] = 8d[3] = 5d[4] = 3d[5] = 2</code></pre><p>è¿™æ ·åšçš„åŸå› æ˜¯ï¼Œå››åˆ™è¿ç®—ä¸€èˆ¬æ˜¯ä»ä½ä½å‘é«˜ä½è®¡ç®—çš„ï¼Œæ•°ç»„åˆ™æ˜¯ä»0å¼€å§‹éå†çš„ã€‚ä¸è¿‡å¦‚æœæ•°å­—ä»¥å­—ç¬¦ä¸²å­˜å‚¨åˆ™ä¸ç„¶ã€‚æ¯”å¦‚<code>s=&quot;235813&quot;</code>è¿™ä¸ªå­—ç¬¦ä¸²çš„å­˜å‚¨é¡ºåºå’Œé€»è¾‘é¡ºåºæ°æ°ç›¸åã€‚</p><pre><code class="lang-cpp">class BigInt &#123;public:    int d[1000]&#123;&#125;;    int len;    BigInt() &#123;        memset(d, 0, sizeof(d));        len = 0;    &#125;    static BigInt change(std::string str);    static int compare(BigInt a, BigInt b);    static BigInt add(BigInt a, BigInt b);    static BigInt sub(BigInt a, BigInt b);&#125;;</code></pre><p>è¾“å…¥å¤§æ•´æ•°æ—¶ï¼Œä¸€èˆ¬éƒ½ä»¥<code>string</code>ç±»å‹è¾“å…¥ï¼Œå› æ­¤éœ€è¦æ‰§è¡Œ<code>reverse</code>æ“ä½œï¼Œæˆ–è€…ç›´æ¥é€†åºèµ‹å€¼ã€‚</p><h2 id="å¤§æ•´æ•°è¿ç®—"><a href="#å¤§æ•´æ•°è¿ç®—" class="headerlink" title="å¤§æ•´æ•°è¿ç®—"></a>å¤§æ•´æ•°è¿ç®—</h2><h3 id="åŠ æ³•"><a href="#åŠ æ³•" class="headerlink" title="åŠ æ³•"></a>åŠ æ³•</h3><pre><code class="lang-cpp">BigInt BigInt::add(BigInt a, BigInt b) &#123;    BigInt c;    int carry = 0;    for (int i = 0; i &lt; a.len || i &lt; b.len; ++i) &#123;        int temp = a.d[i] + b.d[i] + carry;        c.d[c.len++] = temp % 10;        carry = temp / 10;    &#125;    if (carry != 0) &#123;        c.d[c.len++] = carry;    &#125;    return c;&#125;</code></pre><h3 id="å‡æ³•"><a href="#å‡æ³•" class="headerlink" title="å‡æ³•"></a>å‡æ³•</h3><pre><code class="lang-cpp">BigInt BigInt::sub(BigInt a, BigInt b) &#123;    BigInt c;    for (int i = 0; i &lt; a.len || i &lt; b.len; ++i) &#123;        if (a.d[i] &lt; b.d[i]) &#123;            a.d[i+1]--;            a.d[i] += 10; // å€Ÿä½        &#125;        c.d[c.len++] = a.d[i] - b.d[i];    &#125;    while (c.len - 1 &gt;= 1 &amp;&amp; c.d[c.len - 1] == 0) &#123;        c.len--;    &#125;    return c;&#125;</code></pre><h3 id="æ¯”è¾ƒ"><a href="#æ¯”è¾ƒ" class="headerlink" title="æ¯”è¾ƒ"></a>æ¯”è¾ƒ</h3><pre><code class="lang-cpp">int BigInt::compare(BigInt a, BigInt b) &#123;    if (a.len &gt; b.len) return 1;    else if (a.len &lt; b.len) return -1;    else &#123;        for (int i = a.len-1; i &gt;= 0; --i) &#123;            if (a.d[i] &gt; b.d[i]) return 1;            else if (a.d[i] &lt; b.d[i]) return -1;        &#125;        return 0;    &#125;&#125;</code></pre><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p>ç®—æ³•ç¬”è®° 5.6 èŠ‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>algorithm</tag>
      
      <tag>leetcode</tag>
      
      <tag>searching</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘åœ¨ Clion ä¸­ä½¿ç”¨ Google Test</title>
    <link href="/2021/05/01/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E5%9C%A8-Clion-%E4%B8%AD%E4%BD%BF%E7%94%A8-Google-Test/"/>
    <url>/2021/05/01/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E5%9C%A8-Clion-%E4%B8%AD%E4%BD%BF%E7%94%A8-Google-Test/</url>
    
    <content type="html"><![CDATA[<p>Google Test æ˜¯è‘—åçš„ C++ å•å…ƒæµ‹è¯•æ¡†æ¶ã€‚å¦‚ä½•åœ¨ CLionä¸­ä½¿ç”¨ Google Testï¼Ÿ<br><!--more---></p><h1 id="1-ä¸‹è½½å’Œå®‰è£…"><a href="#1-ä¸‹è½½å’Œå®‰è£…" class="headerlink" title="1. ä¸‹è½½å’Œå®‰è£…"></a>1. ä¸‹è½½å’Œå®‰è£…</h1><p>é¦–å…ˆå»<a href="https://github.com/google/googletest">è¿™ä¸ªç½‘ç«™</a>ä¸‹è½½ google test æœ€æ–°ç‰ˆæœ¬ã€‚</p><p><img src="/2021/05/01/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E5%9C%A8-Clion-%E4%B8%AD%E4%BD%BF%E7%94%A8-Google-Test/readme.png" alt></p><p>ç¬”è€…å†™ä½œæ—¶ï¼Œ google test çš„ç‰ˆæœ¬ä¸º 1.10ã€‚</p><p>ç„¶åä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„å‹ç¼©æ–‡ä»¶ã€‚</p><p><img src="/2021/05/01/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E5%9C%A8-Clion-%E4%B8%AD%E4%BD%BF%E7%94%A8-Google-Test/download.png" alt></p><p>è§£å‹å¾—åˆ°æ–‡ä»¶å¤¹<code>googletest-release-1.10.0</code>ï¼Œæ‰“å¼€æ–‡ä»¶å¤¹åï¼ŒæŠŠ<code>googletest</code>æ–‡ä»¶å¤¹å¤åˆ¶åˆ°ä½ çš„ç›®æ ‡å·¥ç¨‹ç›®å½•ã€‚</p><p><img src="/2021/05/01/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E5%9C%A8-Clion-%E4%B8%AD%E4%BD%BF%E7%94%A8-Google-Test/googletestdir.png" alt></p><p><img src="/2021/05/01/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E5%9C%A8-Clion-%E4%B8%AD%E4%BD%BF%E7%94%A8-Google-Test/putitinproject.png" alt></p><p>è¿˜æ²¡ç»“æŸï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹å·¥ç¨‹æ ¹ç›®å½•çš„<code>CMakeLists.txt</code>ï¼Œä»¥ä½¿ google test ç”Ÿæ•ˆã€‚æ³¨æ„ä¸è¦ä¿®æ”¹<code>googletest/CMakeLists.txt</code>ï¼</p><p>å‘<code>CMakeLists.txt</code>æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p><pre><code class="lang-sh">add_subdirectory(./googletest)include_directories($&#123;PROJECT_SOURCE_DIR&#125;/src/include ./googletest/include)link_directories($&#123;PROJECT_SOURCE_DIR&#125;/lib $&#123;PROJECT_SOURCE_DIR&#125;/googletest)target_link_libraries($&#123;PROJECT_NAME&#125; gtest)</code></pre><p>å¦‚æœæˆ‘ä»¬æƒ³è¦ä½¿ç”¨ google testï¼Œå°±åœ¨ä»»æ„cppæ–‡ä»¶æ·»åŠ å¤´<code>#include &quot;gtest/gtest.h&quot;</code></p><h1 id="2-ç®€å•çš„ç”¨ä¾‹"><a href="#2-ç®€å•çš„ç”¨ä¾‹" class="headerlink" title="2. ç®€å•çš„ç”¨ä¾‹"></a>2. ç®€å•çš„ç”¨ä¾‹</h1><p>åšä¸€ä¸ªç®€å•çš„æµ‹è¯•ï¼Œæˆ‘ç¼–å†™äº†ä¸€ä¸ªå°†<code>unsigned long long</code>è½¬ä¸ºäºŒè¿›åˆ¶æ•°æ®çš„å‡½æ•°<code>ulld_to_b</code>ï¼Œè¯¥å‡½æ•°èƒ½å°†ä¸€ä¸ªæ— ç¬¦å·64ä½æ•´æ•°è½¬æ¢ä¸º64ä½é•¿çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²ã€‚</p><pre><code class="lang-cpp">string ulld_to_b(uint64_t i) &#123;    return bitset&lt;64&gt;(i).to_string();&#125;</code></pre><p>ç°åœ¨å¯¹å…¶è¿›è¡Œæµ‹è¯•ã€‚æµ‹è¯•ç”¨ä¾‹ä¸º18ï¼Œæˆ‘çš„é¢„æœŸç»“æœä¸º10010ï¼Œä½†æ˜¯å‰é¢åº”è¯¥è¡¥é›¶è‡³64ä½é•¿ï¼š</p><pre><code class="lang-cpp">TEST(TestCase, test1) &#123;    EXPECT_STREQ(&quot;10010&quot;, ulld_to_b(18ULL).c_str());&#125;TEST(TestCase, test2) &#123;    EXPECT_STREQ(&quot;00000000000000000000000000010010&quot;, ulld_to_b(18ULL).c_str());&#125;TEST(TestCase, test3) &#123;    EXPECT_STREQ(&quot;0000000000000000000000000000000000000000000000000000000000010010&quot;, ulld_to_b(18ULL).c_str());&#125;</code></pre><p>å†™å®Œæµ‹è¯•ç”¨ä¾‹åï¼Œéœ€è¦æ”¹é€ ä¸‹<code>main()</code>ä½¿å…¶è¿è¡Œæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ï¼š</p><pre><code class="lang-cpp">int main(int argc, char** argv) &#123;    testing::InitGoogleTest(&amp;argc, argv);    return RUN_ALL_TESTS();&#125;</code></pre><p>é¢„æœŸç»“æœä¸ºå‰ä¸¤ä¸ªæµ‹è¯•ç”¨ä¾‹ä¸é€šè¿‡ï¼Œåä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹é€šè¿‡ã€‚</p><p>ç¼–è¯‘è¿è¡Œåç»“æœå¦‚ä¸‹ï¼Œå®Œå…¨ç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸï¼š</p><p><img src="/2021/05/01/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E5%9C%A8-Clion-%E4%B8%AD%E4%BD%BF%E7%94%A8-Google-Test/results.png" alt></p><p>å½“ç„¶è¿™é‡Œçš„ä½¿ç”¨æ˜¯ä¸æ°å½“çš„ï¼Œæˆ‘ä»¬åº”å½“å°½å¯èƒ½ä»¤æ‰€æœ‰å•å…ƒæµ‹è¯•éƒ½é€šè¿‡ã€‚</p><p>åœ¨CLionçš„ä»£ç ç¼–è¾‘å™¨ä¸­å¯ä»¥æ–¹ä¾¿åœ°æŸ¥çœ‹å‡ºé”™çš„æµ‹è¯•ç”¨ä¾‹ï¼š</p><p><img src="/2021/05/01/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E5%9C%A8-Clion-%E4%B8%AD%E4%BD%BF%E7%94%A8-Google-Test/result_wrong.png" alt></p><h1 id="3-æ‰¹é‡å¼€å…³æµ‹è¯•ç”¨ä¾‹"><a href="#3-æ‰¹é‡å¼€å…³æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="3. æ‰¹é‡å¼€å…³æµ‹è¯•ç”¨ä¾‹"></a>3. æ‰¹é‡å¼€å…³æµ‹è¯•ç”¨ä¾‹</h1><p>åœ¨å¤§å‹å·¥ç¨‹ä¸­ï¼Œé¡¹ç›®ä¸Šçº¿å‰éœ€è¦å…³é—­æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ï¼Œé€ä¸ªåˆ é™¤æœªå…æ˜¾å¾—ç¬¨æ‹™ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®å®šä¹‰ã€‚</p><p>é¦–å…ˆå°†<code>googletest</code>çš„å¤´æ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªç»Ÿä¸€çš„å¤´æ–‡ä»¶<code>stdafx.h</code>ä¸­ï¼Œç„¶åä»¥<code>#ifdef</code>åŒ…è£¹èµ·æ¥ï¼š</p><pre><code class="lang-cpp">#ifndef LEETCODE_2021_STDAFX_H#define LEETCODE_2021_STDAFX_H#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;string&gt;#include &lt;map&gt;#include &lt;set&gt;#include &lt;algorithm&gt;#include &lt;stack&gt;#include &lt;memory&gt;#include &lt;bitset&gt;// å¼€å¯æµ‹è¯•æ¨¡å¼#define DEBUG_MODE#ifdef DEBUG_MODE#include &quot;gtest/gtest.h&quot;#endif#endif //LEETCODE_2021_STDAFX_H</code></pre><p>å¦‚æœæˆ‘æŠŠ<code>#define DEBUG_MODE</code>åˆ é™¤çš„è¯ï¼Œ<code>#include &quot;gtest/gtest.h&quot;</code>å°±ä¸ä¼šæ‰§è¡Œäº†ã€‚</p><p>ç„¶åå›åˆ°æ¯ä¸ªå‡½æ•°å®ç°å¤„ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œå†™äº†å¾ˆå¤šçš„æµ‹è¯•ç”¨ä¾‹ï¼Œä»¥åŠä¿®æ”¹äº†<code>main()</code>å‡½æ•°ã€‚åŒæ ·å°†å®ƒä»¬ç”¨<code>#ifdef</code>åŒ…è£¹èµ·æ¥ï¼š</p><pre><code class="lang-cpp">#ifdef DEBUG_MODETEST(TestCase, test1) &#123;    EXPECT_STREQ(&quot;10010&quot;, ulld_to_b(18ULL).c_str());&#125;TEST(TestCase, test2) &#123;    EXPECT_STREQ(&quot;00000000000000000000000000010010&quot;, ulld_to_b(18ULL).c_str());&#125;TEST(TestCase, test3) &#123;    EXPECT_STREQ(&quot;0000000000000000000000000000000000000000000000000000000000010010&quot;, ulld_to_b(18ULL).c_str());&#125;#endif</code></pre><p>è¿™äº›æµ‹è¯•ç”¨ä¾‹ä¼šéšç€<code>&quot;stdafx.h&quot;</code>ä¸­<code>#define DEBUG_MODE</code>è¯­å¥çš„åˆ é™¤è€Œå¤±æ•ˆã€‚</p><p>æœ€åæ¥çœ‹çœ‹<code>main()</code>å‡½æ•°å¦‚ä½•å¤„ç†ï¼š</p><pre><code class="lang-cpp">#ifndef DEBUG_MODEint main() &#123;    /*...*/    return 0;&#125;#elseint main(int argc, char** argv) &#123;    testing::InitGoogleTest(&amp;argc, argv);    return RUN_ALL_TESTS();&#125;#endif</code></pre><p>å¦‚æœæ²¡å®šä¹‰<code>DEBUG_MODE</code>ï¼Œåˆ™æ‰§è¡Œæ­£å¸¸çš„<code>main()</code>ï¼›å¦åˆ™æ‰§è¡Œæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹çš„<code>main(int argc, char** argv)</code>ã€‚</p><p>åœ¨é¡¹ç›®éœ€è¦ä¸Šçº¿æ—¶ï¼ŒæŠŠ<code>#define DEBUG_MODE</code>é‚£ä¸€è¡Œåˆ é™¤å³å¯ã€‚</p><h1 id="4-æµ‹è¯•ç”¨ä¾‹ç¼–å†™"><a href="#4-æµ‹è¯•ç”¨ä¾‹ç¼–å†™" class="headerlink" title="4. æµ‹è¯•ç”¨ä¾‹ç¼–å†™"></a>4. æµ‹è¯•ç”¨ä¾‹ç¼–å†™</h1><h2 id="4-1-EXPECTå’ŒASSERT"><a href="#4-1-EXPECTå’ŒASSERT" class="headerlink" title="4.1 EXPECTå’ŒASSERT"></a>4.1 <code>EXPECT</code>å’Œ<code>ASSERT</code></h2><p>google test ä½¿ç”¨ TEST å®å£°æ˜æµ‹è¯•ç”¨ä¾‹ã€‚TEST() æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œ<code>TestCaseName</code>ï¼Œ<code>TestName</code>ã€‚</p><p>æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨äº†<code>EXPECT_STREQ</code>è¿™ä¸ªå®ï¼Œå…¶å«ä¹‰ä¸ºéªŒè¯å†…éƒ¨çš„ä¸¤ä¸ªå‚æ•°ä¸ºç›¸åŒçš„å­—ç¬¦ä¸²ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šä»¥EXPECTå¼€å¤´çš„å®ï¼Œå®ƒä»¬åŠŸèƒ½å„ä¸ç›¸åŒï¼Œæ¯”å¦‚<code>EXPECT_EQ</code>è¿™ä¸ªå®æ¯”è¾ƒä¸¤ä¸ªæ•°å­—æ˜¯å¦ç›¸ç­‰ã€‚</p><p>EXPECTç³»åˆ—å’ŒASSERTç³»åˆ—çš„åŒºåˆ«æ˜¯ï¼ŒEXPECTå¤±è´¥åï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼›ASSERTå¤±è´¥åˆ™ç›´æ¥ç»ˆæ­¢ç¨‹åºã€‚</p><p>EXPECTå’ŒASSERTçš„è¿”å›æ˜¯ä¸€ä¸ªæµå¯¹è±¡ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨ä¹‹åä½¿ç”¨<code>&lt;&lt;</code>è¿ç®—ç¬¦è¾“å‡ºé¢å¤–ä¿¡æ¯ï¼š</p><pre><code class="lang-cpp">for (int i = 0; i &lt; x.size(); ++i) &#123;    EXPECT_EQ(x[i], y[i]) &lt;&lt; &quot;Vectors x and y differ at index &quot; &lt;&lt; i;&#125;</code></pre><h2 id="4-2-å„ç§ä¸åŒçš„å®æ–­è¨€"><a href="#4-2-å„ç§ä¸åŒçš„å®æ–­è¨€" class="headerlink" title="4.2 å„ç§ä¸åŒçš„å®æ–­è¨€"></a>4.2 å„ç§ä¸åŒçš„å®æ–­è¨€</h2><p>æœ¬èŠ‚åªåˆ—å‡ºäº†<code>ASSERT</code>ï¼Œå®é™…ä¸Šæ¯ä¸ª<code>ASSERT</code>å¯¹åº”ä¸€ä¸ª<code>EXPECT</code>ç‰ˆæœ¬ã€‚</p><p><strong>ç¼–å†™æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œæ³¨æ„æŠŠå¾…æµ‹å‡½æ•°è¾“å‡ºæ”¾åœ¨åé¢ï¼å‰é¢çš„å‚æ•°æ˜¯Ground Truthï¼Œä¹Ÿå°±æ˜¯ç­”æ¡ˆã€‚</strong></p><h3 id="å¸ƒå°”å€¼æ–­è¨€ï¼Œåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°åªèƒ½ä¸ºtrueæˆ–è€…falseï¼š"><a href="#å¸ƒå°”å€¼æ–­è¨€ï¼Œåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°åªèƒ½ä¸ºtrueæˆ–è€…falseï¼š" class="headerlink" title="å¸ƒå°”å€¼æ–­è¨€ï¼Œåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°åªèƒ½ä¸ºtrueæˆ–è€…falseï¼š"></a>å¸ƒå°”å€¼æ–­è¨€ï¼Œåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°åªèƒ½ä¸ºtrueæˆ–è€…falseï¼š</h3><pre><code class="lang-cpp">ASSERT_TRUE(condition)ASSERT_FALSE(condition)</code></pre><h3 id="æ•°å€¼æ–­è¨€ï¼š"><a href="#æ•°å€¼æ–­è¨€ï¼š" class="headerlink" title="æ•°å€¼æ–­è¨€ï¼š"></a>æ•°å€¼æ–­è¨€ï¼š</h3><pre><code class="lang-cpp">ASSERT_EQ(v1, v2) // v1 == v2ASSERT_NE(v1, v2) // v1 != v2ASSERT_LT(v1, v2) // v1 &lt; v2ASSERT_LE(v1, v2) // v1 &lt;= v2ASSERT_GT(v1, v2) // v1 &gt; v2ASSERT_GE(v1, v2) // v1 &gt;= v2</code></pre><h3 id="å­—ç¬¦ä¸²æ–­è¨€"><a href="#å­—ç¬¦ä¸²æ–­è¨€" class="headerlink" title="å­—ç¬¦ä¸²æ–­è¨€"></a>å­—ç¬¦ä¸²æ–­è¨€</h3><p>è¿™é‡Œçš„å‚æ•°ä¸ºCé£æ ¼å­—ç¬¦ä¸²ï¼Œå› æ­¤å½“å‚æ•°ä¸º<code>string</code>ç±»å‹æ—¶ï¼Œä½ éœ€è¦è°ƒç”¨<code>c_str()</code>æ–¹æ³•ã€‚</p><pre><code class="lang-cpp">ASSERT_STREQ(s1, s2) // s1å’Œs2å†…å®¹ç›¸åŒASSERT_STRNE(s1, s2) // s1å’Œs2å†…å®¹ä¸åŒASSERT_STRCASEEQ(s1, s2) // å¿½ç•¥å¤§å°å†™ï¼Œs1å’Œs2å†…å®¹ç›¸åŒASSERT_STRCASENE(s1, s2) // å¿½ç•¥å¤§å°å†™ï¼Œs1å’Œs2å†…å®¹ä¸åŒ</code></pre><h3 id="æ–­è¨€è¿”å›æˆåŠŸæˆ–è€…å¤±è´¥"><a href="#æ–­è¨€è¿”å›æˆåŠŸæˆ–è€…å¤±è´¥" class="headerlink" title="æ–­è¨€è¿”å›æˆåŠŸæˆ–è€…å¤±è´¥"></a>æ–­è¨€è¿”å›æˆåŠŸæˆ–è€…å¤±è´¥</h3><pre><code class="lang-cpp">TEST(ExplicitTest, Demo)&#123;    ADD_FAILURE() &lt;&lt; &quot;Sorry&quot;; // None Fatal Assertonï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚    FAIL(); // Fatal Assertionï¼Œä¸å¾€ä¸‹æ‰§è¡Œè¯¥æ¡ˆä¾‹ã€‚    SUCCEED();&#125;</code></pre><h3 id="æŠ›å‡ºå¼‚å¸¸çš„æ–­è¨€"><a href="#æŠ›å‡ºå¼‚å¸¸çš„æ–­è¨€" class="headerlink" title="æŠ›å‡ºå¼‚å¸¸çš„æ–­è¨€"></a>æŠ›å‡ºå¼‚å¸¸çš„æ–­è¨€</h3><pre><code class="lang-cpp">int Foo(int a, int b)&#123;    if (a == 0 || b == 0)    &#123;        throw &quot;don&#39;t do that&quot;;    &#125;    int c = a % b;    if (c == 0)        return b;    return Foo(b, c);&#125;TEST(FooTest, HandleZeroInput)&#123;    EXPECT_ANY_THROW(Foo(10, 0)); // Fooåº”å½“æŠ›å‡ºå¼‚å¸¸    EXPECT_THROW(Foo(0, 5), char*); // Fooåº”å½“æŠ›å‡ºå­—ç¬¦ä¸²ç±»å‹çš„å¼‚å¸¸    EXPECT_NO_THROW(Foo(1, 1)); // Fooä¸åº”è¯¥æŠ›å‡ºå¼‚å¸¸&#125;</code></pre><h3 id="æµ®ç‚¹æ•°æ–­è¨€"><a href="#æµ®ç‚¹æ•°æ–­è¨€" class="headerlink" title="æµ®ç‚¹æ•°æ–­è¨€"></a>æµ®ç‚¹æ•°æ–­è¨€</h3><pre><code class="lang-cpp">ASSERT_FLOAT_EQ(exp, act) // æ£€éªŒä¸¤ä¸ªæµ®ç‚¹æ•°æ˜¯å¦**å‡ ä¹**ç›¸ç­‰ASSERT_DOUBLE_EQ(exp, act) // åŒä¸Šï¼Œåªä¸è¿‡ç²¾åº¦æ›´é«˜ASSERT_NEAR(exp, act, abs_error) // expå’Œactä¹‹é—´çš„å·®å€¼ä¸ä¼šè¶…è¿‡abs_error</code></pre><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://www.cnblogs.com/coderzh/archive/2009/04/06/1426755.html">https://www.cnblogs.com/coderzh/archive/2009/04/06/1426755.html</a></p><p><a href="https://blog.csdn.net/zhizhengguan/article/details/110313265">https://blog.csdn.net/zhizhengguan/article/details/110313265</a></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>clion</tag>
      
      <tag>google test</tag>
      
      <tag>unit test</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç«èµ›æ‰“å¡ã€‘å¤§æ•´æ•°ç›¸ä¹˜ I</title>
    <link href="/2021/04/28/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E4%B8%A4%E6%95%B0%E7%9B%B8%E4%B9%98/"/>
    <url>/2021/04/28/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E4%B8%A4%E6%95%B0%E7%9B%B8%E4%B9%98/</url>
    
    <content type="html"><![CDATA[<p>ä¸¤ä¸ªå¤§æ•´æ•°ç›¸ä¹˜ï¼Œå¦‚ä½•åœ¨ä¸æŸå¤±ç²¾åº¦çš„å‰æä¸‹è®¡ç®—å¾—åˆ°æ­£ç¡®çš„ç»“æœï¼Ÿ<br><!--more---></p><h1 id="unsigned-long-long-æ•´æ•°ä¹‹é—´çš„ä¹˜æ³•"><a href="#unsigned-long-long-æ•´æ•°ä¹‹é—´çš„ä¹˜æ³•" class="headerlink" title="unsigned long long æ•´æ•°ä¹‹é—´çš„ä¹˜æ³•"></a><code>unsigned long long</code> æ•´æ•°ä¹‹é—´çš„ä¹˜æ³•</h1><h2 id="1-é—®é¢˜å¼•å…¥"><a href="#1-é—®é¢˜å¼•å…¥" class="headerlink" title="1. é—®é¢˜å¼•å…¥"></a>1. é—®é¢˜å¼•å…¥</h2><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨ <code>C++</code> è¯­è¨€ï¼Œåœ¨ 64 ä½ç³»ç»Ÿä¸Šï¼Œ<code>unsigned long long</code> ç±»å‹ï¼ˆæˆ–è€… <code>uint64_t</code> ç±»å‹ï¼‰çš„å˜é‡èƒ½å¤Ÿä¿å­˜çš„æ•°å€¼èŒƒå›´æ˜¯ $\left[0,2^{64}\right)$ã€‚ä»»ä½•å°äºè¯¥æ•°å€¼çš„æ•°å­—éƒ½èƒ½è¢«æ­£ç¡®å­˜å‚¨ã€‚</p><script type="math/tex; mode=display">2^{64}-1=18,446,744,073,709,551,615</script><p>è¿™ä¸ªåè¿›åˆ¶çš„æ•´æ•°è¶³è¶³æœ‰20ä½ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬æ˜¯ä¸éœ€è¦è€ƒè™‘æº¢å‡ºé—®é¢˜çš„ã€‚</p><p>ä½†æ˜¯å¦‚æœä¸¤ä¸ª<code>uint64_t</code>çš„å˜é‡è¦åšä¹˜æ³•ï¼Œå°±å¿…é¡»è€ƒè™‘æº¢å‡ºé—®é¢˜äº†ã€‚å› ä¸ºä¸¤ä¸ª64ä½æ•´æ•°ç›¸ä¹˜ï¼Œå…¶ç»“æœå¯èƒ½è¾¾åˆ°128ä½ï¼Œè¶…è¿‡äº†ä¸€ä¸ªå˜é‡èƒ½å­˜å‚¨çš„æ•°æ®çš„æé™å¤§å°ã€‚</p><p>ä¸¤ä¸ª<code>uint64_t</code>å˜é‡çš„ä¹˜æ³•è¯¥å¦‚ä½•æ­£ç¡®è®¡ç®—ï¼Ÿè€ƒè™‘æç«¯æƒ…å†µï¼Œä¸¤ä¸ª<code>uint64_t</code>æ•´æ•°æ‰€èƒ½è¡¨è¾¾çš„æœ€å¤§æ•°å­—<code>UINT_MAX</code>ç›¸ä¹˜ï¼š</p><script type="math/tex; mode=display">(2^{64}-1)\times (2^{64}-1)=2^{128}-2^{65}+1</script><p>è¿™é‡Œé¢æœ€å¤§çš„æ•°å­—æ˜¯$2^{128}$ï¼Œå› æ­¤æˆ‘ä»¬æœ€æç«¯æƒ…å†µä¸‹æœ‰128ä½çš„ä¿¡æ¯éœ€è¦ä¿å­˜ã€‚</p><h2 id="2-é—®é¢˜ç®€åŒ–"><a href="#2-é—®é¢˜ç®€åŒ–" class="headerlink" title="2. é—®é¢˜ç®€åŒ–"></a>2. é—®é¢˜ç®€åŒ–</h2><p>é¦–å…ˆè®©æˆ‘ä»¬<strong>ç®€åŒ–ä¸€ä¸‹é—®é¢˜</strong>ã€‚å‡è®¾æˆ‘ç°åœ¨åªèƒ½ç”¨ä¸€æ¬¾å¤è‘£ç”µè„‘ï¼Œå®ƒåªæ”¯æŒä¿å­˜å››ä½åè¿›åˆ¶æ•´æ•°çš„å˜é‡ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå˜é‡çš„ä¿å­˜èŒƒå›´ä¸º$[0,9999]$ã€‚å¦‚ä½•è®¡ç®—ä¸¤ä¸ªå››ä½æ•´æ•°ç›¸ä¹˜ï¼Ÿ</p><p>è¿˜è®°å¾—ä¹˜æ³•æ˜¯æ€ä¹ˆè®¡ç®—çš„å—ï¼Ÿæˆ‘ä»¬åº”è¯¥éƒ½å­¦ä¹ è¿‡å°å­¦æ•°å­¦ï¼Œé€šè¿‡å°†æ•°å­—ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦çœ‹ä½œè®¡ç®—å•å…ƒï¼Œç„¶ååˆ©ç”¨99ä¹˜æ³•è¡¨å°±èƒ½å¤Ÿå£ç®—å‡ºç»“æœäº†ã€‚</p><p><img src="/2021/04/28/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E4%B8%A4%E6%95%B0%E7%9B%B8%E4%B9%98/2021-04-29-08-44-58.png" alt></p><p>æˆ–è€…å¯ä»¥æ¯ä¸¤ä¸ªå­—ç¬¦çœ‹æˆè®¡ç®—çš„åŸºæœ¬å•å…ƒï¼Œè¿™æ ·å°±éœ€è¦è®¡ç®—ä¸¤ä½æ•°ä¹˜æ³•ã€‚</p><p><img src="/2021/04/28/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E4%B8%A4%E6%95%B0%E7%9B%B8%E4%B9%98/2021-04-29-08-50-09.png" alt></p><p>åŒæ ·å¯ä»¥è®¡ç®—å¾—åˆ°æ­£ç¡®ç»“æœã€‚å‡è®¾æ¯ä¸ªæ–¹æ¡†æ˜¯è®¡ç®—æœºçš„ä¸€ä¸ªå˜é‡ï¼Œåä¸€ç§è®¡ç®—æ–¹å¼å¯ä»¥ä¿è¯æ¯ä¸ªå˜é‡ä¸­ä¿å­˜çš„å…ƒç´ å¤§å°ä¸è¶…è¿‡è®¡ç®—æœºçš„ä¿å­˜èƒ½åŠ›ï¼ˆå‡è®¾è®¡ç®—æœºä¿å­˜èƒ½åŠ›ä¸º2ä½ï¼‰ã€‚</p><p>å›åˆ°é¢˜ç›®æœ¬èº«ã€‚è¯¥è¿ç®—çš„ç»“æœè¾¾åˆ°7ä½ï¼Œè¶…è¿‡äº†æˆ‘ä»¬è®¡ç®—æœºé™åˆ¶çš„4ä½ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªå˜é‡ä¿å­˜è¯¥ç»“æœï¼š<code>lo</code>ä¿å­˜ç»“æœçš„ä½å››ä½ï¼Œ<code>hi</code>ä¿å­˜ç»“æœçš„é«˜å››ä½ã€‚</p><p>å¦å¤–æˆ‘ä»¬ä½¿ç”¨å››ä¸ªå˜é‡å°†ä¸¤ä¸ªä¹˜æ•°æ‹†åˆ†æˆå‰åä¸¤ä¸ªéƒ¨åˆ†ï¼Œ<code>a</code>ä¿å­˜ç¬¬ä¸€ä¸ªæ“ä½œæ•°çš„é«˜2ä½ï¼Œ<code>b</code>ä¿å­˜ç¬¬ä¸€ä¸ªæ“ä½œæ•°çš„ä½2ä½,<code>c</code>ä¿å­˜ç¬¬äºŒä¸ªæ“ä½œæ•°çš„é«˜2ä½ï¼Œ<code>d</code>ä¿å­˜ç¬¬äºŒä¸ªæ“ä½œæ•°çš„ä½2ä½ã€‚</p><p>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿå› ä¸ºè®¡ç®—æœºçš„å­˜å‚¨èƒ½åŠ›ä¸º4ä½ï¼Œä¸¤ä¸ªå››ä½æ•°å­—ç›¸ä¹˜ï¼Œç»“æœæœ€å¤šèƒ½è¾¾åˆ°å…«ä½ï¼Œæ‰€ä»¥æˆ‘ä»¬è‚¯å®šä¸èƒ½å®¹å¿ä¸¤ä¸ªå››ä½æ•°å­—ç›¸ä¹˜ï¼›ä½†æ˜¯ä¸¤ä¸ªä¸¤ä½æ•°å­—ç›¸ä¹˜ï¼Œç»“æœæœ€å¤šè¾¾åˆ°å››ä½ï¼Œæ˜¯å¯ä»¥è¢«å½“å‰çš„è®¡ç®—æœºæ‰€å­˜å‚¨çš„ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠå››ä½æ•°å­—æ‹†åˆ†æˆå‰åä¸¤ä¸ªéƒ¨åˆ†ã€‚</p><p>æŠ½è±¡ä¸€ä¸‹è®¡ç®—è¿‡ç¨‹ï¼Œä»¥ä¸‹ä¸è€ƒè™‘è¿›ä½ã€‚</p><p><img src="/2021/04/28/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E4%B8%A4%E6%95%B0%E7%9B%B8%E4%B9%98/2021-04-29-09-07-00.png" alt></p><p>ç¬¬ä¸€æ­¥ï¼Œè®¡ç®—bä¸dçš„ä¹˜ç§¯ï¼Œå¾—åˆ°ç»“æœ<code>bd</code>å’Œè¿›ä½k_1ï¼š</p><p><img src="/2021/04/28/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E4%B8%A4%E6%95%B0%E7%9B%B8%E4%B9%98/è®¡ç®—bä¸dçš„ä¹˜ç§¯.png" alt></p><p>ç¬¬äºŒæ­¥ï¼Œè®¡ç®—aä¸dçš„ä¹˜ç§¯ï¼Œå¹¶ä¸”åŠ ä¸Šbdçš„è¿›ä½k_1ï¼Œå¾—åˆ°ç»“æœadå’Œè¿›ä½k_2ï¼Œæ³¨æ„è¿™ä¸ªk_2æœ€ç»ˆä¼šä¸acæ±‚å’Œï¼š</p><p><img src="/2021/04/28/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E4%B8%A4%E6%95%B0%E7%9B%B8%E4%B9%98/è®¡ç®—aä¸dçš„ä¹˜ç§¯.png" alt></p><p>ç¬¬ä¸‰æ­¥ï¼Œè®¡ç®—bä¸cçš„ä¹˜ç§¯ï¼Œå¾—åˆ°ç»“æœbcå’Œè¿›ä½k_3ï¼š</p><p><img src="/2021/04/28/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E4%B8%A4%E6%95%B0%E7%9B%B8%E4%B9%98/è®¡ç®—bä¸cçš„ä¹˜ç§¯.png" alt></p><p>ç¬¬å››æ­¥ï¼Œè®¡ç®—aä¸cçš„ä¹˜ç§¯ï¼Œå¹¶ä¸”åŠ ä¸Šbcçš„è¿›ä½k_3ï¼Œå¾—åˆ°ç»“æœacå’Œè¿›ä½k_4ï¼Œæ³¨æ„è¿™ä¸ªk_4æœ€ç»ˆä¼šæˆä¸ºé«˜ä½hiçš„æœ€å¤§çš„éƒ¨åˆ†ï¼Œå› æ­¤acå¾—åˆ°çš„k_4æ²¡å¿…è¦å’Œacåˆ†ç¦»å¼€ï¼š</p><p><img src="/2021/04/28/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E4%B8%A4%E6%95%B0%E7%9B%B8%E4%B9%98/è®¡ç®—aä¸cçš„ä¹˜ç§¯.png" alt></p><p>ç¬¬äº”æ­¥ï¼Œä½ä½ç»“æœè®¡ç®—ï¼Œé¦–å…ˆå°†adå’ŒbcåŠ èµ·æ¥ï¼Œå¾—åˆ°ad+bcä»¥åŠå¯èƒ½å­˜åœ¨çš„è¿›ä½k_5ï¼›ç„¶åå°†ad+bcå‘å·¦ç§»ä½ä¸¤æ ¼ï¼Œå†åŠ ä¸Šbdï¼Œå°±æ˜¯ä½ä½ç»“æœloã€‚</p><p><img src="/2021/04/28/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E4%B8%A4%E6%95%B0%E7%9B%B8%E4%B9%98/ä½ä½ç»“æœè®¡ç®—.png" alt></p><p>ç¬¬å…­æ­¥ï¼Œé«˜ä½ç»“æœè®¡ç®—ï¼Œå°†acå’Œè¿›ä½k_5åŠ èµ·æ¥ï¼Œæ³¨æ„æ­¤æ—¶çš„acåŒ…å«äº†è¿›ä½k_4ï¼Œå¹¶æ²¡æœ‰åˆ†ç¦»å‡ºå»ã€‚æˆ‘ä»¬è¿˜éœ€è¦åŠ ä¸Šè®¡ç®—adå¾—åˆ°çš„k_2ï¼Œå› æ­¤hi=ac+k_2+k_5ã€‚</p><p><img src="/2021/04/28/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E4%B8%A4%E6%95%B0%E7%9B%B8%E4%B9%98/é«˜ä½ç»“æœè®¡ç®—.png" alt></p><h2 id="3-ç¤ºä¾‹"><a href="#3-ç¤ºä¾‹" class="headerlink" title="3. ç¤ºä¾‹"></a>3. ç¤ºä¾‹</h2><p>ä¸¾ä¸€ä¸ªå…·ä½“ç‚¹çš„ä¾‹å­ï¼šå¦‚ä½•åˆ©ç”¨è¯¥ç”µè„‘æ­£ç¡®è®¡ç®—<code>1213*1214</code>ï¼Ÿ</p><script type="math/tex; mode=display">1213\times 1214=1,472,582</script><pre><code>a = 12b = 13c = 12d = 14</code></pre><ol><li>è®¡ç®—bä¸dçš„ä¹˜ç§¯ï¼Œå¾—åˆ°ç»“æœ<code>bd</code>å’Œè¿›ä½k_1ï¼š<br>```<br>b <em> d = 13 </em> 14 = 182</li></ol><hr><p>k_1 = 1<br>bd = 82</p><pre><code>2. è®¡ç®—aä¸dçš„ä¹˜ç§¯ï¼Œå¹¶ä¸”åŠ ä¸Šbdçš„è¿›ä½k_1ï¼Œå¾—åˆ°ç»“æœadå’Œè¿›ä½k_2</code></pre><p>a <em> d + k_1 = 12 </em> 14 + 1 = 169<br>k_2 = 1<br>ad = 69</p><pre><code>3. è®¡ç®—bä¸cçš„ä¹˜ç§¯ï¼Œå¾—åˆ°ç»“æœbcå’Œè¿›ä½k_3</code></pre><p>b <em> c = 13 </em> 12 = 156<br>k_3 = 1<br>bc = 56</p><pre><code>4. è®¡ç®—aä¸cçš„ä¹˜ç§¯ï¼Œå¹¶ä¸”åŠ ä¸Šbcçš„è¿›ä½k_3ï¼Œå¾—åˆ°ç»“æœacã€‚æ­¤æ—¶ä¸ç”¨åˆ†ç¦»è¿›ä½ï¼Œå› æ­¤æ²¡æœ‰k_4ã€‚</code></pre><p>a <em> c + k_3 = 12 </em> 12 + 1 = 145<br>ac = 145</p><pre><code>5. ä½ä½ç»“æœè®¡ç®—ï¼Œé¦–å…ˆå°†adå’ŒbcåŠ èµ·æ¥ï¼Œå¾—åˆ°ad+bcä»¥åŠå¯èƒ½å­˜åœ¨çš„è¿›ä½k_5ï¼›ç„¶åå°†ad+bcå‘å·¦ç§»ä½ä¸¤æ ¼ï¼Œå†åŠ ä¸Šbdï¼Œå°±æ˜¯ä½ä½ç»“æœlo</code></pre><p>ad + bc = 125<br>k_5 = 1<br>adbc = 25<br>lo = adbc &lt;&lt; 2 + bd = 2500 + 82 = 2582</p><pre><code>6. é«˜ä½ç»“æœè®¡ç®—ï¼Œå°†acå’Œè¿›ä½k_5åŠ èµ·æ¥ï¼Œæ³¨æ„æ­¤æ—¶çš„acåŒ…å«äº†è¿›ä½k_4ï¼Œå¹¶æ²¡æœ‰åˆ†ç¦»å‡ºå»ã€‚æˆ‘ä»¬è¿˜éœ€è¦åŠ ä¸Šè®¡ç®—adå¾—åˆ°çš„k_2ï¼Œå› æ­¤hi=ac+k_2+k_5</code></pre><p>hi = ac + k_2 + k_5 = 145 + 1 + 1 = 147</p><pre><code>æœ€ç»ˆç»“æœçš„é«˜ä½éƒ¨åˆ†ä¸º147ï¼Œä½ä½éƒ¨åˆ†ä¸º2582ï¼Œä¸ç­”æ¡ˆ1472582ç›¸åŒã€‚## è¿ç§»åˆ°64ä½æ•´æ•°ç›¸ä¹˜ä»¥ä¸Šæˆ‘ä»¬è®¨è®ºçš„éƒ½æ˜¯å››ä½æ•´æ•°ç›¸ä¹˜çš„é—®é¢˜ï¼Œå…¶å®64ä½äºŒè¿›åˆ¶æ•°ç›¸ä¹˜ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ã€‚é¦–å…ˆæˆ‘ä»¬å°†ä¸¤ä¸ª64ä½ä¹˜æ•°OP1å’ŒOP2å„è‡ªåˆ†æˆä¸¤åŠ32ä½æ•´æ•°ï¼Œä¹Ÿå°±æ˜¯a/b/c/dï¼Œç„¶åæŒ‰ç…§ä¸Šè¿°ç®—æ³•è®¡ç®—ï¼Œå³å¯å¾—åˆ°ç»“æœçš„é«˜64ä½å’Œä½64ä½ã€‚ç®—æ³•å¦‚ä¸‹ï¼š```cppvoid mul_64_64_to_128(uint64_t op1, uint64_t op2, uint64_t *hi, uint64_t *lo) &#123;    // å–abcd    uint64_t a, b, c, d;    b = (op1 &amp; 0xFFFFFFFF);    a = (op1 &gt;&gt; 32);    d = (op2 &amp; 0xFFFFFFFF);    c = (op2 &gt;&gt; 32);    // bd    uint64_t k_1 = b * d;    uint64_t bd = (k_1 &amp; 0xFFFFFFFF);    k_1 &gt;&gt;= 32;    // ad    uint64_t k_2 = a * d + k_1;    uint64_t ad = (k_2 &amp; 0xFFFFFFFF);    k_2 &gt;&gt;= 32;    // bc    uint64_t k_3 = b * c;    uint64_t bc = (k_3 &amp; 0xFFFFFFFF);    k_3 &gt;&gt;= 32;    // ac    uint64_t ac = a * c + k_3;    // lo    uint64_t k_5 = ad + bc;    uint64_t ad_bc = (k_5 &amp; 0xFFFFFFFF);    k_5 &gt;&gt;= 32;    *lo = (ad_bc &lt;&lt; 32) + bd;    // hi    *hi = ac + k_2 + k_5;&#125;</code></pre><p>éªŒè¯ä¸€ä¸‹ç»“æœï¼š</p><pre><code class="lang-cpp">int main() &#123;    uint64_t op1 = 1e12;    uint64_t op2 = 1e12;    uint64_t hi = 0ULL, lo = 0ULL;    mul_64_64_to_128(op1, op2, &amp;hi, &amp;lo);    cout &lt;&lt; hi &lt;&lt; &quot;\n&quot; &lt;&lt; lo &lt;&lt; endl;    return 0;&#125;&gt;&gt;&gt;542102003764205206896640Process finished with exit code 0</code></pre><p>ä¹ä¸€çœ‹ç»“æœï¼Œ<code>1e12*1e12</code>ç»“æœæ€ä¹ˆä¸æ˜¯<code>1e24</code>å‘¢ï¼Ÿå…¶å®è¿™æ˜¯ç”±äºç»“æœæ˜¯åè¿›åˆ¶å¯¼è‡´ä¸ç›´è§‚ï¼Œå®é™…ä¸Šæˆ‘ä»¬çš„ç»“æœæ˜¯æ­£ç¡®çš„ã€‚æˆ‘ä»¬æ¯”è¾ƒä¸‹äºŒè¿›åˆ¶å°±å¯ä»¥äº†ã€‚</p><p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªå‡½æ•°<code>ulld_to_b</code>ï¼Œå°†<code>uint64_t</code>å˜é‡è½¬æ¢ä¸º64ä½çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼š</p><pre><code class="lang-cpp">string ulld_to_b(uint64_t i) &#123;    return bitset&lt;64&gt;(i).to_string();&#125;</code></pre><p>ç„¶åæŸ¥è¯¢<code>1e24</code>çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸ºï¼š</p><pre><code>00000000000000000000000000000000000000000000000011010011110000100001101111001110110011001110110110100001000000000000000000000000</code></pre><p>è¯¥æ•°å€¼æ˜¯æˆ‘åœ¨<a href="https://www.sojson.com/hexconvert.html">è¿™ä¸ªç½‘ç«™</a>ä¸ŠæŸ¥è¯¢çš„ã€‚</p><p>ç„¶åç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼š</p><pre><code class="lang-cpp">TEST(TestCase, test1) &#123;    uint64_t op1 = 1e12;    uint64_t op2 = 1e12;    uint64_t hi = 0ULL, lo = 0ULL;    mul_64_64_to_128(op1, op2, &amp;hi, &amp;lo);    string res = &quot;&quot;;    res = ulld_to_b(hi) + ulld_to_b(lo);    cout &lt;&lt; res &lt;&lt; endl;    string ground_truth = &quot;00000000000000000000000000000000000000000000000011010011110000100001101111001110110011001110110110100001000000000000000000000000&quot;;    EXPECT_STREQ(ground_truth.c_str(), res.c_str());&#125;int main(int argc, char** argv) &#123;    testing::InitGoogleTest(&amp;argc, argv);    return RUN_ALL_TESTS();&#125;</code></pre><p>æ²¡é—®é¢˜ï¼Œé€šè¿‡äº†ã€‚å½“ç„¶ï¼Œä»…é€šè¿‡ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ä¸ç®—è¯æ˜ç¨‹åºçš„æ­£ç¡®æ€§ï¼Œå‹¤åŠ³çš„ä½ å¯ä»¥å¤šç”¨å‡ ä¸ªæµ‹è¯•ç”¨ä¾‹è¯•è¯•ã€‚</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://www.codeproject.com/Tips/618570/UInt-Multiplication-Squaring">https://www.codeproject.com/Tips/618570/UInt-Multiplication-Squaring</a></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>algorithm</tag>
      
      <tag>leetcode</tag>
      
      <tag>searching</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘Dockerç»¼åˆå®è·µ</title>
    <link href="/2021/04/24/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Docker%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/"/>
    <url>/2021/04/24/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Docker%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/</url>
    
    <content type="html"><![CDATA[<p>Datawhale Dockerå­¦ä¹ ç¬”è®°ç¬¬å…­ç¯‡<br><!--more---></p><p>åœ¨æ²¡æœ‰å­¦ä¹ dockerä¹‹å‰ï¼Œéƒ¨ç½²é¡¹ç›®éƒ½æ˜¯ç›´æ¥å¯åŠ¨æ–‡ä»¶ï¼Œæ¯”å¦‚javaé¡¹ç›®å°±æ˜¯java â€“jar xxxx.jarçš„æ–¹å¼ï¼Œpythoné¡¹ç›®å°±æ˜¯python xxxx.pyã€‚å¦‚æœé‡‡ç”¨dockerçš„æ–¹å¼å»éƒ¨ç½²è¿™äº›é¡¹ç›®ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼Œä»¥jaråŒ…é¡¹ç›®ä¸ºä¾‹</p><h1 id="æ–¹å¼ä¸€ã€æŒ‚è½½éƒ¨ç½²"><a href="#æ–¹å¼ä¸€ã€æŒ‚è½½éƒ¨ç½²" class="headerlink" title="æ–¹å¼ä¸€ã€æŒ‚è½½éƒ¨ç½²"></a>æ–¹å¼ä¸€ã€æŒ‚è½½éƒ¨ç½²</h1><p>è¿™ç§æ–¹å¼ç±»ä¼¼äºå¸¸è§„éƒ¨ç½²ï¼Œé€šè¿‡æ•°æ®å·çš„æ–¹å¼å°†å®¿ä¸»æœºçš„jaråŒ…æŒ‚è½½åˆ°å®¹å™¨ä¸­ï¼Œç„¶åæ‰§è¡ŒjaråŒ…çš„jdké€‰æ‹©å®¹å™¨ä¸­çš„è€Œéé‡‡ç”¨æœ¬åœ°çš„ã€‚</p><ol><li>å°†jaråŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„æŒ‡å®šç›®å½•ï¼Œæ¯”å¦‚/root/docker/jarã€‚</li></ol><p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gp9yobtp2tj30o007njt5.jpg" alt></p><ol><li>é€šè¿‡docker pull openjdk:8å‘½ä»¤è·å–é•œåƒ</li></ol><p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gp9yord00xj30o006bju3.jpg" alt></p><ol><li>ç¼–å†™docker-compose.ymlæ–‡ä»¶</li></ol><pre><code class="lang-yaml">version:&#39;3.0&#39;services:  java:    image: docker.io/openjdk    restart:always    container_name: myopenjdk    ports:      - 8080:8001    volumes:      - /root/docker/jar/xxxx.jar:/root:z      - /etc/localtime:/etc/localtime    environment:      - TZ=&quot;Asia/Shanghai&quot;    entrypoint: java -jar /root/xxxx.jar    mynetwork:      ipv4_address: 192.168.1.13networks:  mynetwork:   ipam:     config:      - subnet: 192.168.1.0/24</code></pre><p>å‚æ•°è§£é‡Šï¼š</p><ul><li><p>build æŒ‡å®šdockerfileæ‰€åœ¨æ–‡ä»¶å¤¹çš„è·¯å¾„ contextæŒ‡å®šdockerfileæ–‡ä»¶æ‰€åœ¨è·¯å¾„ dockerfileæŒ‡å®šæ–‡ä»¶çš„å…·ä½“åç§°</p></li><li><p>container_name æŒ‡å®šå®¹å™¨åç§°</p></li><li><p>volumes æŒ‚è½½è·¯å¾„  zæ˜¯ç”¨æ¥è®¾ç½®selinuxï¼Œæˆ–è€…ç›´æ¥åœ¨linuxé€šè¿‡å‘½ä»¤ä¸´æ—¶å…³é—­æˆ–è€…æ°¸ä¹…å…³é—­</p></li><li><p>ports æš´éœ²ç«¯å£ä¿¡æ¯</p></li><li><p>networksæ˜¯ç”¨æ¥ç»™å®¹å™¨è®¾ç½®å›ºå®šçš„ip</p></li></ul><ol><li>æ‰§è¡Œå‘½ä»¤docker-compose up â€“då¯åŠ¨jaråŒ…, å¯ä»¥é€šè¿‡docker psæŸ¥çœ‹å®¹å™¨æ˜¯å¦åœ¨è¿è¡Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯é»˜è®¤æŸ¥çœ‹æ‰€æœ‰è¿è¡Œä¸­çš„å®¹å™¨ï¼Œå¦‚æœæƒ³æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼Œéœ€è¦æ·»åŠ å‚æ•°-a</li></ol><p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gp9yp7mo2wj30o0057aay.jpg" alt></p><ol><li><p>æ³¨æ„å¦‚æœå®¹å™¨å¯åŠ¨å¤±è´¥æˆ–è€…çŠ¶æ€å¼‚å¸¸ï¼Œå¯ä»¥é€šè¿‡docker logsæŸ¥çœ‹æ—¥å¿—</p></li><li><p>é€šè¿‡docker inspect myopenjdkæŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°å®¹å™¨ipå·²ç»è®¾ç½®æˆåŠŸ</p></li></ol><p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gp9ypl8wgdj30o009wabq.jpg" alt></p><ol><li>ç„¶ååœ¨è™šæ‹Ÿæœºä¸­æ‰“å¼€æµè§ˆå™¨è¾“å…¥jaråŒ…é¡¹ç›®çš„è®¿é—®åœ°å€ï¼Œå°±å¯ä»¥çœ‹åˆ°è¿è¡Œçš„é¡¹ç›®ï¼Œéœ€è¦æ³¨æ„è®¿é—®ç«¯å£æ˜¯æ˜ å°„è¿‡çš„ç«¯å£è€Œéé¡¹ç›®å®é™…ç«¯å£</li></ol><p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gp9yq1vynoj30o00dytaj.jpg" alt></p><h2 id="æ–¹å¼äºŒã€æ„å»ºé•œåƒéƒ¨ç½²"><a href="#æ–¹å¼äºŒã€æ„å»ºé•œåƒéƒ¨ç½²" class="headerlink" title="æ–¹å¼äºŒã€æ„å»ºé•œåƒéƒ¨ç½²"></a>æ–¹å¼äºŒã€æ„å»ºé•œåƒéƒ¨ç½²</h2><ol><li><p>å°†jaråŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„æŒ‡å®šç›®å½•ï¼Œæ¯”å¦‚/root/docker/jarã€‚</p></li><li><p>åœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºDockerfileæ–‡ä»¶ï¼Œé€šè¿‡vimç­‰ç¼–è¾‘å·¥å…·åœ¨Dockerfileä¸­ç¼–è¾‘ä»¥ä¸‹å†…å®¹</p></li></ol><pre><code class="lang-dockerfile">FROM java:8MAINTAINER YHFLABEL description=â€learn dockerâ€ADD xxx.jarEXPOSE 8001ENTRYPOINT [â€œjavaâ€,â€-jarâ€,â€xxxx.jarâ€]</code></pre><p>å‚æ•°è§£é‡Šï¼š</p><ul><li><p>FROM java:8 æŒ‡å®šæ‰€åˆ›å»ºé•œåƒçš„åŸºç¡€é•œåƒ</p></li><li><p>MAINTAINER yhf æŒ‡å®šä½œè€…ä¸ºyhf</p></li><li><p>LABEL ä¸ºç”Ÿæˆçš„é•œåƒæ·»åŠ å…ƒæ•°æ®æ ‡ç­¾ä¿¡æ¯</p></li><li><p>ADD xxxx.jar æ·»åŠ å†…å®¹åˆ°é•œåƒ</p></li><li><p>EXPOSE 8080 å£°æ˜é•œåƒå†…æœåŠ¡ç›‘å¬çš„ç«¯å£</p></li><li><p>ENTRYPOINT æŒ‡å®šé•œåƒçš„é»˜è®¤å…¥å£å‘½ä»¤ï¼Œæ”¯æŒä¸¤ç§æ ¼å¼ENTRYPOINT[â€œjavaâ€,â€-jarâ€,â€xxxx.jarâ€]ï¼›ENTRYPOINT java â€“jar xxxx.jarã€‚æ³¨æ„æ¯ä¸ªdokcerfileä¸­åªèƒ½æœ‰ä¸€ä¸ªENTRYPOINTï¼Œå¦‚æœæŒ‡å®šå¤šä¸ªåªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚</p></li></ul><ol><li><p>Dockerfileæ„å»ºå®Œæˆä»¥åå¯ä»¥é€šè¿‡å‘½ä»¤docker buildæ„å»ºé•œåƒï¼Œç„¶åå†è¿è¡Œå®¹å™¨ï¼Œè¿™é‡Œå’±ä»¬ç”¨docker-composeå‘½ä»¤ç›´æ¥ç¼–æ’æ„å»ºé•œåƒå’Œè¿è¡Œå®¹å™¨ã€‚</p></li><li><p>ç¼–å†™docker-compose.ymlæ–‡ä»¶</p><p>```yaml<br>version: â€˜3â€™</p></li></ol><p>services:</p><p>  java_2:<br>    restart: always<br>    image: yhfopenjdk:latest<br>    container_name: myopenjdk<br>    ports:</p><pre><code>  - 8080:8001volumes:  - /etc/localtime:/etc/localtimeenvironment:  - TZ=&quot;Asia/Shanghai&quot;entrypoint: java -jar /root/datawhale-admin-1.0.0.jarnetworks:  mynetwork:     ipv4_address: 192.168.1.13</code></pre><p>networks:<br>  mynetwork:<br>   ipam:<br>     config:</p><pre><code>  - subnet: 192.168.1.0/24</code></pre><p> ```</p><p>å‚æ•°è§£é‡ŠåŒæ–¹å¼ä¸€ï¼š</p><ol><li>æ‰§è¡Œdocker-compose up â€“dç›´æ¥å¯åŠ¨åŸºäºæ–‡ä»¶æ„å»ºçš„è‡ªå®šä¹‰é•œåƒï¼Œå¦‚æœé•œåƒä¸å­˜åœ¨ä¼šè‡ªåŠ¨æ„å»ºï¼Œå¦‚æœå·²å­˜åœ¨é‚£ä¹ˆç›´æ¥å¯åŠ¨ã€‚å¦‚æœæƒ³é‡æ–°æ„å»ºé•œåƒï¼Œåˆ™æ‰§è¡Œdocker-compose buildã€‚å¦‚æœæƒ³åœ¨æ‰§è¡Œcomposeæ–‡ä»¶çš„æ—¶å€™é‡æ„ï¼Œåˆ™æ‰§è¡Œdocker-compose up â€“d â€“buildã€‚</li></ol><p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gp9yqi1lv0j30o007ign6.jpg" alt></p><p>æ­¤ä½¿é€šè¿‡dockerfileæ–‡ä»¶æ„å»ºçš„é•œåƒå·²ç»åˆ›å»º</p><p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gp9yqxa7t1j30o005qdi5.jpg" alt></p><p>é€šè¿‡é•œåƒè¿è¡Œçš„å®¹å™¨å·²ç»æ­£å¸¸å¯åŠ¨ï¼Œå¯ä»¥é€šè¿‡docker psæŸ¥çœ‹å®¹å™¨æ˜¯å¦åœ¨è¿è¡Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯é»˜è®¤æŸ¥çœ‹æ‰€æœ‰è¿è¡Œä¸­çš„å®¹å™¨ï¼Œå¦‚æœæƒ³æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼Œéœ€è¦æ·»åŠ å‚æ•°-a</p><p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gp9yra1jg1j30o0013q33.jpg" alt></p><ol><li>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥è®¿é—®è·¯å¾„å¯ä»¥çœ‹åˆ°é¡¹ç›®å·²ç»æ­£å¸¸è¿è¡Œ</li></ol><p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gp9yrmnnzzj30o00d975v.jpg" alt></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘Docker Compose</title>
    <link href="/2021/04/21/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Docker-Compose/"/>
    <url>/2021/04/21/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Docker-Compose/</url>
    
    <content type="html"><![CDATA[<p>Datawhale Dockerå­¦ä¹ ç¬”è®°ç¬¬äº”ç¯‡<br><!--more---></p><h1 id="ä»€ä¹ˆæ˜¯docker-compose"><a href="#ä»€ä¹ˆæ˜¯docker-compose" class="headerlink" title="ä»€ä¹ˆæ˜¯docker compose"></a>ä»€ä¹ˆæ˜¯docker compose</h1><p>è¦å®ç°ä¸€ä¸ª Web é¡¹ç›®ï¼Œé™¤äº† Web æœåŠ¡å®¹å™¨æœ¬èº«ï¼Œå¾€å¾€è¿˜éœ€è¦å†åŠ ä¸Šåç«¯çš„æ•°æ®åº“æœåŠ¡å®¹å™¨ï¼Œç”šè‡³è¿˜åŒ…æ‹¬è´Ÿè½½å‡è¡¡å®¹å™¨ç­‰ï¼Œè¿™äº›éœ€è¦å¤šä¸ªå®¹å™¨ç›¸äº’é…åˆæ¥å®Œæˆã€‚</p><p>Docker Compose å…è®¸ç”¨æˆ·é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„ docker-compose.yml æ¨¡æ¿æ–‡ä»¶ï¼ˆYAML æ ¼å¼ï¼‰æ¥å®šä¹‰ä¸€ç»„ç›¸å…³è”çš„åº”ç”¨å®¹å™¨ä¸ºä¸€ä¸ªé¡¹ç›®ï¼ˆprojectï¼‰ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ª docker-compose.yml ç¤ºä¾‹ï¼š</p><p><img src="/2021/04/21/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Docker-Compose/2021-04-21-23-54-09.png" alt></p><p>é‡Œé¢å¤šäº†imageã€portsã€networksç­‰æ ‡ç­¾ã€‚</p><h1 id="å¦‚ä½•ä½¿ç”¨docker-compose"><a href="#å¦‚ä½•ä½¿ç”¨docker-compose" class="headerlink" title="å¦‚ä½•ä½¿ç”¨docker compose"></a>å¦‚ä½•ä½¿ç”¨docker compose</h1><p>åœ¨Compose ä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼š</p><p><strong>æœåŠ¡ (service)</strong>ï¼šä¸€ä¸ªåº”ç”¨çš„å®¹å™¨ï¼Œå®é™…ä¸Šå¯ä»¥åŒ…æ‹¬è‹¥å¹²è¿è¡Œç›¸åŒé•œåƒçš„å®¹å™¨å®ä¾‹ã€‚</p><p><strong>é¡¹ç›® (project)</strong>ï¼šç”±ä¸€ç»„å…³è”çš„åº”ç”¨å®¹å™¨ç»„æˆçš„ä¸€ä¸ªå®Œæ•´ä¸šåŠ¡å•å…ƒï¼Œåœ¨ docker-compose.yml æ–‡ä»¶ä¸­å®šä¹‰ã€‚</p><p>Composeçš„é»˜è®¤ç®¡ç†å¯¹è±¡æ˜¯<strong>é¡¹ç›®</strong>ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡docker-compose.ymlå®šä¹‰çš„ä¸€ç»„æœåŠ¡é›†åˆï¼Œé€šè¿‡ä¸€äº›å‘½ä»¤æ¥å¯¹é¡¹ç›®ä¸­çš„ä¸€ç»„å®¹å™¨è¿›è¡Œä¾¿æ·åœ°ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªçœŸå®çš„åœºæ™¯ï¼Œåœ¨è¯¥åœºæ™¯ä¸‹æˆ‘ä»¬æ˜¯é€šè¿‡Pythonæ¥å†™ä¸€ä¸ªèƒ½å¤Ÿè®°å½•é¡µé¢è®¿é—®æ¬¡æ•°çš„ web ç½‘ç«™ã€‚</p><h2 id="web-åº”ç”¨ç¤ºä¾‹"><a href="#web-åº”ç”¨ç¤ºä¾‹" class="headerlink" title="web åº”ç”¨ç¤ºä¾‹"></a>web åº”ç”¨ç¤ºä¾‹</h2><p><strong>app.py</strong></p><pre><code class="lang-py">from flask import Flaskfrom redis import Redisimport osimport socketapp = Flask(__name__)redis = Redis(host=os.environ.get(&#39;REDIS_HOST&#39;, &#39;127.0.0.1&#39;), port=6379)@app.route(&#39;/&#39;)def hello():    redis.incr(&#39;hits&#39;)    return &#39;Hello Container World! I have been seen %s times and my hostname is %s.\n&#39; % (redis.get(&#39;hits&#39;),socket.gethostname())if __name__ == &quot;__main__&quot;:    app.run(host=&quot;0.0.0.0&quot;, port=5000, debug=True)</code></pre><p><strong>Dockerfile</strong></p><pre><code class="lang-docker">FROM python:2.7COPY . /appWORKDIR /appRUN pip install flask redisEXPOSE 5000CMD [ &quot;python&quot;, &quot;app.py&quot; ]</code></pre><p><strong>docker-compose.yml</strong></p><pre><code class="lang-yaml">version: &quot;3&quot;services:  redis:    image: redis  web:    build:      context: .      dockerfile: Dockerfile    ports:      - &quot;5000:5000&quot;    environment:      REDIS_HOST: redis</code></pre><p><strong>è¿è¡Œ compose é¡¹ç›®</strong></p><p><code>$ docker-compose up -d</code></p><p>æ­¤æ—¶è®¿é—®æœ¬åœ° 5000 ç«¯å£<a href="http://localhost:5000ï¼Œæ¯æ¬¡åˆ·æ–°é¡µé¢ï¼Œè®¡æ•°å°±ä¼šåŠ ">http://localhost:5000ï¼Œæ¯æ¬¡åˆ·æ–°é¡µé¢ï¼Œè®¡æ•°å°±ä¼šåŠ </a> 1ã€‚</p><h1 id="docker-composeåŸºæœ¬ä½¿ç”¨"><a href="#docker-composeåŸºæœ¬ä½¿ç”¨" class="headerlink" title="docker composeåŸºæœ¬ä½¿ç”¨"></a>docker composeåŸºæœ¬ä½¿ç”¨</h1><h2 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h2><p>åœ¨åˆ›å»ºå¥½docker-compose.ymlæ–‡ä»¶åï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢è¿™ä¸ªå‘½ä»¤å°†æ–‡ä»¶ä¸­å®šä¹‰çš„å®¹å™¨éƒ½å¯åŠ¨èµ·æ¥ï¼Œåœ¨docker composeä¸­æˆ‘ä»¬æ›´ä¹ æƒ¯äºå°†æ¯ä¸€ä¸ªå®¹å™¨å«åšserviceã€‚</p><pre><code>docker-compose up</code></pre><p>å‘½ä»¤åä¼šè‡ªåŠ¨æ¥ä¸€ä¸ªé»˜è®¤å€¼-f docker-compose.ymlï¼Œä¹Ÿå°±æ˜¯é»˜è®¤æ˜¯ä½¿ç”¨docker-compose.ymlæ–‡ä»¶çš„ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™æ–‡ä»¶èµ·åä¸ºdocke-test.ymlï¼Œè¿™æ ·åœ¨ä½¿ç”¨æ—¶æŒ‡å®šæ–‡ä»¶åï¼Œä½†æ˜¯ä¸ºäº†ç¬¦åˆè§„èŒƒï¼Œè¿˜æ˜¯ç»Ÿä¸€ä¸ºdocker-compose.ymlã€‚</p><pre><code>docker-compose up -f docer-test.yml</code></pre><p>ä½†æ˜¯ç›´æ¥é€šè¿‡è¿™ç§æ–¹å¼çš„è¯ä¼šç›´æ¥å°†å¯åŠ¨æ—¶çš„è¾“å‡ºæ‰“å°åˆ°ç»ˆç«¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å¸¸ä¼šåŠ ä¸Š-då‚æ•°ã€‚</p><pre><code>docker-compose up -d</code></pre><h2 id="æŸ¥çœ‹æœåŠ¡çŠ¶æ€"><a href="#æŸ¥çœ‹æœåŠ¡çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹æœåŠ¡çŠ¶æ€"></a>æŸ¥çœ‹æœåŠ¡çŠ¶æ€</h2><p>æ¥ä¸‹æ¥å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬åˆ›å»ºçš„serviceçŠ¶æ€</p><pre><code>docker-compose ps</code></pre><p>è¦æ˜¯æƒ³è¦æŸ¥çœ‹æ‰€æœ‰serviceçš„çŠ¶æ€å¯ä»¥ä½¿ç”¨-aå‚æ•°ï¼š</p><pre><code>docker-compose ps -a</code></pre><h2 id="åœæ­¢æˆ–åˆ é™¤æœåŠ¡"><a href="#åœæ­¢æˆ–åˆ é™¤æœåŠ¡" class="headerlink" title="åœæ­¢æˆ–åˆ é™¤æœåŠ¡"></a>åœæ­¢æˆ–åˆ é™¤æœåŠ¡</h2><p>å¦‚ä½•åœæ­¢å·²ç»è¿è¡Œçš„serviceså‘¢ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤</p><pre><code>docker-compose stopdocker-compose down</code></pre><p>å…¶ä¸­stopæ˜¯ç›´æ¥åœæ­¢servicesï¼Œè€Œdownåˆ™ä¼šåœæ­¢å¹¶åˆ é™¤åˆ›å»ºçš„serviceï¼Œvolumeå’Œnetworkã€‚</p><h2 id="è¿›å…¥æœåŠ¡"><a href="#è¿›å…¥æœåŠ¡" class="headerlink" title="è¿›å…¥æœåŠ¡"></a>è¿›å…¥æœåŠ¡</h2><p>æœ‰äº›æƒ…å†µä¸‹æˆ‘ä»¬è¿˜éœ€è¦è¿›å…¥å®¹å™¨æ¥æ‰§è¡Œä¸€äº›å‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼è¿›å…¥å®¹å™¨</p><pre><code>docker-compose exec mysql bash</code></pre><p>execåé¢æ¥çš„å°±æ˜¯æˆ‘ä»¬è¦è¿›å…¥å…·ä½“çš„serviceçš„åå­—ï¼Œåå­—åé¢å°±æ˜¯æˆ‘ä»¬è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚</p><h2 id="æŸ¥çœ‹æœåŠ¡è¾“å‡ºæ—¥å¿—"><a href="#æŸ¥çœ‹æœåŠ¡è¾“å‡ºæ—¥å¿—" class="headerlink" title="æŸ¥çœ‹æœåŠ¡è¾“å‡ºæ—¥å¿—"></a>æŸ¥çœ‹æœåŠ¡è¾“å‡ºæ—¥å¿—</h2><p>æœ‰äº›æƒ…å†µä¸‹ä¸€äº›æœåŠ¡å¯èƒ½æ— æ³•æ­£å¸¸å¯åŠ¨ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹æ—¥å¿—å¹¶å®šä½å‘ç”Ÿé”™è¯¯çš„åŸå› </p><pre><code>docker-compose logs</code></pre>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¤®è¡Œå·¥ä½œè®ºæ–‡è¯»åæ„Ÿ</title>
    <link href="/2021/04/21/%E5%A4%AE%E8%A1%8C%E5%B7%A5%E4%BD%9C%E8%AE%BA%E6%96%87%E8%AF%BB%E5%90%8E%E6%84%9F/"/>
    <url>/2021/04/21/%E5%A4%AE%E8%A1%8C%E5%B7%A5%E4%BD%9C%E8%AE%BA%E6%96%87%E8%AF%BB%E5%90%8E%E6%84%9F/</url>
    
    <content type="html"><![CDATA[<p>å¤®è¡Œï¼ˆä¸­å›½äººæ°‘é“¶è¡Œï¼‰åœ¨2021å¹´3æœˆ26æ—¥å‘è¡¨äº†ä¸€ç¯‡å·¥ä½œè®ºæ–‡ã€Šå…³äºæˆ‘å›½äººå£è½¬å‹çš„è®¤è¯†å’Œåº”å¯¹ä¹‹ç­–ã€‹ã€‚è®ºæ–‡ä¸€ç»å‘è¡¨ä¾¿å¼•èµ·äº†å…¨ç½‘çš„å¤§è®¨è®ºï¼Œæ–°æµªå¾®åšä¸Šçš„ç›¸å…³ç‚¹å‡»é‡è¾¾åˆ°3.2äº¿æ¬¡ã€‚ç„¶è€Œç½‘ç»œä¸Šçš„æ¶ˆæ¯éš¾å…å›¿äºå…¶ç¢ç‰‡è¯å™äº‹é£æ ¼ï¼Œä½¿äººäº§ç”Ÿåè§ã€‚å› æ­¤ç¬”è€…æŠ±ç€æ‰¹åˆ¤æ€§å­¦ä¹ çš„å¿ƒæ€ï¼Œæ‹œè¯»äº†è¯¥ç¯‡è®ºæ–‡ï¼Œå¹¶è¯•å›¾æ¢³ç†ä¸»è¦å†…å®¹ï¼Œæœ€åå°±ç›¸å…³è§‚ç‚¹æå‡ºè‡ªå·±çš„è¯„è®ºã€‚<br><!--more---></p><p>å£°æ˜ï¼šæœ¬æ–‡å¹¶éå­¦æœ¯æ–‡ç« ï¼Œè€Œæ˜¯ä»£è¡¨ä¸ªäººè§è§£çš„ç¤¾ä¼šè¯„è®ºï¼›é’ˆå¯¹çš„ä¹Ÿä»…é™äºè¯¥ç¯‡æ–‡ç« ï¼Œè€Œä¸èƒ½æ¶µç›–æ–‡ç« æ‰€æ¶‰åŠçš„æ‰€æœ‰ç›¸å…³è®®é¢˜ã€‚æœ¬æ–‡å†™ä½œç›®çš„ä»…å‡ºäºå­¦ä¹ å’Œäº¤æµã€‚æœ¬æ–‡ä½œè€…å¹¶éç ”ç©¶äººå£ä¸ç¤¾ä¼šé—®é¢˜çš„ä¸“ä¸šäººå£«ï¼Œå› æ­¤è§‚ç‚¹æœªå…å­˜åœ¨ç–æ¼å’Œå¹¼ç¨šä¹‹å¤„ï¼Œæœ›è¯»è€…æµ·æ¶µã€‚</p><p>è¿™ç¯‡å·¥ä½œè®ºæ–‡çš„å››åä½œè€…å‡æ˜¯ä¸­å›½äººæ°‘é“¶è¡Œä¸‹å±ç ”ç©¶æœºæ„çš„ç»æµå­¦åšå£«ã€‚ä½œè€…è¿˜å‘å½“å±€æå‡ºæ”¾å¼€è®¡åˆ’ç”Ÿè‚²ã€æ§åˆ¶æˆ¿ä»·ã€é‡è§†å‚¨è“„å’ŒæŠ•èµ„ç­‰å»ºè®®ã€‚</p><p>æ‰€æœ‰çš„ä¸­å›½äººæ°‘é“¶è¡Œå·¥ä½œè®ºæ–‡å¯åœ¨å¦‚ä¸‹ç½‘ç«™æŸ¥çœ‹ï¼š<br><a href="http://www.pbc.gov.cn/yanjiuju/124427/133100/index.html">http://www.pbc.gov.cn/yanjiuju/124427/133100/index.html</a></p><h1 id="è®ºæ–‡åŸæ–‡å†…å®¹æ‘˜å½•"><a href="#è®ºæ–‡åŸæ–‡å†…å®¹æ‘˜å½•" class="headerlink" title="è®ºæ–‡åŸæ–‡å†…å®¹æ‘˜å½•"></a>è®ºæ–‡åŸæ–‡å†…å®¹æ‘˜å½•</h1><p>ä»¥ä¸‹å°†ã€Šå…³äºæˆ‘å›½äººå£è½¬å‹çš„è®¤è¯†å’Œåº”å¯¹ä¹‹ç­–ã€‹ç®€ç§°ä¸ºâ€œè®ºæ–‡â€ã€‚ç°è‰²å¼•ç”¨éƒ¨åˆ†å’Œå›¾è¡¨ä¸ºåŸæ–‡å†…å®¹ï¼Œå…¶ä½™éƒ¨åˆ†ä¸ºæœ¬äººè¯„æ³¨ã€‚</p><h2 id="ä¸€ã€äººå£è½¬å‹çš„è§„å¾‹"><a href="#ä¸€ã€äººå£è½¬å‹çš„è§„å¾‹" class="headerlink" title="ä¸€ã€äººå£è½¬å‹çš„è§„å¾‹"></a>ä¸€ã€äººå£è½¬å‹çš„è§„å¾‹</h2><p>è¯¥éƒ¨åˆ†è®¨è®ºäº†ç»æµç¤¾ä¼šå‘å±•å’Œå‡ºç”Ÿç‡ä¸æ­»äº¡ç‡çš„å…³ç³»é—®é¢˜ã€‚</p><blockquote><p>ç»æµç¤¾ä¼šçš„å‘å±•å°†å¯¼è‡´å‡ºç”Ÿç‡å’Œæ­»äº¡ç‡ä¸‹é™ï¼Œä½†æ˜¯æ­»äº¡ç‡ä¼šå…ˆäºå‡ºç”Ÿç‡ä¸‹é™ï¼Œå› æ­¤è®ºæ–‡å°†äººå£å¢é•¿çŠ¶æ€åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼šä½å¢é•¿ï¼ˆIï¼‰ã€åŠ é€Ÿå¢é•¿ï¼ˆIIï¼‰ã€å¢é•¿å‡ç¼“ï¼ˆIIIï¼‰å’Œæ¢å¤ä½å¢é•¿ï¼ˆIVï¼‰ã€‚</p></blockquote><p><img src="/2021/04/21/%E5%A4%AE%E8%A1%8C%E5%B7%A5%E4%BD%9C%E8%AE%BA%E6%96%87%E8%AF%BB%E5%90%8E%E6%84%9F/2021-04-21-12-02-48.png" alt></p><blockquote><p>å‘è¾¾ç»æµä½“å·²ç»ä½äºIVé˜¶æ®µï¼Œè€Œå¤§å¤šæ•°å‘å±•ä¸­ç»æµä½“ä½äºIIæˆ–IIIé˜¶æ®µã€‚</p></blockquote><p>ä»€ä¹ˆæ˜¯äººå£çº¢åˆ©ï¼Ÿäººå£çº¢åˆ©æ˜¯æŒ‡ç”Ÿè‚²ç‡ä¸‹é™å¸¦æ¥çš„åŠ³åŠ¨äººå£å æ¯”æå‡çš„ç°è±¡ã€‚åœ¨äººå£çº¢åˆ©æ—¶æœŸï¼Œå› ä¸ºæŠšå…»å­å¥³å’Œè€äººçš„å‹åŠ›å˜å°ï¼Œæ›´å¤šçš„äººå£èƒ½å¤Ÿä»äº‹ç»æµå‘å±•æœ‰å…³çš„å·¥ä½œï¼Œå› æ­¤è¿™ä¸ªåœ°åŒºç›¸è¾ƒäºå…¶ä»–åœ°åŒºå¢é•¿å¿«ã€‚å…·ä½“è¡¨ç°ä¸ºå±…æ°‘å‚¨è“„ç‡é«˜ã€æŠ•èµ„é«˜ç­‰ã€‚</p><p>äººå£çº¢åˆ©æ˜¯ä¸€ä¸ªåœ°åŒºå‘å±•çš„æœºä¼šï¼Œä½†æ˜¯èƒ½å¦åˆ©ç”¨è¿™ä¸ªæœºä¼šï¼Œåˆ™æœ‰èµ–äºç¤¾ä¼šå’Œæ”¿æ²»æ¡ä»¶æ‰€åˆ›é€ çš„ç”Ÿäº§æ€§å°±ä¸šå’ŒæŠ•èµ„ç¯å¢ƒã€‚</p><p>åŠ³åŠ¨é€‚é¾„äººå£å å¤šæ•°çš„æ—¶æœŸæ˜¯çŸ­æš‚çš„ï¼ˆçº¦50å¹´ï¼‰ï¼Œè¿™ä¸€éƒ¨åˆ†åŠ³åŠ¨äººå£ç»ˆç©¶ä¼šè€å»å¹¶æˆä¸ºè´Ÿæ‹…ï¼Œå±Šæ—¶æ–°ä¸€ä»£äººå°†æˆä¸ºç¤¾ä¼šå‘å±•çš„ä¸»åŠ›ã€‚è¿™ç§äººå£çº¢åˆ©ä¹‹åçš„ç°è±¡ç§°ä¹‹ä¸ºäººå£è½¬å‹ã€‚</p><p>ä»€ä¹ˆæ˜¯ä¸­ç­‰æ”¶å…¥é™·é˜±ï¼Ÿç»æµæ°´å¹³é•¿æœŸå¤„äºä¸­ç­‰æ”¶å…¥æ°´å¹³çš„å›½å®¶ï¼Œç»æµç¤¾ä¼šå‘å±•é•¿æœŸåœæ»åœ¨è¯¥æ°´å¹³ï¼Œå—é™äºå„ç§å› ç´ è€Œæ— æ³•è·»èº«å¯Œè£•å›½å®¶è¡Œåˆ—ï¼Œçœ‹èµ·æ¥å¥½åƒé™·å…¥äº†ä¸€ä¸ªâ€œé™·é˜±â€ä¹‹ä¸­ã€‚ä¸â€œä¸­ç­‰æ”¶å…¥é™·é˜±â€ç±»ä¼¼çš„æ¦‚å¿µè¿˜æœ‰â€œè´«å›°é™·é˜±â€ã€‚</p><h2 id="äºŒã€å›½å¤–åº”å¯¹äººå£è½¬å‹çš„ç»éªŒå’Œæ•™è®­"><a href="#äºŒã€å›½å¤–åº”å¯¹äººå£è½¬å‹çš„ç»éªŒå’Œæ•™è®­" class="headerlink" title="äºŒã€å›½å¤–åº”å¯¹äººå£è½¬å‹çš„ç»éªŒå’Œæ•™è®­"></a>äºŒã€å›½å¤–åº”å¯¹äººå£è½¬å‹çš„ç»éªŒå’Œæ•™è®­</h2><p>å‘è¾¾ç»æµä½“æ—©åœ¨å·¥ä¸šé©å‘½æ—¶æœŸå°±å·²ç»ç§¯ç´¯äº†ä¸€å®šçš„äººå£è½¬å‹æ–¹é¢çš„ç»éªŒå’Œæ•™è®­ã€‚å…·ä½“è¡¨ç°åœ¨ï¼š</p><blockquote><p>æ•™è®­ï¼š</p><ul><li>æ²¡æ–™åˆ°ä¼šå‡ºç°äººå£è½¬å‹ï¼›</li><li>ä½ä¼°äº†äººå£å¯¹ç»æµå¢é•¿çš„ä½œç”¨ï¼›</li><li>ä½ä¼°äº†è€é¾„åŒ–å’Œå°‘å­åŒ–çš„å±å®³ã€‚</li></ul></blockquote><p>å‰ä¸¤ç‚¹ä¸è¨€è‡ªæ˜ã€‚è€Œå¯¹äºç¬¬ä¸‰ç‚¹ï¼Œè®ºæ–‡è®¤ä¸ºä½“ç°åœ¨ï¼š</p><blockquote><p>1ï¼‰å‘è¾¾å›½å®¶å…¶ä¸€é«˜ä¼°äº†æ•™è‚²å’Œç§‘æŠ€çš„ä½œç”¨ï¼›2ï¼‰é«˜ä¼°äº†é¼“åŠ±ç”Ÿè‚²çš„æ•ˆæœï¼›3ï¼‰é«˜ä¼°äº†å…»è€ä¿éšœæ”¿ç­–å’Œå…»è€äº§ä¸šçš„ä½œç”¨ã€‚</p><p>ç»éªŒï¼š</p><ul><li>èµ„æœ¬æ‰©å¼ </li><li>ç§»æ°‘</li></ul></blockquote><p>è®ºæ–‡æåˆ°äº†è¿™ä¸¤ç‚¹æ˜¯ååˆ†è¡Œä¹‹æœ‰æ•ˆçš„åšæ³•ã€‚ä½†è¿™å°±æ„å‘³ç€è¦æ±‚å›½å®¶å‘å±•åˆ°å›½é™…äº§ä¸šé“¾çš„é¡¶ç«¯ï¼Œè¦â€œå½“å¤§å“¥â€æ‰èƒ½è·å¾—è¿™ä»½åˆ©ç›Šã€‚</p><h2 id="ä¸‰ã€æˆ‘ä»¬è¯¥å¦‚ä½•åº”å¯¹äººå£è½¬å‹ï¼Ÿ"><a href="#ä¸‰ã€æˆ‘ä»¬è¯¥å¦‚ä½•åº”å¯¹äººå£è½¬å‹ï¼Ÿ" class="headerlink" title="ä¸‰ã€æˆ‘ä»¬è¯¥å¦‚ä½•åº”å¯¹äººå£è½¬å‹ï¼Ÿ"></a>ä¸‰ã€æˆ‘ä»¬è¯¥å¦‚ä½•åº”å¯¹äººå£è½¬å‹ï¼Ÿ</h2><h3 id="3-1-ç›®å‰é—®é¢˜å¾ˆä¸¥å³»"><a href="#3-1-ç›®å‰é—®é¢˜å¾ˆä¸¥å³»" class="headerlink" title="3.1 ç›®å‰é—®é¢˜å¾ˆä¸¥å³»"></a>3.1 ç›®å‰é—®é¢˜å¾ˆä¸¥å³»</h3><p>è®ºæ–‡æŒ‡å‡ºï¼Œä¸€æ–¹é¢æˆ‘ä»¬åŒæ ·é¢ä¸´äººå£çº¢åˆ©å³å°†ç»“æŸçš„äººå£è½¬å‹é—®é¢˜ï¼Œ</p><p><img src="/2021/04/21/%E5%A4%AE%E8%A1%8C%E5%B7%A5%E4%BD%9C%E8%AE%BA%E6%96%87%E8%AF%BB%E5%90%8E%E6%84%9F/2021-04-22-08-42-49.png" alt></p><p>å¦ä¸€æ–¹é¢æˆ‘ä»¬çš„é—®é¢˜æ¯”å‘è¾¾å›½å®¶æ›´ä¸ºä¸¥é‡ï¼Œæˆ‘ä»¬â€œæœªå¯Œå…ˆè€â€ï¼›è€Œä¸”ç”±äºè®¡åˆ’ç”Ÿè‚²æ”¿ç­–ï¼Œæˆ‘ä»¬çš„ç”Ÿè‚²ç‡ä¸‹é™å¾—æ›´å¿«ã€‚åœ¨å¯ä»¥é¢„è§çš„å°†æ¥ï¼Œç»æµå‘å±•åœæ»ï¼Œç”šè‡³æ˜¯ç‰©ä»·ç–²è½¯ã€èµ„äº§ä»·æ ¼é€šç¼©ã€é«˜è´Ÿå€ºç­‰ç°è±¡éƒ½å¯èƒ½å‡ºç°ã€‚</p><p>é€‰å–ç¾å›½å’Œå°åº¦ä¸¤ä¸ªå…¸å‹çš„å›½å®¶è¿›è¡Œæ¯”è¾ƒï¼Œç¾å›½ç”±äºæŠ€æœ¯ç§»æ°‘å’Œèµ„æœ¬æ‰©å¼ ï¼Œäººå£ç»“æ„é—®é¢˜å¹¶ä¸æ˜¯å¾ˆçªå‡ºã€‚è€Œå°åº¦æ­£å¤„äºäººå£çº¢åˆ©åˆæœŸï¼Œå…·ä½“å¯çœ‹ä¸‹å›¾ï¼š</p><p><img src="/2021/04/21/%E5%A4%AE%E8%A1%8C%E5%B7%A5%E4%BD%9C%E8%AE%BA%E6%96%87%E8%AF%BB%E5%90%8E%E6%84%9F/2019å¹´ä¸­å°ç¾äººå£ç»“æ„æ¯”è¾ƒå›¾.png" alt></p><p>é¢„è®¡2050å¹´ï¼Œä¸­å°ç¾ä¸‰å›½çš„äººå£ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/2021/04/21/%E5%A4%AE%E8%A1%8C%E5%B7%A5%E4%BD%9C%E8%AE%BA%E6%96%87%E8%AF%BB%E5%90%8E%E6%84%9F/2050å¹´é¢„è®¡ä¸­å°ç¾äººå£ç»“æ„æ¯”è¾ƒå›¾.png" alt></p><blockquote><p>å¦‚æœè¯´è¿‡å»å››åå¹´æˆ‘å›½ç¼©å°ä¸ç¾å›½çš„å·®è·ï¼Œé çš„æ˜¯å»‰ä»·çš„åŠ³åŠ¨åŠ›å’Œå·¨å¤§çš„äººå£çº¢åˆ©ï¼Œé‚£æœªæ¥ä¸‰åå¹´è¦é ä»€ä¹ˆï¼Ÿè¿™å€¼å¾—æˆ‘ä»¬æ·±æ€ã€‚</p></blockquote><h3 id="3-2-åº”å¯¹æ–¹æ¡ˆ"><a href="#3-2-åº”å¯¹æ–¹æ¡ˆ" class="headerlink" title="3.2 åº”å¯¹æ–¹æ¡ˆ"></a>3.2 åº”å¯¹æ–¹æ¡ˆ</h3><blockquote><p>ç”¨è°ƒæ§ç»æµçš„æ€è·¯å»åº”å¯¹äººå£è½¬å‹ï¼Œå¤šåŠäº‹ä¸æ„¿è¿ã€‚æ‰€ä»¥ä¸€å®šè¦æœ‰æå‰é‡ï¼Œå¹¶ä¸”æå¾—å¤šå¤šçš„ï¼Œè¿™æ ·æ‰ä¸è‡³äºç§¯é‡éš¾è¿”ï¼›ä¸€å®šè¦åšæŒï¼Œè¿™æ ·æ‰æœ‰æˆæ•ˆã€‚</p><h4 id="3-2-1-å…¨é¢æ”¾å¼€ç”Ÿè‚²ã€‚"><a href="#3-2-1-å…¨é¢æ”¾å¼€ç”Ÿè‚²ã€‚" class="headerlink" title="3.2.1 å…¨é¢æ”¾å¼€ç”Ÿè‚²ã€‚"></a>3.2.1 å…¨é¢æ”¾å¼€ç”Ÿè‚²ã€‚</h4></blockquote><p>è¿™åº”å½“æ˜¯è§£å†³äººå£ç»“æ„é—®é¢˜çš„å¤§å‰æã€‚</p><blockquote><h4 id="3-2-2-é‡è§†å‚¨è“„ã€‚"><a href="#3-2-2-é‡è§†å‚¨è“„ã€‚" class="headerlink" title="3.2.2 é‡è§†å‚¨è“„ã€‚"></a>3.2.2 é‡è§†å‚¨è“„ã€‚</h4></blockquote><p>è€é¾„åŒ–ä¼šå¯¼è‡´å‚¨è“„ç‡ä¸‹é™ã€‚æœªé›¨ç»¸ç¼ªä¸ä»…é€‚ç”¨äºä¸ªäººï¼Œè€Œä¸”å¯¹äºå›½å®¶è€Œè¨€åŒæ ·é‡è¦ã€‚ä»å…¶ä»…æ¬¡äºç¬¬ä¸€ç‚¹å°±èƒ½çœ‹å‡ºï¼Œå‚¨è“„ç‡å¯¹è§£å†³äººå£ç»“æ„é—®é¢˜è‡³å…³é‡è¦ã€‚äº‹å®ä¸Šå‚¨è“„ç‡æ˜¯å›½å®¶å’Œæ”¿åºœä¸»å¯¼æŠ•èµ„çš„æ ¸å¿ƒï¼Œæ˜¯ç»æµå‘å±•çš„ç›´æ¥åŠ¨åŠ›æºä¹‹ä¸€ã€‚</p><blockquote><h4 id="3-2-3-é‡è§†æŠ•èµ„ã€‚"><a href="#3-2-3-é‡è§†æŠ•èµ„ã€‚" class="headerlink" title="3.2.3 é‡è§†æŠ•èµ„ã€‚"></a>3.2.3 é‡è§†æŠ•èµ„ã€‚</h4></blockquote><p>é‡è§†å¯¹æˆ‘å›½ä¸­è¥¿éƒ¨çš„æŠ•èµ„ã€å¯¹äºšéæ‹‰åœ°åŒºçš„æŠ•èµ„ï¼Œä»¥åŠå¯¹ç§‘æŠ€çš„æŠ•èµ„ã€‚</p><blockquote><h4 id="3-2-4-æ¨è¿›å…»è€åˆ¶åº¦ä»å³æ—¶æ”¯ä»˜å‹å‘å‚¨è“„å‹è½¬ç§»ã€‚"><a href="#3-2-4-æ¨è¿›å…»è€åˆ¶åº¦ä»å³æ—¶æ”¯ä»˜å‹å‘å‚¨è“„å‹è½¬ç§»ã€‚" class="headerlink" title="3.2.4 æ¨è¿›å…»è€åˆ¶åº¦ä»å³æ—¶æ”¯ä»˜å‹å‘å‚¨è“„å‹è½¬ç§»ã€‚"></a>3.2.4 æ¨è¿›å…»è€åˆ¶åº¦ä»å³æ—¶æ”¯ä»˜å‹å‘å‚¨è“„å‹è½¬ç§»ã€‚</h4></blockquote><p>æˆ‘å›½çš„å…»è€ä¿é™©åˆ¶åº¦ç”±ä¸‰å¤§æ”¯æŸ±ç»„æˆã€‚ç¬¬ä¸€æ”¯æŸ±æ˜¯åŸºæœ¬å…»è€ä¿é™©ï¼Œå³äººä»¬å¸¸è¯´çš„å…»è€é‡‘ï¼›ç¬¬äºŒæ”¯æŸ±å³ä¼ä¸šå¹´é‡‘å’ŒèŒä¸šå¹´é‡‘ï¼›ç¬¬ä¸‰æ”¯æŸ±åŒ…æ‹¬ä¸ªäººå‚¨è“„æ€§å…»è€ä¿é™©å’Œå•†ä¸šå…»è€ä¿é™©ã€‚ç¬¬ä¸‰æ”¯æŸ±ä»¥ä¸ªäººä¸»å¯¼ï¼Œå·¥ä½œæ—¶æœ‰ä¸€éƒ¨åˆ†é’±ç¨å‰ç¼´çº³ï¼Œé€€ä¼‘å–çš„æ—¶å€™å†å¾ç¨ã€‚</p><blockquote><p>å‰Šå¼±ç¬¬ä¸€æ”¯æŸ±çš„å…»è€é‡‘ï¼Œå¢å¼ºä¸ªäººå‚¨è“„ä¿é™©å’Œå•†ä¿çš„å æ¯”ã€‚è¿™ä¸¤è€…æœ€å¤§çš„åŒºåˆ«ï¼Œå°±æ˜¯å‰è€…æ˜¯æ”¿åºœå…œåº•ï¼Œè€Œåè€…æ˜¯å¸‚åœºåŒ–äº§å“ï¼Œæ”¿åºœä¸ä¼šè¡¥è´´ã€‚</p></blockquote><p><a href="https://www.163.com/dy/article/G55MIAN2053907LI.html">ä¸ªäººå‚¨è“„å…»è€ä¿é™©åˆ¶åº¦</a>å‚è€ƒè¿™ä¸ªç½‘ç«™ã€‚</p><p>ä¸ä»…å¦‚æ­¤ï¼Œè®ºæ–‡è¿˜æåˆ°åº”è¯¥æ—©ç‚¹é™ä½å…»è€é‡‘ã€å»¶é•¿é€€ä¼‘å¹´é¾„ï¼Œè¶Šæ—©æ”¹é©è¶Šå¥½ã€‚ç”¨é€šä¿—çš„è¯æ¥è¯´ï¼Œå°±æ˜¯â€œåˆ«æŒ‡æœ›æ”¿åºœç»™ä½ å…»è€â€ã€‚</p><blockquote><p>æˆ‘å›½å»¶è¿Ÿé€€ä¼‘å¯æ—©åšçš„ä¸€ä¸ªåŸå› åœ¨äºï¼Œ<strong>æˆ‘å›½æœ‰ç¤¾ä¼šä¸»ä¹‰çš„ä¼˜è¶Šæ€§ï¼Œé›†ä½“ä¸»ä¹‰ç²¾ç¥æ›´å¼ºæœ‰åˆ©äºé¿å…å‘è¾¾å›½å®¶å»¶è¿Ÿé€€ä¼‘ä¸­çš„ç¤¾ä¼šåŠ¨è¡ï¼›è€ä¸€è¾ˆçš„äººæ›´èƒ½å¿è®©ã€æ›´èƒ½åƒè‹¦ã€‚</strong></p></blockquote><p>è¿™ä¸€ç‚¹ç»ä¸èµ·æ¨æ•²ï¼Œè€Œä¸”è¶Šè¯»è¶Šè®©äººæ„Ÿè§‰å‘³é“ä¸å¯¹ã€‚</p><p>å¾ˆå–œæ¬¢ç‹å°æ³¢çš„ä¸€å¥è¯ï¼šâ€œå£°ç§°â€˜ä¸œæ–¹å’Œè¥¿æ–¹çš„æ€è€ƒæ–¹å¼ä¸ä¸€æ ·â€™çš„äººï¼Œå…¶ç›®çš„éƒ½æ˜¯åœ¨æ©é¥°ä¸€äº›è‡ªå·±ä¹Ÿè§‰å¾—ä¸ä½“é¢çš„äº‹æƒ…ã€‚éƒ½æ˜¯åŒä¸€ä¸ªç‰©ç§ï¼Œæ€ä¹ˆä¼šæ€æƒ³æ–¹å¼ä¸åŒå‘¢ï¼Ÿâ€</p><p>è€Œä¸”ï¼Œæ€»ä¸èƒ½å› ä¸ºç­é‡ŒåŒå­¦å¥½æ¬ºè´Ÿï¼Œå°±æŒ‘è½¯æŸ¿å­æï¼Œè¿˜è¯´è¿™æ˜¯â€œè½¯æŸ¿å­çš„æ€æƒ³å¢ƒç•Œé«˜â€å§ã€‚</p><p>åˆ¶å®šæ”¿ç­–å¦‚æœçœŸçš„æ˜¯ä¸ºäººæ°‘æœåŠ¡çš„ï¼Œå°±åº”è¯¥æ¥æ”¶äººæ°‘ç¾¤ä¼—çš„ç›‘ç£ã€æ‰¿å—ä¸€éƒ¨åˆ†äººçš„æ„è§ï¼Œå¹¶è€å¿ƒå›å¤å’Œè§£ç­”ï¼Œè¿™æ‰æ˜¯äººæ°‘æ°‘ä¸»ä¸“æ”¿ã€‚</p><p>ç»¼ä¸Šï¼Œç¬”è€…è®¤ä¸ºè¿™ä¸€ç‚¹ä¸å¦‚ä¸è¯´ã€‚</p><blockquote><h4 id="3-2-5-ä¿ƒè¿›æ•™è‚²å’Œç§‘æŠ€è¿›æ­¥ã€‚"><a href="#3-2-5-ä¿ƒè¿›æ•™è‚²å’Œç§‘æŠ€è¿›æ­¥ã€‚" class="headerlink" title="3.2.5 ä¿ƒè¿›æ•™è‚²å’Œç§‘æŠ€è¿›æ­¥ã€‚"></a>3.2.5 ä¿ƒè¿›æ•™è‚²å’Œç§‘æŠ€è¿›æ­¥ã€‚</h4><p>ç»™åˆ›æ–°ä»¥å…œåº•çš„ç¤¾ä¿ï¼›æŠŠæ¡åˆ›æ–°ä¸ç›‘ç®¡çš„å¹³è¡¡ï¼›æ§æˆ¿ä»·ï¼›é‡è§†æ¯äº²å’Œå°‘å„¿çš„æ•™è‚²ï¼›é‡è§†åŸºç¡€æ•™è‚²ï¼›é‡è§†ç†å·¥ç§‘æ•™è‚²ï¼Œ<strong>ä¸œå—äºšå›½å®¶æ‰å…¥ä¸­ç­‰æ”¶å…¥é™·é˜±åŸå› ä¹‹ä¸€æ˜¯æ–‡ç§‘ç”Ÿå¤ªå¤š</strong>ï¼›</p></blockquote><p><img src="/2021/04/21/%E5%A4%AE%E8%A1%8C%E5%B7%A5%E4%BD%9C%E8%AE%BA%E6%96%87%E8%AF%BB%E5%90%8E%E6%84%9F/æ§æˆ¿ä»·åŸæ–‡.png" alt></p><p>ç¬”è€…éå¸¸èµæˆå…³äºæ§æˆ¿ä»·ç›¸å…³çš„è®ºè¿°ã€‚ä¸ä»…å¦‚æ­¤ï¼Œç¬”è€…è®¤ä¸ºæ§åˆ¶æˆ¿ä»·è¿˜æœ‰åŠ©äºæå‡å±…æ°‘å‚¨è“„ç‡ï¼Œè¿›ä¸€æ­¥æå‡ç»æµå‘å±•æ°´å¹³ã€‚</p><p>æ–‡ç§‘ä¸ç†ç§‘çš„å¤§è®¨è®ºï¼Œä¸æ˜¯ä¸€ä¸¤å¥è¯èƒ½è¯´æ˜ç™½çš„ã€‚ç®€å•è®²ï¼Œåœ¨æ²¡æœ‰æ˜ç¡®â€œæ–‡ç§‘â€å’Œâ€œç†ç§‘â€çš„å®šä¹‰ä¹‹å‰ï¼Œæ“…è‡ªå¯¹æ–‡ç†è¿›è¡Œè¯„ä»·ï¼Œæ˜¯ä¸å¦¥å½“çš„ã€‚</p><p>å½“ç„¶ï¼Œå•çº¯ä»¥æ¯•ä¸šç”Ÿå°±ä¸šæƒ…å†µæ¥çœ‹ï¼Œä»¥è‡ªåŠ¨åŒ–ã€ç”µå­ã€æœºæ¢°ã€è®¡ç®—æœºç­‰ä¸“ä¸šä¸ºé¦–çš„ç†å·¥ç§‘ä¸“ä¸šçš„ç¡®è¦æ¯”ä»¥è¯­è¨€ã€ä¼ åª’ã€è‰ºæœ¯ç­‰ä¸“ä¸šè¦æ–¹ä¾¿å°±ä¸šã€‚</p><p>ä½†æ˜¯å°±ç¤¾ä¼šè´¡çŒ®æ¥çœ‹ï¼Œæ–‡ç§‘å°¤å…¶æ˜¯ç¤¾ä¼šç§‘å­¦å¯¹ç¤¾ä¼šçš„è´¡çŒ®è¦ä¸äºšäºç†å·¥ç§‘å­¦ã€‚æ¯•ç«Ÿæˆ‘ä»¬å›½å®¶çš„å›½ç­–å°±æ˜¯åœ¨é©¬å…‹æ€ä¸»ä¹‰çš„æŒ‡å¯¼ä¸‹å»ºç«‹çš„ã€‚å› æ­¤åœ¨æ¦‚å¿µæ¨¡ç³Šçš„æ—¶å€™ä¸å®œâ€œæ§ä¸€è¸©ä¸€â€ã€‚</p><blockquote><p>è€è¯è®²ï¼Œ<strong>çˆ¹æˆ³æˆ³ä¸€ä¸ªï¼Œå¨˜æˆ³æˆ³ä¸€çª</strong>ï¼Œæ‰€ä»¥æ•™è‚²å¥½æ¯äº²æ¯”æ•™è‚²å…¶ä»–äººäº‹åŠåŠŸå€ã€‚äº‹å®ä¸Šï¼Œæ•™è‚²æ¯äº²ä¸æ˜¯ä¸€å¥ç©ºè¯ï¼Œå¯ä»¥ä»å¾ˆå¤šå…·ä½“çš„å°å·¥ä½œåšèµ·ã€‚æ¯”å¦‚ï¼Œæœ‰å‘è¾¾å›½å®¶å°±ç»™æ¯ä¸ªè‚²é¾„å¦‡å¥³åˆ†å‘å­•å‰ã€å­•ä¸­ã€å­•åã€è‚²å„¿çŸ¥è¯†çš„å°å†Œå­ï¼ˆæ”¿åºœç»„ç»‡ä¸“å®¶ç¼–å†™ï¼Œç®€å•æ˜“æ‡‚ï¼Œå…è´¹æä¾›ï¼‰ï¼Œè€Œä¸æ˜¯è®©å¤§å®¶å»å¸‚åœºä¸Šä¹°åšåšçš„ã€è‰¯è ä¸é½çš„ã€äº”èŠ±å…«é—¨çš„ç”Ÿè‚²æŒ‡å—ã€‚è¿™æ ·èŠ±é’±ä¸å¤šï¼Œåˆæˆæ•ˆæ˜¾è‘—ã€‚</p></blockquote><p>å‡ºè‡ªä¿—è¯­â€œå…µç†Šç†Šä¸€ä¸ª,å°†ç†Šç†Šä¸€çªâ€ã€‚</p><p>é‡è§†å¯¹æ¯äº²çš„æ•™è‚²ï¼Œå…¶å®è¿˜æ˜¯å›¿äºä¼ ç»Ÿæ–‡åŒ–çš„å›ºæœ‰æˆè§ï¼Œå³å¥³æ€§åº”è¯¥æ‰¿æ‹…æ›´å¤šå“ºè‚²å­©å­çš„ä»»åŠ¡ã€‚</p><p>å¦‚è‹¥ä»åˆ¶åº¦è§’åº¦å¹³è¡¡ä¸¤æ€§ä¹‹é—´çš„å®¶åº­èŒè´£ï¼Œå¹¶ä»¤æ”¿åºœæ‰¿æ‹…ä¸€éƒ¨åˆ†æ–°ç”Ÿå„¿æŠšå…»èŒèƒ½ï¼Œæ¯”å¦‚ç»™ç”·æ€§ä»¥äº§å‡ã€è®¾ç«‹æ–°ç”Ÿå„¿çš„æ”¿åºœç»Ÿä¸€æŠšå…»ç­‰ï¼Œæ¯”å•çº¯æ•™è‚²æ¯äº²è¦äººæ€§åŒ–å¾—å¤šã€‚</p><blockquote><p>æ•™è‚²å’Œç§‘æŠ€è¿›æ­¥å‘¨æœŸé•¿ã€è§æ•ˆæ…¢ã€ä¸å¯æ§ï¼Œå› æ­¤æˆ‘å›½å½“å‰è¿˜æ˜¯è¦ä»¥äººã€è´¢ã€ç‰©çš„å‚¨è“„ä¸ºæœ¬ï¼Œæ•™è‚²å’Œç§‘æŠ€ä¸ºè¾…ã€‚</p><p>ä¸ä¸€å®šè¦å»ºé‚£ä¹ˆå¤šå­¦æ ¡ã€å…»é‚£ä¹ˆå¤šè€å¸ˆï¼Œå¯ä»¥ç”¨äº’è”ç½‘æŠ€æœ¯è®©ä¼˜è´¨æ•™è‚²èµ„æºå…±äº«ã€‚</p></blockquote><p>è¿™ä¸€ç‚¹ç¡®å®å€¼å¾—æå€¡ã€‚å› ä¸ºä¸­å›½ä¸œè¥¿éƒ¨æ•™è‚²èµ„æºåˆ†é…ä¸å‡ç°è±¡ï¼Œå¯ä»¥è¢«äº’è”ç½‘æŠ€æœ¯è½»æ˜“è§£å†³ã€‚ç»™è´«å›°å±±åŒºå­©å­é…å¤‡ä¸€å—æ˜¾ç¤ºå™¨ï¼Œç„¶åå»åŒ—äº¬å››ä¸­ç½‘æ ¡ä¸‹è½½ç›¸åº”è§†é¢‘ï¼Œå­©å­å°±èƒ½äº«å—ä¸€æµåå¸ˆçš„æ•™è‚²æ•™å­¦äº†ã€‚</p><p>ç„¶è€Œæ•™è‚²èµ„æºå¯ä¸ä»…ä»…æ˜¯è¯¾å ‚èµ„æºï¼Œç”Ÿç†æŒ‡å¯¼ã€å¿ƒç†å¹²é¢„ã€å­¦ä¹ ä¹ æƒ¯çš„å½¢æˆç­‰éƒ½éœ€è¦è€å¸ˆæ‰‹æŠŠæ‰‹åœ°è¿›è¡ŒæŒ‡å¯¼ã€‚</p><p>ä»Šåè€å¸ˆçš„èŒèƒ½ä¹Ÿè®¸ä¼šä»å•çº¯çš„è¯¾å ‚æ•™å­¦ï¼Œé€æ¸è½¬åŒ–ä¸ºå­¦ä¹ ã€ç”Ÿæ´»ç­‰æ–¹é¢çš„å¯¼å¸ˆï¼Œå¼•å¯¼å­¦ç”Ÿä»¬çš„å‘å±•ã€‚</p><p>è¿™é‡Œå‡å°‘è€å¸ˆå’Œå­¦æ ¡æ•°ç›®çš„å€¡è®®ï¼Œåº”å½“æ˜¯ä¸ºäº†åº”å¯¹ä»Šåä¸€æ®µæ—¶é—´å†…æ–°ç”Ÿå„¿æ•°ç›®å‡å°‘æ‰€å¯¼è‡´çš„éœ€æ±‚é™ä½ã€‚äº’è”ç½‘æŠ€æœ¯çš„å‘å±•ä¸è€å¸ˆæ•°ç›®çš„éœ€æ±‚ä¹‹é—´å¹¶æ— ç›´æ¥å…³ç³»ã€‚</p><h1 id="ç®€è¯„"><a href="#ç®€è¯„" class="headerlink" title="ç®€è¯„"></a>ç®€è¯„</h1><h2 id="1-æ–‡ç¬”"><a href="#1-æ–‡ç¬”" class="headerlink" title="1. æ–‡ç¬”"></a>1. æ–‡ç¬”</h2><p>ä»è¡Œæ–‡ä¸Šæ¥çœ‹ï¼Œæœ¬ç‰‡å·¥ä½œè®ºæ–‡ä¸å…¶è¯´æ˜¯ä¸€ç¯‡è®ºæ–‡ï¼Œä¸å¦‚è¯´æ˜¯ä¸€ç¯‡ç”±å¤®è¡ŒèƒŒä¹¦çš„ç¤¾ä¼šè¯„è®ºã€‚ä»å…¶è§‚ç‚¹çš„ä¸¥è°¨ç¨‹åº¦åˆ°è¡Œæ–‡çš„æ–‡ç¬”ä¸Šéƒ½ä¸å¤Ÿâ€œå­¦æœ¯â€ï¼Œæ›´åŠ å£è¯­åŒ–ã€‚</p><p>ä¾‹å¦‚åœ¨ç¬¬ä¸‰ç« ç¬¬äºŒå°èŠ‚ä¸­çš„ä¸€æ®µå…³äºäººå£ä¸ç»æµçš„å…³ç³»çš„è®ºè¿°å¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul><li>äººå£ä¸ç»æµçš„å…³ç³»<strong>ä¼¼ä¹æœ‰ç‚¹åƒ</strong>ç‰©ä»·ã€‚è¿‡å¿«å¢é•¿ä¸å¥½ï¼Œèç¼©æ›´ç³Ÿç³•ï¼Œ<strong>ä¹Ÿè®¸å°±åƒ</strong>æ¸©å’Œçš„é€šèƒ€ä¸€æ ·ï¼Œé€‚åº¦ã€å¯æŒç»­çš„äººå£å¢é•¿æ‰æœ‰åˆ©äºç»æµç¤¾ä¼šå‘å±•ã€‚</li></ul><p>å†æ¯”å¦‚è®ºæ–‡ç¬¬14é¡µçš„è„šæ³¨ä¸­ï¼Œå…³äºæ—¥æœ¬â€œå¤±å»çš„äºŒåå¹´â€çš„ç›¸å…³æ³¨è§£ï¼š</p><ul><li><strong>æœ‰äººè¯´</strong>ï¼Œæ—¥æœ¬å¤±å»çš„äºŒåå¹´çš„ä¸»è¦åŸå› æ˜¯æ—¥æœ¬æ³¡æ²«ç»æµï¼Œè€Œéäººå£è€é¾„åŒ–ã€‚â€¦â€¦ï¼ˆå³ä¾¿æ˜¯ä¸Šä¸–çºªä¸‰åå¹´ä»£çš„å¤§è§æ¡ï¼ŒæŒç»­æ—¶é—´å³ä½¿ç®—æ»¡ï¼Œ<strong>ä¹Ÿå°±</strong>åå¹´ï¼‰ã€‚<strong>è¿˜æœ‰äººè¯´</strong>ï¼Œâ€¦â€¦ã€‚ </li></ul><p>å¹¶ä¸”â€œæœ‰äººè¯´â€ä¹‹åä¹Ÿæ²¡æœ‰è·Ÿéšå‚è€ƒæ–‡çŒ®ï¼Œä¸ç”±å¾—è®©äººæ€€ç–‘è¯¥â€œäººâ€çš„å­˜åœ¨æ€§ã€‚å¦‚æ­¤ç§ç§ä¸ä¸€è€Œè¶³ã€‚</p><h2 id="2-å‚¨è“„ç‡å¦‚ä½•æå‡ï¼Ÿ"><a href="#2-å‚¨è“„ç‡å¦‚ä½•æå‡ï¼Ÿ" class="headerlink" title="2. å‚¨è“„ç‡å¦‚ä½•æå‡ï¼Ÿ"></a>2. å‚¨è“„ç‡å¦‚ä½•æå‡ï¼Ÿ</h2><p>æœ¬èŠ‚å‚è€ƒè‡ª<a href="https://zhuanlan.zhihu.com/p/95800733">ã€Šå±…æ°‘å‚¨è“„ç‡ä¸ç»æµçš„å…³ç³»ã€‹</a>ä¸€æ–‡ã€‚</p><p>è®ºæ–‡ä¸­æåˆ°è¦â€œé«˜åº¦è­¦æƒ•å’Œé˜²æ­¢å‚¨è“„ç‡è¿‡å¿«ä¸‹é™çš„è¶‹åŠ¿â€ï¼Œå¹¶åˆ—ä¸¾äº†ä¸€ç»„æ•°å­—ï¼šæˆ‘å›½å›½æ°‘å‚¨è“„ç‡ä» 2010 å¹´çš„ 47.8%ï¼Œä¸‹é™åˆ° 2018 å¹´çš„ 44.4%ï¼Œ8 å¹´ä¸‹é™äº† 3.4 ä¸ªç™¾åˆ†ç‚¹ï¼Œå…¶ä¸­å±…æ°‘å‚¨è“„ç‡é™å¹…æ›´å¤§ï¼Œä¸‹é™ 7.3 ä¸ªç™¾åˆ†ç‚¹ã€‚</p><p>å‚¨è“„ç‡ä¸‹é™è¿‡å¿«ï¼Œä¼šä½¿å¾—äººå£çº¢åˆ©æœŸç§¯ç´¯ä¸‹æ¥çš„è´¢å¯Œå¾—ä¸åˆ°ä¿å­˜ã€‚</p><p>è™½ç„¶è®ºæ–‡åœ¨è§£å†³æ–¹æ¡ˆçš„ç¬¬äºŒç‚¹å°±æåˆ°äº†â€œæå‡å‚¨è“„ç‡â€ä½œä¸ºè§£å†³è€é¾„åŒ–é—®é¢˜çš„æ–¹æ¡ˆï¼Œä½†æ˜¯æ—¢æ²¡æœ‰è®¨è®ºå‚¨è“„ç‡ä¸‹é™çš„åŸå› ï¼Œä¹Ÿæ²¡æœ‰è®¨è®ºå‚¨è“„ç‡å¦‚ä½•æå‡ã€‚</p><p>æœ¬èŠ‚å°†è®¨è®ºä¸‰ä¸ªé—®é¢˜ï¼š</p><ol><li>å‚¨è“„ç‡æ˜¯ä»€ä¹ˆï¼Ÿå¯¹ç»æµå‘å±•é‡è¦å—ï¼Ÿ</li><li>å‚¨è“„ç‡çš„å½±å“å› ç´ æœ‰å“ªäº›ï¼Ÿ</li><li>æ—¢ç„¶å‚¨è“„ç‡å¯¹å›½å®¶å¦‚æ­¤é‡è¦ï¼Œå¦‚ä½•æå‡å‚¨è“„ç‡ï¼Ÿ</li></ol><h3 id="2-1-å±…æ°‘å‚¨è“„ç‡å’Œç»æµä¹‹é—´çš„å…³ç³»"><a href="#2-1-å±…æ°‘å‚¨è“„ç‡å’Œç»æµä¹‹é—´çš„å…³ç³»" class="headerlink" title="2.1 å±…æ°‘å‚¨è“„ç‡å’Œç»æµä¹‹é—´çš„å…³ç³»"></a>2.1 å±…æ°‘å‚¨è“„ç‡å’Œç»æµä¹‹é—´çš„å…³ç³»</h3><p>é¦–å…ˆéœ€è¦æ˜ç¡®ï¼Œç»æµå¢é•¿çš„ä¸‰é©¾é©¬è½¦æ˜¯æ¶ˆè´¹ã€å‡€å‡ºå£å’ŒæŠ•èµ„ï¼Œå…¶ä¸­æŠ•èµ„ä¾èµ–äºæœ¬å›½å‚¨è“„ç‡å’Œå¤–å€ºã€‚</p><p>å‚¨è“„ç‡æ˜¯æŒ‡ç”¨äºæœ€ç»ˆæ¶ˆè´¹åçš„ä½™é¢å æ‰€æœ‰å¯æ”¯é…æ”¶å…¥çš„æ¯”ç‡ã€‚æˆ‘å›½çš„å›½æ°‘å‚¨è“„ä¸­ï¼Œå±…æ°‘å‚¨è“„æ˜¯ä¸»è¦éƒ¨åˆ†ã€‚</p><p>æ”¹é©å¼€æ”¾ä»¥æ¥ï¼Œä¸­å›½ç»æµçš„å‘å±•ä¸€ç›´ä¾èµ–äºæ”¿åºœä¸»å¯¼çš„å¤§è§„æ¨¡æŠ•èµ„å’Œå¤§é‡å‡ºå£ã€‚æŠ•èµ„çš„é’±æ€ä¹ˆæ¥ï¼Ÿé“¶è¡Œï¼Œé“¶è¡Œçš„é’±æ¥è‡ªå“ªé‡Œï¼Ÿå±…æ°‘çš„é«˜å‚¨è“„ç‡ã€‚</p><p>è¯´ç™½äº†ï¼Œä½ åœ¨é“¶è¡Œé‡Œçš„å­˜æ¬¾è¶Šå¤šï¼Œå¯¹æ”¿åºœçš„æŠ•èµ„è´¡çŒ®è¶Šå¤§ã€‚è¯´ä¸å®šé«˜é“çš„ä¸€å—é“è½¨ã€ä¸€ä¸ªåœ°é“ç«™å°±ç”¨äº†ä½ çš„ä¸€éƒ¨åˆ†å­˜æ¬¾ã€‚</p><p>å› æ­¤ä¸­å›½çš„æŠ•èµ„å¤§éƒ¨åˆ†ä¾èµ–äºå±…æ°‘å‚¨è“„ç‡ï¼Œå‚¨è“„ç‡çš„ä¸‹é™å¯¹ç»æµå‘å±•æœ‰è¾ƒå¤§è´Ÿé¢å½±å“ã€‚</p><h3 id="2-2-è€é¾„åŒ–å’Œå±…æ°‘å‚¨è“„ç‡ä¹‹é—´çš„å…³ç³»"><a href="#2-2-è€é¾„åŒ–å’Œå±…æ°‘å‚¨è“„ç‡ä¹‹é—´çš„å…³ç³»" class="headerlink" title="2.2 è€é¾„åŒ–å’Œå±…æ°‘å‚¨è“„ç‡ä¹‹é—´çš„å…³ç³»"></a>2.2 è€é¾„åŒ–å’Œå±…æ°‘å‚¨è“„ç‡ä¹‹é—´çš„å…³ç³»</h3><p>å‚¨è“„ç‡å’Œäººå£ç»“æ„æ˜¯æœ‰å…³ç³»çš„ï¼Œåªä¸è¿‡å…³ç³»ä¸é‚£ä¹ˆæ˜æ˜¾ã€‚</p><p>äººçš„ä¸€ç”Ÿä¸­ï¼Œæ¶ˆè´¹å’Œå‚¨è“„æ¨¡å¼ä¼šå‘ç”Ÿå˜åŒ–ã€‚</p><p>ä¸€ä¸ªäººä»äº‹åŠ³åŠ¨çš„å¹´ä»½ï¼Œä»–ä»¬çš„æ”¶å…¥å¤§äºæ¶ˆè´¹ï¼Œç”±æ­¤äº§ç”Ÿçš„ç›ˆä½™ç”¨äºæŠšå…»å­å¥³ä»¥åŠå­˜å…¥é“¶è¡Œã€‚</p><p>è€Œè€å¹´äººä¸€èˆ¬å°†å…¶æ”¶å…¥çš„å¤§éƒ¨åˆ†èŠ±åœ¨ä½æˆ¿å’Œç¤¾ä¼šæœåŠ¡æ–¹é¢ï¼Œå¦å¤–ä¿å¥å’Œé•¿æœŸæŠ¤ç†æ–¹é¢çš„éœ€æ±‚å¯èƒ½ä¼šä¸Šå‡ï¼Œå¨±ä¹ã€äº¤é€šè¿è¾“æ–¹é¢çš„éœ€æ±‚å¯èƒ½ä¼šä¸‹é™ã€‚</p><p>å› æ­¤ï¼Œç†è®ºä¸Šï¼Œå½“ç¤¾ä¼šä¸­æœ‰æ”¶å…¥çš„é’å£®å¹´é€æ­¥å‡å°‘ã€æ²¡æœ‰æ”¶å…¥çš„è€äººè¶Šæ¥è¶Šå¤šæ—¶ï¼Œå±…æ°‘çš„å‚¨è“„ç‡å°±ä¼šä¸‹é™ã€‚</p><p>ä¸è¿‡å‚¨è“„ç‡å¾€å¾€å—å…¶ä»–å› ç´ å½±å“ï¼Œå› æ­¤è€é¾„åŒ–ä¸å±…æ°‘å‚¨è“„ç‡ä¹‹é—´çš„å…³ç³»å¹¶ä¸æ˜¯ç»å¯¹ç›¸å…³çš„ã€‚</p><h3 id="2-3-å½±å“å±…æ°‘å‚¨è“„ç‡çš„å…¶ä»–åŸå› "><a href="#2-3-å½±å“å±…æ°‘å‚¨è“„ç‡çš„å…¶ä»–åŸå› " class="headerlink" title="2.3 å½±å“å±…æ°‘å‚¨è“„ç‡çš„å…¶ä»–åŸå› "></a>2.3 å½±å“å±…æ°‘å‚¨è“„ç‡çš„å…¶ä»–åŸå› </h3><p>è™½ç„¶è€é¾„åŒ–ä¼šå¯¹å±…æ°‘å‚¨è“„ç‡äº§ç”Ÿä¸€å®šç¨‹åº¦çš„å½±å“ï¼Œä½†è¿˜æœ‰å¾ˆå¤šå…¶ä»–å› ç´ å½±å“äººä»¬çš„å‚¨è“„è¡Œä¸ºï¼Œæ¯”å¦‚ï¼š</p><ul><li>æ”¶å…¥æ°´å¹³ã€èµ„äº§ä»·å€¼å’Œåˆ†é…æƒ…å†µ</li><li>å¯¹æœªæ¥å‘å±•çš„ä¼°è®¡</li><li>ç¨ç‡</li><li>ç°è¡Œå…»æ¤é‡‘åˆ¶åº¦</li><li>è€å¹´åŒ»ç–—å’Œä¸´ç»ˆå…³æ€€ç­‰</li></ul><p>å…¶ä¸­å±…æ°‘å­˜æ¬¾çš„å¢é•¿ä¸å¦ä¸å±…æ°‘æ”¶å…¥æœ‰å¾ˆå¤§å…³ç³»ã€‚å½“ç»æµå‘å¥½æ—¶ï¼Œå±…æ°‘æ”¶å…¥æœ‰å¤§å¹…å¢é•¿ï¼Œå­˜æ¬¾å°±å¢å¤§ï¼›å½“ç»æµä¸‹è¡Œæ—¶ï¼Œå±…æ°‘æ”¶å…¥å¢é•¿è¾ƒç¼“ï¼Œå­˜æ¬¾å¢é•¿å°±æ”¾ç¼“ã€‚</p><p>æ—¢ç„¶è€é¾„åŒ–å’Œå±…æ°‘æ”¶å…¥ç­‰åŸå› éƒ½ä¼šå½±å“å±…æ°‘å‚¨è“„ç‡ï¼Œé‚£ä¹ˆç©¶ç«Ÿä»€ä¹ˆæ˜¯ä¸­å›½å±…æ°‘å‚¨è“„ç‡å¿«é€Ÿä¸‹é™çš„ä¸»è¦åŸå› ï¼Ÿ</p><h3 id="2-4-å‚¨è“„ç‡é™ä½çš„ä¸»è¦åŸå› "><a href="#2-4-å‚¨è“„ç‡é™ä½çš„ä¸»è¦åŸå› " class="headerlink" title="2.4 å‚¨è“„ç‡é™ä½çš„ä¸»è¦åŸå› "></a>2.4 å‚¨è“„ç‡é™ä½çš„ä¸»è¦åŸå› </h3><blockquote><p>â€œæˆ¿ä»·å¤ªé«˜ï¼Œå†æ€ä¹ˆæ”¾å¼€ç”Ÿè‚²æˆ‘éƒ½ä¸ä¼šç”Ÿçš„ã€‚â€</p></blockquote><p>ç”±äºè¿‘å¹´æ•™è‚²ã€åŒ»ç–—ã€æˆ¿äº§ç­‰çš„ä»·æ ¼çš„ä¸Šå‡ï¼Œå±…æ°‘åœ¨ä»¥ä¸Šå‡ é¡¹å½“ä¸­çš„æ¶ˆè´¹é¢å¢åŠ ï¼Œè‡´ä½¿å±…æ°‘å‚¨è“„ç‡ä¸‹é™ã€‚ç‰¹åˆ«æ˜¯æˆ¿åœ°äº§åœ¨å®¶åº­èµ„äº§é…ç½®å½“ä¸­å æœ‰éå¸¸å¤§çš„æ¯”ä¾‹ï¼Œå·²ç»å¤§å¤§è¶…è¿‡äº†å­˜æ¬¾ã€‚</p><p>æ®å¤®è¡Œä¸€å­£åº¦é‡‘èç»Ÿè®¡æ•°æ®æ–°é—»å‘å¸ƒä¼šæ¶ˆæ¯ï¼Œ2020å¹´å±…æ°‘æ æ†ç‡ä¸º 45.7% ï¼Œæ¯”2019å¹´ä¸Šå‡äº† 7.1% ã€‚</p><p><a href="http://finance.sina.com.cn/zl/china/2021-04-18/zl-ikmxzfmk7496559.shtml">http://finance.sina.com.cn/zl/china/2021-04-18/zl-ikmxzfmk7496559.shtml</a></p><p>å±…æ°‘éƒ¨é—¨æ æ†ç‡å¢å¹…è¾ƒå¤§ä¸»è¦æ˜¯å—æˆ¿åœ°äº§å¸‚åœºå½±å“ã€‚æ•°æ®æ˜¾ç¤ºï¼Œåœ¨å…¨éƒ¨å±…æ°‘å€ºåŠ¡ä¸­ï¼Œå æœ€å¤§æ¯”ä¾‹çš„å³æ˜¯å±…æ°‘ä¸­é•¿æœŸæ¶ˆè´¹è´·æ¬¾ï¼ˆä¸»è¦æ˜¯ä½æˆ¿æŒ‰æ­è´·æ¬¾ï¼‰ï¼Œå åˆ°äº†å…¨éƒ¨å±…æ°‘è´·æ¬¾çš„65%ã€‚</p><p><img src="/2021/04/21/%E5%A4%AE%E8%A1%8C%E5%B7%A5%E4%BD%9C%E8%AE%BA%E6%96%87%E8%AF%BB%E5%90%8E%E6%84%9F/2021-04-23-13-16-09.png" alt></p><p>è®©æˆ‘ä»¬å†è¯´å¾—æ˜ç™½äº›ã€‚å±…æ°‘ä¹°æˆ¿çš„é¦–ä»˜ä½¿ç”¨äº†å…­ä¸ªé’±åŒ…ï¼Œè¿™å…­ä¸ªé’±åŒ…ä¸­æˆ–è®¸è¿˜åŒ…å«ç§äººå€Ÿå€ºï¼Œå› æ­¤å®é™…å±…æ°‘å€Ÿå€ºç‡å¯èƒ½è¿œé«˜äºè¿™ä¸ªæ•°å­—ã€‚</p><p>ä¸­å›½å±…æ°‘å·²ç»é€æ¸ç”±èµ„é‡‘ä¾›ç»™æ–¹å˜ä¸ºèµ„é‡‘çš„éœ€æ±‚æ–¹ã€‚é«˜æˆ¿ä»·æç©ºäº†å¹´è½»äººä»¬çš„é’±åŒ…ï¼Œæˆ¿è´·è½¦è´·è´Ÿå€ºç´¯ç´¯ï¼Œè°ˆä½•å‚¨è“„ï¼Ÿ</p><h3 id="2-5-å¦‚ä½•ä»¤å±…æ°‘å‚¨è“„ç‡ä¸Šå‡ï¼Ÿ"><a href="#2-5-å¦‚ä½•ä»¤å±…æ°‘å‚¨è“„ç‡ä¸Šå‡ï¼Ÿ" class="headerlink" title="2.5 å¦‚ä½•ä»¤å±…æ°‘å‚¨è“„ç‡ä¸Šå‡ï¼Ÿ"></a>2.5 å¦‚ä½•ä»¤å±…æ°‘å‚¨è“„ç‡ä¸Šå‡ï¼Ÿ</h3><p>2.5 å’Œ 2.6 å‚è€ƒè‡ª<a href="https://www.thepaper.cn/newsDetail_forward_11420531">ã€Šä»å…»è€è´Ÿæ‹…å’Œå‚¨è“„ç‡ä¹‹é—´çš„å…³ç³»ï¼Œæ·±å…¥è§£æä¸­å›½â€œè€é¾„åŒ–ã€‹</a>ä¸€æ–‡ã€‚</p><p>ç›®å‰æˆ‘å›½çš„å‚¨è“„ä¸­ï¼Œæœ‰è¾ƒå¤§çš„ä»½é¢æ˜¯æ¥è‡ªæ”¿åºœå’Œä¼ä¸šï¼Œè¿™æ˜¯å›½æ°‘ç»æµåˆ†é…å¤±è¡¡æ‰€é€ æˆçš„ã€‚è°ƒæ•´åˆ†é…ï¼Œä½¿å±…æ°‘çš„æ”¶å…¥ä»½é¢ä¸Šå‡ï¼Œå¯¹ç¼“è§£å…»è€å‹åŠ›ååˆ†å…³é”®ã€‚åŒæ—¶ï¼Œè°ƒæ•´æ”¿åºœæ”¯å‡ºç»“æ„ï¼Œå¢åŠ å…¬å…±ç‰©å“ä¾›ç»™ï¼Œä½¿å±…æ°‘ç”¨äºè¿™ç±»äº§å“çš„æ”¯å‡ºé™ä¸‹æ¥ï¼Œå¢åŠ ä»–ä»¬çš„å‡€è´¢å¯Œï¼Œæœ‰åŠ©äºä»–ä»¬æé«˜å…»è€ä¿éšœèƒ½åŠ›ã€‚</p><p>åœ¨é«˜å‚¨è“„ç‡ä¸‹ï¼Œä¹‹æ‰€ä»¥ä»ç„¶é¢ä¸´å·¨å¤§çš„å…»è€å‹åŠ›ï¼Œä¸è¿‡é«˜çš„æ”¶å…¥åˆ†é…å·®è·æœ‰å…³ï¼Œä½æ”¶å…¥äººç¾¤çš„å…»è€é£é™©è¾ƒé«˜çš„ï¼Œä»–ä»¬éœ€è¦ä¸ºå…»è€è€Œå‚¨è“„ï¼Œä½†æ˜¯æ°æ°æ˜¯ä»–ä»¬çš„æ”¶å…¥æ°´å¹³è¿‡ä½ï¼Œæ— åŠ›å‚¨è“„ã€‚æ‰€ä»¥å¯¹å…»è€é—®é¢˜å¹¶ä¸èƒ½ä»é—®é¢˜æœ¬èº«æ¥è°ˆè®ºã€‚åº”å¯¹æªæ–½ä¹Ÿåº”è¯¥æ›´å…·æœ‰ç»¼åˆæ€§å’Œæ•´ä½“æ€§ï¼Œè°ƒèŠ‚æ”¶å…¥åˆ†é…å°¤å…¶é‡è¦ã€‚</p><h3 id="2-6-å¦‚ä½•æå‡å…»è€é‡‘ç¼´è´¹æ¯”ç‡ï¼Ÿ"><a href="#2-6-å¦‚ä½•æå‡å…»è€é‡‘ç¼´è´¹æ¯”ç‡ï¼Ÿ" class="headerlink" title="2.6 å¦‚ä½•æå‡å…»è€é‡‘ç¼´è´¹æ¯”ç‡ï¼Ÿ"></a>2.6 å¦‚ä½•æå‡å…»è€é‡‘ç¼´è´¹æ¯”ç‡ï¼Ÿ</h3><p>ç›®å‰ä¸­å›½çš„å…»è€é‡‘ç¼´è´¹ç‡æ¯”è¾ƒä½ã€‚ä¸­å›½çš„éæ­£è§„å°±ä¸šè§„æ¨¡è¾ƒå¤§ï¼Œè¿™éƒ¨åˆ†å°±ä¸šè€…ä¸»è¦æ˜¯ä¸­ä½æ”¶å…¥äººç¾¤ï¼Œä»–ä»¬ä¹‹æ‰€ä»¥ä¸æ„¿æ„å‚ä¿ï¼ŒåŸå› åœ¨äºç¼´çº³å…»è€é‡‘å¹¶ä¸ç¬¦åˆä»–ä»¬çš„åˆ©ç›Šæœ€å¤§åŒ–ç›®æ ‡ã€‚</p><p>æœ‰ä¸¤ä¸ªæ¯”è¾ƒæ˜æ˜¾çš„ç›´æ¥åŸå› ã€‚</p><p>ä¸€æ˜¯ä¸­å›½è¿‘å¹´æ¥çš„é€šè´§è†¨èƒ€ç‡è¾ƒé«˜ï¼Œè¿™å°±æ„å‘³ç€æœªæ¥çš„é¢†å–çš„å…»è€é‡‘ç°å€¼ä¹Ÿè¾ƒå°‘ï¼›</p><p>äºŒæ˜¯ä¸­å›½çš„åŸå¸‚ä½æˆ¿ä»·æ ¼å¿«é€Ÿä¸Šæ¶¨ï¼Œä½æˆ¿æŠ•èµ„çš„å›æŠ¥ç‡è¾ƒé«˜ï¼Œè¿™ä¹Ÿä¿ƒä½¿åŠ³åŠ¨è€…æ›´æ„¿æ„é¢†å–è¾ƒé«˜çš„å·¥èµ„è€Œä¸å¤ªçœ‹é‡å…»è€é‡‘ï¼Œå› ä¸ºå½“å‰é¢†å–å·¥èµ„æ”¶å…¥ï¼Œå¯ä»¥å°½æ—©ç§¯ç´¯èµ·è¶³å¤Ÿçš„èµ„é‡‘ç”¨äºä¹°æˆ¿æˆ–è€…å…¶ä»–æŠ•èµ„ï¼Œè€Œå…»è€é‡‘åªèƒ½åˆ°é€€ä¼‘ä»¥åæ‰èƒ½é¢†å–ã€‚</p><p>é«˜é€šèƒ€å’Œèµ„äº§ä»·æ ¼è†¨èƒ€ä½¿äººä»¬å¢å¼ºäº†æµåŠ¨æ€§åå¥½ï¼Œè€Œç¼´çº³å…»è€é‡‘å¯¹ä¸ªäººæ¥è¯´æ„å‘³ç€å¢åŠ äº†æµåŠ¨æ€§è¾ƒä½çš„èµ„äº§ï¼ŒåŠ³åŠ¨è€…æ›´æ„¿æ„é€‰æ‹©å“ªæ€•æ˜¯ç•¥å¾®é«˜ä¸€äº›çš„å·¥èµ„ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªè¾ƒä½çš„å·¥èµ„åŠ ä¸Šä¸€ä»½å…»è€ä¿é™©ã€‚</p><p>å› è€Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¼ºåˆ¶ç¼´çº³å…»è€ä¿é™©çš„è§„å®šå¾€å¾€éš¾ä»¥å¾—åˆ°è½å®ï¼Œä¼ä¸šå’Œé›‡å‘˜ä¼šåŠªåŠ›é‡‡å–æªæ–½è§„é¿è¿™ç§è§„å®šã€‚å³ä½¿æ”¿åºœå‡ºå°ä¸¥æ ¼çš„è§„å®šï¼Œå¼ºåˆ¶ä¼ä¸šç¼´çº³å…»è€ä¿é™©ï¼Œä¸ªäººå’Œä¼ä¸šä¹Ÿéƒ½æœ‰å¾ˆå¼ºçš„åŠ¨æœºæ¥è§„é¿ã€‚</p><p>å½“ç„¶ï¼Œç¤¾ä¼šå…»è€ä¿éšœçš„å‚ä¿ç‡æé«˜ç¼“æ…¢çš„åŸå› æ˜¯å¤šæ–¹é¢çš„ï¼Œä¾‹å¦‚ç¼´è´¹åœ¨åœ°åŒºé—´ä¸å¯æºå¸¦ï¼Œé«˜é€šèƒ€å’Œèµ„äº§å›æŠ¥è¾ƒé«˜å¯èƒ½æ˜¯ä¸€ä¸ªé‡è¦åŸå› ã€‚å› æ­¤ï¼Œæ²»ç†é€šèƒ€å’Œç»´æŒæˆ¿ä»·ç¨³å®šæœ‰åŠ©äºå…»è€ä½“åˆ¶çš„å®Œå–„ã€‚</p><h2 id="3-æ–‡ç†ä¹‹äº‰"><a href="#3-æ–‡ç†ä¹‹äº‰" class="headerlink" title="3. æ–‡ç†ä¹‹äº‰"></a>3. æ–‡ç†ä¹‹äº‰</h2><p>â€œæ–‡ç§‘ç”Ÿå¤ªå¤šâ€çš„è¯´æ³•åœ¨ç½‘ç»œä¸Šå¼•å‘è½©ç„¶å¤§æ³¢ã€‚è¯é¢˜â€œ#æ–‡ç§‘ç”Ÿå¤ªå¤šä¼šå½±å“å›½å®¶å‘å±•å—â€åœ¨ä¸­å›½ç¤¾äº¤åª’ä½“å¾®åšä¸Šçš„é˜…è¯»é‡è¶…è¿‡3.2äº¿æ¬¡ï¼Œå¤§éƒ¨åˆ†ç½‘å‹å¯¹æ­¤æŒæ‰¹è¯„æ€åº¦ã€‚</p><p><img src="/2021/04/21/%E5%A4%AE%E8%A1%8C%E5%B7%A5%E4%BD%9C%E8%AE%BA%E6%96%87%E8%AF%BB%E5%90%8E%E6%84%9F/æ–‡ç§‘ç”Ÿå¤ªå¤š.png" alt></p><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œæˆ‘å›½ç†ç§‘ç”Ÿä¸æ–‡ç§‘ç”Ÿç´ æ¥ä¸ç¦ï¼Œå‰è€…è”‘è§†åè€…æ²¡é€»è¾‘ï¼Œåè€…é„™å¤·å‰è€…æ²¡æ–‡åŒ–ã€‚</p><p>ä¸è¿‡åœ¨ç½‘ä¸Šçš„è®ºæˆ˜ä¸­ï¼Œç†ç§‘ç”Ÿåº•æ°”æ›´è¶³ä¸€äº›ã€‚æ¯•ç«Ÿç¤¾ä¼šä¸Šä¸€ç›´æµä¼ ç€â€œå­¦å¥½æ•°ç†åŒ–ã€èµ°éå¤©ä¸‹éƒ½ä¸æ€•â€çš„è¯´æ³•ã€‚ç›¸å¯¹åœ°ï¼Œæ–‡ç§‘ä¸€ç›´è¢«è®¤ä¸ºâ€œæ— ç”¨â€ã€‚</p><p>2020å¹´ï¼Œä¸€åæ¥è‡ªæ¹–å—çœçš„é«˜è€ƒçŠ¶å…ƒå› åœ¨å¤§å­¦é€‰æ‹©äº†è€ƒå¤ä¸“ä¸šï¼Œå†åº¦åœ¨ç¤¾äº¤åª’ä½“å¼•å‘äº‰è®ºã€‚æœ‰ç½‘å‹è®¤ä¸ºè€ƒå¤ä¸“ä¸šâ€œæ²¡é’±é€”â€ï¼Œè§„åŠå¥¹æ¢ä¸“ä¸šã€‚</p><p>ä½†æ˜¯äººä»¬åœ¨è®¨è®ºæ–‡ç§‘å’Œç†ç§‘çš„æ—¶å€™ï¼Œæ˜¯å¦èƒ½å¤Ÿç¡®åˆ‡è¯´å‡ºä»€ä¹ˆæ˜¯â€œæ–‡ç§‘â€ï¼Œä»€ä¹ˆæ˜¯â€œç†ç§‘â€å‘¢ï¼Ÿ</p><p>å…³äºæ–‡ç§‘ç”Ÿå’Œç†ç§‘ç”Ÿçš„å®šä¹‰ï¼Œå»ºè®®çœ‹ä¸‹<a href="https://matters.news/@xiemeng/%E4%BB%8E%E7%BF%BB%E8%AF%91%E7%A4%BE%E4%BC%9A%E5%AD%A6%E7%9A%84%E8%A7%92%E5%BA%A6%E7%9C%8B%E6%96%87%E7%A7%91%E7%94%9F%E4%B8%8E%E7%90%86%E7%A7%91%E7%94%9F%E7%9A%84%E4%BA%92%E7%9B%B8%E9%84%99%E5%A4%B7-bafyreicrdy7y4fnmjktwnsxv6ljmkiq3ga4yqo5lvjzn3ng74fog32a6jm">è¿™ç¯‡æ–‡ç« çš„ä»‹ç»</a>ï¼Œç›¸å½“å…¨é¢ã€‚</p><p>é€è¿‡ç°è±¡çœ‹æœ¬è´¨ï¼Œç°å®æƒ…å†µæ˜¯ä¸€äº›ä¸­å›½å¤§å­¦æ–‡ç§‘æ¯•ä¸šç”Ÿç¡®å®é¢ä¸´â€œå°±ä¸šéš¾â€å’Œâ€œè–ªèµ„ä½â€çš„å›°å¢ƒã€‚</p><p>åŠ ä¸Š2019å¹´å›½åŠ¡é™¢å‘å¸ƒçš„èŒä¸šæ•™è‚²æ”¹é©æ–¹æ¡ˆï¼Œèƒ½å¤Ÿçœ‹å‡ºå›½å®¶å…¶å®æ˜¯æƒ³è§£å†³ä¸€äº›è¡Œä¸šäººå£è¿‡å‰©ä½†é«˜çº§æŠ€å·¥äººæ‰çŸ­ç¼ºçš„é—®é¢˜ã€‚æ‰€ä»¥é—®é¢˜ä¸åœ¨äºæ–‡ç†ä¹‹äº‰ï¼Œè€Œåœ¨äºäººæ‰åˆ†é…ä¸å‡ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>äººå£ç»“æ„é—®é¢˜å·²æˆä¸ºä¸­å›½æœªæ¥å‘å±•æ‰€å¿…é¡»é¢å¯¹çš„é—®é¢˜ã€‚å¤®è¡Œè®ºæ–‡æå‡ºäº†ä¸€æ½å­è§£å†³æ–¹æ³•ï¼ŒåŒ…æ‹¬è§£é™¤ç”Ÿè‚²é™åˆ¶ã€æå‡å‚¨è“„ç‡ã€ç¨³æˆ¿ä»·å’Œé¼“åŠ±åˆ›æ–°ç­‰ï¼›ä½†ä¹ŸåŒ…å«ä¸€äº›æœ¬äººæ‰€ä¸ç†è§£çš„è§‚ç‚¹ï¼Œå¦‚å‚¨è“„ç‡ä¸äººå£ç»“æ„çš„å…³ç³»ï¼Œå…³äºâ€œåƒè‹¦â€çš„è®ºè¿°ï¼Œä»¥åŠâ€œçˆ¹æˆ³æˆ³ä¸€ä¸ªï¼Œå¨˜æˆ³æˆ³ä¸€çªâ€çš„è§‚ç‚¹ç­‰ã€‚ç¬”è€…å°±ä¸Šè¿°éƒ¨åˆ†è§‚ç‚¹è¿›è¡Œäº†æ·±å…¥è°ƒç ”å’Œæ€è¾©ã€‚</p><h1 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h1><p>èƒ¡ç¿ , è®¸å¬å…ƒ. äººå£è€é¾„åŒ–å¯¹å‚¨è“„ç‡å½±å“çš„å®è¯ç ”ç©¶[J]. ç»æµå­¦ (å­£åˆŠ), 2014, 13(4).</p><p>United Nations. Department of Economic and Social Affairs. World Economic and Social Survey 2007: Development in an ageing world[M]. UN, 2007.</p><p>ä¸€äº›å‚è€ƒæ–‡ç« é“¾æ¥å·²ç›´æ¥åœ¨åŸæ–‡åˆ—å‡ºã€‚</p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
    <tags>
      
      <tag>middle income trap</tag>
      
      <tag>social sciences</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘Dockerç½‘ç»œ</title>
    <link href="/2021/04/18/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Docker%E7%BD%91%E7%BB%9C/"/>
    <url>/2021/04/18/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Docker%E7%BD%91%E7%BB%9C/</url>
    
    <content type="html"><![CDATA[<p>Datawhale Dockerå­¦ä¹ ç¬”è®°ç¬¬å››ç¯‡<br><!--more---></p><h1 id="Docker-åŸºç¡€ç½‘ç»œä»‹ç»"><a href="#Docker-åŸºç¡€ç½‘ç»œä»‹ç»" class="headerlink" title="Docker åŸºç¡€ç½‘ç»œä»‹ç»"></a>Docker åŸºç¡€ç½‘ç»œä»‹ç»</h1><h2 id="å¤–éƒ¨è®¿é—®å®¹å™¨"><a href="#å¤–éƒ¨è®¿é—®å®¹å™¨" class="headerlink" title="å¤–éƒ¨è®¿é—®å®¹å™¨"></a>å¤–éƒ¨è®¿é—®å®¹å™¨</h2><p>å®¹å™¨ä¸­å¯ä»¥è¿è¡Œä¸€äº›ç½‘ç»œåº”ç”¨ï¼Œè¦è®©å¤–éƒ¨ä¹Ÿå¯ä»¥è®¿é—®è¿™äº›åº”ç”¨ï¼Œå¯ä»¥é€šè¿‡-Pæˆ–-på‚æ•°æ¥æŒ‡å®šç«¯å£æ˜ å°„ã€‚</p><p>å½“ä½¿ç”¨-Pæ ‡è®°æ—¶ï¼ŒDockerä¼šéšæœºæ˜ å°„ä¸€ä¸ªç«¯å£åˆ°å†…éƒ¨å®¹å™¨å¼€æ”¾çš„ç½‘ç»œç«¯å£ã€‚ ä½¿ç”¨docker container lså¯ä»¥çœ‹åˆ°ï¼Œæœ¬åœ°ä¸»æœºçš„ 32768 è¢«æ˜ å°„åˆ°äº†å®¹å™¨çš„ 80 ç«¯å£ã€‚æ­¤æ—¶è®¿é—®æœ¬æœºçš„ 32768 ç«¯å£å³å¯è®¿é—®å®¹å™¨å†… NGINX é»˜è®¤é¡µé¢ã€‚</p><pre><code>$ docker run -d -P nginx:alpine$ docker container ls -lCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                   NAMESfae320d08268        nginx:alpine        &quot;/docker-entrypoint.â€¦&quot;   24 seconds ago      Up 20 seconds       0.0.0.0:32768-&gt;80/tcp   bold_mcnulty</code></pre><p>åŒæ ·çš„ï¼Œå¯ä»¥é€šè¿‡docker logså‘½ä»¤æ¥æŸ¥çœ‹è®¿é—®è®°å½•ã€‚</p><pre><code>$ docker logs fa172.17.0.1 - - [25/Aug/2020:08:34:04 +0000] &quot;GET / HTTP/1.1&quot; 200 612 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:80.0) Gecko/20100101 Firefox/80.0&quot; &quot;-&quot;</code></pre><p>-påˆ™å¯ä»¥æŒ‡å®šè¦æ˜ å°„çš„ç«¯å£ï¼Œå¹¶ä¸”ï¼Œåœ¨ä¸€ä¸ªæŒ‡å®šç«¯å£ä¸Šåªå¯ä»¥ç»‘å®šä¸€ä¸ªå®¹å™¨ã€‚æ”¯æŒçš„æ ¼å¼æœ‰<code>ip:hostPort:containerPort | ip::containerPort | hostPort:containerPort</code>.</p><h2 id="å®¹å™¨äº’è”"><a href="#å®¹å™¨äº’è”" class="headerlink" title="å®¹å™¨äº’è”"></a>å®¹å™¨äº’è”</h2><p>ä¸‹é¢å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„ Dockerç½‘ç»œã€‚</p><pre><code>$ docker network create -d bridge my-net</code></pre><p>-då‚æ•°æŒ‡å®šDockerç½‘ç»œç±»å‹ï¼Œæœ‰bridge overlay,å…¶ä¸­overlayç½‘ç»œç±»å‹ç”¨äºSwarm modeï¼Œåœ¨æœ¬å°èŠ‚ä¸­ä½ å¯ä»¥å¿½ç•¥å®ƒã€‚</p><p>è¿è¡Œä¸€ä¸ªå®¹å™¨å¹¶è¿æ¥åˆ°æ–°å»ºçš„my-netç½‘ç»œ</p><pre><code>$ docker run -it --rm --name busybox1 --network my-net busybox sh</code></pre><p>æ‰“å¼€æ–°çš„ç»ˆç«¯ï¼Œå†è¿è¡Œä¸€ä¸ªå®¹å™¨å¹¶åŠ å…¥åˆ° my-netç½‘ç»œ</p><pre><code>$ docker run -it --rm --name busybox2 --network my-net busybox sh</code></pre><p>å†æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯æŸ¥çœ‹å®¹å™¨ä¿¡æ¯</p><pre><code>$ docker container lsCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMESb47060aca56b        busybox             &quot;sh&quot;                11 minutes ago      Up 11 minutes                           busybox28720575823ec        busybox             &quot;sh&quot;                16 minutes ago      Up 16 minutes                           busybox1</code></pre><p>ä¸‹é¢é€šè¿‡ pingæ¥è¯æ˜busybox1å®¹å™¨å’Œbusybox2å®¹å™¨å»ºç«‹äº†äº’è”å…³ç³»ã€‚ åœ¨busybox1å®¹å™¨è¾“å…¥ä»¥ä¸‹å‘½ä»¤</p><pre><code>/ # ping busybox2PING busybox2 (172.19.0.3): 56 data bytes64 bytes from 172.19.0.3: seq=0 ttl=64 time=0.072 ms64 bytes from 172.19.0.3: seq=1 ttl=64 time=0.118 ms</code></pre><p>ç”¨pingæ¥æµ‹è¯•è¿æ¥busybox2å®¹å™¨ï¼Œå®ƒä¼šè§£ææˆ 172.19.0.3ã€‚ åŒç†åœ¨busybox2å®¹å™¨æ‰§è¡Œping busybox1ï¼Œä¹Ÿä¼šæˆåŠŸè¿æ¥åˆ°ã€‚</p><pre><code>/ # ping busybox1PING busybox1 (172.19.0.2): 56 data bytes64 bytes from 172.19.0.2: seq=0 ttl=64 time=0.064 ms64 bytes from 172.19.0.2: seq=1 ttl=64 time=0.143 ms</code></pre><p>è¿™æ ·ï¼Œbusybox1 å®¹å™¨å’Œ busybox2 å®¹å™¨å»ºç«‹äº†äº’è”å…³ç³»ã€‚</p><p>Docker Compose å¦‚æœä½ æœ‰å¤šä¸ªå®¹å™¨ä¹‹é—´éœ€è¦äº’ç›¸è¿æ¥ï¼Œæ¨èä½¿ç”¨DockerComposeã€‚</p><h2 id="é…ç½®DNS"><a href="#é…ç½®DNS" class="headerlink" title="é…ç½®DNS"></a>é…ç½®DNS</h2><p>å¦‚ä½•è‡ªå®šä¹‰é…ç½®å®¹å™¨çš„ä¸»æœºåå’Œ DNS å‘¢ï¼Ÿç§˜è¯€å°±æ˜¯Dockeråˆ©ç”¨è™šæ‹Ÿæ–‡ä»¶æ¥æŒ‚è½½å®¹å™¨çš„ 3ä¸ªç›¸å…³é…ç½®æ–‡ä»¶ã€‚</p><p>åœ¨å®¹å™¨ä¸­ä½¿ç”¨ mountå‘½ä»¤å¯ä»¥çœ‹åˆ°æŒ‚è½½ä¿¡æ¯ï¼š</p><pre><code>$ mount/dev/disk/by-uuid/1fec...ebdf on /etc/hostname type ext4 .../dev/disk/by-uuid/1fec...ebdf on /etc/hosts type ext4 ...tmpfs on /etc/resolv.conf type tmpfs ...</code></pre><p>è¿™ç§æœºåˆ¶å¯ä»¥è®©å®¿ä¸»ä¸»æœº DNS ä¿¡æ¯å‘ç”Ÿæ›´æ–°åï¼Œæ‰€æœ‰Dockerå®¹å™¨çš„ DNS é…ç½®é€šè¿‡ /etc/resolv.confæ–‡ä»¶ç«‹åˆ»å¾—åˆ°æ›´æ–°ã€‚</p><p>é…ç½®å…¨éƒ¨å®¹å™¨çš„ DNS ï¼Œä¹Ÿå¯ä»¥åœ¨ /etc/docker/daemon.json æ–‡ä»¶ä¸­å¢åŠ ä»¥ä¸‹å†…å®¹æ¥è®¾ç½®ã€‚</p><pre><code>&#123;  &quot;dns&quot; : [    &quot;114.114.114.114&quot;,    &quot;8.8.8.8&quot;  ]&#125;</code></pre><p>è¿™æ ·æ¯æ¬¡å¯åŠ¨çš„å®¹å™¨ DNS è‡ªåŠ¨é…ç½®ä¸º 114.114.114.114 å’Œ8.8.8.8ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥è¯æ˜å…¶å·²ç»ç”Ÿæ•ˆã€‚</p><pre><code>$ docker run -it --rm ubuntu:18.04  cat etc/resolv.confnameserver 114.114.114.114nameserver 8.8.8.8</code></pre><p>å¦‚æœç”¨æˆ·æƒ³è¦æ‰‹åŠ¨æŒ‡å®šå®¹å™¨çš„é…ç½®ï¼Œå¯ä»¥åœ¨ä½¿ç”¨docker runå‘½ä»¤å¯åŠ¨å®¹å™¨æ—¶åŠ å…¥å¦‚ä¸‹å‚æ•°ï¼š -h HOSTNAMEæˆ–è€…â€”hostname=HOSTNAMEè®¾å®šå®¹å™¨çš„ä¸»æœºåï¼Œå®ƒä¼šè¢«å†™åˆ°å®¹å™¨å†…çš„/etc/hostname å’Œ /etc/hostsã€‚ä½†å®ƒåœ¨å®¹å™¨å¤–éƒ¨çœ‹ä¸åˆ°ï¼Œæ—¢ä¸ä¼šåœ¨docker container lsä¸­æ˜¾ç¤ºï¼Œä¹Ÿä¸ä¼šåœ¨å…¶ä»–çš„å®¹å™¨çš„/etc/hostsçœ‹åˆ°ã€‚</p><p>â€”dns=IP_ADDRESSæ·»åŠ  DNS æœåŠ¡å™¨åˆ°å®¹å™¨çš„/etc/resolv.confä¸­ï¼Œè®©å®¹å™¨ç”¨è¿™ä¸ªæœåŠ¡å™¨æ¥è§£ææ‰€æœ‰ä¸åœ¨ /etc/hosts ä¸­çš„ä¸»æœºåã€‚</p><p>â€”dns-search=DOMAINè®¾å®šå®¹å™¨çš„æœç´¢åŸŸï¼Œå½“è®¾å®šæœç´¢åŸŸä¸º.example.comæ—¶ï¼Œåœ¨æœç´¢ä¸€ä¸ªåä¸ºhostçš„ä¸»æœºæ—¶ï¼ŒDNS ä¸ä»…æœç´¢ hostï¼Œè¿˜ä¼šæœç´¢host.example.comã€‚</p><p><strong>æ³¨æ„ï¼š</strong>å¦‚æœåœ¨å®¹å™¨å¯åŠ¨æ—¶æ²¡æœ‰æŒ‡å®šæœ€åä¸¤ä¸ªå‚æ•°ï¼ŒDockerä¼šé»˜è®¤ç”¨ä¸»æœºä¸Šçš„/etc/resolv.confæ¥é…ç½®å®¹å™¨ã€‚</p><h1 id="Dockerçš„ç½‘ç»œæ¨¡å¼"><a href="#Dockerçš„ç½‘ç»œæ¨¡å¼" class="headerlink" title="Dockerçš„ç½‘ç»œæ¨¡å¼"></a>Dockerçš„ç½‘ç»œæ¨¡å¼</h1><p>å¯ä»¥é€šè¿‡docker network lsæŸ¥çœ‹ç½‘ç»œï¼Œé»˜è®¤åˆ›å»ºä¸‰ç§ç½‘ç»œã€‚</p><pre><code>[root@localhost ~]# docker network lsNETWORK ID          NAME                DRIVER              SCOPE688d1970f72e        bridge              bridge              local885da101da7d        host                host                localf4f1b3cf1b7f        none                null                local</code></pre><p>å¸¸è§ç½‘ç»œçš„å«ä¹‰ï¼š</p><div class="table-container"><table><thead><tr><th>ç½‘ç»œæ¨¡å¼</th><th>ç®€ä»‹</th></tr></thead><tbody><tr><td>Bridge</td><td>ä¸ºæ¯ä¸€ä¸ªå®¹å™¨åˆ†é…ã€è®¾ç½® IP ç­‰ï¼Œå¹¶å°†å®¹å™¨è¿æ¥åˆ°ä¸€ä¸ª docker0 è™šæ‹Ÿç½‘æ¡¥ï¼Œé»˜è®¤ä¸ºè¯¥æ¨¡å¼ã€‚</td></tr><tr><td>Host</td><td>å®¹å™¨å°†ä¸ä¼šè™šæ‹Ÿå‡ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„ IP ç­‰ï¼Œè€Œæ˜¯ä½¿ç”¨å®¿ä¸»æœºçš„ IP å’Œç«¯å£ã€‚</td></tr><tr><td>None</td><td>å®¹å™¨æœ‰ç‹¬ç«‹çš„ Network namespaceï¼Œä½†å¹¶æ²¡æœ‰å¯¹å…¶è¿›è¡Œä»»ä½•ç½‘ç»œè®¾ç½®ï¼Œå¦‚åˆ†é… veth pair å’Œç½‘æ¡¥è¿æ¥ï¼ŒIP ç­‰ã€‚</td></tr><tr><td>Container</td><td>æ–°åˆ›å»ºçš„å®¹å™¨ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ç½‘å¡å’Œé…ç½®è‡ªå·±çš„ IPï¼Œè€Œæ˜¯å’Œä¸€ä¸ªæŒ‡å®šçš„å®¹å™¨å…±äº« IPã€ç«¯å£èŒƒå›´ç­‰ã€‚</td></tr></tbody></table></div><h2 id="Bridge-æ¨¡å¼"><a href="#Bridge-æ¨¡å¼" class="headerlink" title="Bridge æ¨¡å¼"></a>Bridge æ¨¡å¼</h2><p>å½“Dockerè¿›ç¨‹å¯åŠ¨æ—¶ï¼Œä¼šåœ¨ä¸»æœºä¸Šåˆ›å»ºä¸€ä¸ªåä¸ºdocker0çš„è™šæ‹Ÿç½‘æ¡¥ï¼Œæ­¤ä¸»æœºä¸Šå¯åŠ¨çš„Dockerå®¹å™¨ä¼šè¿æ¥åˆ°è¿™ä¸ªè™šæ‹Ÿç½‘æ¡¥ä¸Šï¼Œé™„åŠ åœ¨å…¶ä¸Šçš„ä»»ä½•ç½‘å¡ä¹‹é—´éƒ½èƒ½è‡ªåŠ¨è½¬å‘æ•°æ®åŒ…ã€‚è™šæ‹Ÿç½‘æ¡¥çš„å·¥ä½œæ–¹å¼å’Œç‰©ç†äº¤æ¢æœºç±»ä¼¼ï¼Œè¿™æ ·ä¸»æœºä¸Šçš„æ‰€æœ‰å®¹å™¨å°±é€šè¿‡äº¤æ¢æœºè¿åœ¨äº†ä¸€ä¸ªäºŒå±‚ç½‘ç»œä¸­ã€‚ä»docker0å­ç½‘ä¸­åˆ†é…ä¸€ä¸ª IP ç»™å®¹å™¨ä½¿ç”¨ï¼Œå¹¶è®¾ç½® docker0 çš„ IP åœ°å€ä¸ºå®¹å™¨çš„é»˜è®¤ç½‘å…³ã€‚åœ¨ä¸»æœºä¸Šåˆ›å»ºä¸€å¯¹è™šæ‹Ÿç½‘å¡veth pairè®¾å¤‡ï¼ŒDocker å°† veth pair è®¾å¤‡çš„ä¸€ç«¯æ”¾åœ¨æ–°åˆ›å»ºçš„å®¹å™¨ä¸­ï¼Œå¹¶å‘½åä¸ºeth0ï¼ˆå®¹å™¨çš„ç½‘å¡ï¼‰ï¼Œå¦ä¸€ç«¯æ”¾åœ¨ä¸»æœºä¸­ï¼Œä»¥vethxxxè¿™æ ·ç±»ä¼¼çš„åå­—å‘½åï¼Œå¹¶å°†è¿™ä¸ªç½‘ç»œè®¾å¤‡åŠ å…¥åˆ° docker0 ç½‘æ¡¥ä¸­ã€‚å¯ä»¥é€šè¿‡brctl showå‘½ä»¤æŸ¥çœ‹ã€‚</p><h2 id="Host-æ¨¡å¼"><a href="#Host-æ¨¡å¼" class="headerlink" title="Host æ¨¡å¼"></a>Host æ¨¡å¼</h2><p>host ç½‘ç»œæ¨¡å¼éœ€è¦åœ¨åˆ›å»ºå®¹å™¨æ—¶é€šè¿‡å‚æ•° â€”net host æˆ–è€… â€”network host æŒ‡å®šï¼›<br>é‡‡ç”¨ host ç½‘ç»œæ¨¡å¼çš„ Docker Containerï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºçš„ IP åœ°å€ä¸å¤–ç•Œè¿›è¡Œé€šä¿¡ï¼Œè‹¥å®¿ä¸»æœºçš„ eth0 æ˜¯ä¸€ä¸ªå…¬æœ‰ IPï¼Œé‚£ä¹ˆå®¹å™¨ä¹Ÿæ‹¥æœ‰è¿™ä¸ªå…¬æœ‰ IPã€‚åŒæ—¶å®¹å™¨å†…æœåŠ¡çš„ç«¯å£ä¹Ÿå¯ä»¥ä½¿ç”¨å®¿ä¸»æœºçš„ç«¯å£ï¼Œæ— éœ€é¢å¤–è¿›è¡Œ NAT è½¬æ¢ï¼›<br>host ç½‘ç»œæ¨¡å¼å¯ä»¥è®©å®¹å™¨å…±äº«å®¿ä¸»æœºç½‘ç»œæ ˆï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å¤–éƒ¨ä¸»æœºä¸å®¹å™¨ç›´æ¥é€šä¿¡ï¼Œä½†æ˜¯å®¹å™¨çš„ç½‘ç»œç¼ºå°‘éš”ç¦»æ€§ã€‚</p><h2 id="None-æ¨¡å¼"><a href="#None-æ¨¡å¼" class="headerlink" title="None æ¨¡å¼"></a>None æ¨¡å¼</h2><p>none ç½‘ç»œæ¨¡å¼æ˜¯æŒ‡ç¦ç”¨ç½‘ç»œåŠŸèƒ½ï¼Œåªæœ‰ lo æ¥å£ local çš„ç®€å†™ï¼Œä»£è¡¨ 127.0.0.1ï¼Œå³ localhost æœ¬åœ°ç¯å›æ¥å£ã€‚åœ¨åˆ›å»ºå®¹å™¨æ—¶é€šè¿‡å‚æ•° â€”net none æˆ–è€… â€”network none æŒ‡å®šï¼›<br>none ç½‘ç»œæ¨¡å¼å³ä¸ä¸º Docker Container åˆ›å»ºä»»ä½•çš„ç½‘ç»œç¯å¢ƒï¼Œå®¹å™¨å†…éƒ¨å°±åªèƒ½ä½¿ç”¨ loopback ç½‘ç»œè®¾å¤‡ï¼Œä¸ä¼šå†æœ‰å…¶ä»–çš„ç½‘ç»œèµ„æºã€‚å¯ä»¥è¯´ none æ¨¡å¼ä¸º Docke Container åšäº†æå°‘çš„ç½‘ç»œè®¾å®šï¼Œä½†æ˜¯ä¿—è¯è¯´å¾—å¥½â€œå°‘å³æ˜¯å¤šâ€ï¼Œåœ¨æ²¡æœ‰ç½‘ç»œé…ç½®çš„æƒ…å†µä¸‹ï¼Œä½œä¸º Docker å¼€å‘è€…ï¼Œæ‰èƒ½åœ¨è¿™åŸºç¡€åšå…¶ä»–æ— é™å¤šå¯èƒ½çš„ç½‘ç»œå®šåˆ¶å¼€å‘ã€‚è¿™ä¹Ÿæ°å·§ä½“ç°äº† Docker è®¾è®¡ç†å¿µçš„å¼€æ”¾ã€‚</p><h2 id="Container-æ¨¡å¼"><a href="#Container-æ¨¡å¼" class="headerlink" title="Container æ¨¡å¼"></a>Container æ¨¡å¼</h2><p>Container ç½‘ç»œæ¨¡å¼æ˜¯ Docker ä¸­ä¸€ç§è¾ƒä¸ºç‰¹åˆ«çš„ç½‘ç»œçš„æ¨¡å¼ã€‚åœ¨åˆ›å»ºå®¹å™¨æ—¶é€šè¿‡å‚æ•° â€”net container:å·²è¿è¡Œçš„å®¹å™¨åç§°|ID æˆ–è€… â€”network container:å·²è¿è¡Œçš„å®¹å™¨åç§°|ID æŒ‡å®šï¼›<br>å¤„äºè¿™ä¸ªæ¨¡å¼ä¸‹çš„ Docker å®¹å™¨ä¼šå…±äº«ä¸€ä¸ªç½‘ç»œæ ˆï¼Œè¿™æ ·ä¸¤ä¸ªå®¹å™¨ä¹‹é—´å¯ä»¥ä½¿ç”¨ localhost é«˜æ•ˆå¿«é€Ÿé€šä¿¡ã€‚</p><p>Container ç½‘ç»œæ¨¡å¼å³æ–°åˆ›å»ºçš„å®¹å™¨ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„ IPï¼Œè€Œæ˜¯å’Œä¸€ä¸ªæŒ‡å®šçš„å®¹å™¨å…±äº« IPã€ç«¯å£èŒƒå›´ç­‰ã€‚åŒæ ·ä¸¤ä¸ªå®¹å™¨é™¤äº†ç½‘ç»œæ–¹é¢ç›¸åŒä¹‹å¤–ï¼Œå…¶ä»–çš„å¦‚æ–‡ä»¶ç³»ç»Ÿã€è¿›ç¨‹åˆ—è¡¨ç­‰è¿˜æ˜¯éš”ç¦»çš„ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘Dockeræ•°æ®ç®¡ç†ã€æ•°æ®å·å’ŒæŒ‚è½½ä¸»æœºç›®å½•</title>
    <link href="/2021/04/16/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Docker%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E3%80%81%E6%95%B0%E6%8D%AE%E5%8D%B7%E5%92%8C%E6%8C%82%E8%BD%BD%E4%B8%BB%E6%9C%BA%E7%9B%AE%E5%BD%95/"/>
    <url>/2021/04/16/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Docker%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E3%80%81%E6%95%B0%E6%8D%AE%E5%8D%B7%E5%92%8C%E6%8C%82%E8%BD%BD%E4%B8%BB%E6%9C%BA%E7%9B%AE%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<p>Datawhale Dockerå­¦ä¹ ç¬”è®°ç¬¬ä¸‰ç¯‡<br><!--more---></p><h1 id="æ•°æ®å·"><a href="#æ•°æ®å·" class="headerlink" title="æ•°æ®å·"></a>æ•°æ®å·</h1><ul><li>åˆ›å»ºæ•°æ®å·<pre><code>docker volume create datawhale</code></pre>æŸ¥çœ‹æ‰€æœ‰çš„æ•°æ®å·<pre><code>docker volume ls</code></pre></li><li>å¯åŠ¨ä¸€ä¸ªæŒ‚è½½æ•°æ®å·çš„å®¹å™¨</li></ul><p>åœ¨ç”¨ docker run å‘½ä»¤çš„æ—¶å€™ï¼Œä½¿ç”¨ â€”mount æ ‡è®°æ¥å°†æ•°æ®å·æŒ‚è½½åˆ°å®¹å™¨é‡Œã€‚åœ¨ä¸€æ¬¡ docker run ä¸­å¯ä»¥æŒ‚è½½å¤šä¸ª æ•°æ®å·ã€‚</p><ul><li>æŸ¥çœ‹æ•°æ®å·çš„å…·ä½“ä¿¡æ¯</li></ul><p>åœ¨ä¸»æœºé‡Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹ web å®¹å™¨çš„ä¿¡æ¯</p><pre><code>docker inspect web</code></pre><ul><li><p>åˆ é™¤æ•°æ®å·</p><pre><code>docker volume rm datawhale  #datawhaleä¸ºå·å</code></pre><p>æ— ä¸»çš„æ•°æ®å·å¯èƒ½ä¼šå æ®å¾ˆå¤šç©ºé—´ï¼Œè¦æ¸…ç†è¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤</p><pre><code>docker volume prune</code></pre><h1 id="æŒ‚è½½ä¸»æœºç›®å½•"><a href="#æŒ‚è½½ä¸»æœºç›®å½•" class="headerlink" title="æŒ‚è½½ä¸»æœºç›®å½•"></a>æŒ‚è½½ä¸»æœºç›®å½•</h1></li><li><p>æŒ‚è½½ä¸€ä¸ªä¸»æœºç›®å½•ä½œä¸ºæ•°æ®å·</p><pre><code>docker run -d -P \  --name web \  --mount type=bind,source=/src/webapp,target=/usr/share/nginx/html \  nginx:alpine</code></pre><p>ä½¿ç”¨ â€”mount æ ‡è®°å¯ä»¥æŒ‡å®šæŒ‚è½½ä¸€ä¸ªæœ¬åœ°ä¸»æœºçš„ç›®å½•åˆ°å®¹å™¨ä¸­å»ã€‚</p></li><li><p>æŸ¥çœ‹æ•°æ®å·çš„å…·ä½“ä¿¡æ¯</p></li></ul><p>åœ¨ä¸»æœºé‡Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹ web å®¹å™¨çš„ä¿¡æ¯</p><pre><code>docker inspect web</code></pre><ul><li>æŒ‚è½½ä¸€ä¸ªæœ¬åœ°ä¸»æœºæ–‡ä»¶ä½œä¸ºæ•°æ®å·</li></ul><p>â€”mount æ ‡è®°ä¹Ÿå¯ä»¥ä»ä¸»æœºæŒ‚è½½å•ä¸ªæ–‡ä»¶åˆ°å®¹å™¨ä¸­</p><pre><code>docker run --rm -it \   --mount type=bind,source=$HOME/.bash_history,target=/root/.bash_history \   ubuntu:18.04 \   bash</code></pre>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘å¦‚ä½•æ±‚å‡ºä»»æ„æ—¥æœŸæ˜¯æ˜ŸæœŸå‡ ï¼Ÿ</title>
    <link href="/2021/04/16/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E5%A6%82%E4%BD%95%E6%B1%82%E5%87%BA%E4%BB%BB%E6%84%8F%E6%97%A5%E6%9C%9F%E6%98%AF%E6%98%9F%E6%9C%9F%E5%87%A0%EF%BC%9F/"/>
    <url>/2021/04/16/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E5%A6%82%E4%BD%95%E6%B1%82%E5%87%BA%E4%BB%BB%E6%84%8F%E6%97%A5%E6%9C%9F%E6%98%AF%E6%98%9F%E6%9C%9F%E5%87%A0%EF%BC%9F/</url>
    
    <content type="html"><![CDATA[<p>å·²çŸ¥æŸå¹´æœˆæ—¥ï¼Œå¦‚ä½•å¾—åˆ°è¿™ä¸€å¤©æ˜¯æ˜ŸæœŸå‡ ï¼Ÿ<br>å·²çŸ¥ä¸¤æ—¥æœŸçš„å¹´æœˆæ—¥ï¼Œå¦‚ä½•å¾—åˆ°è¿™ä¸¤æ—¥æœŸä¹‹é—´ç›¸å·®å¤šå°‘å¤©ï¼Ÿ<br>å¦‚æ­¤ç§ç§é—®é¢˜ï¼Œå‡å¯ä»¥åˆ©ç”¨è”¡å‹’å…¬å¼è§£å†³ã€‚</p><!--more---><h1 id="ä¸€ã€å·²çŸ¥æ—¥æœŸyå¹´mæœˆdæ—¥ï¼Œå¦‚ä½•æ±‚è§£è¯¥æ—¥æœŸæ˜¯å‘¨å‡ ï¼Ÿ"><a href="#ä¸€ã€å·²çŸ¥æ—¥æœŸyå¹´mæœˆdæ—¥ï¼Œå¦‚ä½•æ±‚è§£è¯¥æ—¥æœŸæ˜¯å‘¨å‡ ï¼Ÿ" class="headerlink" title="ä¸€ã€å·²çŸ¥æ—¥æœŸyå¹´mæœˆdæ—¥ï¼Œå¦‚ä½•æ±‚è§£è¯¥æ—¥æœŸæ˜¯å‘¨å‡ ï¼Ÿ"></a>ä¸€ã€å·²çŸ¥æ—¥æœŸyå¹´mæœˆdæ—¥ï¼Œå¦‚ä½•æ±‚è§£è¯¥æ—¥æœŸæ˜¯å‘¨å‡ ï¼Ÿ</h1><h2 id="1-é—®é¢˜è½¬åŒ–"><a href="#1-é—®é¢˜è½¬åŒ–" class="headerlink" title="1. é—®é¢˜è½¬åŒ–"></a>1. é—®é¢˜è½¬åŒ–</h2><p>è¯¥é—®é¢˜å®¹æ˜“è½¬æ¢ä¸ºè®¡ç®—1å¹´1æœˆ1æ—¥ä¸yå¹´mæœˆdæ—¥ä¹‹é—´çš„å·®å€¼ã€‚å¦‚ä½•è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å·®å€¼ï¼Ÿ</p><p>ä¸éš¾æƒ³åˆ°ï¼Œé¦–å…ˆæ±‚è§£å‰yå¹´çš„å¤©æ•°$w_1$ï¼Œç„¶åæ±‚è§£ä»yå¹´1æœˆ1æ—¥åˆ°yå¹´mæœˆ1æ—¥ä¹‹é—´çš„å¤©æ•°$w_2$ï¼Œæœ€åæ±‚è§£mæœˆ1æ—¥åˆ°mæœˆdæ—¥ä¹‹é—´çš„å¤©æ•°ï¼ˆå³ä¸ºdå¤©ï¼‰ï¼Œå°†è¿™ä¸‰ä¸ªå€¼ç›¸åŠ å³å¯å¾—åˆ°ç»“æœ$w$ã€‚</p><p><img src="/2021/04/16/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E5%A6%82%E4%BD%95%E6%B1%82%E5%87%BA%E4%BB%BB%E6%84%8F%E6%97%A5%E6%9C%9F%E6%98%AF%E6%98%9F%E6%9C%9F%E5%87%A0%EF%BC%9F/è®¡ç®—æ–¹æ³•.png" alt></p><p>å¾—åˆ°å¤©æ•°$w$ä¹‹åï¼Œå°†å€¼ä¸7å–ä½™ï¼Œ$w\mod 7 == 1$ å°±æ˜¯æ˜ŸæœŸä¸€ï¼Œ $w\mod 7 == 2$ å°±æ˜¯æ˜ŸæœŸäºŒï¼Œ$w\mod 7 == 0$ å°±æ˜¯æ˜ŸæœŸå¤©ã€‚</p><h2 id="2-åˆ¤æ–­é—°å¹´"><a href="#2-åˆ¤æ–­é—°å¹´" class="headerlink" title="2. åˆ¤æ–­é—°å¹´"></a>2. åˆ¤æ–­é—°å¹´</h2><p>è¿™ä¸ªé—®é¢˜çš„éš¾ç‚¹åœ¨äºå¹´å’Œæœˆçš„è®¡ç®—ã€‚ä¸€å¹´æœ‰365å¤©ï¼Œé—°å¹´æ˜¯366å¤©ï¼ˆ2æœˆä¸­å¤šä¸€å¤©ï¼‰ã€‚å¦‚ä½•åˆ¤æ–­yæ˜¯é—°å¹´è¿˜æ˜¯å¹³å¹´ï¼Ÿ</p><p>æŒ‰ç…§æˆ‘ä»¬ä¸€ç›´ä»¥æ¥å­¦ä¹ çš„çŸ¥è¯†ï¼Œé—°å¹´æŒ‰ç…§å¦‚ä¸‹æ–¹æ³•è¿›è¡Œè®¡ç®—ï¼š</p><p>æ™®é€šé—°å¹´ï¼šå…¬å†å¹´ä»½æ˜¯4çš„å€æ•°ï¼Œä¸”ä¸æ˜¯100çš„å€æ•°çš„ï¼Œä¸ºé—°å¹´ï¼ˆå¦‚2004å¹´ã€2020å¹´ç­‰å°±æ˜¯é—°å¹´ï¼‰ã€‚</p><p>ä¸–çºªé—°å¹´ï¼šå…¬å†å¹´ä»½æ˜¯æ•´ç™¾æ•°çš„ï¼Œå¿…é¡»æ˜¯400çš„å€æ•°æ‰æ˜¯é—°å¹´ï¼ˆå¦‚1900å¹´ä¸æ˜¯é—°å¹´ï¼Œ2000å¹´æ˜¯é—°å¹´ï¼‰ã€‚</p><p>åˆ™yå¹´å¯¹åº”çš„å¤©æ•° $w_1$ å¯ä»¥è¿™æ ·è®¡ç®—ï¼š</p><script type="math/tex; mode=display">w_1 = 365\times y + \frac{y}{4} - \frac{y}{100} + \frac{y}{400}</script><h2 id="3-è®¡ç®—æœˆä»½å¯¹åº”çš„å¤©æ•°"><a href="#3-è®¡ç®—æœˆä»½å¯¹åº”çš„å¤©æ•°" class="headerlink" title="3. è®¡ç®—æœˆä»½å¯¹åº”çš„å¤©æ•°"></a>3. è®¡ç®—æœˆä»½å¯¹åº”çš„å¤©æ•°</h2><p>æ¯ä¸ªæœˆçš„å¤©æ•°æ˜¯ä¸åŒçš„ï¼Œå¹¶ä¸”æ ¹æ®å½“å¹´æ˜¯å¹³å¹´è¿˜æ˜¯é—°å¹´ï¼Œ1æœˆåˆ°mæœˆä¹‹é—´çš„æ—¥æœŸä¹Ÿæœ‰æ‰€ä¸åŒï¼Œä¸èƒ½ä¸€æ¦‚è€Œè®ºã€‚éš¾é“æˆ‘ä»¬éœ€è¦ä½¿ç”¨å„ç§æƒ…å†µåˆ†æï¼Œé€šè¿‡åµŒå¥—ifè¯­å¥ï¼Œæœ€åå¾—åˆ°ä¸€ä¸ªä¸‘é™‹ä½†èƒ½ç”¨çš„æ€ªç‰©å—ï¼Ÿä¸å¿…ï¼ä¸‹é¢ä¸¤ç§æƒ…å†µéƒ½èƒ½åœ¨ O(1) çš„ç©ºé—´å’Œæ—¶é—´å¤æ‚åº¦å†…è®¡ç®—å¾—åˆ° yå¹´1æœˆ1æ—¥åˆ°yå¹´mæœˆ1æ—¥ä¹‹é—´çš„å¤©æ•°ã€‚</p><h3 id="3-1-å¹³å‡¡è§£æ³•ï¼šå‚¨å­˜12ä¸ªæœˆå¯¹åº”çš„å¤©æ•°è¡¨"><a href="#3-1-å¹³å‡¡è§£æ³•ï¼šå‚¨å­˜12ä¸ªæœˆå¯¹åº”çš„å¤©æ•°è¡¨" class="headerlink" title="3.1 å¹³å‡¡è§£æ³•ï¼šå‚¨å­˜12ä¸ªæœˆå¯¹åº”çš„å¤©æ•°è¡¨"></a>3.1 å¹³å‡¡è§£æ³•ï¼šå‚¨å­˜12ä¸ªæœˆå¯¹åº”çš„å¤©æ•°è¡¨</h3><p>æœ€å®¹æ˜“æƒ³åˆ°çš„å½“ç„¶æ˜¯å°†å¹³å¹´çš„12ä¸ªæœˆå¯¹åº”çš„å¤©æ•°å­˜åœ¨æ•°ç»„ä¸­ï¼Œé—°å¹´çš„å¦å¤–ä¿å­˜12ä¸ªæœˆçš„å¤©æ•°ã€‚æ¯æ¬¡è®¡ç®—ï¼Œç›´æ¥å–å¯¹åº”ä¸‹æ ‡çš„å€¼å³å¯ã€‚</p><pre><code class="lang-python">def compute_date_normal(y, m, d):    isleap = False    if (y % 4 == 0 and y % 100 != 0) or y % 400 == 0:        isleap = True    y = y - 1  # è®¡ç®—ç»è¿‡äº†å®Œæ•´çš„å¤šå°‘å¹´    yd = 365 * y + y // 4 - y // 100 + y // 400    month_arr = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]    leap_month_arr = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]    if isleap:        md = sum(leap_month_arr[:m - 1])    else:        md = sum(month_arr[:m - 1])    # print(yd, md, d)    return yd + md + d</code></pre><h3 id="3-2-è”¡å‹’å…¬å¼ï¼š24ä¸ªå‚æ•°-â€”-gt-3ä¸ªå‚æ•°"><a href="#3-2-è”¡å‹’å…¬å¼ï¼š24ä¸ªå‚æ•°-â€”-gt-3ä¸ªå‚æ•°" class="headerlink" title="3.2 è”¡å‹’å…¬å¼ï¼š24ä¸ªå‚æ•° â€”&gt; 3ä¸ªå‚æ•°"></a>3.2 è”¡å‹’å…¬å¼ï¼š24ä¸ªå‚æ•° â€”&gt; 3ä¸ªå‚æ•°</h3><p>æœ‰æ²¡æœ‰æ›´ä¼˜é›…ã€æ›´é…·çš„æ–¹æ³•æ¥æ”¹è¿›è¯¥ç®—æ³•ï¼Ÿæœ‰çš„ï¼æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç¥å¥‡çš„å…¬å¼ï¼šè”¡å‹’å…¬å¼ã€‚</p><p>å…‹é‡Œæ–¯è’‚å®‰Â·è”¡å‹’ï¼ˆJulius Christian Johannes Zellerï¼Œ1822-1899ï¼‰æ˜¯ä¸€åå¾·å›½æ•°å­¦å®¶ã€‚è”¡å‹’å…¬å¼ï¼ˆZellerâ€™s congruenceï¼‰ï¼Œæ˜¯ä¸€ç§è®¡ç®—ä»»ä½•ä¸€å¤©æ˜¯ä¸€æ˜ŸæœŸä¸­å“ªä¸€å¤©çš„ç®—æ³•ï¼Œç”±å¾·å›½æ•°å­¦å®¶å…‹é‡Œæ–¯æå®‰Â·è”¡å‹’å‘è¡¨ã€‚è”¡å‹’å…¬å¼çš„ç‰¹ç‚¹æ˜¯ä¸ç”¨åˆ¤æ–­é—°å¹´å¹³å¹´ï¼Œä¸ç”¨åˆ¤æ–­å¤§å°æœˆï¼Œç›´æ¥åœ¨O(1)çš„å¤æ‚åº¦ä¸‹è§£å†³æ—¥æœŸå’Œæ˜ŸæœŸçš„è½¬æ¢é—®é¢˜ã€‚å¾ˆç¥å¥‡æ˜¯å§ï¼Ÿ</p><p>å…·ä½“åœ°ï¼Œè”¡å‹’å…¬å¼è®¡ç®—çš„æ˜¯ä»å…¬å…ƒ1å¹´1æœˆ1æ—¥åˆ°æŸæ—¥æœŸè¿‡äº†å¤šå°‘å¤©ã€‚å¤©æ•°$w$çš„è®¡ç®—æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><script type="math/tex; mode=display">w = 365\times y + \frac{y}{4} - \frac{y}{100} + \frac{y}{400} + \frac{153\times m-457}{5} + d - 306</script><p>å…¶ä¸­yä¸ºæŸä¸€å¹´ï¼Œmä¸ºè¯¥å¹´ä¸­çš„æŸä¸€æœˆï¼Œdä¸ºè¯¥æœˆä¸­çš„æŸä¸€å¤©ã€‚</p><hr><p>å¥½å§ï¼Œä½ è‚¯å®šä¼šé—® 153ã€457å’Œ306è¿™ä¸‰ä¸ªå‚æ•°æ˜¯ä»å“ªé‡Œæ¥çš„äº†ã€‚</p><p>ä¸è¦ä»¥ä¸ºè”¡å‹’å…¬å¼ä¸­çš„å‰åŠéƒ¨åˆ†è¿˜æ˜¯$w_1$çš„è§£æ³•ï¼Œäº‹å®ä¸Šè”¡å‹’å…¬å¼æŠŠyå¹´å…¨å¹´éƒ½ç»™ç®—è¿›å»äº†ï¼ä¹Ÿå°±æ˜¯è¯´ï¼Œè”¡å‹’å…¬å¼çš„å‰åŠéƒ¨åˆ†$w_1$å¤šè®¡ç®—äº†yå¹´mæœˆdæ—¥åˆ°yå¹´12æœˆ31æ—¥è¿™æ®µæ—¥æœŸã€‚</p><p>æ¥ä¸‹æ¥è®¡ç®—è¿™æ®µæ—¥æœŸçš„é•¿åº¦ã€‚ä½†æ˜¯è”¡å‹’å…¬å¼ä¸æ€¥ç€åšè¿™ä»¶äº‹ï¼Œè€Œæ˜¯è®¡ç®—äº†yå¹´12æœˆ31æ—¥åˆ°yå¹´3æœˆ1æ—¥ä¹‹é—´ç»è¿‡äº†å¤šå°‘å¤©ã€‚ååŠéƒ¨åˆ†è®¡ç®—æœˆä»½çš„åˆ†å¼æˆ‘ä»¬å°†å…¶å‘½åä¸º$w_2$ï¼š</p><script type="math/tex; mode=display">w_2=M_3+M_4+\cdots+M_12=31+30+\cdots+31=306</script><p>ä¸Šå¼ä¸­$M_n$ä¸ºnæœˆçš„å¤©æ•°ã€‚</p><hr><p>ä¸ºä»€ä¹ˆé€‰æ‹©3æœˆ1æ—¥ä½œä¸ºèµ·å§‹å‘¢ï¼Ÿå› ä¸º3æœˆåˆ°12æœˆå¯¹äºå¹³å¹´å’Œé—°å¹´æ¥è¯´éƒ½æ˜¯å›ºå®šçš„ï¼Œå› æ­¤è¯¥æ•°å€¼ä¹Ÿæ˜¯å›ºå®šçš„ï¼Œä¸º306å¤©ã€‚</p><p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬è®¡ç®—1æœˆ1æ—¥åˆ°12æœˆ31æ—¥çš„é•¿åº¦çš„è¯ï¼Œå°±ä¼šå› ä¸º2æœˆçš„ä¸ç¨³å®šæ€§è€Œéœ€è¦åˆ†ç±»è®¨è®ºäº†ã€‚</p><p>ç”±æ­¤ï¼Œåªè¦æˆ‘ä»¬è®¡ç®—çš„æœˆä»½ä¸æ˜¯1æœˆå’Œ2æœˆï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸å¿…åœ¨ä¹è¿™ä¸€å¹´åˆ°åº•æ˜¯é—°å¹´è¿˜æ˜¯å¹³å¹´ã€‚</p><p>é‚£ä¹ˆå¦‚æœæˆ‘è®¡ç®—çš„æ—¥æœŸçš„ç¡®æ˜¯1æœˆæˆ–2æœˆçš„æŸæ—¥æ€ä¹ˆåŠå‘¢ï¼Ÿè¦æƒ³é¿å…è®¨è®ºå¹³å¹´é—°å¹´ï¼Œæ— è®ºå¦‚ä½•éƒ½è¦é¿è¿‡è®¡ç®—2æœˆï¼</p><p>è”¡å‹’å…¬å¼é‡‡å–çš„æ–¹æ¡ˆæ˜¯ï¼Œä¸è®¡ç®—åˆ°yå¹´12æœˆ31æ—¥ï¼Œè€Œæ˜¯å°‘è®¡ç®—ä¸€å¹´(1.01.01)â€”(y-1.12.31)ï¼Œå†åŠ ä¸Š12ä¸ªæœˆã€‚ç”±æ­¤ï¼ŒåŸæ¥çš„1æœˆå°±å˜æˆäº†13æœˆï¼ŒåŸæ¥çš„2æœˆå°±å˜æˆäº†14æœˆã€‚</p><hr><p>ä¸‹é¢å°†æ˜¯è”¡å‹’å…¬å¼ä¸­æœ€éš¾ä»¥ç†è§£çš„éƒ¨åˆ†ï¼Œé‚£å°±æ˜¯è®¡ç®—ä»yå¹´3æœˆ1æ—¥åˆ°4æœˆï¼ˆXæœˆï¼‰1æ—¥ä¹‹é—´ç»è¿‡äº†å¤šå°‘å¤©è¿™ä¸€éƒ¨åˆ†ã€‚</p><p>æˆ‘ä»¬é¦–å…ˆçœ‹ä¸€ä¸ªç»Ÿè®¡è¡¨ï¼Œè¿™ä¸ªè¡¨åˆ—å‡ºäº†3æœˆ1æ—¥åˆ°å„ä¸ªæœˆä»½çš„é¦–æ—¥ï¼ˆXæœˆ1æ—¥ï¼‰ä¹‹é—´ç»è¿‡äº†å¤šå°‘å¤©ï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:center">æœˆä»½</th><th style="text-align:center">è¯¥æœˆå¤©æ•°</th><th style="text-align:center">è¯¥æœˆé¦–å¤©ä¸3/1çš„å·®å€¼</th></tr></thead><tbody><tr><td style="text-align:center">3</td><td style="text-align:center">31</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">30</td><td style="text-align:center">31</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">31</td><td style="text-align:center">61</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">30</td><td style="text-align:center">92</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center">31</td><td style="text-align:center">122</td></tr><tr><td style="text-align:center">8</td><td style="text-align:center">31</td><td style="text-align:center">153</td></tr><tr><td style="text-align:center">9</td><td style="text-align:center">30</td><td style="text-align:center">184</td></tr><tr><td style="text-align:center">10</td><td style="text-align:center">31</td><td style="text-align:center">214</td></tr><tr><td style="text-align:center">11</td><td style="text-align:center">30</td><td style="text-align:center">245</td></tr><tr><td style="text-align:center">12</td><td style="text-align:center">31</td><td style="text-align:center">275</td></tr><tr><td style="text-align:center">13</td><td style="text-align:center">31</td><td style="text-align:center">306</td></tr><tr><td style="text-align:center">14</td><td style="text-align:center">X</td><td style="text-align:center">337</td></tr></tbody></table></div><p>æˆ‘ä»¬æƒ³æ‰¾åˆ°ä¸€ä¸ªç®€å•çš„æ˜ å°„å…³ç³»ï¼Œèƒ½æŠŠæœˆä»½ç»™æ¢ç®—æˆè¯¥æœˆé¦–å¤©ä¸3æœˆ1æ—¥ä¹‹é—´çš„å·®å€¼ï¼š$f(m)$ã€‚</p><p>ç»†å¿ƒè§‚å¯Ÿæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œé™¤äº†ä¸ªä½ä¹‹å¤–ï¼Œè¯¥å·®å€¼æ˜¯ä¸€ä¸ªç­‰å·®æ•°åˆ—ï¼Œå…¬å·®ä¸º30å¤©ã€‚è€Œä¸ªä½çš„å˜åŒ–ä¸º1,1,2,2,3,4,4,5,5,6,7.</p><p>å­˜ä¸å­˜åœ¨ä¸€ä¸ªçº¿æ€§å‡½æ•°ï¼Œèƒ½å¤Ÿæ‹Ÿåˆä¸ªä½çš„å˜åŒ–å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æœ‰çš„ï¼Œé‚£å°±æ˜¯ï¼š</p><script type="math/tex; mode=display">\lfloor\frac{m\times 3-7}{5}\rfloor</script><p>å·¦å³æ‹¬å·æ˜¯å‘ä¸‹å–æ•´ã€‚å…¶å®æˆ‘ç°åœ¨ä¹Ÿæ²¡èƒ½æ‰¾åˆ°è¯¥å¼ä¸è¯¥é—®é¢˜ä¹‹é—´çš„é€»è¾‘å…³ç³»ï¼Œä½†æ˜¯è¯¥å¼æ°å¥½èƒ½å¤Ÿæ‹Ÿåˆå·®å€¼çš„ä¸ªä½æ•°å˜åŒ–ï¼Œå› æ­¤æˆ‘ä¹Ÿå°±â€œæ‹¿æ¥ä¸»ä¹‰â€äº†ã€‚</p><p>è‡³æ­¤æˆ‘ä»¬å·²ç»å¾—åˆ°æœˆä»½å’Œå·®å€¼ä¹‹é—´çš„å‡½æ•°å…³ç³»ï¼š</p><script type="math/tex; mode=display">w_3=30\times(m-3)+\lfloor(m\times3-7)/5\rfloor</script><script type="math/tex; mode=display">=âŒŠ(153Ã—m-457)/5âŒ‹</script><p>åœ¨å…¬å¼çš„æœ€åï¼Œå°†æ—¥æœŸdåŠ ä¸Šï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†æœ€ç»ˆçš„è”¡å‹’å…¬å¼ã€‚</p><p>ä¸‹é¢æ˜¯è”¡å‹’å…¬å¼çš„å…·ä½“å®ç°ã€‚å¯ä»¥çœ‹åˆ°ï¼Œä»£ç çš„ç¡®çŸ­äº†å¾ˆå¤šï¼Œè€Œä¸”å‚æ•°ä¹Ÿä»24ä¸ªå˜æˆäº†3ä¸ªã€‚</p><pre><code class="lang-python">def zellers(y, m, d):    if m &lt; 3:        y -= 1        m += 12    return 365*y + y//4 - y//100 + y//400 + (153*m-457)//5 + d â€“ 306def test_zellers():    w = zellers(2021,1,7)    print((w%7+7)%7)</code></pre><h1 id="äºŒã€å¥‡æ€å¦™æƒ³"><a href="#äºŒã€å¥‡æ€å¦™æƒ³" class="headerlink" title="äºŒã€å¥‡æ€å¦™æƒ³"></a>äºŒã€å¥‡æ€å¦™æƒ³</h1><p>çŸ¥å…¶ç„¶ï¼Œæ›´è¦çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„ç›®çš„ï¼Œå…¶å®æ˜¯å› ä¸ºæˆ‘ç¢°åˆ°äº†ä¸€é“ç¬”è¯•é¢˜ï¼Œåœ¨è§£é¢˜è¿‡ç¨‹ä¸­ï¼Œæˆ‘æ— æ„å‘ç°äº†ä¸€äº›æœ‰è¶£çš„è§£æ³•ï¼Œä½†æ˜¯ç½‘ä¸Šçš„æ–‡ç« åˆä¸èƒ½è§£ç­”æˆ‘çš„ç–‘é—®ï¼Œæ‰€ä»¥æˆ‘å°±æƒ³é€šè¿‡è‡ªå·±çš„è°ƒç ”ï¼Œè§£ç­”è‡ªå·±çš„é—®é¢˜ã€‚å¦‚æœè¿™ä¸ªé—®é¢˜çš„å›ç­”èƒ½å¸®åˆ°ä½ ï¼Œé‚£å°±å†å¥½ä¸è¿‡äº†ã€‚</p><h2 id="1-ä¸ºä»€ä¹ˆé—°å¹´è¿™æ ·è®¡ç®—"><a href="#1-ä¸ºä»€ä¹ˆé—°å¹´è¿™æ ·è®¡ç®—" class="headerlink" title="1. ä¸ºä»€ä¹ˆé—°å¹´è¿™æ ·è®¡ç®—"></a>1. ä¸ºä»€ä¹ˆé—°å¹´è¿™æ ·è®¡ç®—</h2><p>é—°å¹´æ˜¯ä¸ºäº†å¼¥è¡¥å› äººä¸ºå†æ³•è§„å®šçš„å¹´åº¦å¤©æ•°365æ—¥å’Œå®é™…å…¬è½¬æ—¶é—´365.25æ—¥çš„å·®è·è€Œè®¾ç«‹çš„ã€‚å³æ˜¯ï¼Œæ¯å››å¹´ä¾¿ä¼šç´¯ç§¯1æ—¥ ï¼Œæ‰€ä»¥å››å¹´ä¾¿ä¼šæœ‰ä¸€æ¬¡é—°å¹´ã€‚å¤šå‡ºæ¥çš„ä¸€å¤©ä¸º2æœˆ29æ—¥ã€‚</p><p>å…¶å®é—°å¹´çš„è®¡ç®—æ–¹æ³•ä¸€ç›´æ˜¯æœ‰äº‰è®®çš„ï¼Œå› ä¸ºä¸€å¹´çš„å…¬è½¬æ—¥çºªå¹´è¯¯å·®ä¼šéšç€å¹´ä»½çš„ç´¯è®¡è€Œä¸æ–­æ‰©å¤§ï¼Œæœ€ç»ˆå¿…é¡»ä»¥ä¸€å¤©çš„çš„æ–¹å¼æ‰©å±•å¼€æ¥ã€‚</p><p>â€œå››å¹´ä¸€é—°ï¼Œç™¾å¹´ä¸é—°ï¼Œå››ç™¾å¹´å†é—°â€ï¼Œè¿™å°±é€ æˆäº†åœ¨ä¸€äº›ç‰¹æ®Šå¹´ä»½ï¼Œä¼šå‡ºç°å…«å¹´ä¸€é—°çš„ç°è±¡ã€‚</p><p>é—°å¹´è¿™ä¸ªä¸œè¥¿å…¶å®ä¹Ÿæ˜¯èˆ¶æ¥å“ï¼Œå› ä¸ºä¸­å›½ä¼ ç»Ÿçºªå¹´æ–¹å¼æ˜¯æŒ‰ç…§å†œå†çºªå¹´çš„ï¼Œæˆ‘ä»¬ä¼šåœ¨ä¸€å¹´ä¹‹ä¸­æ·»åŠ ä¸€ä¸ªæœˆï¼Œç§°ä¹‹ä¸ºé—°æœˆã€‚</p><p>å†œå†ä½œä¸ºé˜´é˜³å†çš„ä¸€ç§ï¼Œæ¯æœˆçš„å¤©æ•°ä¾ç…§æœˆäºè€Œå®šï¼Œä¸€å¹´çš„æ—¶é—´ä»¥12ä¸ªæœˆä¸ºåŸºå‡†ï¼Œå¹³å¹´æ¯”ä¸€å›å½’å¹´å°‘çº¦11å¤©ã€‚ä¸ºäº†åˆä¸Šåœ°çƒå›´ç»•å¤ªé˜³è¿è¡Œå‘¨æœŸå³å›å½’å¹´ï¼Œæ¯éš”2åˆ°3å¹´ï¼Œå¢åŠ ä¸€ä¸ªæœˆï¼Œå¢åŠ çš„è¿™ä¸ªæœˆä¸ºé—°æœˆã€‚é—°æœˆåŠ åˆ°å“ªä¸ªæœˆï¼Œä»¥å†œå†å†æ³•è§„åˆ™æ¨æ–­ï¼Œä¸»è¦ä¾ç…§ä¸å†œå†çš„äºŒåå››èŠ‚æ°”ç›¸ç¬¦åˆæ¥ç¡®å®šã€‚åœ¨åŠ æœ‰é—°æœˆçš„é‚£ä¸€å¹´æœ‰13ä¸ªæœˆï¼Œå†å¹´é•¿åº¦ä¸º383è‡³385æ—¥ï¼Œè¿™ä¸€å¹´ä¹Ÿç§°ä¸ºé—°å¹´ã€‚å¦‚2004å¹´çŒ´å¹´çš„å†œå†ä¸­ï¼Œæœ‰ä¸¤ä¸ªäºŒæœˆï¼Œé€šå¸¸ç§°ä¸ºå‰äºŒæœˆå’ŒåäºŒæœˆï¼ˆå³é—°æœˆï¼‰ã€‚</p><p>è€Œç°åœ¨ä½¿ç”¨å…¬å…ƒçºªå¹´ï¼Œåˆ™æ˜¯æ ¼é‡Œé«˜åˆ©å†æ‰€è§„å®šã€‚</p><h2 id="2-å…¬å…ƒçºªå¹´"><a href="#2-å…¬å…ƒçºªå¹´" class="headerlink" title="2. å…¬å…ƒçºªå¹´"></a>2. å…¬å…ƒçºªå¹´</h2><p>å…¬å…ƒæ˜¯å…¬å†çºªå…ƒçš„ç®€ç§°ï¼Œæ˜¯ä¸€ä¸ªè¢«å½“ä»Šå›½é™…ç¤¾ä¼šæœ€å¹¿æ³›åœ°ä½¿ç”¨çš„çºªå¹´æ ‡å‡†ã€‚å…¶æºè‡ªäºè¥¿æ–¹å›½å®¶ä½¿ç”¨çš„åŸºç£çºªå¹´ï¼Œä»¥å½“æ—¶è®¤å®šçš„è€¶ç¨£å‡ºç”Ÿå¹´ä¸ºçºªå¹´çš„å¼€å§‹ã€‚ç¬¬ä¸€å¹´è¢«ç§°ä½œåŸºç£å…ƒå¹´ï¼ˆè€¶ç¨£å‡ºç”Ÿçš„é‚£ä¸€å¹´ï¼‰ã€‚åæ¥ï¼Œç”±äºè¥¿æ–¹æ–‡åŒ–çš„å¼ºåŠ¿ï¼Œè¥¿å†çºªå…ƒæˆä¸ºä¸–ç•Œé€šç”¨æ ‡å‡†ã€‚</p><p>1911 å¹´ 10 æœˆ 10 æ—¥è¾›äº¥é©å‘½åï¼Œæ¹–åŒ—å†›æ”¿åºœä½¿ç”¨é»„å¸çºªå¹´ã€‚æ¬¡å¹´ ï¼ˆ1912å¹´ï¼‰ï¼Œä¸­åæ°‘å›½ä¸´æ—¶æ”¿åºœå†³å®šé‡‡ç”¨å›½é™…é€šç”¨çš„å…¬å…ƒå†æ³•åšä¸ºå›½å†ï¼Œä½†çºªå…ƒéƒ¨åˆ†æ²¿ç”¨ä¸­å›½ç‹¬è‡ªçš„çºªå¹´ä¼ ç»Ÿï¼Œç§°æ°‘å›½çºªå¹´ã€‚</p><p>1949å¹´9æœˆ27æ—¥ï¼Œä¸­å›½äººæ°‘æ”¿æ²»åå•†ä¼šè®®ç¬¬ä¸€å±Šå…¨ä½“ä¼šè®®å†³è®®ï¼ŒåŒå¹´10æœˆ1æ—¥æˆç«‹çš„ä¸­åäººæ°‘å…±å’Œå›½æ”¾å¼ƒä½¿ç”¨æ°‘å›½çºªå¹´ï¼Œæ”¹é‡‡ç”¨ä¸–ç•Œé€šç”¨çš„å…¬å…ƒçºªå¹´åˆ¶åº¦[5]ï¼Œå¤§é™†åœ°åŒºæ”¹ç§°â€œå…¬å…ƒâ€ï¼Œä»¥æ˜­æ˜å…¶æ˜¯â€œå›½é™…å…±åŒâ€ï¼Œé¿å…â€œè¥¿æ–¹ç‹¬ç”¨â€çš„æ­§ä¹‰ã€‚</p><h2 id="2-å…¬å…ƒ1å¹´1æœˆ1æ—¥æ˜¯æ˜ŸæœŸå‡ ï¼Ÿ"><a href="#2-å…¬å…ƒ1å¹´1æœˆ1æ—¥æ˜¯æ˜ŸæœŸå‡ ï¼Ÿ" class="headerlink" title="2. å…¬å…ƒ1å¹´1æœˆ1æ—¥æ˜¯æ˜ŸæœŸå‡ ï¼Ÿ"></a>2. å…¬å…ƒ1å¹´1æœˆ1æ—¥æ˜¯æ˜ŸæœŸå‡ ï¼Ÿ</h2><p>å¦‚æœä½ ä»¥ä¸ºä½ çš„ç¨‹åºç‰¹åˆ«å‰å®³äº†ï¼Œé‚£æˆ‘å¯è¦è€ƒè€ƒä½ äº†ï¼šå…¬å…ƒ1å¹´1æœˆ1æ—¥æ˜¯æ˜ŸæœŸå‡ ï¼Ÿ</p><p>æŒ‰ç…§ä¸Šæ–‡åˆ†æï¼Œåº”è¯¥æ˜¯å‘¨ä¸€ã€‚ä½†æ˜¯çŸ¥ä¹ä¸Šçš„å›ç­”æŒ‡å‡ºï¼Œè¿™æ ·è®¡ç®—æ˜¯ä¸å¯¹çš„ï¼š</p><p><img src="/2021/04/16/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E5%A6%82%E4%BD%95%E6%B1%82%E5%87%BA%E4%BB%BB%E6%84%8F%E6%97%A5%E6%9C%9F%E6%98%AF%E6%98%9F%E6%9C%9F%E5%87%A0%EF%BC%9F/çŸ¥ä¹å›ç­”.png" alt></p><p>æ•™çš‡æ ¼é‡Œæˆˆå…«ä¸–åœ¨1582å¹´2æœˆ24æ—¥é¢å¸ƒæ³•ä»¤ï¼Œæ°¸è¿œæŠ¹å»äº†1582å¹´10æœˆ5æ—¥åˆ°1582å¹´10æœˆ14æ—¥ã€‚å†å²ä¸Šä»æ¥ä¸æ›¾æœ‰è¿‡è¿™10å¤©ã€‚1582å¹´10æœˆ4æ—¥æ˜¯æ˜ŸæœŸå››ï¼Œå®ƒçš„ç¬¬äºŒå¤©æ˜¯1582å¹´10æœˆ15æ—¥æ˜ŸæœŸäº”ã€‚å› æ­¤è€ƒè™‘åˆ°è¿™10å¤©çš„å½±å“å†å»æ¨ç®—ï¼Œå…¬å…ƒå…ƒå¹´1æœˆ1æ—¥å°±æ˜¯æ˜ŸæœŸå…­äº†ã€‚</p><p>è¿™æ–¹é¢è¿˜æ˜¯åä¸ºçš„æ‰‹æœºæ—¥å†æ¯”è¾ƒå‰å®³ï¼š</p><p><img src="/2021/04/16/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E5%A6%82%E4%BD%95%E6%B1%82%E5%87%BA%E4%BB%BB%E6%84%8F%E6%97%A5%E6%9C%9F%E6%98%AF%E6%98%9F%E6%9C%9F%E5%87%A0%EF%BC%9F/åä¸º.png" alt></p><p><img src="/2021/04/16/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E5%A6%82%E4%BD%95%E6%B1%82%E5%87%BA%E4%BB%BB%E6%84%8F%E6%97%A5%E6%9C%9F%E6%98%AF%E6%98%9F%E6%9C%9F%E5%87%A0%EF%BC%9F/åä¸º2.png" alt></p><p>å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼Œä»1582å¹´10æœˆ5æ—¥åˆ°1582å¹´10æœˆ14æ—¥çš„åå¤©è¢«æ°¸è¿œæŠ¹å»äº†ã€‚</p><p>åä¸ºï¼Œç‰›ï¼</p><h2 id="å˜åŒ–é—®é¢˜"><a href="#å˜åŒ–é—®é¢˜" class="headerlink" title="å˜åŒ–é—®é¢˜"></a>å˜åŒ–é—®é¢˜</h2><p>å‡è®¾å­˜åœ¨å¹³è¡Œä¸–ç•Œï¼Œåœ¨è¿™ä¸ªä¸–ç•Œä¸­ä¸€å¹´çš„æ¯ä¸ªæœˆéƒ½æ¯”æˆ‘ä»¬çš„ä¸–ç•Œå°‘ä¸€å¤©ï¼Œé™¤æ­¤ä¹‹å¤–è¯¥å¹³è¡Œä¸–ç•Œçš„å¹³å¹´é—°å¹´ã€å¤§å°æœˆéƒ½ä¸æˆ‘ä»¬æ‰€å¤„çš„ä¸–ç•Œä¸€è‡´ã€‚å¦‚ä½•è®¡ç®—ä»»æ„æ—¥æœŸæ˜¯è¯¥ä¸–ç•Œçš„æ˜ŸæœŸå‡ ï¼Ÿ</p><p>è¿™ä¸ªæ—¶å€™è”¡å‹’å…¬å¼å°±ä¸å¤ªå¥½ä½¿äº†ï¼Œèµ·ç ä½ ä¸€æ—¶åŠä¼šå„¿æƒ³ä¸å‡ºå‚æ•°å¦‚ä½•å˜åŒ–çš„ã€‚æ—¢ç„¶æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦éƒ½æ˜¯O(1)ï¼Œé‚£æˆ‘ä»¬ä¸å¦¨ç›´æ¥ç”¨ä¼ ç»Ÿçš„æ–¹æ³•æ¥è®¡ç®—ï¼š</p><pre><code class="lang-py">def compute_date_shrink(y, m, d):    isleap = False    if (y % 4 == 0 and y % 100 != 0) or y % 400 == 0:        isleap = True    y = y - 1  # è®¡ç®—ç»è¿‡äº†å®Œæ•´çš„å¤šå°‘å¹´    yd = 353 * y + y // 4 - y // 100 + y // 400    month_arr = [30, 27, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30]    leap_month_arr = [30, 28, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30]    if isleap:        md = sum(leap_month_arr[:m - 1])    else:        md = sum(month_arr[:m - 1])    # print(yd, md, d)    return yd + md + d</code></pre><p>å…¶å®æˆ‘è‡ªå·±ä¹Ÿå®ç°äº†è”¡å‹’å…¬å¼çš„å˜ç§æ–¹æ³•ï¼Œä½†æ˜¯è§£é‡Šèµ·æ¥è¿‡äºå¤æ‚ã€‚ç”±äºè™šæ‹Ÿå†æ³•æ²¡æœ‰ç°å®å‚ç…§ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“æˆ‘å†™çš„ç¨‹åºå¯¹ä¸å¯¹ï¼Œåªèƒ½æŠŠç¨‹åºæ”¾åœ¨æœ€åï¼Œä¾›å¤§å®¶å‚è€ƒã€‚</p><pre><code class="lang-py">def zellers_shrinked(y, m, d):    if m &lt; 3:        y -= 1        m += 12    return 353 * y + y // 4 - y // 100 + y // 400 + (148 * m - 447) // 5 + d - 295</code></pre>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>algorithm</tag>
      
      <tag>zeller</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘Dockeré•œåƒä¸å®¹å™¨</title>
    <link href="/2021/04/15/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Docker%E9%95%9C%E5%83%8F%E4%B8%8E%E5%AE%B9%E5%99%A8/"/>
    <url>/2021/04/15/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Docker%E9%95%9C%E5%83%8F%E4%B8%8E%E5%AE%B9%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<p>Datawhale Dockerå­¦ä¹ ç¬”è®°ç¬¬äºŒç¯‡<br><!--more---></p><h1 id="Dockeré•œåƒ"><a href="#Dockeré•œåƒ" class="headerlink" title="Dockeré•œåƒ"></a>Dockeré•œåƒ</h1><ul><li>è·å–é•œåƒ</li></ul><p>docker pull [é€‰é¡¹] [Docker Registry åœ°å€[:ç«¯å£å·]/]ä»“åº“å[:æ ‡ç­¾]</p><ul><li>åˆ—å‡ºé•œåƒ</li></ul><p>docker image ls</p><ul><li>åˆ é™¤æœ¬åœ°é•œåƒ</li></ul><p>docker image rm [é€‰é¡¹] &lt;é•œåƒ1&gt; [&lt;é•œåƒ2&gt; â€¦]</p><ul><li>Dockerfileæ„å»ºé•œåƒ</li></ul><p>å¦‚ä½•å¯ä»¥ç”Ÿæˆ image æ–‡ä»¶ï¼Ÿå¦‚æœä½ è¦æ¨å¹¿è‡ªå·±çš„è½¯ä»¶ï¼ŒåŠ¿å¿…è¦è‡ªå·±åˆ¶ä½œ image æ–‡ä»¶ã€‚</p><p>è¿™å°±éœ€è¦ç”¨åˆ° Dockerfile æ–‡ä»¶ã€‚å®ƒæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œç”¨æ¥é…ç½® imageã€‚Docker æ ¹æ® è¯¥æ–‡ä»¶ç”ŸæˆäºŒè¿›åˆ¶çš„ image æ–‡ä»¶ã€‚</p><p>åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ Dockerfile</p><p>å…¥ä¸‹é¢çš„å†…å®¹ã€‚</p><p>FROM node:8.4<br>COPY . /app<br>WORKDIR /app<br>RUN npm install â€”registry=<a href="https://registry.npm.taobao.org">https://registry.npm.taobao.org</a><br>EXPOSE 3000</p><p>ä¸Šé¢ä»£ç ä¸€å…±äº”è¡Œï¼Œå«ä¹‰å¦‚ä¸‹ã€‚</p><p>FROM node:8.4ï¼šè¯¥ image æ–‡ä»¶ç»§æ‰¿å®˜æ–¹çš„ node imageï¼Œå†’å·è¡¨ç¤ºæ ‡ç­¾ï¼Œè¿™é‡Œæ ‡ç­¾æ˜¯8.4ï¼Œå³8.4ç‰ˆæœ¬çš„ nodeã€‚<br>COPY . /appï¼šå°†å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆé™¤äº†.dockerignoreæ’é™¤çš„è·¯å¾„ï¼‰ï¼Œéƒ½æ‹·è´è¿›å…¥ image æ–‡ä»¶çš„/appç›®å½•ã€‚<br>WORKDIR /appï¼šæŒ‡å®šæ¥ä¸‹æ¥çš„å·¥ä½œè·¯å¾„ä¸º/appã€‚<br>RUN npm installï¼šåœ¨/appç›®å½•ä¸‹ï¼Œè¿è¡Œnpm installå‘½ä»¤å®‰è£…ä¾èµ–ã€‚æ³¨æ„ï¼Œå®‰è£…åæ‰€æœ‰çš„ä¾èµ–ï¼Œéƒ½å°†æ‰“åŒ…è¿›å…¥ image æ–‡ä»¶ã€‚<br>EXPOSE 3000ï¼šå°†å®¹å™¨ 3000 ç«¯å£æš´éœ²å‡ºæ¥ï¼Œ å…è®¸å¤–éƒ¨è¿æ¥è¿™ä¸ªç«¯å£ã€‚</p><p>æœ‰äº† Dockerfile æ–‡ä»¶ä»¥åï¼Œå°±å¯ä»¥ä½¿ç”¨docker image buildå‘½ä»¤åˆ›å»º image æ–‡ä»¶äº†</p><h1 id="Dockerå®¹å™¨"><a href="#Dockerå®¹å™¨" class="headerlink" title="Dockerå®¹å™¨"></a>Dockerå®¹å™¨</h1><p>å®¹å™¨æ˜¯ç‹¬ç«‹è¿è¡Œçš„ä¸€ä¸ªæˆ–ä¸€ç»„åº”ç”¨ï¼Œä»¥åŠå®ƒä»¬çš„è¿è¡Œæ€ç¯å¢ƒã€‚</p><ul><li>æ–°å»ºå¹¶å¯åŠ¨å®¹å™¨</li></ul><p>ä½¿ç”¨ ubuntu è¾“å‡ºä¸€ä¸ª â€œHello Worldâ€ï¼Œä¹‹åç»ˆæ­¢å®¹å™¨ã€‚</p><p>docker run ubuntu:18.04 /bin/echo â€˜Hello worldâ€™<br>Hello world</p><p>å¯åŠ¨ä¸€ä¸ª bash ç»ˆç«¯ï¼Œå…è®¸ç”¨æˆ·è¿›è¡Œäº¤äº’</p><p>docker run -t -i ubuntu:18.04 /bin/bash<br>root@af8bae53bdd3:/#</p><p>å…¶ä¸­ï¼Œ-t é€‰é¡¹è®©Dockeråˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ï¼ˆpseudo-ttyï¼‰å¹¶ç»‘å®šåˆ°å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¸Šï¼Œ -i åˆ™è®©å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¿æŒæ‰“å¼€ã€‚</p><p>å½“åˆ©ç”¨ docker run æ¥åˆ›å»ºå®¹å™¨æ—¶ï¼ŒDocker åœ¨åå°è¿è¡Œçš„æ ‡å‡†æ“ä½œåŒ…æ‹¬ï¼š</p><p>æ£€æŸ¥æœ¬åœ°æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„é•œåƒï¼Œä¸å­˜åœ¨å°±ä»registryä¸‹è½½<br>åˆ©ç”¨é•œåƒåˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªå®¹å™¨<br>åˆ†é…ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶åœ¨åªè¯»çš„é•œåƒå±‚å¤–é¢æŒ‚è½½ä¸€å±‚å¯è¯»å†™å±‚<br>ä»å®¿ä¸»ä¸»æœºé…ç½®çš„ç½‘æ¡¥æ¥å£ä¸­æ¡¥æ¥ä¸€ä¸ªè™šæ‹Ÿæ¥å£åˆ°å®¹å™¨ä¸­å»<br>ä»åœ°å€æ± é…ç½®ä¸€ä¸ª ip åœ°å€ç»™å®¹å™¨<br>æ‰§è¡Œç”¨æˆ·æŒ‡å®šçš„åº”ç”¨ç¨‹åº<br>æ‰§è¡Œå®Œæ¯•åå®¹å™¨è¢«ç»ˆæ­¢</p><ul><li>å¯åŠ¨å·²ç»ˆæ­¢çš„å®¹å™¨</li></ul><p>å¯ä»¥åˆ©ç”¨ docker container start å‘½ä»¤ï¼Œç›´æ¥å°†ä¸€ä¸ªå·²ç»ç»ˆæ­¢ï¼ˆexitedï¼‰çš„å®¹å™¨å¯åŠ¨è¿è¡Œã€‚</p><ul><li>åœæ­¢å®¹å™¨</li></ul><p>docker stopå¯ä»¥åœæ­¢è¿è¡Œçš„å®¹å™¨ã€‚ç†è§£ï¼šå®¹å™¨åœ¨docker hostä¸­å®é™…ä¸Šæ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œdocker stopå‘½ä»¤æœ¬è´¨ä¸Šæ˜¯å‘è¯¥è¿›ç¨‹å‘é€ä¸€ä¸ªSIGTERMä¿¡å·ã€‚å¦‚æœæƒ³è¦å¿«é€Ÿåœæ­¢å®¹å™¨ï¼Œå¯ä½¿ç”¨docker killå‘½ä»¤ï¼Œå…¶ä½œç”¨æ˜¯å‘å®¹å™¨è¿›ç¨‹å‘é€SIGKILLä¿¡å·ã€‚</p><p>docker ps åˆ—å‡ºå®¹å™¨ï¼Œé»˜è®¤åˆ—å‡ºåªåœ¨è¿è¡Œçš„å®¹å™¨ï¼›åŠ -aå¯ä»¥æ˜¾ç¤ºæ‰€æœ‰çš„å®¹å™¨</p><ul><li>é‡å¯å®¹å™¨</li></ul><p>å¯¹äºå·²ç»å¤„äºåœæ­¢çŠ¶æ€çš„å®¹å™¨ï¼Œå¯ä»¥é€šè¿‡docker starté‡æ–°å¯åŠ¨ã€‚docker startä¼šä¿ç•™å®¹å™¨çš„ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶çš„æ‰€æœ‰å‚æ•°ã€‚docker restartå¯ä»¥é‡å¯å®¹å™¨ï¼Œå…¶ä½œç”¨å°±æ˜¯ä¾æ¬¡æ‰§è¡Œdocker stopå’Œdocker startã€‚</p><ul><li>åå°è¿è¡Œå®¹å™¨</li></ul><p>æ·»åŠ  -d å‚æ•°æ¥å®ç°åå°è¿è¡Œå®¹å™¨ã€‚åœ¨ä½¿ç”¨ -d å‚æ•°æ—¶ï¼Œå®¹å™¨å¯åŠ¨åä¼šè¿›å…¥åå°ï¼Œå¯åŠ¨å®Œå®¹å™¨ä¹‹åä¼šåœåœ¨hostç«¯ï¼›æŸäº›æ—¶å€™éœ€è¦è¿›å…¥å®¹å™¨è¿›è¡Œæ“ä½œï¼ŒåŒ…æ‹¬ä½¿ç”¨ docker attach å‘½ä»¤æˆ– docker exec å‘½ä»¤</p><p>docker exec åè¾¹å¯ä»¥è·Ÿå¤šä¸ªå‚æ•°ï¼Œè¿™é‡Œä¸»è¦è¯´æ˜ -i -t å‚æ•°ã€‚</p><p>åªç”¨ -i å‚æ•°æ—¶ï¼Œç”±äºæ²¡æœ‰åˆ†é…ä¼ªç»ˆç«¯ï¼Œç•Œé¢æ²¡æœ‰æˆ‘ä»¬ç†Ÿæ‚‰çš„ Linux å‘½ä»¤æç¤ºç¬¦ï¼Œä½†å‘½ä»¤æ‰§è¡Œç»“æœä»ç„¶å¯ä»¥è¿”å›ã€‚</p><p>å½“ -i -t å‚æ•°ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œåˆ™å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç†Ÿæ‚‰çš„ Linux å‘½ä»¤æç¤ºç¬¦ã€‚</p><p>attachå’Œexecçš„åŒºåˆ«<br>attachå’Œexecçš„åŒºåˆ«ï¼š ï¼ˆ1ï¼‰attachç›´æ¥è¿›å…¥å®¹å™¨å¯åŠ¨å‘½ä»¤çš„ç»ˆç«¯ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹ï¼› ï¼ˆ2ï¼‰execåˆ™æ˜¯åœ¨å®¹å™¨ä¸­æ‰“å¼€æ–°çš„ç»ˆç«¯ï¼Œå¹¶ä¸”å¯ä»¥å¯åŠ¨æ–°çš„è¿›ç¨‹ï¼› ï¼ˆ3ï¼‰å¦‚æœæƒ³ç›´æ¥åœ¨ç»ˆç«¯ä¸­æŸ¥çœ‹å‘½ä»¤çš„è¾“å‡ºï¼Œç”¨attachï¼Œå…¶ä»–æƒ…å†µä½¿ç”¨execï¼›</p><ul><li>åˆ é™¤å®¹å™¨</li></ul><p>å¯ä»¥ä½¿ç”¨ docker container rm æ¥åˆ é™¤ä¸€ä¸ªå¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ã€‚</p><p>docker container rm trusting_newton<br>trusting_newton</p><p>å¦‚æœè¦åˆ é™¤ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ï¼Œå¯ä»¥æ·»åŠ  -f å‚æ•°ã€‚Docker ä¼šå‘é€ SIGKILL ä¿¡å·ç»™å®¹å™¨ã€‚</p><p>ç”¨ docker container ls -a å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å·²ç»åˆ›å»ºçš„åŒ…æ‹¬ç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ï¼Œå¦‚æœæ•°é‡å¤ªå¤šè¦ä¸€ä¸ªä¸ªåˆ é™¤å¯èƒ½ä¼šå¾ˆéº»çƒ¦ï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤å¯ä»¥æ¸…ç†æ‰æ‰€æœ‰å¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ã€‚</p><p>docker container prune</p><p>æ‰¹é‡åˆ é™¤æ‰€æœ‰å·²ç»é€€å‡ºçš„å®¹å™¨</p><p>docker rm -v $(docker ps -aq -f status=exited)</p><ul><li>å¯¼å‡ºå®¹å™¨</li></ul><p>å¦‚æœè¦å¯¼å‡ºæœ¬åœ°æŸä¸ªå®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ docker export å‘½ä»¤ã€‚</p><p>è¿™æ ·å°†å¯¼å‡ºå®¹å™¨å¿«ç…§åˆ°æœ¬åœ°æ–‡ä»¶ã€‚</p><ul><li>å¯¼å…¥å®¹å™¨</li></ul><p>å¯ä»¥ä½¿ç”¨ docker import ä»å®¹å™¨å¿«ç…§æ–‡ä»¶ä¸­å†å¯¼å…¥ä¸ºé•œåƒ</p><p>$ cat ubuntu.tar | docker import - test/ubuntu:v1.0<br>$ docker image ls<br>REPOSITORY          TAG                 IMAGE ID            CREATED              VIRTUAL SIZE<br>test/ubuntu         v1.0                9d37a6082e97        About a minute ago   171.3 MB</p><p>ç”¨æˆ·æ—¢å¯ä»¥ä½¿ç”¨ docker load æ¥å¯¼å…¥é•œåƒå­˜å‚¨æ–‡ä»¶åˆ°æœ¬åœ°é•œåƒåº“ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ docker import æ¥å¯¼å…¥ä¸€ä¸ªå®¹å™¨å¿«ç…§åˆ°æœ¬åœ°é•œåƒåº“ã€‚è¿™ä¸¤è€…çš„åŒºåˆ«åœ¨äºå®¹å™¨å¿«ç…§æ–‡ä»¶å°†ä¸¢å¼ƒæ‰€æœ‰çš„å†å²è®°å½•å’Œå…ƒæ•°æ®ä¿¡æ¯ï¼ˆå³ä»…ä¿å­˜å®¹å™¨å½“æ—¶çš„å¿«ç…§çŠ¶æ€ï¼‰ï¼Œè€Œé•œåƒå­˜å‚¨æ–‡ä»¶å°†ä¿å­˜å®Œæ•´è®°å½•ï¼Œä½“ç§¯ä¹Ÿè¦å¤§ã€‚æ­¤å¤–ï¼Œä»å®¹å™¨å¿«ç…§æ–‡ä»¶å¯¼å…¥æ—¶å¯ä»¥é‡æ–°æŒ‡å®šæ ‡ç­¾ç­‰å…ƒæ•°æ®ä¿¡æ¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘Dockerçš„å®‰è£…</title>
    <link href="/2021/04/13/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Docker%E7%9A%84%E5%AE%89%E8%A3%85/"/>
    <url>/2021/04/13/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Docker%E7%9A%84%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<p>Datawhale Dockerå­¦ä¹ ç¬”è®°ç¬¬ä¸€ç¯‡<br><!--more---></p><p>ä¸ºäº†ä»Šåçš„æ–¹ä¾¿ï¼Œæˆ‘é€‰æ‹©å°†Dockerå®‰è£…åœ¨å®éªŒå®¤çš„ç”µè„‘ä¸Šï¼ŒæœåŠ¡å™¨çš„æ“ä½œç³»ç»Ÿä¸º Ubuntu 18.04 LTS ã€‚æ•´ä¸ªå®‰è£…è¿‡ç¨‹å‚è€ƒè¿™ç¯‡æ–‡ç« (<a href="https://vuepress.mirror.docker-practice.com/install/ubuntu)ã€‚">https://vuepress.mirror.docker-practice.com/install/ubuntu)ã€‚</a></p><p>æˆ‘æ›¾åœ¨ä¸€æ¬¾è€æ—§çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šå°è¯•è¿‡å®‰è£… Docker ï¼Œä½†æ˜¯æœ€ç»ˆå¤±è´¥äº†ï¼ŒåŸå› æ˜¯ Docker ä¸æ”¯æŒ 32 ä½çš„æ“ä½œç³»ç»Ÿã€‚éœ‡æƒŠï¼ Dockerç«Ÿç„¶ä¸æ”¯æŒ 32ä½æ“ä½œç³»ç»Ÿï¼</p><p>ç”±äºæˆ‘æ²¡æœ‰å®‰è£…è¿‡è€ç‰ˆæœ¬ï¼Œå› æ­¤ä¸éœ€è¦æ‰§è¡Œå¸è½½æ—§ç‰ˆæœ¬çš„è¯­å¥ã€‚ç›´æ¥æ‰§è¡Œ</p><pre><code class="lang-sh">$ sudo apt-get update$ sudo apt-get install \    apt-transport-https \    ca-certificates \    curl \    gnupg \    lsb-release</code></pre><p>è¿™é‡Œè¿˜å‡ºç°äº†ä¸€äº›å°æ’æ›²ï¼Œå½“æˆ‘æ‰§è¡Œå®Œä¸Šé¢çš„ install è¯­å¥åï¼Œæˆ‘ä¸æœåŠ¡å™¨å»ºç«‹çš„ ssh è¿æ¥æ–­æ‰äº†ï¼Œä¹‹åæˆ‘è¯•å›¾é‡æ–°è¿æ¥å±…ç„¶æç¤ºå¯†ç é”™è¯¯ã€‚æœ€åæˆ‘é‡å¯è™šæ‹Ÿæœºï¼Œä¿®æ”¹ /etc/ssh/sshd_config ä¸­çš„ PermitRootLogin å­—æ®µä¸º yes è§£å†³äº†è¯¥é—®é¢˜ã€‚</p><p>æ·»åŠ è½¯ä»¶æºçš„ GPG å¯†é’¥ï¼Œä¸‹è½½å¹¶å®‰è£…ï¼Œè¿™ä¸€éƒ¨åˆ†ä¸å†èµ˜è¿°ã€‚</p><pre><code class="lang-sh">$ curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg$ echo \  &quot;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://mirrors.aliyun.com/docker-ce/linux/ubuntu \  $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null$ sudo apt-get update$ sudo apt-get install docker-ce docker-ce-cli containerd.io</code></pre><p>ä¹‹åå¯åŠ¨ Docker æœåŠ¡ï¼š</p><pre><code class="lang-sh">$ sudo systemctl enable docker$ sudo systemctl start docker</code></pre><p>æ¿€åŠ¨äººå¿ƒçš„æ—¶åˆ»åˆ°äº†ï¼Œæµ‹è¯•ä¸‹ Docker æ˜¯å¦å®‰è£…æˆåŠŸï¼Œæ‰§è¡Œä¸€ä¸ª Hello World çœ‹çœ‹ï¼š</p><pre><code class="lang-sh">$ sudo docker run --rm hello-world</code></pre><p><img src="/2021/04/13/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Docker%E7%9A%84%E5%AE%89%E8%A3%85/2021-04-13-00-48-07.png" alt></p><p>å¤§åŠŸå‘Šæˆï¼æ”¶å·¥ç¡è§‰~</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æˆ‘çš„2020å¹´ç»ˆæ€»ç»“</title>
    <link href="/2021/01/25/%E6%88%91%E7%9A%842020%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/"/>
    <url>/2021/01/25/%E6%88%91%E7%9A%842020%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<p>è¿Ÿæ¥çš„æ€»ç»“<br><!--more---></p><p>2020å¹´ç»ˆäºè¿‡å»äº†ã€‚å›é¦–2020ï¼Œæˆ‘çš„æˆç»©ä¸å¤šï¼Œæ•™è®­ä¸å°‘ï¼›æˆåŠŸä¸å¤šï¼Œå¤±è´¥ä¸å°‘ï¼›ç»éªŒä¸å¤šï¼Œæ•™è®­ä¸å°‘ï¼›ç›®æ ‡åˆ—å¾—å¤šï¼Œå®Œæˆçš„å°‘ã€‚</p><h1 id="å…³äºæ­¤åšå®¢"><a href="#å…³äºæ­¤åšå®¢" class="headerlink" title="å…³äºæ­¤åšå®¢"></a>å…³äºæ­¤åšå®¢</h1><p>åœ¨2020å¹´åˆæˆ‘ç»™è‡ªå·±å®šä¸‹æ¥çš„ç›®æ ‡æ˜¯å‘50ç¯‡åšå®¢ã€‚ç°åœ¨çœ‹æ¥ï¼Œåˆ°8æœˆåº•å·²ç»62ç¯‡ï¼Œç®—æ˜¯è¶…é¢å®Œæˆä»»åŠ¡ã€‚</p><p>ä¸è¿‡è‡ªå…«æœˆåº•å¼€å§‹æˆ‘è¿›å…¥åˆ›ä½œæ²‰å¯‚æœŸï¼Œè¿™æ˜¯å› ä¸ºè¿›å…¥æ–°å­¦æœŸä¹‹åï¼Œå¤§é‡çš„é‡è¦åˆç´§æ€¥çš„äº‹æƒ…æ‰‘é¢è€Œæ¥ï¼Œå†™åšå®¢åªèƒ½æ— é™æœŸæ¨è¿Ÿã€‚</p><p>ä½†æˆ‘å¿ƒä¸­è¿˜æ˜¯æœ‰ç€å†™ä½œçš„æ¬²æœ›çš„ã€‚é€šè¿‡å†™ä½œï¼Œæˆ‘çš„è¯­è¨€è¡¨è¾¾èƒ½åŠ›å¾—åˆ°äº†æå¤§çš„é”»ç‚¼ï¼Œå¾ˆå¤šçŸ¥è¯†ä¹Ÿåœ¨æ•´ç†åšå®¢çš„è¿‡ç¨‹ä¸­è¿›ä¸€æ­¥åœ°æ¶ˆåŒ–å’Œå¸æ”¶ã€‚</p><p>æˆ‘å†™åšå®¢çš„åˆè¡·æ˜¯æ‰¾ä¸€ä¸ªåƒ»é™çš„åœ°æ–¹ï¼Œé‡Šæ”¾è‡ªå·±çš„åˆ†äº«æ¬²æœ›ï¼ŒåŒæ—¶ä¸ä¼šæ‰“æ‰°åˆ°æˆ‘çš„ç†Ÿäººæœ‹å‹ä»¬ã€‚æˆ‘ä»æ¥ä¸æŒ‡æœ›è‡ªå·±å†™çš„å†…å®¹èƒ½å¤Ÿè¢«å¾ˆå¤šäººå‘ç°å’Œè½¬å‘ã€‚</p><p>ä¸€å¼€å§‹äº†è§£åˆ°åšå®¢è¿˜æ˜¯åœ¨â€œé¢å‘å¯¹è±¡è®¾è®¡â€è¿™é—¨è¯¾ä¸Šå¬é»„å“¥è¯´çš„ï¼Œäºæ˜¯æˆ‘å¼€é€šäº†CSDNè´¦å·ï¼Œå¼€é€šäº†è‡ªå·±çš„å…¬ä¼—å·ï¼Œä½†éƒ½ä¸äº†äº†ä¹‹ã€‚åæ¥FTKä»‹ç»githubä¸Šå¯ä»¥æ­å»ºä¸ªäººåšå®¢ï¼Œæˆ‘ä¾¿è¯•ç€æŒ‰ç…§æ•™ç¨‹æ­èµ·æ¥äº†ã€‚</p><p>æˆ‘å¯¹æ­¤åšå®¢çš„æœªæ¥æ„¿æ™¯æ˜¯ï¼Œé¦–å…ˆæ”¹é€ åšå®¢çš„æ’ç‰ˆå¸ƒå±€ï¼Œå…¶æ¬¡æ”¹é€ åšå®¢çš„çŸ¥è¯†æ¶æ„ã€‚ç›®å‰åšå®¢ç»™äººçš„ç¬¬ä¸€è§‚æ„Ÿååˆ†ç¾å¥½ï¼Œä½†æ˜¯ä»…é™äºç¬¬ä¸€å°è±¡ã€‚å› ä¸ºå½“æˆ‘ä¸€æ—¦æƒ³è¦é€šè¿‡åšå®¢æŸ¥è¯¢è‡ªå·±ä¹‹å‰çš„åšæ–‡æ—¶ï¼Œæ–‡ç« ç»“æ„æ··ä¹±çš„å¼Šç—…ä¾¿æš´éœ²å‡ºæ¥ã€‚å…‰æ˜¯ä¸€ä¸ªIMDBæ•°æ®é›†çš„ä»‹ç»å°±å†™äº†ä¸‰ç¯‡ï¼Œæ¯æ¬¡å†™ä½œæ—¶éƒ½å¿˜è®°äº†è‡ªå·±ä¸Šæ¬¡å·²ç»å†™è¿‡äº†ã€‚åšå®¢åº”å½“é¦–å…ˆæ˜¯ç”¨æ¥çœ‹çš„ï¼Œè€Œä¸æ˜¯ç”¨æ¥å†™çš„ã€‚</p><h1 id="å…³äºè®ºæ–‡"><a href="#å…³äºè®ºæ–‡" class="headerlink" title="å…³äºè®ºæ–‡"></a>å…³äºè®ºæ–‡</h1><p>è®ºæ–‡ã€è®ºæ–‡ï¼Œæˆ‘ä¸€æ•´å¹´éƒ½åœ¨å¿™è®ºæ–‡ï¼Œæ— è®ºæ˜¯æ–‡çŒ®é˜…è¯»è¿˜æ˜¯ç»„ä¼šæ±‡æŠ¥ï¼Œæˆ‘éƒ½åŠªåŠ›åšé‚£ä¸ªæœ€ç”¨åŠŸã€æœ€è®¤çœŸçš„é‚£ä¸€ä¸ªäººã€‚ä½†æ˜¯äº‹ä¸æ„¿è¿ï¼Œè¿™ä¸‰å¹´æˆ‘ä¸ä½†æ²¡èƒ½äº§å‡ºè®ºæ–‡ï¼Œç”šè‡³è¢«é€¼åˆ°è¿æ¯•ä¸šéƒ½æˆé—®é¢˜ã€‚</p><p>æ˜¯ä»€ä¹ˆå¯¼è‡´äº‹æƒ…æ¼”å˜æˆç°åœ¨è¿™ä¸ªæ ·å­ï¼Ÿæˆ‘ä¹Ÿå¾ˆéš¾è¯´ã€‚æˆ‘å€¾å‘äºä»è‡ªå·±æ‰¾åŸå› ï¼Œä¸‹é¢æ˜¯æˆ‘æ€»ç»“çš„å‡ ä¸ªåŸå› ï¼š</p><ol><li>è‡ªæ§åŠ›å·®åˆ°äº†æç‚¹</li></ol><p>æˆ‘çš„è‡ªæ§èƒ½åŠ›çœŸçš„å·®åˆ°å¯æ€•ã€‚ç–«æƒ…æœŸé—´æˆ‘éš”ç¦»åœ¨å®¶ï¼Œçˆ¶æ¯å·²ç»å°½å¯èƒ½ä¸ºæˆ‘æä¾›äº†å®‰é™çš„å­¦ä¹ ç¯å¢ƒã€‚ç„¶è€Œæˆ‘åœ¨å®¶é‡Œçš„8ä¸ªæœˆï¼Œæœ€å¸¸åšçš„ä¸€ä»¶äº‹å°±æ˜¯ç†¬å¤œã€‚</p><p>ä¸ºä»€ä¹ˆç†¬å¤œï¼Ÿæˆ‘ä»¬æ¯å‘¨å››éƒ½è¦è¿›è¡Œå·¥ä½œæ±‡æŠ¥ï¼Œé€šå¸¸æƒ…å†µä¸‹å‘¨å››å½“å¤©ä¸‹åˆã€å‘¨äº”ä¸€ç›´åˆ°å‘¨äºŒï¼Œæˆ‘éƒ½ä¸ä¼šå¿™å­¦æœ¯ï¼Œæ¯å¤©ä¸æ˜¯çå¿™å°±æ˜¯çœ‹è§†é¢‘ã€ç©æ¸¸æˆã€‚ç­‰åˆ°å‘¨ä¸‰å½“å¤©æˆ‘è¿«äºå‹åŠ›ï¼Œåªèƒ½å†™ç‚¹ä¸œè¥¿åšåšæ ·å­ï¼Œéšåè¿«äºå®åœ¨åšä¸å®Œäº†ï¼Œå°±å¼€å§‹ç†¬å¤œã€‚</p><p>è¿™å…«ä¸ªæœˆé‡Œé¢é¬¼çŸ¥é“æˆ‘ç†¬äº†å‡ æ¬¡å¤œï¼Ÿä¼´éšç€ä½œæ¯ç´Šä¹±è€Œæ¥çš„ï¼Œæ˜¯æˆ‘çš„æƒ…ç»ªå’Œèº«ä½“éƒ½å‡ºç°äº†é—®é¢˜ã€‚æˆ‘çš„å·¥ä½œæ•ˆç‡é€æ¸é™ä½ï¼Œæ€ç»´å†ä¹Ÿæ²¡æœ‰ä»¥å‰æ•æ·ï¼Œç®€å•çš„é—®é¢˜éœ€è¦æ€è€ƒå¾ˆé•¿æ—¶é—´ï¼Œè¿™å°±å½¢æˆäº†ä¸€ä¸ªæ¶æ€§å¾ªç¯ï¼Œå¯¼è‡´æˆ‘çš„å·¥ä½œæ•ˆç‡å¤§å¤§ä¸‹é™ï¼Œä»è€Œé€¼è¿«æˆ‘ç†¬æ›´å¤šçš„å¤œã€‚å¦å¤–å¾ˆå¤šä»»åŠ¡èµ¶ä¸ä¸Šå·¥æœŸï¼Œè¿™ç›´æ¥å¯¼è‡´æˆ‘å¼€å­¦ä¹‹åå·¥ä½œé‡æ¿€å¢ã€‚</p><p>ç„¶è€Œè¿™ä¸€åˆ‡æ˜æ˜æ˜¯å¯ä»¥é¿å…çš„ã€‚æ§åˆ¶è‡ªå·±æŠŠè¯¥åšçš„äº‹æƒ…åšå¥½ï¼Œèµ·ç æŠ•å…¥åˆ°è‡ªå·±è¯¥åšçš„äº‹æƒ…ä¸Šï¼Œè¿™æ˜æ˜æ˜¯ä¸€ä¸ªå­¦ç”Ÿã€ä¸€ä¸ªäººçš„æœ¬åˆ†ï¼Œä½†æˆ‘å´æ²¡æœ‰åšåˆ°ã€‚</p><ol><li>ä¸ä¼šè§„åˆ’äº‹æƒ…çš„ä¸»æ¬¡å’Œè½»é‡ç¼“æ€¥</li></ol><p>æˆ‘å–œæ¬¢åšè®¡åˆ’ï¼Œä½†å¹¶ä¸å–œæ¬¢æŒ‰ç…§è®¡åˆ’æ‰§è¡Œã€‚ç›¸ååœ°ï¼Œæˆ‘å–œæ¬¢å…ˆåšé‚£äº›çªå¦‚å…¶æ¥çš„å·¥ä½œã€æ›´æœ‰æ„æ€çš„å·¥ä½œï¼Œè€ŒæŠŠé‡è¦ä¸”ç´§æ€¥çš„å·¥ä½œæŠ›è¯¸è„‘åã€‚è¦çŸ¥é“åƒæ˜¯å†™åšå®¢è¿™ç§äº‹æƒ…èƒ½å¤Ÿç»™æˆ‘å¸¦æ¥å¾ˆå¤šæˆå°±æ„Ÿï¼Œè€Œæˆ‘çš„è¯¾é¢˜åˆ™å·²ç»å¾ˆä¹…æ²¡æœ‰è¿›å±•ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆå­¦å§åŠæˆ‘â€œä¸è¦æŠŠä¸€ä»¶äº‹æƒ…çš„æˆ˜çº¿æ‹‰å¾—ç‰¹åˆ«é•¿â€ï¼Œæˆ‘ç°åœ¨ç†è§£äº†ã€‚ä¸€é¼“ä½œæ°”ï¼Œå†è€Œè¡°ï¼Œä¸‰è€Œç«­ã€‚</p><h1 id="å…³äºæœªæ¥"><a href="#å…³äºæœªæ¥" class="headerlink" title="å…³äºæœªæ¥"></a>å…³äºæœªæ¥</h1><p>2020æˆ‘ç»å†äº†æ¯”è¾ƒå¤§çš„å‡ ä¸ªäº‹æƒ…ï¼Œä¸€ä¸ªæ˜¯å§¥å§¥å»ä¸–ï¼Œä¸€ä¸ªæ˜¯æŠ‘éƒç—‡ï¼Œä¸€ä¸ªæ˜¯å¥³å‹åˆ†æ‰‹ã€‚æˆ‘å·²ç»æŒ¯ä½œèµ·æ¥äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šè¯•ç€åœ¨æ¯•ä¸šå‰å†²ä¸€å†²è®ºæ–‡ï¼Œç®—æ˜¯ç»™è‡ªå·±ä¸€ä¸ªäº¤ä»£ï¼›åŒæ—¶åˆ·ä¸€åˆ·é¢˜ï¼Œåœ¨æ˜¥æ‹›çš„æ—¶å€™æ‰¾ä¸€ä»½å¥½å·¥ä½œï¼</p><p>2021å¹´çš„å‡ ä¸ªç¡¬æŒ‡æ ‡ï¼š</p><ol><li><p>åšå®¢100ç¯‡</p></li><li><p>ä¸Šä¼ 10ä¸ªBç«™è§†é¢‘</p></li><li><p>å¼•ä½“å‘ä¸Šå¯ä»¥ä¸€å£æ°”20ä¸ªï¼Œä¿¯å§æ’‘ä¸€å£æ°”100ä¸ª</p></li><li><p>å‘è¡¨è®ºæ–‡</p></li><li><p>NLPçš„å·¥ä½œ</p></li></ol>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ€»ç»“</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘æœºå™¨å­¦ä¹ â€”â€”æ”¯æŒå‘é‡æœºSVM</title>
    <link href="/2020/12/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BASVM/"/>
    <url>/2020/12/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BASVM/</url>
    
    <content type="html"><![CDATA[<p>ä»€ä¹ˆæ˜¯SVMï¼ŸSVMæ˜¯å¦‚ä½•ç”¨äºåˆ†ç±»çš„ï¼Ÿä¸ºä»€ä¹ˆæ±‚è§£å¯¹å¶é—®é¢˜ï¼Ÿæ ¸å‡½æ•°çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ<br><!--more---></p><h1 id="ä»€ä¹ˆæ˜¯æ”¯æŒå‘é‡æœºï¼ˆSupport-Vector-Machine-SVMï¼‰"><a href="#ä»€ä¹ˆæ˜¯æ”¯æŒå‘é‡æœºï¼ˆSupport-Vector-Machine-SVMï¼‰" class="headerlink" title="ä»€ä¹ˆæ˜¯æ”¯æŒå‘é‡æœºï¼ˆSupport Vector Machine, SVMï¼‰"></a>ä»€ä¹ˆæ˜¯æ”¯æŒå‘é‡æœºï¼ˆSupport Vector Machine, SVMï¼‰</h1><p>æ”¯æŒå‘é‡æœºæ˜¯ä¸€ç§äºŒåˆ†ç±»æ¨¡å‹ã€‚å®ƒçš„åŸºæœ¬æ¨¡å‹æ˜¯å®šä¹‰åœ¨ç‰¹å¾ç©ºé—´ä¸Šçš„é—´éš”æœ€å¤§çš„çº¿æ€§åˆ†ç±»å™¨ï¼Œé—´éš”æœ€å¤§ä½¿å®ƒæœ‰åˆ«äºæ„ŸçŸ¥æœºã€‚é€šè¿‡æ ¸æŠ€å·§ï¼Œæ”¯æŒå‘é‡æœºå¯ä»¥å¤„ç†éçº¿æ€§åˆ†ç±»é—®é¢˜ã€‚</p><p>æ”¯æŒå‘é‡æœºçš„å­¦ä¹ ç®—æ³•æ˜¯æ±‚è§£å‡¸äºŒæ¬¡è§„åˆ’çš„æœ€ä¼˜åŒ–ç®—æ³•ã€‚</p><p>ç”±äºç®—æ³•ç¡®å®šè¶…å¹³é¢æ—¶éœ€è¦ä½¿ç”¨è·ç¦»è¶…å¹³é¢æœ€è¿‘çš„å‡ ä¸ªè®­ç»ƒæ ·æœ¬ç‚¹ï¼Œè¿™äº›æ ·æœ¬è¢«ç§°ä¸ºâ€œæ”¯æŒå‘é‡â€ï¼Œæ”¯æŒå‘é‡æœºç”±æ­¤å¾—åã€‚</p><p>å‡è®¾è®­ç»ƒæ ·æœ¬<br><img src="/2020/12/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BASVM/2020-12-29-20-56-41.png" alt></p><p>åˆ™è¶…å¹³é¢å¯ä»¥è¿™æ ·è¡¨ç¤º<br><img src="/2020/12/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BASVM/2020-12-29-20-56-54.png" alt></p><p>è¿™ä¹Ÿå°±æ„å‘³ç€<br><img src="/2020/12/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BASVM/2020-12-29-20-57-06.png" alt></p><p>é€‰å–é‚£äº›ç¦»è¶…å¹³é¢æœ€è¿‘çš„ä¸¤ä¸ªä¸åŒç±»åˆ«çš„æ•°æ®ç‚¹ï¼Œå°†ä»–ä»¬å¸¦å…¥è¶…å¹³é¢æ–¹ç¨‹ï¼Œå‘ç°<br><img src="/2020/12/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BASVM/2020-12-29-20-57-21.png" alt><br><img src="/2020/12/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BASVM/2020-12-29-20-57-25.png" alt></p><p>åˆ™ä¸¤ä¸ªç‚¹åˆ°è¶…å¹³é¢è·ç¦»ä¹‹å’Œä¸º<br><img src="/2020/12/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BASVM/2020-12-29-20-57-37.png" alt></p><p>è¿™æ˜¯ç”±äºç‚¹åˆ°ç›´çº¿çš„è·ç¦»å…¬å¼ä¸º<br><img src="/2020/12/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BASVM/2020-12-29-20-57-49.png" alt></p><p>è¿™å‡ ä¸ªä»¤åˆ†å­ä¸º1çš„æ•°æ®ç‚¹ï¼Œå°±è¢«ç§°ä½œæ”¯æŒå‘é‡ã€‚</p><h1 id="æ”¯æŒå‘é‡æœºå¦‚ä½•åˆ†ç±»"><a href="#æ”¯æŒå‘é‡æœºå¦‚ä½•åˆ†ç±»" class="headerlink" title="æ”¯æŒå‘é‡æœºå¦‚ä½•åˆ†ç±»"></a>æ”¯æŒå‘é‡æœºå¦‚ä½•åˆ†ç±»</h1><p>æ”¯æŒå‘é‡æœºçš„å­¦ä¹ ç®—æ³•çš„ç›®æ ‡æ˜¯åœ¨ç‰¹å¾ç©ºé—´ä¸­æ‰¾åˆ°ä¸€ä¸ªåˆ†ç¦»è¶…å¹³é¢ï¼Œèƒ½å°†å®ä¾‹åˆ†åˆ°ä¸åŒçš„ç±»ã€‚å½“æ•°æ®çº¿æ€§å¯åˆ†æ—¶ï¼Œå­˜åœ¨æ— æ•°ä¸ªåˆ†ç¦»è¶…å¹³é¢èƒ½å°†å®ä¾‹æ­£ç¡®åˆ†å¼€ã€‚æ„ŸçŸ¥æœºåˆ©ç”¨è¯¯åˆ†ç±»æœ€å°çš„ç­–ç•¥ï¼Œè€Œæ”¯æŒå‘é‡æœºåˆ™åˆ©ç”¨é—´éš”æœ€å¤§åŒ–æ±‚å¾—æœ€ä¼˜è¶…å¹³é¢ï¼Œè¿™æ—¶è§£æ˜¯å”¯ä¸€çš„ã€‚</p><p>é€‰å–é‚£äº›æ”¯æŒå‘é‡ï¼Œå³è·ç¦»è¶…å¹³é¢æœ€è¿‘çš„ä¸¤ä¸ªæ ·æœ¬ç‚¹ï¼Œè®¡ç®—å®ƒä»¬åˆ°è¶…å¹³é¢çš„è·ç¦»2/||w||<br>é€šè¿‡ä¼˜åŒ–2/||w||ä½¿ä¹‹æœ€å¤§åŒ–ï¼Œä¾¿å¯ä½¿å¾—è¾¹è·æ‰©å¤§ã€‚ä¸ºäº†å¯»æ‰¾è¶…å¹³é¢ $ F(x)=wx+b $ ï¼Œæ”¯æŒå‘é‡æœºè¯•å›¾æ±‚è§£è¿™ä¸ªä¼˜åŒ–é—®é¢˜ï¼š<br><img src="/2020/12/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BASVM/2020-12-29-20-59-04.png" alt></p><p>å¯ä»¥è½¬åŒ–ä¸º<br><img src="/2020/12/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BASVM/2020-12-29-20-54-11.png" alt></p><p>é«˜ç­‰æ•°å­¦å‘Šè¯‰æˆ‘ä»¬ï¼Œæ±‚è§£å¸¦æœ‰é™åˆ¶æ¡ä»¶çš„ä¼˜åŒ–é—®é¢˜ï¼Œæ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•æ˜¯ç»å¸¸ç”¨äºè€ƒè™‘çš„æ–¹æ³•ã€‚<br>é—®é¢˜è½¬åŒ–ä¸ºï¼š<br><img src="/2020/12/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BASVM/2020-12-29-20-59-33.png" alt></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå°†å¸¦Nä¸ªçº¦æŸæ¡ä»¶çš„äºŒæ¬¡ä¼˜åŒ–é—®é¢˜ï¼Œè½¬æ¢ä¸ºæ— çº¦æŸä¼˜åŒ–é—®é¢˜ã€‚<br>è¿™é‡Œæ³¨æ„é™åˆ¶æ¡ä»¶å˜æˆäº†1-ã€‚ã€‚ã€‚è¿™æ˜¯å› ä¸ºæ‹‰æ ¼æœ—æ—¥ä¹˜æ•°æ³•è¦æ±‚å‚æ•°å¿…é¡»å¤§äºç­‰äºé›¶ï¼Œé™åˆ¶æ¡ä»¶éœ€è¦ç›¸é‡ç­‰äºé›¶ã€‚</p><p>ç”±æ­¤ï¼Œé—®é¢˜å˜æˆäº†$\min<em>{w,b}\max</em>{\lambda}\mathcal{L}(w,b,\lambda)$<br>å…ˆæŠŠ$\lambda$è§†ä½œå‚æ•°ï¼Œå°†$w,b$è§†ä½œå¸¸æ•°ï¼Œæ±‚$\mathcal{L}$çš„æœ€å¤§å€¼ã€‚</p><p>$\min<em>{w,b} \max</em>{\lambda} \mathcal{L}(w,b,\lambda)$å’ŒåŸé—®é¢˜æ˜¯ç­‰ä»·çš„ã€‚</p><h1 id="ä¸ºä»€ä¹ˆæ±‚è§£å¯¹å¶é—®é¢˜"><a href="#ä¸ºä»€ä¹ˆæ±‚è§£å¯¹å¶é—®é¢˜" class="headerlink" title="ä¸ºä»€ä¹ˆæ±‚è§£å¯¹å¶é—®é¢˜"></a>ä¸ºä»€ä¹ˆæ±‚è§£å¯¹å¶é—®é¢˜</h1><p>ç”±äºæ»¡è¶³KKTæ¡ä»¶ï¼Œè¿›è€Œå°†åŸé—®é¢˜è½¬åŒ–ä¸ºå¯¹å¶é—®é¢˜ï¼Œå³æ›´æ¢æ±‚è§£maxå’Œmin çš„æ¬¡åºã€‚<br><img src="/2020/12/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BASVM/2020-12-29-21-11-01.png" alt></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒåŸé—®é¢˜çš„é™åˆ¶æ¡ä»¶ä¸­åŒ…å«è¾ƒä¸ºå¤æ‚çš„çº¿æ€§ä¸ç­‰å¼ï¼Œè¿™æ˜¯é˜»ç¢æˆ‘ä»¬è¿›è¡Œä¼˜åŒ–çš„é—®é¢˜æ‰€åœ¨ï¼›è€Œå…¶å¯¹å¶é—®é¢˜ä¸ä½†ç®€åŒ–äº†é™åˆ¶æ¡ä»¶ï¼Œè€Œä¸”åŒ…å«$\sum{\lambda_iy_i}=0$å¾ˆå®¹æ˜“æ¶ˆå»ï¼Œæå¤§é™ä½äº†æ±‚è§£éš¾åº¦ã€‚</p><h1 id="æ ¸å‡½æ•°çš„åŸç†"><a href="#æ ¸å‡½æ•°çš„åŸç†" class="headerlink" title="æ ¸å‡½æ•°çš„åŸç†"></a>æ ¸å‡½æ•°çš„åŸç†</h1><p>è®¡ç®—ä¸¤ä¸ªå‘é‡åœ¨éšå¼æ˜ å°„è¿‡åçš„ç©ºé—´ä¸­çš„å†…ç§¯çš„å‡½æ•°å«åšæ ¸å‡½æ•°ï¼ˆKernel Functionï¼‰<br><img src="/2020/12/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BASVM/2020-12-29-21-16-23.png" alt></p><p><img src="/2020/12/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BASVM/2020-12-29-21-27-34.png" alt></p><p><img src="/2020/12/29/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BASVM/2020-12-29-21-27-49.png" alt></p><p>æ ¸å‡½æ•°ç›®çš„ï¼šæŠŠåŸåæ ‡ç³»é‡Œçº¿æ€§ä¸å¯åˆ†çš„æ•°æ®ç”¨KernelæŠ•å½±åˆ°å¦ä¸€ä¸ªç©ºé—´ï¼Œå°½é‡ä½¿å¾—æ•°æ®åœ¨æ–°çš„ç©ºé—´é‡Œçº¿æ€§å¯åˆ†ã€‚</p><p>æ ¸å‡½æ•°çš„ç‰¹ç‚¹ï¼š</p><p>1ï¼‰æ ¸å‡½æ•°çš„å¼•å…¥é¿å…äº†â€œç»´æ•°ç¾éš¾â€ï¼Œå¤§å¤§å‡å°äº†è®¡ç®—é‡ã€‚è€Œè¾“å…¥ç©ºé—´çš„ç»´æ•°nå¯¹æ ¸å‡½æ•°çŸ©é˜µæ— å½±å“ï¼Œå› æ­¤ï¼Œæ ¸å‡½æ•°æ–¹æ³•å¯ä»¥æœ‰æ•ˆå¤„ç†é«˜ç»´è¾“å…¥ã€‚</p><p>2ï¼‰æ— éœ€çŸ¥é“éçº¿æ€§å˜æ¢å‡½æ•°$\phi$çš„å½¢å¼å’Œå‚æ•°.</p><p>3ï¼‰æ ¸å‡½æ•°çš„å½¢å¼å’Œå‚æ•°çš„å˜åŒ–ä¼šéšå¼åœ°æ”¹å˜ä»è¾“å…¥ç©ºé—´åˆ°ç‰¹å¾ç©ºé—´çš„æ˜ å°„ï¼Œè¿›è€Œå¯¹ç‰¹å¾ç©ºé—´çš„æ€§è´¨äº§ç”Ÿå½±å“ï¼Œæœ€ç»ˆæ”¹å˜å„ç§æ ¸å‡½æ•°æ–¹æ³•çš„æ€§èƒ½ã€‚</p><p>4ï¼‰æ ¸å‡½æ•°æ–¹æ³•å¯ä»¥å’Œä¸åŒçš„ç®—æ³•ç›¸ç»“åˆï¼Œå½¢æˆå¤šç§ä¸åŒçš„åŸºäºæ ¸å‡½æ•°æŠ€æœ¯çš„æ–¹æ³•ï¼Œä¸”è¿™ä¸¤éƒ¨åˆ†çš„è®¾è®¡å¯ä»¥å•ç‹¬è¿›è¡Œï¼Œå¹¶å¯ä»¥ä¸ºä¸åŒçš„åº”ç”¨é€‰æ‹©ä¸åŒçš„æ ¸å‡½æ•°å’Œç®—æ³•ã€‚</p><h1 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h1><p>ã€Šæœºå™¨å­¦ä¹ ã€‹å‘¨å¿—å</p><p>ã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹æèˆª</p><p>ã€Šæœºå™¨å­¦ä¹ åŸºç¡€ã€‹æ¢…å°”äºšÂ·è«é‡Œç­‰</p><p>SVMå…¥é—¨ï¼ˆä¸ƒï¼‰ä¸ºä½•éœ€è¦æ ¸å‡½æ•°ï¼š<a href="http://www.blogjava.net/zhenandaci/archive/2009/03/06/258288.html">http://www.blogjava.net/zhenandaci/archive/2009/03/06/258288.html</a></p><p>å¦‚ä½•é€šä¿—åœ°è®²è§£å¯¹å¶é—®é¢˜ï¼Ÿå°¤å…¶æ˜¯æ‹‰æ ¼æœ—æ—¥å¯¹å¶lagrangian dualityï¼ŸçŸ¥ä¹å›ç­”ï¼š<a href="https://www.zhihu.com/question/58584814">https://www.zhihu.com/question/58584814</a></p><p>ä¸ºä»€ä¹ˆæ”¯æŒå‘é‡æœºè¦ç”¨æ‹‰æ ¼æœ—æ—¥å¯¹å¶ç®—æ³•æ¥è§£æœ€å¤§åŒ–é—´éš”é—®é¢˜ï¼ŸçŸ¥ä¹å›ç­”ï¼š<a href="https://www.zhihu.com/question/36694952">https://www.zhihu.com/question/36694952</a></p><p>ç®€æ˜“è§£è¯´æ‹‰æ ¼æœ—æ—¥å¯¹å¶ï¼ˆLagrange dualityï¼‰ï¼š<a href="https://www.cnblogs.com/90zeng/p/Lagrange_duality.html">https://www.cnblogs.com/90zeng/p/Lagrange_duality.html</a></p><p>æ‹‰æ ¼æœ—æ—¥å¯¹å¶æ€§ï¼š<a href="https://www.cnblogs.com/nxf-rabbit75/p/11453355.html">https://www.cnblogs.com/nxf-rabbit75/p/11453355.html</a></p><p>æœºå™¨å­¦ä¹ ç™½æ¿æ¨å¯¼ï¼š<a href="https://www.bilibili.com/video/BV1aE411o7qd">https://www.bilibili.com/video/BV1aE411o7qd</a></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>machine learning</tag>
      
      <tag>SVM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘Ubuntu 18.04 å®‰è£…Goçš„è¸©å‘æŒ‡å—</title>
    <link href="/2020/10/02/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Ubuntu-18-04-%E5%AE%89%E8%A3%85Go%E7%9A%84%E8%B8%A9%E5%9D%91%E6%8C%87%E5%8D%97/"/>
    <url>/2020/10/02/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Ubuntu-18-04-%E5%AE%89%E8%A3%85Go%E7%9A%84%E8%B8%A9%E5%9D%91%E6%8C%87%E5%8D%97/</url>
    
    <content type="html"><![CDATA[<p>Goå®‰è£…ä¸­é‡åˆ°çš„å‘<br><!--more---></p><p>gvmæ˜¯ç¬¬ä¸‰æ–¹å¼€å‘çš„Goå¤šç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œåˆ©ç”¨gvmä¸‹è½½å’Œå®‰è£…goã€‚</p><p>æ‰§è¡Œä»¥ä¸‹ä»£ç æ—¶ï¼Œä½ åº”è¯¥ç¡®ä¿è‡ªå·±å®‰è£…æœ‰curl</p><pre><code>bash &lt; &lt;(curl -s -S -L https://raw.githubusercontent.com/moovweb/gvm/master/binscripts/gvm-installer)</code></pre><p>åœ¨æ‰§è¡Œä¸Šè¿°curlæ—¶ï¼Œæˆ‘çš„ubuntu 18.04æŠ¥é”™</p><p>curl: (7) Failed to connect to <a href="http://raw.githubusercontent.com/">raw.githubusercontent.com</a> port 443: Connection refused</p><p>ç»è¿‡<a href="[https://github.com/hawtim/blog/issues/10](https://github.com/hawtim/blog/issues/10">è¿™ä¸ª</a>)å¸–å­çš„æŒ‡å¼•ï¼Œæˆ‘åœ¨hostsä¸­æ·»åŠ äº†å¦‚ä¸‹å‡ è¡Œï¼š</p><p>199.232.68.133 raw.githubusercontent.com</p><p>199.232.68.133 user-images.githubusercontent.com</p><p>199.232.68.133 avatars2.githubusercontent.com</p><p>199.232.68.133 avatars1.githubusercontent.com</p><p>curlä¾¿å¯ä»¥æ­£å¸¸ä¸‹è½½äº†ã€‚</p><p>å®‰è£…å®Œæˆgvmåæˆ‘ä»¬å°±å¯ä»¥å®‰è£…goäº†ï¼š</p><pre><code>gvm install go1.15.2gvm use go1.15.2</code></pre><p>è¿™ä¸ªæ—¶å€™å‡ºç°é”™è¯¯</p><p>zyt@ubuntu:~$ gvm install go1.15.2<br>Installing go1.15.2â€¦</p><ul><li>Compilingâ€¦<br>/home/zyt/.gvm/scripts/install: line 84: go: command not found<br>ERROR: Failed to compile. Check the logs at /home/zyt/.gvm/logs/go-go1.15.2-compile.log<br>ERROR: Failed to use installed version</li></ul><p>ç»æŸ¥è¯¢ï¼ŒGoç‰ˆæœ¬åœ¨1.5ä»¥ä¸Šï¼Œéœ€è¦åœ¨æŒ‡ä»¤æœ€ååŠ ä¸Š-B</p><p><a href="https://github.com/moovweb/gvm#a-note-on-compiling-go-15">https://github.com/moovweb/gvm#a-note-on-compiling-go-15</a></p><p>zyt@ubuntu:~$ gvm install go1.15.2 -B<br>Installing go1.15.2 from binary source</p><pre><code>gvm use go1.15.2export GOROOT_BOOTSTRAP=$GOROOTgvm install go1.5zyt@ubuntu:~$ gvm listgvm gos (installed)=&gt; go1.15.2zyt@ubuntu:~$ gvm listallgvm gos (available)</code></pre>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Golang</tag>
      
      <tag>å®‰è£…</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç«èµ›æ‰“å¡ã€‘leetcodeæ‰“å¡ï¼šæŸ¥æ‰¾ç®—æ³•2</title>
    <link href="/2020/08/27/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91leetcode%E6%89%93%E5%8D%A1%EF%BC%9A%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%952/"/>
    <url>/2020/08/27/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91leetcode%E6%89%93%E5%8D%A1%EF%BC%9A%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%952/</url>
    
    <content type="html"><![CDATA[<p>è§å¤šäº†ä¼˜ç§€çš„æ–‡ç« ï¼Œå†å†™åšå®¢çš„æ—¶å€™å°±ä¼šæ„Ÿå¹è‡ªå·±çš„å­¦è¯†æµ…è–„ã€‚<br><!--more---></p><h2 id="1-ä¸¤æ•°ä¹‹å’Œ"><a href="#1-ä¸¤æ•°ä¹‹å’Œ" class="headerlink" title="1 ä¸¤æ•°ä¹‹å’Œ"></a>1 ä¸¤æ•°ä¹‹å’Œ</h2><pre><code class="lang-cpp">class Solution &#123;public:    vector&lt;int&gt; twoSum(vector&lt;int&gt;&amp; nums, int target) &#123;        if (nums.empty()) return &#123;&#125;;        unordered_map&lt;int, int&gt; hash;        vector&lt;int&gt; res;        // construct dict        for (int i = 0; i &lt; nums.size(); ++i) &#123;            hash[nums[i]] = i;        &#125;        for (int i = 0; i &lt; nums.size(); ++i) &#123;            int temp = target - nums[i];            auto iter = hash.find(temp);            if (iter != hash.end() &amp;&amp; iter-&gt;second != i) &#123;                res.push_back(i);                res.push_back(iter-&gt;second);                break;            &#125;        &#125;        return res;    &#125;&#125;;</code></pre><p>æ€æƒ³ï¼šç”¨hashæŠŠå¾…æŸ¥æ•°ç»„ä¿å­˜èµ·æ¥ï¼Œè¿™æ ·å†æ¬¡æŸ¥æ‰¾çš„æ—¶é—´å°±æ˜¯O(1)äº†ã€‚</p><h2 id="15-ä¸‰æ•°ä¹‹å’Œ"><a href="#15-ä¸‰æ•°ä¹‹å’Œ" class="headerlink" title="15 ä¸‰æ•°ä¹‹å’Œ"></a>15 ä¸‰æ•°ä¹‹å’Œ</h2><pre><code class="lang-py">class Solution:    def threeSum(self, nums: List[int]) -&gt; List[List[int]]:        res = []        size = len(nums)        if size &lt; 3: return res        nums.sort()        for i in range(size-2):            if i &gt; 0 and nums[i] == nums[i-1]: continue            j = i + 1            k = size - 1            while j &lt; k:                ans = nums[i] + nums[j] + nums[k]                if (ans &gt; 0): k = k - 1                elif (ans &lt; 0): j = j + 1                else:                    res.append([nums[i], nums[j], nums[k]])                    while j &lt; size and nums[j] == nums[j-1]: j += 1                    k -= 1                    while k &gt;= 0 and nums[k] == nums[k+1]: k -= 1        return res</code></pre><p>æ€æƒ³ï¼šç”¨ä¸‰ä¸ªä¸‹æ ‡<code>i,j,k</code>éå†æ‰€æœ‰å¯èƒ½ã€‚é¦–å…ˆæ’åºï¼Œç„¶åä¸æ–­ç¼©å°iã€jå’Œkçš„åŒºé—´ã€‚</p><h2 id="16-æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ"><a href="#16-æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ" class="headerlink" title="16 æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ"></a>16 æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ</h2><pre><code class="lang-cpp">class Solution &#123;public:    int threeSumClosest(vector&lt;int&gt;&amp; nums, int target) &#123;        const int size = nums.size();        if (size &lt;= 3) return std::accumulate(nums.begin(), nums.end(), 0); // 0æ˜¯ç´¯åŠ çš„åˆå€¼        std::sort(nums.begin(), nums.end());        int result = nums[0] + nums[1] + nums[2]; // åˆå€¼        for (int i = 0; i &lt; size - 2; ++i) &#123;            int j = i + 1;            int k = size - 1;            while (j &lt; k) &#123;                int temp = nums[i] + nums[j] + nums[k];                if (std::abs(target - temp) &lt; std::abs(target - result)) &#123;                    result = temp;                &#125;                if (result == target) &#123; // ç›´æ¥æ‰¾åˆ°äº†                    return result;                &#125;                if (temp &gt; target) &#123;                    --k; // tempå¤ªå¤§ï¼Œéœ€è¦ç¼©å°å³è¾¹ç•Œ                &#125; else &#123;                    ++j; // tempå¤ªå°ï¼Œéœ€è¦ç¼©å°å·¦è¾¹ç•Œ                &#125;            &#125;        &#125;        return result;    &#125;&#125;;</code></pre><p>æ€è·¯ï¼šè¿˜æ˜¯åˆ©ç”¨ä¸‰ä¸ªä¸‹æ ‡<code>i,j,k</code>éå†å…¨éƒ¨æ•°ç»„ã€‚ä¸­é€”ä¸æ–­ä¿å­˜å’Œtargetæœ€è¿‘çš„tempå€¼ã€‚</p><h2 id="18-å››æ•°ä¹‹å’Œ"><a href="#18-å››æ•°ä¹‹å’Œ" class="headerlink" title="18 å››æ•°ä¹‹å’Œ"></a>18 å››æ•°ä¹‹å’Œ</h2><pre><code class="lang-cpp">class Solution &#123;public:    vector&lt;vector&lt;int&gt;&gt; fourSum(vector&lt;int&gt;&amp; nums, int target) &#123;        sort(nums.begin(),nums.end());        vector&lt;vector&lt;int&gt; &gt; res;        if(nums.size()&lt;4) return res;        int a,b,c,d,_size=nums.size();        for(a=0;a&lt;_size-3;a++)&#123;            if(a&gt;0&amp;&amp;nums[a]==nums[a-1]) continue;      //ç¡®ä¿nums[a] æ”¹å˜äº†            for(b=a+1;b&lt;_size-2;b++)&#123;                if(b&gt;a+1&amp;&amp;nums[b]==nums[b-1])continue;   //ç¡®ä¿nums[b] æ”¹å˜äº†                c=b+1,d=_size-1;                while(c&lt;d)&#123;                    if(nums[a]+nums[b]+nums[c]+nums[d]&lt;target)                        c++;                    else if(nums[a]+nums[b]+nums[c]+nums[d]&gt;target)                        d--;                    else&#123;                        res.push_back(&#123;nums[a],nums[b],nums[c],nums[d]&#125;);                        while(c&lt;d&amp;&amp;nums[c+1]==nums[c])      //ç¡®ä¿nums[c] æ”¹å˜äº†                            c++;                        while(c&lt;d&amp;&amp;nums[d-1]==nums[d])      //ç¡®ä¿nums[d] æ”¹å˜äº†                            d--;                        c++;                        d--;                    &#125;                &#125;            &#125;        &#125;        return res;    &#125;&#125;;</code></pre><p>æ€è·¯ï¼šå››æŒ‡é’ˆã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>algorithm</tag>
      
      <tag>leetcode</tag>
      
      <tag>Datawhale</tag>
      
      <tag>search</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç«èµ›æ‰“å¡ã€‘æ•°æ®æŒ–æ˜å®è·µâ€”â€”æ€»ç»“ä¸åæ€</title>
    <link href="/2020/08/25/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94%E6%80%BB%E7%BB%93%E4%B8%8E%E5%8F%8D%E6%80%9D/"/>
    <url>/2020/08/25/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94%E6%80%BB%E7%BB%93%E4%B8%8E%E5%8F%8D%E6%80%9D/</url>
    
    <content type="html"><![CDATA[<!--more---><p>è¿™æ¬¡ç»„é˜Ÿå­¦ä¹ ç¡®å®æ˜¯è‡ªå·±ä¸å¤ªæ“…é•¿çš„é¢†åŸŸã€‚å€Ÿç€ä¸Šæ¬¡NLPç»„é˜Ÿå­¦ä¹ çš„å†²åŠ²ï¼Œæœ¬ä»¥ä¸ºæƒ³åœ¨ä¸ç†Ÿæ‚‰çš„é¢†åŸŸä¹Ÿèƒ½è‡³å°‘å­¦ç‚¹ä¸œè¥¿ï¼Œä½†ç¡®å®æ˜¯å°çœ‹äº†è¿™æ¬¡å­¦ä¹ çš„éš¾åº¦ã€‚</p><p>å›å¤´æ¥çœ‹ï¼Œç»„é˜Ÿå­¦ä¹ è¿›å…¥åˆ°ç‰¹å¾å·¥ç¨‹çš„æ—¶å€™ï¼Œæˆ‘å·²ç»å®Œå…¨ä¸€è„¸æ‡µé€¼äº†ã€‚æˆ‘å¾ˆæƒ³è·Ÿä¸Šå¤§å®¶çš„èŠ‚å¥ï¼Œä½†æ˜¯ç¡®å®ä¸€ä¸ªæ˜¯æ²¡æœ‰æ—¶é—´ï¼Œå¦ä¸€ä¸ªæ˜¯å·®å¤ªå¤šäº†ï¼Œå·²ç»è¿›å…¥äº†ææ…ŒåŒºï¼Œè„‘æµ·é‡Œä¹Ÿæ˜¯æ‹’ç»çš„å¿ƒæ€ã€‚æˆ‘çŸ¥é“è¿™æ¬¡ç»„é˜Ÿå­¦ä¹ å·²ç»å½»åº•å¤±è´¥äº†ã€‚</p><p>å”‰ï¼å†…å¿ƒå……æ»¡äº†æŒ«è´¥æ„Ÿã€‚è¿™æ¬¡ç»„é˜Ÿå­¦ä¹ å”¯ä¸€çš„æ”¶è·å°±æ˜¯ï¼Œè·å¾—äº†è¿™æ¬¡æ¯”èµ›çš„Baselineã€‚è‡ªæ­¤ä¹‹åæˆ‘å°±è¦æŠ•å…¥åˆ°ç§‹æ‹›äº†ï¼Œæˆ‘æ›¾å‚åŠ è¿‡CVèµ›äº‹ã€NLPèµ›äº‹ï¼Œå†åŠ ä¸Šè¿™ä¸ªç»“æ„åŒ–èµ›äº‹ï¼Œæˆ‘çš„æ¯”èµ›ç»å†ç®—æ˜¯åœ†æ»¡äº†ï¼Œæ¥ä¸‹æ¥çš„æ—¥å­å°±æ˜¯ç ”ç©¶Baselineã€å¥½å¥½å‡†å¤‡ç®€å†äº†ï¼Œä¹Ÿè¯¥æ”¶æ”¶å¿ƒäº†ã€‚</p><p>ç¥è‡ªå·±å¥½è¿ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Datawhale</tag>
      
      <tag>Data Mining</tag>
      
      <tag>Time Series Analysis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç«èµ›æ‰“å¡ã€‘æ•°æ®æŒ–æ˜å®è·µâ€”â€”å»ºæ¨¡é¢„æµ‹</title>
    <link href="/2020/08/24/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94%E5%BB%BA%E6%A8%A1%E9%A2%84%E6%B5%8B/"/>
    <url>/2020/08/24/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94%E5%BB%BA%E6%A8%A1%E9%A2%84%E6%B5%8B/</url>
    
    <content type="html"><![CDATA[<!--more---><pre><code class="lang-py">import matplotlib.pyplot as pltimport pandas as pdimport numpy as npfrom tensorflow.keras.layers import Input, Conv1D, MaxPooling1D, Dense, Add, Dropout, Flatten, TimeDistributedfrom tensorflow.keras.models import Model, Sequentialfrom tensorflow.keras import activations, optimizers, regularizersfrom tensorflow.keras.callbacks import EarlyStoppingimport tensorflow.keras.backend as kbfrom tensorflow import kerasfrom sklearn.preprocessing import MinMaxScalerfrom sklearn.metrics import mean_squared_error, mean_absolute_errorfrom time import *user_balance = pd.read_csv(&#39;Purchase Redemption Data/user_balance_table.csv&#39;)df_tmp = user_balance.groupby([&#39;report_date&#39;])[&#39;total_purchase_amt&#39;, &#39;total_redeem_amt&#39;].sum()df_tmp.index = pd.to_datetime(df_tmp.index, format=&#39;%Y%m%d&#39;)holidays = (&#39;20130813&#39;, &#39;20130902&#39;, &#39;20131001&#39;, &#39;20131111&#39;, &#39;20130919&#39;, &#39;20131225&#39;, &#39;20140101&#39;, &#39;20140130&#39;, &#39;20140131&#39;,           &#39;20140214&#39;, &#39;20140405&#39;, &#39;20140501&#39;, &#39;20140602&#39;, &#39;20140802&#39;, &#39;20140901&#39;, &#39;20140908&#39;)def create_features(timeindex):    n = len(timeindex)    features = np.zeros((n, 4))    features[:, 0] = timeindex.day.values/31    features[:, 1] = timeindex.month.values/12    features[:, 2] = timeindex.weekday.values/6    for i in range(n):        if timeindex[i].strftime(&#39;%Y%m%d&#39;) in holidays:            features[i, 3] = 1    return featuresfeatures = create_features(df_tmp.index)september = pd.to_datetime([&#39;201409%02d&#39; % i for i in range(1, 31)])features_sep = create_features(september)scaler_pur = MinMaxScaler()scaler_red = MinMaxScaler()data_pur = scaler_pur.fit_transform(df_tmp.values[:, 0:1])data_red = scaler_red.fit_transform(df_tmp.values[:, 1:2])def create_dataset(data, back, forward=30):    n_samples = len(data) - back - forward + 1    X, Y = np.zeros((n_samples, back, data.shape[-1])), np.zeros((n_samples, forward, data.shape[-1]))    for i in range(n_samples):        X[i, ...] = data[i:i+back, :]        Y[i, ...] = data[i+back:i+back+forward, :]    return X, Ydef build_cnn(X_trn, lr, n_outputs, dropout_rate):    inputs = Input(X_trn.shape[1:])    z = Conv1D(64, 14, padding=&#39;valid&#39;, activation=&#39;relu&#39;, kernel_initializer=&#39;he_uniform&#39;)(inputs)#     z = MaxPooling1D(2)(z)    z = Conv1D(128, 7, padding=&#39;valid&#39;, activation=&#39;relu&#39;, kernel_initializer=&#39;he_uniform&#39;)(z)    z = MaxPooling1D(2)(z)    z = Conv1D(256, 3, padding=&#39;valid&#39;, activation=&#39;relu&#39;, kernel_initializer=&#39;he_uniform&#39;)(z)    z = Conv1D(256, 3, padding=&#39;valid&#39;, activation=&#39;relu&#39;, kernel_initializer=&#39;he_uniform&#39;)(z)    z = MaxPooling1D(2)(z)    z = Flatten()(z)    z = Dropout(dropout_rate)(z)    z = Dense(128, activation=&#39;relu&#39;, kernel_initializer=&#39;he_uniform&#39;)(z)    z = Dropout(dropout_rate)(z)    z = Dense(84, activation=&#39;relu&#39;, kernel_initializer=&#39;he_uniform&#39;)(z)    outputs = Dense(n_outputs)(z)    model = Model(inputs=inputs, outputs=outputs)    adam = optimizers.Adam(lr=lr)    model.compile(loss=&#39;mse&#39;, optimizer=adam, metrics=[&#39;mae&#39;])    model.summary()    return modelback = 60forward = 30X_pur_data, Y_pur_data = create_dataset(data_pur, back, forward)X_red_data, Y_red_data = create_dataset(data_red, back, forward)X_features, Y_features = create_dataset(features, back, forward)Y_features = np.concatenate((Y_features, np.zeros((Y_features.shape[0], back-forward, Y_features.shape[-1]))), axis=1)# X_pur, X_red = np.concatenate((X_pur_data, X_features, Y_features), axis=-1), np.concatenate((X_red_data, X_features, Y_features), axis=-1)# X_pur_trn, X_pur_val, X_red_trn, X_red_val = X_pur[:-forward, ...], X_pur[-1:, ...], X_red[:-forward, ...], X_red[-1:, ...]# Y_pur_trn, Y_pur_val, Y_red_trn, Y_red_val = Y_pur_data[:-forward, ...], Y_pur_data[-1:, ...], Y_red_data[:-forward, ...], Y_red_data[-1:, ...]Y_fea_sep = np.concatenate((features_sep, np.zeros((back-forward, features_sep.shape[-1]))), axis=0)# X_pur_tst = np.concatenate((data_pur[-back:, :], features[-back:, :], Y_fea_sep), axis=-1)[None, ...]# X_red_tst = np.concatenate((data_red[-back:, :], features[-back:, :], Y_fea_sep), axis=-1)[None, ...]X = np.concatenate((X_pur_data, X_red_data, X_features, Y_features), axis=-1)Y = np.concatenate((Y_pur_data, Y_red_data), axis=1)X_trn, X_val, Y_trn, Y_val = X[:-forward, ...], X[-1:, ...], Y[:-forward, ...], Y[-1:, ...]X_tst = np.concatenate((data_pur[-back:, :], data_red[-back:, :], features[-back:, :], Y_fea_sep), axis=-1)[None, ...]cnn_pur = build_cnn(X_trn, lr=0.0008, n_outputs=2*forward, dropout_rate=0.5)history = cnn_pur.fit(X_trn, Y_trn, batch_size=32, epochs=1000, verbose=2,                       validation_data=(X_val, Y_val),                     callbacks=[EarlyStopping(monitor=&#39;val_mae&#39;, patience=200, restore_best_weights=True)])plt.figure(figsize=(8, 5))plt.plot(history.history[&#39;mae&#39;], label=&#39;train mae&#39;)plt.plot(history.history[&#39;val_mae&#39;], label=&#39;validation mae&#39;)plt.ylim([0, 0.2])plt.legend()plt.show()def plot_prediction(y_pred, y_true):    plt.figure(figsize=(16,4))    plt.plot(np.squeeze(y_pred), label=&#39;prediction&#39;)    plt.plot(np.squeeze(y_true), label=&#39;true&#39;)    plt.legend()    plt.show()    print(&#39;MAE: %.3f&#39; % mean_absolute_error(np.squeeze(y_pred), np.squeeze(y_true)))pred = cnn.predict(X_val)plot_prediction(pred, Y_val)history = cnn.fit(X, Y, batch_size=32, epochs=500, verbose=2,                     callbacks=[EarlyStopping(monitor=&#39;mae&#39;, patience=30, restore_best_weights=True)])plt.figure(figsize=(8, 5))plt.plot(history.history[&#39;mae&#39;], label=&#39;train mae&#39;)plt.legend()plt.show()print(cnn.evaluate(X, Y, verbose=2))pred_tst = cnn.predict(X_tst)pur_sep = scaler_pur.inverse_transform(pred_tst[:, :forward].transpose())red_sep = scaler_red.inverse_transform(pred_tst[:, forward:].transpose())test_user = pd.DataFrame(&#123;&#39;report_date&#39;: [20140900 + i for i in range(1, 31)]&#125;)test_user[&#39;pur&#39;] = pur_sep.astype(&#39;int&#39;)test_user[&#39;red&#39;] = red_sep.astype(&#39;int&#39;)test_user.to_csv(&#39;submission.csv&#39;, encoding=&#39;utf-8&#39;, index=None, header=None)from google.colab import filesfiles.download(&quot;submission.csv&quot;)</code></pre>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Datawhale</tag>
      
      <tag>Data Mining</tag>
      
      <tag>Time Series Analysis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç«èµ›æ‰“å¡ã€‘æ•°æ®æŒ–æ˜å®è·µâ€”â€”ç‰¹å¾å·¥ç¨‹</title>
    <link href="/2020/08/24/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B/"/>
    <url>/2020/08/24/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<p>æˆ‘ä¹Ÿæ˜¯åŠ æŠŠåŠ²éª‘å£«ï¼<br><!--more---></p><p>æ•°æ®å’Œç‰¹å¾å†³å®šäº†æœºå™¨å­¦ä¹ çš„ä¸Šé™ï¼Œè€Œæ¨¡å‹å’Œç®—æ³•åªæ˜¯é€¼è¿‘è¿™ä¸ªä¸Šé™è€Œå·²ã€‚ç”±æ­¤å¯è§ï¼Œç‰¹å¾å·¥ç¨‹åœ¨æœºå™¨å­¦ä¹ ä¸­å æœ‰ç›¸å½“é‡è¦çš„åœ°ä½ã€‚åœ¨å®é™…åº”ç”¨å½“ä¸­ï¼Œå¯ä»¥è¯´ç‰¹å¾å·¥ç¨‹æ˜¯æœºå™¨å­¦ä¹ æˆåŠŸçš„å…³é”®ã€‚</p><p>é‚£ç‰¹å¾å·¥ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>ç‰¹å¾å·¥ç¨‹æ˜¯åˆ©ç”¨æ•°æ®é¢†åŸŸçš„ç›¸å…³çŸ¥è¯†æ¥åˆ›å»ºèƒ½å¤Ÿä½¿æœºå™¨å­¦ä¹ ç®—æ³•è¾¾åˆ°æœ€ä½³æ€§èƒ½çš„ç‰¹å¾çš„è¿‡ç¨‹ã€‚</p><p>ç‰¹å¾å·¥ç¨‹åˆåŒ…å«äº† Data PreProcessingï¼ˆæ•°æ®é¢„å¤„ç†ï¼‰ã€Feature Extractionï¼ˆç‰¹å¾æå–ï¼‰ã€Feature Selectionï¼ˆç‰¹å¾é€‰æ‹©ï¼‰å’Œ Feature constructionï¼ˆç‰¹å¾æ„é€ ï¼‰ç­‰å­é—®é¢˜ï¼Œæœ¬ç« å†…å®¹ä¸»è¦è®¨è®ºç‰¹å¾æ„é€ çš„æ–¹æ³•ã€‚</p><p>åˆ›é€ æ–°çš„ç‰¹å¾æ˜¯ä¸€ä»¶ååˆ†å›°éš¾çš„äº‹æƒ…ï¼Œéœ€è¦ä¸°å¯Œçš„ä¸“ä¸šçŸ¥è¯†å’Œå¤§é‡çš„æ—¶é—´ã€‚æœºå™¨å­¦ä¹ åº”ç”¨çš„æœ¬è´¨åŸºæœ¬ä¸Šå°±æ˜¯ç‰¹å¾å·¥ç¨‹ã€‚<br>â€”â€”Andrew Ng</p><p>å¯¹äºæ—¶é—´å‹æ•°æ®æ¥è¯´ï¼Œå³å¯ä»¥æŠŠå®ƒè½¬æ¢æˆè¿ç»­å€¼ï¼Œä¹Ÿå¯ä»¥è½¬æ¢æˆç¦»æ•£å€¼ã€‚</p><p>1.è¿ç»­å€¼æ—¶é—´ç‰¹å¾<br>æŒç»­æ—¶é—´ï¼ˆå•é¡µæµè§ˆæ—¶é•¿ï¼‰ï¼›é—´éš”æ—¶é—´ï¼›ä¸Šæ¬¡è´­ä¹°/ç‚¹å‡»ç¦»ç°åœ¨çš„æ—¶é•¿ï¼›äº§å“ä¸Šçº¿åˆ°ç°åœ¨ç»è¿‡çš„æ—¶é•¿ï¼›2.ç¦»æ•£å€¼æ—¶é—´ç‰¹å¾<br>1ï¼‰æ—¶é—´ç‰¹å¾æ‹†è§£</p><p>å¹´ï¼›æœˆï¼›æ—¥ï¼›æ—¶ï¼›åˆ†ï¼›æ•°ï¼›ä¸€å¤©ä¸­çš„ç¬¬å‡ åˆ†é’Ÿï¼›æ˜ŸæœŸå‡ ï¼›ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©ï¼›ä¸€å¹´ä¸­çš„ç¬¬å‡ ä¸ªå‘¨ï¼›ä¸€å¤©ä¸­å“ªä¸ªæ—¶é—´æ®µï¼šå‡Œæ™¨ã€æ—©æ™¨ã€ä¸Šåˆã€ä¸­åˆã€ä¸‹åˆã€å‚æ™šã€æ™šä¸Šã€æ·±å¤œï¼›ä¸€å¹´ä¸­çš„å“ªä¸ªå­£åº¦ï¼›</p><p>2ï¼‰æ—¶é—´ç‰¹å¾åˆ¤æ–­<br>æ˜¯å¦é—°å¹´ï¼›æ˜¯å¦æœˆåˆï¼›æ˜¯å¦æœˆæœ«ï¼›æ˜¯å¦å­£èŠ‚åˆï¼›æ˜¯å¦å­£èŠ‚æœ«ï¼›æ˜¯å¦å¹´åˆï¼›æ˜¯å¦å¹´å°¾ï¼›æ˜¯å¦å‘¨æœ«ï¼›æ˜¯å¦å…¬å…±å‡æœŸï¼›æ˜¯å¦è¥ä¸šæ—¶é—´ï¼›ä¸¤ä¸ªæ—¶é—´é—´éš”ä¹‹é—´æ˜¯å¦åŒ…å«èŠ‚å‡æ—¥/ç‰¹æ®Šæ—¥æœŸï¼›</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Datawhale</tag>
      
      <tag>Data Mining</tag>
      
      <tag>Time Series Analysis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç«èµ›æ‰“å¡ã€‘leetcodeæ‰“å¡ï¼šæŸ¥æ‰¾ç®—æ³•</title>
    <link href="/2020/08/24/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91leetcode%E6%89%93%E5%8D%A1%EF%BC%9A%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/"/>
    <url>/2020/08/24/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91leetcode%E6%89%93%E5%8D%A1%EF%BC%9A%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>è§å¤šäº†ä¼˜ç§€çš„æ–‡ç« ï¼Œå†å†™åšå®¢çš„æ—¶å€™å°±ä¼šæ„Ÿå¹è‡ªå·±çš„å­¦è¯†æµ…è–„ã€‚<br><!--more---></p><h2 id="leetcode-35-æœç´¢æ’å…¥ä½ç½®"><a href="#leetcode-35-æœç´¢æ’å…¥ä½ç½®" class="headerlink" title="leetcode 35 æœç´¢æ’å…¥ä½ç½®"></a>leetcode 35 æœç´¢æ’å…¥ä½ç½®</h2><p>ç»™å®šä¸€ä¸ªæ— é‡å¤å…ƒç´ çš„æ’åºæ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œåœ¨æ•°ç»„ä¸­æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå¹¶è¿”å›å…¶ç´¢å¼•ã€‚å¦‚æœç›®æ ‡å€¼ä¸å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œè¿”å›å®ƒå°†ä¼šè¢«æŒ‰é¡ºåºæ’å…¥çš„ä½ç½®ã€‚</p><p>æ€è·¯ï¼šç®€å•çš„äºŒåˆ†æœç´¢ã€‚æ³¨æ„è¾¹ç•Œæ¡ä»¶ã€‚æ³¨æ„åˆå§‹åŒ–æ¡ä»¶æ˜¯<code>L = 0, R = nums.size()</code>ã€‚</p><p>ä»£ç ï¼š</p><pre><code class="lang-cpp">class Solution &#123;public:    int searchInsert(vector&lt;int&gt;&amp; nums, int target) &#123;        int L = 0, R = nums.size();        if (nums.empty() || target &lt; nums[L]) return 0;        if (nums[R-1] &lt; target) return R;        while (L &lt;= R) &#123;            int i = (L + R) / 2;            if (nums[i] &lt; target) &#123;                L = i + 1;            &#125; else if (target &lt; nums[i]) &#123;                R = i - 1;            &#125; else if (target == nums[i])&#123;                return i;            &#125; //else         &#125;        return L;    &#125;&#125;;</code></pre><h2 id="leetcode-202-å¿«ä¹æ•°"><a href="#leetcode-202-å¿«ä¹æ•°" class="headerlink" title="leetcode 202 å¿«ä¹æ•°"></a>leetcode 202 å¿«ä¹æ•°</h2><p>å…ˆåˆ†äº«ä¸€ä¸‹ç›´è§‚çš„è§£æ³•</p><p>æ£€æŸ¥ä¸€ä¸ªæ•°æ˜¯å¿«ä¹æ•°ï¼Œå°±ä¸æ–­æ‰§è¡Œ<code>n=compute(n)</code>è¿™ä¸€æ­¥ï¼Œç„¶åæ£€æŸ¥næ˜¯å¦ä¸º1å°±è¡Œäº†ã€‚ä½†æ˜¯ä¸€æ—¦ä¸€ä¸ªæ•°ä¸æ˜¯å¿«ä¹æ•°ï¼Œåˆ™å¿…å®šæ˜¯é™·äºæŸä¸ªæ•°å­—å¾ªç¯ä¸­ã€‚æ¯”å¦‚2è¿™ä¸ªéå¿«ä¹æ•°ï¼Œå®ƒçš„è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><pre><code>241637588914542204 &lt;- æ³¨æ„è¿™é‡Œçš„4å·²ç»å‡ºç°è¿‡</code></pre><p>æˆ‘çš„æ€è·¯å¾ˆç®€å•ã€‚åªéœ€å°†å‡ºç°è¿‡çš„néƒ½ä¿å­˜åœ¨ä¸€ä¸ªå­—å…¸ä¸­ï¼Œå¦‚æœæ–°è®¡ç®—çš„nå·²ç»å­˜åœ¨äºå­—å…¸ä¸­äº†ï¼Œé‚£å°±æ„å‘³ç€é™·å…¥äº†è®¡ç®—å¾ªç¯ï¼Œéå¿«ä¹æ•°ã€‚</p><pre><code class="lang-cpp">class Solution &#123;public:    bool isHappy(int n) &#123;        unordered_map&lt;int, int&gt; hash;        while (n != 1) &#123;            n = compute(n);            auto iter = hash.find(n);            if (iter != hash.end()) return false;            ++hash[n];        &#125;        return true;    &#125;    int compute(int n) &#123;        int res = 0, bit = 0;        while (n) &#123;            bit = n % 10;            n = n / 10;            res += bit * bit;         &#125;        return res;    &#125;&#125;;</code></pre><p>è¿™ä¸ªé—®é¢˜è¿˜å¯ä»¥è½¬åŒ–ä¸ºæ£€æµ‹é“¾è¡¨æ˜¯å¦å­˜åœ¨ç¯è·¯çš„é—®é¢˜ã€‚å°±å¯ä»¥ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ³•ã€‚<code>compute</code>å‡½æ•°ä¸å˜ï¼Œåªéœ€æŠŠä¸»å‡½æ•°éƒ¨åˆ†å˜æˆï¼š</p><pre><code class="lang-cpp">class Solution &#123;public:    bool isHappy(int n) &#123;        int slow = n;        int fast = compute(n);        while (slow != fast &amp;&amp; fast != 1) &#123;            slow = compute(slow);            fast = compute(compute(fast));        &#125;        return fast == 1;    &#125;    int compute(int n) &#123;        int res = 0, bit = 0;        while (n) &#123;            bit = n % 10;            n = n / 10;            res += bit * bit;         &#125;        return res;    &#125;&#125;;</code></pre><h2 id="leetcode-205-åŒæ„å­—ç¬¦ä¸²"><a href="#leetcode-205-åŒæ„å­—ç¬¦ä¸²" class="headerlink" title="leetcode 205 åŒæ„å­—ç¬¦ä¸²"></a>leetcode 205 åŒæ„å­—ç¬¦ä¸²</h2><p>å°†ä¸¤ä¸ªå­—ç¬¦ä¸²ç¿»è¯‘ä¸ºæ•°å­—ï¼Œæœ€åæ¯”è¾ƒæ•°å­—æ˜¯å¦ç›¸åŒå³å¯ã€‚</p><pre><code class="lang-cpp">class Solution &#123;public:    bool isIsomorphic(string s, string t) &#123;        s = translate(s);        t = translate(t);        return s == t;    &#125;    string translate(string s) &#123;        int count = 0;        unordered_map&lt;char, int&gt; hash;        string res = &quot;&quot;;        for (auto c : s) &#123;            auto iter = hash.find(c);            if (iter != hash.end()) res += std::to_string(iter-&gt;second);            else hash[c] = count++;        &#125;        return res;    &#125;&#125;;</code></pre><h2 id="leetcode-242-æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯"><a href="#leetcode-242-æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯" class="headerlink" title="leetcode 242 æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯"></a>leetcode 242 æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯</h2><p>æ€»ä½“æ€è·¯è¿˜æ˜¯å“ˆå¸Œè¡¨ï¼Œä¿å­˜ä¸¤ä¸ªå­—ç¬¦ä¸²å‡ºç°çš„å­—ç¬¦ç±»åˆ«å’Œæ¬¡æ•°ï¼Œå¦‚è‹¥ç›¸ç­‰åˆ™trueã€‚</p><p>å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå³ä½¿ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œéå†sçš„æ—¶å€™æ„å»ºå“ˆå¸Œï¼Œéå†tçš„æ—¶å€™åˆ å‡å¯¹åº”å“ˆå¸Œçš„å…ƒç´ ï¼Œå¦‚æœå“ˆå¸Œè¡¨çš„æ•°å€¼ä½äº0ï¼Œå°±è¯´æ˜ä¸ºfalseã€‚</p><p>ä¸‡ä¸€åˆ å‡ä¸åˆ°é›¶å‘¢ï¼Ÿå…¶å®è¿™ç§æƒ…å†µæ˜¯ä¸ä¼šå‡ºç°çš„ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨å¾ªç¯ä¼Šå§‹ï¼Œæ£€æŸ¥ä¸¤å­—ç¬¦ä¸²çš„é•¿åº¦å¿…é¡»ç›¸åŒã€‚</p><pre><code class="lang-cpp">class Solution &#123;public:    bool isAnagram(string s, string t) &#123;        if (s.size() != t.size()) return false;        vector&lt;int&gt; table(26, 0);        for (auto c : s) &#123;            ++table[c - &#39;a&#39;];        &#125;        for (auto c : t) &#123;            --table[c - &#39;a&#39;];            if (table[c - &#39;a&#39;] &lt; 0) return false;        &#125;        return true;    &#125;&#125;;</code></pre><h2 id="leetcode-290-å•è¯è§„å¾‹"><a href="#leetcode-290-å•è¯è§„å¾‹" class="headerlink" title="leetcode 290 å•è¯è§„å¾‹"></a>leetcode 290 å•è¯è§„å¾‹</h2><p>è¿˜æ˜¯å°†å…¶ç¿»è¯‘æˆä¸­é—´è¡¨ç¤ºï¼Œç„¶åæ¯”è¾ƒä¸­é—´è¡¨ç¤ºæ˜¯å¦åŒä¸€ã€‚</p><pre><code class="lang-cpp">#include&lt;regex&gt;#include &lt;iterator&gt;class Solution &#123;public:    bool wordPattern(string pattern, string str) &#123;        vector&lt;string&gt; str_array;        std::regex r(&quot;\\s+&quot;);        std::sregex_token_iterator pos(str.cbegin(), str.cend(), r, -1); // -1ä»£è¡¨ä½ å¯¹æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å†…å®¹ä¸æ„Ÿå…´è¶£        std::sregex_token_iterator end;        for (; pos != end; ++pos) &#123;            str_array.push_back(*pos);        &#125;        if (pattern.size() != str_array.size()) return false;        unordered_map&lt;char, int&gt; hash_char;        unordered_map&lt;string, int&gt; hash_string;        for (int i = 0; i &lt; pattern.size(); ++i) &#123;            auto iter_char = hash_char.find(pattern[i]);            auto iter_string = hash_string.find(str_array[i]);            if (iter_char != hash_char.end() &amp;&amp; iter_string != hash_string.end()) &#123;                if (iter_char-&gt;second != iter_string-&gt;second) return false;            &#125; else if (iter_char == hash_char.end() &amp;&amp; iter_string == hash_string.end()) &#123;                hash_char[pattern[i]] = i;                hash_string[str_array[i]] = i;            &#125; else return false;        &#125;        return true;    &#125;&#125;;</code></pre><h2 id="leetcode-349-ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†"><a href="#leetcode-349-ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†" class="headerlink" title="leetcode 349 ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†"></a>leetcode 349 ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†</h2><p>æ˜¾ç„¶æ˜¯ç”¨hashã€‚</p><pre><code class="lang-cpp">class Solution &#123;public:    vector&lt;int&gt; intersection(vector&lt;int&gt;&amp; nums1, vector&lt;int&gt;&amp; nums2) &#123;        if (nums1.empty() || nums2.empty()) return &#123;&#125;;        unordered_map&lt;int, int&gt; hash;        vector&lt;int&gt; res;        for (auto c : nums1) &#123;            hash[c] = 1;        &#125;        for (auto c : nums2) &#123;            auto iter = hash.find(c);            if (iter != hash.end()) hash[c] = 0;        &#125;        for (auto iter = hash.begin(); iter != hash.end(); ++iter) &#123;            if (iter-&gt;second == 0) res.push_back(iter-&gt;first);        &#125;        return res;    &#125;&#125;;</code></pre><h2 id="leetcode-350-ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†-II"><a href="#leetcode-350-ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†-II" class="headerlink" title="leetcode 350 ä¸¤ä¸ªæ•°ç»„çš„äº¤é›† II"></a>leetcode 350 ä¸¤ä¸ªæ•°ç»„çš„äº¤é›† II</h2><p>å¸¦é‡å¤å…ƒç´ äº†ã€‚ç”±äºhashæœ¬èº«å°±å¯ä»¥è®°å½•æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¯å½“å‘ç°ä¸€ä¸ªå…ƒç´ ï¼Œæ‰§è¡Œçš„ä¸æ˜¯<code>hash[nums[i]] = 1</code>ï¼Œè€Œæ˜¯<code>hash[nums[i]]++</code>ã€‚</p><pre><code class="lang-cpp">class Solution &#123;public:    vector&lt;int&gt; intersect(vector&lt;int&gt;&amp; nums1, vector&lt;int&gt;&amp; nums2) &#123;        if (nums1.empty() || nums2.empty()) return &#123;&#125;;        unordered_map&lt;int, int&gt; hash;        vector&lt;int&gt; res;        for (int i = 0; i &lt; nums1.size(); ++i) &#123;            ++hash[nums1[i]];        &#125;        for (int i = 0; i &lt; nums2.size(); ++i) &#123;            auto iter = hash.find(nums2[i]);            if (iter != hash.end() &amp;&amp; iter-&gt;second != 0) &#123;                res.push_back(nums2[i]);                --iter-&gt;second;            &#125;        &#125;        return res;    &#125;&#125;;</code></pre><h2 id="leetcode-451-æ ¹æ®å­—ç¬¦å‡ºç°é¢‘ç‡æ’åº"><a href="#leetcode-451-æ ¹æ®å­—ç¬¦å‡ºç°é¢‘ç‡æ’åº" class="headerlink" title="leetcode 451 æ ¹æ®å­—ç¬¦å‡ºç°é¢‘ç‡æ’åº"></a>leetcode 451 æ ¹æ®å­—ç¬¦å‡ºç°é¢‘ç‡æ’åº</h2><pre><code class="lang-cpp">class Solution &#123;public:    string frequencySort(string s) &#123;        if (s.empty()) return &quot;&quot;;        unordered_map&lt;char, int&gt; hash;        for (auto c : s) &#123;            ++hash[c];        &#125;        sort(s.begin(), s.end(), [&amp;hash](char lhs, char rhs) &#123;            return hash[lhs] &gt; hash[rhs] || (hash[lhs] == hash[rhs] &amp;&amp; lhs &lt; rhs);        &#125;);        return s;    &#125;&#125;;</code></pre><h2 id="leetcode-540-æœ‰åºæ•°ç»„ä¸­çš„å•ä¸€å…ƒç´ "><a href="#leetcode-540-æœ‰åºæ•°ç»„ä¸­çš„å•ä¸€å…ƒç´ " class="headerlink" title="leetcode 540 æœ‰åºæ•°ç»„ä¸­çš„å•ä¸€å…ƒç´ "></a>leetcode 540 æœ‰åºæ•°ç»„ä¸­çš„å•ä¸€å…ƒç´ </h2><pre><code class="lang-cpp">class Solution &#123;public:    int singleNonDuplicate(vector&lt;int&gt;&amp; nums) &#123;        if (nums.size() == 1) return nums[0];        return helper(nums, 0, nums.size()-1);    &#125;    int helper(vector&lt;int&gt;&amp; nums, int start, int end) &#123;        if (end == start) return nums[start];        int mid = start + (end - start) / 2;        if (nums[mid-1] == nums[mid]) &#123; // ä¸­ç‚¹å·¦è¾¹ç›¸åŒï¼Œé¡»åˆ é™¤ä¸­ç‚¹å’Œå·¦è¾¹å…ƒç´             int left_len = mid - start - 1;            int right_len = end - mid;            if (left_len % 2 != 0) &#123; // å¦‚æœåˆ é™¤åå·¦è¾¹é•¿åº¦ä¸ºå¥‡æ•°åˆ™é€’å½’å·¦è¾¹                return helper(nums, start, mid-2);            &#125; else &#123; // å¦‚æœåˆ é™¤åå³è¾¹é•¿åº¦ä¸ºå¥‡æ•°åˆ™é€’å½’å³è¾¹                return helper(nums, mid+1, end);            &#125;        &#125; else if (nums[mid] == nums[mid+1]) &#123;  // ä¸­ç‚¹å³è¾¹ç›¸åŒï¼Œé¡»åˆ é™¤ä¸­ç‚¹å’Œå³è¾¹å…ƒç´             int left_len = mid - start;            int right_len = end - mid - 1;            if (left_len % 2 != 0) &#123; // å¦‚æœåˆ é™¤åå·¦è¾¹é•¿åº¦ä¸ºå¥‡æ•°åˆ™é€’å½’å·¦è¾¹                return helper(nums, start, mid-1);            &#125; else &#123; // å¦‚æœåˆ é™¤åå³è¾¹é•¿åº¦ä¸ºå¥‡æ•°åˆ™é€’å½’å³è¾¹                return helper(nums, mid+2, end);            &#125;        &#125; else return nums[mid];    &#125;&#125;;</code></pre><h2 id="leetcode-410-åˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼"><a href="#leetcode-410-åˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼" class="headerlink" title="leetcode 410 åˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼"></a>leetcode 410 åˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼</h2>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>algorithm</tag>
      
      <tag>leetcode</tag>
      
      <tag>Datawhale</tag>
      
      <tag>searching</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç«èµ›æ‰“å¡ã€‘leetcodeæ‰“å¡ï¼šåŠ¨æ€è§„åˆ’</title>
    <link href="/2020/08/23/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91leetcode%E6%89%93%E5%8D%A1%EF%BC%9A%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    <url>/2020/08/23/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91leetcode%E6%89%93%E5%8D%A1%EF%BC%9A%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/</url>
    
    <content type="html"><![CDATA[<p>è§å¤šäº†ä¼˜ç§€çš„æ–‡ç« ï¼Œå†å†™åšå®¢çš„æ—¶å€™å°±ä¼šæ„Ÿå¹è‡ªå·±çš„å­¦è¯†æµ…è–„ã€‚<br><!--more---></p><h2 id="leetcode-198-æ‰“å®¶åŠ«èˆ"><a href="#leetcode-198-æ‰“å®¶åŠ«èˆ" class="headerlink" title="leetcode 198 æ‰“å®¶åŠ«èˆ"></a>leetcode 198 æ‰“å®¶åŠ«èˆ</h2><p>åŠ¨æ€è§„åˆ’</p><p>è®¾ç½®<code>dp[i]</code>ä¸ºå‰iä¸ªå…ƒç´ ä¸­æ‰“åŠ«æ‰€å¾—æœ€é«˜é‡‘é¢</p><p>æ„å»ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</p><pre><code class="lang-cpp">dp[i] = max(dp[i-1], dp[i-2]+nums[i]);</code></pre><p>è¾¹ç•Œæ¡ä»¶ï¼š</p><pre><code class="lang-cpp">dp[0] = nums[0];dp[1] = max(nums[0], nums[1]);</code></pre><p>ä»£ç ï¼š</p><pre><code class="lang-cpp">class Solution &#123;public:    int rob(vector&lt;int&gt;&amp; nums) &#123;        if (nums.empty()) return 0;        if (nums.size() == 1) return nums[0];        vector&lt;int&gt; dp(nums.size(), 0);        dp[0] = nums[0];        dp[1] = max(nums[0], nums[1]);        for (int i = 2; i &lt; nums.size(); ++i) &#123;            dp[i] = max(dp[i-1], dp[i-2]+nums[i]);        &#125;        return dp[nums.size()-1];    &#125;&#125;;</code></pre><h2 id="leetcode-674-æœ€é•¿è¿ç»­é€’å¢å­åºåˆ—"><a href="#leetcode-674-æœ€é•¿è¿ç»­é€’å¢å­åºåˆ—" class="headerlink" title="leetcode 674 æœ€é•¿è¿ç»­é€’å¢å­åºåˆ—"></a>leetcode 674 æœ€é•¿è¿ç»­é€’å¢å­åºåˆ—</h2><p>ä¸å¿…ä½¿ç”¨åŠ¨æ€è§„åˆ’ï¼Œç›´æ¥ä¸€ééå†ï¼Œç¢°åˆ°<code>nums[i] &lt; nums[i+1]</code>å°±é€’å¢è®¡æ•°å™¨ï¼Œä¿ç•™è®¡æ•°å™¨æœ€å¤§å€¼å³å¯ï¼š</p><pre><code class="lang-cpp">class Solution &#123;public:    int findLengthOfLCIS(vector&lt;int&gt;&amp; nums) &#123;        if (nums.empty()) return 0;        int count = 1;        int maxCount = 1;        for (int i = 0; i &lt; nums.size() - 1; ++i) &#123;            if (nums[i] &lt; nums[i+1]) &#123;                ++count;                maxCount = max(count, maxCount);            &#125; else &#123;                count = 1;            &#125;        &#125;        return maxCount;    &#125;&#125;;</code></pre><p>åæ¥æˆ‘æ‚Ÿäº†ï¼Œè¿™å°±æ˜¯åŠ¨æ€è§„åˆ’ï¼Œåªä¸è¿‡æˆ‘åˆ©ç”¨<code>maxCount</code>æ¥ä»£æ›¿äº†dpæ•°ç»„ã€‚æˆ‘çœŸæ˜¯ä¸ªå¤©æ‰ï¼ˆè¯¯ï¼‰ï¼</p><h2 id="leetcode-5-æœ€é•¿å›æ–‡å­ä¸²"><a href="#leetcode-5-æœ€é•¿å›æ–‡å­ä¸²" class="headerlink" title="leetcode 5 æœ€é•¿å›æ–‡å­ä¸²"></a>leetcode 5 æœ€é•¿å›æ–‡å­ä¸²</h2><p>æœ¬æ¥æ˜¯æƒ³å®šä¹‰dp[i][j]ï¼Œè¡¨è¾¾å­—ç¬¦ä¸²ä»iåˆ°jçš„å­ä¸²ä¸­çš„æœ€é•¿å›æ–‡å­ä¸²çš„ã€‚åæ¥æƒ³æƒ³è¿™æ ·å®šä¹‰ä¸åˆé€‚ï¼Œä¸å¦‚æŠŠdpå®šä¹‰ä¸ºä¸€ä¸ªboolæ•°ç»„ï¼Œç”¨æ¥æ ‡è®°ä»iåˆ°jå­ä¸²æ˜¯å¦ä¸ºå›æ–‡ä¸²å³å¯ã€‚</p><p>çŠ¶æ€è½¬ç§»å…³ç³»ï¼šdp[i][j] = dp[i+1][j-1] &amp;&amp; (s[i] == s[j])</p><p>å³s[i:j]ä¸ºå›æ–‡ä¸²çš„æ¡ä»¶ä¸ºs[i+1][j-1]ä¸ºå›æ–‡ä¸²ï¼Œä¸”s[i] == s[j]</p><p>è¾¹ç•Œæ¡ä»¶ï¼š<br>dp[i][j] = true if i == j<br>dp[i][j] = false if i &gt; j<br>dp[i][i+1] = (s[i] == s[i+1])</p><p>æœ€åéå†æ‰€æœ‰dp[i][j]=trueçš„é¡¹ï¼Œè¿”å›æœ€é•¿çš„å­ä¸²å³å¯</p><p>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹ï¼šæˆ‘ä»¬åœ¨éå†åŒå±‚å¾ªç¯çš„æ—¶å€™ï¼Œåº”è¯¥jåœ¨å¤–ï¼Œiåœ¨å†…ã€‚æƒ³æƒ³ä¸ºä»€ä¹ˆï¼Ÿå¦‚æœå¾ªç¯ç»“æ„æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class="lang-cpp">for (int i = 0; i &lt; s.size(); ++i) &#123;    for (int j = i+1; j &lt; s.size(); ++j) &#123;        // TODO    &#125;&#125;</code></pre><p>é‚£ iã€jçš„å˜åŒ–ä¸ºï¼š<br>0,0<br>0,1<br>0,2<br>0,3-&gt;è¿™é‡Œå°±ä¸å¯¹äº†ï¼Œå› ä¸ºdp[0][3]éœ€è¦ç”¨åˆ°dp[1][2]çš„å€¼ã€‚è€Œi=1æ—¶çš„æ‰€æœ‰dpéƒ½è¿˜æ²¡æ±‚å‘¢ã€‚</p><p>ä»£ç ï¼š</p><pre><code class="lang-cpp">class Solution &#123;public:    string longestPalindrome(string s) &#123;        if (s.empty()) return &quot;&quot;;        int size = s.size();        vector&lt;vector&lt;bool&gt;&gt; dp(size, vector&lt;bool&gt;(size, false));        string ans = &quot;&quot;;        for (int j = 0; j &lt; size; ++j) &#123;            for (int i = 0; i &lt;= j; ++i) &#123;                if (j == i) dp[i][j] = true;                else if (j == i+1) dp[i][j] = (s[i] == s[j]);                else dp[i][j] = (dp[i+1][j-1]) &amp;&amp; (s[i] == s[j]);                if (dp[i][j] &amp;&amp; ans.size() &lt; j-i+1) ans = s.substr(i, j-i+1);            &#125;        &#125;        return ans;    &#125;&#125;;</code></pre><h2 id="leetcode-213-æ‰“å®¶åŠ«èˆ2"><a href="#leetcode-213-æ‰“å®¶åŠ«èˆ2" class="headerlink" title="leetcode 213 æ‰“å®¶åŠ«èˆ2"></a>leetcode 213 æ‰“å®¶åŠ«èˆ2</h2><p>æ‰“å®¶åŠ«èˆå‡çº§ç‰ˆï¼Œè´¼ä¸èƒ½åŒæ—¶æ‰“åŠ«å¤´å°¾ã€‚</p><p>ä¹Ÿå¥½åŠï¼Œæ‹†åˆ†æˆä¸¤ä¸ªåŠ¨æ€è§„åˆ’ï¼Œä¸€ä¸ªè§„å®šä¸èƒ½æ‰“åŠ«nums[0]ï¼Œå¦ä¸€ä¸ªè§„å®šä¸èƒ½æ‰“åŠ«nums[size-1]ï¼Œæœ€åè¿”å›æ›´å¤§çš„é‚£ä¸ªå³å¯ã€‚</p><p>ä»£ç ï¼š</p><pre><code class="lang-cpp">class Solution &#123;public:    int rob(vector&lt;int&gt;&amp; nums) &#123;        if (nums.empty()) return 0;        int size = nums.size();        if (size == 1) return nums[0];        if (size == 2) return max(nums[0], nums[1]);        vector&lt;int&gt; dp_robfirst(size, 0);        vector&lt;int&gt; dp_roblast(size, 0);        dp_robfirst[0] = nums[0];        dp_robfirst[1] = max(nums[0], nums[1]);        for (int i = 2; i &lt; size-1; ++i) &#123;            dp_robfirst[i] = max(dp_robfirst[i-1], dp_robfirst[i-2] + nums[i]);        &#125;        dp_roblast[0] = 0;        dp_roblast[1] = nums[1];        for (int i = 2; i &lt; size; ++i) &#123;            dp_roblast[i] = max(dp_roblast[i-1], dp_roblast[i-2] + nums[i]);        &#125;        return max(dp_robfirst[size-2], dp_roblast[size-1]);    &#125;&#125;;</code></pre><h2 id="leetcode-516-æœ€é•¿å›æ–‡å­åºåˆ—"><a href="#leetcode-516-æœ€é•¿å›æ–‡å­åºåˆ—" class="headerlink" title="leetcode 516 æœ€é•¿å›æ–‡å­åºåˆ—"></a>leetcode 516 æœ€é•¿å›æ–‡å­åºåˆ—</h2><p>è¿™æ¬¡çš„dpå«ä¹‰ä¸ºä»iåˆ°jå­ä¸²ä¸­æœ€é•¿çš„å›æ–‡åºåˆ—é•¿åº¦ã€‚</p><p>è½¬ç§»æ–¹ç¨‹ï¼š</p><p>dp[i][j] = dp[i+1][j-1] if s[i] == s[j]<br>dp[i][j] = max(dp[i+1][j], dp[i][j-1]) if s[i] != s[j]</p><p>æ³¨æ„ï¼Œiä»å¤§éå†åˆ°å°ï¼Œjä»å°éå†åˆ°å¤§ã€‚æœ€åè¿”å›dp[0][size-1]</p><p>è¾¹ç•Œæ¡ä»¶ï¼šdp[i][j] = 1 if i == j</p><p>ä»£ç ï¼š</p><pre><code class="lang-cpp">class Solution &#123;public:    int longestPalindromeSubseq(string s) &#123;        if (s.empty()) return 0;        int size = s.size();        vector&lt;vector&lt;int&gt;&gt; dp(size, vector&lt;int&gt;(size, 0));        for (int i = size-1; i &gt;= 0; --i) &#123;            for (int j = i; j &lt; size; ++j) &#123;                if (i == j) dp[i][j] = 1;                else if (s[i] == s[j]) dp[i][j] = dp[i+1][j-1] + 2;                else dp[i][j] = max(dp[i+1][j], dp[i][j-1]);            &#125;        &#125;        return dp[0][size-1];    &#125;&#125;;</code></pre><h2 id="leetcode-72-ç¼–è¾‘è·ç¦»"><a href="#leetcode-72-ç¼–è¾‘è·ç¦»" class="headerlink" title="leetcode 72 ç¼–è¾‘è·ç¦»"></a>leetcode 72 ç¼–è¾‘è·ç¦»</h2><p>ä»£ç ï¼š</p><pre><code class="lang-cpp">class Solution &#123;public:    int minDistance(string word1, string word2) &#123;        int M = word1.size();        int N = word2.size();        // if (word1.empty() || word2.empty()) return abs(M-N);        vector&lt;vector&lt;int&gt;&gt; dp(M+1, vector&lt;int&gt;(N+1, 0));        //initial        for (int i = 0; i &lt;= M; ++i) &#123;            dp[i][0] = i;        &#125;        for (int i = 0; i &lt;= N; ++i) &#123;            dp[0][i] = i;        &#125;        //dp        for (int i = 1; i &lt;= M; ++i) &#123;            for (int j = 1; j &lt;= N; ++j) &#123;                if (word1[i-1] == word2[j-1]) &#123;                    dp[i][j] = min(dp[i - 1][j - 1], 1 + dp[i - 1][j]);                    dp[i][j] = min(dp[i][j], 1 + dp[i][j - 1]);                &#125; else &#123;                    dp[i][j] = min(dp[i - 1][j - 1], dp[i - 1][j]);                    dp[i][j] = 1 + min(dp[i][j], dp[i][j - 1]);                &#125;            &#125;        &#125;        return dp[M][N];    &#125;&#125;;</code></pre>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>algorithm</tag>
      
      <tag>leetcode</tag>
      
      <tag>Datawhale</tag>
      
      <tag>Dynamic Programming</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç«èµ›æ‰“å¡ã€‘æ•°æ®æŒ–æ˜å®è·µâ€”â€”æ—¶é—´åºåˆ—æ¨¡å‹</title>
    <link href="/2020/08/22/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E6%A8%A1%E5%9E%8B/"/>
    <url>/2020/08/22/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E6%A8%A1%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<p>ä¸è¦åœä¸‹æ¥å•Šï¼<br><!--more---><br>ARæ¨¡å‹æ˜¯è‡ªå›å½’æ¨¡å‹ï¼ŒAutoRegressionçš„ç®€ç§°ã€‚æ˜¯ä¸€ç§è¾ƒä¸ºæœ´ç´ çš„æ—¶é—´åºåˆ—æ•°æ®å¤„ç†æ–¹æ³•ï¼Œåˆ©ç”¨åŒä¸€å˜é‡çš„å‰næœŸæ¥é¢„æµ‹æœ¬æœŸçš„å˜é‡çš„æ•°å€¼ï¼Œå¹¶ä¸”å‡å®šä¸ºçº¿æ€§å…³ç³»ã€‚è¿™ç§åˆ†ææ–¹æ³•ä¸­ï¼Œè‡ªå˜é‡ä¸æ˜¯å…¶ä»–çš„å½±å“å› ç´ ï¼Œè€Œæ˜¯å˜é‡æœ¬èº«çš„å†å²æ•°æ®ï¼Œåˆ©ç”¨xt-næ¥é¢„æµ‹xtï¼Œå› æ­¤è¢«ç§°ä¸ºè‡ªå›å½’ã€‚</p><p>MAæ¨¡å‹ï¼šç§»åŠ¨å¹³å‡æ¨¡å‹å°†åºåˆ—{xt}è¡¨ç¤ºä¸ºç™½å™ªå£°çš„çº¿æ€§åŠ æƒã€‚</p><p>åœ¨ä¸€ä¸ªå¹³ç¨³çš„éšæœºè¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ—¢æœ‰è‡ªå›å½’çš„ç‰¹æ€§ï¼Œåˆæœ‰ç§»åŠ¨å¹³å‡è¿‡ç¨‹çš„ç‰¹æ€§ï¼Œåˆ™éœ€è¦å¯¹ä¸¤ä¸ªæ¨¡å‹è¿›è¡Œæ··åˆä½¿ç”¨ï¼Œä¹Ÿå³æ˜¯è¾ƒä¸ºæ™®éçš„ARMAæ¨¡å‹ï¼Œä¸€èˆ¬è®°ä¸ºARMA(p,q)ã€‚</p><p>ARIMA(p,d,q)æ˜¯å·®åˆ†è‡ªå›å½’ç§»åŠ¨å¹³å‡æ¨¡å‹ï¼Œæ˜¯è¿ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§æ—¶é—´åºåˆ—åˆ†ææ¨¡å‹ã€‚p,qçš„æ„ä¹‰ä¸å˜ï¼Œå…¶ä¸­dçš„å«ä¹‰æ˜¯å°†æ—¶é—´åºåˆ—åŒ–ä¸ºå¹³ç¨³æ—¶é—´åºåˆ—æ‰€åšçš„å·®åˆ†æ¬¡æ•°ã€‚</p><p>åœ¨å»ºç«‹æ—¶é—´åºåˆ—çš„æ¨¡å‹åï¼Œæˆ‘ä»¬è¦å¯¹æ—¶é—´åºåˆ—æ•°æ®è¿›è¡Œå¤šé‡æ£€éªŒï¼Œä»¥ç¡®å®šè¯¥æ•°æ®ç¬¦åˆæˆ‘ä»¬çš„ç»Ÿè®¡å­¦ä¸Šçš„åˆ†æå‡†åˆ™ã€‚ä¸»è¦çš„æ£€éªŒè¦è§‚å¯Ÿæ•°æ®çš„è‡ªç›¸å…³æ€§ï¼Œé˜¶æ•°è¯†åˆ«å’Œå•ä½æ ¹æ£€éªŒï¼ˆADFæ£€éªŒï¼‰ã€‚å¯¹äºARMAæ¨¡å‹æ¥è¯´ï¼Œæœ€éš¾çš„æ­¥éª¤æ˜¯è¿›è¡Œé˜¶æ•°çš„è¯†åˆ«ã€‚ADFæ£€éªŒæ˜¯æ—¶é—´åºåˆ—ä¸­æœ€ä¸ºé‡è¦çš„æ£€éªŒä¹‹ä¸€ï¼Œå¸®åŠ©æˆ‘ä»¬å‡†ç¡®åˆ¤æ–­æ—¶é—´åºåˆ—æ•°æ®æ˜¯å¦å¹³ç¨³ï¼Œæ˜¯ä¸ºåæœŸçš„Johansen æ£€éªŒã€Granger æ£€éªŒç­‰çš„åŸºç¡€ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Datawhale</tag>
      
      <tag>Data Mining</tag>
      
      <tag>Time Series Analysis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç«èµ›æ‰“å¡ã€‘æ•°æ®æŒ–æ˜å®è·µâ€”â€”æ—¶é—´åºåˆ—è§„åˆ™</title>
    <link href="/2020/08/22/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E8%A7%84%E5%88%99/"/>
    <url>/2020/08/22/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E8%A7%84%E5%88%99/</url>
    
    <content type="html"><![CDATA[<p>ä¸è¦åœä¸‹æ¥å•Šï¼<br><!--more---></p><p>æ—¶é—´åºåˆ—åŸºæœ¬è§„åˆ™æ³•<br>æå–æ—¶é—´åºåˆ—çš„å‘¨æœŸæ€§ç‰¹å¾è¿›è¡Œé¢„æµ‹ï¼Œå‚è€ƒï¼šæ—¶é—´åºåˆ—è§„åˆ™æ³•å¿«é€Ÿå…¥é—¨<br>è§‚å¯Ÿåºåˆ—ï¼Œå½“åºåˆ—å­˜åœ¨å‘¨æœŸæ€§æ—¶ï¼Œå¯ä»¥ç”¨çº¿æ€§å›å½’-åˆ©ç”¨æ—¶é—´ç‰¹å¾åšçº¿æ€§å›å½’åšä¸ºbaseline</p><p>æ—¶é—´åºåˆ—æ˜¯æŒ‡å°†åŒä¸€ç»Ÿè®¡æŒ‡æ ‡çš„æ•°å€¼æŒ‰å…¶å‘ç”Ÿçš„æ—¶é—´å…ˆåé¡ºåºæ’åˆ—è€Œæˆçš„æ•°åˆ—ã€‚</p><p>æ—¶é—´åºåˆ—åˆ†æçš„ä¸»è¦ç›®çš„æ˜¯æ ¹æ®å·²æœ‰çš„å†å²æ•°æ®å¯¹æœªæ¥è¿›è¡Œé¢„æµ‹ã€‚ä¸é¢æ¿æ•°æ®ä¸åŒï¼Œé¢æ¿æ•°æ®ä¾§é‡äºåŒä¸€æ—¶é—´ç‚¹ä¸åŒæ ·æœ¬çš„æ•°å€¼ï¼Œè€Œæ—¶é—´åºåˆ—ä¾§é‡äºåŒä¸€ç»Ÿè®¡æŒ‡æ ‡åœ¨æ—¶é—´çš„ä¸åŒç‚¹çš„æ•°å€¼ã€‚æ—¶é—´åºåˆ—æœ‰ä¸¤ä¸ªé‡è¦æŒ‡æ ‡ï¼Œä¸€ä¸ªæ˜¯èµ„æ–™æ‰€å±çš„æ—¶é—´ï¼Œå¦ä¸€ä¸ªæ˜¯æ—¶é—´ä¸Šçš„ç»Ÿè®¡æŒ‡æ ‡æ•°å€¼ã€‚æ—¶é—´åºåˆ—å¯ä»¥æè¿°ç¤¾ä¼šç»æµç°è±¡åœ¨ä¸åŒæ—¶é—´çš„å‘å±•çŠ¶æ€å’Œè¿‡ç¨‹ï¼Œä¹Ÿå¯ä»¥æ ¹æ®å†å²æ•°æ®è¿›è¡Œåˆç†çš„æœªæ¥æ¨æµ‹ã€‚</p><p>ä¸€èˆ¬åœ°ï¼Œæˆ‘ä»¬è®¤ä¸ºä¸€ä¸ªéšæœºæ¸¸èµ°çš„å˜é‡ä¼šæœä»æ­£æ€åˆ†å¸ƒã€‚</p><p>æå–æ—¶é—´çš„å‘¨æœŸæ€§ç‰¹ç‚¹åšä¸ºç‰¹å¾ï¼Œæ­¤æ—¶è®­ç»ƒé›†æ¯æ¡æ ·æœ¬ä¸ºâ€æ—¶é—´ç‰¹å¾-&gt;ç›®æ ‡å€¼â€ï¼Œæ—¶é—´åºåˆ—çš„ä¾èµ–å…³ç³»è¢«å‰”é™¤ï¼Œä¸éœ€è¦ä¸¥æ ¼ä¾èµ–æ»‘çª—æˆªå–è®­ç»ƒæ ·æœ¬ã€‚å¸¸è§æ˜¯å°†æ—¶é—´ç”¨0-1å“‘å˜é‡è¡¨è¾¾ï¼Œæœ‰ä»¥ä¸‹è‹¥å¹²ç§ç‰¹å¾ï¼š</p><ul><li>å°†æ˜ŸæœŸè½¬åŒ–ä¸ºäº†0-1å˜é‡ï¼Œä»å‘¨ä¸€è‡³å‘¨å¤©ï¼Œç‹¬çƒ­ç¼–ç å…±7ä¸ªå˜é‡</li><li>å°†èŠ‚å‡æ—¥è½¬åŒ–ä¸º0-1å˜é‡ï¼Œè§†å…·ä½“èŠ‚å‡æ—¥æ•°ç›®ï¼Œå¯ç®€å•åˆ†ä¸ºä¸¤ç±»ï¼Œâ€æœ‰å‡æ—¥â€-â€œæ— å‡æ—¥â€ï¼Œç‹¬çƒ­ç¼–ç å…±2ä¸ªå˜é‡ï¼›æˆ–èµ‹äºˆä¸åŒç¼–ç å€¼ï¼Œå¦‚åŒºåˆ†å›½åº†ã€æ˜¥èŠ‚ã€åŠ³åŠ¨èŠ‚ç­‰ä½¿ç”¨1ã€2ã€3è¡¨ç¤º</li><li>å°†æœˆåˆè½¬åŒ–ä¸º0-1å˜é‡ï¼Œç®€å•åˆ†ä¸¤ç±»è¡¨ç¤ºä¸ºâ€æ˜¯æœˆåˆâ€-â€œéæœˆåˆâ€ï¼Œå…±2ä¸ªç‰¹å¾</li><li>ç±»ä¼¼çš„æœˆä¸­ã€æœˆåˆå¯ä»¥è½¬åŒ–ä¸º0-1å˜é‡</li><li>æ§åˆ¶æ—¶é—´ç²’åº¦ï¼ŒåŒºåˆ†æ˜¯weekday or weekend</li></ul><p>æŒ‰åˆ—æå–ä¸­ä½æ•°æ˜¯ä¸€ç§ç®€å•è€Œæœ‰æ•ˆçš„æå–å‘¨æœŸå› å­çš„æ–¹æ³•ã€‚ä¸­ä½æ•°ååˆ†é²æ£’ï¼Œä¸å—æç«¯å€¼çš„å½±å“ã€‚ä½†ä¸­ä½æ•°æŸå¤±äº†å¾ˆå¤šä¿¡æ¯ã€‚å®è·µä¸­ï¼Œå¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šè¿›ä¸€æ­¥ä¼˜åŒ–ã€‚æ¯”å¦‚å¯ä»¥æå–ä¸€ä¸ªå‡å€¼å’Œä¸€ä¸ªä¸­ä½æ•°ï¼Œç„¶åå°†å‡å€¼å’Œä¸­ä½æ•°èåˆã€‚èåˆçš„æ¯”ä¾‹æŒ‰ç…§æµ‹è¯•é›†çš„è¡¨ç°æ¥ç¡®å®šã€‚ä¹Ÿå¯ä»¥æ ¹æ®ä¸é¢„æµ‹å‘¨çš„æ—¶é—´è·ç¦»æ¥èµ‹äºˆä¸åŒçš„æƒé‡ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Datawhale</tag>
      
      <tag>Data Mining</tag>
      
      <tag>Time Series Analysis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç«èµ›æ‰“å¡ã€‘æ•°æ®æŒ–æ˜å®è·µâ€”â€”æ•°æ®æ¢ç´¢å’Œåˆ†æ</title>
    <link href="/2020/08/20/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2%E5%92%8C%E5%88%86%E6%9E%90/"/>
    <url>/2020/08/20/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2%E5%92%8C%E5%88%86%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<p>æˆ‘ä¹Ÿæ˜¯åŠ æŠŠåŠ²éª‘å£«ï¼<br><!--more---></p><pre><code class="lang-py">file_names = glob.glob(&#39;Purchase Redemption Data/*.csv&#39;)file_names[&#39;Purchase Redemption Data/mfd_bank_shibor.csv&#39;, &#39;Purchase Redemption Data/comp_predict_table.csv&#39;, &#39;Purchase Redemption Data/user_profile_table.csv&#39;, &#39;Purchase Redemption Data/mfd_day_share_interest.csv&#39;, &#39;Purchase Redemption Data/user_balance_table.csv&#39;]</code></pre><h2 id="1-ç”¨æˆ·ä¿¡æ¯è¡¨-user-profile-table"><a href="#1-ç”¨æˆ·ä¿¡æ¯è¡¨-user-profile-table" class="headerlink" title="1. ç”¨æˆ·ä¿¡æ¯è¡¨ user_profile_table"></a>1. ç”¨æˆ·ä¿¡æ¯è¡¨ user_profile_table</h2><p>æˆ‘ä»¬æ€»å…±éšæœºæŠ½å–äº†çº¦ 3 ä¸‡ç”¨æˆ·ã€‚</p><p>å…¶ä¸­éƒ¨åˆ†ç”¨æˆ·åœ¨ 2014 å¹´ 9 æœˆä»½ç¬¬ä¸€æ¬¡å‡ºç°ï¼Œè¿™éƒ¨åˆ†ç”¨æˆ·åªåœ¨æµ‹è¯•æ•°æ®ä¸­ï¼ˆçœŸçš„å¤ªé‰´äº†è¿™ä¸ªï¼‰ã€‚</p><p>å› æ­¤ç”¨æˆ·ä¿¡æ¯è¡¨æ˜¯çº¦ 2.8 ä¸‡ ä¸ªç”¨æˆ·çš„åŸºæœ¬æ•°æ®ï¼Œåœ¨åŸå§‹æ•°æ®çš„åŸºç¡€ä¸Šå¤„ç†åï¼Œä¸»è¦åŒ…å«äº†ç”¨æˆ·çš„æ€§åˆ«ã€åŸå¸‚å’Œæ˜Ÿåº§ã€‚</p><p><img src="/2020/08/20/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2%E5%92%8C%E5%88%86%E6%9E%90/2020-08-20-23-43-55.png" alt></p><h2 id="2-ç”¨æˆ·ç”³è´­èµå›æ•°æ®è¡¨-user-balance-table"><a href="#2-ç”¨æˆ·ç”³è´­èµå›æ•°æ®è¡¨-user-balance-table" class="headerlink" title="2. ç”¨æˆ·ç”³è´­èµå›æ•°æ®è¡¨ user_balance_table"></a>2. ç”¨æˆ·ç”³è´­èµå›æ•°æ®è¡¨ user_balance_table</h2><p>é‡Œé¢æœ‰ 20130701 è‡³ 20140831 ç”³è´­å’Œèµå›ä¿¡æ¯ã€ä»¥åŠæ‰€æœ‰çš„å­ç±»ç›®ä¿¡æ¯ã€‚</p><p>æ•°æ®ç»è¿‡è„±æ•å¤„ç†ã€‚è„±æ•ä¹‹åçš„æ•°æ®ï¼ŒåŸºæœ¬ä¿æŒäº†åŸæ•°æ®è¶‹åŠ¿ã€‚</p><p>æ•°æ®ä¸»è¦åŒ…æ‹¬ç”¨æˆ·æ“ä½œæ—¶é—´å’Œæ“ä½œè®°å½•ï¼Œå…¶ä¸­æ“ä½œè®°å½•åŒ…æ‹¬ç”³è´­å’Œèµå›ä¸¤ä¸ªéƒ¨åˆ†ã€‚</p><p>é‡‘é¢çš„å•ä½æ˜¯åˆ†ï¼Œå³ 0.01 å…ƒäººæ°‘å¸ã€‚ å¦‚æœç”¨æˆ·ä»Šæ—¥æ¶ˆè´¹æ€»é‡ä¸º0ï¼Œå³consume_amt=0ï¼Œåˆ™å››ä¸ªå­—ç±»ç›®ä¸ºç©ºã€‚</p><div class="table-container"><table><thead><tr><th>å­—æ®µåç§°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>report_date</td><td>æ—¥æœŸ</td></tr><tr><td>tBalance</td><td>ä»Šæ—¥ä½™é¢</td></tr><tr><td>yBalance</td><td>æ˜¨æ—¥ä½™é¢</td></tr><tr><td>total_purchase_amt</td><td>ä»Šæ—¥æ€»è´­ä¹°é‡ = ç›´æ¥è´­ä¹° + æ”¶ç›Š</td></tr><tr><td>direct_purchase_amt</td><td>ä»Šæ—¥ç›´æ¥è´­ä¹°é‡</td></tr><tr><td>purchase_bal_amt</td><td>ä»Šæ—¥æ”¯ä»˜å®ä½™é¢è´­ä¹°é‡</td></tr><tr><td>purchase_bank_amt</td><td>ä»Šæ—¥é“¶è¡Œå¡è´­ä¹°é‡</td></tr><tr><td>total_redeem_amt</td><td>ä»Šæ—¥æ€»èµå›é‡ = æ¶ˆè´¹ + è½¬å‡º</td></tr><tr><td>consume_amt</td><td>ä»Šæ—¥æ¶ˆè´¹æ€»é‡</td></tr><tr><td>transfer_amt</td><td>ä»Šæ—¥è½¬å‡ºæ€»é‡</td></tr><tr><td>tftobal_amt</td><td>ä»Šæ—¥è½¬å‡ºåˆ°æ”¯ä»˜å®ä½™é¢æ€»é‡</td></tr><tr><td>tftocard_amt</td><td>ä»Šæ—¥è½¬å‡ºåˆ°é“¶è¡Œå¡æ€»é‡</td></tr><tr><td>share_amt</td><td>ä»Šæ—¥æ”¶ç›Š</td></tr><tr><td>category1</td><td>ä»Šæ—¥ç±»ç›® 1 æ¶ˆè´¹æ€»é¢</td></tr><tr><td>category2</td><td>ä»Šæ—¥ç±»ç›® 2 æ¶ˆè´¹æ€»é¢</td></tr><tr><td>category3</td><td>ä»Šæ—¥ç±»ç›® 3 æ¶ˆè´¹æ€»é¢</td></tr><tr><td>category4</td><td>ä»Šæ—¥ç±»ç›® 4 æ¶ˆè´¹æ€»é¢</td></tr></tbody></table></div><p><img src="/2020/08/20/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2%E5%92%8C%E5%88%86%E6%9E%90/2020-08-20-23-47-13.png" alt></p><p>æ³¨ 1 ï¼šä¸Šè¿°çš„æ•°æ®éƒ½æ˜¯ç»è¿‡è„±æ•å¤„ç†çš„ï¼Œæ”¶ç›Šä¸ºé‡æ–°è®¡ç®—å¾—åˆ°çš„ï¼Œè®¡ç®—æ–¹æ³•æŒ‰ç…§ç®€åŒ–åçš„è®¡ç®—æ–¹å¼å¤„ç†ï¼Œå…·ä½“è®¡ç®—æ–¹å¼åœ¨ä¸‹èŠ‚ä½™é¢å®æ”¶ç›Šè®¡ç®—æ–¹å¼ä¸­æè¿°ã€‚</p><p>æ³¨ 2 ï¼šè„±æ•åçš„æ•°æ®ä¿è¯äº†ä»Šæ—¥ä½™é¢ = æ˜¨æ—¥ä½™é¢ + ä»Šæ—¥ç”³è´­ - ä»Šæ—¥èµå›ï¼Œä¸ä¼šå‡ºç°è´Ÿå€¼ã€‚</p><h2 id="3-æ”¶ç›Šç‡è¡¨-mfd-day-share-interest"><a href="#3-æ”¶ç›Šç‡è¡¨-mfd-day-share-interest" class="headerlink" title="3. æ”¶ç›Šç‡è¡¨ mfd_day_share_interest"></a>3. æ”¶ç›Šç‡è¡¨ mfd_day_share_interest</h2><p>æ”¶ç›Šè¡¨ä¸ºä½™é¢å®åœ¨ 14 ä¸ªæœˆå†…çš„æ”¶ç›Šç‡è¡¨ ã€‚</p><p><img src="/2020/08/20/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2%E5%92%8C%E5%88%86%E6%9E%90/2020-08-20-23-47-55.png" alt></p><div class="table-container"><table><thead><tr><th>åˆ—å</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>mfd_date</td><td>æ—¥æœŸ</td></tr><tr><td>mfd_daily_yield</td><td>ä¸‡ä»½æ”¶ç›Šï¼Œå³ 1 ä¸‡å—é’±çš„æ”¶ç›Šã€‚</td></tr><tr><td>mfd_7daily_yield</td><td>ä¸ƒæ—¥å¹´åŒ–æ”¶ç›Šç‡ï¼ˆ % ï¼‰</td></tr></tbody></table></div><h2 id="4-ä¸Šæµ·é“¶è¡Œé—´åŒä¸šæ‹†æ”¾åˆ©ç‡ï¼ˆShiborï¼‰è¡¨-df-mfd-bank-shibor"><a href="#4-ä¸Šæµ·é“¶è¡Œé—´åŒä¸šæ‹†æ”¾åˆ©ç‡ï¼ˆShiborï¼‰è¡¨-df-mfd-bank-shibor" class="headerlink" title="4. ä¸Šæµ·é“¶è¡Œé—´åŒä¸šæ‹†æ”¾åˆ©ç‡ï¼ˆShiborï¼‰è¡¨ df_mfd_bank_shibor"></a>4. ä¸Šæµ·é“¶è¡Œé—´åŒä¸šæ‹†æ”¾åˆ©ç‡ï¼ˆShiborï¼‰è¡¨ df_mfd_bank_shibor</h2><p>é“¶è¡Œé—´æ‹†å€Ÿåˆ©ç‡è¡¨æ˜¯ 14 ä¸ªæœˆæœŸé—´é“¶è¡Œä¹‹é—´çš„æ‹†å€Ÿåˆ©ç‡ï¼ˆçš†ä¸ºå¹´åŒ–åˆ©ç‡ï¼‰</p><p><img src="/2020/08/20/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2%E5%92%8C%E5%88%86%E6%9E%90/2020-08-20-23-48-31.png" alt></p><div class="table-container"><table><thead><tr><th>åˆ—å</th><th>ç±»å‹</th><th>å«ä¹‰</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>mfd_date</td><td>String</td><td>æ—¥æœŸ</td><td>20140102</td></tr><tr><td>Interest_O_N</td><td>Double</td><td>éš”å¤œåˆ©ç‡ï¼ˆ%ï¼‰</td><td>2.8</td></tr><tr><td>Interest_1_W</td><td>Double</td><td>1å‘¨åˆ©ç‡ï¼ˆ%ï¼‰</td><td>4.25</td></tr><tr><td>Interest_2_W</td><td>Double</td><td>2å‘¨åˆ©ç‡ï¼ˆ%ï¼‰</td><td>4.9</td></tr><tr><td>Interest_1_M</td><td>Double</td><td>1ä¸ªæœˆåˆ©ç‡ï¼ˆ%ï¼‰</td><td>5.04</td></tr><tr><td>Interest_3_M</td><td>Double</td><td>3ä¸ªæœˆåˆ©ç‡ï¼ˆ%ï¼‰</td><td>4.91</td></tr><tr><td>Interest_6_M</td><td>Double</td><td>6ä¸ªæœˆåˆ©ç‡ï¼ˆ%ï¼‰</td><td>4.79</td></tr><tr><td>Interest_9_M</td><td>Double</td><td>9ä¸ªæœˆåˆ©ç‡ï¼ˆ%ï¼‰</td><td>4.76</td></tr><tr><td>Interest_1_Y</td><td>Double</td><td>1å¹´åˆ©ç‡ï¼ˆ%ï¼‰</td><td>4.78</td></tr></tbody></table></div><h1 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h1><h2 id="æ”¶ç›Šè®¡ç®—æ–¹å¼"><a href="#æ”¶ç›Šè®¡ç®—æ–¹å¼" class="headerlink" title="æ”¶ç›Šè®¡ç®—æ–¹å¼"></a>æ”¶ç›Šè®¡ç®—æ–¹å¼</h2><p>æœ¬èµ›é¢˜çš„ä½™é¢å®æ”¶ç›Šæ–¹å¼ï¼Œä¸»è¦åŸºäºå®é™…ä½™é¢å®æ”¶ç›Šè®¡ç®—æ–¹æ³•ï¼Œä½†æ˜¯è¿›è¡Œäº†ä¸€å®šçš„ç®€åŒ–ï¼Œæ­¤å¤„è®¡ç®—ç®€åŒ–çš„åœ°æ–¹å¦‚ä¸‹ï¼š</p><p>é¦–å…ˆï¼Œæ”¶ç›Šè®¡ç®—çš„æ—¶é—´ä¸å†æ˜¯ä¼šè®¡æ—¥ï¼Œè€Œæ˜¯è‡ªç„¶æ—¥ï¼Œä»¥ 0 ç‚¹ä¸ºåˆ†éš”ï¼Œå¦‚æœæ˜¯ 0 ç‚¹ä¹‹å‰è½¬å…¥æˆ–è€…è½¬å‡ºçš„é‡‘é¢ç®—ä½œæ˜¨å¤©çš„ï¼Œå¦‚æœæ˜¯ 0 ç‚¹ä»¥åè½¬å…¥æˆ–è€…è½¬å‡ºçš„é‡‘é¢åˆ™ç®—ä½œä»Šå¤©çš„ã€‚</p><p>ç„¶åï¼Œæ”¶ç›Šçš„æ˜¾ç¤ºæ—¶é—´ï¼Œå³å®é™…å°†ç¬¬ä¸€ä»½æ”¶ç›Šæ‰“å…¥ç”¨æˆ·è´¦æˆ·çš„æ—¶é—´ä¸ºå¦‚ä¸‹è¡¨æ ¼ï¼Œä»¥å‘¨ä¸€è½¬å…¥å‘¨ä¸‰æ˜¾ç¤ºä¸ºä¾‹ï¼Œå¦‚æœç”¨æˆ·åœ¨å‘¨ä¸€å­˜å…¥ 10000 å…ƒï¼Œå³ 1000000 åˆ†ï¼Œé‚£ä¹ˆè¿™ç¬”é‡‘é¢æ˜¯å‘¨ä¸€ç¡®è®¤ï¼Œå‘¨äºŒæ˜¯å¼€å§‹äº§ç”Ÿæ”¶ç›Šï¼Œç”¨æˆ·çš„ä½™é¢è¿˜æ˜¯ 10000 å…ƒï¼Œåœ¨å‘¨ä¸‰å°†å‘¨äºŒäº§ç”Ÿçš„æ”¶ç›Šæ‰“å…¥åˆ°ç”¨æˆ·çš„è´¦æˆ·ä¸­ï¼Œæ­¤æ—¶ç”¨æˆ·çš„è´¦æˆ·ä¸­æ˜¾ç¤ºçš„æ˜¯ 10001.1 å…ƒï¼Œå³ 1000110 åˆ†ã€‚å…¶ä»–æ—¶é—´çš„è®¡ç®—æŒ‰ç…§è¡¨æ ¼ä¸­çš„æ—¶é—´æ¥è®¡ç®—å¾—åˆ°ã€‚</p><div class="table-container"><table><thead><tr><th>è½¬å…¥æ—¶é—´</th><th>é¦–æ¬¡æ˜¾ç¤ºæ”¶ç›Šæ—¶é—´</th></tr></thead><tbody><tr><td>å‘¨ä¸€</td><td>å‘¨ä¸‰</td></tr><tr><td>å‘¨äºŒ</td><td>å‘¨å››</td></tr><tr><td>å‘¨ä¸‰</td><td>å‘¨äº”</td></tr><tr><td>å‘¨å››</td><td>å‘¨å…­</td></tr><tr><td>å‘¨äº”</td><td>ä¸‹å‘¨äºŒ</td></tr><tr><td>å‘¨å…­</td><td>ä¸‹å‘¨ä¸‰</td></tr><tr><td>å‘¨å¤©</td><td>ä¸‹å‘¨ä¸‰</td></tr></tbody></table></div><h2 id="æäº¤æ ¼å¼"><a href="#æäº¤æ ¼å¼" class="headerlink" title="æäº¤æ ¼å¼"></a>æäº¤æ ¼å¼</h2><div class="table-container"><table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>å«ä¹‰</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>report_date</td><td>bigint</td><td>æ—¥æœŸ</td><td>20140901</td></tr><tr><td>purchase</td><td>bigint</td><td>ç”³è´­æ€»é¢</td><td>40000000</td></tr><tr><td>redeem</td><td>bigint</td><td>èµå›æ€»é¢</td><td>30000000</td></tr></tbody></table></div><p><img src="/2020/08/20/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2%E5%92%8C%E5%88%86%E6%9E%90/2020-08-20-23-49-17.png" alt></p><p>æ¯ä¸€è¡Œæ•°æ®æ˜¯ä¸€å¤©å¯¹ç”³è´­ã€èµå›æ€»é¢çš„é¢„æµ‹å€¼ï¼Œ 2014 å¹´ 9 æœˆæ¯å¤©ä¸€è¡Œæ•°æ®ï¼Œå…± 30 è¡Œæ•°æ®ã€‚ Purchase å’Œ redeem éƒ½æ˜¯é‡‘é¢æ•°æ®ï¼Œç²¾ç¡®åˆ°åˆ†ï¼Œè€Œä¸æ˜¯ç²¾ç¡®åˆ°å…ƒã€‚</p><p>è¯„åˆ†æ•°æ®æ ¼å¼è¦æ±‚ä¸â€œé€‰æ‰‹ç»“æœæ•°æ®æ ·ä¾‹æ–‡ä»¶â€ä¸€è‡´ï¼Œç»“æœè¡¨å‘½åä¸ºï¼štc_comp_predict_tableï¼Œ å­—æ®µä¹‹é—´ä»¥é€—å·ä¸ºåˆ†éš”ç¬¦</p><h2 id="è¯„ä¼°"><a href="#è¯„ä¼°" class="headerlink" title="è¯„ä¼°"></a>è¯„ä¼°</h2><p>è¯„ä¼°æŒ‡æ ‡çš„è®¾è®¡ä¸»è¦æœŸæœ›é€‰æ‰‹å¯¹æœªæ¥ 30 å¤©å†…æ¯ä¸€å¤©ç”³è´­å’Œèµå›çš„æ€»é‡æ•°æ®é¢„æµ‹çš„è¶Šå‡†è¶Šå¥½ï¼ŒåŒæ—¶è€ƒè™‘åˆ°å¯èƒ½å­˜åœ¨çš„å¤šç§æƒ…å†µã€‚</p><p>è­¬å¦‚æœ‰äº›é€‰æ‰‹åœ¨ 30 å¤©ä¸­ 29 å¤©é¢„æµ‹éƒ½æ˜¯éå¸¸ç²¾å‡†çš„ä½†æ˜¯æŸä¸€å¤©é¢„æµ‹çš„ç»“æœå¯èƒ½è¯¯å·®å¾ˆå¤§ï¼Œè€Œæœ‰äº›é€‰æ‰‹åœ¨ 30 å¤©ä¸­æ¯å¤©çš„é¢„æµ‹éƒ½ä¸æ˜¯å¾ˆç²¾å‡†è¯¯å·®è¾ƒå¤§ï¼Œå¦‚æœé‡‡ç”¨ç»å¯¹è¯¯å·®åˆ™å¯èƒ½å¯¼è‡´å‰è€…çš„æˆç»©æ¯”åè€…å·®ï¼Œè€Œåœ¨å®é™…ä¸šåŠ¡ä¸­å¯èƒ½æ›´å€¾å‘äºå‰è€…ã€‚</p><p>æ‰€ä»¥æœ€ç»ˆé€‰ç”¨ç§¯åˆ†å¼çš„è®¡ç®—æ–¹æ³•ï¼šæ¯å¤©çš„è¯¯å·®é€‰ç”¨ç›¸å¯¹è¯¯å·®æ¥è®¡ç®—ï¼Œç„¶åæ ¹æ®ç”¨æˆ·é¢„æµ‹ç”³è´­å’Œèµå›çš„ç›¸å¯¹è¯¯å·®ï¼Œé€šè¿‡å¾—åˆ†å‡½æ•°æ˜ å°„å¾—åˆ°ä¸€ä¸ªæ¯å¤©é¢„æµ‹ç»“æœçš„å¾—åˆ†ï¼Œå°† 30 å¤©å†…çš„å¾—åˆ†æ±‡æ€»ï¼Œç„¶åç»“åˆå®é™…ä¸šåŠ¡çš„å€¾å‘ï¼Œå¯¹ç”³è´­èµå›æ€»é‡é¢„æµ‹çš„å¾—åˆ†æƒ…å†µè¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œå¾—åˆ°æœ€ç»ˆè¯„åˆ†ã€‚å…·ä½“çš„æ“ä½œå¦‚ä¸‹ï¼š</p><p>1) è®¡ç®—æ‰€æœ‰ç”¨æˆ·åœ¨æµ‹è¯•é›†ä¸Šæ¯å¤©çš„ç”³è´­åŠèµå›æ€»é¢ä¸å®é™…æƒ…å†µæ€»é¢çš„è¯¯å·®ã€‚</p><p><img src="https://gtms02.alicdn.com/tps/i2/TB1UMhaHVXXXXbWXpXXmP_sPXXX-372-168.png" alt></p><p>2) ç”³è´­é¢„æµ‹å¾—åˆ†ä¸ Purchasei ç›¸å…³ï¼Œèµå›é¢„æµ‹å¾—åˆ†ä¸ Redeemi ç›¸å…³ , è¯¯å·®ä¸å¾—åˆ†ä¹‹é—´çš„è®¡ç®—å…¬å¼ä¸å…¬å¸ƒï¼Œä½†ä¿è¯è¯¥è®¡ç®—å…¬å¼ä¸ºå•è°ƒé€’å‡çš„ï¼Œå³è¯¯å·®è¶Šå°ï¼Œå¾—åˆ†è¶Šé«˜ï¼Œè¯¯å·®ä¸å¤§ï¼Œå¾—åˆ†è¶Šä½ã€‚å½“ç¬¬ i å¤©çš„ç”³è´­è¯¯å·® Purchasei =0 ï¼Œè¿™ä¸€å¤©çš„å¾—åˆ†ä¸º 10 åˆ†ï¼›å½“ Purchasei &gt; 0.3 ï¼Œå…¶å¾—åˆ†ä¸º 0 ã€‚</p><p>3) æœ€åå…¬å¸ƒæ€»ç§¯åˆ† = ç”³è´­é¢„æµ‹å¾—åˆ† <em>45%+ èµå›é¢„æµ‹å¾—åˆ† </em>55% ã€‚ </p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Datawhale</tag>
      
      <tag>Data Mining</tag>
      
      <tag>Time Series Analysis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘Fuzzingå­¦ä¹ ç¬”è®°3â€”â€”ç°ç›’Fuzzing</title>
    <link href="/2020/08/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03%E2%80%94%E2%80%94%E7%81%B0%E7%9B%92Fuzzing/"/>
    <url>/2020/08/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03%E2%80%94%E2%80%94%E7%81%B0%E7%9B%92Fuzzing/</url>
    
    <content type="html"><![CDATA[<p>ç°ç›’å˜å¼‚çš„æ¨¡ç³Šæµ‹è¯•ã€‚<br><!--more---></p><p>æ™®é€šfuzzingï¼šä»0å¼€å§‹æ„é€ æµ‹è¯•ç”¨ä¾‹<br>çªå˜fuzzingï¼šä»seedå¼€å§‹æ„é€ æµ‹è¯•ç”¨ä¾‹<br>ç°ç›’fuzzingï¼šæœ‰å¼•å¯¼çš„çªå˜fuzzing</p><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>ä¸Šå›ä¹¦è¯´åˆ°ï¼ŒAFLæ˜¯çªå˜fuzzerï¼Œé€šè¿‡æŠŠç§å­å­—ç¬¦ä¸²è¿›è¡Œäº›å¾®ä¿®æ”¹ï¼Œå¾—åˆ°å˜å¼‚ä½“ï¼›æ­¤å¤–AFLè¿˜ä¼šå°†ä¸€ä¸ªç§å­çš„å‰åŠéƒ¨åˆ†ä¸å¦ä¸€ä¸ªç§å­çš„ååŠéƒ¨åˆ†è¿æ¥ï¼Œå½¢æˆå˜å¼‚ä½“ã€‚</p><p>AFLä¹Ÿæ˜¯ä¸ªç°ç›’fuzzerï¼Œè¿™æ˜¯ç”±äºAFLéœ€è¦ä½¿ç”¨ç¨‹åºå†…éƒ¨ä¿¡æ¯ï¼ˆå³è¦†ç›–ç‡ï¼‰ã€‚AFLä¸æ˜¯ç™½ç›’ï¼Œå› ä¸ºAFLæ²¡æœ‰å¯¹ç¨‹åºè¿›è¡Œçº¦æŸæ±‚è§£ã€ç¨‹åºåˆ†æä¹‹ç±»çš„ï¼Œåªæ˜¯ç®€å•è·å–äº†ä¸€ä¸ªè¦†ç›–ç‡ã€‚å¦‚æœç”Ÿæˆçš„æ ·æœ¬èƒ½å¤Ÿæå‡è¦†ç›–ç‡ï¼Œé‚£ä¹ˆå°±å°†è¿™ä¸ªæ ·æœ¬æ·»åŠ è¿›ç§å­é˜Ÿåˆ—ä»¥ä¾›ä¸‹æ¬¡çªå˜ä½¿ç”¨ï¼ˆè¿™å°±æ„å‘³ç€çªå˜ä½“æœ‰é‡å¤çªå˜çš„å¯èƒ½ï¼‰ã€‚</p><p>AFLè®¡ç®—è¦†ç›–ç‡çš„æ–¹æ³•ï¼Œæ˜¯é€šè¿‡åœ¨æ¯ä¸ªåˆ†æ”¯çš„è·³è½¬æŒ‡ä»¤åæ‰§è¡Œä¸€æ®µæ ‡è®°ä»£ç ã€‚è¿™æ ·å°±å¯ä»¥åšåˆ°ï¼Œç›‘æ§æ¯ä¸ªè¾“å…¥å¯¼è‡´çš„æ¿€æ´»åˆ†æ”¯ï¼Œä»¥åŠæ¯ä¸ªåˆ†æ”¯è¢«æ¿€æ´»çš„å¤§æ¦‚é¢‘ç‡ã€‚æ³¨å…¥ä»£ç è¿™ä¸ªç¯èŠ‚é€šå¸¸åœ¨ç¼–è¯‘æ—¶å®Œæˆã€‚å¯¹äºPythonï¼Œå¯ä»¥åœ¨æœªç»å¤„ç†çš„æƒ…å†µä¸‹æ‰§è¡Œè¦†ç›–ç‡ä¿¡æ¯æ”¶é›†ã€‚</p><h2 id="çªå˜ç®—æ³•å’Œç§å­"><a href="#çªå˜ç®—æ³•å’Œç§å­" class="headerlink" title="çªå˜ç®—æ³•å’Œç§å­"></a>çªå˜ç®—æ³•å’Œç§å­</h2><p>å¼•å…¥Mutatorç±»ã€‚Mutatorç±»æ˜¯ä¸ªè¿‡ç¨‹ç±»ï¼ŒåŒ…è£…äº†å¯¹è¾“å…¥inpçš„çªå˜æ–¹æ³•ã€‚</p><pre><code class="lang-py">class Mutator(object):    def __init__(self):        self.mutators = [            self.delete_random_character,            self.insert_random_character,            self.flip_random_character    def insert_random_character(self,s):        &quot;&quot;&quot;Returns s with a random character inserted&quot;&quot;&quot;        pos = random.randint(0, len(s))        random_character = chr(random.randrange(32, 127))        return s[:pos] + random_character + s[pos:]    def delete_random_character(self,s):        &quot;&quot;&quot;Returns s with a random character deleted&quot;&quot;&quot;        if s == &quot;&quot;:            return self.insert_random_character(s)        pos = random.randint(0, len(s) - 1)        return s[:pos] + s[pos + 1:]    def flip_random_character(self,s):        &quot;&quot;&quot;Returns s with a random bit flipped in a random position&quot;&quot;&quot;        if s == &quot;&quot;:            return self.insert_random_character(s)        pos = random.randint(0, len(s) - 1)        c = s[pos]        bit = 1 &lt;&lt; random.randint(0, 6)        new_c = chr(ord(c) ^ bit)        return s[:pos] + new_c + s[pos + 1:]    def mutate(self, inp):        &quot;&quot;&quot;Return s with a random mutation applied&quot;&quot;&quot;        mutator = random.choice(self.mutators)        return mutator(inp)</code></pre><p>ä½¿ç”¨Mutatoræ˜¯åªéœ€å®ä¾‹åŒ–Mutatorï¼Œç„¶åè°ƒç”¨mutate()æ–¹æ³•å³å¯ã€‚</p><pre><code class="lang-py">Mutator().mutate(&quot;good&quot;)&#39;cood&#39;</code></pre><h2 id="ç²¾åŠ›åˆ†é…ï¼ˆPower-Scheduleï¼‰"><a href="#ç²¾åŠ›åˆ†é…ï¼ˆPower-Scheduleï¼‰" class="headerlink" title="ç²¾åŠ›åˆ†é…ï¼ˆPower Scheduleï¼‰"></a>ç²¾åŠ›åˆ†é…ï¼ˆPower Scheduleï¼‰</h2><p>æ¨¡ç³Šæµ‹è¯•æ˜¯ä¸€ç§æ‰§è¡Œå¾ˆæ…¢çš„æµ‹è¯•æ–¹æ³•ã€‚æ—¢ç„¶å¹¶ä¸æ˜¯æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ç§å­éƒ½å€¼å¾—åˆ†é…åŒæ ·çš„ç²¾åŠ›ï¼Œé‚£ä¹ˆè¯•å›¾å‘ç°é‚£äº›æ›´ä»¤äººæ„Ÿå…´è¶£çš„ç§å­å°±æ˜¯ç†æ‰€å½“ç„¶çš„é€‰æ‹©äº†ã€‚</p><p>æˆ‘ä»¬æŠŠä¸€ä¸ªç§å­ä»ç§ç¾¤ä¸­è¢«é€‰ä¸­çš„å¯èƒ½æ€§ç§°ä¸ºç§å­çš„èƒ½é‡ï¼ˆenergyï¼‰ã€‚æˆ‘ä»¬å¸Œæœ›ä¼˜å…ˆçªå˜å’Œæ‰§è¡Œé‚£äº›æ›´æœ‰å¸Œæœ›å‘ç°å¾…æµ‹ç¨‹åºé”™è¯¯çš„ç§å­ï¼Œä¸å¸Œæœ›åœ¨æ— è¿›æ­¥çš„ç§å­èº«ä¸Šæµªè´¹ç²¾åŠ›ã€‚</p><p>å†³å®šç§å­èƒ½é‡åˆ†é…çš„ç®—æ³•ç§°ä¸ºâ€œåŠŸç‡è¡¨â€ï¼ˆPower Scheduleï¼‰ã€‚AFLçš„åŠŸç‡è¡¨ä¼šå°†æ›´å¤šçš„èƒ½é‡åˆ†é…ç»™é‚£äº›é•¿åº¦è¾ƒçŸ­ã€æ‰§è¡Œé€Ÿåº¦è¾ƒå¿«ã€è¦†ç›–ç‡å¢åŠ è¾ƒå¤šçš„ç§å­ã€‚</p><p>ç”±æ­¤ï¼Œæ¯ä¸ªç§å­éœ€è¦é¢å¤–ç»´æŠ¤å…¶èƒ½é‡ã€‚æ„å»ºSeedç±»å¦‚ä¸‹ï¼š</p><pre><code class="lang-py">class Seed(object):        def __init__(self, data):        &quot;&quot;&quot;Set seed data&quot;&quot;&quot;        self.data = data    def __str__(self):        &quot;&quot;&quot;Returns data as string representation of the seed&quot;&quot;&quot;        return self.data    __repr__ = __str__</code></pre><p>ä¸‹é¢æ˜¯åŠŸç‡è¡¨PowerScheduleç±»çš„å®šä¹‰ï¼š</p><pre><code class="lang-py">class PowerSchedule(object):        def assignEnergy(self, population):        &quot;&quot;&quot;Assigns each seed the same energy&quot;&quot;&quot;        for seed in population:            seed.energy = 1    def normalizedEnergy(self, population):        &quot;&quot;&quot;Normalize energy&quot;&quot;&quot;        energy = list(map(lambda seed: seed.energy, population))        sum_energy = sum(energy)  # Add up all values in energy        norm_energy = list(map(lambda nrg: nrg/sum_energy, energy))        return norm_energy    def choose(self, population):        &quot;&quot;&quot;Choose weighted by normalized energy.&quot;&quot;&quot;        import numpy as np        self.assignEnergy(population)        norm_energy = self.normalizedEnergy(population)        seed = np.random.choice(population, p=norm_energy)        return seed</code></pre><h2 id="ç°ç›’fuzzingä¸é»‘ç›’fuzzingçš„æ¯”è¾ƒ"><a href="#ç°ç›’fuzzingä¸é»‘ç›’fuzzingçš„æ¯”è¾ƒ" class="headerlink" title="ç°ç›’fuzzingä¸é»‘ç›’fuzzingçš„æ¯”è¾ƒ"></a>ç°ç›’fuzzingä¸é»‘ç›’fuzzingçš„æ¯”è¾ƒ</h2><p>é¦–å…ˆå®šä¹‰ä¸ä½¿ç”¨coverageçš„é»‘ç›’fuzzerï¼ŒMutationFuzzer ç±»ï¼š</p><pre><code class="lang-py">class MutationFuzzer(Fuzzer):    def __init__(self, seeds, mutator, schedule):        self.seeds = seeds        self.mutator = mutator        self.schedule = schedule        self.inputs = []        self.reset()    def reset(self):        &quot;&quot;&quot;Reset the initial population and seed index&quot;&quot;&quot;        self.population = list(map(lambda x: Seed(x), self.seeds))        self.seed_index = 0    def create_candidate(self):        &quot;&quot;&quot;Returns an input generated by fuzzing a seed in the population&quot;&quot;&quot;        seed = self.schedule.choose(self.population)        # Stacking: Apply multiple mutations to generate the candidate        candidate = seed.data        trials = min(len(candidate), 1 &lt;&lt; random.randint(1,5))        for i in range(trials):            candidate = self.mutator.mutate(candidate)        return candidate    def fuzz(self):        &quot;&quot;&quot;Returns first each seed once and then generates new inputs&quot;&quot;&quot;        if self.seed_index &lt; len(self.seeds):            # Still seeding            self.inp = self.seeds[self.seed_index]            self.seed_index += 1        else:            # Mutating            self.inp = self.create_candidate()        self.inputs.append(self.inp)        return self.inp</code></pre><p>MutationFuzzer æ˜¯ç”±ä¸€ç»„åˆå§‹ç§å­ã€ä¸€ä¸ªçªå˜å™¨å’Œä¸€ä¸ªåŠŸç‡è¡¨æ„æˆçš„ã€‚åœ¨æ•´ä¸ªæ¨¡ç³ŠåŒ–è¿‡ç¨‹ä¸­ï¼Œå®ƒç»´æŠ¤ç€ä¸€ä¸ªåä¸ºpopulationçš„ç§å­è¯­æ–™åº“ã€‚create_candidateå¯¹æŸä¸ªç§å­æ‰§è¡Œå¤šæ¬¡çªå˜ï¼Œfuzzå…ˆè¯•å›¾è¿”å›æ­£å¸¸ç§å­ï¼Œéšåè¿”å›çªå˜ç§å­ã€‚</p><p>population_coverage æ˜¯é¢„å…ˆå®šä¹‰å¥½çš„è¦†ç›–ç‡è®¡ç®—åº“ï¼Œè¿”å›ï¼ˆall_coverageï¼Œcumulative_coverageï¼‰ã€‚å…¶ä¸­all_coverageæ˜¯æ‰€æœ‰è¾“å…¥æ‰€è¦†ç›–çš„è¯­å¥é›†ï¼Œcumulative_coverageæ˜¯éšç€æ‰§è¡Œè¾“å…¥æ•°é‡çš„å¢åŠ è€Œè¦†ç›–çš„è¯­å¥æ•°é‡ã€‚</p><p>ä¸‹é¢æ˜¯GrayBox fuzzingçš„å®ç°ï¼š</p><pre><code class="lang-py">class GreyboxFuzzer(MutationFuzzer):        def reset(self):        &quot;&quot;&quot;Reset the initial population, seed index, coverage information&quot;&quot;&quot;        super().reset()        self.coverages_seen = set()        self.population = [] # population is filled during greybox fuzzing    def run(self, runner):        &quot;&quot;&quot;Run function(inp) while tracking coverage.           If we reach new coverage,           add inp to population and its coverage to population_coverage        &quot;&quot;&quot;        result, outcome = super().run(runner)        new_coverage = frozenset(runner.coverage())        if new_coverage not in self.coverages_seen:            # We have new coverage            seed = Seed(self.inp)            seed.coverage = runner.coverage()            self.coverages_seen.add(new_coverage)            self.population.append(seed)        return (result, outcome)</code></pre><p>ç»è¿‡è®¡ç®—ï¼Œåˆ†åˆ«å¾—åˆ°è¦†ç›–ç‡å˜åŒ–è¶‹åŠ¿blackbox_coverageå’Œgreybox_coverageï¼Œå¯è§†åŒ–å¦‚ä¸‹ï¼š</p><p><img src="/2020/08/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03%E2%80%94%E2%80%94%E7%81%B0%E7%9B%92Fuzzing/2020-08-20-00-42-27.png" alt></p><p>å¯ä»¥çœ‹åˆ°ï¼Œç°ç›’fuzzingçš„è¦†ç›–ç‡å¢é•¿æ˜æ˜¾æ¯”é»‘ç›’è¦å¥½ã€‚</p><h2 id="å¢å¼ºåçš„ç°ç›’fuzzer"><a href="#å¢å¼ºåçš„ç°ç›’fuzzer" class="headerlink" title="å¢å¼ºåçš„ç°ç›’fuzzer"></a>å¢å¼ºåçš„ç°ç›’fuzzer</h2><p>é€šè¿‡ä¿®æ”¹åŠŸç‡è¡¨PowerScheduleï¼Œä½¿é‚£äº›èƒ½æ¿€æ´»ä¸å¯»å¸¸çš„pathçš„inputå…·æœ‰æ›´é«˜çš„energyã€‚ä¸å¯»å¸¸çš„pathæŒ‡çš„æ˜¯æ¿€æ´»æ¬¡æ•°æ¯”è¾ƒå°ã€‚</p><p>æœ‰å¤šç§æ–¹æ³•è®¡ç®—ä¸€ä¸ªç§å­çš„èƒ½é‡ã€‚ä¸Šè¿°çš„è¦æ±‚å½¢å¼åŒ–ä¸ºå…·ä½“å®šä¹‰å³ä¸º</p><script type="math/tex; mode=display">e(s)=\frac{1}{f(p(s))^a}</script><p>å…¶ä¸­$s$æ˜¯ç§å­<br>$p(s)$ä¸º$s$æ¿€æ´»çš„path<br>$f(p)$è¿”å›pathæ¿€æ´»çš„æ¬¡æ•°<br>$a$æ˜¯ç»™å®šçš„è¶…å‚æ•°<br>$e(s)$æ˜¯ç§å­$s$è¢«åˆ†é…çš„èƒ½é‡</p><p>ä¸‹é¢æ˜¯æŒ‰ç…§æ­¤æ€æƒ³è®¾ç½®çš„PowerScheduleï¼š</p><pre><code class="lang-py">class AFLFastSchedule(PowerSchedule):     def __init__(self, exponent):        self.exponent = exponent    def assignEnergy(self, population):        &quot;&quot;&quot;Assign exponential energy inversely proportional to path frequency&quot;&quot;&quot;        for seed in population:            seed.energy = 1 / (self.path_frequency[getPathID(seed.coverage)] ** self.exponent)</code></pre><p>æ”¹è¿›çš„ç°ç›’Fuzzerï¼š</p><pre><code class="lang-py">class CountingGreyboxFuzzer(GreyboxFuzzer):    def reset(self):        &quot;&quot;&quot;Reset path frequency&quot;&quot;&quot;        super().reset()        self.schedule.path_frequency = &#123;&#125;    def run(self, runner):        &quot;&quot;&quot;Inform scheduler about path frequency&quot;&quot;&quot;        result, outcome = super().run(runner)        path_id = getPathID(runner.coverage())        if not path_id in self.schedule.path_frequency:            self.schedule.path_frequency[path_id] = 1        else:            self.schedule.path_frequency[path_id] += 1        return(result, outcome)</code></pre><p>è¦†ç›–ç‡å˜åŒ–å¦‚å›¾æ‰€ç¤º</p><p><img src="/2020/08/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03%E2%80%94%E2%80%94%E7%81%B0%E7%9B%92Fuzzing/2020-08-20-00-52-08.png" alt></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä¸‰ç¯‡Fuzzingæ–‡ç« åˆ°æ­¤ä¸ºæ­¢ã€‚</p><p>Fuzzing çš„æ–¹æ³•æ˜¯é€šè¿‡å¤§é‡ç”Ÿæˆinputï¼Œæ¥æ‰¾å‡ºè¢«æµ‹ç¨‹åºçš„é”™è¯¯çš„æ–¹æ³•ã€‚</p><p>Fuzzingçš„å…³é”®ç‚¹ä¹‹ä¸€åœ¨äºinputç”Ÿæˆæ–¹æ³•ï¼Œå…¶äºŒåœ¨äºinputçš„æ’åºæ–¹æ³•ï¼Œå…¶ä¸‰åœ¨äºè½¯ä»¶å†…éƒ¨ä¿¡æ¯çš„è·å–å’Œåº”ç”¨ã€‚</p><p>å¦‚æœinputå®Œå…¨æ˜¯è‡ªå·±æ„å»ºçš„ï¼Œé‚£ä¹ˆè¿™ç§æ–¹æ³•ç§°ä¹‹ä¸ºgenerational fuzzing</p><p>å¦‚æœinputæ˜¯é€šè¿‡åŸå§‹ç§å­ç•¥å¾®ä¿®æ”¹åå¾—åˆ°çš„ï¼Œé‚£ä¹ˆè¿™ç§fuzzingä¸ºMutational fuzzingã€‚</p><p>å¦‚æœMutatorå¯ä»¥ç»è¿‡ä¸€å®šçš„ç¨‹åºä¿¡æ¯çš„å¼•å¯¼ï¼Œé‚£ä¹ˆè¿™å«åšGrayBox Fuzzingï¼Œæ¯”å¦‚è¦†ç›–ç‡å¼•å¯¼çš„æ¨¡ç³Šæµ‹è¯•</p><p>å¦‚æœSeedç»è¿‡Power Scheduleçš„ç²¾åŠ›åˆ†é…ï¼ŒéšåMutatoræ ¹æ®Seedçš„ç²¾åŠ›å¤§å°æ’åºï¼Œé‚£ä¹ˆè¿™ç§æ–¹æ³•ç§°ä¹‹ä¸ºBoosted GrayBox Fuzzing</p><p>ä½¿ç”¨åˆ°çš„ç±»ï¼š</p><p>Runnerï¼šå¾…æµ‹ç¨‹åºçš„åŸºç±»</p><p>Fuzzerï¼šæ¨¡ç³Šæµ‹è¯•å™¨çš„åŸºç±»</p><p>Seedï¼šæµ‹è¯•ç”¨ä¾‹ç§å­çš„åŸºç±»</p><p>PowerScheduleï¼šåŠŸç‡è¡¨çš„åŸºç±»</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fuzzing</tag>
      
      <tag>Testing</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘Fuzzingå­¦ä¹ ç¬”è®°2â€”â€”åŸºäºå˜å¼‚çš„Fuzzing</title>
    <link href="/2020/08/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02%E2%80%94%E2%80%94%E5%9F%BA%E4%BA%8E%E5%8F%98%E5%BC%82%E7%9A%84Fuzzing/"/>
    <url>/2020/08/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02%E2%80%94%E2%80%94%E5%9F%BA%E4%BA%8E%E5%8F%98%E5%BC%82%E7%9A%84Fuzzing/</url>
    
    <content type="html"><![CDATA[<p>åŸºäºå˜å¼‚çš„æ¨¡ç³Šæµ‹è¯•ã€‚<br><!--more---></p><p><a href="https://www.fuzzingbook.org/html/MutationFuzzer.html">https://www.fuzzingbook.org/html/MutationFuzzer.html</a></p><p>å¤§å¤šæ•°éšæœºç”Ÿæˆçš„è¾“å…¥åœ¨è¯­æ³•ä¸Šéƒ½æ˜¯æ— æ•ˆçš„ï¼Œç¨‹åºå¾ˆå¿«å°±ä¼šæ£€æµ‹å¹¶æ‹’ç»è¿™äº›è¾“å…¥ï¼Œè¿™æ ·ä¾¿è¾¾ä¸åˆ°æ·±å…¥æµ‹è¯•Runnerå†…éƒ¨çš„ç›®çš„ã€‚å› æ­¤æˆ‘ä»¬å¿…é¡»è¯•å›¾ç”Ÿæˆæœ‰æ•ˆçš„è¾“å…¥ã€‚</p><p>æœ¬èŠ‚æˆ‘ä»¬ä»‹ç»Mutation Fuzzingï¼Œè¿™ç§åŸºäºå˜å¼‚çš„æ–¹æ³•å¯¹ç°æœ‰è¾“å…¥è¿›è¡Œå°çš„æ›´æ”¹ï¼Œè¿™äº›æ›´æ”¹å¯èƒ½ä»ä½¿è¾“å…¥ä¿æŒæœ‰æ•ˆï¼Œä½†ä»ä¼šè¡¨ç°å‡ºæ–°çš„è¡Œä¸ºã€‚ </p><p>è¦å¯¹å­—ç¬¦ä¸²å½¢å¼çš„è¾“å…¥è¿›è¡Œå˜å¼‚ï¼ˆMutateï¼‰ï¼Œå…·ä½“æ¥è¯´ï¼Œå°±æ˜¯æ‰§è¡Œéšæœºæ’å…¥å­—ç¬¦ã€åˆ é™¤å­—ç¬¦ã€ä¿®æ”¹å­—ç¬¦ç­‰æ“ä½œã€‚Mutational fuzzingçš„ç‰¹ç‚¹æ˜¯åŸºäºä¸€ä¸ªæœ‰æ•ˆçš„åŸå§‹è¾“å…¥ï¼Œä¸ä¹‹å‰å‡­ç©ºæé€ å‡ºæ¥ä¸€ä¸ªinputçš„generational fuzzingä¸åŒã€‚</p><p>éšæœºåˆ é™¤</p><pre><code class="lang-py">def delete_random_character(s):    &quot;&quot;&quot;Returns s with a random character deleted&quot;&quot;&quot;    if s == &quot;&quot;:        return s    pos = random.randint(0, len(s) - 1)    # print(&quot;Deleting&quot;, repr(s[pos]), &quot;at&quot;, pos)    return s[:pos] + s[pos + 1:]seed_input = &quot;A quick brown fox&quot;for i in range(10):    x = delete_random_character(seed_input)    print(repr(x))&#39;A uick brown fox&#39;&#39;A quic brown fox&#39;&#39;A quick brown fo&#39;&#39;A quic brown fox&#39;&#39;A quick bown fox&#39;&#39;A quick bown fox&#39;&#39;A quick brown fx&#39;&#39;A quick brown ox&#39;&#39;A quick brow fox&#39;&#39;A quic brown fox&#39;</code></pre><p>éšæœºæ’å…¥</p><pre><code class="lang-py">def insert_random_character(s):    &quot;&quot;&quot;Returns s with a random character inserted&quot;&quot;&quot;    pos = random.randint(0, len(s))    random_character = chr(random.randrange(32, 127))    # print(&quot;Inserting&quot;, repr(random_character), &quot;at&quot;, pos)    return s[:pos] + random_character + s[pos:]for i in range(10):    print(repr(insert_random_character(seed_input)))&#39;A quick brvown fox&#39;&#39;A quwick brown fox&#39;&#39;A qBuick brown fox&#39;&#39;A quick broSwn fox&#39;&#39;A quick brown fvox&#39;&#39;A quick brown 3fox&#39;&#39;A quick brNown fox&#39;&#39;A quick brow4n fox&#39;&#39;A quick brown fox8&#39;&#39;A equick brown fox&#39;</code></pre><p>éšæœºæ›¿æ¢</p><pre><code class="lang-py">def flip_random_character(s):    &quot;&quot;&quot;Returns s with a random bit flipped in a random position&quot;&quot;&quot;    if s == &quot;&quot;:        return s    pos = random.randint(0, len(s) - 1)    c = s[pos]    bit = 1 &lt;&lt; random.randint(0, 6)    new_c = chr(ord(c) ^ bit)    # print(&quot;Flipping&quot;, bit, &quot;in&quot;, repr(c) + &quot;, giving&quot;, repr(new_c))    return s[:pos] + new_c + s[pos + 1:]for i in range(10):    print(repr(flip_random_character(seed_input)))&#39;A quick bRown fox&#39;&#39;A quici brown fox&#39;&#39;A&quot;quick brown fox&#39;&#39;A quick brown$fox&#39;&#39;A quick bpown fox&#39;&#39;A quick brown!fox&#39;&#39;A 1uick brown fox&#39;&#39;@ quick brown fox&#39;&#39;A quic+ brown fox&#39;&#39;A quick bsown fox&#39;</code></pre><p>åªè¦æˆ‘ä»¬æœ‰ä¸€äº›åŸå§‹è¾“å…¥ï¼Œè¿™äº›è¾“å…¥æ˜¯æœ‰æ•ˆçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬åŸºäºåŸå§‹è¾“å…¥çš„å˜å¼‚ä¹Ÿåº”è¯¥æ˜¯æœ‰æ•ˆçš„ã€‚</p><p>å¤šé‡å˜å¼‚</p><p>å‡è®¾æˆ‘ä»¬è¿™é‡Œæœ‰ä¸ªæ–¹æ³•mutate()ï¼Œèƒ½å¯¹å­—ç¬¦ä¸²æ‰§è¡Œå˜å¼‚æ“ä½œã€‚é‚£ä¹ˆè¿ç»­å˜å¼‚50æ¬¡ï¼Œè¾“å…¥ä¼šå˜æˆä»€ä¹ˆæ ·å­ï¼Ÿ</p><pre><code class="lang-py">seed_input = &quot;http://www.google.com/search?q=fuzzing&quot;mutations = 50inp = seed_inputfor i in range(mutations):    if i % 5 == 0:        print(i, &quot;mutations:&quot;, repr(inp))    inp = mutate(inp)0 mutations: &#39;http://www.google.com/search?q=fuzzing&#39;5 mutations: &#39;http:/L/www.googlej.com/seaRchq=fuz:ing&#39;10 mutations: &#39;http:/L/www.ggoWglej.com/seaRchqfu:in&#39;15 mutations: &#39;http:/L/wwggoWglej.com/seaR3hqf,u:in&#39;20 mutations: &#39;htt://wwggoVgle&quot;j.som/seaR3hqf,u:in&#39;25 mutations: &#39;htt://fwggoVgle&quot;j.som/eaRd3hqf,u^:in&#39;30 mutations: &#39;htv://&gt;fwggoVgle&quot;j.qom/ea0Rd3hqf,u^:i&#39;35 mutations: &#39;htv://&gt;fwggozVle&quot;Bj.qom/eapRd[3hqf,u^:i&#39;40 mutations: &#39;htv://&gt;fwgeo6zTle&quot;Bj.\&#39;qom/eapRd[3hqf,tu^:i&#39;45 mutations: &#39;htv://&gt;fwgeo]6zTle&quot;BjM.\&#39;qom/eaR[3hqf,tu^:i&#39;</code></pre><p>å¯ä»¥çœ‹åˆ°å˜å¼‚ä½“å·²ç»å‡ ä¹æ— æ³•è¯†åˆ«äº†ã€‚æˆ‘ä»¬é€šè¿‡å¤šæ¬¡å˜å¼‚ï¼Œè·å¾—äº†æ›´åŠ å¤šæ ·çš„è¾“å…¥ã€‚</p><p>MutationFuzzerçš„å®ç°</p><pre><code class="lang-py">class MutationFuzzer(Fuzzer):    def __init__(self, seed, min_mutations=2, max_mutations=10):        self.seed = seed        self.min_mutations = min_mutations        self.max_mutations = max_mutations        self.reset()    def reset(self):        self.population = self.seed        self.seed_index = 0    def mutate(self, inp):        return mutate(inp)    def create_candidate(self):        candidate = random.choice(self.population)        trials = random.randint(self.min_mutations, self.max_mutations)        for i in range(trials):            candidate = self.mutate(candidate)        return candidate    def fuzz(self):        if self.seed_index &lt; len(self.seed):            # Still seeding            self.inp = self.seed[self.seed_index]            self.seed_index += 1        else:            # Mutating            self.inp = self.create_candidate()        return self.inp</code></pre><p><code>create_candidate()</code>éšæœºé€‰å–ç§å­<code>candidate</code>ï¼Œç„¶åå°†è¿™ä¸ªç§å­éšæœºçªå˜<code>trials</code>æ¬¡ï¼Œè¿”å›ç»è¿‡å¤šæ¬¡çªå˜çš„<code>candidate</code>ã€‚</p><p><code>fuzz()</code>æ–¹æ³•ä¸€å¼€å§‹è¿”å›çš„æ˜¯æœªç»çªå˜çš„ç§å­æ ·æœ¬ï¼Œå½“ç§å­æŒ‘é€‰å®Œæ¯•åï¼Œè¿”å›çªå˜æ ·æœ¬ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿æ¯æ¬¡è°ƒç”¨fuzz()ï¼Œå¾—åˆ°çš„è¾“å‡ºæ˜¯ä¸ä¸€æ ·çš„ã€‚</p><p>Mutational FuzzingæˆåŠŸçš„å…³é”®åœ¨äºå¼•å¯¼è¿™äº›çªå˜çš„æ–¹æ³•â€”å³ä¿ç•™é‚£äº›ç‰¹åˆ«æœ‰ä»·å€¼çš„æ ·æœ¬ã€‚</p><p>è¦†ç›–ç‡å¼•å¯¼</p><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¢«æµ‹ç¨‹åºæ¥å¼•å¯¼æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆã€‚ä»¥å‰æˆ‘ä»¬åªæ˜¯æ”¶é›†ç¨‹åºæ‰§è¡ŒæˆåŠŸæˆ–è€…å¤±è´¥çš„ä¿¡æ¯ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥æ”¶é›†å¤šç‚¹ä¿¡æ¯ï¼Œæ¯”å¦‚è¿è¡Œæ—¶ä»£ç è¦†ç›–ç‡ã€‚</p><p>åˆ©ç”¨è¦†ç›–ç‡å¼•å¯¼å˜å¼‚çš„Fuzzingï¼Œæœ€æˆåŠŸçš„å®è·µæ˜¯<a href="http://lcamtuf.coredump.cx/afl/">American fuzzy loop</a>ï¼Œå³AFLã€‚</p><p>AFLä¼šç”Ÿæˆâ€œæˆåŠŸâ€çš„æµ‹è¯•ç”¨ä¾‹ã€‚AFLè®¤ä¸ºï¼Œæ‰€è°“â€œæˆåŠŸâ€æ˜¯æŒ‡æ‰¾åˆ°äº†ä¸€æ¡æ–°çš„ç¨‹åºæ‰§è¡Œè·¯å¾„ã€‚AFLä¸æ–­åœ°çªå˜æ–°è·¯å¾„çš„è¾“å…¥ï¼Œå¦‚æœäº§ç”Ÿäº†æ–°çš„è·¯å¾„ï¼Œè¾“å…¥ä¼šä¿ç•™ä¸‹æ¥ã€‚</p><p>ä¸ºäº†è·å¾—ç¨‹åºè¿è¡Œæ—¶çš„è¦†ç›–ç‡ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°å®šä¹‰Runnerã€‚FunctionRunnerç±»è´Ÿè´£åŒ…è£…ä¸€ä¸ªè¢«æµ‹å‡½æ•°ã€‚</p><pre><code class="lang-py">class FunctionRunner(Runner):    def __init__(self, function):        &quot;&quot;&quot;Initialize.  `function` is a function to be executed&quot;&quot;&quot;        self.function = function    def run_function(self, inp):        return self.function(inp)    def run(self, inp):        try:            result = self.run_function(inp)            outcome = self.PASS        except Exception:            result = None            outcome = self.FAIL        return result, outcome</code></pre><p>è€ŒFunctionCoverageRunneråœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ äº†è¦†ç›–ç‡è®¡ç®—æ¨¡å—<code>Coverage</code>ã€‚</p><pre><code class="lang-py">class FunctionCoverageRunner(FunctionRunner):    def run_function(self, inp):        with Coverage() as cov:            try:                result = super().run_function(inp)            except Exception as exc:                self._coverage = cov.coverage()                raise exc        self._coverage = cov.coverage()        return result    def coverage(self):        return self._coverage</code></pre><p>ä¸‹é¢æ”¹å†™Fuzzerç±»ã€‚</p><pre><code class="lang-py">class MutationCoverageFuzzer(MutationFuzzer):    def reset(self):        super().reset()        self.coverages_seen = set()        # Now empty; we fill this with seed in the first fuzz runs        self.population = []    def run(self, runner):        &quot;&quot;&quot;Run function(inp) while tracking coverage.           If we reach new coverage,           add inp to population and its coverage to population_coverage        &quot;&quot;&quot;        result, outcome = super().run(runner)        new_coverage = frozenset(runner.coverage())        if outcome == Runner.PASS and new_coverage not in self.coverages_seen:            # We have new coverage            self.population.append(self.inp)            self.coverages_seen.add(new_coverage)        return result</code></pre><p><code>MutationCoverageFuzzer</code>å†…éƒ¨ä¿å­˜æµ‹è¯•ç”¨ä¾‹é˜Ÿåˆ—<code>population</code>å’Œè¦†ç›–ç‡é˜Ÿåˆ—<code>coverages_seen</code>ã€‚å¦‚æœfuzzçš„inputäº§ç”Ÿäº†æ–°çš„coverageï¼Œåˆ™å°†è¯¥inputæ·»åŠ åˆ°populationä¸­ï¼Œå¹¶å°†è¯¥coverageæ·»åŠ åˆ°coverage_seenä¸­ã€‚</p><p>ç”±æ­¤ï¼Œæˆ‘ä»¬å¾—åˆ°çš„populationä¸­çš„æ¯ä¸ªinputéƒ½èƒ½å¤Ÿä½¿å¾—ç¨‹åºäº§ç”Ÿä¸åŒçš„coverageï¼Œè¿™èƒŒåå¯èƒ½æ˜¯ç¨‹åºçš„ä¸åŒæ‰§è¡Œè·¯å¾„ï¼Œä¹Ÿå°±å¢åŠ äº†inputsçš„å¤šæ ·æ€§ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fuzzing</tag>
      
      <tag>Testing</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘Fuzzingå­¦ä¹ ç¬”è®°1â€”â€”è®¤è¯†Fuzzingçš„åŸºæœ¬å•å…ƒ</title>
    <link href="/2020/08/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01%E2%80%94%E2%80%94%E8%AE%A4%E8%AF%86Fuzzing%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8D%95%E5%85%83/"/>
    <url>/2020/08/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01%E2%80%94%E2%80%94%E8%AE%A4%E8%AF%86Fuzzing%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8D%95%E5%85%83/</url>
    
    <content type="html"><![CDATA[<p>Fuzzingåˆç§°æ¨¡ç³Šæµ‹è¯•ã€‚<br><!--more---></p><p><a href="https://www.fuzzingbook.org/html/Fuzzer.html">https://www.fuzzingbook.org/html/Fuzzer.html</a></p><h2 id="Fuzzingæµ‹è¯•æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Fuzzingæµ‹è¯•æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Fuzzingæµ‹è¯•æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Fuzzingæµ‹è¯•æ˜¯ä»€ä¹ˆï¼Ÿ</h2><blockquote><p>Create random inputs, and see if they break things.</p></blockquote><p>è¯´å¾—ç®€å•ã€çº¯ç²¹ç‚¹ï¼ŒFuzzingæ˜¯ä¸€ç§è½¯ä»¶æµ‹è¯•æ–¹æ³•ï¼Œé€šè¿‡ä¸æ–­ç”Ÿæˆä¸åŒçš„è¾“å…¥ï¼Œä½¿è¢«æµ‹ç¨‹åºå´©æºƒã€å‡ºé”™ï¼Œä»¥æ­¤æ”¹è¿›ç¨‹åºæœ¬èº«çš„è½¯ä»¶æµ‹è¯•æ–¹æ³•ã€‚ç”±äºFuzzingçš„æ ¸å¿ƒåœ¨äºç”Ÿæˆè½¯ä»¶æµ‹è¯•ç”¨ä¾‹ï¼Œå› æ­¤è¿™ç§æ–¹æ³•åˆè¢«ç§°ä¸º<strong>ç”Ÿæˆè½¯ä»¶æµ‹è¯•</strong>ã€‚</p><h2 id="æ„å»ºç¬¬ä¸€ä¸ªfuzzer"><a href="#æ„å»ºç¬¬ä¸€ä¸ªfuzzer" class="headerlink" title="æ„å»ºç¬¬ä¸€ä¸ªfuzzer"></a>æ„å»ºç¬¬ä¸€ä¸ªfuzzer</h2><pre><code class="lang-py">import randomdef fuzzer(max_length=100, char_start=32, char_range=32):    &quot;&quot;&quot;A string of up to `max_length` characters       in the range [`char_start`, `char_start` + `char_range`]&quot;&quot;&quot;    string_length = random.randrange(0, max_length + 1)    out = &quot;&quot;    for i in range(0, string_length):        out += chr(random.randrange(char_start, char_start + char_range))    return outfuzzer()4$)&gt;(,-&amp;!$25;&gt;6=27= 5)9?300(.466&amp;(&#39;$*,,1:8&#39; ,$/99&gt;&#39;*=(</code></pre><p>æ­¤fuzzerçš„ä½œç”¨æ˜¯ç”Ÿæˆä¸€å †éšæœºå­—ç¬¦ã€‚è¦æƒ³åªç”Ÿæˆ26ä¸ªå­—æ¯ï¼Œé‚£ä¹ˆ</p><pre><code class="lang-py">fuzzer(100, ord(&#39;a&#39;), 26)ueffzgwltwmspvmowihhtjmgsixofnvntnqmr</code></pre><h2 id="Fuzzingå…³é”®çš„ä¸¤ä¸ªéƒ¨ä»¶ï¼š"><a href="#Fuzzingå…³é”®çš„ä¸¤ä¸ªéƒ¨ä»¶ï¼š" class="headerlink" title="Fuzzingå…³é”®çš„ä¸¤ä¸ªéƒ¨ä»¶ï¼š"></a>Fuzzingå…³é”®çš„ä¸¤ä¸ªéƒ¨ä»¶ï¼š</h2><h3 id="Fuzzerç±»"><a href="#Fuzzerç±»" class="headerlink" title="Fuzzerç±»"></a>Fuzzerç±»</h3><p><code>Fuzzer</code>ï¼Œæ˜¯æ‰€æœ‰<code>fuzzer</code>çš„åŸºç±»ï¼Œ<code>RandomFuzzer</code> æ˜¯å…¶ç®€å•å®ç°ã€‚<code>Fuzzer</code> çš„<code>fuzz()</code>æ¥å£è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²å†…å®¹æ˜¯æ ¹æ®ä¸åŒå®ç°é€»è¾‘è€Œæ„é€ å‡ºæ¥çš„ã€‚</p><p>æ¯”å¦‚Fuzzerçš„å®ç°RandomFuzzerï¼Œå…¶<code>fuzz()</code>å°±æ˜¯éšæœºç”Ÿæˆçš„å­—ç¬¦ä¸²ã€‚</p><pre><code class="lang-py">&gt;&gt;&gt; random_fuzzer = RandomFuzzer(min_length=10, max_length=20, char_start=65, char_range=26)&gt;&gt;&gt; random_fuzzer.fuzz()&#39;XGZVDDPZOOW&#39;</code></pre><p>Fuzzerçš„run()æ¥å£è´Ÿè´£è¿è¡Œä¸€ä¸ªRunnerå¯¹è±¡ã€‚</p><p>ä¸‹é¢æ˜¯Fuzzerçš„ä»£ç æ¶æ„ï¼š</p><pre><code class="lang-py">class Fuzzer(object):    def __init__(self):        pass    def fuzz(self):        &quot;&quot;&quot;Return fuzz input&quot;&quot;&quot;        return &quot;&quot;    def run(self, runner=Runner()):        &quot;&quot;&quot;Run `runner` with fuzz input&quot;&quot;&quot;        return runner.run(self.fuzz())    def runs(self, runner=PrintRunner(), trials=10):        &quot;&quot;&quot;Run `runner` with fuzz input, `trials` times&quot;&quot;&quot;        # Note: the list comprehension below does not invoke self.run() for subclasses        # return [self.run(runner) for i in range(trials)]        outcomes = []        for i in range(trials):            outcomes.append(self.run(runner))        return outcomes</code></pre><p>æ­¤æ—¶FuzzeråŸºç±»çš„fuzz()æ¥å£è¿˜æ²¡æœ‰åŠŸèƒ½ã€‚æ´¾ç”Ÿç±»RandomFuzzeråˆ™å®ç°äº†fuzz()ï¼š</p><pre><code class="lang-py">class RandomFuzzer(Fuzzer):    def __init__(self, min_length=10, max_length=100,                 char_start=32, char_range=32):        &quot;&quot;&quot;Produce strings of `min_length` to `max_length` characters           in the range [`char_start`, `char_start` + `char_range`]&quot;&quot;&quot;        self.min_length = min_length        self.max_length = max_length        self.char_start = char_start        self.char_range = char_range    def fuzz(self):        string_length = random.randrange(self.min_length, self.max_length + 1)        out = &quot;&quot;        for i in range(0, string_length):            out += chr(random.randrange(self.char_start,                                        self.char_start + self.char_range))        return out</code></pre><p>æœ‰äº†RandomFuzzerï¼Œæˆ‘ä»¬å¯ä»¥ç”Ÿæˆä¸€äº›éšæœºçš„å­—ç¬¦ä¸²äº†ã€‚</p><pre><code class="lang-py">random_fuzzer = RandomFuzzer(min_length=20, max_length=20)for i in range(10):    print(random_fuzzer.fuzz())&#39;&gt;23&gt;33)(&amp;&quot;09.377.*3*+:5 ? (?1$4&lt;&gt;!?3&gt;.&#39;4+3/(3 (0%!&gt;!(+9%,#$/51$2964&gt;;)2417&lt;9&quot;2&amp;907.. !7:&amp;--&quot;=$7&#39;,7*(5=5&#39;.!*+&amp;&gt;&quot;)6%9)=,/?:&amp;5) &quot;;.0!=6&gt;3+&gt;)=,6&amp;,?:!#2))- ?:)=63&#39;-,)9#839%)?&amp;(0&lt;6(&quot;*;)4?!(49+8=-&#39;&amp;499%?&lt; &#39;</code></pre><h3 id="Runnerç±»"><a href="#Runnerç±»" class="headerlink" title="Runnerç±»"></a>Runnerç±»</h3><p><code>Runner</code>ï¼Œæ˜¯æ‰€æœ‰å¾…æµ‹ç¨‹åºçš„åŸºç±»ã€‚ä¸€ä¸ªFuzzer ä¸ä¸€ä¸ªRunneræ­é…ã€‚</p><p>Runnerç±»å«æœ‰run(input)æ¥å£ï¼Œè´Ÿè´£æ¥æ”¶inputå¹¶æ‰§è¡Œï¼Œè¿”å› (result, outcome)ï¼Œresultæ˜¯Runneråœ¨è¿è¡Œæ—¶çš„ä¿¡æ¯å’Œç»†èŠ‚ï¼Œè€Œoutcomä»£è¡¨ç€è¿™æ¬¡è¿è¡Œçš„ç»“æœã€‚</p><p>è¿è¡Œç»“æœä¸ºæšä¸¾å¯¹è±¡ outcomeï¼Œå«ä¹‰ä¸ºç¨‹åºè¿è¡Œç»“æœï¼Œæœ‰(PASS, FAIL, or UNRESOLVED)ä¸‰ç§å¯èƒ½ã€‚</p><ul><li>Runner.PASSï¼šæµ‹è¯•é€šè¿‡ï¼Œrun()è¾“å‡ºæ­£ç¡®ã€‚</li><li>Runner.FAILï¼šæµ‹è¯•å¤±è´¥ï¼Œç»“æœé”™è¯¯ã€‚</li><li>Runner.UNRESOLVEDï¼šæ²¡æœ‰è¾“å‡ºï¼Œè¿™ä¸€èˆ¬ä»£è¡¨runneræ— æ³•åº”å¯¹è¾“å…¥è€Œå´©æºƒã€‚</li></ul><p>Runnerçš„å¤§ä½“æ¶æ„å¦‚ä¸‹ï¼š</p><pre><code class="lang-py">class Runner(object):    # Test outcomes    PASS = &quot;PASS&quot;    FAIL = &quot;FAIL&quot;    UNRESOLVED = &quot;UNRESOLVED&quot;    def __init__(self):        &quot;&quot;&quot;Initialize&quot;&quot;&quot;        pass    def run(self, inp):        &quot;&quot;&quot;Run the runner with the given input&quot;&quot;&quot;        return (inp, Runner.UNRESOLVED)</code></pre><p>æƒ³è¦å®ç°å…¶ä»–Runnerï¼Œåªéœ€ç»§æ‰¿Runnerå³å¯ã€‚</p><pre><code class="lang-py">class PrintRunner(Runner):    def run(self, inp):        &quot;&quot;&quot;Print the given input&quot;&quot;&quot;        print(inp)        return (inp, Runner.UNRESOLVED)</code></pre><pre><code>p = PrintRunner()(result, outcome) = p.run(&quot;Some input&quot;)Some input</code></pre><p>å¯¹äºPrintRunnerï¼Œæˆ‘ä»¬æ— æ³•éªŒè¯å…¶ç»“æœï¼Œå› æ­¤é€šé€šè¿”å›UNRESOLVEDã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªRunnerçš„æ´¾ç”Ÿç±»ProgramRunnerçš„ä»£ç ï¼Œæ­¤æ¶æ„ä»£è¡¨äº†å¤§å¤šæ•°ç¨‹åºã€‚</p><pre><code class="lang-py">class ProgramRunner(Runner):    def __init__(self, program):        &quot;&quot;&quot;Initialize.  `program` is a program spec as passed to `subprocess.run()`&quot;&quot;&quot;        self.program = program    def run_process(self, inp=&quot;&quot;):        &quot;&quot;&quot;Run the program with `inp` as input.  Return result of `subprocess.run()`.&quot;&quot;&quot;        return subprocess.run(self.program,                              input=inp,                              stdout=subprocess.PIPE,                              stderr=subprocess.PIPE,                              universal_newlines=True)    def run(self, inp=&quot;&quot;):        &quot;&quot;&quot;Run the program with `inp` as input.  Return test outcome based on result of `subprocess.run()`.&quot;&quot;&quot;        result = self.run_process(inp)        if result.returncode == 0:            outcome = self.PASS        elif result.returncode &lt; 0:            outcome = self.FAIL        else:            outcome = self.UNRESOLVED        return (result, outcome)</code></pre><h2 id="Fuzzing-å®ä¾‹"><a href="#Fuzzing-å®ä¾‹" class="headerlink" title="Fuzzing å®ä¾‹"></a>Fuzzing å®ä¾‹</h2><pre><code class="lang-py">cat = ProgramRunner(program=&quot;cat&quot;)cat.run(&quot;hello&quot;)random_fuzzer = RandomFuzzer(min_length=20, max_length=20)random_fuzzer.runs(cat, 10)[(CompletedProcess(args=&#39;cat&#39;, returncode=0, stdout=&#39;3976%%&amp;+%6=(1)3&amp;3:&lt;9&#39;, stderr=&#39;&#39;),  &#39;PASS&#39;), (CompletedProcess(args=&#39;cat&#39;, returncode=0, stdout=&#39;33$#42$ 11=*%$20=&lt;.-&#39;, stderr=&#39;&#39;),  &#39;PASS&#39;), (CompletedProcess(args=&#39;cat&#39;, returncode=0, stdout=&#39;&quot;?&lt;\&#39;#8 &lt;/:*%9.--\&#39;97!&#39;, stderr=&#39;&#39;),  &#39;PASS&#39;), (CompletedProcess(args=&#39;cat&#39;, returncode=0, stdout=&quot;/0-#(03/!#60&#39;+6&gt;&amp;&amp;72&quot;, stderr=&#39;&#39;),  &#39;PASS&#39;), (CompletedProcess(args=&#39;cat&#39;, returncode=0, stdout=&quot;=,+:,6&#39;5:950+&gt;&lt;3(*()&quot;, stderr=&#39;&#39;),  &#39;PASS&#39;), (CompletedProcess(args=&#39;cat&#39;, returncode=0, stdout=&quot; 379+0?&#39;%3137=2:4605&quot;, stderr=&#39;&#39;),  &#39;PASS&#39;), (CompletedProcess(args=&#39;cat&#39;, returncode=0, stdout=&quot;02&gt;!$&lt;/&#39;*81.#&lt;/22&gt;+:&quot;, stderr=&#39;&#39;),  &#39;PASS&#39;), (CompletedProcess(args=&#39;cat&#39;, returncode=0, stdout=&quot;=-&lt;&#39;3-#88*%&amp;*9&lt; +1&amp;&amp;&quot;, stderr=&#39;&#39;),  &#39;PASS&#39;), (CompletedProcess(args=&#39;cat&#39;, returncode=0, stdout=&#39;2;;0=3&amp;6=8&amp;30&amp;&lt;-;?*;&#39;, stderr=&#39;&#39;),  &#39;PASS&#39;), (CompletedProcess(args=&#39;cat&#39;, returncode=0, stdout=&#39;/#05=*3($&gt;::#7!0=12+&#39;, stderr=&#39;&#39;),  &#39;PASS&#39;)]</code></pre>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fuzzing</tag>
      
      <tag>Testing</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç«èµ›æ‰“å¡ã€‘leetcodeæ‰“å¡ï¼šåˆ†æ²»ç®—æ³•</title>
    <link href="/2020/08/19/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91leetcode%E6%89%93%E5%8D%A1%EF%BC%9A%E5%88%86%E6%B2%BB%E7%AE%97%E6%B3%95/"/>
    <url>/2020/08/19/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91leetcode%E6%89%93%E5%8D%A1%EF%BC%9A%E5%88%86%E6%B2%BB%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>è§å¤šäº†ä¼˜ç§€çš„æ–‡ç« ï¼Œå†å†™åšå®¢çš„æ—¶å€™å°±ä¼šæ„Ÿå¹è‡ªå·±çš„å­¦è¯†æµ…è–„ã€‚<br><!--more---></p><h2 id="leetcode-50-Pow-x-n"><a href="#leetcode-50-Pow-x-n" class="headerlink" title="leetcode 50 Pow(x,n)"></a>leetcode 50 Pow(x,n)</h2><p><strong>é¢˜ç›®æè¿°</strong></p><p>å®ç° pow(x, n) ï¼Œå³è®¡ç®— x çš„ n æ¬¡å¹‚å‡½æ•°ã€‚</p><p><strong>ç®—æ³•æè¿°</strong>ï¼š</p><p>Powç®—æ³•æœ‰å¿«é€Ÿå¹‚å®ç°æ–¹æ³•ã€‚</p><p>å¿«é€Ÿå¹‚ï¼ŒäºŒè¿›åˆ¶å–å¹‚ï¼ˆBinary Exponentiationï¼Œä¹Ÿç§°å¹³æ–¹æ³•ï¼‰ï¼Œæ˜¯ä¸€ä¸ªåœ¨ $O(\log(n))$ çš„æ—¶é—´å†…è®¡ç®— $a^n$ çš„å°æŠ€å·§ï¼Œè€Œæš´åŠ›çš„è®¡ç®—éœ€è¦ $O(n)$ çš„æ—¶é—´ã€‚è€Œè¿™ä¸ªæŠ€å·§ä¹Ÿå¸¸å¸¸ç”¨åœ¨éè®¡ç®—çš„åœºæ™¯ï¼Œå› ä¸ºå®ƒå¯ä»¥åº”ç”¨åœ¨ä»»ä½•å…·æœ‰ç»“åˆå¾‹çš„è¿ç®—ä¸­ã€‚å…¶ä¸­æ˜¾ç„¶çš„æ˜¯å®ƒå¯ä»¥åº”ç”¨äºæ¨¡æ„ä¹‰ä¸‹å–å¹‚ã€çŸ©é˜µå¹‚ç­‰è¿ç®—ã€‚</p><p>è®¡ç®—açš„næ¬¡æ–¹è¡¨ç¤ºå°†nä¸ªaè¿ä¹˜åœ¨ä¸€èµ·ã€‚ç„¶è€Œå½“aå’Œnå¤ªå¤§çš„æ—¶å€™ï¼Œè¿™ç§æ–¹æ³•å°±ä¸å¤ªé€‚ç”¨äº†ã€‚</p><p>ä¸è¿‡æˆ‘ä»¬çŸ¥é“ï¼Œ$a^{b+c}=a^b\cdot a^c$ï¼Œ$a^{2b}=(a^b)^2$ã€‚</p><p>å¿«é€Ÿå¹‚çš„æƒ³æ³•æ˜¯ï¼Œæˆ‘ä»¬å°†å–å¹‚çš„ä»»åŠ¡æŒ‰ç…§æŒ‡æ•°çš„ <strong>äºŒè¿›åˆ¶è¡¨ç¤º</strong> æ¥åˆ†å‰²æˆæ›´å°çš„ä»»åŠ¡ã€‚</p><p>æˆ‘ä»¬å°† n è¡¨ç¤ºä¸º 2 è¿›åˆ¶ï¼Œä¸¾ä¸€ä¸ªä¾‹å­ï¼š</p><p>$3^{13}=3^{(1101)_2}=3^8\cdot 3^4\cdot 3^1$</p><p>å› æ­¤åªéœ€æŠŠnè½¬åŒ–æˆäºŒè¿›åˆ¶ï¼Œç„¶ååˆ†è§£æˆå¯¹åº”çš„æƒå€¼å³å¯ç®€åŒ–è®¡ç®—ã€‚</p><p>ä¸ºä»€ä¹ˆè¿™æ ·èƒ½ç®€åŒ–è®¡ç®—ï¼Ÿå› ä¸ºnçš„äºŒè¿›åˆ¶å½¢å¼é•¿åº¦æœ€é•¿åªæœ‰$O(\log(n))$ã€‚åŸé—®é¢˜è¢«æˆ‘ä»¬è½¬åŒ–æˆäº†å½¢å¼ç›¸åŒçš„å­é—®é¢˜çš„ä¹˜ç§¯ã€‚</p><p><strong>å®ç°</strong>ï¼š</p><pre><code class="lang-cpp">class Solution &#123;public:    double myPow(double x, int n) &#123;        if (n &lt; 0) &#123;            return 1 / myPow(x, -n);        &#125;        double base = x;        double res = 1.0;        for (; n != 0; n &gt;&gt;= 1) &#123;            if (n &amp; 0x1) res *= base;            base *= base;        &#125;        return res;    &#125;&#125;;</code></pre><p>ä¸Šé¢çš„ä»£ç åœ¨å¾ªç¯çš„è¿‡ç¨‹ä¸­å°†äºŒè¿›åˆ¶ä½ä¸º 1 æ—¶å¯¹åº”çš„å¹‚ç´¯ä¹˜åˆ°ç­”æ¡ˆä¸­ã€‚</p><blockquote><p><a href="https://oi-wiki.org/">https://oi-wiki.org/</a></p></blockquote><h2 id="leetcode-53-æœ€å¤§å­åºå’Œ"><a href="#leetcode-53-æœ€å¤§å­åºå’Œ" class="headerlink" title="leetcode 53 æœ€å¤§å­åºå’Œ"></a>leetcode 53 æœ€å¤§å­åºå’Œ</h2><p><strong>é¢˜ç›®æè¿°</strong></p><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾åˆ°ä¸€ä¸ªå…·æœ‰æœ€å¤§å’Œçš„è¿ç»­å­æ•°ç»„ï¼ˆå­æ•°ç»„æœ€å°‘åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œè¿”å›å…¶æœ€å¤§å’Œã€‚</p><p><strong>ç®—æ³•æè¿°</strong>ï¼š</p><p>ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œä¸‹æ ‡ä»startåˆ°endï¼Œå³[start,end]ã€‚è¦æ±‚è¿™å…¶ä¸­çš„æœ€å¤§è¿ç»­å­æ•°ç»„ä¹‹å’Œã€‚</p><p>åˆ†è§£æˆå¦‚ä¸‹å­é—®é¢˜ï¼šæŸ¥æ‰¾[start,mid]ä¸­çš„æœ€å¤§è¿ç»­å­æ•°ç»„ä¹‹å’Œï¼ŒæŸ¥æ‰¾[mid,end]ä¸­çš„æœ€å¤§è¿ç»­å­æ•°ç»„ä¹‹å’Œï¼Œæœ€åæ¯”è¾ƒäºŒè€…å“ªä¸ªæ›´å¤§ã€‚</p><p>ä½†æ˜¯æœ€å¤§è¿ç»­å­æ•°ç»„å¯èƒ½æ˜¯è·¨è¶Šmidçš„æ•°ç»„ï¼Œæ‰€ä»¥é€’å½’çš„æ—¶å€™è¦é¢å¤–è®¡ç®—midåŠå…¶å‘¨å›´å…ƒç´ ä¹‹å’Œçš„æœ€å¤§å€¼ï¼Œç”¨æ­¤å€¼ä¸å‰é¢ä¸¤ä¸ªåŒºé—´çš„å€¼æ¯”è¾ƒã€‚</p><p><strong>å®ç°</strong></p><pre><code class="lang-cpp">class Solution &#123;public:    int maxSubArray(vector&lt;int&gt;&amp; nums) &#123;        return find(nums, 0, nums.size()-1);    &#125;    int find(vector&lt;int&gt;&amp; nums, int start, int end) &#123;        if (start == end) return nums[start];        if (start &gt; end) return INT_MIN;        int mid = start + (end - start) / 2;        int left_max = 0, right_max = 0, ml = 0, mr = 0;        left_max = find(nums, start, mid-1);        right_max = find(nums, mid+1, end);        for (int i = mid-1, sum = 0; i &gt;= start; --i) &#123;            sum += nums[i];            if (sum &gt; ml) ml = sum;        &#125;        for (int i = mid+1, sum = 0; i &lt;= end; ++i) &#123;            sum += nums[i];            if (sum &gt; mr) mr = sum;        &#125;        return max(max(left_max, right_max), ml + mr + nums[mid]);    &#125;&#125;;</code></pre><p>åœ¨ä»£ç ä¸­ï¼Œ<code>left_max</code>ä¸º[start,mid)åŒºé—´å†…çš„æœ€å¤§è¿ç»­å­æ•°ç»„å’Œï¼Œ<code>right_max</code>ä¸º(mid,end]åŒºé—´å†…çš„æœ€å¤§è¿ç»­å­æ•°ç»„å’Œã€‚</p><p>è€Œè·¨è¶Šä¸­å¿ƒmidçš„è®¡ç®—æ–¹æ³•ï¼Œåˆ™æ˜¯é€šè¿‡ä¸¤ä¸ªforå¾ªç¯ï¼Œä»midå¼€å§‹ä¸€ä¸ªå¾€å‰éå†å¾—åˆ°æœ€å¤§å€¼<code>ml</code>ï¼Œä¸€ä¸ªå¾€åéå†å¾—åˆ°<code>mr</code>ï¼Œæœ€åå¾—åˆ°<code>ml + mr + nums[mid]</code>å³å¯ã€‚</p><p>ç»“æœä¸ºä¸‰è€…çš„æœ€å¤§å€¼ã€‚</p><blockquote><p><a href="https://www.bilibili.com/video/BV19t411k7jR">https://www.bilibili.com/video/BV19t411k7jR</a></p></blockquote><h2 id="leetcode-169-å¤šæ•°å…ƒç´ "><a href="#leetcode-169-å¤šæ•°å…ƒç´ " class="headerlink" title="leetcode 169 å¤šæ•°å…ƒç´ "></a>leetcode 169 å¤šæ•°å…ƒç´ </h2><p><strong>é¢˜ç›®æè¿°</strong></p><p>ç»™å®šä¸€ä¸ªå¤§å°ä¸º n çš„æ•°ç»„ï¼Œæ‰¾åˆ°å…¶ä¸­çš„å¤šæ•°å…ƒç´ ã€‚å¤šæ•°å…ƒç´ æ˜¯æŒ‡åœ¨æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°å¤§äº âŒŠ n/2 âŒ‹ çš„å…ƒç´ ã€‚</p><p>ä½ å¯ä»¥å‡è®¾æ•°ç»„æ˜¯éç©ºçš„ï¼Œå¹¶ä¸”ç»™å®šçš„æ•°ç»„æ€»æ˜¯å­˜åœ¨å¤šæ•°å…ƒç´ ã€‚</p><p><strong>ç®—æ³•æè¿°</strong>ï¼š</p><p>å¦‚æœæ•° a æ˜¯æ•°ç»„ nums çš„ä¼—æ•°ï¼Œå¦‚æœæˆ‘ä»¬å°† nums åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œé‚£ä¹ˆ a å¿…å®šæ˜¯è‡³å°‘ä¸€éƒ¨åˆ†çš„ä¼—æ•°ã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨åˆ†æ²»æ³•è§£å†³è¿™ä¸ªé—®é¢˜ï¼šå°†æ•°ç»„åˆ†æˆå·¦å³ä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«æ±‚å‡ºå·¦åŠéƒ¨åˆ†çš„ä¼—æ•° a1 ä»¥åŠå³åŠéƒ¨åˆ†çš„ä¼—æ•° a2ï¼Œéšååœ¨ a1 å’Œ a2 ä¸­é€‰å‡ºæ­£ç¡®çš„ä¼—æ•°ã€‚</p><p><strong>å®ç°</strong></p><p>éå†æ³•ï¼š</p><pre><code class="lang-cpp">class Solution &#123;public:    int majorityElement(vector&lt;int&gt;&amp; nums) &#123;        int res = -1;        int count = 0;        for (auto c : nums) &#123;            if (!count) &#123;                res = c;            &#125;            if (res == c) &#123;                ++count;            &#125; else &#123;                --count;            &#125;        &#125;        return res;    &#125;&#125;;</code></pre><p>åˆ†æ²»æ³•ï¼š</p><pre><code class="lang-cpp">class Solution &#123;public:    int majorityElement(vector&lt;int&gt;&amp; nums) &#123;        return majorityElement_inrange(nums, 0, nums.size()-1);    &#125;private:    int majorityElement_inrange(vector&lt;int&gt;&amp; nums, int lo, int hi) &#123;        if (lo == hi) return nums[lo];        if (lo &gt; hi) return -1;        int mid = lo + (hi - lo) / 2;        int left_maj = majorityElement_inrange(nums, lo, mid);        int right_maj = majorityElement_inrange(nums, mid+1, hi);        return (count_in_range(nums, lo, hi, left_maj) &gt; count_in_range(nums, lo, hi, right_maj)) ? left_maj : right_maj;    &#125;    int count_in_range(vector&lt;int&gt;&amp; nums, int lo, int hi, int val) &#123;        int count = 0;        for (int i = lo; i &lt;= hi; ++i) &#123;            if (nums[i] == val) count++;        &#125;        return count;    &#125;&#125;;</code></pre><blockquote><p><a href="https://leetcode-cn.com/problems/majority-element/solution/duo-shu-yuan-su-by-leetcode-solution/">https://leetcode-cn.com/problems/majority-element/solution/duo-shu-yuan-su-by-leetcode-solution/</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>algorithm</tag>
      
      <tag>leetcode</tag>
      
      <tag>Datawhale</tag>
      
      <tag>divide-and-conquer</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘ä½¿ç”¨tf.dataå¯¹é¢„å¤„ç†è¿‡ç¨‹ä¼˜åŒ–</title>
    <link href="/2020/08/15/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E4%BD%BF%E7%94%A8tf-data%E5%AF%B9%E9%A2%84%E5%A4%84%E7%90%86%E8%BF%87%E7%A8%8B%E4%BC%98%E5%8C%96/"/>
    <url>/2020/08/15/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E4%BD%BF%E7%94%A8tf-data%E5%AF%B9%E9%A2%84%E5%A4%84%E7%90%86%E8%BF%87%E7%A8%8B%E4%BC%98%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡æ˜¯å…³äº <code>tf.data</code> ä»‹ç»çš„ç¬¬äºŒç¯‡ï¼Œä¸»è¦ä»‹ç»ä¸€äº›æ•°æ®é¢„å¤„ç†æ–¹é¢çš„ä¼˜åŒ–æ–¹æ³•ï¼Œè¯¸å¦‚å¹¶è¡ŒåŒ–é¢„å¤„ç†æ˜ å°„å‡½æ•°ã€ä½¿ç”¨ç¼“å­˜ç­‰ã€‚<br><!--more---></p><p>æ„å»ºä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹æ—¶ï¼Œç”±äºæ•°æ®é¢„å¤„ç†è¿‡ç¨‹ä¸èƒ½ä½¿ç”¨GPUè¿›è¡ŒåŠ é€Ÿï¼Œå› æ­¤æ ¼å¤–è€—æ—¶ã€‚èƒŒåçš„åŸå› å¯èƒ½æ˜¯CPUã€ç½‘ç»œæˆ–è€…ç¼“å­˜ç­‰å¤æ‚çš„å› ç´ ã€‚å› æ­¤è¦ç ”ç©¶å¦‚ä½•æå‡æ•°æ®é¢„å¤„ç†çš„æ•ˆç‡ï¼Œé¦–å…ˆéœ€è¦æ§åˆ¶å®éªŒçš„å˜é‡ã€‚æƒ³å®ç°è¿™ä¸€ç‚¹ï¼Œæ„é€ ä¸€ä¸ªè™šå‡çš„æ•°æ®é›†æ¯”è¾ƒå¯è¡Œã€‚</p><p>é€šè¿‡æ„å»ºä¸€ä¸ªè™šå‡çš„æ•°æ®é›†ï¼Œä»<code>tf.data.Dataset</code>ç»§æ‰¿çš„ç±»ï¼Œç§°ä¸º<code>ArtificialDataset</code>ã€‚è¯¥æ•°æ®é›†æ¨¡æ‹Ÿä¸‰ä»¶äº‹ï¼š</p><ol><li>ç”Ÿæˆ<code>num_samples</code>æ ·æœ¬ï¼ˆé»˜è®¤ä¸º3ï¼‰</li><li>åœ¨ç¬¬ä¸€ä¸ªæ¨¡æ‹Ÿæ‰“å¼€æ–‡ä»¶çš„é¡¹ç›®ä¹‹å‰ç¡çœ ä¸€æ®µæ—¶é—´</li><li>åœ¨äº§ç”Ÿæ¯ä¸ªé¡¹ç›®ä»¥æ¨¡æ‹Ÿä»æ–‡ä»¶è¯»å–æ•°æ®ä¹‹å‰å…ˆä¼‘çœ ä¸€æ®µæ—¶é—´</li></ol><pre><code class="lang-py">class ArtificialDataset(tf.data.Dataset):    def _generator(num_samples):        # Opening the file        time.sleep(0.03)        for sample_idx in range(num_samples):            # Reading data (line, record) from the file            time.sleep(0.015)            yield (sample_idx,)    def __new__(cls, num_samples=3):        return tf.data.Dataset.from_generator(            cls._generator,            output_types=tf.dtypes.int64,            output_shapes=(1,),            args=(num_samples,)        )</code></pre><p>æ„å»º <code>benchmark</code> ï¼Œé€šè¿‡æ¨¡æ‹Ÿè®­ç»ƒçš„æ–¹å¼ï¼Œè®¡ç®—è¯¥æ•°æ®é¢„å¤„ç†æ¨¡å¼çš„è€—æ—¶ï¼š</p><pre><code class="lang-py">def benchmark(dataset, num_epochs=2):    start_time = time.perf_counter()    for epoch_num in range(num_epochs):        for sample in dataset:            # Performing a training step            time.sleep(0.01)    tf.print(&quot;Execution time:&quot;, time.perf_counter() - start_time)</code></pre><p>æˆ‘ä»¬å…ˆæ¥ä¸åŠ ä»»ä½•ä¼˜åŒ–åœ°è¿è¡Œä¸€æ¬¡benchmarkï¼š</p><pre><code class="lang-py">benchmark(ArtificialDataset())Execution time: 0.33306735700000445</code></pre><p>æ­¤æ—¶æ¨¡å‹çš„æ‰§è¡Œæ—¶é—´å›¾å¦‚å›¾æ‰€ç¤ºï¼š<br><img src="https://www.tensorflow.org/guide/images/data_performance/naive.svg" alt="Naive"></p><p>æ—¶é—´æ¶ˆè€—æ˜¯è¿™æ ·çš„ï¼šå…ˆæ˜¯æ‰“å¼€æ–‡ä»¶ï¼Œç„¶åä»æ–‡ä»¶ä¸­è·å–æ•°æ®é¡¹ï¼Œç„¶åä½¿ç”¨æ•°æ®è¿›è¡Œè®­ç»ƒã€‚è¿™ç§æ‰§è¡Œæ–¹å¼ï¼Œå½“æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œæ¨¡å‹å°±ç©ºé—²ï¼›å½“æ¨¡å‹å¼€å§‹è®­ç»ƒï¼Œç®¡é“åˆç©ºé—²ä¸‹æ¥äº†ã€‚é¢„å¤„ç†å’Œè®­ç»ƒè¿™ä¸¤éƒ¨åˆ†æ˜æ˜¾å¯ä»¥é‡å ã€‚</p><p><code>tf.data</code> APIæä¾›äº†<code>tf.data.Dataset.prefetch</code>è½¬æ¢ã€‚å®ƒå¯ä»¥ç”¨äºå°†æ•°æ®ç”Ÿæˆæ—¶é—´ä¸æ•°æ®æ¶ˆè€—æ—¶é—´åˆ†å¼€ã€‚è½¬æ¢ä½¿ç”¨åå°çº¿ç¨‹å’Œå†…éƒ¨ç¼“å†²åŒºé¢„å–å…ƒç´ ã€‚è¦é¢„å–çš„å…ƒç´ æ•°é‡åº”ç­‰äºï¼ˆæˆ–å¯èƒ½å¤§äºï¼‰å•ä¸ªè®­ç»ƒæ­¥éª¤æ¶ˆè€—çš„æ‰¹æ¬¡æ•°é‡ã€‚å°†é¢„å–çš„å…ƒç´ æ•°é‡è®¾ç½®ä¸º<code>tf.data.experimental.AUTOTUNE</code> ï¼Œè¿™å°†æç¤º<code>tf.data</code>è¿è¡Œæ—¶åœ¨è¿è¡Œæ—¶åŠ¨æ€è°ƒæ•´å€¼ã€‚</p><pre><code class="lang-py">benchmark(    ArtificialDataset()    .prefetch(tf.data.experimental.AUTOTUNE))Execution time: 0.20504431599999862</code></pre><p><img src="https://www.tensorflow.org/guide/images/data_performance/prefetched.svg" alt="Prefetched"></p><p>æ—¶é—´æœ‰äº†æ˜æ˜¾ä¼˜åŒ–ï¼Œå› ä¸ºæ•°æ®çš„ç”Ÿäº§å’Œæ¶ˆè´¹æœ‰äº†äº›è®¸é‡å ã€‚</p><p>åœ¨å®é™…å·¥ä½œä¸­ï¼Œè¾“å…¥æ•°æ®å¯ä»¥è¿œç¨‹å­˜å‚¨åœ¨å…¶ä»–è®¡ç®—æœºä¸Šã€‚åœ¨æœ¬åœ°å’Œè¿œç¨‹å­˜å‚¨ä¹‹é—´å­˜åœ¨ä»¥ä¸‹å·®å¼‚ï¼š</p><ol><li>åˆ°è¾¾ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æ—¶é—´ï¼šä»è¿œç¨‹å­˜å‚¨è¯»å–æ–‡ä»¶çš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ‰€èŠ±è´¹çš„æ—¶é—´è¦æ¯”ä»æœ¬åœ°å­˜å‚¨ä¸­è¯»å–æ–‡ä»¶çš„æ—¶é—´é•¿å‡ ä¸ªæ•°é‡çº§ã€‚</li><li>è¯»å–ååé‡ï¼šè™½ç„¶è¿œç¨‹å­˜å‚¨é€šå¸¸æä¾›è¾ƒå¤§çš„èšåˆå¸¦å®½ï¼Œä½†æ˜¯è¯»å–å•ä¸ªæ–‡ä»¶å¯èƒ½åªèƒ½ä½¿ç”¨æ­¤å¸¦å®½çš„ä¸€å°éƒ¨åˆ†ã€‚</li></ol><p>æ­¤å¤–ï¼Œä¸€æ—¦å°†åŸå§‹å­—èŠ‚åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¯èƒ½è¿˜éœ€è¦å¯¹æ•°æ®è¿›è¡Œååºåˆ—åŒ–å’Œ/æˆ–è§£å¯†ï¼Œè¿™éœ€è¦è¿›è¡Œé¢å¤–çš„è®¡ç®—ã€‚ä¸ç®¡æ•°æ®æ˜¯æœ¬åœ°å­˜å‚¨è¿˜æ˜¯è¿œç¨‹å­˜å‚¨ï¼Œéƒ½å­˜åœ¨è¿™ç§å¼€é”€ï¼Œä½†æ˜¯<strong>å¦‚æœæ•°æ®æ²¡æœ‰æœ‰æ•ˆåœ°é¢„å–ï¼Œåˆ™åœ¨è¿œç¨‹æƒ…å†µä¸‹ä¼šæ›´ç³Ÿ</strong>ã€‚</p><p>å¯ä»¥ä½¿ç”¨<code>tf.data.Dataset.interleave</code>è½¬æ¢æ¥<strong>å¹¶è¡ŒåŒ–æ•°æ®åŠ è½½æ­¥éª¤</strong>ï¼Œ <code>cycle_length</code> è¡¨æ˜å¯ä»¥ä¸€èµ·å¤„ç†çš„æ•°æ®é›†æ•°é‡ï¼Œ <code>num_parallel_calls</code> åˆ™æ˜¯å¹¶è¡Œåº¦ã€‚</p><pre><code class="lang-py">benchmark(    tf.data.Dataset.range(2)    .interleave(        ArtificialDataset,        num_parallel_calls=tf.data.experimental.AUTOTUNE    )Execution time: 0.18243273299958673</code></pre><p><img src="https://www.tensorflow.org/guide/images/data_performance/parallel_interleave.svg" alt="Parallel interleave"></p><p>è¯¥å›¾å¯ä»¥æ˜¾ç¤º<code>interleave</code>å˜æ¢çš„è¡Œä¸ºï¼Œä»ä¸¤ä¸ªå¯ç”¨çš„æ•°æ®é›†ä¸­è·å–æ ·æœ¬ã€‚è¿™æ¬¡ï¼Œä¸¤ä¸ªæ•°æ®é›†çš„è¯»å–å¹¶è¡Œè¿›è¡Œï¼Œä»è€Œå‡å°‘äº†å…¨å±€æ•°æ®å¤„ç†æ—¶é—´</p><h2 id="å¹¶è¡Œé¢„å¤„ç†æ“ä½œ"><a href="#å¹¶è¡Œé¢„å¤„ç†æ“ä½œ" class="headerlink" title="å¹¶è¡Œé¢„å¤„ç†æ“ä½œ"></a>å¹¶è¡Œé¢„å¤„ç†æ“ä½œ</h2><p>åœ¨å‡†å¤‡æ•°æ®æ—¶ï¼Œå¯èƒ½éœ€è¦å¯¹è¾“å…¥å…ƒç´ è¿›è¡Œé¢„å¤„ç†ã€‚å¯ä»¥ä½¿ç”¨<code>tf.data.Dataset.map(f)</code>è½¬æ¢ï¼Œå…¶å«ä¹‰ä¸ºå°†æŸä¸ªè½¬æ¢<code>f</code>ä½œç”¨äºæ•°æ®é›†<code>Dataset</code>ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚è¿™é‡Œæœ‰ä¸ªå¾ˆé‡è¦çš„å‰ææ¡ä»¶ï¼Œç”±äºè¾“å…¥å…ƒç´ å½¼æ­¤ç‹¬ç«‹ï¼Œå› æ­¤é¢„å¤„ç†å¯ä»¥è·¨å¤šä¸ªCPUå†…æ ¸å¹¶è¡ŒåŒ–ã€‚å› æ­¤<code>map</code>è½¬æ¢ä¹Ÿæä¾›<code>num_parallel_calls</code>å‚æ•°æ¥æŒ‡å®šå¹¶è¡Œåº¦ã€‚å…³äºå¹¶è¡Œåº¦çš„é€‰æ‹©ä¸Šï¼Œ<code>map</code>è½¬æ¢æ”¯æŒ<code>tf.data.experimental.AUTOTUNE</code>ï¼Œè€Œä¸å¿…äººå·¥å®šä¹‰ã€‚</p><p>é¦–å…ˆå®šä¹‰ä¼ªæ“ä½œï¼š</p><pre><code class="lang-py">def mapped_function(s):    # Do some hard pre-processing    tf.py_function(lambda: time.sleep(0.03), [], ())    return s</code></pre><p>æˆ‘ä»¬æ¥æµ‹è¯•ä¼ªæ“ä½œï¼Œæ­¤æ—¶æ²¡æœ‰ä»»ä½•å¹¶è¡Œä¼˜åŒ–ï¼š</p><pre><code class="lang-py">benchmark(    ArtificialDataset()    .map(mapped_function))Execution time: 0.4592052289999913</code></pre><p><img src="https://www.tensorflow.org/guide/images/data_performance/sequential_map.svg" alt="Sequential mapping"></p><p>ç°åœ¨ï¼Œä½¿ç”¨ç›¸åŒçš„é¢„å¤„ç†åŠŸèƒ½ï¼Œä½†å°†å…¶å¹¶è¡Œåº”ç”¨äºå¤šä¸ªæ ·æœ¬ã€‚</p><pre><code class="lang-py">benchmark(    ArtificialDataset()    .map(        mapped_function,        num_parallel_calls=tf.data.experimental.AUTOTUNE    ))Execution time: 0.3045882669994171</code></pre><p><img src="https://www.tensorflow.org/guide/images/data_performance/parallel_map.svg" alt="Parallel mapping"></p><p>å¯ä»¥åœ¨å›¾ä¸Šçœ‹åˆ°é¢„å¤„ç†æ­¥éª¤é‡å ï¼Œä»è€Œå‡å°‘äº†å•æ¬¡è¿­ä»£çš„æ€»æ—¶é—´ã€‚</p><p><code>tf.data.Dataset.cache</code>è½¬æ¢å¯ä»¥åœ¨å†…å­˜ä¸­æˆ–æœ¬åœ°å­˜å‚¨ä¸Šç¼“å­˜æ•°æ®é›†ã€‚è¿™æ ·å¯ä»¥é¿å…åœ¨æ¯ä¸ªepochæ‰§è¡ŒæŸäº›é‡å¤æ€§æ“ä½œï¼ˆä¾‹å¦‚æ‰“å¼€æ–‡ä»¶å’Œè¯»å–æ•°æ®ï¼‰ã€‚</p><pre><code class="lang-py">benchmark(    ArtificialDataset()    .map(  # Apply time consuming operations before cache        mapped_function    ).cache(    ),    5)Execution time: 0.3795637040002475</code></pre><p><img src="https://www.tensorflow.org/guide/images/data_performance/cached_dataset.svg" alt="Cached dataset"></p><p>ç¬¬ä¸€ä¸ªepochæ‰§è¡Œä¸€æ¬¡cacheä¹‹å‰çš„è½¬æ¢ï¼ˆä¾‹å¦‚æ–‡ä»¶æ‰“å¼€å’Œæ•°æ®è¯»å–ï¼‰ã€‚ä¸‹ä¸€ä¸ªepochå°†é‡ç”¨cacheè½¬æ¢æ‰€ç¼“å­˜çš„æ•°æ®ã€‚</p><p>è¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ª<code>map</code>å’Œ<code>cache</code>æ“ä½œè°å…ˆè°åçš„é—®é¢˜ã€‚æœ‰ä¸€ä¸ªåŸåˆ™ï¼Œå¦‚æœ<code>map</code>æ“ä½œå¾ˆå¤æ‚ã€æ˜‚è´µï¼Œé‚£ä¹ˆå…ˆ<code>map</code>å†<code>cache</code>ï¼Œä¸‹æ¬¡ä¸ç”¨<code>map</code>äº†ã€‚å¦‚æœ<code>cache</code>è¿‡å¤§è€Œæ— æ³•æ”¾å…¥ç¼“å†²åŒºï¼Œåˆ™å…ˆ<code>cache</code>å<code>map</code>ï¼Œæˆ–è€…è¯•å›¾é‡‡ç”¨ä¸€äº›æ•°æ®é¢„å¤„ç†æ–¹æ³•ä»¥å‡å°‘èµ„æºä½¿ç”¨ã€‚</p><h2 id="å‘é‡åŒ–æ•°æ®é¢„å¤„ç†æ“ä½œ"><a href="#å‘é‡åŒ–æ•°æ®é¢„å¤„ç†æ“ä½œ" class="headerlink" title="å‘é‡åŒ–æ•°æ®é¢„å¤„ç†æ“ä½œ"></a>å‘é‡åŒ–æ•°æ®é¢„å¤„ç†æ“ä½œ</h2><p>æ‰€è°“å‘é‡åŒ–ï¼Œå³ä½¿å¾—<code>mapping</code>æ“ä½œèƒ½å¤Ÿä¸€æ¬¡å¤„ç†ä¸€<code>batch</code>æ•°æ®ã€‚è¿™æ ·åšè‚¯å®šå¯ä»¥åŠ é€Ÿï¼Œå› ä¸ºé¿å…äº†ç¹æ‚çš„æ•°æ®è¯»å–æ—¶é—´ã€‚å¯¹ç”¨æˆ·å®šä¹‰çš„å‡½æ•°è¿›è¡Œå‘é‡åŒ–å¤„ç†ï¼Œå¹¶ä¸”å¯¹æ•°æ®é›†åº”ç”¨<code>batch</code>è½¬æ¢å†è¿›å…¥<code>mapping</code>ã€‚åœ¨æŸç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ªåšæ³•éå¸¸æœ‰ç”¨ã€‚</p><p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªæ•°æ®é›†æ“ä½œ<code>increment</code>ï¼Œè´Ÿè´£æŠŠæ¯ä¸ªå…ƒç´ çš„å€¼+1ã€‚å¦å¤–ä¹‹å‰çš„ä¾‹å­é‡Œé¢ä½¿ç”¨äº†æ¯«ç§’çº§åˆ«çš„<code>sleep</code>æ“ä½œï¼Œè¿™ä¼šæ©ç›–æˆ‘ä»¬ä¼˜åŒ–çš„ç»“æœã€‚è¿™æ¬¡æˆ‘ä»¬æŠŠå®ƒæ‹¿æ‰ã€‚</p><p>ä¸‹é¢æ˜¯æœªç»å‘é‡åŒ–ä¼˜åŒ–çš„<code>increment</code>æ“ä½œè€—æ—¶ï¼š</p><pre><code class="lang-py">fast_dataset = tf.data.Dataset.range(10000)def fast_benchmark(dataset, num_epochs=2):    start_time = time.perf_counter()    for _ in tf.data.Dataset.range(num_epochs):        for _ in dataset:            pass    tf.print(&quot;Execution time:&quot;, time.perf_counter() - start_time)def increment(x):    return x+1fast_benchmark(    fast_dataset    # Apply function one item at a time    .map(increment)    # Batch    .batch(256))Execution time: 0.7625284370005829</code></pre><p><img src="https://www.tensorflow.org/guide/images/data_performance/scalar_map.svg" alt="Scalar map"></p><p>ä¸ä¹‹å¯¹æ¯”ï¼Œç»è¿‡å‘é‡åŒ–åï¼Œè€—æ—¶æ˜æ˜¾å‡å°‘ï¼š</p><pre><code class="lang-py">fast_benchmark(    fast_dataset    .batch(256)    # Apply function on a batch of items    # The tf.Tensor.__add__ method already handle batches    .map(increment))Execution time: 0.04735958700075571</code></pre><p><img src="https://www.tensorflow.org/guide/images/data_performance/vectorized_map.svg" alt="Vectorized map"></p><h2 id="å‡å°‘å†…å­˜å ç”¨"><a href="#å‡å°‘å†…å­˜å ç”¨" class="headerlink" title="å‡å°‘å†…å­˜å ç”¨"></a>å‡å°‘å†…å­˜å ç”¨</h2><p>è®¸å¤šè½¬æ¢ï¼ˆåŒ…æ‹¬interleave ï¼Œ prefetchå’Œshuffle ï¼‰å„è‡ªç»´æŠ¤å†…éƒ¨ç¼“å†²åŒºã€‚å¦‚æœä¼ é€’ç»™mapè½¬æ¢çš„ç”¨æˆ·å®šä¹‰å‡½æ•°æ›´æ”¹äº†å…ƒç´ çš„å¤§å°ï¼Œåˆ™æ˜ å°„è½¬æ¢çš„é¡ºåºä»¥åŠç¼“å†²å…ƒç´ çš„è½¬æ¢ä¼šå½±å“å†…å­˜ä½¿ç”¨ã€‚</p><p>é€šå¸¸ï¼Œæˆ‘ä»¬å»ºè®®é€‰æ‹©å¯¼è‡´å†…å­˜å ç”¨å‡å°‘çš„é¡ºåºï¼Œé™¤ééœ€è¦ä¸åŒçš„é¡ºåºæ‰èƒ½æé«˜æ€§èƒ½ã€‚</p><p>å¯¹äºç¼“å­˜ï¼Œæˆ‘ä»¬å»ºè®®é™¤éè½¬æ¢åçš„æ•°æ®éš¾ä»¥ä¿å­˜åˆ°ç¼“å†²åŒºï¼Œå¦åˆ™ä¸€å¾‹å…ˆ<code>map</code>å†<code>cache</code>ã€‚å¦‚æœä½ æœ‰ä¸¤ä¸ª<code>map</code>ï¼Œå…¶ä¸­ä¸€ä¸ªæ¯”è¾ƒè€—æ—¶<code>time_consuming_mapping</code>ï¼Œå¦ä¸€ä¸ªæ¯”è¾ƒè€—å†…å­˜<code>memory_consuming_mapping</code>ï¼Œé‚£ä¹ˆå…¶å®ä½ å¯ä»¥å°†å…¶æ‹†åˆ†æˆä¸¤éƒ¨åˆ†ï¼›</p><pre><code class="lang-py">dataset.map(time_consuming_mapping).cache().map(memory_consuming_mapping)</code></pre><p>è¿™æ ·ï¼Œè€—æ—¶éƒ¨åˆ†ä»…åœ¨ç¬¬ä¸€ä¸ªepochæ‰§è¡Œï¼Œå¹¶ä¸”é¿å…äº†ä½¿ç”¨è¿‡å¤šçš„ç¼“å­˜ç©ºé—´ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä½¿ç”¨<code>tf.data</code>ï¼Œå¹¶é‡‡ç”¨åˆç†çš„ä¼˜åŒ–æ‰‹æ®µï¼Œå°±èƒ½è®©ä½ çš„æ•°æ®é¢„å¤„ç†è¿‡ç¨‹èŠ‚çº¦å¾ˆå¤šæ—¶é—´ã€‚è¿™äº›æ‰‹æ®µæœ‰ï¼š</p><ul><li>ä½¿ç”¨<code>prefetch</code>è½¬æ¢å¯ä»¥ä½¿ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„å·¥ä½œé‡å ã€‚</li><li>ä½¿ç”¨<code>interleave</code>å˜æ¢å¹¶è¡ŒåŒ–æ•°æ®è¯»å–å˜æ¢ã€‚</li><li>é€šè¿‡è®¾ç½®<code>num_parallel_calls</code>å‚æ•°æ¥å¹¶è¡ŒåŒ–<code>map</code>è½¬æ¢ ã€‚</li><li>åœ¨ç¬¬ä¸€ä¸ªepochä½¿ç”¨<code>cache</code>è½¬æ¢å°†æ•°æ®ç¼“å­˜åœ¨å†…å­˜ä¸­</li><li>å‘é‡åŒ–ä¼ é€’ç»™<code>map</code>è½¬æ¢çš„ç”¨æˆ·å®šä¹‰å‡½æ•°</li><li>åº”ç”¨<code>interleave</code> ï¼Œ <code>prefetch</code>å’Œ<code>shuffle</code>è½¬æ¢æ—¶ï¼Œ é€æ¸å‡å°‘å†…å­˜ä½¿ç”¨ ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Tensorflow</tag>
      
      <tag>preprocessing</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘tf.dataåŸºæœ¬ä½¿ç”¨</title>
    <link href="/2020/08/15/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91tf-data%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
    <url>/2020/08/15/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91tf-data%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ <code>tf.data</code> API å¯ä»¥è½»æ¾å¤„ç†å¤§é‡æ•°æ®ï¼Œæ”¯æŒå¤šæ ·åŒ–çš„æ•°æ®æ ¼å¼ï¼Œè¿˜å¯ä»¥æ–¹ä¾¿æ‰§è¡Œå¤æ‚çš„è½¬æ¢ã€‚æœ¬æ–‡ä»‹ç»äº†ä¸åŒç±»åˆ«æºæ•°æ®è½¬åŒ–ä¸º <code>tf.data.Dataset</code> çš„æ–¹æ³•ï¼Œä»¥åŠ <code>Dataset</code> å¸¸è§çš„é¢„å¤„ç†æ–¹æ³•ã€‚<br><!--more---></p><h2 id="æ¦‚è§ˆ"><a href="#æ¦‚è§ˆ" class="headerlink" title="æ¦‚è§ˆ"></a>æ¦‚è§ˆ</h2><p>æœ€è¿‘å‡ å¹´æˆ‘ä»¬åœ¨æœºå™¨å­¦ä¹ çš„åŠ é€Ÿè®¡ç®—é¢†åŸŸå–å¾—äº†ä¸€äº›çªç ´ã€‚è™½ç„¶æˆ‘ä»¬è¿›è¡ŒæŒ‡æ ‡è¿ç®—å’ŒçŸ©é˜µè¿ç®—æ‰€éœ€çš„æ—¶é—´å¤§å¤§å‡å°‘äº†ï¼Œä½†æ˜¯æä¾›æ•°æ®åŠ é€Ÿçš„CPUå´æ²¡èƒ½è·Ÿä¸Šç›¸åº”çš„æ­¥ä¼ï¼Œè¿™å°±æˆä¸ºäº†é¢„å¤„ç†ä¸­çš„ç“¶é¢ˆã€‚æˆ‘ä»¬æœ¬ä»¥ä¸ºå¯ä»¥é€šè¿‡æ„å»ºæ›´å¤æ‚çš„æ¨¡å‹æ¥å‡å°‘å¯¹ç¡¬ä»¶çš„éœ€æ±‚ï¼Œä½†æ˜¯CPUçš„æ•ˆç‡è¿˜æ˜¯å–å†³äºä»–ä»¬æ‹¥æœ‰å¤šå°‘RAMã€‚</p><p><img src="/2020/08/15/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91tf-data%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/2020-08-15-22-34-14.png" alt></p><p>å¯¹äºä¸€äº›æ•°æ®é›†å¾ˆå¤§çš„é—®é¢˜ï¼Œè§£å†³é—®é¢˜çš„æ–¹æ³•é™¤äº†æå‡CPUçš„æ€§èƒ½ä¹‹å¤–ï¼Œè¿˜æœ‰å¯¹æ•°æ®é›†è¿›è¡Œåˆ†æ‰¹æ¬¡å¤„ç†ï¼Œä½†æ˜¯åˆ†æ‰¹é¢„å¤„ç†éœ€è¦ä¸æ–­è¿›è¡Œè®­ç»ƒå’Œåˆå¹¶æ“ä½œï¼Œè¿™å¯¹é¢„å¤„ç†å¢åŠ äº†éš¾åº¦ã€‚<code>tf.data</code> å¯ä»¥å¸®åŠ©è§£å†³æ•°æ®é›†è¿‡å¤§é€ æˆçš„é¢„å¤„ç†ç“¶é¢ˆé—®é¢˜ã€‚</p><p><code>tf.data</code> æ˜¯tensorflowçš„æ•°æ®é¢„å¤„ç†æ¡†æ¶ã€‚å®ƒé€Ÿåº¦å¿«ã€çµæ´»ä¸”æ˜“äºä½¿ç”¨ã€‚</p><p>å‡è®¾ä½ çš„æ•°æ®ä»¥TFRecordæ ¼å¼å­˜åœ¨ç£ç›˜ï¼Œéœ€è¦å°†è¿™äº›æ•°æ®è¯»å–ã€å¤„ç†å¹¶è®­ç»ƒæ¨¡å‹ï¼Œå¯ä»¥å…ˆé€šè¿‡<code>TFRecordDataset</code> å¼€å§‹å¤„ç†è¿™äº›æ•°æ®ï¼š</p><pre><code class="lang-py">dataset = tf.data.TFRecordDataset(&#39;.../*.tfrecord&#39;)</code></pre><p>ç„¶åæ‰§è¡Œä¸€äº›æ•°æ®é¢„å¤„ç†æ“ä½œï¼Œè¿™ä¸ªè¿‡ç¨‹å¯èƒ½å¾ˆæ¶ˆè€—èµ„æºï¼š</p><pre><code class="lang-py">dataset = dataset.map(expensive_preprocess)</code></pre><p>éšåä½ éœ€è¦æ‰“ä¹±æ•°æ®ï¼Œä»¥é™ä½æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­è¿‡æ‹Ÿåˆçš„å¯èƒ½æ€§ï¼š</p><pre><code class="lang-py">dataset = dataset.shuffle(buffer_size=1024)</code></pre><p>ç„¶åæˆ‘ä»¬éœ€è¦åˆ†æ‰¹æ¬¡ï¼Œä»¥ä»¤æ¨¡å‹åŠ é€Ÿè®¡ç®—</p><pre><code class="lang-py">dataset = dataset.batch(batch_size=32)</code></pre><p>æœ€ç»ˆè¦å®Œæˆpipelineæ­å»ºï¼Œè¿™æ ·å¯ä»¥ä¿è¯æ¨¡å‹åœ¨è¿è¡Œä¸€ä¸ªbatchçš„æ•°æ®æ—¶ï¼Œå¦ä¸€æ‰¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ä»¥æå‡æ•ˆç‡ã€‚</p><pre><code class="lang-py">dataset = dataset.prefetch()</code></pre><p>å°†æ•°æ®è¾“å…¥åˆ°æ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹è®­ç»ƒäº†ã€‚</p><pre><code class="lang-py">model = tf.keras.Model(...)model.fit(dataset)</code></pre><p>ä¸Šé¢å°±æ˜¯æ•°æ®ä»è¯»å–åˆ°å¤„ç†åˆ°è®­ç»ƒçš„å…¨éƒ¨æµç¨‹ï¼Œç§°ä¹‹ä¸ºç®¡é“ï¼ˆpipelineï¼‰ã€‚</p><p>å¤„ç†å¤§é‡åŸå§‹æ•°æ®ï¼Œè¦ç»è¿‡å¤šæ¬¡å‡½æ•°å˜æ¢ï¼Œè¿™äº›å‡½æ•°å˜æ¢éƒ½æ˜¯å¯é‡ç”¨çš„ã€‚ä½¿ç”¨<code>tf.data</code>å°†è¿™äº›å˜æ¢æ•´ç†æˆç®¡é“ï¼Œä¸€æ–¹é¢å¯ä»¥ç®€åŒ–å¤æ‚è¾“å…¥çš„é¢„å¤„ç†è¿‡ç¨‹ï¼Œå¦ä¸€æ–¹é¢ï¼Œç”±äº<code>Dataset</code> å¯¹è±¡å¯è¿­ä»£ï¼Œå¯ä»¥æ‰§è¡Œåˆ†æ‰¹å¤„ç†ã€‚ä½¿ç”¨<code>tf.data.Dataset</code>å¯ä»¥æ–¹ä¾¿åœ°æ•´åˆæ“ä½œã€æ„é€ æ•°æ®é›†ã€‚</p><p>æœ‰ä¸¤ç§æ–¹æ³•æ„é€ å¯ä¾›è®­ç»ƒä½¿ç”¨çš„<code>Dataset</code>æ•°æ®é›†ï¼š</p><ol><li>ä»æ–‡ä»¶ã€å†…å­˜ä¸­ç›´æ¥æ„å»º<code>Dataset</code></li><li>ä»å…¶ä»–<code>Dataset</code>ä¸­è½¬åŒ–</li></ol><p>å¦‚æœæ‰“ç®—ä»å†…å­˜ä¸­è¯»å–æ•°æ®æ„å»º <code>Dataset</code> ï¼Œæœ‰ <code>tf.data.Dataset.from_tensors()</code> å’Œ <code>tf.data.Dataset.from_tensor_slices()</code> å¯ä¾›é€‰æ‹©ï¼›å¦‚æœæ‰“ç®—ä» <code>TFRecord</code> æ ¼å¼çš„æ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œå¯ä»¥è°ƒç”¨ <code>tf.data.TFRecordDataset()</code> ã€‚</p><p>å½“ <code>Dataset</code> å¯¹è±¡æ„å»ºå¥½äº†ä¹‹åï¼Œé€šè¿‡ä½¿ç”¨ <code>Dataset.map()</code> ä¸ºå…¶ä¸­æ¯ä¸ªå…ƒç´ æ–½åŠ å˜æ¢ã€ä½¿ç”¨ <code>Dataset.batch()</code> ä¸ºæ•´æ‰¹å…ƒç´ æ·»åŠ å˜æ¢ç­‰ç­‰å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ã€‚</p><h2 id="ä»å†…å­˜æˆ–æ–‡ä»¶ä¸­æ„é€ Dataset"><a href="#ä»å†…å­˜æˆ–æ–‡ä»¶ä¸­æ„é€ Dataset" class="headerlink" title="ä»å†…å­˜æˆ–æ–‡ä»¶ä¸­æ„é€ Dataset"></a>ä»å†…å­˜æˆ–æ–‡ä»¶ä¸­æ„é€ <code>Dataset</code></h2><h3 id="ä»å†…å­˜ä¸­çš„arrayæ„é€ Dataset"><a href="#ä»å†…å­˜ä¸­çš„arrayæ„é€ Dataset" class="headerlink" title="ä»å†…å­˜ä¸­çš„arrayæ„é€ Dataset"></a>ä»å†…å­˜ä¸­çš„arrayæ„é€ <code>Dataset</code></h3><p>å¦‚æœä½ çš„æ‰€æœ‰æ•°æ®éƒ½åœ¨å†…å­˜ä¸­ï¼Œé‚£ä¹ˆæœ€ç®€å•æ„é€  <code>Dataset</code> çš„æ–¹å¼å°±æ˜¯ï¼Œå…ˆå°†å…¶åˆ©ç”¨ <code>tf.Tensor</code> è½¬æˆtensorï¼Œåä½¿ç”¨<code>Dataset.from_tensor_slices()</code>ã€‚</p><pre><code class="lang-python">train, test = tf.keras.datasets.fashion_mnist.load_data()images, labels = trainimages = images/255dataset = tf.data.Dataset.from_tensor_slices((images, labels))dataset</code></pre><h3 id="ä»ç”Ÿæˆå™¨æ„é€ Dataset"><a href="#ä»ç”Ÿæˆå™¨æ„é€ Dataset" class="headerlink" title="ä»ç”Ÿæˆå™¨æ„é€ Dataset"></a>ä»ç”Ÿæˆå™¨æ„é€ <code>Dataset</code></h3><p>ä½ ä¹Ÿå¯ä»¥åˆ©ç”¨ <code>Dataset.from_generator</code> ä»Pythonçš„ç”Ÿæˆå™¨æ¥æ„é€  <code>Dataset</code> ï¼Œæ¯”å¦‚ä» <code>preprocessing.image.ImageDataGenerator</code> æ„é€  <code>Dataset</code>ã€‚ä½†è¿™ç§æ–¹æ³•å—åˆ¶äºPythonçš„GILï¼Œå› æ­¤æ•ˆç‡ä¸ä¼šå¤ªé«˜ã€‚</p><p>é¦–å…ˆä¸‹è½½èŠ±æœµå›¾ç‰‡æ•°æ®é›†ï¼Œä¸€å…±3670å¼ èŠ±æœµå›¾ç‰‡ï¼Œåˆ†æˆäº”ä¸ªç±»åˆ«ã€‚</p><pre><code class="lang-python">flowers = tf.keras.utils.get_file(    &#39;flower_photos&#39;,    &#39;https://storage.googleapis.com/download.tensorflow.org/example_images/flower_photos.tgz&#39;,    untar=True)</code></pre><p>åˆ©ç”¨ <code>preprocessing.image.ImageDataGenerator</code> å®šä¹‰æ•°æ®å¢å¼ºæ“ä½œï¼Œç„¶åå°†å…¶å¥—ç”¨åˆ°èŠ±æœµæ•°æ®é›†ä¸Šã€‚</p><pre><code class="lang-python">img_gen = tf.keras.preprocessing.image.ImageDataGenerator(rescale=1./255, rotation_range=20)images, labels = next(img_gen.flow_from_directory(flowers))</code></pre><p>æœ€åæ„é€  <code>Dataset</code> ã€‚</p><pre><code class="lang-python">ds = tf.data.Dataset.from_generator(    img_gen.flow_from_directory, args=[flowers],     output_types=(tf.float32, tf.float32),     output_shapes=([32,256,256,3], [32,5]))ds&lt;FlatMapDataset shapes: ((32, 256, 256, 3), (32, 5)), types: (tf.float32, tf.float32)&gt;</code></pre><h3 id="ä»TFRecordæ ¼å¼æ–‡ä»¶æ„é€ Dataset"><a href="#ä»TFRecordæ ¼å¼æ–‡ä»¶æ„é€ Dataset" class="headerlink" title="ä»TFRecordæ ¼å¼æ–‡ä»¶æ„é€ Dataset"></a>ä»<code>TFRecord</code>æ ¼å¼æ–‡ä»¶æ„é€ <code>Dataset</code></h3><p>æœ‰äº›æ—¶å€™æ•°æ®ä¸åœ¨å†…å­˜ä¸­ï¼Œè€Œæ˜¯ä»¥ç‰¹å®šæ ¼å¼å­˜åœ¨ç£ç›˜ä¸Šï¼Œæ¯”å¦‚ <code>TFRecord</code> æ ¼å¼ã€‚è¿™ç§æƒ…å†µæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>tf.data.TFRecordDataset</code> ä½œä¸ºæ•°æ®ç®¡é“çš„ä¸€éƒ¨åˆ†ã€‚</p><pre><code class="lang-python"># Creates a dataset that reads all of the examples from two files.fsns_test_file = tf.keras.utils.get_file(&quot;fsns.tfrec&quot;, &quot;https://storage.googleapis.com/download.tensorflow.org/data/fsns-20160927/testdata/fsns-00000-of-00001&quot;)dataset = tf.data.TFRecordDataset(filenames = [fsns_test_file])</code></pre><p><code>tf.data.TFRecordDataset</code> APIä¸­ï¼Œ<code>filenames</code> çš„è¾“å…¥å¾ˆçµæ´»ï¼Œæ—¢å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨æ˜ä¸€ä¸ªæ–‡ä»¶ï¼›ä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œè¡¨æ˜å¤šä¸ªæ–‡ä»¶ã€‚</p><h3 id="ä»-txtæ ¼å¼æ–‡ä»¶æ„é€ Dataset"><a href="#ä»-txtæ ¼å¼æ–‡ä»¶æ„é€ Dataset" class="headerlink" title="ä».txtæ ¼å¼æ–‡ä»¶æ„é€ Dataset"></a>ä»<code>.txt</code>æ ¼å¼æ–‡ä»¶æ„é€ <code>Dataset</code></h3><p>å¦‚æœæ˜¯ <code>.txt</code> æ ¼å¼ï¼Œé‚£ä¹ˆé‡‡ç”¨ <code>tf.data.TextLineDataset</code> ä¹Ÿå¯è½¬æˆ <code>Dataset</code>ã€‚</p><pre><code class="lang-python">directory_url = &#39;https://storage.googleapis.com/download.tensorflow.org/data/illiad/&#39;file_names = [&#39;cowper.txt&#39;, &#39;derby.txt&#39;, &#39;butler.txt&#39;]file_paths = [    &#39;cowper.txt&#39;,&#39;derby.txt&#39;,&#39;butler.txt&#39;]dataset = tf.data.TextLineDataset(file_paths)</code></pre><p>çœ‹ä¸€ä¸‹ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„å‰5è¡Œï¼š</p><pre><code class="lang-python">for line in dataset.take(5):  print(line.numpy())b&quot;\xef\xbb\xbfAchilles sing, O Goddess! Peleus&#39; son;&quot;b&#39;His wrath pernicious, who ten thousand woes&#39;b&quot;Caused to Achaia&#39;s host, sent many a soul&quot;b&#39;Illustrious into Ades premature,&#39;b&#39;And Heroes gave (so stood the will of Jove)&#39;</code></pre><p>å‰äº”è¡Œéƒ½æ˜¯ <code>cowper.txt</code> ä¸­çš„ã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›ç”Ÿæˆçš„ <code>Dataset</code> èƒ½å¤Ÿè½®æµé€‰å–ä¸‰ä¸ªæ–‡ä»¶ä¸­çš„å…ƒç´ ï¼Œå¯ä»¥åœ¨æ„é€ ä¹‹åˆï¼Œä½¿ç”¨ <code>Dataset.interleave</code> ï¼Œå¹¶è®¾ç½® <code>cycle_length</code>ï¼š</p><pre><code class="lang-python">files_ds = tf.data.Dataset.from_tensor_slices(file_paths)lines_ds = files_ds.interleave(tf.data.TextLineDataset, cycle_length=3)for i, line in enumerate(lines_ds.take(9)):  if i % 3 == 0:    print()  print(i, line.numpy())0 b&quot;\xef\xbb\xbfAchilles sing, O Goddess! Peleus&#39; son;&quot;1 b&quot;\xef\xbb\xbfOf Peleus&#39; son, Achilles, sing, O Muse,&quot;2 b&#39;\xef\xbb\xbfSing, O goddess, the anger of Achilles son of Peleus, that brought&#39;3 b&#39;His wrath pernicious, who ten thousand woes&#39;4 b&#39;The vengeance, deep and deadly; whence to Greece&#39;5 b&#39;countless ills upon the Achaeans. Many a brave soul did it send&#39;6 b&quot;Caused to Achaia&#39;s host, sent many a soul&quot;7 b&#39;Unnumbered ills arose; which many a soul&#39;8 b&#39;hurrying down to Hades, and many a hero did it yield a prey to dogs and&#39;</code></pre><p>æœ‰çš„æ—¶å€™æˆ‘ä»¬ä¸å¸Œæœ›å½•å…¥æ–‡ä»¶çš„ç¬¬ä¸€è¡Œï¼Œæˆ–è€…åªè¦æ–‡ä»¶ä¸­æ»¡è¶³è¦æ±‚çš„ç‰¹å®šè¡Œï¼Œå¯ä»¥åˆ†åˆ«ä½¿ç”¨ <code>Dataset.skip()</code> å’Œ <code>Dataset.filter()</code> ã€‚æ¯”å¦‚ä¸‹é¢çš„æ³°å¦å°¼å…‹æ•°æ®é›†ï¼Œå»æ‰ç¬¬ä¸€è¡Œåï¼Œç­›é€‰ç”Ÿå­˜ä¸‹æ¥çš„äººã€‚</p><pre><code class="lang-python">titanic_file = tf.keras.utils.get_file(&quot;train.csv&quot;, &quot;https://storage.googleapis.com/tf-datasets/titanic/train.csv&quot;)titanic_lines = tf.data.TextLineDataset(titanic_file)for line in titanic_lines.take(10):  print(line.numpy())b&#39;survived,sex,age,n_siblings_spouses,parch,fare,class,deck,embark_town,alone&#39;b&#39;0,male,22.0,1,0,7.25,Third,unknown,Southampton,n&#39;b&#39;1,female,38.0,1,0,71.2833,First,C,Cherbourg,n&#39;b&#39;1,female,26.0,0,0,7.925,Third,unknown,Southampton,y&#39;b&#39;1,female,35.0,1,0,53.1,First,C,Southampton,n&#39;b&#39;0,male,28.0,0,0,8.4583,Third,unknown,Queenstown,y&#39;b&#39;0,male,2.0,3,1,21.075,Third,unknown,Southampton,n&#39;b&#39;1,female,27.0,0,2,11.1333,Third,unknown,Southampton,n&#39;b&#39;1,female,14.0,1,0,30.0708,Second,unknown,Cherbourg,n&#39;b&#39;1,female,4.0,1,1,16.7,Third,G,Southampton,n&#39;def survived(line):  return tf.not_equal(tf.strings.substr(line, 0, 1), &quot;0&quot;)survivors = titanic_lines.skip(1).filter(survived)for line in survivors.take(10):  print(line.numpy())b&#39;1,female,38.0,1,0,71.2833,First,C,Cherbourg,n&#39;b&#39;1,female,26.0,0,0,7.925,Third,unknown,Southampton,y&#39;b&#39;1,female,35.0,1,0,53.1,First,C,Southampton,n&#39;b&#39;1,female,27.0,0,2,11.1333,Third,unknown,Southampton,n&#39;b&#39;1,female,14.0,1,0,30.0708,Second,unknown,Cherbourg,n&#39;b&#39;1,female,4.0,1,1,16.7,Third,G,Southampton,n&#39;b&#39;1,male,28.0,0,0,13.0,Second,unknown,Southampton,y&#39;b&#39;1,female,28.0,0,0,7.225,Third,unknown,Cherbourg,y&#39;b&#39;1,male,28.0,0,0,35.5,First,A,Southampton,y&#39;b&#39;1,female,38.0,1,5,31.3875,Third,unknown,Southampton,n&#39;</code></pre><h3 id="ä»csvæ ¼å¼æ„é€ Dataset"><a href="#ä»csvæ ¼å¼æ„é€ Dataset" class="headerlink" title="ä»csvæ ¼å¼æ„é€ Dataset"></a>ä»<code>csv</code>æ ¼å¼æ„é€ <code>Dataset</code></h3><p>é™¤äº†<code>TFRecord</code>å’Œ<code>txt</code>æ ¼å¼ï¼Œè¿˜æœ‰<code>csv</code>æ ¼å¼ä¹Ÿå¾ˆæµè¡Œã€‚<code>csv</code>æ ¼å¼èƒ½å¤Ÿä»¥çº¯æ–‡æœ¬ä¿å­˜è¡¨æ ¼æ•°æ®ã€‚<code>pandas</code>çš„<code>to_csv</code>æ˜¯å°†<code>csv</code>æ¬è¿åˆ°å†…å­˜çš„è‰¯å¥½å·¥å…·ã€‚</p><pre><code class="lang-python">titanic_file = tf.keras.utils.get_file(&quot;train.csv&quot;, &quot;https://storage.googleapis.com/tf-datasets/titanic/train.csv&quot;)df = pd.read_csv(titanic_file, index_col=None)df.head()titanic_slices = tf.data.Dataset.from_tensor_slices(dict(df))for feature_batch in titanic_slices.take(1):  for key, value in feature_batch.items():    print(&quot;  &#123;!r:20s&#125;: &#123;&#125;&quot;.format(key, value))</code></pre><p>å½“ç„¶<code>tf.data</code>å¼ºå¤§ä¹‹å¤„åœ¨äºå¯ä»¥å¤„ç†<code>pandas</code>å¤„ç†ä¸äº†çš„æ–‡ä»¶å¤§å°ã€‚<code>experimental.make_csv_dataset</code>å‡½æ•°æ˜¯ç”¨äºè¯»å–csvæ–‡ä»¶é›†çš„é«˜å±‚æ¥å£ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨æ¨å¯¼æ¯ä¸ª<code>column</code>çš„æ–‡ä»¶ç±»å‹ã€‚</p><pre><code class="lang-python">titanic_batches = tf.data.experimental.make_csv_dataset(    titanic_file, batch_size=4,    label_name=&quot;survived&quot;)</code></pre><p>æŸ¥çœ‹ç¬¬ä¸€ä¸ª<code>batch</code>çš„å†…å®¹ã€‚</p><pre><code class="lang-python">for feature_batch, label_batch in titanic_batches.take(1):  print(&quot;&#39;survived&#39;: &#123;&#125;&quot;.format(label_batch))  print(&quot;features:&quot;)  for key, value in feature_batch.items():    print(&quot;  &#123;!r:20s&#125;: &#123;&#125;&quot;.format(key, value))</code></pre><p>å¦‚æœåªéœ€è¦<code>csv</code>çš„æŸä¸€åˆ—ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨<code>select_columns</code>å‚æ•°ã€‚</p><pre><code class="lang-python">titanic_batches = tf.data.experimental.make_csv_dataset(    titanic_file, batch_size=4,    label_name=&quot;survived&quot;, select_columns=[&#39;class&#39;, &#39;fare&#39;, &#39;survived&#39;])for feature_batch, label_batch in titanic_batches.take(1):  print(&quot;&#39;survived&#39;: &#123;&#125;&quot;.format(label_batch))  for key, value in feature_batch.items():    print(&quot;  &#123;!r:20s&#125;: &#123;&#125;&quot;.format(key, value))&#39;survived&#39;: [1 1 1 0]features:  &#39;sex&#39;               : [b&#39;female&#39; b&#39;female&#39; b&#39;male&#39; b&#39;female&#39;]  &#39;age&#39;               : [35. 31. 45. 28.]  &#39;n_siblings_spouses&#39;: [0 1 0 8]  &#39;parch&#39;             : [0 1 0 2]  &#39;fare&#39;              : [512.3292  20.525    8.05    69.55  ]  &#39;class&#39;             : [b&#39;First&#39; b&#39;Third&#39; b&#39;Third&#39; b&#39;Third&#39;]  &#39;deck&#39;              : [b&#39;unknown&#39; b&#39;unknown&#39; b&#39;unknown&#39; b&#39;unknown&#39;]  &#39;embark_town&#39;       : [b&#39;Cherbourg&#39; b&#39;Southampton&#39; b&#39;Southampton&#39; b&#39;Southampton&#39;]  &#39;alone&#39;             : [b&#39;y&#39; b&#39;n&#39; b&#39;y&#39; b&#39;n&#39;]</code></pre><p>è¿˜æœ‰ä¸€ä¸ªåº•å±‚çš„<code>experimental.CsvDataset</code>ç±»ï¼Œå®ƒå¯ä»¥æ›´ç²¾ç»†çš„æ§åˆ¶è¯»å–<code>csv</code>çš„è¿‡ç¨‹ã€‚ä¸æ”¯æŒåˆ—ç±»å‹æ¨æ–­ã€‚</p><pre><code class="lang-python">titanic_types  = [tf.int32, tf.string, tf.float32, tf.int32, tf.int32, tf.float32, tf.string, tf.string, tf.string, tf.string] dataset = tf.data.experimental.CsvDataset(titanic_file, titanic_types , header=True)for line in dataset.take(10):  print([item.numpy() for item in line])[0, b&#39;male&#39;, 22.0, 1, 0, 7.25, b&#39;Third&#39;, b&#39;unknown&#39;, b&#39;Southampton&#39;, b&#39;n&#39;][1, b&#39;female&#39;, 38.0, 1, 0, 71.2833, b&#39;First&#39;, b&#39;C&#39;, b&#39;Cherbourg&#39;, b&#39;n&#39;][1, b&#39;female&#39;, 26.0, 0, 0, 7.925, b&#39;Third&#39;, b&#39;unknown&#39;, b&#39;Southampton&#39;, b&#39;y&#39;][1, b&#39;female&#39;, 35.0, 1, 0, 53.1, b&#39;First&#39;, b&#39;C&#39;, b&#39;Southampton&#39;, b&#39;n&#39;][0, b&#39;male&#39;, 28.0, 0, 0, 8.4583, b&#39;Third&#39;, b&#39;unknown&#39;, b&#39;Queenstown&#39;, b&#39;y&#39;][0, b&#39;male&#39;, 2.0, 3, 1, 21.075, b&#39;Third&#39;, b&#39;unknown&#39;, b&#39;Southampton&#39;, b&#39;n&#39;][1, b&#39;female&#39;, 27.0, 0, 2, 11.1333, b&#39;Third&#39;, b&#39;unknown&#39;, b&#39;Southampton&#39;, b&#39;n&#39;][1, b&#39;female&#39;, 14.0, 1, 0, 30.0708, b&#39;Second&#39;, b&#39;unknown&#39;, b&#39;Cherbourg&#39;, b&#39;n&#39;][1, b&#39;female&#39;, 4.0, 1, 1, 16.7, b&#39;Third&#39;, b&#39;G&#39;, b&#39;Southampton&#39;, b&#39;n&#39;][0, b&#39;male&#39;, 20.0, 0, 0, 8.05, b&#39;Third&#39;, b&#39;unknown&#39;, b&#39;Southampton&#39;, b&#39;y&#39;]</code></pre><p><code>CsvDataset</code>è¿˜å¯ä»¥æŒ‡å®šæ¯åˆ—çš„é»˜è®¤å€¼ï¼Œä¾›å…ƒç´ ä¸ºç©ºæ—¶å¡«å……ã€‚</p><p>åœ¨Colabä¸­ï¼Œç›´æ¥ä¹¦å†™<code>csv</code>æ–‡ä»¶ï¼š</p><pre><code class="lang-bash">%%writefile missing.csv1,2,3,4,2,3,41,,3,41,2,,41,2,3,,,,</code></pre><p>è®¾ç½®æ¯åˆ—é»˜è®¤å€¼ï¼š</p><pre><code class="lang-python"># Creates a dataset that reads all of the records from two CSV files, each with# four float columns which may have missing values.record_defaults = [999,999,999,999]dataset = tf.data.experimental.CsvDataset(&quot;missing.csv&quot;, record_defaults)dataset = dataset.map(lambda *items: tf.stack(items))for line in dataset:  print(line.numpy())[1 2 3 4][999   2   3   4][  1 999   3   4][  1   2 999   4][  1   2   3 999][999 999 999 999]</code></pre><p>ä½ ä¹Ÿå¯ä»¥é€‰æ‹©åˆ é™¤<code>header</code>ï¼Œæˆ–è€…æŒ‡å®šæŸåˆ—è¾“å‡º</p><pre><code class="lang-python"># Creates a dataset that reads all of the records from two CSV files with# headers, extracting float data from columns 2 and 4.record_defaults = [999, 999] # Only provide defaults for the selected columnsdataset = tf.data.experimental.CsvDataset(&quot;missing.csv&quot;, record_defaults, select_cols=[1, 3])dataset = dataset.map(lambda *items: tf.stack(items))for line in dataset:  print(line.numpy())[2 4][2 4][999   4][2 4][  2 999][999 999]</code></pre><h3 id="ä»æ–‡ä»¶å¤¹ä¸­çš„æ¯ä¸ªæ–‡ä»¶æ„é€ Dataset"><a href="#ä»æ–‡ä»¶å¤¹ä¸­çš„æ¯ä¸ªæ–‡ä»¶æ„é€ Dataset" class="headerlink" title="ä»æ–‡ä»¶å¤¹ä¸­çš„æ¯ä¸ªæ–‡ä»¶æ„é€ Dataset"></a>ä»æ–‡ä»¶å¤¹ä¸­çš„æ¯ä¸ªæ–‡ä»¶æ„é€ <code>Dataset</code></h3><p>å¦‚æœæ¯ä¸ªå•ç‹¬çš„æ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªæ•°æ®é¡¹ï¼ˆæ¯”å¦‚å›¾ç‰‡æ•°æ®é›†ï¼‰ï¼Œè¿™æ ·çš„æ•°æ®é›†å¦‚ä½•æ•´ç†ï¼Ÿ</p><pre><code class="lang-python">flowers_root = tf.keras.utils.get_file(    &#39;flower_photos&#39;,    &#39;https://storage.googleapis.com/download.tensorflow.org/example_images/flower_photos.tgz&#39;,    untar=True)flowers_root = pathlib.Path(flowers_root)list_ds = tf.data.Dataset.list_files(str(flowers_root/&#39;*/*&#39;))for f in list_ds.take(5):  print(f.numpy())b&#39;/root/.keras/datasets/flower_photos/dandelion/8720503800_cab5c62a34.jpg&#39;b&#39;/root/.keras/datasets/flower_photos/dandelion/16510864164_3afa8ac37f.jpg&#39;b&#39;/root/.keras/datasets/flower_photos/tulips/7136973281_b2a935ce20.jpg&#39;b&#39;/root/.keras/datasets/flower_photos/sunflowers/14623719696_1bb7970208_n.jpg&#39;b&#39;/root/.keras/datasets/flower_photos/dandelion/4560663938_3557a1f831.jpg&#39;</code></pre><p>é€šè¿‡ä½¿ç”¨<code>tf.io.read_file</code>è¯»å–æ•°æ®ï¼Œå¹¶ä»è·¯å¾„ä¸­æå–<code>label</code>ï¼Œè¿”å›<code>(image, label)</code>æ•°æ®å¯¹ã€‚</p><pre><code class="lang-python">def process_path(file_path):  label = tf.strings.split(file_path, os.sep)[-2]  return tf.io.read_file(file_path), labellabeled_ds = list_ds.map(process_path)for image_raw, label_text in labeled_ds.take(1):  print(repr(image_raw.numpy()[:100]))  print()  print(label_text.numpy())b&#39;\xff\xd8\xff\xe0\x00\x10JFIF\x00\x01\x01\x01\x03|\x03|\x00\x00\xff\xe2\x0cXICC_PROFILE\x00\x01\x01\x00\x00\x0cHLino\x02\x10\x00\x00mntrRGB XYZ \x07\xce\x00\x02\x00\t\x00\x06\x001\x00\x00acspMSFT\x00\x00\x00\x00IEC sRGB\x00\x00\x00\x00\x00\x00&#39;b&#39;sunflowers&#39;</code></pre><h2 id="æ‰¹å¤„ç†æ•°æ®é›†å…ƒç´ "><a href="#æ‰¹å¤„ç†æ•°æ®é›†å…ƒç´ " class="headerlink" title="æ‰¹å¤„ç†æ•°æ®é›†å…ƒç´ "></a>æ‰¹å¤„ç†æ•°æ®é›†å…ƒç´ </h2><p>æ‰¹å¤„ç†çš„æœ€ç®€å•å½¢å¼æ˜¯å°†æ•°æ®é›†çš„<code>n</code>ä¸ªè¿ç»­å…ƒç´ å †å ä¸ºå•ä¸ªå…ƒç´ ã€‚</p><p>batched_dataset = dataset.batch(4)</p><BatchDataset shapes: ((none,), (none,)), types: (tf.int64, tf.int64)><p>æœ€åä¸€ä¸ªæ‰¹æ¬¡å¯èƒ½æœªæ»¡ï¼Œä½¿ç”¨<code>drop_remainder</code>å‚æ•°å¿½ç•¥æœ€åä¸€æ‰¹ï¼Œä½¿å¾—<code>shape</code>å®Œæ•´ï¼š</p><p>batched_dataset = dataset.batch(7, drop_remainder=True)<br>batched_dataset</p><BatchDataset shapes: ((7,), (7,)), types: (tf.int64, tf.int64)><p>è®¸å¤šæ¨¡å‹ï¼ˆä¾‹å¦‚åºåˆ—æ¨¡å‹ï¼‰éƒ½å¯ä»¥ä½¿ç”¨å¤§å°å¯å˜ï¼ˆä¾‹å¦‚é•¿åº¦ä¸åŒçš„åºåˆ—ï¼‰çš„è¾“å…¥æ•°æ®ã€‚é€šè¿‡<code>Dataset.padded_batch</code>å¯ä»¥å°†ä¸åŒé•¿åº¦çš„<code>tensor</code>è½¬æ¢æˆä¸€ä¸ª<code>batch</code>ã€‚</p><p>åœ¨å¤šä¸ª<code>epochs</code>çš„æƒ…å†µä¸‹ï¼Œéœ€è¦é‡å¤è¿­ä»£æ•°æ®é›†ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯å°†æ•°æ®é›†é‡å¤<code>epochs</code>éã€‚å¯ä»¥ä½¿ç”¨ <code>Dataset.repeat()</code>å®Œæˆã€‚</p><p>åŸæœ‰çš„<code>titanic_lines</code>æ•°æ®é›†ä¸­çš„æ•°æ®æ•°é‡ä¸º 628</p><pre><code class="lang-python">count = 0for data in titanic_lines:    count += 1    # print(data.numpy())print(count)</code></pre><p>titanic_linesæ•°æ®é›†ç»è¿‡<code>repeat</code>ä¹‹åæ•°ç›®å˜ä¸ºåŸæ¥çš„ä¸¤å€ï¼Œ1256</p><pre><code class="lang-python">count = 0for data in titanic_lines.repeat(2):    count += 1    # print(data.numpy())print(count)</code></pre><p>å°†æ•°æ®é›†æ‰“æ•£çš„æ–¹æ³• <code>Dataset.shuffle()</code> é€šè¿‡ç»´æŠ¤ä¸€ä¸ªå›ºå®šå¤§å°çš„ç¼“å†²åŒºæ¥å®ç°ã€‚</p><pre><code class="lang-py">dataset = tf.data.Dataset.zip((counter, lines))dataset = dataset.shuffle(buffer_size=100)dataset = dataset.batch(20)</code></pre><p>ç”±äº<code>buffer_size</code>ä¸º100ï¼Œè€Œæ‰¹å¤§å°ä¸º20ï¼Œå› æ­¤ç¬¬ä¸€æ‰¹ä¸åŒ…å«ç´¢å¼•å¤§äº120çš„å…ƒç´ ã€‚</p><p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œ<code>repeat</code>æ“ä½œã€<code>batch</code>æ“ä½œå’Œ<code>shuffle</code>æ“ä½œç»å¸¸ä¸€èµ·æ··ç”¨ï¼Œä½†æ˜¯ä¸€å®šè¦æ³¨æ„æ“ä½œçš„å…ˆåé¡ºåºã€‚</p><h2 id="é¢„å¤„ç†æ•°æ®"><a href="#é¢„å¤„ç†æ•°æ®" class="headerlink" title="é¢„å¤„ç†æ•°æ®"></a>é¢„å¤„ç†æ•°æ®</h2><p><code>Dataset.map(f)</code> é€šè¿‡å‡½æ•° <code>f</code> å¯¹æ•°æ®é›†æ‰§è¡Œå˜æ¢ï¼Œ<code>f</code> å¿…é¡»ä»¥å•ä¸ªTensorä¸ºè¾“å…¥ï¼Œå•ä¸ªTensorä¸ºè¾“å‡ºï¼ˆè¿™é‡ŒæŒ‡çš„å•ä¸ªtensorï¼Œå…¶æ„æ€æ˜¯ç”±åŸå§‹æ•°æ®å’Œæ ‡ç­¾ç»„æˆçš„æ•°æ®å¯¹ï¼‰ã€‚</p><p>å‡è®¾æˆ‘ä»¬å®šä¹‰äº†å•ä¸ªå›¾åƒå˜æ¢å‡½æ•° <code>parse_image</code> ï¼Œåªéœ€ <code>images_ds = list_ds.map(parse_image)</code> å³å¯å¯¹ <code>image_ds</code> æ•°æ®é›†ä¸­çš„æ‰€æœ‰å›¾ç‰‡æ‰§è¡Œå˜æ¢äº†ã€‚</p><p>å‡è®¾æˆ‘ä»¬éœ€è¦å°†ç…§ç‰‡éšæœºæ—‹è½¬ï¼Œå¯ä»¥å®šä¹‰å‡½æ•°ï¼Œç„¶åä½¿ç”¨mapå°†å…¶åº”ç”¨äºæ•°æ®é›†çš„æ‰€æœ‰å›¾ç‰‡ä¸Šã€‚</p><pre><code class="lang-py">import scipy.ndimage as ndimagedef random_rotate_image(image):  image = ndimage.rotate(image, np.random.uniform(-30, 30), reshape=False)  return imageimage, label = next(iter(images_ds))image = random_rotate_image(image)show(image, label)</code></pre><p><img src="https://www.tensorflow.org/guide/data_files/output__wEyL7bS9S6t_1.png" alt></p><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯ <code>scipy</code> ä¸­çš„æ—‹è½¬å‡½æ•°ï¼Œéœ€å¥—ç”¨ <code>tf.py_function()</code> æ‰èƒ½åœ¨Tensorflowçš„eager_modeé‡Œé¢ä½¿ç”¨ã€‚</p><p>æ¥ä¸‹æ¥ä½¿ç”¨ <code>Dataset.map</code> ï¼š</p><pre><code class="lang-py">def tf_random_rotate_image(image, label):  im_shape = image.shape  [image,] = tf.py_function(random_rotate_image, [image], [tf.float32])  image.set_shape(im_shape)  return image, label</code></pre><p>åœ¨å‡½æ•°å†…éƒ¨ä¸ä½†è¦æ³¨æ„è¾“å…¥å’Œè¿”å›å€¼æ˜¯<code>(image, label)</code>ï¼Œè€Œä¸”éœ€è¦æè¿°æ•°æ®çš„<code>shape</code>å’Œ<code>type</code>ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚</p><h2 id="æ—¶é—´åºåˆ—æ•°æ®çª—å£åŒ–"><a href="#æ—¶é—´åºåˆ—æ•°æ®çª—å£åŒ–" class="headerlink" title="æ—¶é—´åºåˆ—æ•°æ®çª—å£åŒ–"></a>æ—¶é—´åºåˆ—æ•°æ®çª—å£åŒ–</h2><p>æ—¶é—´åºåˆ—æ•°æ®çš„æ ‡ç­¾æœ‰æ‰€ä¸åŒï¼Œä¸€èˆ¬ä»¥ä¸‹ä¸€æ—¶åˆ»çš„è¾“å…¥æ•°æ®ä¸ºæ ‡ç­¾ï¼Œå¯¹æœªæ¥è¿›è¡Œä¸€æ­¥ä¸€æ­¥çš„å¯†é›†é¢„æµ‹ã€‚æ¯”å¦‚ï¼š</p><pre><code class="lang-py">range_ds = tf.data.Dataset.range(100000)batches = range_ds.batch(10, drop_remainder=True)def dense_1_step(batch):  # Shift features and labels one step relative to each other.  return batch[:-1], batch[1:]predict_dense_1_step = batches.map(dense_1_step)for features, label in predict_dense_1_step.take(3):  print(features.numpy(), &quot; =&gt; &quot;, label.numpy())[0 1 2 3 4 5 6 7 8]  =&gt;  [1 2 3 4 5 6 7 8 9][10 11 12 13 14 15 16 17 18]  =&gt;  [11 12 13 14 15 16 17 18 19][20 21 22 23 24 25 26 27 28]  =&gt;  [21 22 23 24 25 26 27 28 29]</code></pre><p>å¦‚æœè¦é¢„æµ‹æ•´ä¸ªæ—¶é—´çª—å£è€Œä¸æ˜¯å›ºå®šçš„åç§»é‡ï¼Œæ¯”å¦‚</p><pre><code class="lang-py">batches = range_ds.batch(15, drop_remainder=True)def label_next_5_steps(batch):  return (batch[:-5],   # Take the first 5 steps          batch[-5:])   # take the remainderpredict_5_steps = batches.map(label_next_5_steps)for features, label in predict_5_steps.take(3):  print(features.numpy(), &quot; =&gt; &quot;, label.numpy())[0 1 2 3 4 5 6 7 8 9]  =&gt;  [10 11 12 13 14][15 16 17 18 19 20 21 22 23 24]  =&gt;  [25 26 27 28 29][30 31 32 33 34 35 36 37 38 39]  =&gt;  [40 41 42 43 44]</code></pre><p>æˆ–è€…ä¸€ä¸ªæ‰¹æ¬¡çš„æ ‡ç­¾å’Œä¸‹ä¸ªæ‰¹æ¬¡çš„è¾“å…¥æœ‰é‡å ï¼š</p><pre><code class="lang-py">feature_length = 10label_length = 5features = range_ds.batch(feature_length, drop_remainder=True)labels = range_ds.batch(feature_length).skip(1).map(lambda labels: labels[:-5])predict_5_steps = tf.data.Dataset.zip((features, labels))for features, label in predict_5_steps.take(3):  print(features.numpy(), &quot; =&gt; &quot;, label.numpy())[0 1 2 3 4 5 6 7 8 9]  =&gt;  [10 11 12 13 14][10 11 12 13 14 15 16 17 18 19]  =&gt;  [20 21 22 23 24][20 21 22 23 24 25 26 27 28 29]  =&gt;  [30 31 32 33 34]</code></pre><p>æœ‰æ›´æ–¹ä¾¿çš„æ–¹æ³•ï¼Œé‚£å°±æ˜¯ä½¿ç”¨<code>Dataset.window</code>æ–¹æ³•</p><pre><code class="lang-py">def make_window_dataset(ds, window_size, shift, stride):  windows = ds.window(window_size, shift=shift, stride=stride)  def sub_to_batch(sub):    return sub.batch(window_size, drop_remainder=True)  windows = windows.flat_map(sub_to_batch)  return windows</code></pre><p><code>Dataset.window(window_size, shift=shift, stride=stride)</code> ä¸­çš„window_sizeä»£è¡¨çª—å£å¤§å°ï¼Œå³æ¯ä¸ªbatchçš„å…ƒç´ ä¸ªæ•°ï¼›shiftä»£è¡¨æ¯æ¬¡çª—å£ç§»åŠ¨çš„è·ç¦»ï¼›strideä»£è¡¨é€‰æ‹©å…ƒç´ çš„é—´éš”</p><pre><code class="lang-py">ds = make_window_dataset(range_ds, window_size=10, shift = 5, stride=3)for example in ds.take(10):  print(example.numpy())[ 0  3  6  9 12 15 18 21 24 27][ 5  8 11 14 17 20 23 26 29 32][10 13 16 19 22 25 28 31 34 37][15 18 21 24 27 30 33 36 39 42][20 23 26 29 32 35 38 41 44 47][25 28 31 34 37 40 43 46 49 52][30 33 36 39 42 45 48 51 54 57][35 38 41 44 47 50 53 56 59 62][40 43 46 49 52 55 58 61 64 67][45 48 51 54 57 60 63 66 69 72]</code></pre><p>æå–è¿™äº›æ•°æ®çš„æ ‡ç­¾æ–¹æ³•ï¼š</p><pre><code class="lang-py">dense_labels_ds = ds.map(dense_1_step)for inputs,labels in dense_labels_ds.take(3):  print(inputs.numpy(), &quot;=&gt;&quot;, labels.numpy())[ 0  3  6  9 12 15 18 21 24] =&gt; [ 3  6  9 12 15 18 21 24 27][ 5  8 11 14 17 20 23 26 29] =&gt; [ 8 11 14 17 20 23 26 29 32][10 13 16 19 22 25 28 31 34] =&gt; [13 16 19 22 25 28 31 34 37]</code></pre><h2 id="é‡é‡‡æ ·"><a href="#é‡é‡‡æ ·" class="headerlink" title="é‡é‡‡æ ·"></a>é‡é‡‡æ ·</h2><p>æœ‰ä¸€äº›æ•°æ®é›†ï¼Œä¸åŒç±»åˆ«çš„æ•°æ®åˆ†å¸ƒä¸å‡åŒ€ã€‚è¿™ä¸ªæ—¶å€™éœ€è¦å¯¹é‚£äº›ä¸è¶³çš„ç±»åˆ«è¿›è¡Œé‡é‡‡æ ·ã€‚</p><p>ç»™å®šä¿¡ç”¨å¡æ¬ºè¯ˆï¼ˆäºŒåˆ†ç±»ï¼‰æ•°æ®é›†ï¼Œä¸‹é¢é¦–å…ˆæ£€æŸ¥æ•°æ®é›†ä¸­ä¸åŒç±»åˆ«çš„å æ¯”</p><pre><code class="lang-py">def count(counts, batch):  features, labels = batch  class_1 = labels == 1  class_1 = tf.cast(class_1, tf.int32)  class_0 = labels == 0  class_0 = tf.cast(class_0, tf.int32)  counts[&#39;class_0&#39;] += tf.reduce_sum(class_0)  counts[&#39;class_1&#39;] += tf.reduce_sum(class_1)  return countscounts = creditcard_ds.take(10).reduce(    initial_state=&#123;&#39;class_0&#39;: 0, &#39;class_1&#39;: 0&#125;,    reduce_func = count)counts = np.array([counts[&#39;class_0&#39;].numpy(),                   counts[&#39;class_1&#39;].numpy()]).astype(np.float32)fractions = counts/counts.sum()print(fractions)[0.9953 0.0047]</code></pre><p>åå·®å¾ˆå¤§ï¼Œè¿™æ ·è®­ç»ƒçš„äºŒåˆ†ç±»å™¨åªéœ€å…¨é¢„æµ‹ä¸ºæ­£ç±»ï¼Œå³å¯è¾¾åˆ°99.53%çš„æ­£ç¡®ç‡ã€‚</p><p>é‡é‡‡æ ·æ•°æ®é›†çš„ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨<code>sample_from_datasets</code> ã€‚å½“æ¯ä¸ªç±»éƒ½æœ‰å•ç‹¬çš„<code>data.Dataset</code>æ—¶ï¼Œæ­¤æ–¹æ³•æ›´é€‚ç”¨ã€‚</p><p>æ­£ç±»å’Œåç±»åˆ†åˆ«æ„å»º <code>Dataset</code></p><pre><code class="lang-py">negative_ds = (  creditcard_ds    .unbatch()    .filter(lambda features, label: label==0)    .repeat())positive_ds = (  creditcard_ds    .unbatch()    .filter(lambda features, label: label==1)    .repeat())</code></pre><p>è¦ä½¿ç”¨<code>tf.data.experimental.sample_from_datasets</code>ä¼ é€’æ•°æ®é›†ä»¥åŠæ¯ä¸ªæ•°æ®é›†çš„æƒé‡</p><pre><code class="lang-py">balanced_ds = tf.data.experimental.sample_from_datasets(    [negative_ds, positive_ds], [0.5, 0.5]).batch(10)for features, labels in balanced_ds.take(10):  print(labels.numpy())[0 1 1 0 0 1 0 1 0 0][0 1 0 1 1 0 0 1 1 0][1 1 1 0 0 1 1 0 1 1][0 0 0 0 1 1 0 0 1 0][0 1 1 0 0 0 1 0 0 0][1 1 0 0 0 0 0 0 0 0][0 1 0 1 1 0 0 1 1 1][0 0 1 0 1 0 1 0 1 1][1 0 1 1 0 1 0 0 1 0][0 0 0 1 1 1 1 0 1 1]</code></pre><p>ç°åœ¨æ•°æ®é›†å°±å¹³è¡¡äº†ã€‚</p><p>ä¸Šè¿°<code>experimental.sample_from_datasets</code>æ–¹æ³•çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæ¯ä¸ªç±»éœ€è¦ä¸€ä¸ªå•ç‹¬çš„<code>tf.data.Dataset</code>ã€‚</p><p>å¯ä»¥å°†<code>data.experimental.rejection_resample</code>å‡½æ•°åº”ç”¨äºæ•°æ®é›†ï¼Œå®ƒä»…åŠ è½½ä¸€æ¬¡ï¼Œé€šè¿‡å°†å¤šä½™å…ƒç´ å°†ä»æ•°æ®é›†ä¸­åˆ é™¤ä»¥å®ç°å¹³è¡¡ã€‚</p><p><code>data.experimental.rejection_resample</code>é‡‡ç”¨<code>class_func</code>å‚æ•°ï¼Œç”¨äºæ ‡è®°æ¯ä¸ªæ•°æ®é›†å…ƒç´ æ‰€å±çš„ç±»åˆ«ã€‚</p><p>ç”±äº<code>Dataset</code>å·²ç»æ˜¯<code>(features, label)</code>æ ‡è®°å¥½çš„çŠ¶æ€ï¼Œå› æ­¤åªéœ€</p><pre><code class="lang-py">def class_func(features, label):  return label</code></pre><p>é‡é‡‡æ ·å™¨è¾“å…¥çš„æ•°æ®ä¸èƒ½ä¸ºbatchåçš„Datasetï¼Œå¿…é¡»ç»è¿‡unbatchã€‚é‡é‡‡æ ·å™¨è¿˜éœ€è¦ç›®æ ‡åˆ†å¸ƒï¼Œä»¥åŠå¯é€‰çš„åˆå§‹åˆ†å¸ƒä¼°è®¡ã€‚æœ€åç»è¿‡mapä¸­çš„å‡½æ•°ï¼Œç›´æ¥åˆ é™¤æ‰extra_labelå³å¯ã€‚</p><pre><code class="lang-py">resampler = tf.data.experimental.rejection_resample(    class_func, target_dist=[0.5, 0.5], initial_dist=fractions)resample_ds = creditcard_ds.unbatch().apply(resampler).batch(10)balanced_ds = resample_ds.map(lambda extra_label, features_and_label: features_and_label)</code></pre><h2 id="æ•°æ®é›†è¿­ä»£å™¨çš„checkpoint"><a href="#æ•°æ®é›†è¿­ä»£å™¨çš„checkpoint" class="headerlink" title="æ•°æ®é›†è¿­ä»£å™¨çš„checkpoint"></a>æ•°æ®é›†è¿­ä»£å™¨çš„checkpoint</h2><p>æ²¡æƒ³åˆ°å§ï¼Ÿä¸åªæ˜¯æ¨¡å‹èƒ½ä½¿ç”¨checkpointï¼ŒDatasetçš„å¤„ç†è¿‡ç¨‹ä¹Ÿå¯ä»¥ä½¿ç”¨checkpointã€‚å¦‚æœæ‚¨æœ‰ä¸€ä¸ªå¾ˆå¤§çš„æ•°æ®é›†ï¼Œå¹¶ä¸”ä¸æƒ³åœ¨æ¯æ¬¡é‡æ–°å¯åŠ¨æ—¶éƒ½ä»å¤´å¼€å§‹ï¼Œåˆ™è¿™å¯èƒ½å¾ˆæœ‰ç”¨ã€‚ä½†æ˜¯è¯·æ³¨æ„ï¼Œè¿­ä»£å™¨æ£€æŸ¥ç‚¹å¯èƒ½å¾ˆå¤§ï¼Œå› ä¸ºè¯¸å¦‚shuffleå’Œprefetchéœ€è¦è¿­ä»£å™¨ä¸­çš„ç¼“å†²å…ƒç´ ã€‚</p><p>ä¸‹é¢æ˜¯ç¤ºä¾‹ï¼š</p><pre><code class="lang-py">range_ds = tf.data.Dataset.range(20)iterator = iter(range_ds)ckpt = tf.train.Checkpoint(step=tf.Variable(0), iterator=iterator)manager = tf.train.CheckpointManager(ckpt, &#39;/tmp/my_ckpt&#39;, max_to_keep=3)print([next(iterator).numpy() for _ in range(5)])[0, 1, 2, 3, 4]save_path = manager.save()print([next(iterator).numpy() for _ in range(5)])[5, 6, 7, 8, 9]ckpt.restore(manager.latest_checkpoint)print([next(iterator).numpy() for _ in range(5)])[5, 6, 7, 8, 9]</code></pre><h2 id="åœ¨Kerasä¸­ä½¿ç”¨tf-data"><a href="#åœ¨Kerasä¸­ä½¿ç”¨tf-data" class="headerlink" title="åœ¨Kerasä¸­ä½¿ç”¨tf.data"></a>åœ¨Kerasä¸­ä½¿ç”¨<code>tf.data</code></h2><p>æ•°æ®é›†çš„å¤„ç†ï¼š</p><pre><code class="lang-py">train, test = tf.keras.datasets.fashion_mnist.load_data()images, labels = trainimages = images/255.0labels = labels.astype(np.int32)fmnist_train_ds = tf.data.Dataset.from_tensor_slices((images, labels))fmnist_train_ds = fmnist_train_ds.shuffle(5000).batch(32)</code></pre><p>æ¨¡å‹æ„å»ºï¼š</p><pre><code class="lang-py">model = tf.keras.Sequential([  tf.keras.layers.Flatten(),  tf.keras.layers.Dense(10)])model.compile(optimizer=&#39;adam&#39;,              loss=tf.keras.losses.SparseCategoricalCrossentropy(from_logits=True),               metrics=[&#39;accuracy&#39;])</code></pre><p>æ¨¡å‹è®­ç»ƒï¼š</p><pre><code class="lang-py">model.fit(fmnist_train_ds, epochs=2)</code></pre><p>å¦‚æœåœ¨fitè¿‡ç¨‹ä¸­ä½ è¦å¯¹Datasetè¿›è¡Œrepeatï¼Œåªéœ€æŒ‡å®šæ¯ä¸ªepochsä½¿ç”¨çš„æ•°æ®ä¸ªæ•°ï¼Œç„¶åä¸ç»™repeatæŒ‡å®šå‚æ•°ï¼Œæ•°æ®é›†å°±ä¼šå˜æˆæ— é™ä¸ªï¼Œä¸€å®šä¼šæ»¡è¶³epochsçš„è¦æ±‚ã€‚</p><pre><code class="lang-py">model.fit(fmnist_train_ds.repeat(), epochs=2, steps_per_epoch=20)</code></pre><p>åŒç†ï¼Œevaluateæ—¶ä¹Ÿæ˜¯ä¸€æ ·çš„</p><pre><code class="lang-py">loss, accuracy = model.evaluate(fmnist_train_ds.repeat(), steps=10)print(&quot;Loss :&quot;, loss)print(&quot;Accuracy :&quot;, accuracy)Loss : 0.3501795828342438Accuracy : 0.8968750238418579</code></pre><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¦‚æœåœ¨ä½¿ç”¨æœºå™¨å­¦ä¹ ç®—æ³•è§£å†³é—®é¢˜è¿‡ç¨‹ä¸­ï¼Œæ•°æ®é¢„å¤„ç†æ˜¯ä¸»è¦é—®é¢˜çš„è¯ï¼Œé‡‡ç”¨åˆé€‚çš„æ•°æ®ç»„ç»‡æ‰‹æ®µå¯ä»¥å¸®åŠ©è§£å†³é—®é¢˜ã€‚ <code>tf.data</code> èƒ½å¤Ÿå¿«é€Ÿå¤„ç†å¤§é‡æ•°æ®ï¼Œå¹¶å°†å„ä¸ªæ¥æºçš„æ•°æ®å½’ä¸€åŒ–æˆåˆé€‚çš„ <code>Dataset</code> æ ¼å¼ã€‚</p><p>ä½ å¯ä»¥å¯¹æ„å»ºå¥½çš„ <code>tf.data.Dataset</code> åšé¢„å¤„ç†æ“ä½œï¼Œæ¯”å¦‚éšæœºæ‰“ä¹±ã€åˆ†æ‰¹æ¬¡ã€è§„åˆ’æ—¶é—´çª—å£ã€é‡é‡‡æ ·ç­‰ç­‰ã€‚</p><p>ç»è¿‡å¤„ç†åçš„ <code>Dataset</code> å¯¹è±¡å¯ä»¥ç›´æ¥è¾“å…¥åˆ°kerasè¿›è¡Œè®­ç»ƒã€‚</p></BatchDataset></BatchDataset>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Tensorflow</tag>
      
      <tag>preprocessing</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘ä½¿ç”¨TensorBoardåˆ†ææ¨¡å‹æ€§èƒ½</title>
    <link href="/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E4%BD%BF%E7%94%A8TensorBoard%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%A7%E8%83%BD/"/>
    <url>/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E4%BD%BF%E7%94%A8TensorBoard%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%A7%E8%83%BD/</url>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯TensorBoardç¬”è®°çš„ç¬¬å…­ç¯‡ï¼Œè®²è¿°çš„æ˜¯å¦‚ä½•ä½¿ç”¨TensorBoardåˆ†ææ¨¡å‹çš„æ€§èƒ½ï¼Œä¼˜åŒ–æ¨¡å‹çš„èµ„æºæ¶ˆè€—ã€‚<br><!--more---></p><p>TensorBoardå¯ä»¥ç›‘æ§æ¨¡å‹çš„å„ä¸ªç»„åˆ†è¿è¡Œè¿‡ç¨‹ä¸­çš„æ—¶é—´æ¶ˆè€—å’Œèµ„æºæ¶ˆè€—ï¼Œå¹¶æ ¹æ®è¿™äº›æ•°æ®å¯¹æ¨¡å‹ä¸‹ä¸€æ­¥ä¼˜åŒ–æå‡ºå»ºè®®ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬å®‰è£…æ€§èƒ½åˆ†æçš„æ’ä»¶</p><pre><code class="lang-bash">!pip install -U tensorboard_plugin_profile</code></pre><p>å®šä¹‰TensorBoardçš„å›è°ƒå‡½æ•°ï¼ˆæ•°æ®é¢„å¤„ç†å’Œæ¨¡å‹å®šä¹‰ç•¥å»ä¸è¡¨ï¼‰ï¼Œæ³¨æ„è¿™é‡Œæ–°çš„å‚æ•°<code>profile_batch</code>åªç›‘æ§ç¬¬500åˆ°520ä¹‹é—´çš„20ä¸ªBatchï¼Œé¿å…ç›‘æ§è¿‡å¤šå¯¼è‡´æ¨¡å‹è¿è¡Œæ•ˆç‡è¿‡ä½ã€‚</p><pre><code class="lang-python"># Create a TensorBoard callbacklogs = &quot;logs/&quot; + datetime.now().strftime(&quot;%Y%m%d-%H%M%S&quot;)tboard_callback = tf.keras.callbacks.TensorBoard(log_dir=logs,                        histogram_freq=1,                        profile_batch=&#39;500,520&#39;)model.fit(ds_train,    epochs=2,    validation_data=ds_test,    callbacks=[tboard_callback])</code></pre><p>æ‰“å¼€TensorBoardï¼š</p><pre><code class="lang-bash"># Load the TensorBoard notebook extension.%load_ext tensorboard# Launch TensorBoard and navigate to the Profile tab to view performance profile%tensorboard --logdir=logs</code></pre><p><img src="/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E4%BD%BF%E7%94%A8TensorBoard%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%A7%E8%83%BD/2020-08-14-16-47-10.png" alt></p><p>æœ‰éå¸¸å¤šæœ‰ç”¨çš„ä¿¡æ¯ï¼Œæ¯”å¦‚æ¯ä¸ªbatchæ¶ˆè€—çš„æ—¶é—´éƒ½èŠ±åœ¨å“ªé‡Œäº†ï¼š</p><p><img src="/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E4%BD%BF%E7%94%A8TensorBoard%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%A7%E8%83%BD/2020-08-14-17-09-32.png" alt></p><p>è¿˜æœ‰é’ˆå¯¹è€—æ—¶çš„æ”¹è¿›æ„è§ï¼š</p><p><img src="/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E4%BD%BF%E7%94%A8TensorBoard%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%A7%E8%83%BD/2020-08-14-17-09-56.png" alt></p><p>æœ‰è€—æ—¶æœ€é•¿çš„10å¤§æ“ä½œï¼š</p><p><img src="/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E4%BD%BF%E7%94%A8TensorBoard%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%A7%E8%83%BD/2020-08-14-17-10-27.png" alt></p><p>æœ‰æ€§èƒ½ç›‘æ§é€‰é¡¹ï¼ŒæŸ¥çœ‹CPUæ´»åŠ¨å’ŒGPUæ´»åŠ¨ã€‚æ ¹æ®ä¸€èˆ¬ç»éªŒï¼Œå§‹ç»ˆä¿æŒè®¾å¤‡ï¼ˆGPU / TPUï¼‰å¤„äºæ´»åŠ¨çŠ¶æ€æ˜¯æˆ‘ä»¬çš„ä¼˜åŒ–ç›®æ ‡ã€‚</p><p><img src="https://raw.githubusercontent.com/tensorflow/tensorboard/master/docs/images/profiler_trace_viewer_bad_ip.png" alt></p><p>æŸ¥çœ‹äº‹ä»¶è·Ÿè¸ªï¼Œå¯ä»¥çœ‹åˆ°<code>tf_data_iterator_get_next</code> æ“ä½œåœ¨CPUä¸Šè¿è¡Œæ—¶GPUä¸æ´»åŠ¨ã€‚è¯¥æ“ä½œè´Ÿè´£å¤„ç†è¾“å…¥æ•°æ®å¹¶å°†å…¶å‘é€åˆ°GPUè¿›è¡Œè®­ç»ƒã€‚å› æ­¤æˆ‘ä»¬çš„ä¼˜åŒ–æ–¹æ³•å¯ä»¥æ˜¯ä½¿ç”¨tf.data APIä¼˜åŒ–è¾“å…¥ç®¡é“ï¼Œç¼“å­˜è®­ç»ƒæ•°æ®é›†å¹¶é¢„å–æ•°æ®ï¼Œä»¥ç¡®ä¿å§‹ç»ˆæœ‰å¯ä¾›GPUå¤„ç†çš„æ•°æ®ã€‚</p><pre><code class="lang-python"> (ds_train, ds_test), ds_info = tfds.load(    &#39;mnist&#39;,    split=[&#39;train&#39;, &#39;test&#39;],    shuffle_files=True,    as_supervised=True,    with_info=True,)ds_train = ds_train.map(normalize_img)ds_train = ds_train.batch(128)ds_train = ds_train.cache()ds_train = ds_train.prefetch(tf.data.experimental.AUTOTUNE)ds_test = ds_test.map(normalize_img)ds_test = ds_test.batch(128)ds_test = ds_test.cache()ds_test = ds_test.prefetch(tf.data.experimental.AUTOTUNE)model.fit(ds_train,        epochs=2,        validation_data=ds_test,        callbacks = [tboard_callback])%tensorboard --logdir=logs</code></pre><p>è·Ÿè¸ªæŸ¥çœ‹å™¨æ˜¾ç¤º<code>tf_data_iterator_get_next</code>æ“ä½œæ‰§è¡Œå¾—æ›´å¿«ã€‚å› æ­¤ï¼ŒGPUè·å¾—äº†ç¨³å®šçš„æ•°æ®æµä»¥è¿›è¡Œè®­ç»ƒï¼Œå¹¶é€šè¿‡æ¨¡å‹è®­ç»ƒè·å¾—äº†æ›´å¥½çš„åˆ©ç”¨ç‡ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Tensorflow</tag>
      
      <tag>TensorBoard</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘é€šè¿‡TensorBoardå¯è§†åŒ–è¯åµŒå…¥ç©ºé—´</title>
    <link href="/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87TensorBoard%E5%8F%AF%E8%A7%86%E5%8C%96%E8%AF%8D%E5%B5%8C%E5%85%A5%E7%A9%BA%E9%97%B4/"/>
    <url>/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87TensorBoard%E5%8F%AF%E8%A7%86%E5%8C%96%E8%AF%8D%E5%B5%8C%E5%85%A5%E7%A9%BA%E9%97%B4/</url>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯TensorBoardç¬”è®°çš„ç¬¬äº”ç¯‡ï¼Œè®²è¿°çš„æ˜¯å¦‚ä½•ä½¿ç”¨TensorBoardå¯¹è¯åµŒå…¥ç©ºé—´å¯è§†åŒ–ã€‚<br><!--more---></p><p>TensorBoardå¯ä»¥å°†è¯åµŒå…¥ç©ºé—´äºŒç»´åŒ–ï¼Œæ–¹ä¾¿æˆ‘ä»¬ç†è§£è¯åµŒå…¥ç©ºé—´çš„å«ä¹‰ã€‚</p><pre><code class="lang-python">from tensorboard.plugins import projector</code></pre><p>å¼•å…¥IMDbæ•°æ®é›†ã€‚tensorflow_datasetsæ˜¯tensorflowçš„å®˜æ–¹æ•°æ®é›†åº“ã€‚</p><pre><code class="lang-python">import tensorflow_datasets as tfds(train_data, test_data), info = tfds.load(    &quot;imdb_reviews/subwords8k&quot;,    split=(tfds.Split.TRAIN, tfds.Split.TEST),    with_info=True,    as_supervised=True,)encoder = info.features[&quot;text&quot;].encoder# shuffle and pad the data.train_batches = train_data.shuffle(1000).padded_batch(    10, padded_shapes=((None,), ()))test_batches = test_data.shuffle(1000).padded_batch(    10, padded_shapes=((None,), ()))train_batch, train_labels = next(iter(train_batches))</code></pre><p>è®­ç»ƒè¯åµŒå…¥æ¨¡å‹</p><pre><code class="lang-python"># Create an embedding layerembedding_dim = 16embedding = tf.keras.layers.Embedding(encoder.vocab_size, embedding_dim)# Train this embedding as part of a keras modelmodel = tf.keras.Sequential(    [        embedding, # The embedding layer should be the first layer in a model.        tf.keras.layers.GlobalAveragePooling1D(),        tf.keras.layers.Dense(16, activation=&quot;relu&quot;),        tf.keras.layers.Dense(1),    ])# Compile modelmodel.compile(    optimizer=&quot;adam&quot;,    loss=tf.keras.losses.BinaryCrossentropy(from_logits=True),    metrics=[&quot;accuracy&quot;],)# Train modelhistory = model.fit(    train_batches, epochs=1, validation_data=test_batches, validation_steps=20)</code></pre><p>å°†æ•°æ®ä¿å­˜æˆæ–¹ä¾¿TensorBoardè¯»å–çš„å½¢å¼</p><pre><code class="lang-python"># Set up a logs directory, so Tensorboard knows where to look for fileslog_dir=&#39;/logs/imdb-example/&#39;if not os.path.exists(log_dir):    os.makedirs(log_dir)# Save Labels separately on a line-by-line manner.with open(os.path.join(log_dir, &#39;metadata.tsv&#39;), &quot;w&quot;) as f:  for subwords in encoder.subwords:    f.write(&quot;&#123;&#125;\n&quot;.format(subwords))  # Fill in the rest of the labels with &quot;unknown&quot;  for unknown in range(1, encoder.vocab_size - len(encoder.subwords)):    f.write(&quot;unknown #&#123;&#125;\n&quot;.format(unknown))# Save the weights we want to analyse as a variable. Note that the first# value represents any unknown word, which is not in the metadata, so# we will remove that value.weights = tf.Variable(model.layers[0].get_weights()[0][1:])# Create a checkpoint from embedding, the filename and key are# name of the tensor.checkpoint = tf.train.Checkpoint(embedding=weights)checkpoint.save(os.path.join(log_dir, &quot;embedding.ckpt&quot;))# Set up configconfig = projector.ProjectorConfig()embedding = config.embeddings.add()# The name of the tensor will be suffixed by `/.ATTRIBUTES/VARIABLE_VALUE`embedding.tensor_name = &quot;embedding/.ATTRIBUTES/VARIABLE_VALUE&quot;embedding.metadata_path = &#39;metadata.tsv&#39;projector.visualize_embeddings(log_dir, config)</code></pre><pre><code class="lang-python">%tensorboard --logdir /logs/imdb-example/</code></pre><p>ä½ å¯ä»¥çœ‹åˆ°2ç»´ã€3ç»´ç©ºé—´ä¸­çš„Embeddingï¼Œæœç´¢æŸä¸ªå•è¯åœ¨è¯åµŒå…¥ç©ºé—´ä¸­çš„ä½ç½®ï¼Œç”šè‡³å¯ä»¥é‡‡å–ä¸åŒçš„å¯è§†åŒ–æ–¹æ³•ï¼š<br><img src="/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87TensorBoard%E5%8F%AF%E8%A7%86%E5%8C%96%E8%AF%8D%E5%B5%8C%E5%85%A5%E7%A9%BA%E9%97%B4/2020-08-13-19-45-25.png" alt></p><p>æ‰“å¼€è¯¥å·¥å…·çš„æ—¶å€™æˆ‘çš„ç”µè„‘å¾ˆå¡ã€‚ã€‚ã€‚å¸Œæœ›å¤§å®¶æ³¨æ„ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Tensorflow</tag>
      
      <tag>TensorBoard</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘é€šè¿‡TensorBoardè°ƒæ•´è¶…å‚æ•°</title>
    <link href="/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87TensorBoard%E8%B0%83%E6%95%B4%E8%B6%85%E5%8F%82%E6%95%B0/"/>
    <url>/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87TensorBoard%E8%B0%83%E6%95%B4%E8%B6%85%E5%8F%82%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯TensorBoardç¬”è®°çš„ç¬¬å››ç¯‡ï¼Œè®²è¿°çš„æ˜¯å¦‚ä½•å€ŸåŠ©TensorBoardè°ƒæ•´æ¨¡å‹çš„è¶…å‚æ•°ã€‚<br><!--more---></p><p>TensorBoardä¸­çš„HParamsä»ªè¡¨æ¿æ˜¯æ¯”è¾ƒæ–°é¢–çš„å·¥å…·åŒ…ï¼Œæä¾›äº†å¤šç§è°ƒèŠ‚è¶…å‚æ•°çš„å·¥å…·ï¼Œå¹¶ä¸”è¯¥å·¥å…·è¿˜åœ¨ä¸æ–­æ›´æ–°ä¸­ã€‚</p><pre><code class="lang-python">from tensorboard.plugins.hparams import api as hp</code></pre><p>ç”¨è¿‡sklearnè¿›è¡Œæœºå™¨å­¦ä¹ æ¨¡å‹è°ƒå‚çš„åŒå­¦åº”è¯¥ä½“éªŒè¿‡äº¤å‰éªŒè¯è°ƒå‚çš„æ–¹æ³•ã€‚é€šè¿‡æä¾›è®¸å¤šä¸åŒçš„è¶…å‚æ•°é€‰é¡¹ï¼Œ<code>GridSearchCV</code>å°†è®­ç»ƒå¤šä¸ªæ¨¡å‹ï¼Œå¹¶å–æ€§èƒ½æœ€ä¼˜çš„æ¨¡å‹è¶…å‚æ•°ã€‚</p><pre><code class="lang-python">from sklearn.model_selection import GridSearchCVfrom sklearn.pipeline import make_pipelineX_train, X_test, y_train, y_test = train_test_split(df_train[&#39;text&#39;][:10000], df_train[&#39;label&#39;][:10000], random_state=0)pipe_logis = make_pipeline(TfidfVectorizer(min_df=5, ngram_range=(1,3)), LogisticRegression())param_grid = &#123;&#39;logisticregression__C&#39;: [0.001, 0.01, 0.1, 1, 10]&#125;grid = GridSearchCV(pipe_logis, param_grid, cv=5)grid.fit(X_train, y_train)print(&quot;Best params:\n&#123;&#125;\n&quot;.format(grid.best_params_))print(&quot;Best cross-validation score: &#123;:.2f&#125;&quot;.format(grid.best_score_))print(&quot;Test-set score: &#123;:.2f&#125;&quot;.format(grid.score(X_test, y_test)))</code></pre><p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œgridä¸­åŒ…å«ä¸€ä¸ªéœ€è¦è°ƒèŠ‚çš„è¶…å‚æ•°ï¼Œå³é€»è¾‘å›å½’çš„Cå€¼ã€‚å€™é€‰Cå€¼æœ‰5ä¸ªï¼Œå› æ­¤gridåœ¨fitè¿‡ç¨‹ä¸­ä¼šè®­ç»ƒäº”ä¸ªæ¨¡å‹ï¼Œæ¯ä¸ªæ¨¡å‹æ‰§è¡Œ5æ¬¡äº¤å‰éªŒè¯ï¼ˆå› ä¸ºfitä¸­cvå‚æ•°ä¸º5ï¼‰ã€‚</p><p>HParamsä¹Ÿæ˜¯é‡‡ç”¨ç±»ä¼¼çš„æ–¹æ³•æ‰¾è¶…å‚æ•°ã€‚é¦–å…ˆæˆ‘ä»¬å®šä¹‰å€™é€‰è¶…å‚æ•°çš„å˜åŒ–èŒƒå›´ã€‚æˆ‘ä»¬é€‰æ‹©ä¸‰ä¸ªå‚æ•°è¿›è¡Œç½‘æ ¼æœç´¢ï¼Œåˆ†åˆ«æ˜¯Denseå±‚çš„Unitæ•°ç›®ã€dropoutçš„æ¯”ä¾‹å’Œä¼˜åŒ–å™¨ï¼Œæ¯ä¸ªè¶…å‚æ•°éƒ½æœ‰ä¸¤ç§é€‰æ‹©ï¼Œå› æ­¤ä¸€å…±éœ€è¦è®­ç»ƒå…«ä¸ªæ¨¡å‹ã€‚</p><p>æœ€ç»ˆæ¨¡å‹çš„è¯„ä»·æ ‡å‡†ä»¥Accuracyä¸ºå‡†ã€‚å…·ä½“ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code class="lang-python">HP_NUM_UNITS = hp.HParam(&#39;num_units&#39;, hp.Discrete([16, 32]))HP_DROPOUT = hp.HParam(&#39;dropout&#39;, hp.RealInterval(0.1, 0.2))HP_OPTIMIZER = hp.HParam(&#39;optimizer&#39;, hp.Discrete([&#39;adam&#39;, &#39;sgd&#39;]))METRIC_ACCURACY = &#39;accuracy&#39;</code></pre><p>è®¾ç½®writeå¥æŸ„ï¼Œè¿™å·²ç»æ˜¯ä¼ ç»Ÿè‰ºèƒ½äº†ã€‚</p><pre><code class="lang-python">with tf.summary.create_file_writer(&#39;logs/hparam_tuning&#39;).as_default():  hp.hparams_config(    hparams=[HP_NUM_UNITS, HP_DROPOUT, HP_OPTIMIZER],    metrics=[hp.Metric(METRIC_ACCURACY, display_name=&#39;Accuracy&#39;)],  )</code></pre><p>æ¥ä¸‹æ¥æˆ‘ä»¬å®šä¹‰å¾…è®­ç»ƒæ¨¡å‹ã€‚æ¨¡å‹æœ¬èº«éå¸¸ç®€å•ï¼Œè€Œä¸”åªè®­ç»ƒä¸€ä¸ªepochï¼Œè¿™æ˜¯è€ƒè™‘åˆ°è¦æ¶ˆè€—å¹³æ—¶å…«å€çš„æ—¶é—´è€Œé‡‡å–çš„tradeoffã€‚</p><pre><code class="lang-python">def train_test_model(hparams):  model = tf.keras.models.Sequential([    tf.keras.layers.Flatten(),    tf.keras.layers.Dense(hparams[HP_NUM_UNITS], activation=tf.nn.relu),    tf.keras.layers.Dropout(hparams[HP_DROPOUT]),    tf.keras.layers.Dense(10, activation=tf.nn.softmax),  ])  model.compile(      optimizer=hparams[HP_OPTIMIZER],      loss=&#39;sparse_categorical_crossentropy&#39;,      metrics=[&#39;accuracy&#39;],  )  model.fit(x_train, y_train, epochs=1) # Run with 1 epoch to speed things up for demo purposes  _, accuracy = model.evaluate(x_test, y_test)  return accuracy</code></pre><p>è¿›è¡Œè®­ç»ƒå¹¶è®°å½•æ¨¡å‹è¾“å‡ºï¼›</p><pre><code class="lang-python">def run(run_dir, hparams):  with tf.summary.create_file_writer(run_dir).as_default():    hp.hparams(hparams)  # record the values used in this trial    accuracy = train_test_model(hparams)    tf.summary.scalar(METRIC_ACCURACY, accuracy, step=1)</code></pre><p>ä¹‹åæˆ‘ä»¬è¿›è¡Œç½‘æ ¼æœç´¢ï¼ˆå…¶å®å°±æ˜¯éå†æ¯ç§å¯èƒ½ã€‚æœç´¢æ–¹æ³•å®Œå…¨æ˜¯è‡ªå·±å®šä¹‰çš„ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨éšæœºæœç´¢æ–¹æ³•ï¼‰ï¼š</p><pre><code class="lang-python">session_num = 0for num_units in HP_NUM_UNITS.domain.values:  for dropout_rate in (HP_DROPOUT.domain.min_value, HP_DROPOUT.domain.max_value):    for optimizer in HP_OPTIMIZER.domain.values:      hparams = &#123;          HP_NUM_UNITS: num_units,          HP_DROPOUT: dropout_rate,          HP_OPTIMIZER: optimizer,      &#125;      run_name = &quot;run-%d&quot; % session_num      print(&#39;--- Starting trial: %s&#39; % run_name)      print(&#123;h.name: hparams[h] for h in hparams&#125;)      run(&#39;logs/hparam_tuning/&#39; + run_name, hparams)      session_num += 1</code></pre><p>æœ€åä½¿ç”¨TensorBoardè¿›è¡Œå¯è§†åŒ–ï¼š</p><pre><code class="lang-bash">%tensorboard --logdir logs/hparam_tuning</code></pre><p><img src="https://www.tensorflow.org/tensorboard/images/hparams_table.png?raw=1" alt></p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡TensorBoardå‘ç°å¾ˆå¤šæœ‰è¶£çš„ç°è±¡ï¼šæ¯”å¦‚åœ¨æœ¬æ¨¡å‹ä¸­ï¼Œadamä¼˜åŒ–å™¨æ¯”sgdè¦å¥½ç­‰ç­‰ã€‚</p><p><img src="/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E9%80%9A%E8%BF%87TensorBoard%E8%B0%83%E6%95%B4%E8%B6%85%E5%8F%82%E6%95%B0/2020-08-13-19-19-41.png" alt></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Tensorflow</tag>
      
      <tag>TensorBoard</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘ç”¨TensorBoardç”Ÿæˆæ¨¡å‹å›¾</title>
    <link href="/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E7%94%A8TensorBoard%E7%94%9F%E6%88%90%E6%A8%A1%E5%9E%8B%E5%9B%BE/"/>
    <url>/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E7%94%A8TensorBoard%E7%94%9F%E6%88%90%E6%A8%A1%E5%9E%8B%E5%9B%BE/</url>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯TensorBoardç¬”è®°çš„ç¬¬ä¸‰ç¯‡ï¼Œè®²è¿°çš„æ˜¯å¦‚ä½•ä»¤TensorBoardç”Ÿæˆæ¨¡å‹æ¶æ„å›¾ã€‚<br><!--more---></p><p>TensorBoardä¸ä½†å¯ä»¥å±•ç¤ºå­˜åœ¨çš„å›¾ç‰‡å’Œå¼ é‡ï¼Œè¿˜å¯ä»¥ç”Ÿæˆå›¾ç‰‡ï¼Œè¯¸å¦‚æ¨¡å‹å›¾ç­‰ã€‚é€šè¿‡TensorBoardçš„GRAPHSé€‰é¡¹å¡ï¼Œå¯ä»¥å¿«é€ŸæŸ¥çœ‹æ¨¡å‹ç»“æ„çš„é¢„è§ˆå›¾ï¼Œå¹¶ç¡®ä¿å…¶ç¬¦åˆè®¾è®¡é¢„æœŸã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬å®šä¹‰æ¨¡å‹å¦‚ä¸‹ï¼š</p><pre><code class="lang-python">model = keras.models.Sequential([    keras.layers.Flatten(input_shape=(28, 28)),    keras.layers.Dense(32, activation=&#39;relu&#39;),    keras.layers.Dropout(0.2),    keras.layers.Dense(10, activation=&#39;softmax&#39;)])model.compile(    optimizer=&#39;adam&#39;,    loss=&#39;sparse_categorical_crossentropy&#39;,    metrics=[&#39;accuracy&#39;])</code></pre><p><img src="/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E7%94%A8TensorBoard%E7%94%9F%E6%88%90%E6%A8%A1%E5%9E%8B%E5%9B%BE/2020-08-13-13-31-51.png" alt></p><p>é€šè¿‡TensorBoardä¸­çš„GRAPHSé€‰é¡¹å¡ï¼Œæˆ‘ä»¬çœ‹åˆ°æ‰§è¡Œå›¾ã€‚å›¾æ˜¯å€’ç½®çš„ï¼Œæ•°æ®ä»ä¸‹åˆ°ä¸ŠæµåŠ¨ï¼Œå› æ­¤ä¸ä»£ç ç›¸æ¯”æ˜¯ä¸Šä¸‹é¢ å€’çš„ã€‚</p><p>å¯ä»¥æ›´æ”¹Tagï¼Œé€‰æ‹©Kerasï¼Œé€‰æ‹©å·¦è¾¹çš„Conceptual GraphæŸ¥çœ‹æ¦‚å¿µå›¾ï¼ŒåŒå‡»Sequentialï¼Œå¾—åˆ°æ¦‚å¿µå›¾ã€‚æ¦‚å¿µå›¾æ›´åƒæ˜¯ä»£ç ã€‚</p><p><img src="/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E7%94%A8TensorBoard%E7%94%9F%E6%88%90%E6%A8%A1%E5%9E%8B%E5%9B%BE/2020-08-13-13-35-03.png" alt></p><p>æœ‰çš„æ—¶å€™æˆ‘ä»¬å¸Œæœ›å¾—åˆ°è®¡ç®—å›¾ï¼Œç ”ç©¶æ•°æ®ç»è¿‡äº†ä½•ç§è®¡ç®—ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªå‡½æ•°ï¼š</p><pre><code class="lang-python"># Sample data for your function.x = tf.random.uniform((3, 3))y = tf.random.uniform((3, 3))# The function to be traced.@tf.functiondef my_func(x, y):  # A simple hand-rolled layer.  return tf.nn.relu(tf.matmul(x, y))# z = my_func(x, y)</code></pre><p>æˆ‘ä»¬å¸Œæœ›å¾—åˆ°å®ƒçš„è®¡ç®—å›¾ã€‚é¦–å…ˆéœ€è¦ä½¿ç”¨<code>@tf.function</code>ä¿®é¥°è¢«ç›‘æ§çš„å‡½æ•°ï¼Œç„¶åä½¿ç”¨<code>tf.summary.trace_on()</code>åœ¨<code>z = my_func(x, y)</code>å‡½æ•°è¿è¡Œä¹‹å‰å¼€å§‹è®°å½•ã€‚</p><p><img src="https://as2.bitinn.net/uploads/legacy/og/cistioqrt008t8q5nh9gtx9og.1200.jpg" alt="Trace On"></p><pre><code class="lang-python">tf.summary.trace_on(graph=True, profiler=True)z = my_func(x, y)</code></pre><p>å®šä¹‰æ—¥å¿—ç›®å½•åç§°å’Œæ–‡ä»¶å†™å…¥å¥æŸ„ï¼Œè¿™äº›éƒ½æ˜¯åˆ»åœ¨DNAé‡Œçš„æ“ä½œï¼š</p><pre><code class="lang-python"># Set up logging.stamp = datetime.now().strftime(&quot;%Y%m%d-%H%M%S&quot;)logdir = &#39;logs/func/%s&#39; % stampwriter = tf.summary.create_file_writer(logdir)</code></pre><p>æœ€åæ‰§è¡Œè®°å½•ï¼š</p><pre><code class="lang-python"># Call only one tf.function when tracing.with writer.as_default():  tf.summary.trace_export(      name=&quot;my_func_trace&quot;,      step=0,      profiler_outdir=logdir)</code></pre><pre><code class="lang-bash">%tensorboard --logdir logs/func</code></pre><p><img src="/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E7%94%A8TensorBoard%E7%94%9F%E6%88%90%E6%A8%A1%E5%9E%8B%E5%9B%BE/2020-08-13-13-47-57.png" alt></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Tensorflow</tag>
      
      <tag>TensorBoard</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘ç”¨TensorBoardå±•ç¤ºå›¾ç‰‡</title>
    <link href="/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E7%94%A8TensorBoard%E5%B1%95%E7%A4%BA%E5%9B%BE%E7%89%87/"/>
    <url>/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E7%94%A8TensorBoard%E5%B1%95%E7%A4%BA%E5%9B%BE%E7%89%87/</url>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯TensorBoardç¬”è®°çš„ç¬¬äºŒç¯‡ï¼Œè®²è¿°çš„æ˜¯å¦‚ä½•ä»¤TensorBoardå±•ç¤ºå¤–ç•Œå·²æœ‰çš„å›¾ç‰‡å’ŒTensorã€‚<br><!--more---></p><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨TensorBoardå±•ç¤ºå›¾ç‰‡ç±»æ•°æ®ï¼Œæˆ–è€…é€šè¿‡tf.summaryå°†å¼ é‡ç±»æ•°æ®è½¬åŒ–æˆå›¾ç‰‡ã€‚ä¸‹é¢æ˜¯å¯¹Fashion-MNISTæ•°æ®é›†ä¸­éƒ¨åˆ†å›¾ç‰‡çš„å¯è§†åŒ–ï¼š</p><h3 id="å¯è§†åŒ–å•ä¸ªå›¾ç‰‡"><a href="#å¯è§†åŒ–å•ä¸ªå›¾ç‰‡" class="headerlink" title="å¯è§†åŒ–å•ä¸ªå›¾ç‰‡"></a>å¯è§†åŒ–å•ä¸ªå›¾ç‰‡</h3><pre><code class="lang-python">import tensorflow as tffrom tensorflow import kerasfashion_mnist = keras.datasets.fashion_mnist(train_images, train_labels), (test_images, test_labels) = \    fashion_mnist.load_data()</code></pre><p>æ•°æ®é›†ä¸­æ¯ä¸ªå›¾åƒçš„å½¢çŠ¶éƒ½æ˜¯2é˜¶å¼ é‡å½¢çŠ¶ï¼ˆ28ã€28ï¼‰ï¼Œåˆ†åˆ«è¡¨ç¤ºé«˜åº¦å’Œå®½åº¦</p><p>ä½†æ˜¯ï¼Œ tf.summary.image()æœŸæœ›åŒ…å«(batch_size, height, width, channels)çš„4çº§å¼ é‡ã€‚å› æ­¤ï¼Œå¼ é‡éœ€è¦é‡å¡‘ã€‚</p><pre><code class="lang-python">img = np.reshape(train_images[0], (-1, 28, 28, 1))</code></pre><p>ä½¿ç”¨<code>tf.summary.image</code>å°†å…¶è½¬åŒ–ä¸ºtensorï¼Œå¹¶åˆ©ç”¨TensorBoardå¯è§†åŒ–ï¼š</p><pre><code class="lang-python"> # Clear out any prior log data.!rm -rf logs# Sets up a timestamped log directory.logdir = &quot;logs/train_data/&quot; + datetime.now().strftime(&quot;%Y%m%d-%H%M%S&quot;)# Creates a file writer for the log directory.file_writer = tf.summary.create_file_writer(logdir)# Using the file writer, log the reshaped image.with file_writer.as_default():  tf.summary.image(&quot;Training data&quot;, img, step=0)</code></pre><p>è½¬åŒ–åçš„å›¾ç‰‡è¢«<code>tf.summary.create_file_writer</code>è¾“å‡ºåˆ°logdiré‡Œé¢äº†ã€‚ä½¿ç”¨TensorBoardçœ‹çœ‹ï¼š</p><pre><code class="lang-bash">%tensorboard --logdir logs/train_data</code></pre><p><img src="https://raw.githubusercontent.com/tensorflow/tensorboard/master/docs/images/images_single.png" alt></p><p>åŠ è½½çš„è¿‡ç¨‹å¯èƒ½æœ‰ç‚¹æ…¢ï¼Œæ³¨æ„ç•™è¶³å¤Ÿçš„å†…å­˜ä»¥å…æ ‡ç­¾é¡µå´©æºƒã€‚</p><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å·¦è¾¹çš„æ»‘åŠ¨æ¡è°ƒèŠ‚äº®åº¦ã€å¯¹æ¯”åº¦å’Œå¤§å°ã€‚</p><h3 id="å¯è§†åŒ–å¤šå¼ å›¾ç‰‡"><a href="#å¯è§†åŒ–å¤šå¼ å›¾ç‰‡" class="headerlink" title="å¯è§†åŒ–å¤šå¼ å›¾ç‰‡"></a>å¯è§†åŒ–å¤šå¼ å›¾ç‰‡</h3><p>è°ƒæ•´<code>tf.summary.image</code>é‡Œé¢çš„å‚æ•°<code>max_outputs</code>ï¼š</p><pre><code class="lang-python"> with file_writer.as_default():    # Don&#39;t forget to reshape.    images = np.reshape(train_images[0:25], (-1, 28, 28, 1))    tf.summary.image(&quot;25 training data examples&quot;, images, max_outputs=25, step=0)</code></pre><pre><code class="lang-bash">%tensorboard --logdir logs/train_data</code></pre><p><img src="https://raw.githubusercontent.com/tensorflow/tensorboard/master/docs/images/images_multiple.png" alt></p><h3 id="å¯è§†åŒ–å…¶ä»–æ ¼å¼çš„å›¾ç‰‡"><a href="#å¯è§†åŒ–å…¶ä»–æ ¼å¼çš„å›¾ç‰‡" class="headerlink" title="å¯è§†åŒ–å…¶ä»–æ ¼å¼çš„å›¾ç‰‡"></a>å¯è§†åŒ–å…¶ä»–æ ¼å¼çš„å›¾ç‰‡</h3><p>æœ‰äº›å›¾ç‰‡ä¸æ˜¯tensoræˆ–è€…numpy.arrayï¼Œè€Œæ˜¯ç”±è¯¸å¦‚opencvã€matplotlibç”Ÿæˆçš„pngå›¾åƒï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è½¬åŒ–ä¸ºtensorã€‚</p><p>ç”±äºmatplotlibé€‚åˆç”Ÿæˆå¤æ‚çš„æ•°æ®å›¾ï¼Œå› æ­¤å…ˆåˆ©ç”¨å…¶ä»–åº“ç”Ÿæˆå›¾ç‰‡ï¼Œéšååˆ©ç”¨<code>tf.summary.image</code>å°†å…¶è½¬åŒ–ä¸ºä¸€ä¸ªtensorå†å¯è§†åŒ–ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒæ–¹ä¾¿çš„é€‰æ‹©ã€‚</p><p>matplotlibç”Ÿæˆæ•°æ®é›†å¯è§†åŒ–ï¼š</p><pre><code class="lang-python"> # Clear out prior logging data.!rm -rf logs/plotslogdir = &quot;logs/plots/&quot; + datetime.now().strftime(&quot;%Y%m%d-%H%M%S&quot;)file_writer = tf.summary.create_file_writer(logdir)def plot_to_image(figure):  &quot;&quot;&quot;Converts the matplotlib plot specified by &#39;figure&#39; to a PNG image and  returns it. The supplied figure is closed and inaccessible after this call.&quot;&quot;&quot;  # Save the plot to a PNG in memory.  buf = io.BytesIO()  plt.savefig(buf, format=&#39;png&#39;)  # Closing the figure prevents it from being displayed directly inside  # the notebook.  plt.close(figure)  buf.seek(0)  # Convert PNG buffer to TF image  image = tf.image.decode_png(buf.getvalue(), channels=4)  # Add the batch dimension  image = tf.expand_dims(image, 0)  return imagedef image_grid():  &quot;&quot;&quot;Return a 5x5 grid of the MNIST images as a matplotlib figure.&quot;&quot;&quot;  # Create a figure to contain the plot.  figure = plt.figure(figsize=(10,10))  for i in range(25):    # Start next subplot.    plt.subplot(5, 5, i + 1, title=class_names[train_labels[i]])    plt.xticks([])    plt.yticks([])    plt.grid(False)    plt.imshow(train_images[i], cmap=plt.cm.binary)  return figure</code></pre><p>å°”åï¼Œåˆ©ç”¨<code>tf.summary.image</code>è½¬åŒ–ï¼š</p><pre><code class="lang-python"># Prepare the plotfigure = image_grid()# Convert to image and logwith file_writer.as_default():  tf.summary.image(&quot;Training data&quot;, plot_to_image(figure), step=0)</code></pre><p>æœ€åï¼Œåˆ©ç”¨TensorBoardå¯è§†åŒ–ï¼š</p><pre><code class="lang-bash">%tensorboard --logdir logs/plots</code></pre><p><img src="https://raw.githubusercontent.com/tensorflow/tensorboard/master/docs/images/images_arbitrary.png" alt></p><h3 id="åœ¨å›¾ç‰‡åˆ†ç±»å™¨ä¸­ä½¿ç”¨TensorBoard"><a href="#åœ¨å›¾ç‰‡åˆ†ç±»å™¨ä¸­ä½¿ç”¨TensorBoard" class="headerlink" title="åœ¨å›¾ç‰‡åˆ†ç±»å™¨ä¸­ä½¿ç”¨TensorBoard"></a>åœ¨å›¾ç‰‡åˆ†ç±»å™¨ä¸­ä½¿ç”¨TensorBoard</h3><p>ä¹‹å‰æˆ‘ä»¬é€šè¿‡TensorBoardäº†è§£äº†Fashion-MNISTæ•°æ®é›†çš„æ¦‚è¦ï¼Œä½†æ˜¯TensorBoardçš„åŠŸèƒ½ä¸æ­¢äºæ­¤ã€‚</p><p>é¦–å…ˆæ„å»ºåˆ†ç±»æ¨¡å‹ï¼š</p><pre><code class="lang-python">model = keras.models.Sequential([    keras.layers.Flatten(input_shape=(28, 28)),    keras.layers.Dense(32, activation=&#39;relu&#39;),    keras.layers.Dense(10, activation=&#39;softmax&#39;)])model.compile(    optimizer=&#39;adam&#39;,     loss=&#39;sparse_categorical_crossentropy&#39;,    metrics=[&#39;accuracy&#39;])</code></pre><p>æˆ‘ä»¬æƒ³ä½¿ç”¨<a href="https://en.wikipedia.org/wiki/Confusion_matrix">æ··æ·†çŸ©é˜µ</a>è¯¦ç»†äº†è§£åˆ†ç±»å™¨å¯¹æµ‹è¯•æ•°æ®çš„æ€§èƒ½ã€‚å› æ­¤æ¥ä¸‹æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œä¸“é—¨è®¡ç®—æ··æ·†çŸ©é˜µã€‚å…·ä½“æ¥è¯´ï¼Œ</p><ol><li>ä½¿ç”¨model.predicté¢„æµ‹è¯¥epochçš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹çš„æ ‡ç­¾ï¼Œå¾—åˆ°<code>test_pred</code></li><li>è°ƒç”¨<code>sklearn.metrics.confusion_matrix</code>ç›´æ¥è®¡ç®—æ··æ·†çŸ©é˜µ</li><li>ä½¿ç”¨<code>matplotlib</code>å°†æ··æ·†çŸ©é˜µå¯è§†åŒ–</li><li>å°†<code>matplotlib</code>ç”Ÿæˆçš„å›¾ç‰‡è½¬ä¸ºtensorï¼Œæœ€åå˜æˆlogå‚¨å­˜</li></ol><p>ä¸‹é¢æ˜¯å‰ä¸¤æ­¥æ‰€éœ€çš„æ“ä½œï¼š</p><pre><code class="lang-python">def log_confusion_matrix(epoch, logs):    # Use the model to predict the values from the validation dataset.    test_pred_raw = model.predict(test_images)    test_pred = np.argmax(test_pred_raw, axis=1)    # Calculate the confusion matrix.    cm = sklearn.metrics.confusion_matrix(test_labels, test_pred)    # Log the confusion matrix as an image summary.    figure = plot_confusion_matrix(cm, class_names=class_names)    cm_image = plot_to_image(figure)    # Log the confusion matrix as an image summary.    with file_writer_cm.as_default():    tf.summary.image(&quot;Confusion Matrix&quot;, cm_image, step=epoch)</code></pre><p>ä¸‹é¢æ˜¯ç¬¬ä¸‰æ­¥æ‰€éœ€çš„å¯è§†åŒ–å‡½æ•°ï¼š</p><pre><code class="lang-python">def plot_confusion_matrix(cm, class_names):    &quot;&quot;&quot;    Returns a matplotlib figure containing the plotted confusion matrix.    Args:    cm (array, shape = [n, n]): a confusion matrix of integer classes    class_names (array, shape = [n]): String names of the integer classes    &quot;&quot;&quot;    figure = plt.figure(figsize=(8, 8))    plt.imshow(cm, interpolation=&#39;nearest&#39;, cmap=plt.cm.Blues)    plt.title(&quot;Confusion matrix&quot;)    plt.colorbar()    tick_marks = np.arange(len(class_names))    plt.xticks(tick_marks, class_names, rotation=45)    plt.yticks(tick_marks, class_names)    # Normalize the confusion matrix.    cm = np.around(cm.astype(&#39;float&#39;) / cm.sum(axis=1)[:, np.newaxis], decimals=2)    # Use white text if squares are dark; otherwise black.    threshold = cm.max() / 2.    for i, j in itertools.product(range(cm.shape[0]), range(cm.shape[1])):    color = &quot;white&quot; if cm[i, j] &gt; threshold else &quot;black&quot;    plt.text(j, i, cm[i, j], horizontalalignment=&quot;center&quot;, color=color)    plt.tight_layout()    plt.ylabel(&#39;True label&#39;)    plt.xlabel(&#39;Predicted label&#39;)    return figure</code></pre><p>ä¸‹é¢æ˜¯ç¬¬å››æ­¥æ‰€éœ€çš„tensorè½¬åŒ–å’Œå‚¨å­˜å‡½æ•°ä»¥åŠå…¶ä»–å›è°ƒå‡½æ•°ï¼š</p><pre><code class="lang-bash"># Clear out prior logging data.!rm -rf logs/image</code></pre><pre><code class="lang-python">logdir = &quot;logs/image/&quot; + datetime.now().strftime(&quot;%Y%m%d-%H%M%S&quot;)# Define the basic TensorBoard callback.tensorboard_callback = keras.callbacks.TensorBoard(log_dir=logdir)file_writer_cm = tf.summary.create_file_writer(logdir + &#39;/cm&#39;)</code></pre><p>è®©æˆ‘ä»¬å¼€å§‹è®­ç»ƒï¼š</p><pre><code class="lang-bash"># Start TensorBoard.%tensorboard --logdir logs/image</code></pre><pre><code class="lang-python"># Train the classifier.model.fit(    train_images,    train_labels,    epochs=5,    verbose=0, # Suppress chatty output    callbacks=[tensorboard_callback, cm_callback],    validation_data=(test_images, test_labels),)</code></pre><p>è¯·æ³¨æ„ï¼Œæ­¤æ—¶æˆ‘å…ˆè°ƒç”¨çš„TensorBoardï¼Œç„¶åå¼€å§‹çš„è®­ç»ƒï¼Œå¹¶ä¸”æˆ‘è®¾ç½®äº†verbose=0ï¼Œæ„å‘³ç€ä¿¡æ¯å®Œå…¨é€šè¿‡TensorBoardåŠ¨æ€å±•ç¤ºã€‚è®­ç»ƒè¿‡ç¨‹ä¸­ä½ å°±å¯ä»¥çœ‹åˆ°å‚æ•°çš„å˜åŒ–ã€‚</p><p><img src="https://raw.githubusercontent.com/tensorflow/tensorboard/master/docs/images/images_accuracy.png" alt></p><p><img src="https://raw.githubusercontent.com/tensorflow/tensorboard/master/docs/images/images_cm.png" alt></p><p>ä½ è¿˜å¯ä»¥çœ‹åˆ°ï¼Œéšç€è®­ç»ƒçš„è¿›è¡Œï¼ŒçŸ©é˜µæ˜¯å¦‚ä½•å‘ç”Ÿå˜åŒ–çš„ï¼šæ²¿ç€å¯¹è§’çº¿çš„æ­£æ–¹å½¢ä¼šé€æ¸å˜æš—ï¼Œè€ŒçŸ©é˜µçš„å…¶ä½™éƒ¨åˆ†è¶‹å‘äº0å’Œç™½è‰²ã€‚è¿™æ„å‘³ç€åˆ†ç±»å™¨æ­£åœ¨ä¸æ–­æ”¹è¿›ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Tensorflow</tag>
      
      <tag>TensorBoard</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘TensorBoardç®€ä»‹</title>
    <link href="/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91TensorBoard%E7%AE%80%E4%BB%8B/"/>
    <url>/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91TensorBoard%E7%AE%80%E4%BB%8B/</url>
    
    <content type="html"><![CDATA[<p>ç®€å•ä»‹ç»äº†TensorBoardçš„ç”¨é€”å’Œä½¿ç”¨æ–¹æ³•ã€‚<br><!--more---></p><h2 id="TensorBoardç®€ä»‹"><a href="#TensorBoardç®€ä»‹" class="headerlink" title="TensorBoardç®€ä»‹"></a>TensorBoardç®€ä»‹</h2><p>TensorBoardæ˜¯Googleå¼€å‘çš„æ¨¡å‹å†…éƒ¨å‚æ•°è·Ÿè¸ªå’Œå¯è§†åŒ–çš„è°ƒè¯•å·¥å…·ã€‚åœ¨Tensorflowä¸­ï¼Œç”¨TensorBoardå¯ä»¥ç›‘æ§æ¨¡å‹çš„å„ç§æŒ‡æ ‡çš„å˜åŒ–ï¼ˆå¦‚accã€lossçš„åŠ¨æ€å˜åŒ–ï¼‰ï¼Œå¯ä»¥å°†æ¨¡å‹ç»“æ„å¯è§†åŒ–ï¼Œå¯ä»¥å¯è§†åŒ–è¯åµŒå…¥ç©ºé—´ï¼Œå¯ä»¥åˆ†ææ¨¡å‹æ€§èƒ½ï¼Œå¯ä»¥åˆ†ææ•°æ®é›†çš„å…¬å¹³æ€§ç­‰ç­‰ï¼Œæ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§ä¸”éå¸¸ç®€å•çš„å·¥å…·ã€‚</p><p>TensorBoardæ ¸å¿ƒå°±æ˜¯å›è°ƒå‡½æ•°å’Œå¯è§†åŒ–æ“ä½œé¢æ¿ã€‚é€šè¿‡ç¼–å†™å›è°ƒå‡½æ•°è·å–æ¨¡å‹ä¿¡æ¯ï¼Œé€šè¿‡å‘½ä»¤è¡Œå¯åŠ¨TensorBoardå›¾å½¢åŒ–ç•Œé¢ã€‚</p><p>TensorBoardçš„å›è°ƒå‡½æ•°APIä¸ºï¼š</p><pre><code class="lang-python">tf.keras.callbacks.TensorBoard(    log_dir=&#39;logs&#39;, histogram_freq=0, write_graph=True, write_images=False,    update_freq=&#39;epoch&#39;, profile_batch=2, embeddings_freq=0,    embeddings_metadata=None, **kwargs)</code></pre><div class="table-container"><table><thead><tr><th>å‚æ•°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>log_dir</td><td>æ¨¡å‹çš„ä¿¡æ¯ä¿å­˜ç›®å½•</td></tr><tr><td>histogram_freq</td><td>æ¨¡å‹æ¿€æ´»å’Œå‚æ•°ä¿¡æ¯è®°å½•çš„é¢‘ç‡ï¼Œæ¯éš”å‡ ä¸ªepochsè®°å½•ä¸€æ¬¡</td></tr><tr><td>write_graph</td><td>æ˜¯å¦ä¿å­˜æ¨¡å‹å›¾æ–‡ä»¶</td></tr><tr><td>write_images</td><td>æ˜¯å¦ä¿å­˜æ¨¡å‹å‚æ•°å¯è§†åŒ–å›¾</td></tr><tr><td>update_freq</td><td>æ¨¡å‹losså’Œå…¶ä»–metricsçš„è®°å½•é¢‘ç‡ï¼Œæ¯éš”å‡ ä¸ªbatchæ›´æ–°ä¸€æ¬¡</td></tr><tr><td>profile_batch</td><td>æŒ‡å®šæ€§èƒ½åˆ†ææ—¶ä½¿ç”¨çš„æ‰¹æ¬¡</td></tr><tr><td>embeddings_freq</td><td>embedding å±‚æ›´æ–°çš„é¢‘ç‡</td></tr></tbody></table></div><p>åœ¨Colabä¸­ä½¿ç”¨TensorBoardéœ€è¾“å…¥ï¼š</p><pre><code class="lang-bash">%load_ext tensorboard</code></pre><p>ä¸ºäº†è·Ÿè¸ªæ¨¡å‹è®­ç»ƒè¿‡ç¨‹ï¼Œéœ€è¦åœ¨æ¨¡å‹çš„<code>fit</code>è¿‡ç¨‹ä¸­æ·»åŠ å›è°ƒå‡½æ•°</p><pre><code class="lang-python">tensorboard_callback = tf.keras.callbacks.TensorBoard(log_dir=log_dir, histogram_freq=1)</code></pre><p>å…¶ä¸­<code>log_dir</code>ä¸ºä½ æƒ³å‚¨å­˜logçš„ç›®å½•ï¼Œåœ¨æ•™ç¨‹ä¸­ï¼Œ<code>log_dir=&quot;logs/fit/&quot; + datetime.datetime.now().strftime(&quot;%Y%m%d-%H%M%S&quot;)</code>ã€‚</p><pre><code class="lang-python">model.fit(x=x_train,           y=y_train,           epochs=5,           validation_data=(x_test, y_test),           callbacks=[tensorboard_callback])</code></pre><p>åœ¨<code>log_dir</code>ä¸­ç”Ÿæˆäº†ä¸€ç³»åˆ—çš„æ—¥å¿—æ–‡ä»¶ï¼š</p><p><img src="/2020/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91TensorBoard%E7%AE%80%E4%BB%8B/2020-08-13-12-39-02.png" alt></p><p>è¿™äº›æ—¥å¿—æ–‡ä»¶å¯ä»¥é€šè¿‡TensorBoardè§£æï¼š</p><pre><code class="lang-shell">%tensorboard --logdir logs/fit</code></pre><p>åœ¨å‘½ä»¤è¡Œä¸­ï¼Œ è¿è¡Œä¸å¸¦â€œï¼…â€çš„ç›¸åŒå‘½ä»¤ã€‚ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://raw.githubusercontent.com/tensorflow/tensorboard/master/docs/images/quickstart_model_fit.png" alt></p><p>åœ¨TensorBoardé¢æ¿ä¸Šï¼Œæœ‰å››ä¸ªé€‰é¡¹å¡ï¼š</p><ul><li><strong>Scalars</strong> æ˜¾ç¤ºæŸå¤±å’ŒæŒ‡æ ‡åœ¨æ¯ä¸ªæ—¶æœŸå¦‚ä½•å˜åŒ–</li><li><strong>Graphs</strong> å¯å¸®åŠ©æ‚¨å¯è§†åŒ–æ¨¡å‹</li><li><strong>Distributions</strong> å’Œ <strong>Histograms</strong> æ˜¾ç¤ºå¼ é‡éšæ—¶é—´çš„åˆ†å¸ƒ</li></ul><p>å¦‚æœä½¿ç”¨tensorflowåŸç”ŸAPIè®­ç»ƒæ¨¡å‹ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨<code>tf.summary</code>è®°å½•logï¼Œç„¶ååˆ©ç”¨TensorBoardå¯è§†åŒ–ã€‚å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>ä½¿ç”¨ <code>tf.summary.create_file_writer()</code> åˆ›å»ºæ–‡ä»¶ç¼–å†™å™¨ï¼›</li><li>ä½¿ç”¨ <code>tf.summary.scalar()</code> è®°å½•æ„Ÿå…´è¶£çš„æŒ‡æ ‡</li><li>å°† <code>LearningRateScheduler</code> å›è°ƒä¼ é€’ç»™ <code>Model.fit()</code></li><li>ä½¿ç”¨å‘½ä»¤è¡Œ<code>tensorboard --logdir logs/fit</code>æ‰“å¼€å¯è§†åŒ–ç•Œé¢</li></ol>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Tensorflow</tag>
      
      <tag>TensorBoard</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç«èµ›æ‰“å¡ã€‘æ–°é—»æ–‡æœ¬åˆ†ç±»ä¹‹æ³¨æ„åŠ›æœºåˆ¶ä¸é¢„è®­ç»ƒæ¨¡å‹</title>
    <link href="/2020/08/04/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E4%B8%8E%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B/"/>
    <url>/2020/08/04/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E4%B8%8E%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<p>è§å¤šäº†ä¼˜ç§€çš„æ–‡ç« ï¼Œå†å†™åšå®¢çš„æ—¶å€™å°±ä¼šæ„Ÿå¹è‡ªå·±çš„å­¦è¯†æµ…è–„ã€‚<br><!--more---></p><p>æœ¬ç« ä»‹ç»äº†Bertçš„åŸç†å’Œä½¿ç”¨ï¼Œå…·ä½“åŒ…æ‹¬pretrainå’Œfinetuneä¸¤éƒ¨åˆ†ã€‚</p><h2 id="åŸºäºæ·±åº¦å­¦ä¹ çš„æ–‡æœ¬åˆ†ç±»"><a href="#åŸºäºæ·±åº¦å­¦ä¹ çš„æ–‡æœ¬åˆ†ç±»" class="headerlink" title="åŸºäºæ·±åº¦å­¦ä¹ çš„æ–‡æœ¬åˆ†ç±»"></a>åŸºäºæ·±åº¦å­¦ä¹ çš„æ–‡æœ¬åˆ†ç±»</h2><h4 id="TransformeråŸç†"><a href="#TransformeråŸç†" class="headerlink" title="TransformeråŸç†"></a>TransformeråŸç†</h4><p>å½“ç”¨ç¥ç»ç½‘ç»œæ¥å¤„ç†å¤§é‡çš„è¾“å…¥ä¿¡æ¯æ—¶ï¼Œå¯ä»¥å€Ÿé‰´äººè„‘çš„æ³¨æ„åŠ›æœºåˆ¶ï¼Œåªé€‰æ‹©ä¸€äº›å…³é”®çš„ä¿¡æ¯è¾“å…¥è¿›è¡Œå¤„ç†ï¼Œæ¥æé«˜ç¥ç»ç½‘ç»œçš„æ•ˆç‡ã€‚æ³¨æ„åŠ›æœºåˆ¶å¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œä½†æ›´å¤šåœ°ç”¨ä½œç¥ç»ç½‘ç»œä¸­çš„ä¸€ä¸ªç»„ä»¶ã€‚åŸºäºå¾ªç¯ç¥ç»ç½‘ç»œçš„åºåˆ—åˆ°åºåˆ—æ¨¡å‹çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯æ— æ³•å¹¶è¡Œè®¡ç®—ï¼Œä¸ºäº†æé«˜å¹¶è¡Œè®¡ç®—æ•ˆç‡ä»¥åŠæ•æ‰é•¿è·ç¦»çš„ä¾èµ–å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‡ªæ³¨æ„åŠ›æ¨¡å‹ï¼ˆSelf-Attention Modelï¼‰æ¥å»ºç«‹ä¸€ä¸ªå…¨è¿æ¥çš„ç½‘ç»œç»“æ„ã€‚</p><p>Transformeræ¨¡å‹æ˜¯ä¸€ä¸ªåŸºäºå¤šå¤´è‡ªæ³¨æ„åŠ›çš„åºåˆ—åˆ°åºåˆ—æ¨¡å‹ï¼ŒåŒ…å«ç¼–ç å™¨å’Œè§£ç å™¨ä¸¤éƒ¨åˆ†ã€‚</p><p><img src="https://img-blog.csdnimg.cn/20200714211046668.png" alt></p><h3 id="åŸºäºBertçš„æ–‡æœ¬åˆ†ç±»"><a href="#åŸºäºBertçš„æ–‡æœ¬åˆ†ç±»" class="headerlink" title="åŸºäºBertçš„æ–‡æœ¬åˆ†ç±»"></a>åŸºäºBertçš„æ–‡æœ¬åˆ†ç±»</h3><p>åˆ†æˆPretrainå’ŒFine-Tuneä¸¤éƒ¨åˆ†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Deep Learning</tag>
      
      <tag>Datawhale</tag>
      
      <tag>Classification</tag>
      
      <tag>attention</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç«èµ›æ‰“å¡ã€‘æ–°é—»æ–‡æœ¬åˆ†ç±»ä¹‹æ·±åº¦å­¦ä¹ Word2Vec</title>
    <link href="/2020/07/31/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0Word2Vec/"/>
    <url>/2020/07/31/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0Word2Vec/</url>
    
    <content type="html"><![CDATA[<p>è°¦è™šä½¿äººè¿›æ­¥ï¼Œéª„å‚²ä½¿äººè½åã€‚<br><!--more---></p><p>æœ€è¿‘è¯¾é¢˜å†…å®¹è¾ƒå¤šæ—¶é—´ç´§å¼ ï¼ŒåŒæ—¶æˆ‘è®¤ä¸ºå­¦ä¹ èµ„æ–™éå¸¸ç¿”å®ï¼Œé‚è½¬å‘ä»¥åšç¬”è®°ã€‚ä¹‹åä¼šåœ¨æ–‡ç« æœ€åæ€»ç»“è‡ªå·±çš„æ€è·¯å’Œç»éªŒã€‚</p><h1 id="Task5-åŸºäºæ·±åº¦å­¦ä¹ çš„æ–‡æœ¬åˆ†ç±»2"><a href="#Task5-åŸºäºæ·±åº¦å­¦ä¹ çš„æ–‡æœ¬åˆ†ç±»2" class="headerlink" title="Task5 åŸºäºæ·±åº¦å­¦ä¹ çš„æ–‡æœ¬åˆ†ç±»2"></a>Task5 åŸºäºæ·±åº¦å­¦ä¹ çš„æ–‡æœ¬åˆ†ç±»2</h1><p>åœ¨ä¸Šä¸€ç« èŠ‚ï¼Œæˆ‘ä»¬é€šè¿‡FastTextå¿«é€Ÿå®ç°äº†åŸºäºæ·±åº¦å­¦ä¹ çš„æ–‡æœ¬åˆ†ç±»æ¨¡å‹ï¼Œä½†æ˜¯è¿™ä¸ªæ¨¡å‹å¹¶ä¸æ˜¯æœ€ä¼˜çš„ã€‚åœ¨æœ¬ç« æˆ‘ä»¬å°†ç»§ç»­æ·±å…¥ã€‚</p><h2 id="åŸºäºæ·±åº¦å­¦ä¹ çš„æ–‡æœ¬åˆ†ç±»"><a href="#åŸºäºæ·±åº¦å­¦ä¹ çš„æ–‡æœ¬åˆ†ç±»" class="headerlink" title="åŸºäºæ·±åº¦å­¦ä¹ çš„æ–‡æœ¬åˆ†ç±»"></a>åŸºäºæ·±åº¦å­¦ä¹ çš„æ–‡æœ¬åˆ†ç±»</h2><p>æœ¬ç« å°†ç»§ç»­å­¦ä¹ åŸºäºæ·±åº¦å­¦ä¹ çš„æ–‡æœ¬åˆ†ç±»ã€‚</p><h3 id="å­¦ä¹ ç›®æ ‡"><a href="#å­¦ä¹ ç›®æ ‡" class="headerlink" title="å­¦ä¹ ç›®æ ‡"></a>å­¦ä¹ ç›®æ ‡</h3><ul><li>å­¦ä¹ Word2Vecçš„ä½¿ç”¨å’ŒåŸºç¡€åŸç†</li><li>å­¦ä¹ ä½¿ç”¨TextCNNã€TextRNNè¿›è¡Œæ–‡æœ¬è¡¨ç¤º</li><li>å­¦ä¹ ä½¿ç”¨HANç½‘ç»œç»“æ„å®Œæˆæ–‡æœ¬åˆ†ç±»</li></ul><h3 id="æ–‡æœ¬è¡¨ç¤ºæ–¹æ³•-Part3"><a href="#æ–‡æœ¬è¡¨ç¤ºæ–¹æ³•-Part3" class="headerlink" title="æ–‡æœ¬è¡¨ç¤ºæ–¹æ³• Part3"></a>æ–‡æœ¬è¡¨ç¤ºæ–¹æ³• Part3</h3><h4 id="è¯å‘é‡"><a href="#è¯å‘é‡" class="headerlink" title="è¯å‘é‡"></a>è¯å‘é‡</h4><p>æœ¬èŠ‚é€šè¿‡word2vecå­¦ä¹ è¯å‘é‡ã€‚word2vecæ¨¡å‹èƒŒåçš„åŸºæœ¬æ€æƒ³æ˜¯å¯¹å‡ºç°åœ¨ä¸Šä¸‹æ–‡ç¯å¢ƒé‡Œçš„è¯è¿›è¡Œé¢„æµ‹ã€‚å¯¹äºæ¯ä¸€æ¡è¾“å…¥æ–‡æœ¬ï¼Œæˆ‘ä»¬é€‰å–ä¸€ä¸ªä¸Šä¸‹æ–‡çª—å£å’Œä¸€ä¸ªä¸­å¿ƒè¯ï¼Œå¹¶åŸºäºè¿™ä¸ªä¸­å¿ƒè¯å»é¢„æµ‹çª—å£é‡Œå…¶ä»–è¯å‡ºç°çš„æ¦‚ç‡ã€‚å› æ­¤ï¼Œword2vecæ¨¡å‹å¯ä»¥æ–¹ä¾¿åœ°ä»æ–°å¢è¯­æ–™ä¸­å­¦ä¹ åˆ°æ–°å¢è¯çš„å‘é‡è¡¨è¾¾ï¼Œæ˜¯ä¸€ç§é«˜æ•ˆçš„åœ¨çº¿å­¦ä¹ ç®—æ³•ï¼ˆonline learningï¼‰ã€‚</p><p>word2vecçš„ä¸»è¦æ€è·¯ï¼šé€šè¿‡å•è¯å’Œä¸Šä¸‹æ–‡å½¼æ­¤é¢„æµ‹ï¼Œå¯¹åº”çš„ä¸¤ä¸ªç®—æ³•åˆ†åˆ«ä¸ºï¼š</p><ul><li><p>Skip-grams (SG)ï¼šé¢„æµ‹ä¸Šä¸‹æ–‡</p></li><li><p>Continuous Bag of Words (CBOW)ï¼šé¢„æµ‹ç›®æ ‡å•è¯</p></li></ul><p>å¦å¤–æå‡ºä¸¤ç§æ›´åŠ é«˜æ•ˆçš„è®­ç»ƒæ–¹æ³•ï¼š</p><ul><li><p>Hierarchical softmax</p></li><li><p>Negative sampling</p></li></ul><p><strong>1. Skip-gramsåŸç†å’Œç½‘ç»œç»“æ„</strong></p><p>Word2Vecæ¨¡å‹ä¸­ï¼Œä¸»è¦æœ‰Skip-Gramå’ŒCBOWä¸¤ç§æ¨¡å‹ï¼Œä»ç›´è§‚ä¸Šç†è§£ï¼ŒSkip-Gramæ˜¯ç»™å®šinput wordæ¥é¢„æµ‹ä¸Šä¸‹æ–‡ã€‚è€ŒCBOWæ˜¯ç»™å®šä¸Šä¸‹æ–‡ï¼Œæ¥é¢„æµ‹input wordã€‚</p><p><img src="https://img-blog.csdnimg.cn/20200714210354729.png" alt="skip_grams"></p><p>Word2Vecæ¨¡å‹å®é™…ä¸Šåˆ†ä¸ºäº†ä¸¤ä¸ªéƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†ä¸ºå»ºç«‹æ¨¡å‹ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯é€šè¿‡æ¨¡å‹è·å–åµŒå…¥è¯å‘é‡ã€‚</p><p>Word2Vecçš„æ•´ä¸ªå»ºæ¨¡è¿‡ç¨‹å®é™…ä¸Šä¸è‡ªç¼–ç å™¨ï¼ˆauto-encoderï¼‰çš„æ€æƒ³å¾ˆç›¸ä¼¼ï¼Œå³å…ˆåŸºäºè®­ç»ƒæ•°æ®æ„å»ºä¸€ä¸ªç¥ç»ç½‘ç»œï¼Œå½“è¿™ä¸ªæ¨¡å‹è®­ç»ƒå¥½ä»¥åï¼Œæˆ‘ä»¬å¹¶ä¸ä¼šç”¨è¿™ä¸ªè®­ç»ƒå¥½çš„æ¨¡å‹å¤„ç†æ–°çš„ä»»åŠ¡ï¼Œæˆ‘ä»¬çœŸæ­£éœ€è¦çš„æ˜¯è¿™ä¸ªæ¨¡å‹é€šè¿‡è®­ç»ƒæ•°æ®æ‰€å­¦å¾—çš„å‚æ•°ï¼Œä¾‹å¦‚éšå±‚çš„æƒé‡çŸ©é˜µâ€”â€”åé¢æˆ‘ä»¬å°†ä¼šçœ‹åˆ°è¿™äº›æƒé‡åœ¨Word2Vecä¸­å®é™…ä¸Šå°±æ˜¯æˆ‘ä»¬è¯•å›¾å»å­¦ä¹ çš„â€œword vectorsâ€ã€‚</p><p>Skip-gramsè¿‡ç¨‹</p><p>å‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªå¥å­â€œThe dog barked at the mailmanâ€ã€‚</p><ol><li><p>é¦–å…ˆæˆ‘ä»¬é€‰å¥å­ä¸­é—´çš„ä¸€ä¸ªè¯ä½œä¸ºæˆ‘ä»¬çš„è¾“å…¥è¯ï¼Œä¾‹å¦‚æˆ‘ä»¬é€‰å–â€œdogâ€ä½œä¸ºinput wordï¼›</p></li><li><p>æœ‰äº†input wordä»¥åï¼Œæˆ‘ä»¬å†å®šä¹‰ä¸€ä¸ªå«åšskip_windowçš„å‚æ•°ï¼Œå®ƒä»£è¡¨ç€æˆ‘ä»¬ä»å½“å‰input wordçš„ä¸€ä¾§ï¼ˆå·¦è¾¹æˆ–å³è¾¹ï¼‰é€‰å–è¯çš„æ•°é‡ã€‚å¦‚æœæˆ‘ä»¬è®¾ç½®skip_window=2ï¼Œé‚£ä¹ˆæˆ‘ä»¬æœ€ç»ˆè·å¾—çª—å£ä¸­çš„è¯ï¼ˆåŒ…æ‹¬input wordåœ¨å†…ï¼‰å°±æ˜¯[â€˜Theâ€™, â€˜dogâ€™ï¼Œâ€™barkedâ€™, â€˜atâ€™]ã€‚skip_window=2ä»£è¡¨ç€é€‰å–å·¦input wordå·¦ä¾§2ä¸ªè¯å’Œå³ä¾§2ä¸ªè¯è¿›å…¥æˆ‘ä»¬çš„çª—å£ï¼Œæ‰€ä»¥æ•´ä¸ªçª—å£å¤§å°span=2x2=4ã€‚å¦ä¸€ä¸ªå‚æ•°å«num_skipsï¼Œå®ƒä»£è¡¨ç€æˆ‘ä»¬ä»æ•´ä¸ªçª—å£ä¸­é€‰å–å¤šå°‘ä¸ªä¸åŒçš„è¯ä½œä¸ºæˆ‘ä»¬çš„output wordï¼Œå½“skip_window=2ï¼Œnum_skips=2æ—¶ï¼Œæˆ‘ä»¬å°†ä¼šå¾—åˆ°ä¸¤ç»„ (input word, output word) å½¢å¼çš„è®­ç»ƒæ•°æ®ï¼Œå³ (â€˜dogâ€™, â€˜barkedâ€™)ï¼Œ(â€˜dogâ€™, â€˜theâ€™)ã€‚</p></li><li><p>ç¥ç»ç½‘ç»œåŸºäºè¿™äº›è®­ç»ƒæ•°æ®å°†ä¼šè¾“å‡ºä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒï¼Œè¿™ä¸ªæ¦‚ç‡ä»£è¡¨ç€æˆ‘ä»¬çš„è¯å…¸ä¸­çš„æ¯ä¸ªè¯ä½œä¸ºinput wordçš„output wordçš„å¯èƒ½æ€§ã€‚è¿™å¥è¯æœ‰ç‚¹ç»•ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸ªä¾‹å­ã€‚ç¬¬äºŒæ­¥ä¸­æˆ‘ä»¬åœ¨è®¾ç½®skip_windowå’Œnum_skips=2çš„æƒ…å†µä¸‹è·å¾—äº†ä¸¤ç»„è®­ç»ƒæ•°æ®ã€‚å‡å¦‚æˆ‘ä»¬å…ˆæ‹¿ä¸€ç»„æ•°æ® (â€˜dogâ€™, â€˜barkedâ€™) æ¥è®­ç»ƒç¥ç»ç½‘ç»œï¼Œé‚£ä¹ˆæ¨¡å‹é€šè¿‡å­¦ä¹ è¿™ä¸ªè®­ç»ƒæ ·æœ¬ï¼Œä¼šå‘Šè¯‰æˆ‘ä»¬è¯æ±‡è¡¨ä¸­æ¯ä¸ªå•è¯å½“â€™dogâ€™ä½œä¸ºinput wordæ—¶ï¼Œå…¶ä½œä¸ºoutput wordçš„å¯èƒ½æ€§ã€‚</p></li></ol><p>ä¹Ÿå°±æ˜¯è¯´æ¨¡å‹çš„è¾“å‡ºæ¦‚ç‡ä»£è¡¨ç€åˆ°æˆ‘ä»¬è¯å…¸ä¸­æ¯ä¸ªè¯æœ‰å¤šå¤§å¯èƒ½æ€§è·Ÿinput wordåŒæ—¶å‡ºç°ã€‚ä¾‹å¦‚ï¼šå¦‚æœæˆ‘ä»¬å‘ç¥ç»ç½‘ç»œæ¨¡å‹ä¸­è¾“å…¥ä¸€ä¸ªå•è¯â€œSovietâ€œï¼Œé‚£ä¹ˆæœ€ç»ˆæ¨¡å‹çš„è¾“å‡ºæ¦‚ç‡ä¸­ï¼Œåƒâ€œUnionâ€ï¼Œ â€Russiaâ€œè¿™ç§ç›¸å…³è¯çš„æ¦‚ç‡å°†è¿œé«˜äºåƒâ€watermelonâ€œï¼Œâ€kangarooâ€œéç›¸å…³è¯çš„æ¦‚ç‡ã€‚å› ä¸ºâ€Unionâ€œï¼Œâ€Russiaâ€œåœ¨æ–‡æœ¬ä¸­æ›´å¤§å¯èƒ½åœ¨â€Sovietâ€œçš„çª—å£ä¸­å‡ºç°ã€‚</p><p>æˆ‘ä»¬å°†é€šè¿‡ç»™ç¥ç»ç½‘ç»œè¾“å…¥æ–‡æœ¬ä¸­æˆå¯¹çš„å•è¯æ¥è®­ç»ƒå®ƒå®Œæˆä¸Šé¢æ‰€è¯´çš„æ¦‚ç‡è®¡ç®—ã€‚ä¸‹é¢çš„å›¾ä¸­ç»™å‡ºäº†ä¸€äº›æˆ‘ä»¬è®­ç»ƒæ ·æœ¬çš„ä¾‹å­ã€‚æˆ‘ä»¬é€‰å®šå¥å­â€œThe quick brown fox jumps over lazy dogâ€ï¼Œè®¾å®šæˆ‘ä»¬çš„çª—å£å¤§å°ä¸º2ï¼ˆwindow_size=2ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä»…é€‰è¾“å…¥è¯å‰åå„ä¸¤ä¸ªè¯å’Œè¾“å…¥è¯è¿›è¡Œç»„åˆã€‚ä¸‹å›¾ä¸­ï¼Œè“è‰²ä»£è¡¨input wordï¼Œæ–¹æ¡†å†…ä»£è¡¨ä½äºçª—å£å†…çš„å•è¯ã€‚</p><p><img src="https://img-blog.csdnimg.cn/20200721190035764.png" alt="1"></p><p><img src="https://img-blog.csdnimg.cn/20200714210519939.png" alt="2"></p><p>æˆ‘ä»¬çš„æ¨¡å‹å°†ä¼šä»æ¯å¯¹å•è¯å‡ºç°çš„æ¬¡æ•°ä¸­ä¹ å¾—ç»Ÿè®¡ç»“æœã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬çš„ç¥ç»ç½‘ç»œå¯èƒ½ä¼šå¾—åˆ°æ›´å¤šç±»ä¼¼ï¼ˆâ€œSovietâ€œï¼Œâ€Unionâ€œï¼‰è¿™æ ·çš„è®­ç»ƒæ ·æœ¬å¯¹ï¼Œè€Œå¯¹äºï¼ˆâ€Sovietâ€œï¼Œâ€Sasquatchâ€œï¼‰è¿™æ ·çš„ç»„åˆå´çœ‹åˆ°çš„å¾ˆå°‘ã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬çš„æ¨¡å‹å®Œæˆè®­ç»ƒåï¼Œç»™å®šä¸€ä¸ªå•è¯â€Sovietâ€œä½œä¸ºè¾“å…¥ï¼Œè¾“å‡ºçš„ç»“æœä¸­â€Unionâ€œæˆ–è€…â€Russiaâ€œè¦æ¯”â€Sasquatchâ€œè¢«èµ‹äºˆæ›´é«˜çš„æ¦‚ç‡ã€‚</p><p>PSï¼šinput wordå’Œoutput wordéƒ½ä¼šè¢«æˆ‘ä»¬è¿›è¡Œone-hotç¼–ç ã€‚ä»”ç»†æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬çš„è¾“å…¥è¢«one-hotç¼–ç ä»¥åå¤§å¤šæ•°ç»´åº¦ä¸Šéƒ½æ˜¯0ï¼ˆå®é™…ä¸Šä»…æœ‰ä¸€ä¸ªä½ç½®ä¸º1ï¼‰ï¼Œæ‰€ä»¥è¿™ä¸ªå‘é‡ç›¸å½“ç¨€ç–ï¼Œé‚£ä¹ˆä¼šé€ æˆä»€ä¹ˆç»“æœå‘¢ã€‚å¦‚æœæˆ‘ä»¬å°†ä¸€ä¸ª1 x 10000çš„å‘é‡å’Œ10000 x 300çš„çŸ©é˜µç›¸ä¹˜ï¼Œå®ƒä¼šæ¶ˆè€—ç›¸å½“å¤§çš„è®¡ç®—èµ„æºï¼Œä¸ºäº†é«˜æ•ˆè®¡ç®—ï¼Œå®ƒä»…ä»…ä¼šé€‰æ‹©çŸ©é˜µä¸­å¯¹åº”çš„å‘é‡ä¸­ç»´åº¦å€¼ä¸º1çš„ç´¢å¼•è¡Œï¼š</p><p><img src="https://img-blog.csdnimg.cn/20200714205344406.png" alt></p><p><strong>2. Skip-gramsè®­ç»ƒ</strong></p><p>ç”±ä¸Šéƒ¨åˆ†å¯çŸ¥ï¼ŒWord2Vecæ¨¡å‹æ˜¯ä¸€ä¸ªè¶…çº§å¤§çš„ç¥ç»ç½‘ç»œï¼ˆæƒé‡çŸ©é˜µè§„æ¨¡éå¸¸å¤§ï¼‰ã€‚ä¾‹å¦‚ï¼šæˆ‘ä»¬æ‹¥æœ‰10000ä¸ªå•è¯çš„è¯æ±‡è¡¨ï¼Œæˆ‘ä»¬å¦‚æœæƒ³åµŒå…¥300ç»´çš„è¯å‘é‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„è¾“å…¥-éšå±‚æƒé‡çŸ©é˜µå’Œéšå±‚-è¾“å‡ºå±‚çš„æƒé‡çŸ©é˜µéƒ½ä¼šæœ‰ 10000 x 300 = 300ä¸‡ä¸ªæƒé‡ï¼Œåœ¨å¦‚æ­¤åºå¤§çš„ç¥ç»ç½‘ç»œä¸­è¿›è¡Œæ¢¯åº¦ä¸‹é™æ˜¯ç›¸å½“æ…¢çš„ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œä½ éœ€è¦å¤§é‡çš„è®­ç»ƒæ•°æ®æ¥è°ƒæ•´è¿™äº›æƒé‡å¹¶ä¸”é¿å…è¿‡æ‹Ÿåˆã€‚ç™¾ä¸‡æ•°é‡çº§çš„æƒé‡çŸ©é˜µå’Œäº¿ä¸‡æ•°é‡çº§çš„è®­ç»ƒæ ·æœ¬æ„å‘³ç€è®­ç»ƒè¿™ä¸ªæ¨¡å‹å°†ä¼šæ˜¯ä¸ªç¾éš¾</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li><p>å°†å¸¸è§çš„å•è¯ç»„åˆï¼ˆword pairsï¼‰æˆ–è€…è¯ç»„ä½œä¸ºå•ä¸ªâ€œwordsâ€æ¥å¤„ç†</p></li><li><p>å¯¹é«˜é¢‘æ¬¡å•è¯è¿›è¡ŒæŠ½æ ·æ¥å‡å°‘è®­ç»ƒæ ·æœ¬çš„ä¸ªæ•°</p></li><li><p>å¯¹ä¼˜åŒ–ç›®æ ‡é‡‡ç”¨â€œnegative samplingâ€æ–¹æ³•ï¼Œè¿™æ ·æ¯ä¸ªè®­ç»ƒæ ·æœ¬çš„è®­ç»ƒåªä¼šæ›´æ–°ä¸€å°éƒ¨åˆ†çš„æ¨¡å‹æƒé‡ï¼Œä»è€Œé™ä½è®¡ç®—è´Ÿæ‹…</p></li></ul><p><em>2.1 Word pairs and â€œphasesâ€</em></p><p>ä¸€äº›å•è¯ç»„åˆï¼ˆæˆ–è€…è¯ç»„ï¼‰çš„å«ä¹‰å’Œæ‹†å¼€ä»¥åå…·æœ‰å®Œå…¨ä¸åŒçš„æ„ä¹‰ã€‚æ¯”å¦‚â€œBoston Globeâ€æ˜¯ä¸€ç§æŠ¥åˆŠçš„åå­—ï¼Œè€Œå•ç‹¬çš„â€œBostonâ€å’Œâ€œGlobeâ€è¿™æ ·å•ä¸ªçš„å•è¯å´è¡¨è¾¾ä¸å‡ºè¿™æ ·çš„å«ä¹‰ã€‚å› æ­¤ï¼Œåœ¨æ–‡ç« ä¸­åªè¦å‡ºç°â€œBoston Globeâ€ï¼Œæˆ‘ä»¬å°±åº”è¯¥æŠŠå®ƒä½œä¸ºä¸€ä¸ªå•ç‹¬çš„è¯æ¥ç”Ÿæˆå…¶è¯å‘é‡ï¼Œè€Œä¸æ˜¯å°†å…¶æ‹†å¼€ã€‚åŒæ ·çš„ä¾‹å­è¿˜æœ‰â€œNew Yorkâ€ï¼Œâ€œUnited Statedâ€ç­‰ã€‚</p><p>åœ¨Googleå‘å¸ƒçš„æ¨¡å‹ä¸­ï¼Œå®ƒæœ¬èº«çš„è®­ç»ƒæ ·æœ¬ä¸­æœ‰æ¥è‡ªGoogle Newsæ•°æ®é›†ä¸­çš„1000äº¿çš„å•è¯ï¼Œä½†æ˜¯é™¤äº†å•ä¸ªå•è¯ä»¥å¤–ï¼Œå•è¯ç»„åˆï¼ˆæˆ–è¯ç»„ï¼‰åˆæœ‰3ç™¾ä¸‡ä¹‹å¤šã€‚</p><p><em>2.2 å¯¹é«˜é¢‘è¯æŠ½æ ·</em></p><p>åœ¨ä¸Šä¸€éƒ¨åˆ†ä¸­ï¼Œå¯¹äºåŸå§‹æ–‡æœ¬ä¸ºâ€œThe quick brown fox jumps over the laze dogâ€ï¼Œå¦‚æœä½¿ç”¨å¤§å°ä¸º2çš„çª—å£ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¾—åˆ°å›¾ä¸­å±•ç¤ºçš„é‚£äº›è®­ç»ƒæ ·æœ¬ã€‚</p><p><img src="https://img-blog.csdnimg.cn/20200714210458879.png" alt="1"></p><p>ä½†æ˜¯å¯¹äºâ€œtheâ€è¿™ç§å¸¸ç”¨é«˜é¢‘å•è¯ï¼Œè¿™æ ·çš„å¤„ç†æ–¹å¼ä¼šå­˜åœ¨ä¸‹é¢ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li><p>å½“æˆ‘ä»¬å¾—åˆ°æˆå¯¹çš„å•è¯è®­ç»ƒæ ·æœ¬æ—¶ï¼Œ(â€œfoxâ€, â€œtheâ€) è¿™æ ·çš„è®­ç»ƒæ ·æœ¬å¹¶ä¸ä¼šç»™æˆ‘ä»¬æä¾›å…³äºâ€œfoxâ€æ›´å¤šçš„è¯­ä¹‰ä¿¡æ¯ï¼Œå› ä¸ºâ€œtheâ€åœ¨æ¯ä¸ªå•è¯çš„ä¸Šä¸‹æ–‡ä¸­å‡ ä¹éƒ½ä¼šå‡ºç°</p></li><li><p>ç”±äºåœ¨æ–‡æœ¬ä¸­â€œtheâ€è¿™æ ·çš„å¸¸ç”¨è¯å‡ºç°æ¦‚ç‡å¾ˆå¤§ï¼Œå› æ­¤æˆ‘ä»¬å°†ä¼šæœ‰å¤§é‡çš„ï¼ˆâ€theâ€œï¼Œâ€¦ï¼‰è¿™æ ·çš„è®­ç»ƒæ ·æœ¬ï¼Œè€Œè¿™äº›æ ·æœ¬æ•°é‡è¿œè¿œè¶…è¿‡äº†æˆ‘ä»¬å­¦ä¹ â€œtheâ€è¿™ä¸ªè¯å‘é‡æ‰€éœ€çš„è®­ç»ƒæ ·æœ¬æ•°</p></li></ol><p>Word2Vecé€šè¿‡â€œæŠ½æ ·â€æ¨¡å¼æ¥è§£å†³è¿™ç§é«˜é¢‘è¯é—®é¢˜ã€‚å®ƒçš„åŸºæœ¬æ€æƒ³å¦‚ä¸‹ï¼šå¯¹äºæˆ‘ä»¬åœ¨è®­ç»ƒåŸå§‹æ–‡æœ¬ä¸­é‡åˆ°çš„æ¯ä¸€ä¸ªå•è¯ï¼Œå®ƒä»¬éƒ½æœ‰ä¸€å®šæ¦‚ç‡è¢«æˆ‘ä»¬ä»æ–‡æœ¬ä¸­åˆ æ‰ï¼Œè€Œè¿™ä¸ªè¢«åˆ é™¤çš„æ¦‚ç‡ä¸å•è¯çš„é¢‘ç‡æœ‰å…³ã€‚</p><p>Ï‰i æ˜¯ä¸€ä¸ªå•è¯ï¼ŒZ(Ï‰i) æ˜¯ Ï‰i è¿™ä¸ªå•è¯åœ¨æ‰€æœ‰è¯­æ–™ä¸­å‡ºç°çš„é¢‘æ¬¡ï¼Œä¾‹å¦‚ï¼šå¦‚æœå•è¯â€œpeanutâ€åœ¨10äº¿è§„æ¨¡å¤§å°çš„è¯­æ–™ä¸­å‡ºç°äº†1000æ¬¡ï¼Œé‚£ä¹ˆ Z(peanut) = 1000/1000000000 = 1e - 6ã€‚</p><p>P(Ï‰i) ä»£è¡¨ç€ä¿ç•™æŸä¸ªå•è¯çš„æ¦‚ç‡ï¼š</p><p><img src="https://img-blog.csdnimg.cn/20200714205456898.png" alt></p><p><em>2.3 Negative sampling</em></p><p>è®­ç»ƒä¸€ä¸ªç¥ç»ç½‘ç»œæ„å‘³ç€è¦è¾“å…¥è®­ç»ƒæ ·æœ¬å¹¶ä¸”ä¸æ–­è°ƒæ•´ç¥ç»å…ƒçš„æƒé‡ï¼Œä»è€Œä¸æ–­æé«˜å¯¹ç›®æ ‡çš„å‡†ç¡®é¢„æµ‹ã€‚æ¯å½“ç¥ç»ç½‘ç»œç»è¿‡ä¸€ä¸ªè®­ç»ƒæ ·æœ¬çš„è®­ç»ƒï¼Œå®ƒçš„æƒé‡å°±ä¼šè¿›è¡Œä¸€æ¬¡è°ƒæ•´ã€‚</p><p>æ‰€ä»¥ï¼Œè¯å…¸çš„å¤§å°å†³å®šäº†æˆ‘ä»¬çš„Skip-Gramç¥ç»ç½‘ç»œå°†ä¼šæ‹¥æœ‰å¤§è§„æ¨¡çš„æƒé‡çŸ©é˜µï¼Œæ‰€æœ‰çš„è¿™äº›æƒé‡éœ€è¦é€šè¿‡æ•°ä»¥äº¿è®¡çš„è®­ç»ƒæ ·æœ¬æ¥è¿›è¡Œè°ƒæ•´ï¼Œè¿™æ˜¯éå¸¸æ¶ˆè€—è®¡ç®—èµ„æºçš„ï¼Œå¹¶ä¸”å®é™…ä¸­è®­ç»ƒèµ·æ¥ä¼šéå¸¸æ…¢ã€‚</p><p>è´Ÿé‡‡æ ·ï¼ˆnegative samplingï¼‰è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå®ƒæ˜¯ç”¨æ¥æé«˜è®­ç»ƒé€Ÿåº¦å¹¶ä¸”æ”¹å–„æ‰€å¾—åˆ°è¯å‘é‡çš„è´¨é‡çš„ä¸€ç§æ–¹æ³•ã€‚ä¸åŒäºåŸæœ¬æ¯ä¸ªè®­ç»ƒæ ·æœ¬æ›´æ–°æ‰€æœ‰çš„æƒé‡ï¼Œè´Ÿé‡‡æ ·æ¯æ¬¡è®©ä¸€ä¸ªè®­ç»ƒæ ·æœ¬ä»…ä»…æ›´æ–°ä¸€å°éƒ¨åˆ†çš„æƒé‡ï¼Œè¿™æ ·å°±ä¼šé™ä½æ¢¯åº¦ä¸‹é™è¿‡ç¨‹ä¸­çš„è®¡ç®—é‡ã€‚</p><p>å½“æˆ‘ä»¬ç”¨è®­ç»ƒæ ·æœ¬ ( input word: â€œfoxâ€ï¼Œoutput word: â€œquickâ€) æ¥è®­ç»ƒæˆ‘ä»¬çš„ç¥ç»ç½‘ç»œæ—¶ï¼Œâ€œ foxâ€å’Œâ€œquickâ€éƒ½æ˜¯ç»è¿‡one-hotç¼–ç çš„ã€‚å¦‚æœæˆ‘ä»¬çš„è¯å…¸å¤§å°ä¸º10000æ—¶ï¼Œåœ¨è¾“å‡ºå±‚ï¼Œæˆ‘ä»¬æœŸæœ›å¯¹åº”â€œquickâ€å•è¯çš„é‚£ä¸ªç¥ç»å…ƒç»“ç‚¹è¾“å‡º1ï¼Œå…¶ä½™9999ä¸ªéƒ½åº”è¯¥è¾“å‡º0ã€‚åœ¨è¿™é‡Œï¼Œè¿™9999ä¸ªæˆ‘ä»¬æœŸæœ›è¾“å‡ºä¸º0çš„ç¥ç»å…ƒç»“ç‚¹æ‰€å¯¹åº”çš„å•è¯æˆ‘ä»¬ç§°ä¸ºâ€œnegativeâ€ wordã€‚</p><p>å½“ä½¿ç”¨è´Ÿé‡‡æ ·æ—¶ï¼Œæˆ‘ä»¬å°†éšæœºé€‰æ‹©ä¸€å°éƒ¨åˆ†çš„negative wordsï¼ˆæ¯”å¦‚é€‰5ä¸ªnegative wordsï¼‰æ¥æ›´æ–°å¯¹åº”çš„æƒé‡ã€‚æˆ‘ä»¬ä¹Ÿä¼šå¯¹æˆ‘ä»¬çš„â€œpositiveâ€ wordè¿›è¡Œæƒé‡æ›´æ–°ï¼ˆåœ¨æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè¿™ä¸ªå•è¯æŒ‡çš„æ˜¯â€quickâ€œï¼‰ã€‚</p><p>PS: åœ¨è®ºæ–‡ä¸­ï¼Œä½œè€…æŒ‡å‡ºæŒ‡å‡ºå¯¹äºå°è§„æ¨¡æ•°æ®é›†ï¼Œé€‰æ‹©5-20ä¸ªnegative wordsä¼šæ¯”è¾ƒå¥½ï¼Œå¯¹äºå¤§è§„æ¨¡æ•°æ®é›†å¯ä»¥ä»…é€‰æ‹©2-5ä¸ªnegative wordsã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨â€œä¸€å…ƒæ¨¡å‹åˆ†å¸ƒï¼ˆunigram distributionï¼‰â€æ¥é€‰æ‹©â€œnegative wordsâ€ã€‚ä¸ªå•è¯è¢«é€‰ä½œnegative sampleçš„æ¦‚ç‡è·Ÿå®ƒå‡ºç°çš„é¢‘æ¬¡æœ‰å…³ï¼Œå‡ºç°é¢‘æ¬¡è¶Šé«˜çš„å•è¯è¶Šå®¹æ˜“è¢«é€‰ä½œnegative wordsã€‚</p><p>æ¯ä¸ªå•è¯è¢«é€‰ä¸ºâ€œnegative wordsâ€çš„æ¦‚ç‡è®¡ç®—å…¬å¼ï¼š</p><p><img src="https://img-blog.csdnimg.cn/20200714205545327.png" alt></p><p>å…¶ä¸­ f(Ï‰i)ä»£è¡¨ç€å•è¯å‡ºç°çš„é¢‘æ¬¡ï¼Œè€Œå…¬å¼ä¸­å¼€3/4çš„æ ¹å·å®Œå…¨æ˜¯åŸºäºç»éªŒçš„ã€‚</p><p>åœ¨ä»£ç è´Ÿé‡‡æ ·çš„ä»£ç å®ç°ä¸­ï¼Œunigram tableæœ‰ä¸€ä¸ªåŒ…å«äº†ä¸€äº¿ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„æ˜¯ç”±è¯æ±‡è¡¨ä¸­æ¯ä¸ªå•è¯çš„ç´¢å¼•å·å¡«å……çš„ï¼Œå¹¶ä¸”è¿™ä¸ªæ•°ç»„ä¸­æœ‰é‡å¤ï¼Œä¹Ÿå°±æ˜¯è¯´æœ‰äº›å•è¯ä¼šå‡ºç°å¤šæ¬¡ã€‚é‚£ä¹ˆæ¯ä¸ªå•è¯çš„ç´¢å¼•åœ¨è¿™ä¸ªæ•°ç»„ä¸­å‡ºç°çš„æ¬¡æ•°è¯¥å¦‚ä½•å†³å®šå‘¢ï¼Œæœ‰å…¬å¼ï¼Œä¹Ÿå°±æ˜¯è¯´è®¡ç®—å‡ºçš„è´Ÿé‡‡æ ·æ¦‚ç‡*1äº¿=å•è¯åœ¨è¡¨ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚</p><p>æœ‰äº†è¿™å¼ è¡¨ä»¥åï¼Œæ¯æ¬¡å»æˆ‘ä»¬è¿›è¡Œè´Ÿé‡‡æ ·æ—¶ï¼Œåªéœ€è¦åœ¨0-1äº¿èŒƒå›´å†…ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œç„¶åé€‰æ‹©è¡¨ä¸­ç´¢å¼•å·ä¸ºè¿™ä¸ªéšæœºæ•°çš„é‚£ä¸ªå•è¯ä½œä¸ºæˆ‘ä»¬çš„negative wordå³å¯ã€‚ä¸€ä¸ªå•è¯çš„è´Ÿé‡‡æ ·æ¦‚ç‡è¶Šå¤§ï¼Œé‚£ä¹ˆå®ƒåœ¨è¿™ä¸ªè¡¨ä¸­å‡ºç°çš„æ¬¡æ•°å°±è¶Šå¤šï¼Œå®ƒè¢«é€‰ä¸­çš„æ¦‚ç‡å°±è¶Šå¤§ã€‚</p><p><strong>3. Hierarchical Softmax</strong></p><p><em>3.1 éœå¤«æ›¼æ ‘</em></p><p>è¾“å…¥ï¼šæƒå€¼ä¸º(w1,w2,â€¦wn)çš„nä¸ªèŠ‚ç‚¹</p><p>è¾“å‡ºï¼šå¯¹åº”çš„éœå¤«æ›¼æ ‘</p><ol><li><p>å°†(w1,w2,â€¦wn)çœ‹åšæ˜¯æœ‰næ£µæ ‘çš„æ£®æ—ï¼Œæ¯ä¸ªæ ‘ä»…æœ‰ä¸€ä¸ªèŠ‚ç‚¹</p></li><li><p>åœ¨æ£®æ—ä¸­é€‰æ‹©æ ¹èŠ‚ç‚¹æƒå€¼æœ€å°çš„ä¸¤æ£µæ ‘è¿›è¡Œåˆå¹¶ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„æ ‘ï¼Œè¿™ä¸¤é¢—æ ‘åˆ†å¸ƒä½œä¸ºæ–°æ ‘çš„å·¦å³å­æ ‘ã€‚æ–°æ ‘çš„æ ¹èŠ‚ç‚¹æƒé‡ä¸ºå·¦å³å­æ ‘çš„æ ¹èŠ‚ç‚¹æƒé‡ä¹‹å’Œ</p></li><li><p>å°†ä¹‹å‰çš„æ ¹èŠ‚ç‚¹æƒå€¼æœ€å°çš„ä¸¤æ£µæ ‘ä»æ£®æ—åˆ é™¤ï¼Œå¹¶æŠŠæ–°æ ‘åŠ å…¥æ£®æ—</p></li><li><p>é‡å¤æ­¥éª¤ 2 å’Œ 3 ç›´åˆ°æ£®æ—é‡Œåªæœ‰ä¸€æ£µæ ‘ä¸ºæ­¢</p></li></ol><p>ä¸‹é¢æˆ‘ä»¬ç”¨ä¸€ä¸ªå…·ä½“çš„ä¾‹å­æ¥è¯´æ˜éœå¤«æ›¼æ ‘å»ºç«‹çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬æœ‰(aï¼Œbï¼Œcï¼Œdï¼Œeï¼Œf)å…±6ä¸ªèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹çš„æƒå€¼åˆ†å¸ƒæ˜¯(16ï¼Œ4ï¼Œ8ï¼Œ6ï¼Œ20ï¼Œ3)ã€‚</p><p> é¦–å…ˆæ˜¯æœ€å°çš„bå’Œfåˆå¹¶ï¼Œå¾—åˆ°çš„æ–°æ ‘æ ¹èŠ‚ç‚¹æƒé‡æ˜¯7.æ­¤æ—¶æ£®æ—é‡Œ5æ£µæ ‘ï¼Œæ ¹èŠ‚ç‚¹æƒé‡åˆ†åˆ«æ˜¯16ï¼Œ8ï¼Œ6ï¼Œ20ï¼Œ7ã€‚æ­¤æ—¶æ ¹èŠ‚ç‚¹æƒé‡æœ€å°çš„6ï¼Œ7åˆå¹¶ï¼Œå¾—åˆ°æ–°å­æ ‘ï¼Œä¾æ¬¡ç±»æ¨ï¼Œæœ€ç»ˆå¾—åˆ°ä¸‹é¢çš„éœå¤«æ›¼æ ‘ã€‚</p><p><img src="https://img-blog.csdnimg.cn/20200714210647687.png" alt="3"></p><p>é‚£ä¹ˆéœå¤«æ›¼æ ‘æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿä¸€èˆ¬å¾—åˆ°éœå¤«æ›¼æ ‘åæˆ‘ä»¬ä¼šå¯¹å¶å­èŠ‚ç‚¹è¿›è¡Œéœå¤«æ›¼ç¼–ç ï¼Œç”±äºæƒé‡é«˜çš„å¶å­èŠ‚ç‚¹è¶Šé è¿‘æ ¹èŠ‚ç‚¹ï¼Œè€Œæƒé‡ä½çš„å¶å­èŠ‚ç‚¹ä¼šè¿œç¦»æ ¹èŠ‚ç‚¹ï¼Œè¿™æ ·æˆ‘ä»¬çš„é«˜æƒé‡èŠ‚ç‚¹ç¼–ç å€¼è¾ƒçŸ­ï¼Œè€Œä½æƒé‡å€¼ç¼–ç å€¼è¾ƒé•¿ã€‚è¿™ä¿è¯çš„æ ‘çš„å¸¦æƒè·¯å¾„æœ€çŸ­ï¼Œä¹Ÿç¬¦åˆæˆ‘ä»¬çš„ä¿¡æ¯è®ºï¼Œå³æˆ‘ä»¬å¸Œæœ›è¶Šå¸¸ç”¨çš„è¯æ‹¥æœ‰æ›´çŸ­çš„ç¼–ç ã€‚å¦‚ä½•ç¼–ç å‘¢ï¼Ÿä¸€èˆ¬å¯¹äºä¸€ä¸ªéœå¤«æ›¼æ ‘çš„èŠ‚ç‚¹ï¼ˆæ ¹èŠ‚ç‚¹é™¤å¤–ï¼‰ï¼Œå¯ä»¥çº¦å®šå·¦å­æ ‘ç¼–ç ä¸º0ï¼Œå³å­æ ‘ç¼–ç ä¸º1ã€‚å¦‚ä¸Šå›¾ï¼Œåˆ™å¯ä»¥å¾—åˆ°cçš„ç¼–ç æ˜¯00ã€‚</p><p>  åœ¨word2vecä¸­ï¼Œçº¦å®šç¼–ç æ–¹å¼å’Œä¸Šé¢çš„ä¾‹å­ç›¸åï¼Œå³çº¦å®šå·¦å­æ ‘ç¼–ç ä¸º1ï¼Œå³å­æ ‘ç¼–ç ä¸º0ï¼ŒåŒæ—¶çº¦å®šå·¦å­æ ‘çš„æƒé‡ä¸å°äºå³å­æ ‘çš„æƒé‡ã€‚</p><p>æ›´å¤šåŸç†å¯å‚è€ƒï¼š<a href="https://blog.csdn.net/lzw66666/article/details/78934893">éœå¤«æ›¼æ ‘åŸç†</a></p><p><em>3.2Hierarchical Softmaxè¿‡ç¨‹</em></p><p>ä¸ºäº†é¿å…è¦è®¡ç®—æ‰€æœ‰è¯çš„softmaxæ¦‚ç‡ï¼Œword2vecé‡‡æ ·äº†éœå¤«æ›¼æ ‘æ¥ä»£æ›¿ä»éšè—å±‚åˆ°è¾“å‡ºsoftmaxå±‚çš„æ˜ å°„ã€‚</p><p>éœå¤«æ›¼æ ‘çš„å»ºç«‹ï¼š</p><ul><li><p>æ ¹æ®æ ‡ç­¾ï¼ˆlabelï¼‰å’Œé¢‘ç‡å»ºç«‹éœå¤«æ›¼æ ‘ï¼ˆlabelå‡ºç°çš„é¢‘ç‡è¶Šé«˜ï¼ŒHuffmanæ ‘çš„è·¯å¾„è¶ŠçŸ­ï¼‰</p></li><li><p>Huffmanæ ‘ä¸­æ¯ä¸€å¶å­ç»“ç‚¹ä»£è¡¨ä¸€ä¸ªlabel</p></li></ul><p><img src="https://img-blog.csdnimg.cn/20200714205623583.png" alt="4"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/20200714205711676.png" alt></p><p><img src="https://img-blog.csdnimg.cn/20200714205759860.png" alt></p><p>æ³¨æ„ï¼šæ­¤æ—¶çš„thetaæ˜¯ä¸€ä¸ªå¾…å®šç³»æ•°ï¼Œå®ƒæ˜¯ç”±æ¨å¯¼æœ€å¤§ä¼¼ç„¶ä¹‹åæ±‚è§£å¾—åˆ°è¿­ä»£å¼å­ã€‚</p><p><img src="https://img-blog.csdnimg.cn/20200714205841871.png" alt></p><p><strong>ä½¿ç”¨gensimè®­ç»ƒword2vec</strong></p><pre><code>from gensim.models.word2vec import Word2Vecmodel = Word2Vec(sentences, workers=num_workers, size=num_features)</code></pre><p><strong>å‚è€ƒï¼š</strong></p><ol><li><p><a href="http://www.hankcs.com/nlp/word-vector-representations-word2vec.html">CS224nç¬”è®°2 è¯çš„å‘é‡è¡¨ç¤ºï¼šword2vec</a></p></li><li><p><a href="http://www.52nlp.cn/%E6%96%AF%E5%9D%A6%E7%A6%8F%E5%A4%A7%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%B8%8E%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E7%AC%AC%E4%BA%8C%E8%AE%B2%E8%AF%8D%E5%90%91%E9%87%8F">æ–¯å¦ç¦å¤§å­¦æ·±åº¦å­¦ä¹ ä¸è‡ªç„¶è¯­è¨€å¤„ç†ç¬¬äºŒè®²ï¼šè¯å‘é‡ </a></p></li><li><p><a href="https://www.cnblogs.com/iloveai/p/cs224d-lecture3-note.html">(Stanford CS224d) Deep Learning and NLPè¯¾ç¨‹ç¬”è®°ï¼ˆä¸‰ï¼‰ï¼šGloVeä¸æ¨¡å‹çš„è¯„ä¼°</a></p></li><li><p><a href="http://www.cnblogs.com/pinard/p/7249903.html">http://www.cnblogs.com/pinard/p/7249903.html</a></p></li><li><p><a href="https://blog.csdn.net/yinkun6514/article/details/79218736">https://blog.csdn.net/yinkun6514/article/details/79218736</a></p></li><li><p><a href="https://www.leiphone.com/news/201706/PamWKpfRFEI42McI.html">https://www.leiphone.com/news/201706/PamWKpfRFEI42McI.html</a></p></li></ol><h4 id="TextCNN"><a href="#TextCNN" class="headerlink" title="TextCNN"></a>TextCNN</h4><p>TextCNNåˆ©ç”¨CNNï¼ˆå·ç§¯ç¥ç»ç½‘ç»œï¼‰è¿›è¡Œæ–‡æœ¬ç‰¹å¾æŠ½å–ï¼Œä¸åŒå¤§å°çš„å·ç§¯æ ¸åˆ†åˆ«æŠ½å–n-gramç‰¹å¾ï¼Œå·ç§¯è®¡ç®—å‡ºçš„ç‰¹å¾å›¾ç»è¿‡MaxPoolingä¿ç•™æœ€å¤§çš„ç‰¹å¾å€¼ï¼Œç„¶åå°†æ‹¼æ¥æˆä¸€ä¸ªå‘é‡ä½œä¸ºæ–‡æœ¬çš„è¡¨ç¤ºã€‚</p><p>è¿™é‡Œæˆ‘ä»¬åŸºäºTextCNNåŸå§‹è®ºæ–‡çš„è®¾å®šï¼Œåˆ†åˆ«é‡‡ç”¨äº†100ä¸ªå¤§å°ä¸º2,3,4çš„å·ç§¯æ ¸ï¼Œæœ€åå¾—åˆ°çš„æ–‡æœ¬å‘é‡å¤§å°ä¸º100*3=300ç»´ã€‚</p><p><img src="https://img-blog.csdnimg.cn/20200714205932720.jpeg" alt></p><h4 id="TextRNN"><a href="#TextRNN" class="headerlink" title="TextRNN"></a>TextRNN</h4><p>TextRNNåˆ©ç”¨RNNï¼ˆå¾ªç¯ç¥ç»ç½‘ç»œï¼‰è¿›è¡Œæ–‡æœ¬ç‰¹å¾æŠ½å–ï¼Œç”±äºæ–‡æœ¬æœ¬èº«æ˜¯ä¸€ç§åºåˆ—ï¼Œè€ŒLSTMå¤©ç„¶é€‚åˆå»ºæ¨¡åºåˆ—æ•°æ®ã€‚TextRNNå°†å¥å­ä¸­æ¯ä¸ªè¯çš„è¯å‘é‡ä¾æ¬¡è¾“å…¥åˆ°åŒå‘åŒå±‚LSTMï¼Œåˆ†åˆ«å°†ä¸¤ä¸ªæ–¹å‘æœ€åä¸€ä¸ªæœ‰æ•ˆä½ç½®çš„éšè—å±‚æ‹¼æ¥æˆä¸€ä¸ªå‘é‡ä½œä¸ºæ–‡æœ¬çš„è¡¨ç¤ºã€‚</p><p><img src="https://img-blog.csdnimg.cn/20200714210806492.png" alt="5"></p><h3 id="åŸºäºTextCNNã€TextRNNçš„æ–‡æœ¬è¡¨ç¤º"><a href="#åŸºäºTextCNNã€TextRNNçš„æ–‡æœ¬è¡¨ç¤º" class="headerlink" title="åŸºäºTextCNNã€TextRNNçš„æ–‡æœ¬è¡¨ç¤º"></a>åŸºäºTextCNNã€TextRNNçš„æ–‡æœ¬è¡¨ç¤º</h3><h4 id="TextCNN-1"><a href="#TextCNN-1" class="headerlink" title="TextCNN"></a>TextCNN</h4><ul><li>æ¨¡å‹æ­å»º</li></ul><pre><code>self.filter_sizes = [2, 3, 4]  # n-gram windowself.out_channel = 100self.convs = nn.ModuleList([nn.Conv2d(1, self.out_channel, (filter_size, input_size), bias=True) for filter_size in self.filter_sizes])</code></pre><ul><li>å‰å‘ä¼ æ’­</li></ul><pre><code>pooled_outputs = []for i in range(len(self.filter_sizes)):    filter_height = sent_len - self.filter_sizes[i] + 1    conv = self.convs[i](batch_embed)    hidden = F.relu(conv)  # sen_num x out_channel x filter_height x 1    mp = nn.MaxPool2d((filter_height, 1))  # (filter_height, filter_width)    # sen_num x out_channel x 1 x 1 -&gt; sen_num x out_channel    pooled = mp(hidden).reshape(sen_num, self.out_channel)    pooled_outputs.append(pooled)</code></pre><h4 id="TextRNN-1"><a href="#TextRNN-1" class="headerlink" title="TextRNN"></a>TextRNN</h4><ul><li>æ¨¡å‹æ­å»º</li></ul><pre><code>input_size = config.word_dimsself.word_lstm = LSTM(    input_size=input_size,    hidden_size=config.word_hidden_size,    num_layers=config.word_num_layers,    batch_first=True,    bidirectional=True,    dropout_in=config.dropout_input,    dropout_out=config.dropout_hidden,)</code></pre><ul><li>å‰å‘ä¼ æ’­</li></ul><pre><code>hiddens, _ = self.word_lstm(batch_embed, batch_masks)  # sent_len x sen_num x hidden*2hiddens.transpose_(1, 0)  # sen_num x sent_len x hidden*2if self.training:    hiddens = drop_sequence_sharedmask(hiddens, self.dropout_mlp)</code></pre><h3 id="ä½¿ç”¨HANç”¨äºæ–‡æœ¬åˆ†ç±»"><a href="#ä½¿ç”¨HANç”¨äºæ–‡æœ¬åˆ†ç±»" class="headerlink" title="ä½¿ç”¨HANç”¨äºæ–‡æœ¬åˆ†ç±»"></a>ä½¿ç”¨HANç”¨äºæ–‡æœ¬åˆ†ç±»</h3><p><a href="https://link.zhihu.com/?target=http%3A//www.aclweb.org/anthology/N16-1174">Hierarchical Attention Network for Document Classification</a>(HAN)åŸºäºå±‚çº§æ³¨æ„åŠ›ï¼Œåœ¨å•è¯å’Œå¥å­çº§åˆ«åˆ†åˆ«ç¼–ç å¹¶åŸºäºæ³¨æ„åŠ›è·å¾—æ–‡æ¡£çš„è¡¨ç¤ºï¼Œç„¶åç»è¿‡Softmaxè¿›è¡Œåˆ†ç±»ã€‚å…¶ä¸­word encoderçš„ä½œç”¨æ˜¯è·å¾—å¥å­çš„è¡¨ç¤ºï¼Œå¯ä»¥æ›¿æ¢ä¸ºä¸ŠèŠ‚æåˆ°çš„TextCNNå’ŒTextRNNï¼Œä¹Ÿå¯ä»¥æ›¿æ¢ä¸ºä¸‹èŠ‚ä¸­çš„BERTã€‚</p><p><img src="https://img-blog.csdnimg.cn/20200714210015326.png" alt="Sequence Intent Classification Using Hierarchical Attention..."></p><h3 id="æœ¬ç« å°ç»“"><a href="#æœ¬ç« å°ç»“" class="headerlink" title="æœ¬ç« å°ç»“"></a>æœ¬ç« å°ç»“</h3><p>æœ¬ç« ä»‹ç»äº†Word2Vecçš„ä½¿ç”¨ï¼Œä»¥åŠTextCNNã€TextRNNçš„åŸç†å’Œè®­ç»ƒï¼Œæœ€åä»‹ç»äº†ç”¨äºé•¿æ–‡æ¡£åˆ†ç±»çš„HANã€‚</p><h3 id="æœ¬ç« ä½œä¸š"><a href="#æœ¬ç« ä½œä¸š" class="headerlink" title="æœ¬ç« ä½œä¸š"></a>æœ¬ç« ä½œä¸š</h3><ul><li>å°è¯•é€šè¿‡Word2Vecè®­ç»ƒè¯å‘é‡</li><li>å°è¯•ä½¿ç”¨TextCNNã€TextRNNå®Œæˆæ–‡æœ¬è¡¨ç¤º</li><li>å°è¯•ä½¿ç”¨HANè¿›è¡Œæ–‡æœ¬åˆ†ç±»</li></ul><p><strong>å‚è€ƒï¼š</strong></p><ol><li><a href="https://mp.weixin.qq.com/s/I-yeHQopTFdNk67Ir_iWiA">https://mp.weixin.qq.com/s/I-yeHQopTFdNk67Ir_iWiA</a></li><li><a href="https://github.com/hecongqing/2018-daguan-competition">https://github.com/hecongqing/2018-daguan-competition</a></li></ol>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Deep Learning</tag>
      
      <tag>Datawhale</tag>
      
      <tag>Classification</tag>
      
      <tag>word2vec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç«èµ›æ‰“å¡ã€‘æ–°é—»æ–‡æœ¬åˆ†ç±»ä¹‹æ·±åº¦å­¦ä¹ FastText</title>
    <link href="/2020/07/27/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0FastText/"/>
    <url>/2020/07/27/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0FastText/</url>
    
    <content type="html"><![CDATA[<p>å½“ä½ å†™ä¸œè¥¿æˆ–è®²è¯çš„æ—¶å€™ï¼Œå§‹ç»ˆè¦æƒ³åˆ°ä½¿æ¯ä¸ªæ™®é€šå·¥äººéƒ½æ‡‚å¾—ï¼Œéƒ½ç›¸ä¿¡ä½ çš„å·å¬ï¼Œéƒ½å†³å¿ƒè·Ÿç€ä½ èµ°ã€‚è¦æƒ³åˆ°ä½ ç©¶ç«Ÿä¸ºä»€ä¹ˆäººå†™ä¸œè¥¿ï¼Œå‘ä»€ä¹ˆäººè®²è¯ã€‚â€”â€”ã€Šåå¯¹å…šå…«è‚¡ã€‹<br><!--more---></p><p>åœ¨ä¸Šä¸€ç« èŠ‚ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¼ ç»Ÿæœºå™¨å­¦ä¹ ç®—æ³•æ¥è§£å†³äº†æ–‡æœ¬åˆ†ç±»é—®é¢˜ï¼Œä»æœ¬ç« å¼€å§‹æˆ‘ä»¬å°†å°è¯•ä½¿ç”¨æ·±åº¦å­¦ä¹ æ–¹æ³•ã€‚ä¸ä¼ ç»Ÿæœºå™¨å­¦ä¹ ä¸åŒï¼Œæ·±åº¦å­¦ä¹ æ—¢æä¾›ç‰¹å¾æå–åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥å®Œæˆåˆ†ç±»çš„åŠŸèƒ½ã€‚</p><p>æœ¬æ¬¡å­¦ä¹ æˆ‘ä»¬ä¸»è¦ä»‹ç»FastTextã€‚</p><p>fastTextæ˜¯ä¸€ä¸ªå¿«é€Ÿæ–‡æœ¬åˆ†ç±»ç®—æ³•ï¼Œä¸åŸºäºç¥ç»ç½‘ç»œçš„åˆ†ç±»ç®—æ³•ç›¸æ¯”æœ‰ä¸¤å¤§ä¼˜ç‚¹ï¼š<br>1ã€fastTextåœ¨ä¿æŒé«˜ç²¾åº¦çš„æƒ…å†µä¸‹åŠ å¿«äº†è®­ç»ƒé€Ÿåº¦å’Œæµ‹è¯•é€Ÿåº¦<br>2ã€fastTextä¸éœ€è¦é¢„è®­ç»ƒå¥½çš„è¯å‘é‡ï¼ŒfastTextä¼šè‡ªå·±è®­ç»ƒè¯å‘é‡<br>3ã€fastTextä¸¤ä¸ªé‡è¦çš„ä¼˜åŒ–ï¼šå±‚çº§ Softmaxã€N-gram</p><pre><code class="lang-python">import fasttextmodel = fasttext.train_supervised(&#39;train.csv&#39;, lr=1.0, wordNgrams=2, verbose=2, minCount=1, epoch=25, loss=&quot;hs&quot;)val_pred = [model.predict(x)[0][0].split(&#39;__&#39;)[-1] for x in df_train.iloc[-5000:][&#39;text&#39;]]print(f1_score(df_train[&#39;label&#39;].values[-5000:].astype(str), val_pred, average=&#39;macro&#39;))0.8256254253081777</code></pre>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Deep Learning</tag>
      
      <tag>Datawhale</tag>
      
      <tag>Classification</tag>
      
      <tag>FastText</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç«èµ›æ‰“å¡ã€‘æ–°é—»æ–‡æœ¬åˆ†ç±»ä¹‹æœºå™¨å­¦ä¹ æ–‡æœ¬åˆ†ç±»</title>
    <link href="/2020/07/23/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB/"/>
    <url>/2020/07/23/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB/</url>
    
    <content type="html"><![CDATA[<p>ä»Šæˆ‘ç¹å­ä¹‹éš¾ç©·ä¹Ÿï¼Œå¾éè‡³äºå­ä¹‹é—¨åˆ™æ®†çŸ£ã€‚<br><!--more---></p><h1 id="æ–‡æœ¬è¡¨ç¤ºæ–¹æ³•å®è·µ"><a href="#æ–‡æœ¬è¡¨ç¤ºæ–¹æ³•å®è·µ" class="headerlink" title="æ–‡æœ¬è¡¨ç¤ºæ–¹æ³•å®è·µ"></a>æ–‡æœ¬è¡¨ç¤ºæ–¹æ³•å®è·µ</h1><p>è‡ªç„¶è¯­è¨€æ€»éœ€è¦è½¬æ¢æˆæ•°å€¼ç­‰è¡¨ç¤ºæ‰èƒ½è¢«çº¿æ€§æ¨¡å‹ç­‰å¤„ç†ã€‚ä¸‹é¢åˆ©ç”¨task1&amp;2æåˆ°çš„ç¼–ç æ–¹å¼è¿›è¡Œå®è·µã€‚</p><h2 id="Label"><a href="#Label" class="headerlink" title="Label"></a>Label</h2><p>è¿™ç§ç¼–ç æ–¹å¼æ˜¯æŠŠè‡ªç„¶è¯­è¨€é¦–å…ˆåˆ†è¯æˆåŸºæœ¬è¯­ç´ å•å…ƒï¼Œç„¶åæŠŠä¸åŒçš„å•å…ƒèµ‹äºˆå”¯ä¸€çš„æ•´æ•°ç¼–ç ã€‚æ¯”å¦‚æœ¬æ¬¡æ¯”èµ›æä¾›çš„æ•°æ®é›†å°±æ˜¯è¯¥ç¼–ç æ–¹å¼ã€‚æ¯æ¡æ•°æ®éƒ½æ˜¯æ•´æ•°åºåˆ—ï¼Œæœ€å¤§æ•´æ•°ä¸º7549ï¼Œæœ€å°æ•´æ•°ä¸º0ã€‚</p><p>è¿™æ ·åšçš„å¥½å¤„æ˜¯ç›¸å¯¹èŠ‚çº¦å†…å­˜ï¼Œä¸”å®ç°ç®€å•ï¼›åå¤„æ˜¯ç ´åäº†è‡ªç„¶è¯­è¨€ä¸­éƒ¨åˆ†è¯­ä¹‰ï¼Œæ— æ³•è¿›ä¸€æ­¥è¿›è¡Œè¯¸å¦‚åˆ é™¤åœç”¨è¯ã€è¯æ ¹æå–ç­‰æ“ä½œã€‚å¦å¤–ï¼Œç¼–ç çš„å¤§å°å¯èƒ½ä¼šè®©ç®—æ³•è¯¯ä»¥ä¸ºè¯å’Œè¯ä¹‹é—´æœ‰å¤§å°å…³ç³»ã€‚</p><p>å› ä¸ºåŸæ¥çš„æ•°æ®é›†å°±æ˜¯æ­¤ç¼–ç æ–¹æ³•ï¼Œæ•…ä¸å†èµ˜è¿°ã€‚</p><h2 id="Bag-of-Words-CountVectorizer"><a href="#Bag-of-Words-CountVectorizer" class="headerlink" title="Bag of Words: CountVectorizer"></a>Bag of Words: CountVectorizer</h2><p>ç”¨äºæœºå™¨å­¦ä¹ çš„æ–‡æœ¬è¡¨ç¤ºæœ‰ä¸€ç§æœ€ç®€å•çš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯æœ€æœ‰æ•ˆä¸”æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨è¯è¢‹ï¼ˆbag-of-wordsï¼‰è¡¨ç¤ºã€‚ä½¿ç”¨è¿™ç§è¡¨ç¤ºæ–¹å¼æ—¶ï¼Œæˆ‘ä»¬èˆå¼ƒäº†è¾“å…¥æ–‡æœ¬ä¸­çš„å¤§éƒ¨åˆ†ç»“æ„ï¼Œå¦‚ç« èŠ‚ã€æ®µè½ã€å¥å­å’Œæ ¼å¼ï¼Œ<strong>åªè®¡ç®—è¯­æ–™åº“ä¸­æ¯ä¸ªå•è¯åœ¨æ¯ä¸ªæ–‡æœ¬ä¸­çš„å‡ºç°é¢‘æ¬¡</strong>ã€‚èˆå¼ƒç»“æ„å¹¶ä»…è®¡ç®—å•è¯å‡ºç°æ¬¡æ•°ï¼Œè¿™ä¼šè®©è„‘æµ·ä¸­å‡ºç°å°†æ–‡æœ¬è¡¨ç¤ºä¸ºâ€œè¢‹â€çš„ç”»é¢ã€‚</p><pre><code class="lang-python">from sklearn.feature_extraction.text import CountVectorizerbagvect = CountVectorizer(max_df=.15)bagvect.fit(corpus)feature_names = bagvect.get_feature_names()print(&quot;Number of features: &#123;&#125;&quot;.format(len(feature_names)))print(&quot;First 20 features:\n&#123;&#125;&quot;.format(feature_names[:20]))Number of features: 4740First 20 features:[&#39;10&#39;, &#39;100&#39;, &#39;1000&#39;, &#39;1001&#39;, &#39;1002&#39;, &#39;1004&#39;, &#39;1005&#39;, &#39;1006&#39;, &#39;1007&#39;, &#39;1008&#39;, &#39;1009&#39;, &#39;101&#39;, &#39;1010&#39;, &#39;1012&#39;, &#39;1013&#39;, &#39;1014&#39;, &#39;102&#39;, &#39;1020&#39;, &#39;1022&#39;, &#39;1023&#39;]bag_of_words = bagvect.transform(corpus)print(&quot;bag_of_words: &#123;&#125;&quot;.format(repr(bag_of_words)))print(bag_of_words[0].toarray())bag_of_words: &lt;10000x4740 sparse matrix of type &#39;&lt;class &#39;numpy.int64&#39;&gt;&#39;    with 813365 stored elements in Compressed Sparse Row format&gt;[[0 0 0 ... 0 0 0]]</code></pre><p>è¯è¢‹è¡¨ç¤ºä¿å­˜åœ¨ä¸€ä¸ª SciPy ç¨€ç–çŸ©é˜µä¸­ï¼Œè¿™ç§æ•°æ®æ ¼å¼åªä¿å­˜éé›¶å…ƒç´ </p><p>çŸ©é˜µçš„å½¢çŠ¶ä¸º 10000x4740ï¼Œæ¯è¡Œå¯¹åº”äºä¸¤ä¸ªæ•°æ®ç‚¹ä¹‹ä¸€ï¼Œæ¯ä¸ªç‰¹å¾å¯¹åº”äºè¯è¡¨ä¸­çš„ä¸€ä¸ªå•è¯ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œé€‰äº†10000ä¸ªæ ·æœ¬ï¼Œå¦‚æœæŠŠæ‰€æœ‰æ•°æ®é›†éƒ½ç»™è½¬åŒ–æˆè¯è¢‹å‘é‡ï¼Œé‚£ä¹ˆçŸ©é˜µå½¢çŠ¶å°†ä¼šæ˜¯ 200000Ã—6859ã€‚</p><h2 id="Hashç¼–ç å®è·µ"><a href="#Hashç¼–ç å®è·µ" class="headerlink" title="Hashç¼–ç å®è·µ"></a>Hashç¼–ç å®è·µ</h2><p><a href="https://chenk.tech/posts/eb79fc5f.html">https://chenk.tech/posts/eb79fc5f.html</a></p><pre><code class="lang-python">from sklearn.feature_extraction.text import HashingVectorizerhvec = HashingVectorizer(n_features=10000)hvec.fit(corpus)h_words = hvec.transform(corpus)print(&quot;h_words: &#123;&#125;&quot;.format(repr(h_words)))h_words: &lt;10000x10000 sparse matrix of type &#39;&lt;class &#39;numpy.float64&#39;&gt;&#39;    with 2739957 stored elements in Compressed Sparse Row format&gt;</code></pre><p>æˆ‘é€‰å–äº†10000ä¸ªæ ·æœ¬ï¼Œå°†å…¶æ˜ å°„åˆ°10000ä¸ªç‰¹å¾çš„Hashå‘é‡ä¸­ã€‚</p><pre><code class="lang-python">print(h_words[0]) (0, 0)    -0.009886463280261834  (0, 6)    -0.04943231640130917  (0, 9)    0.03954585312104734  (0, 26)    -0.04943231640130917  (0, 42)    0.01977292656052367  (0, 70)    0.01977292656052367  (0, 74)    -0.12852402264340385  (0, 94)    0.009886463280261834  (0, 99)    0.01977292656052367  (0, 109)    -0.009886463280261834  :    :  (0, 9642)    -0.009886463280261834  (0, 9650)    0.01977292656052367  (0, 9653)    0.009886463280261834  (0, 9659)    -0.04943231640130917  (0, 9715)    -0.009886463280261834  (0, 9721)    0.009886463280261834  (0, 9729)    -0.009886463280261834  (0, 9741)    0.009886463280261834  (0, 9765)    -0.01977292656052367  (0, 9781)    0.01977292656052367  (0, 9821)    -0.009886463280261834  (0, 9862)    0.009886463280261834  (0, 9887)    -0.009886463280261834  (0, 9932)    0.009886463280261834</code></pre><p>è¾“å‡ºçš„å«ä¹‰ï¼Œå‰é¢çš„å…ƒç»„ä»£è¡¨äº†è¯¥ç‰¹å¾åœ¨è¯è¢‹ä¸­çš„ä½ç½®ï¼Œåé¢çš„æ•°å€¼ä»£è¡¨äº†å¯¹åº”çš„Hashå€¼ã€‚</p><h2 id="TF-IDF"><a href="#TF-IDF" class="headerlink" title="TF-IDF"></a>TF-IDF</h2><p>TF-IDFï¼ˆTerm Frequency-inverse Document Frequencyï¼‰æ˜¯ä¸€ç§é’ˆå¯¹å…³é”®è¯çš„ç»Ÿè®¡åˆ†ææ–¹æ³•ï¼Œç”¨äºè¯„ä¼°ä¸€ä¸ªè¯å¯¹ä¸€ä¸ªæ–‡ä»¶é›†æˆ–è€…ä¸€ä¸ªè¯­æ–™åº“çš„é‡è¦ç¨‹åº¦ã€‚</p><pre><code class="lang-python">from sklearn.feature_extraction.text import TfidfVectorizertvec = TfidfVectorizer()tvec.fit(corpus)feature_names = tvec.get_feature_names()print(&quot;Number of features: &#123;&#125;&quot;.format(len(feature_names)))print(&quot;First 20 features:\n&#123;&#125;&quot;.format(feature_names[:20]))Number of features: 5333First 20 features:[&#39;10&#39;, &#39;100&#39;, &#39;1000&#39;, &#39;1001&#39;, &#39;1002&#39;, &#39;1004&#39;, &#39;1005&#39;, &#39;1006&#39;, &#39;1007&#39;, &#39;1008&#39;, &#39;1009&#39;, &#39;101&#39;, &#39;1010&#39;, &#39;1012&#39;, &#39;1013&#39;, &#39;1014&#39;, &#39;1018&#39;, &#39;102&#39;, &#39;1020&#39;, &#39;1022&#39;]t_words = tvec.transform(corpus)print(&quot;t_words: &#123;&#125;&quot;.format(repr(t_words)))print(t_words[0].toarray())t_words: &lt;10000x5333 sparse matrix of type &#39;&lt;class &#39;numpy.float64&#39;&gt;&#39;    with 2797304 stored elements in Compressed Sparse Row format&gt;[[0. 0. 0. ... 0. 0. 0.]]# æ‰¾åˆ°æ•°æ®é›†ä¸­æ¯ä¸ªç‰¹å¾çš„æœ€å¤§å€¼max_value = t_words.max(axis=0).toarray().ravel()sorted_by_tfidf = max_value.argsort()# è·å–ç‰¹å¾åç§°feature_names = np.array(tvec.get_feature_names())print(&quot;Features with lowest tfidf:\n&#123;&#125;&quot;.format(feature_names[sorted_by_tfidf[:20]]))print(&quot;Features with highest tfidf: \n&#123;&#125;&quot;.format(feature_names[sorted_by_tfidf[-20:]]))sorted_by_idf = np.argsort(tvec.idf_)print(&quot;Features with lowest idf:\n&#123;&#125;&quot;.format(feature_names[sorted_by_idf[:100]]))Features with lowest tfidf:[&#39;6844&#39; &#39;6806&#39; &#39;7201&#39; &#39;5609&#39; &#39;5585&#39; &#39;5485&#39; &#39;3453&#39; &#39;7390&#39; &#39;2322&#39; &#39;2083&#39; &#39;1222&#39; &#39;2360&#39; &#39;319&#39; &#39;2520&#39; &#39;6268&#39; &#39;3105&#39; &#39;6049&#39; &#39;4888&#39; &#39;2390&#39; &#39;2849&#39;]Features with highest tfidf: [&#39;3198&#39; &#39;2346&#39; &#39;5480&#39; &#39;4375&#39; &#39;6296&#39; &#39;1710&#39; &#39;682&#39; &#39;354&#39; &#39;4381&#39; &#39;482&#39; &#39;5990&#39; &#39;2798&#39; &#39;5907&#39; &#39;3992&#39; &#39;418&#39; &#39;513&#39; &#39;4759&#39; &#39;6250&#39; &#39;6220&#39; &#39;1633&#39;]Features with lowest idf:[&#39;3750&#39; &#39;900&#39; &#39;648&#39; &#39;6122&#39; &#39;7399&#39; &#39;2465&#39; &#39;4811&#39; &#39;4464&#39; &#39;1699&#39; &#39;299&#39; &#39;2400&#39; &#39;3659&#39; &#39;3370&#39; &#39;2109&#39; &#39;4939&#39; &#39;669&#39; &#39;5598&#39; &#39;5445&#39; &#39;4853&#39; &#39;5948&#39; &#39;2376&#39; &#39;7495&#39; &#39;4893&#39; &#39;5410&#39; &#39;340&#39; &#39;619&#39; &#39;4659&#39; &#39;1460&#39; &#39;6065&#39; &#39;1903&#39; &#39;5560&#39; &#39;6017&#39; &#39;2252&#39; &#39;4516&#39; &#39;1519&#39; &#39;2073&#39; &#39;5998&#39; &#39;5491&#39; &#39;2662&#39; &#39;5977&#39; &#39;6093&#39; &#39;1324&#39; &#39;5780&#39; &#39;3915&#39; &#39;3800&#39; &#39;5393&#39; &#39;2210&#39; &#39;5915&#39; &#39;3223&#39; &#39;4490&#39; &#39;2490&#39; &#39;1375&#39; &#39;803&#39; &#39;1635&#39; &#39;7539&#39; &#39;4411&#39; &#39;4128&#39; &#39;7543&#39; &#39;5602&#39; &#39;1866&#39; &#39;5176&#39; &#39;2799&#39; &#39;4646&#39; &#39;3700&#39; &#39;5858&#39; &#39;307&#39; &#39;913&#39; &#39;25&#39; &#39;6045&#39; &#39;1702&#39; &#39;4822&#39; &#39;3099&#39; &#39;5330&#39; &#39;1920&#39; &#39;1567&#39; &#39;2614&#39; &#39;4190&#39; &#39;1080&#39; &#39;5510&#39; &#39;4149&#39; &#39;3166&#39; &#39;3530&#39; &#39;192&#39; &#39;5659&#39; &#39;3618&#39; &#39;4525&#39; &#39;3686&#39; &#39;6038&#39; &#39;1767&#39; &#39;5589&#39; &#39;5736&#39; &#39;6831&#39; &#39;7377&#39; &#39;4969&#39; &#39;1394&#39; &#39;6104&#39; &#39;7010&#39; &#39;6407&#39; &#39;5430&#39; &#39;23&#39;]</code></pre><h2 id="å¤šä¸ªå•è¯çš„è¯è¢‹ï¼šN-gramã€Šã€‹"><a href="#å¤šä¸ªå•è¯çš„è¯è¢‹ï¼šN-gramã€Šã€‹" class="headerlink" title="å¤šä¸ªå•è¯çš„è¯è¢‹ï¼šN-gramã€Šã€‹"></a>å¤šä¸ªå•è¯çš„è¯è¢‹ï¼šN-gramã€Šã€‹</h2><p>ä½¿ç”¨è¯è¢‹è¡¨ç¤ºçš„ä¸»è¦ç¼ºç‚¹ä¹‹ä¸€æ˜¯å®Œå…¨èˆå¼ƒäº†å•è¯é¡ºåºã€‚å› æ­¤ï¼Œâ€œitâ€™s bad, not good at allâ€ï¼ˆç”µå½±å¾ˆå·®ï¼Œä¸€ç‚¹ä¹Ÿä¸å¥½ï¼‰å’Œâ€œitâ€™s good, not bad at allâ€ï¼ˆç”µå½±å¾ˆå¥½ï¼Œè¿˜ä¸é”™ï¼‰è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²çš„è¯è¢‹è¡¨ç¤ºå®Œå…¨ç›¸åŒï¼Œå°½ç®¡å®ƒä»¬çš„å«ä¹‰ç›¸åã€‚å°†â€œnotâ€ï¼ˆä¸ï¼‰æ”¾åœ¨å•è¯å‰é¢ï¼Œè¿™åªæ˜¯ä¸Šä¸‹æ–‡å¾ˆé‡è¦çš„ä¸€ä¸ªä¾‹å­ï¼ˆå¯èƒ½æ˜¯ä¸€ä¸ªæç«¯çš„ä¾‹å­ï¼‰ã€‚å¹¸è¿çš„æ˜¯ï¼Œä½¿ç”¨è¯è¢‹è¡¨ç¤ºæ—¶æœ‰ä¸€ç§è·å–ä¸Šä¸‹æ–‡çš„æ–¹æ³•ï¼Œå°±æ˜¯ä¸ä»…è€ƒè™‘å•ä¸€è¯ä¾‹çš„è®¡æ•°ï¼Œè€Œä¸”è¿˜è€ƒè™‘ç›¸é‚»çš„ä¸¤ä¸ªæˆ–ä¸‰ä¸ªè¯ä¾‹çš„è®¡æ•°ã€‚ä¸¤ä¸ªè¯ä¾‹è¢«ç§°ä¸ºäºŒå…ƒåˆ†è¯ï¼ˆbigramï¼‰ï¼Œä¸‰ä¸ªè¯ä¾‹è¢«ç§°ä¸ºä¸‰å…ƒåˆ†è¯ï¼ˆtrigramï¼‰ï¼Œæ›´ä¸€èˆ¬çš„è¯ä¾‹åºåˆ—è¢«ç§°ä¸º n å…ƒåˆ†è¯ï¼ˆn-gramï¼‰ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ”¹å˜ CountVectorizer æˆ– TfidfVectorizer çš„ ngram_range å‚æ•°æ¥æ”¹å˜ä½œä¸ºç‰¹å¾çš„è¯ä¾‹èŒƒå›´ã€‚ngram_range å‚æ•°æ˜¯ä¸€ä¸ªå…ƒç»„ï¼ŒåŒ…å«è¦è€ƒè™‘çš„è¯ä¾‹åºåˆ—çš„æœ€å°é•¿åº¦å’Œæœ€å¤§é•¿åº¦ã€‚</p><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ·»åŠ äºŒå…ƒåˆ†è¯ä¼šæœ‰æ‰€å¸®åŠ©ã€‚æ·»åŠ æ›´é•¿çš„åºåˆ—ï¼ˆä¸€ç›´åˆ°äº”å…ƒåˆ†è¯ï¼‰ä¹Ÿå¯èƒ½æœ‰æ‰€å¸®åŠ©ï¼Œä½†è¿™ä¼šå¯¼è‡´ç‰¹å¾æ•°é‡çš„å¤§å¤§å¢åŠ ï¼Œä¹Ÿå¯èƒ½ä¼šå¯¼è‡´è¿‡æ‹Ÿåˆï¼Œå› ä¸ºå…¶ä¸­åŒ…å«è®¸å¤šéå¸¸å…·ä½“çš„ç‰¹å¾ã€‚åŸåˆ™ä¸Šæ¥è¯´ï¼ŒäºŒå…ƒåˆ†è¯çš„æ•°é‡æ˜¯ä¸€å…ƒåˆ†è¯æ•°é‡çš„å¹³æ–¹ï¼Œä¸‰å…ƒåˆ†è¯çš„æ•°é‡æ˜¯ä¸€å…ƒåˆ†è¯æ•°é‡çš„ä¸‰æ¬¡æ–¹ï¼Œä»è€Œå¯¼è‡´éå¸¸å¤§çš„ç‰¹å¾ç©ºé—´ã€‚åœ¨å®è·µä¸­ï¼Œæ›´é«˜çš„ n å…ƒåˆ†è¯åœ¨æ•°æ®ä¸­çš„å‡ºç°æ¬¡æ•°å®é™…ä¸Šæ›´å°‘ï¼ŒåŸå› åœ¨äºï¼ˆè‹±è¯­ï¼‰è¯­è¨€çš„ç»“æ„ï¼Œä¸è¿‡è¿™ä¸ªæ•°å­—ä»ç„¶å¾ˆå¤§ã€‚</p><pre><code class="lang-python">from sklearn.feature_extraction.text import TfidfVectorizertvec = TfidfVectorizer(ngram_range=(1,3), min_df=5)tvec.fit(corpus)# æ‰¾åˆ°æ•°æ®é›†ä¸­æ¯ä¸ªç‰¹å¾çš„æœ€å¤§å€¼max_value = t_words.max(axis=0).toarray().ravel()sorted_by_tfidf = max_value.argsort()# è·å–ç‰¹å¾åç§°feature_names = np.array(tvec.get_feature_names())print(&quot;Features with lowest tfidf:\n&#123;&#125;&quot;.format(feature_names[sorted_by_tfidf[:20]]))print(&quot;Features with highest tfidf: \n&#123;&#125;&quot;.format(feature_names[sorted_by_tfidf[-20:]]))sorted_by_idf = np.argsort(tvec.idf_)print(&quot;Features with lowest idf:\n&#123;&#125;&quot;.format(feature_names[sorted_by_idf[:100]]))Features with lowest tfidf:[&#39;1008 5612&#39; &#39;100 5560&#39; &#39;1018 4089 5491&#39; &#39;101 648 900&#39; &#39;1006 3750 826&#39; &#39;1018 1066 3231&#39; &#39;101 5560 3568&#39; &#39;100 5589&#39; &#39;1018 2119 281&#39; &#39;101 5560 3659&#39; &#39;1018 1066 3166&#39; &#39;100 5598 1465&#39; &#39;1000 5011&#39; &#39;101 2662 4939&#39; &#39;100 5602&#39; &#39;101 873 648&#39; &#39;1006 2265 648&#39; &#39;1008 5640&#39; &#39;1008 5689&#39; &#39;101 856 531&#39;]Features with highest tfidf: [&#39;101 2087&#39; &#39;1018 1066 281&#39; &#39;101 648 3440&#39; &#39;1006 5640 3641&#39; &#39;101 760 4233&#39; &#39;1006 6017&#39; &#39;1018 1066 6983&#39; &#39;1014 3750 3659&#39; &#39;100 5430 2147&#39; &#39;100 5510 2471&#39; &#39;1018 1141&#39; &#39;1006 1866 5977&#39; &#39;1018 2119 3560&#39; &#39;1018 2662 3068&#39; &#39;101 1844 4486&#39; &#39;101 2304 3659&#39; &#39;1006 3750 5330&#39; &#39;101 5589&#39; &#39;1008 900 3618&#39; &#39;100 6122 2489&#39;]Features with lowest idf:[&#39;3750&#39; &#39;900&#39; &#39;648&#39; &#39;2465&#39; &#39;6122&#39; &#39;7399&#39; &#39;4811&#39; &#39;4464&#39; &#39;1699&#39; &#39;3659&#39; &#39;2400&#39; &#39;299&#39; &#39;3370&#39; &#39;2109&#39; &#39;4939&#39; &#39;5598&#39; &#39;669&#39; &#39;5445&#39; &#39;4853&#39; &#39;2376&#39; &#39;5948&#39; &#39;7495&#39; &#39;4893&#39; &#39;5410&#39; &#39;340&#39; &#39;619&#39; &#39;4659&#39; &#39;1460&#39; &#39;6065&#39; &#39;4516&#39; &#39;1903&#39; &#39;5560&#39; &#39;6017&#39; &#39;2252&#39; &#39;2073&#39; &#39;1519&#39; &#39;5491&#39; &#39;5998&#39; &#39;2662&#39; &#39;5977&#39; &#39;1324&#39; &#39;5780&#39; &#39;6093&#39; &#39;3915&#39; &#39;5393&#39; &#39;2210&#39; &#39;3800&#39; &#39;3223&#39; &#39;5915&#39; &#39;4490&#39; &#39;2490&#39; &#39;803&#39; &#39;1635&#39; &#39;4128&#39; &#39;1375&#39; &#39;7539&#39; &#39;4411&#39; &#39;7543&#39; &#39;5602&#39; &#39;2799&#39; &#39;1866&#39; &#39;5176&#39; &#39;5858&#39; &#39;4646&#39; &#39;3700&#39; &#39;307&#39; &#39;6045&#39; &#39;1702&#39; &#39;25&#39; &#39;913&#39; &#39;5330&#39; &#39;4822&#39; &#39;2614&#39; &#39;3099&#39; &#39;1920&#39; &#39;1567&#39; &#39;4190&#39; &#39;4149&#39; &#39;5510&#39; &#39;1080&#39; &#39;3166&#39; &#39;3659 3370&#39; &#39;3530&#39; &#39;192&#39; &#39;3618&#39; &#39;4525&#39; &#39;5659&#39; &#39;3686&#39; &#39;6038&#39; &#39;1767&#39; &#39;5736&#39; &#39;7377&#39; &#39;5589&#39; &#39;6831&#39; &#39;3370 3370&#39; &#39;1394&#39; &#39;4969&#39; &#39;5430&#39; &#39;7010&#39; &#39;6104&#39;]</code></pre><h1 id="æ— ç›‘ç£æ¢ç´¢"><a href="#æ— ç›‘ç£æ¢ç´¢" class="headerlink" title="æ— ç›‘ç£æ¢ç´¢"></a>æ— ç›‘ç£æ¢ç´¢</h1><h2 id="PCAå¯è§†åŒ–"><a href="#PCAå¯è§†åŒ–" class="headerlink" title="PCAå¯è§†åŒ–"></a>PCAå¯è§†åŒ–</h2><pre><code class="lang-python">from sklearn.decomposition import PCApca = PCA(n_components=2)pca_vec = pca.fit_transform(t_words.toarray())pca_vec.shape, pca.explained_variance_ratio_((10000, 2), array([0.03817303, 0.02684457]))</code></pre><p>æˆ‘ä»¬æˆåŠŸå°†tfidfè½¬åŒ–åçš„è¯å‘é‡å‹ç¼©æˆ2ç»´å‘é‡ï¼Œè¿™æ ·å°±èƒ½å¤Ÿåœ¨äºŒç»´å¹³é¢å¯è§†åŒ–äº†ã€‚</p><p>åé¢çš„<code>explained_variance_ratio_</code>ä»£è¡¨ç€ç»è¿‡PCAç®—æ³•å‹ç¼©åï¼Œä¿ç•™çš„ä¿¡æ¯é‡ã€‚è¿™ä¸ªæ•°å€¼è¿˜æ˜¯åä½ï¼Œå› æ­¤è¿™ç§PCAå‹ç¼©æ–¹æ³•ä»…é€‚ç”¨äºå®éªŒã€‚</p><pre><code class="lang-python">plt.figure(figsize=(12,10))plt.scatter(pca_vec[:,0], pca_vec[:,1], c=labels)</code></pre><p><img src="/2020/07/23/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB/1.png" alt></p><h2 id="ä¸»é¢˜å»ºæ¨¡"><a href="#ä¸»é¢˜å»ºæ¨¡" class="headerlink" title="ä¸»é¢˜å»ºæ¨¡"></a>ä¸»é¢˜å»ºæ¨¡</h2><p>å¸¸ç”¨äºæ–‡æœ¬æ•°æ®çš„ä¸€ç§ç‰¹æ®ŠæŠ€æœ¯æ˜¯ä¸»é¢˜å»ºæ¨¡ï¼ˆtopic modelingï¼‰ï¼Œè¿™æ˜¯æè¿°å°†æ¯ä¸ªæ–‡æ¡£åˆ†é…ç»™ä¸€ä¸ªæˆ–å¤šä¸ªä¸»é¢˜çš„ä»»åŠ¡ï¼ˆé€šå¸¸æ˜¯æ— ç›‘ç£çš„ï¼‰çš„æ¦‚æ‹¬æ€§æœ¯è¯­ã€‚è¿™æ–¹é¢ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯æ–°é—»æ•°æ®ï¼Œå®ƒä»¬å¯ä»¥è¢«åˆ†ä¸ºâ€œæ”¿æ²»â€â€œä½“è‚²â€â€œé‡‘èâ€ç­‰ä¸»é¢˜ã€‚å¦‚æœä¸ºæ¯ä¸ªæ–‡æ¡£åˆ†é…ä¸€ä¸ªä¸»é¢˜ï¼Œé‚£ä¹ˆè¿™æ˜¯ä¸€ä¸ªæ–‡æ¡£èšç±»ä»»åŠ¡ã€‚æˆ‘ä»¬å­¦åˆ°çš„æ¯ä¸ªæˆåˆ†å¯¹åº”äºä¸€ä¸ªä¸»é¢˜ï¼Œæ–‡æ¡£è¡¨ç¤ºä¸­çš„æˆåˆ†ç³»æ•°å‘Šè¯‰æˆ‘ä»¬è¿™ä¸ªæ–‡æ¡£ä¸è¯¥ä¸»é¢˜çš„ç›¸å…³æ€§å¼ºå¼±ã€‚é€šå¸¸æ¥è¯´ï¼Œäººä»¬åœ¨è°ˆè®ºä¸»é¢˜å»ºæ¨¡æ—¶ï¼Œä»–ä»¬æŒ‡çš„æ˜¯ä¸€ç§å«ä½œéšå«ç‹„åˆ©å…‹é›·åˆ†å¸ƒï¼ˆLatent Dirichlet Allocationï¼ŒLDAï¼‰çš„ç‰¹å®šåˆ†è§£æ–¹æ³•ã€‚</p><p>æˆ‘ä»¬å°† LDA åº”ç”¨äºæ–°é—»æ•°æ®é›†ï¼Œæ¥çœ‹ä¸€ä¸‹å®ƒåœ¨å®è·µä¸­çš„æ•ˆæœã€‚å¯¹äºæ— ç›‘ç£çš„æ–‡æœ¬æ–‡æ¡£æ¨¡å‹ï¼Œé€šå¸¸æœ€å¥½åˆ é™¤éå¸¸å¸¸è§çš„å•è¯ï¼Œå¦åˆ™å®ƒä»¬å¯èƒ½ä¼šæ”¯é…åˆ†æè¿‡ç¨‹ã€‚æˆ‘ä»¬å°†åˆ é™¤è‡³å°‘åœ¨15% çš„æ–‡æ¡£ä¸­å‡ºç°è¿‡çš„å•è¯ï¼Œå¹¶åœ¨åˆ é™¤å‰ 15% ä¹‹åï¼Œå°†è¯è¢‹æ¨¡å‹é™å®šä¸ºæœ€å¸¸è§çš„ 10 000 ä¸ªå•è¯ï¼š</p><pre><code class="lang-python">vect = CountVectorizer(max_features=10000, max_df=.15)X = vect.fit_transform(corpus)from sklearn.decomposition import LatentDirichletAllocationlda = LatentDirichletAllocation(n_components=14, learning_method=&quot;batch&quot;, max_iter=25, random_state=0)# æˆ‘ä»¬åœ¨ä¸€ä¸ªæ­¥éª¤ä¸­æ„å»ºæ¨¡å‹å¹¶å˜æ¢æ•°æ®# è®¡ç®—å˜æ¢éœ€è¦èŠ±ç‚¹æ—¶é—´ï¼ŒäºŒè€…åŒæ—¶è¿›è¡Œå¯ä»¥èŠ‚çœæ—¶é—´document_topics = lda.fit_transform(bag_of_words)# å¯¹äºæ¯ä¸ªä¸»é¢˜ï¼ˆcomponents_çš„ä¸€è¡Œï¼‰ï¼Œå°†ç‰¹å¾æ’åºï¼ˆå‡åºï¼‰# ç”¨[:, ::-1]å°†è¡Œåè½¬ï¼Œä½¿æ’åºå˜ä¸ºé™åºsorting = np.argsort(lda.components_, axis=1)[:, ::-1]# ä»å‘é‡å™¨ä¸­è·å–ç‰¹å¾åç§°feature_names = np.array(bagvect.get_feature_names())plt.figure()plt.bar(x=range(14), height=document_topics[0])plt.xticks(list(range(14)))</code></pre><p><img src="/2020/07/23/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB/2.png" alt></p><p>ç”±LDAç¡®å®šçš„ä¸»é¢˜è¯å¦‚ä¸‹ï¼š</p><pre><code class="lang-python">topic 0       topic 1       topic 2       topic 3       topic 4       --------      --------      --------      --------      --------      6654          1970          7349          3464          4412          4173          2716          7354          7436          7363          1219          4553          1684          5562          6689          6861          7042          5744          3289          4986          5006          5822          6569          5105          2506          7400          5099          1999          5810          3056          3508          3654          1351          3134          6220          6223          3021          56            3648          5117          6227          4967          4036          6308          6319          7257          3396          4223          1706          2695          topic 5       topic 6       topic 7       topic 8       topic 9       --------      --------      --------      --------      --------      4967          1334          1934          4114          7328          7528          5166          1146          3198          5547          3644          6143          532           517           4768          1899          2695          4802          812           3231          6678          1616          419           3090          5492          5744          7532          4089          4163          4080          6047          368           3725          5305          4120          1252          2918          2851          177           2331          5814          2968          6227          7251          3019          1170          3032          6639          2835          6613          topic 10      topic 11      topic 12      topic 13      --------      --------      --------      --------      3523          4902          5178          5122          3342          1258          6014          6920          6722          343           5920          5519          6352          4089          4603          7154          3186          5226          3648          4381          5179          810           4042          4760          4369          6284          1724          4412          3501          3477          4450          4595          2334          7127          657           3377          2722          7077          5803          7006</code></pre><h2 id="t-SNEå¯è§†åŒ–"><a href="#t-SNEå¯è§†åŒ–" class="headerlink" title="t-SNEå¯è§†åŒ–"></a>t-SNEå¯è§†åŒ–</h2><p>t-SNEæ˜¯å½“å‰æœ€æµè¡Œçš„æ•°æ®å¯è§†åŒ–æ–¹æ³•ã€‚å°†TF-IDFè½¬åŒ–åçš„å‘é‡å¯è§†åŒ–å¦‚ä¸‹ï¼š</p><pre><code class="lang-python">from sklearn.manifold import TSNEwords_emb = TSNE(n_components=2).fit_transform(t_words)plt.figure(figsize=(12,10))plt.scatter(words_emb[:,0], words_emb[:,1], c=labels)</code></pre><p><img src="/2020/07/23/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB/3.png" alt></p><p>å°†HashingVectorizerè½¬åŒ–åçš„å‘é‡ç»è¿‡t-SNEç®—æ³•å¯è§†åŒ–ç»“æœåˆ†äº«å¦‚ä¸‹ï¼š</p><pre><code class="lang-python">hash_words_emb = TSNE(n_components=2).fit_transform(h_words)plt.figure(figsize=(12,10))plt.scatter(hash_words_emb[:,0], hash_words_emb[:,1], c=labels)</code></pre><p><img src="/2020/07/23/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB/4.png" alt></p><h1 id="æœºå™¨å­¦ä¹ "><a href="#æœºå™¨å­¦ä¹ " class="headerlink" title="æœºå™¨å­¦ä¹ "></a>æœºå™¨å­¦ä¹ </h1><p>é¦–å…ˆå¯¼å…¥ç›¸å…³åº“</p><pre><code class="lang-python">from sklearn.feature_extraction.text import CountVectorizer, TfidfVectorizerfrom sklearn.pipeline import make_pipelinefrom sklearn.linear_model import LogisticRegression, RidgeClassifierfrom sklearn.model_selection import GridSearchCV, train_test_split, cross_val_scorefrom sklearn.multiclass import OneVsRestClassifierfrom sklearn.svm import SVCfrom sklearn.metrics import f1_score</code></pre><p><a href="https://scikit-learn.org/stable/modules/classes.html#module-sklearn.linear_model">https://scikit-learn.org/stable/modules/classes.html#module-sklearn.linear_model</a></p><h2 id="RidgeClassifier-CountVectorizer"><a href="#RidgeClassifier-CountVectorizer" class="headerlink" title="RidgeClassifier+CountVectorizer"></a>RidgeClassifier+CountVectorizer</h2><p>é¦–å…ˆæˆ‘ä»¬ä½¿ç”¨æ•™ç¨‹ä¸­çš„èŒƒä¾‹</p><pre><code class="lang-python">X, y = df_train[&#39;text&#39;][:10000], df_train[&#39;label&#39;][:10000]vectorizer = CountVectorizer(max_features=3000)X = vectorizer.fit_transform(X)clf = RidgeClassifier()clf.fit(X[:5000], y[:5000]) # ä½¿ç”¨å‰5000ä¸ªæ ·æœ¬è¿›è¡Œè®­ç»ƒval_pred = clf.predict(X[5000:]) # ä½¿ç”¨å5000ä¸ªæ ·æœ¬è¿›è¡Œé¢„æµ‹print(f1_score(y[5000:], val_pred, average=&#39;macro&#39;))0.6322204326986258</code></pre><p>æˆ‘ä»¬æŠŠ10000ä¸ªæ ·æœ¬ä¸­ï¼Œå‰5000ä¸ªç”¨äºè®­ç»ƒï¼Œå5000ä¸ªç”¨äºæµ‹è¯•ï¼Œæœ€ç»ˆç»“æœä»¥F1æŒ‡æ ‡å±•ç¤ºï¼Œç»“æœä¸º0.63ï¼Œä¸å¤ªä»¤äººæ»¡æ„ã€‚</p><h2 id="LogisticRegression-TFIDF"><a href="#LogisticRegression-TFIDF" class="headerlink" title="LogisticRegression+TFIDF"></a>LogisticRegression+TFIDF</h2><p>æœ€å¸¸è§çš„çº¿æ€§åˆ†ç±»ç®—æ³•æ˜¯ Logistic å›å½’ã€‚è™½ç„¶ LogisticRegression çš„åå­—ä¸­å«æœ‰å›å½’ï¼ˆregressionï¼‰ï¼Œä½†å®ƒæ˜¯ä¸€ç§åˆ†ç±»ç®—æ³•ï¼Œå¹¶ä¸æ˜¯å›å½’ç®—æ³•ï¼Œä¸åº”ä¸ LinearRegression æ··æ·†ã€‚<br>æˆ‘ä»¬å¯ä»¥å°† LogisticRegression å’Œ LinearSVC æ¨¡å‹åº”ç”¨åˆ°ç»è¿‡tfidfå¤„ç†çš„æ–°é—»æ–‡æœ¬æ•°æ®é›†ä¸Šã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨äº†sklearnä¸­çš„åˆ’åˆ†æ•°æ®é›†çš„æ–¹æ³•<code>train_test_split</code>ï¼Œå°†æ•°æ®é›†åˆ’åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸¤éƒ¨åˆ†ã€‚ä½†æ˜¯è¿™æ ·ä¸€æ¥ï¼Œæ•°æ®é›†ä¸­çš„æµ‹è¯•é›†éƒ¨åˆ†å°†ä¸èƒ½è¢«è®­ç»ƒï¼Œæœªå…æœ‰ç‚¹å¯æƒœã€‚</p><p>æˆ‘ä»¬åœ¨è®­ç»ƒæ—¶ï¼Œé‡‡ç”¨äº†pipelineæ–¹å¼ï¼ŒPipeline ç±»å¯ä»¥å°†å¤šä¸ªå¤„ç†æ­¥éª¤åˆå¹¶ï¼ˆglueï¼‰ä¸ºå•ä¸ª scikit-learn ä¼°è®¡å™¨ã€‚Pipeline ç±»æœ¬èº«å…·æœ‰ fitã€predict å’Œ score æ–¹æ³•ï¼Œå…¶è¡Œä¸ºä¸ scikit-learn ä¸­çš„å…¶ ä»–æ¨¡å‹ç›¸åŒã€‚Pipeline ç±»æœ€å¸¸è§çš„ç”¨ä¾‹æ˜¯å°†é¢„å¤„ç†æ­¥éª¤ï¼ˆæ¯”å¦‚æ•°æ®ç¼©æ”¾ï¼‰ä¸ä¸€ä¸ªç›‘ç£æ¨¡å‹ ï¼ˆæ¯”å¦‚åˆ†ç±»å™¨ï¼‰é“¾æ¥åœ¨ä¸€èµ·ã€‚</p><pre><code class="lang-python">%%timeX_train, X_test, y_train, y_test = train_test_split(df_train[&#39;text&#39;][:10000], df_train[&#39;label&#39;][:10000], random_state=0)pipe_logis = make_pipeline(TfidfVectorizer(min_df=5, ngram_range=(1,3)), LogisticRegression())param_grid = &#123;&#39;logisticregression__C&#39;: [0.001, 0.01, 0.1, 1, 10]&#125;grid = GridSearchCV(pipe_logis, param_grid, cv=5)grid.fit(X_train, y_train)print(&quot;Best params:\n&#123;&#125;\n&quot;.format(grid.best_params_))print(&quot;Best cross-validation score: &#123;:.2f&#125;&quot;.format(grid.best_score_))print(&quot;Test-set score: &#123;:.2f&#125;&quot;.format(grid.score(X_test, y_test)))Best params:&#123;&#39;logisticregression__C&#39;: 10&#125;Best cross-validation score: 0.91Test-set score: 0.92</code></pre><h2 id="SVC-tfidf"><a href="#SVC-tfidf" class="headerlink" title="SVC+tfidf"></a>SVC+tfidf</h2><p>è¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨éçº¿æ€§æ¨¡å‹ä¸­å¤§åé¼é¼çš„SVMæ¨¡å‹ï¼Œå¹¶é‡‡ç”¨äº¤å‰éªŒè¯çš„æ–¹æ³•åˆ’åˆ†æ•°æ®é›†ï¼Œä¸æµªè´¹ä»»ä½•ä¸€éƒ¨åˆ†æ•°æ®ã€‚</p><pre><code class="lang-python">X_train, y_train = df_train[&#39;text&#39;][:10000], df_train[&#39;label&#39;][:10000]pipe_svc = make_pipeline(TfidfVectorizer(min_df=5), SVC()) # decision_function_shape=&#39;ovr&#39;scores = cross_val_score(pipe_svc, X_train, y_train, cv=5, n_jobs=-1)print(scores.mean())0.8924</code></pre><h1 id="æ¨¡å‹è¯„ä»·"><a href="#æ¨¡å‹è¯„ä»·" class="headerlink" title="æ¨¡å‹è¯„ä»·"></a>æ¨¡å‹è¯„ä»·</h1><p>TRï¼ŒFNï¼Œprecisionï¼Œrecallç­‰çš„è¿›ä¸€æ­¥è§£é‡Šï¼Œè¯·å‚è€ƒä»¥ä¸‹é“¾æ¥ï¼š<br><a href="https://www.zhihu.com/question/30643044">https://www.zhihu.com/question/30643044</a></p><h1 id="è¿›ä¸€æ­¥ä¼˜åŒ–"><a href="#è¿›ä¸€æ­¥ä¼˜åŒ–" class="headerlink" title="è¿›ä¸€æ­¥ä¼˜åŒ–"></a>è¿›ä¸€æ­¥ä¼˜åŒ–</h1><p>ä½¿ç”¨æœºå™¨å­¦ä¹ æ¨¡å‹+å·§å¦™çš„ç‰¹å¾å·¥ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥è¾¾åˆ°90%ä»¥ä¸Šçš„ç²¾åº¦ï¼Œè¿™åœ¨14åˆ†ç±»é—®é¢˜ä¸­å·²ç»å¾ˆæƒŠäººäº†ã€‚ç„¶è€Œæˆ‘ä»¬çš„å·¥ä½œå¹¶æ²¡æœ‰ç»“æŸï¼Œè¿˜æœ‰è®¸è®¸å¤šå¤šçš„é—®é¢˜ç­‰ç€æˆ‘ä»¬å»æ¢ç´¢ã€‚æ¯”å¦‚</p><ul><li>åˆ é™¤åœç”¨è¯ã€ç½•è§è¯ã€å…¶ä»–å¸¸è§è¯å’Œä¸èƒ½åæ˜ ç‰¹å¾çš„è¯</li><li>ç±»åˆ«ä¸å¹³è¡¡é—®é¢˜</li></ul><p>å‘¨å¿—åã€Šæœºå™¨å­¦ä¹ ã€‹ä¸­ä»‹ç»åˆ°ï¼Œåˆ†ç±»å­¦ä¹ æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„åŸºæœ¬å‡è®¾ï¼Œå³ä¸åŒç±»åˆ«çš„è®­ç»ƒæ ·ä¾‹æ•°ç›®ç›¸å½“ã€‚å¦‚æœä¸åŒç±»åˆ«çš„è®­ç»ƒæ ·ä¾‹æ•°ç›®ç¨æœ‰å·®åˆ«ï¼Œå¯¹å­¦ä¹ ç»“æœçš„å½±å“é€šå¸¸ä¹Ÿä¸å¤§ï¼Œä½†è‹¥æ ·æœ¬ç±»åˆ«æ•°ç›®å·®åˆ«å¾ˆå¤§ï¼Œå±äºæç«¯ä¸å‡è¡¡ï¼Œåˆ™ä¼šå¯¹å­¦ä¹ è¿‡ç¨‹ï¼ˆæ¨¡å‹è®­ç»ƒï¼‰é€ æˆå›°æ‰°ã€‚è¿™äº›å­¦ä¹ ç®—æ³•çš„è®¾è®¡èƒŒåéšå«çš„ä¼˜åŒ–ç›®æ ‡æ˜¯æ•°æ®é›†ä¸Šçš„åˆ†ç±»å‡†ç¡®åº¦ï¼Œè€Œè¿™ä¼šå¯¼è‡´å­¦ä¹ ç®—æ³•åœ¨ä¸å¹³è¡¡æ•°æ®ä¸Šæ›´åå‘äºå«æ›´å¤šæ ·æœ¬çš„å¤šæ•°ç±»ã€‚å¤šæ•°ä¸å¹³è¡¡å­¦ä¹ ï¼ˆimbalance learningï¼‰ç®—æ³•å°±æ˜¯ä¸ºäº†è§£å†³è¿™ç§â€œå¯¹å¤šæ•°ç±»çš„åå¥½â€è€Œæå‡ºçš„ã€‚å¦‚æœæ­£è´Ÿç±»æ ·æœ¬ç±»åˆ«ä¸å¹³è¡¡æ¯”ä¾‹è¶…è¿‡4:1ï¼Œé‚£ä¹ˆå…¶åˆ†ç±»å™¨ä¼šå¤§å¤§åœ°å› ä¸ºæ•°æ®ä¸å¹³è¡¡æ€§è€Œæ— æ³•æ»¡è¶³åˆ†ç±»è¦æ±‚</p><p>å…³äºå¦‚ä½•è§£å†³ç±»åˆ«ä¸å¹³è¡¡çš„é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹é“¾æ¥ï¼š<br><a href="https://zhuanlan.zhihu.com/p/84322912">https://zhuanlan.zhihu.com/p/84322912</a><br><a href="https://zhuanlan.zhihu.com/p/36381828">https://zhuanlan.zhihu.com/p/36381828</a></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
      <tag>Datawhale</tag>
      
      <tag>Classification</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç«èµ›æ‰“å¡ã€‘é›¶åŸºç¡€å…¥é—¨NLPä¹‹æ–°é—»æ–‡æœ¬åˆ†ç±»ä¹‹æ•°æ®è¯»å–ä¸åˆ†æ</title>
    <link href="/2020/07/22/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8NLP%E4%B9%8B%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96%E4%B8%8E%E5%88%86%E6%9E%90/"/>
    <url>/2020/07/22/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8NLP%E4%B9%8B%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96%E4%B8%8E%E5%88%86%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<p>ä¸è¦å¯¹æˆ‘æœ‰ä»»ä½•æœŸå¾…å“¦ï¼<br><!--more---></p><h1 id="å®éªŒç¯å¢ƒ"><a href="#å®éªŒç¯å¢ƒ" class="headerlink" title="å®éªŒç¯å¢ƒ"></a>å®éªŒç¯å¢ƒ</h1><p>Colab</p><pre><code class="lang-python">import numpy as npimport pandas as pdimport matplotlib.pyplot as pltfrom sklearn.model_selection import train_test_splitimport seaborn as snsimport scipyfrom collections import Counter</code></pre><h1 id="å‡†å¤‡æ•°æ®"><a href="#å‡†å¤‡æ•°æ®" class="headerlink" title="å‡†å¤‡æ•°æ®"></a>å‡†å¤‡æ•°æ®</h1><pre><code class="lang-python">df_train = pd.read_csv(train_path, sep=&#39;\t&#39;)df_test = pd.read_csv(test_path, sep=&#39;\t&#39;)</code></pre><h1 id="æ•°æ®æ¢ç´¢"><a href="#æ•°æ®æ¢ç´¢" class="headerlink" title="æ•°æ®æ¢ç´¢"></a>æ•°æ®æ¢ç´¢</h1><h2 id="ç®€å•æŸ¥çœ‹æ•°æ®"><a href="#ç®€å•æŸ¥çœ‹æ•°æ®" class="headerlink" title="ç®€å•æŸ¥çœ‹æ•°æ®"></a>ç®€å•æŸ¥çœ‹æ•°æ®</h2><pre><code class="lang-python">df_train.head(), len(df_train)(   label                                               text 0      2  2967 6758 339 2021 1854 3731 4109 3792 4149 15... 1     11  4464 486 6352 5619 2465 4802 1452 3137 5778 54... 2      3  7346 4068 5074 3747 5681 6093 1777 2226 7354 6... 3      2  7159 948 4866 2109 5520 2490 211 3956 5520 549... 4      3  3646 3055 3055 2490 4659 6065 3370 5814 2465 5..., 200000)</code></pre><p>å‘ç°textåŸŸçš„æ•°æ®æ˜¯å­—ç¬¦ä¸²ã€‚æˆ‘ä»¬æƒ³è¦å¾—åˆ°æ•´æ•°åºåˆ—ã€‚å¯ä»¥ç”¨å­—ç¬¦ä¸²åˆ†å‰²<code>split()</code>ã€‚</p><pre><code class="lang-python">print(len(df_train[&#39;text&#39;][0]), type(df_train[&#39;text&#39;][0]))df_train.head()</code></pre><p><img src="/2020/07/22/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8NLP%E4%B9%8B%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96%E4%B8%8E%E5%88%86%E6%9E%90/1.png" alt></p><h2 id="é•¿åº¦åˆ†å¸ƒ"><a href="#é•¿åº¦åˆ†å¸ƒ" class="headerlink" title="é•¿åº¦åˆ†å¸ƒ"></a>é•¿åº¦åˆ†å¸ƒ</h2><h3 id="describe"><a href="#describe" class="headerlink" title="describe"></a>describe</h3><p>è¿™é‡Œä¸æ•™ç¨‹ä¸­çš„æ–¹æ³•æœ‰æ‰€ä¸åŒã€‚vectorizeæ˜¯numpyä¸­å¾ˆæ–¹ä¾¿çš„å‡½æ•°ï¼Œä½œç”¨å’Œpandasä¸­<code>apply</code>å·®ä¸å¤šã€‚ç”¨æ³•ï¼š</p><p><code>np.vectorize(function)(array)</code></p><p>è¾“å…¥å¾…å¤„ç†çš„arrayï¼Œä»¥åŠé€å…ƒç´ å¤„ç†å‡½æ•°functionï¼Œè¿”å›ç»è¿‡å¤„ç†åçš„ndarrayã€‚åŸæ¥çš„arrayåˆ™ä¸å—å½±å“ã€‚</p><p>å½“å‰æˆ‘ä½¿ç”¨çš„å‡½æ•°<code>split_df</code>è´Ÿè´£å°†ä¸€è¡Œæ•°æ®æŒ‰ç©ºæ ¼åˆ‡åˆ†æˆæ•´æ•°åˆ—è¡¨ï¼Œç„¶åè®¡ç®—è¯¥åˆ—è¡¨çš„é•¿åº¦ã€‚</p><pre><code class="lang-python">def split_df(df_row):    return len(str(df_row).split())len_dist = np.vectorize(split_df)(df_train[&#39;text&#39;])len_test_dist = np.vectorize(split_df)(df_test[&#39;text&#39;])</code></pre><p>ä½¿ç”¨describeå‡½æ•°æŸ¥çœ‹è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸­çš„æ•°æ®é•¿åº¦åˆ†å¸ƒ</p><pre><code class="lang-python">print(pd.Series(len_dist).describe())print(pd.Series(len_test_dist).describe())count    200000.000000mean        907.207110std         996.029036min           2.00000025%         374.00000050%         676.00000075%        1131.000000max       57921.000000dtype: float64count    50000.000000mean       909.844960std       1032.313375min         14.00000025%        370.00000050%        676.00000075%       1133.000000max      41861.000000dtype: float64</code></pre><p>é€šè¿‡æ•°æ®æè¿°å¯ä»¥çœ‹åˆ°</p><p>è®­ç»ƒé›†å…±200,000æ¡æ–°é—»ï¼Œæ¯æ¡æ–°é—»å¹³å‡907ä¸ªå­—ç¬¦ï¼Œæœ€çŸ­çš„å¥å­é•¿åº¦ä¸º2ï¼Œæœ€é•¿çš„å¥å­é•¿åº¦ä¸º57921ï¼Œå…¶ä¸­75%ä»¥ä¸‹çš„æ•°æ®é•¿åº¦åœ¨1131ä»¥ä¸‹ã€‚</p><p>æµ‹è¯•é›†å…±50,000æ¡æ–°é—»ï¼Œæ¯æ¡æ–°é—»å¹³å‡909ä¸ªå­—ç¬¦ï¼Œæœ€çŸ­å¥å­é•¿åº¦ä¸º14ï¼Œæœ€é•¿å¥å­41861,75%ä»¥ä¸‹çš„æ•°æ®é•¿åº¦åœ¨1133ä»¥ä¸‹ã€‚</p><p>è®­ç»ƒé›†å’Œæµ‹è¯•é›†å°±é•¿åº¦æ¥è¯´ä¼¼ä¹æ˜¯åŒä¸€åˆ†å¸ƒã€‚</p><h3 id="ç›´æ–¹å›¾"><a href="#ç›´æ–¹å›¾" class="headerlink" title="ç›´æ–¹å›¾"></a>ç›´æ–¹å›¾</h3><p>ç»˜åˆ¶ç›´æ–¹å›¾æŸ¥çœ‹è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸­çš„æ•°æ®é•¿åº¦åˆ†å¸ƒ</p><pre><code class="lang-python">fig, ax = plt.subplots(1,1,figsize=(12,6))ax = plt.hist(x=len_dist, bins=100)ax = plt.hist(x=len_test_dist, bins=100)plt.xlim([0, max(max(len_dist), max(len_test_dist))])plt.xlabel(&quot;length of sample&quot;)plt.ylabel(&quot;number of sample&quot;)plt.legend([&#39;train_len&#39;,&#39;test_len&#39;])plt.show()</code></pre><p><img src="/2020/07/22/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8NLP%E4%B9%8B%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96%E4%B8%8E%E5%88%86%E6%9E%90/2.png" alt></p><p>ä½¿ç”¨seabornç»˜åˆ¶æ›´å¥½çš„å›¾</p><p>seabornè®¡ç®—çš„çºµåæ ‡æ˜¯é¢‘ç‡ï¼Œè€Œä¸æ˜¯å‡ºç°æ¬¡æ•°ã€‚ç”±äºè®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„æ•°æ®é‡ä¸ä¸€æ ·ï¼Œå› æ­¤ç”¨é¢‘ç‡æ›´åŠ ç§‘å­¦ã€æ›´èƒ½çœ‹å‡ºæ˜¯å¦ç¬¦åˆåŒä¸€åˆ†å¸ƒã€‚</p><pre><code class="lang-python">plt.figure(figsize=(15,5))ax = sns.distplot(len_dist, bins=100)ax = sns.distplot(len_test_dist, bins=100)plt.xlim([0, max(max(len_dist), max(len_test_dist))])plt.xlabel(&quot;length of sample&quot;)plt.ylabel(&quot;prob of sample&quot;)plt.legend([&#39;train_len&#39;,&#39;test_len&#39;])</code></pre><p><img src="/2020/07/22/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8NLP%E4%B9%8B%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96%E4%B8%8E%E5%88%86%E6%9E%90/3.png" alt></p><p>é€šè¿‡ç›´æ–¹å›¾ï¼Œæˆ‘ä»¬èƒ½ç›´è§‚æ„Ÿå—åˆ°è®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„é•¿åº¦åˆ†å¸ƒéƒ½å±äºå³ååˆ†å¸ƒã€‚æŒ‰ç†è¯´åˆ†æåˆ°è¿™ä»½å„¿ä¸Šå°±è¯¥åœäº†ã€‚</p><h3 id="åŒåˆ†å¸ƒéªŒè¯"><a href="#åŒåˆ†å¸ƒéªŒè¯" class="headerlink" title="åŒåˆ†å¸ƒéªŒè¯"></a>åŒåˆ†å¸ƒéªŒè¯</h3><pre><code class="lang-python">import scipyscipy.stats.ks_2samp(len_dist, len_test_dist)Ks_2sampResult(statistic=0.004049999999999998, pvalue=0.5279614323123156)</code></pre><p>På€¼ä¸º0.52ï¼Œæ¯”æŒ‡å®šçš„æ˜¾è‘—æ°´å¹³ï¼ˆå‡è®¾ä¸º5%ï¼‰å¤§ï¼Œæˆ‘ä»¬è®¤ä¸ºäºŒè€…åŒåˆ†å¸ƒã€‚</p><h3 id="æˆªæ–­ä½ç½®"><a href="#æˆªæ–­ä½ç½®" class="headerlink" title="æˆªæ–­ä½ç½®"></a>æˆªæ–­ä½ç½®</h3><p>åœ¨è¾“å…¥æ¨¡å‹è¿›è¡Œè®­ç»ƒä¹‹å‰ï¼Œæˆ‘ä»¬è¦æŠŠæ‰€æœ‰çš„æ•°æ®é•¿åº¦ç»Ÿä¸€åŒ–ï¼Œæ•°æ®è‚¯å®šè¦æˆªæ–­ã€‚ä½†æ˜¯åœ¨ä»€ä¹ˆä½ç½®æˆªæ–­åˆé€‚å‘¢ï¼Ÿ</p><p>è€ƒè™‘åˆ°æ•°æ®é•¿åº¦åˆ†å¸ƒæ˜¯é•¿å°¾åˆ†å¸ƒï¼Œlogä¸€ä¸‹çœ‹çœ‹æ˜¯ä¸æ˜¯æ­£æ€åˆ†å¸ƒï¼Œå¦‚æœæ˜¯æ­£æ€åˆ†å¸ƒï¼Œä½¿ç”¨3sigmaæ³•åˆ™ä½œä¸ºæˆªæ–­çš„å‚è€ƒã€‚å¦‚æœä¸æ˜¯ï¼Œåˆ™å°±åªèƒ½ççŒœäº†</p><p>æµ‹é‡æ‹Ÿåˆåˆ†å¸ƒçš„å‡å€¼å’Œæ–¹å·®sigmaåŸåˆ™</p><p>$1\sigma$åŸåˆ™ï¼šæ•°å€¼åˆ†å¸ƒåœ¨$(\mu-\sigma,\mu+\sigma)$ä¸­çš„æ¦‚ç‡ä¸º0.6526ï¼›</p><p>$2\sigma$åŸåˆ™ï¼šæ•°å€¼åˆ†å¸ƒåœ¨$(\mu-2\sigma,\mu+2\sigma)$ä¸­çš„æ¦‚ç‡ä¸º0.9544ï¼›</p><p>$3\sigma$åŸåˆ™ï¼šæ•°å€¼åˆ†å¸ƒåœ¨$(\mu-3\sigma,\mu+3\sigma)$ä¸­çš„æ¦‚ç‡ä¸º0.9974ï¼›</p><p>ç”±äºâ€œå°æ¦‚ç‡äº‹ä»¶â€å’Œå‡è®¾æ£€éªŒçš„åŸºæœ¬æ€æƒ³ â€œå°æ¦‚ç‡äº‹ä»¶â€é€šå¸¸æŒ‡å‘ç”Ÿçš„æ¦‚ç‡å°äº5%çš„äº‹ä»¶ï¼Œè®¤ä¸ºåœ¨ä¸€æ¬¡è¯•éªŒä¸­è¯¥äº‹ä»¶æ˜¯å‡ ä¹ä¸å¯èƒ½å‘ç”Ÿçš„ã€‚ç”±æ­¤å¯è§Xè½åœ¨$(\mu-3\sigma,\mu+3\sigma)$ä»¥å¤–çš„æ¦‚ç‡å°äºåƒåˆ†ä¹‹ä¸‰ï¼Œåœ¨å®é™…é—®é¢˜ä¸­å¸¸è®¤ä¸ºç›¸åº”çš„äº‹ä»¶æ˜¯ä¸ä¼šå‘ç”Ÿçš„ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥æŠŠåŒºé—´$(\mu-3\sigma,\mu+3\sigma)$çœ‹ä½œæ˜¯éšæœºå˜é‡Xå®é™…å¯èƒ½çš„å–å€¼åŒºé—´ï¼Œè¿™ç§°ä¹‹ä¸ºæ­£æ€åˆ†å¸ƒçš„â€œ$3\sigma$â€åŸåˆ™ã€‚</p><pre><code class="lang-python">log_len_dist = np.log(1+len_dist)log_len_test_dist = np.log(1+len_test_dist)plt.figure(figsize=(15,5))ax = sns.distplot(log_len_dist)ax = sns.distplot(log_len_test_dist)plt.xlabel(&quot;log length of sample&quot;)plt.ylabel(&quot;prob of log&quot;)plt.legend([&#39;train_len&#39;,&#39;test_len&#39;])</code></pre><p><img src="/2020/07/22/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8NLP%E4%B9%8B%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96%E4%B8%8E%E5%88%86%E6%9E%90/4.png" alt></p><p>ä»logå›¾ä¸Šä¹Ÿèƒ½çœ‹å‡ºäºŒè€…ï¼ˆå¾ˆåƒï¼‰åŒåˆ†å¸ƒã€‚</p><p>ä¸‹é¢æˆ‘æƒ³éªŒè¯ä¸€ä¸‹æˆ‘çš„çŒœæƒ³ï¼šè¯¥åˆ†å¸ƒä¸ºæ­£æ€åˆ†å¸ƒï¼Œä¸”è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸ºåŒåˆ†å¸ƒã€‚</p><p>å…ˆéªŒè¯è®­ç»ƒé›†åˆ†å¸ƒä¸ºæ­£æ€åˆ†å¸ƒï¼š</p><pre><code class="lang-python">_, lognormal_ks_pvalue = scipy.stats.kstest(rvs=log_len_dist, cdf=&#39;norm&#39;)print(&#39;P value is &#39;, lognormal_ks_pvalue)P value is  0.0</code></pre><p>ï¼Ÿ0ï¼Ÿï¼Ÿï¼Ÿæ‹Ÿåˆä¼˜åº¦æ£€éªŒï¼Œpå€¼ä¸º0ï¼Œæ„æ€å°±æ˜¯è¯´è¿™ä¸æ˜¯ä¸€ä¸ªæ­£æ€åˆ†å¸ƒã€‚<br>å…³äºåˆ†å¸ƒæ£€éªŒï¼Œå‚è€ƒ<a href="https://blog.csdn.net/QimaoRyan/article/details/72861387">è¿™ç¯‡æ–‡ç« </a></p><p>ä¹‹å‰æˆ‘ä»¬æŠŠæ•°æ®logäº†ä¸€ä¸‹ï¼Œä½†æ˜¯è¿™é‡Œæœ‰æ›´ç§‘å­¦çš„å˜æ¢æ–¹å¼ã€‚logåªæ˜¯box-coxå˜æ¢çš„ç‰¹æ®Šå½¢å¼ã€‚æˆ‘ä»¬ä½¿ç”¨box-coxå˜æ¢å†æ¬¡åšä¸€ä¸‹éªŒè¯ï¼Œæ˜¯å¦ä¸ºæ­£æ€åˆ†å¸ƒï¼š</p><pre><code class="lang-python">trans_data, lam = scipy.stats.boxcox(len_dist+1)scipy.stats.normaltest(trans_data)NormaltestResult(statistic=1347.793358118494, pvalue=2.1398873511704724e-293)</code></pre><p>eåé¢è·Ÿäº†é‚£ä¹ˆå¤šè´Ÿæ•°ï¼Œæˆ‘ä½›äº†ã€‚è¿™è¯´æ˜æˆ‘ä»¬çš„å‡è®¾ä¸æˆç«‹ã€‚</p><p>ä½†æ€»å½’æ˜¯è¦çŒœä¸€ä¸ªæˆªæ–­å€¼çš„ã€‚çœ‹logå›¾ä¸Š8.5çš„ä½ç½®æ¯”è¾ƒé è°±ã€‚np.exp(8.5)=4914çº¦ç­‰äº5000ï¼Œå› æ­¤æˆ‘åˆæ­¥å†³å®šæŠŠæˆªæ–­é•¿åº¦å®šä¸º5000ã€‚</p><h2 id="ç±»åˆ«ä¿¡æ¯"><a href="#ç±»åˆ«ä¿¡æ¯" class="headerlink" title="ç±»åˆ«ä¿¡æ¯"></a>ç±»åˆ«ä¿¡æ¯</h2><h3 id="ç®€å•æŸ¥çœ‹ç±»åˆ«ä¿¡æ¯è¡¨"><a href="#ç®€å•æŸ¥çœ‹ç±»åˆ«ä¿¡æ¯è¡¨" class="headerlink" title="ç®€å•æŸ¥çœ‹ç±»åˆ«ä¿¡æ¯è¡¨"></a>ç®€å•æŸ¥çœ‹ç±»åˆ«ä¿¡æ¯è¡¨</h3><p>å…ˆæ”¹é€ ä¸€ä¸‹df_trainï¼Œå¤šåŠ å‡ ä¸ªå­—æ®µï¼Œåˆ†åˆ«æ˜¯</p><ul><li>text-splitï¼Œå°†textå­—æ®µåˆ†è¯</li><li>lenï¼Œæ¯æ¡æ–°é—»é•¿åº¦</li><li>first_charï¼Œæ–°é—»ç¬¬ä¸€ä¸ªå­—ç¬¦</li><li>last_charï¼Œæ–°é—»æœ€åä¸€ä¸ªå­—ç¬¦</li><li>most_freqï¼Œæ–°é—»æœ€å¸¸å‡ºç°çš„å­—ç¬¦</li></ul><pre><code class="lang-python">df_train[&#39;text_split&#39;] = df_train[&#39;text&#39;].apply(lambda x:x.split())df_train[&#39;len&#39;] = df_train[&#39;text&#39;].apply(lambda x:len(x.split()))df_train[&#39;first_char&#39;] = df_train[&#39;text_split&#39;].apply(lambda x:x[0])df_train[&#39;last_char&#39;] = df_train[&#39;text_split&#39;].apply(lambda x:x[-1])df_train[&#39;most_freq&#39;] = df_train[&#39;text_split&#39;].apply(lambda x:np.argmax(np.bincount(x)))df_train.head()</code></pre><p><img src="/2020/07/22/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8NLP%E4%B9%8B%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96%E4%B8%8E%E5%88%86%E6%9E%90/2020-07-25-12-22-01.png" alt></p><p>æ„å»ºä¸€ä¸ªç±»åˆ«ä¿¡æ¯è¡¨ã€‚</p><ul><li>countï¼Œè¯¥ç±»åˆ«æ–°é—»ä¸ªæ•°</li><li>len_meanï¼Œè¯¥ç±»åˆ«æ–°é—»å¹³å‡é•¿åº¦</li><li>len_stdï¼Œè¯¥ç±»åˆ«æ–°é—»é•¿åº¦æ ‡å‡†å·®</li><li>len_minï¼Œè¯¥ç±»åˆ«æ–°é—»é•¿åº¦æœ€å°å€¼</li><li>len_maxï¼Œè¯¥ç±»åˆ«æ–°é—»é•¿åº¦æœ€å¤§å€¼</li><li>freq_fcï¼Œè¯¥ç±»åˆ«æ–°é—»æœ€å¸¸å‡ºç°çš„ç¬¬ä¸€ä¸ªå­—ç¬¦</li><li>freq_lcï¼Œè¯¥ç±»åˆ«æ–°é—»æœ€å¸¸å‡ºç°çš„æœ€åä¸€ä¸ªå­—ç¬¦</li><li>freq_freqï¼Œè¯¥ç±»åˆ«æ–°é—»æœ€å¸¸å‡ºç°çš„å­—ç¬¦</li></ul><pre><code class="lang-python">df_train_info = pd.DataFrame(columns=[&#39;count&#39;,&#39;len_mean&#39;,&#39;len_std&#39;,&#39;len_min&#39;,&#39;len_max&#39;,&#39;freq_fc&#39;,&#39;freq_lc&#39;,&#39;freq_freq&#39;])for name, group in df_train.groupby(&#39;label&#39;):    count = len(group) # è¯¥ç±»åˆ«æ–°é—»æ•°    len_mean = np.mean(group[&#39;len&#39;]) # è¯¥ç±»åˆ«é•¿åº¦å¹³å‡å€¼    len_std = np.std(group[&#39;len&#39;]) # é•¿åº¦æ ‡å‡†å·®    len_min = np.min(group[&#39;len&#39;]) # æœ€çŸ­çš„æ–°é—»é•¿åº¦    len_max = np.max(group[&#39;len&#39;]) # æœ€é•¿çš„æ–°é—»é•¿åº¦    freq_fc = np.argmax(np.bincount(group[&#39;first_char&#39;])) # æœ€é¢‘ç¹å‡ºç°çš„é¦–è¯    freq_lc = np.argmax(np.bincount(group[&#39;last_char&#39;])) # æœ€é¢‘ç¹å‡ºç°çš„æœ«è¯    freq_freq = np.argmax(np.bincount(group[&#39;most_freq&#39;])) # è¯¥ç±»åˆ«æœ€é¢‘ç¹å‡ºç°çš„è¯    df_train_info.loc[name] = [count,len_mean,len_std,len_min,len_max,freq_fc,freq_lc,freq_freq]df_train_info</code></pre><p><img src="/2020/07/22/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8NLP%E4%B9%8B%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96%E4%B8%8E%E5%88%86%E6%9E%90/2020-07-25-12-30-24.png" alt></p><h3 id="ç±»åˆ«åˆ†å¸ƒ"><a href="#ç±»åˆ«åˆ†å¸ƒ" class="headerlink" title="ç±»åˆ«åˆ†å¸ƒ"></a>ç±»åˆ«åˆ†å¸ƒ</h3><p>ä¹‹å‰çš„è®¨è®ºæ˜¯ä»æ•°æ®é›†æ€»ä½“éªŒè¯åŒåˆ†å¸ƒçš„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦éªŒè¯è®­ç»ƒé›†çš„ç±»åˆ«è¶³å¤Ÿå‡åŒ€ã€‚</p><p>åœ¨æ•°æ®é›†ä¸­æ ‡ç­¾çš„å¯¹åº”çš„å…³ç³»å¦‚ä¸‹</p><pre><code class="lang-python">label_2_index_dict = &#123;&#39;ç§‘æŠ€&#39;: 0, &#39;è‚¡ç¥¨&#39;: 1, &#39;ä½“è‚²&#39;: 2, &#39;å¨±ä¹&#39;: 3, &#39;æ—¶æ”¿&#39;: 4, &#39;ç¤¾ä¼š&#39;: 5, &#39;æ•™è‚²&#39;: 6, &#39;è´¢ç»&#39;: 7, &#39;å®¶å±…&#39;: 8, &#39;æ¸¸æˆ&#39;: 9, &#39;æˆ¿äº§&#39;: 10, &#39;æ—¶å°š&#39;: 11, &#39;å½©ç¥¨&#39;: 12, &#39;æ˜Ÿåº§&#39;: 13&#125;index_2_label_dict = &#123;v:k for k,v in label_2_index_dict.items()&#125;plt.figure()plt.bar(x=range(14), height=np.bincount(df_train[&#39;label&#39;]))plt.xlabel(&quot;label&quot;)plt.ylabel(&quot;number of sample&quot;)plt.xticks(range(14), list(index_2_label_dict.values()), fontproperties=zhfont, rotation=60)plt.show()</code></pre><p><img src="/2020/07/22/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8NLP%E4%B9%8B%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96%E4%B8%8E%E5%88%86%E6%9E%90/6.png" alt></p><p>ä»ç»Ÿè®¡ç»“æœå¯ä»¥çœ‹å‡º</p><p>èµ›é¢˜çš„æ•°æ®é›†ç±»åˆ«åˆ†å¸ƒå­˜åœ¨è¾ƒä¸ºä¸å‡åŒ€çš„æƒ…å†µã€‚åœ¨è®­ç»ƒé›†ä¸­ç§‘æŠ€ç±»æ–°é—»æœ€å¤šï¼Œå…¶æ¬¡æ˜¯è‚¡ç¥¨ç±»æ–°é—»ï¼Œæœ€å°‘çš„æ–°é—»æ˜¯æ˜Ÿåº§æ–°é—»ã€‚</p><p>ç§‘æŠ€ç±»æ–°é—»æœ€å¤šï¼Œæ˜Ÿåº§ç±»æ–°é—»æœ€å°‘ã€‚è¿™ä¸ªå›½å®¶çš„äººå¤§éƒ¨åˆ†æ˜¯å”¯ç‰©ä¸»ä¹‰è€…å“ˆï¼Œç¥ç§˜å­¦å—ä¼—æ¯”è¾ƒå°‘ï¼ˆå•Šè¿™ï¼Œæˆ‘åœ¨åˆ†æä»€ä¹ˆï¼Ÿï¼‰ã€‚</p><p>ç”±äºç±»åˆ«ä¸å‡è¡¡ï¼Œä¼šä¸¥é‡å½±å“æ¨¡å‹çš„ç²¾åº¦ã€‚ä½†æ˜¯æˆ‘ä»¬ä¹Ÿæ˜¯æœ‰åŠæ³•åº”å¯¹çš„ã€‚</p><h3 id="ç±»åˆ«é•¿åº¦"><a href="#ç±»åˆ«é•¿åº¦" class="headerlink" title="ç±»åˆ«é•¿åº¦"></a>ç±»åˆ«é•¿åº¦</h3><pre><code class="lang-python">df_train[&#39;len&#39;] = df_train[&#39;text&#39;].apply(lambda x: len(x.split()))plt.figure()ax = sns.catplot(x=&#39;label&#39;, y=&#39;len&#39;, data=df_train, kind=&#39;strip&#39;)plt.xticks(range(14), list(index_2_label_dict.values()), fontproperties=zhfont, rotation=60)</code></pre><p><img src="/2020/07/22/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8NLP%E4%B9%8B%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96%E4%B8%8E%E5%88%86%E6%9E%90/7.png" alt></p><p>åœ¨æ•£ç‚¹å›¾ä¸­ï¼Œè‚¡ç¥¨ç±»æ–°é—»çš„é•¿åº¦éƒ½é£˜åˆ°å¤©ä¸Šå»äº†ï¼Œå¯ä»¥çœ‹å‡ºè‚¡ç¥¨åˆ†æç±»æ–‡ç« çœŸçš„å¾ˆå®¹æ˜“å†™å¾—åˆè‡­åˆé•¿å•Šï¼ˆå‘ç°ï¼šä¸åŒç±»åˆ«çš„æ–‡ç« é•¿åº¦ä¸åŒï¼Œå¯ä»¥æŠŠé•¿åº¦ä½œä¸ºä¸€ä¸ªFeatureï¼Œä»¥ä¾›æœºå™¨å­¦ä¹ æ¨¡å‹è®­ç»ƒï¼‰ï¼</p><h2 id="å­—ç¬¦åˆ†å¸ƒ"><a href="#å­—ç¬¦åˆ†å¸ƒ" class="headerlink" title="å­—ç¬¦åˆ†å¸ƒ"></a>å­—ç¬¦åˆ†å¸ƒ</h2><p>è®­ç»ƒé›†ä¸­æ€»å…±åŒ…æ‹¬6869ä¸ªå­—ï¼Œæœ€å¤§æ•°å­—ä¸º7549ï¼Œæœ€å°æ•°å­—ä¸º0ï¼Œå…¶ä¸­ç¼–å·3750çš„å­—å‡ºç°çš„æ¬¡æ•°æœ€å¤šï¼Œç¼–å·3133çš„å­—å‡ºç°çš„æ¬¡æ•°æœ€å°‘ï¼Œä»…å‡ºç°ä¸€æ¬¡ã€‚</p><pre><code class="lang-python"># å†…å­˜è­¦å‘Šï¼ï¼ï¼æ²¡æœ‰8Gå†…å­˜ä¸è¦è¿è¡Œè¯¥ä»£ç all_lines = &#39; &#39;.join(list(df_train[&#39;text&#39;]))word_count = Counter(all_lines.split(&quot; &quot;))word_count = sorted(word_count.items(), key=lambda d:d[1], reverse=True)print(len(word_count))# 6869print(word_count[0])# (&#39;3750&#39;, 7482224)print(word_count[-1])# (&#39;3133&#39;, 1)</code></pre><p>ä¸‹é¢ä»£ç ç»Ÿè®¡äº†ä¸åŒå­—ç¬¦åœ¨å¤šå°‘ä¸ªå¥å­ä¸­å‡ºç°è¿‡ï¼Œå…¶ä¸­å­—ç¬¦3750ã€å­—ç¬¦900å’Œå­—ç¬¦648åœ¨20wæ–°é—»çš„è¦†ç›–ç‡æ¥è¿‘99%ï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯æ ‡ç‚¹ç¬¦å·ã€‚</p><pre><code class="lang-python">%%timedf_train[&#39;text_unique&#39;] = df_train[&#39;text&#39;].apply(lambda x: &#39; &#39;.join(list(set(x.split(&#39; &#39;)))))all_lines = &#39; &#39;.join(list(df_train[&#39;text_unique&#39;]))word_count = Counter(all_lines.split(&quot; &quot;))word_count = sorted(word_count.items(), key=lambda d:int(d[1]), reverse=True)# æ‰“å°æ•´ä¸ªè®­ç»ƒé›†ä¸­è¦†ç›–ç‡å‰5çš„è¯for i in range(5):    print(&quot;&#123;&#125; occurs &#123;&#125; times, &#123;&#125;%&quot;.format(word_count[i][0], word_count[i][1], (word_count[i][1]/200000)*100))</code></pre><p>3750 occurs 197997 times, 98.9985%<br>900 occurs 197653 times, 98.8265%<br>648 occurs 191975 times, 95.9875%<br>2465 occurs 177310 times, 88.655%<br>6122 occurs 176543 times, 88.2715%</p><h2 id="ä¹ é¢˜"><a href="#ä¹ é¢˜" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h2><p><strong>å‡è®¾å­—ç¬¦3750ï¼Œå­—ç¬¦900å’Œå­—ç¬¦648æ˜¯å¥å­çš„æ ‡ç‚¹ç¬¦å·ï¼Œè¯·åˆ†æèµ›é¢˜æ¯ç¯‡æ–°é—»å¹³å‡ç”±å¤šå°‘ä¸ªå¥å­æ„æˆï¼Ÿ</strong></p><p>å¦‚æœè¿™æ˜¯è‹±æ–‡æ–‡ç« ï¼Œé‚£ä¹ˆ3750åº”è¯¥æ˜¯ç©ºæ ¼å§ï¼Ÿå¦‚æœ3750æ˜¯é€—å·æ€ä¹ˆåŠï¼Ÿå…ˆè¦åˆ¤æ–­å“ªä¸ªæ˜¯å¥å·ã€‚</p><p>æ€è·¯ï¼šè¯¥æ–°é—»çš„å¥å­æ•°ä¸ºè¯¥ä¸ªæ•°ã€‚æ¯æ¡æ–°é—»æœ€åçš„å­—ç¬¦å¾€å¾€æ˜¯å¥å·ï¼Œå…ˆçœ‹çœ‹æ¯æ¡æ–°é—»æœ€åä¸€ä¸ªå­—ç¬¦æ˜¯ä»€ä¹ˆï¼š</p><pre><code class="lang-python">last_char = np.vectorize(lambda x:int(x.split()[-1]))(df_train[&#39;text&#39;])last_char_count = Counter(last_char)last_char_count = sorted(last_char_count.items(), key=lambda d:d[1], reverse=True)# æ‰“å°å‡ºç°æ¬¡æ•°æœ€å¤šçš„å‰åä¸ªfor i in range(10):    print(&quot;&#123;&#125;åœ¨æ–°é—»æœ«å°¾å‡ºç°äº†&#123;&#125;æ¬¡&quot;.format(last_char_count[i][0], last_char_count[i][1]))900åœ¨æ–°é—»æœ«å°¾å‡ºç°äº†85040æ¬¡2662åœ¨æ–°é—»æœ«å°¾å‡ºç°äº†39273æ¬¡885åœ¨æ–°é—»æœ«å°¾å‡ºç°äº†14473æ¬¡1635åœ¨æ–°é—»æœ«å°¾å‡ºç°äº†7379æ¬¡2465åœ¨æ–°é—»æœ«å°¾å‡ºç°äº†7076æ¬¡57åœ¨æ–°é—»æœ«å°¾å‡ºç°äº†3284æ¬¡3231åœ¨æ–°é—»æœ«å°¾å‡ºç°äº†2758æ¬¡1633åœ¨æ–°é—»æœ«å°¾å‡ºç°äº†2706æ¬¡3568åœ¨æ–°é—»æœ«å°¾å‡ºç°äº†1504æ¬¡2265åœ¨æ–°é—»æœ«å°¾å‡ºç°äº†1389æ¬¡</code></pre><p>å› æ­¤æˆ‘ä»¬æœ‰ç†ç”±è®¤ä¸º900æ˜¯å¥å·ã€‚è‡³äº3750åº”è¯¥æ˜¯é€—å·å§ï¼ŸçŒœçš„ï¼Œç†ç”±æ˜¯3750ä¸å¤ªå®¹æ˜“åœ¨æ–°é—»æœ«å°¾å‡ºç°ã€‚</p><p>ä½†æ˜¯é™¤äº†å¥å·ä¹‹å¤–ï¼Œæ„Ÿå¹å·å’Œé—®å·ç…§æ ·èƒ½åˆ’åˆ†å¥å­ï¼Œæˆ‘ä»¬è¯•ç€å°†2662å½“ä½œæ„Ÿå¹å·ï¼Œå°†885å½“ä½œé—®å·ã€‚ä»€ä¹ˆç†ç”±ï¼ŸçŒœçš„ã€‚</p><p>ä¸‹é¢å¼€å§‹è®¡ç®—æ¯ç¯‡æ–°é—»æ‰€å«æ ‡ç‚¹ç¬¦å·ï¼ˆ900ã€2662ã€885ï¼‰çš„ä¸ªæ•°ï¼Œ</p><pre><code class="lang-python">def sum_of_sep(row):    counter = Counter(row.split())    return counter.get(&#39;900&#39;, 0)+counter.get(&#39;2662&#39;, 0)+counter.get(&#39;885&#39;, 0)sum_sep = np.vectorize(sum_of_sep)(df_train[&#39;text&#39;])print(&quot;å¹³å‡æ¯æ¡æ–°é—»çš„å¥å­ä¸ªæ•°çº¦ä¸ºï¼š&quot;, np.round(np.mean(sum_sep)))pd.Series(sum_sep).describe()å¹³å‡æ¯æ¡æ–°é—»çš„å¥å­ä¸ªæ•°çº¦ä¸ºï¼š 19.0count    200000.000000mean         19.070155std          21.463798min           0.00000025%           7.00000050%          14.00000075%          24.000000max        1392.000000dtype: float64</code></pre><p>å¹³å‡é•¿åº¦ä¸º19ï¼Œå…¶å®è¿™æ˜¯æŠŠé‚£äº›è‚¡ç¥¨æ–‡ç« ä¹Ÿç®—ä¸Šäº†ï¼Œæ‹‰é«˜äº†å¹³å‡å€¼ã€‚75%çš„æ–°é—»é•¿åº¦éƒ½åœ¨24ä¸ªå¥å­ä»¥ä¸‹ã€‚</p><p>ç»™df_train_infoæ–°åŠ ä¸€åˆ—sent_numï¼Œè®¡ç®—åˆ†è¯åçš„å¥å­ä¸ªæ•°ï¼›sent_lenä¸ºå¥å­é•¿åº¦ã€‚</p><pre><code class="lang-python">list_num_sentence = []for name, group in df_train.groupby(&#39;label&#39;):    sum_sep_label = np.vectorize(sum_of_sep)(group[&#39;text&#39;])    num_sentence = np.mean(sum_sep_label)    list_num_sentence.append(num_sentence)df_train_info[&#39;sent_num&#39;] = list_num_sentencedf_train_info[&#39;sent_len&#39;] = df_train_info[&#39;len_mean&#39;] / df_train_info[&#39;sent_num&#39;]df_train_info</code></pre><p>ä¸åŒç±»åˆ«çš„æ–°é—»ï¼Œå…¶å¥å­é•¿åº¦å’Œä¸ªæ•°ä¹Ÿæ˜¯ä¸åŒçš„ã€‚</p><p>ä¹‹å‰æˆ‘ä»¬åˆ†æï¼Œè‚¡ç¥¨ç±»æ–‡ç« å¾€å¾€å¾ˆé•¿ï¼Œè€Œç¤¾ä¼šï¼ˆlabel=5ï¼‰å’Œæ•™è‚²ï¼ˆlabel=6ï¼‰ç±»æ–‡ç« çš„å¥å­æœ€å¤šã€‚å®¶å±…ï¼ˆlabel=8ï¼‰å’Œæ—¶å°šï¼ˆlabel=11ï¼‰ç±»æ–°é—»çš„å¥å­æœ€å°‘ã€‚æ¸¸æˆç±»ï¼ˆlabel=9ï¼‰å¥å­æ˜¯æœ€é•¿çš„ï¼Œç¤¾ä¼šï¼ˆlabel=5ï¼‰å¥å­æ˜¯æœ€çŸ­çš„ï¼ˆå‘ç°ï¼šå¥å­å’Œä¸ªæ•°é•¿åº¦ä¹Ÿå¯ä»¥ä½œä¸ºç‰¹å¾ï¼‰ã€‚</p><p><img src="/2020/07/22/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8NLP%E4%B9%8B%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96%E4%B8%8E%E5%88%86%E6%9E%90/2020-07-25-13-00-28.png" alt></p><p><strong>æ¯ç±»æ–°é—»ä¸­å‡ºç°æ¬¡æ•°å‰10</strong></p><p>åœ¨æ¯ç±»æ–°é—»ä¸­å‡ºç°é¢‘ç‡æœ€é«˜çš„è¯æ±‡ï¼Œå°±æ˜¯df_train_infoè¡¨ä¸­çš„freq_freqåˆ—ã€‚å¯ä»¥çœ‹åˆ°ï¼Œæ¸…ä¸€è‰²çš„3750ï¼Œè¿™ä¸ªå­—ç¬¦æˆ‘ä»¬åœ¨åæœŸå¤„ç†æ—¶å¯ä»¥æ‹¿æ‰ã€‚</p><pre><code class="lang-python">word_count_dict = &#123;&#125;for name, df in df_train.groupby(&#39;label&#39;):    # print(name, type(df))    all_text = &#39; &#39;.join(list(df[&#39;text&#39;].apply(lambda x: &#39; &#39;.join(list(x.split(&#39; &#39;))))))    word_count_single_class = Counter(all_text.split(&quot; &quot;))    word_count_single_class = sorted(word_count_single_class.items(), key=lambda d:int(d[1]), reverse = True)    word_count_dict[name] = word_count_single_classfor label in range(14):    print(index_2_label_dict[label], [x for x,_ in word_count_dict[label][:10]])ç§‘æŠ€ [&#39;3750&#39;, &#39;648&#39;, &#39;900&#39;, &#39;3370&#39;, &#39;4464&#39;, &#39;2465&#39;, &#39;6122&#39;, &#39;3659&#39;, &#39;7399&#39;, &#39;4939&#39;]è‚¡ç¥¨ [&#39;3750&#39;, &#39;648&#39;, &#39;3370&#39;, &#39;900&#39;, &#39;4464&#39;, &#39;3659&#39;, &#39;5036&#39;, &#39;6250&#39;, &#39;1633&#39;, &#39;6065&#39;]ä½“è‚² [&#39;3750&#39;, &#39;648&#39;, &#39;900&#39;, &#39;7399&#39;, &#39;6122&#39;, &#39;4939&#39;, &#39;4704&#39;, &#39;1667&#39;, &#39;5598&#39;, &#39;669&#39;]å¨±ä¹ [&#39;3750&#39;, &#39;648&#39;, &#39;900&#39;, &#39;6122&#39;, &#39;4939&#39;, &#39;4893&#39;, &#39;7399&#39;, &#39;669&#39;, &#39;803&#39;, &#39;1635&#39;]æ—¶æ”¿ [&#39;3750&#39;, &#39;648&#39;, &#39;900&#39;, &#39;4411&#39;, &#39;7399&#39;, &#39;4893&#39;, &#39;6122&#39;, &#39;4464&#39;, &#39;2400&#39;, &#39;4853&#39;]ç¤¾ä¼š [&#39;3750&#39;, &#39;648&#39;, &#39;900&#39;, &#39;6122&#39;, &#39;5598&#39;, &#39;4893&#39;, &#39;7399&#39;, &#39;4939&#39;, &#39;3370&#39;, &#39;669&#39;]æ•™è‚² [&#39;3750&#39;, &#39;648&#39;, &#39;900&#39;, &#39;6248&#39;, &#39;2555&#39;, &#39;5620&#39;, &#39;2465&#39;, &#39;6122&#39;, &#39;5560&#39;, &#39;3370&#39;]è´¢ç» [&#39;3750&#39;, &#39;648&#39;, &#39;900&#39;, &#39;3370&#39;, &#39;5296&#39;, &#39;4464&#39;, &#39;6835&#39;, &#39;3659&#39;, &#39;6122&#39;, &#39;7399&#39;]å®¶å±… [&#39;3750&#39;, &#39;648&#39;, &#39;900&#39;, &#39;6122&#39;, &#39;4939&#39;, &#39;913&#39;, &#39;5560&#39;, &#39;7399&#39;, &#39;3961&#39;, &#39;4811&#39;]æ¸¸æˆ [&#39;3750&#39;, &#39;648&#39;, &#39;900&#39;, &#39;7328&#39;, &#39;6122&#39;, &#39;7399&#39;, &#39;5547&#39;, &#39;4939&#39;, &#39;3370&#39;, &#39;2465&#39;]æˆ¿äº§ [&#39;3750&#39;, &#39;648&#39;, &#39;900&#39;, &#39;3370&#39;, &#39;2465&#39;, &#39;5560&#39;, &#39;3686&#39;, &#39;4464&#39;, &#39;3523&#39;, &#39;6122&#39;]æ—¶å°š [&#39;3750&#39;, &#39;648&#39;, &#39;900&#39;, &#39;4939&#39;, &#39;6122&#39;, &#39;5560&#39;, &#39;669&#39;, &#39;4811&#39;, &#39;7539&#39;, &#39;4893&#39;]å½©ç¥¨ [&#39;3750&#39;, &#39;4464&#39;, &#39;3370&#39;, &#39;648&#39;, &#39;2465&#39;, &#39;900&#39;, &#39;3659&#39;, &#39;6065&#39;, &#39;1667&#39;, &#39;2614&#39;]æ˜Ÿåº§ [&#39;3750&#39;, &#39;648&#39;, &#39;900&#39;, &#39;4939&#39;, &#39;669&#39;, &#39;6122&#39;, &#39;4893&#39;, &#39;3864&#39;, &#39;4811&#39;, &#39;1465&#39;]</code></pre><h1 id="åˆ†æç»“æœ"><a href="#åˆ†æç»“æœ" class="headerlink" title="åˆ†æç»“æœ"></a>åˆ†æç»“æœ</h1><p>æ•°æ®åˆ†æè‚¯å®šè¦æœ‰ç»“è®ºï¼Œæ²¡æœ‰ç»“è®ºçš„æ•°æ®åˆ†ææ˜¯ä¸å®Œæ•´çš„ã€‚</p><ol><li><p>è®­ç»ƒé›†å…±200,000æ¡æ–°é—»ï¼Œæ¯æ¡æ–°é—»å¹³å‡907ä¸ªå­—ç¬¦ï¼Œæœ€çŸ­çš„å¥å­é•¿åº¦ä¸º2ï¼Œæœ€é•¿çš„å¥å­é•¿åº¦ä¸º57921ï¼Œå…¶ä¸­75%ä»¥ä¸‹çš„æ•°æ®é•¿åº¦åœ¨1131ä»¥ä¸‹ã€‚æµ‹è¯•é›†å…±50,000æ¡æ–°é—»ï¼Œæ¯æ¡æ–°é—»å¹³å‡909ä¸ªå­—ç¬¦ï¼Œæœ€çŸ­å¥å­é•¿åº¦ä¸º14ï¼Œæœ€é•¿å¥å­41861,75%ä»¥ä¸‹çš„æ•°æ®é•¿åº¦åœ¨1133ä»¥ä¸‹ã€‚</p></li><li><p>è®­ç»ƒé›†å’Œæµ‹è¯•é›†å°±é•¿åº¦æ¥è¯´ä¼¼ä¹æ˜¯åŒä¸€åˆ†å¸ƒï¼Œä½†æ˜¯ä¸å±äºæ­£æ€åˆ†å¸ƒã€‚</p></li><li><p>æŠŠæˆªæ–­é•¿åº¦å®šä¸º5000ï¼Ÿ</p></li><li><p>èµ›é¢˜çš„æ•°æ®é›†ç±»åˆ«åˆ†å¸ƒå­˜åœ¨è¾ƒä¸ºä¸å‡åŒ€çš„æƒ…å†µã€‚åœ¨è®­ç»ƒé›†ä¸­ç§‘æŠ€ç±»æ–°é—»æœ€å¤šï¼Œå…¶æ¬¡æ˜¯è‚¡ç¥¨ç±»æ–°é—»ï¼Œæœ€å°‘çš„æ–°é—»æ˜¯æ˜Ÿåº§æ–°é—»ã€‚éœ€è¦ç”¨é‡‡æ ·æ–¹æ³•è§£å†³ã€‚æ–‡ç« æœ€é•¿çš„æ˜¯è‚¡ç¥¨ç±»æ–°é—»ã€‚ä¸åŒç±»åˆ«çš„æ–‡ç« é•¿åº¦ä¸åŒï¼Œå¯ä»¥æŠŠé•¿åº¦å’Œå¥å­ä¸ªæ•°ä½œä¸ºä¸€ä¸ªFeatureï¼Œä»¥ä¾›æœºå™¨å­¦ä¹ æ¨¡å‹è®­ç»ƒã€‚</p></li><li><p>è®­ç»ƒé›†ä¸­æ€»å…±åŒ…æ‹¬6869ä¸ªå­—ï¼Œæœ€å¤§æ•°å­—ä¸º7549ï¼Œæœ€å°æ•°å­—ä¸º0ï¼Œå…¶ä¸­ç¼–å·3750çš„å­—å‡ºç°çš„æ¬¡æ•°æœ€å¤šï¼Œç¼–å·3133çš„å­—å‡ºç°çš„æ¬¡æ•°æœ€å°‘ï¼Œä»…å‡ºç°ä¸€æ¬¡ï¼Œå…¶ä¸­å­—ç¬¦3750ã€å­—ç¬¦900å’Œå­—ç¬¦648åœ¨20wæ–°é—»çš„è¦†ç›–ç‡æ¥è¿‘99%ï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯æ ‡ç‚¹ç¬¦å·ã€‚</p></li><li><p>900å¾ˆæœ‰å¯èƒ½æ˜¯å¥å·ï¼Œ2662å’Œ885åˆ™å¾ˆæœ‰å¯èƒ½ä¸ºæ„Ÿå¹å·å’Œé—®å·ï¼Œ3750å‡ºç°é¢‘ç‡å¾ˆé«˜ä½†æ˜¯åŸºæœ¬ä¸åœ¨æ–°é—»æœ€åå‡ºç°ï¼Œå› æ­¤åˆæ­¥åˆ¤æ–­ä¸ºé€—å·ã€‚æŒ‰ç…§è¿™ç§åˆ’åˆ†ï¼Œè®­ç»ƒé›†ä¸­æ¯æ¡æ–°é—»å¹³å‡å¥å­ä¸ªæ•°çº¦ä¸º19ã€‚</p></li><li><p>åœ¨è®­ç»ƒé›†ä¸­ï¼Œä¸åŒç±»åˆ«æ–°é—»å‡ºç°è¯æ±‡æœ‰ç‰¹è‰²ã€‚ä½†æ˜¯éœ€è¦æŠŠå…±æœ‰çš„å¸¸ç”¨è¯åœç”¨ã€‚è‡ªç„¶æƒ³åˆ°åˆ©ç”¨TF-IDFç¼–ç æ–¹å¼ã€‚</p></li></ol>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Feature Engineering</tag>
      
      <tag>Data Science</tag>
      
      <tag>Datawhale</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç«èµ›æ‰“å¡ã€‘é›¶åŸºç¡€å…¥é—¨NLPä¹‹æ–°é—»æ–‡æœ¬åˆ†ç±»ä¹‹èµ›é¢˜ç†è§£</title>
    <link href="/2020/07/21/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8NLP%E4%B9%8B%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E8%B5%9B%E9%A2%98%E7%90%86%E8%A7%A3/"/>
    <url>/2020/07/21/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8NLP%E4%B9%8B%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E8%B5%9B%E9%A2%98%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p>è¿™é¡¹ä»»åŠ¡ä¸å¥½åšå‘€ï¼Œç¨ä¸å°å¿ƒå°±å ç”¨äº†task2çš„å†…å®¹ã€‚<br><!--more---></p><h1 id="é›¶åŸºç¡€å…¥é—¨NLPä¹‹æ–°é—»æ–‡æœ¬åˆ†ç±»ä¹‹èµ›é¢˜ç†è§£"><a href="#é›¶åŸºç¡€å…¥é—¨NLPä¹‹æ–°é—»æ–‡æœ¬åˆ†ç±»ä¹‹èµ›é¢˜ç†è§£" class="headerlink" title="é›¶åŸºç¡€å…¥é—¨NLPä¹‹æ–°é—»æ–‡æœ¬åˆ†ç±»ä¹‹èµ›é¢˜ç†è§£"></a>é›¶åŸºç¡€å…¥é—¨NLPä¹‹æ–°é—»æ–‡æœ¬åˆ†ç±»ä¹‹èµ›é¢˜ç†è§£</h1><h2 id="ä¸€ã€ç°åœ¨å…¬å¼€çš„æƒ…æŠ¥"><a href="#ä¸€ã€ç°åœ¨å…¬å¼€çš„æƒ…æŠ¥" class="headerlink" title="ä¸€ã€ç°åœ¨å…¬å¼€çš„æƒ…æŠ¥"></a>ä¸€ã€ç°åœ¨å…¬å¼€çš„æƒ…æŠ¥</h2><h3 id="1-æ¯”èµ›å†…å®¹"><a href="#1-æ¯”èµ›å†…å®¹" class="headerlink" title="1. æ¯”èµ›å†…å®¹"></a>1. æ¯”èµ›å†…å®¹</h3><p>æœ¬æ¬¡æ¯”èµ›çš„ä»»åŠ¡ä¸ºæ–‡æœ¬çš„åˆ†ç±»ä»»åŠ¡ã€‚è™½ç„¶ç®€å•ï¼Œä½†æ˜¯æƒ³è¦å–å¾—é«˜åˆ†è¿˜æ˜¯ä¸å®¹æ˜“ã€‚</p><p>å¾…åˆ†ç±»æ–‡æœ¬ä¸ºæ–°é—»æ–‡æœ¬ã€‚æ–°é—»æ–‡æœ¬æ ¹æ®æ¥æºï¼Œåˆ†ä¸ºè´¢ç»ã€å½©ç¥¨ã€æˆ¿äº§ã€è‚¡ç¥¨ã€å®¶å±…ã€æ•™è‚²ã€ç§‘æŠ€ã€ç¤¾ä¼šã€æ—¶å°šã€æ—¶æ”¿ã€ä½“è‚²ã€æ˜Ÿåº§ã€æ¸¸æˆã€å¨±ä¹ï¼Œå…±14ç±»ã€‚</p><h3 id="2-æ•°æ®å†…å®¹"><a href="#2-æ•°æ®å†…å®¹" class="headerlink" title="2. æ•°æ®å†…å®¹"></a>2. æ•°æ®å†…å®¹</h3><p>è®­ç»ƒé›†å’Œæµ‹è¯•é›†åœ¨<a href="https://tianchi.aliyun.com/competition/entrance/531810/introduction">å®˜ç½‘</a>ä¸‹è½½ã€‚</p><p>å…¶ä¸­è®­ç»ƒé›†æ˜¯å¸¦æ­£ç¡®æ ‡ç­¾çš„ï¼Œæµ‹è¯•é›†ä¸å¸¦æ ‡ç­¾ï¼Œæ˜¯çœŸæ­£çš„é¢˜ç›®ã€‚æˆ‘ä»¬çš„ä»»åŠ¡æ˜¯è®­ç»ƒæ¨¡å‹ï¼Œæ­£ç¡®åˆ†ç±»æµ‹è¯•é›†ä¸­æ¯ä¸€æ¡æ–°é—»çš„æ ‡ç­¾ã€‚</p><p>è®­ç»ƒé›†ç”±20ä¸‡æ¡æ–°é—»æ„æˆï¼Œæµ‹è¯•é›†äº”ä¸‡æ¡æ•°æ®ã€‚</p><p>æ¯æ¡æ–°é—»éƒ½è¢«ç¼–ç ä¸ºæ•´æ•°åºåˆ—ã€‚æ¯ä¸ªå•è¯å¯¹åº”ä¸€ä¸ªæ•´æ•°ã€‚</p><p>æ•°æ®é›†ä¸­æ ‡ç­¾çš„å¯¹åº”çš„å…³ç³»å¦‚ä¸‹ï¼š</p><p><code>&#123;&#39;ç§‘æŠ€&#39;: 0, &#39;è‚¡ç¥¨&#39;: 1, &#39;ä½“è‚²&#39;: 2, &#39;å¨±ä¹&#39;: 3, &#39;æ—¶æ”¿&#39;: 4, &#39;ç¤¾ä¼š&#39;: 5, &#39;æ•™è‚²&#39;: 6, &#39;è´¢ç»&#39;: 7, &#39;å®¶å±…&#39;: 8, &#39;æ¸¸æˆ&#39;: 9, &#39;æˆ¿äº§&#39;: 10, &#39;æ—¶å°š&#39;: 11, &#39;å½©ç¥¨&#39;: 12, &#39;æ˜Ÿåº§&#39;: 13&#125;</code></p><h3 id="3-èµ›åˆ¶"><a href="#3-èµ›åˆ¶" class="headerlink" title="3. èµ›åˆ¶"></a>3. èµ›åˆ¶</h3><ul><li>ç¬¬ä¸€é˜¶æ®µï¼ˆ7æœˆ15æ—¥-9æœˆ7æ—¥ï¼‰ï¼Œæ¯å¤©ä¸¤æ¬¡æäº¤è‡ªå·±ç­”æ¡ˆçš„æœºä¼šï¼Œç³»ç»Ÿæ ¹æ®æˆç»©è‡ªåŠ¨æ’åï¼Œæ’è¡Œæ¦œæ¯å°æ—¶æ›´æ–°ã€‚è¯¥æ’è¡Œä¸æœ€ç»ˆæˆç»©æ— å…³ã€‚</li><li>ç¬¬äºŒé˜¶æ®µï¼ˆ9æœˆ7æ—¥ï½9æœˆ8æ—¥ï¼‰æ¸…ç©ºæ’è¡Œæ¦œï¼Œ7æ—¥11ï¼š00æ”¾å‡ºæ–°æµ‹è¯•æ•°æ®ã€‚åŒæ ·æ¯å¤©åªèƒ½æäº¤ä¸¤æ¬¡ï¼Œæ¯å°æ—¶æ›´æ–°æ¦œå•ï¼Œ9æœˆ8æ—¥æ™šä¸Š20ç‚¹çš„æ’è¡Œå³ä¸ºæœ€ç»ˆæˆç»©ã€‚</li><li>æ’è¡Œå‰13åé€‰æ‰‹åœ¨9æœˆ11æ—¥12:00å‰æäº¤ä»£ç ï¼Œè·å¾—å¥–åŠ±ã€‚</li></ul><h3 id="4-ç»“æœæäº¤"><a href="#4-ç»“æœæäº¤" class="headerlink" title="4. ç»“æœæäº¤"></a>4. ç»“æœæäº¤</h3><p>å°†æµ‹è¯•é›†çš„labelä¿å­˜æˆcsvæ ¼å¼ï¼Œä¸Šä¼ åˆ°<a href="https://tianchi.aliyun.com/competition/entrance/531810/submission/">è¿™é‡Œ</a>ã€‚</p><p>æ³¨æ„ç¬¬ä¸€è¡Œæ˜¯æ ‡é¢˜labelï¼Œä»ç¬¬äºŒè¡Œå¼€å§‹å†™å…¥æ ‡ç­¾ã€‚</p><h3 id="5-è¯„åˆ†æ ‡å‡†"><a href="#5-è¯„åˆ†æ ‡å‡†" class="headerlink" title="5. è¯„åˆ†æ ‡å‡†"></a>5. è¯„åˆ†æ ‡å‡†</h3><p>F1è¯„ä»·æŒ‡æ ‡</p><h3 id="6-å…¶ä»–"><a href="#6-å…¶ä»–" class="headerlink" title="6. å…¶ä»–"></a>6. å…¶ä»–</h3><p>å¯ä»¥å……åˆ†å‘æŒ¥è‡ªå·±çš„ç‰¹é•¿æ¥å®Œæˆå„ç§ç‰¹å¾å·¥ç¨‹ï¼Œä¸é™åˆ¶ä½¿ç”¨ä»»ä½•å¤–éƒ¨æ•°æ®å’Œæ¨¡å‹ã€‚</p><h2 id="äºŒã€èµ›é¢˜ç†è§£"><a href="#äºŒã€èµ›é¢˜ç†è§£" class="headerlink" title="äºŒã€èµ›é¢˜ç†è§£"></a>äºŒã€èµ›é¢˜ç†è§£</h2><h3 id="1-æ•°æ®ç¼–ç "><a href="#1-æ•°æ®ç¼–ç " class="headerlink" title="1. æ•°æ®ç¼–ç "></a>1. æ•°æ®ç¼–ç </h3><p>èµ›é¢˜ä½¿ç”¨çš„æ•°æ®ä¸ºæ–°é—»ï¼Œä½†æ˜¯æ•°æ®å·²ç»ç¼–ç æˆäº†æ•´æ•°åºåˆ—ã€‚åˆ†è¯æˆ‘ä»¬ä¸å¿…æ“å¿ƒäº†ï¼Œä½†æ˜¯è¿™ç§ç¼–ç æ–¹å¼æˆ‘ä»¬æœ‰å¿…è¦ç†Ÿæ‚‰ä¸€ä¸‹ã€‚</p><p>æ–‡æœ¬æ•°æ®çš„ç¼–ç æ–¹å¼é€šå¸¸æœ‰ï¼š</p><h4 id="1-1-æ ¹æ®å•è¯è¡¨ç¼–ç "><a href="#1-1-æ ¹æ®å•è¯è¡¨ç¼–ç " class="headerlink" title="1.1 æ ¹æ®å•è¯è¡¨ç¼–ç "></a>1.1 æ ¹æ®å•è¯è¡¨ç¼–ç </h4><p>æœ¬é¢˜å°±æ˜¯æ ¹æ®å•è¯è¡¨ç¼–ç çš„ï¼Œæ¯ä¸ªå•è¯è¢«ç¼–ç ä¸ºåœ¨å•è¯è¡¨ä¸­çš„ä½ç½®ã€‚æ¯”å¦‚æ•´æ•°40å°±æ˜¯å•è¯è¡¨ä¸­ç¬¬40ä¸ªå•è¯ã€‚</p><p>æœ¬é¢˜ä¸­æœ€å¤§çš„æ•°æ®å°±æ˜¯7549ï¼Œå› æ­¤æ¨æµ‹å•è¯è¡¨å¤§å°ä¸º7550ã€‚å‰©ä¸‹çš„ç‰¹å¾å·¥ç¨‹ç•™ç»™ä¸‹æ¬¡æ‰“å¡ï¼Œè¦ä¸æ²¡å¾—å†™äº†XD</p><p>å½“ç„¶ä½ å¯ä»¥åŸºäºå•è¯è¡¨ç¼–ç çš„æ–¹æ³•ï¼Œä½¿ç”¨å¤§åé¼é¼çš„<strong>One-Hotç¼–ç </strong>æ–¹æ³•ï¼ŒæŠŠæ¯ä¸ªå•è¯å¯¹åº”çš„æ•´æ•°æ˜ å°„æˆä¸€ä¸ª7550ç»´çš„å‘é‡$\mathbf{x}$ï¼Œè¯¥å‘é‡çš„ç¬¬$i$ç»´$\mathbf{x}_i=1$ï¼Œå…¶ä»–ç»´åº¦ä¸º0ã€‚</p><p>One-Hotç¼–ç æ–¹æ³•çš„åå¤„æ˜¾è€Œæ˜“è§ï¼Œé‚£å°±æ˜¯æ•°æ®å¤ªè¿‡ç¨€ç–ã€‚å¥½å¤„åˆ™æ˜¯ï¼Œå®è·µè¯æ˜ï¼Œæ·±åº¦å­¦ä¹ æ¨¡å‹æ˜¯å¯ä»¥ä»è¿™ç§ç¨€ç–è¡¨ç¤ºçš„ç‰¹å¾ä¸­é«˜æ•ˆåœ°å­¦ä¹ åˆ°çŸ¥è¯†çš„ã€‚</p><h4 id="1-2-è¯è¢‹æ¨¡å‹"><a href="#1-2-è¯è¢‹æ¨¡å‹" class="headerlink" title="1.2 è¯è¢‹æ¨¡å‹"></a>1.2 è¯è¢‹æ¨¡å‹</h4><p>æ–‡æœ¬æ•°æ®é€šå¸¸è¢«è¡¨ç¤ºä¸ºç”±å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ã€‚æˆ‘ä»¬éœ€è¦å…ˆå¤„ç†æ•°æ®ï¼Œç„¶åæ‰èƒ½å¯¹å…¶åº”ç”¨æœºå™¨å­¦ä¹ ç®—æ³•ã€‚</p><p>åœ¨æ–‡æœ¬åˆ†æçš„è¯­å¢ƒä¸­ï¼Œæ•°æ®é›†é€šå¸¸è¢«ç§°ä¸ºè¯­æ–™åº“ï¼ˆcorpusï¼‰ï¼Œæ¯ä¸ªç”±å•ä¸ªæ–‡æœ¬è¡¨ç¤ºçš„æ•°æ®ç‚¹è¢«ç§°ä¸ºæ–‡æ¡£ï¼ˆdocumentï¼‰ã€‚</p><p>æœ€ç®€å•çš„å¤„ç†æ–¹æ³•ï¼Œæ˜¯<strong>åªè®¡ç®—è¯­æ–™åº“ä¸­æ¯ä¸ªå•è¯åœ¨æ¯ä¸ªæ–‡æœ¬ä¸­çš„å‡ºç°é¢‘æ¬¡</strong>ã€‚è¿™ç§æ–‡æœ¬å¤„ç†æ¨¡å‹ç§°ä¹‹ä¸º<strong>è¯è¢‹æ¨¡å‹</strong>ã€‚</p><p>ä¸è€ƒè™‘è¯è¯­å‡ºç°çš„é¡ºåºï¼Œæ¯ä¸ªå‡ºç°è¿‡çš„è¯æ±‡å•ç‹¬ä½œä¸ºä¸€åˆ—ç‰¹å¾ï¼Œè¿™äº›ä¸é‡å¤çš„ç‰¹å¾è¯æ±‡é›†åˆä¸ºè¯è¡¨ã€‚</p><p>æ¯ä¸€ä¸ªæ–‡æœ¬éƒ½å¯ä»¥åœ¨å¾ˆé•¿çš„è¯è¡¨ä¸Šç»Ÿè®¡å‡ºä¸€ä¸ªå¾ˆå¤šåˆ—çš„ç‰¹å¾å‘é‡ã€‚å¦‚æœæ¯ä¸ªæ–‡æœ¬éƒ½å‡ºç°çš„è¯æ±‡ï¼Œä¸€èˆ¬è¢«æ ‡è®°ä¸º<strong>åœç”¨è¯</strong>ä¸è®¡å…¥ç‰¹å¾å‘é‡ã€‚</p><p>ä¸ºäº†ææ¸…æ¥šè¯è¢‹æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯<code>CountVectorizer</code>åˆ°åº•åšäº†ä»€ä¹ˆï¼Œæˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š</p><pre><code class="lang-python">bards_words =[&quot;The fool doth think he is wise,&quot;,    &quot;but the wise man knows himself to be a fool&quot;]</code></pre><p>æˆ‘ä»¬å¯¼å…¥ CountVectorizer å¹¶å°†å…¶å®ä¾‹åŒ–ï¼Œç„¶åå¯¹ bards_words è¿›è¡Œæ‹Ÿåˆï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code class="lang-python">from sklearn.feature_extraction.text import CountVectorizervect = CountVectorizer()vect.fit(bards_words)</code></pre><p>æ‹Ÿåˆ CountVectorizer åŒ…æ‹¬è®­ç»ƒæ•°æ®çš„åˆ†è¯ä¸è¯è¡¨çš„æ„å»ºï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ vocabulary_ å±æ€§æ¥è®¿é—®è¯è¡¨ï¼š</p><pre><code class="lang-python">print(&quot;Vocabulary size: &#123;&#125;&quot;.format(len(vect.vocabulary_)))print(&quot;Vocabulary content:\n &#123;&#125;&quot;.format(vect.vocabulary_))#------------------#Vocabulary size: 13Vocabulary content:&#123;&#39;the&#39;: 9, &#39;himself&#39;: 5, &#39;wise&#39;: 12, &#39;he&#39;: 4, &#39;doth&#39;: 2, &#39;to&#39;: 11, &#39;knows&#39;: 7,&#39;man&#39;: 8, &#39;fool&#39;: 3, &#39;is&#39;: 6, &#39;be&#39;: 0,  &#39;think&#39;: 10, &#39;but&#39;: 1&#125;</code></pre><p>è¯è¡¨å…±åŒ…å« 13 ä¸ªè¯ï¼Œä» â€œbeâ€ åˆ° â€œwiseâ€ã€‚<br>æˆ‘ä»¬å¯ä»¥è°ƒç”¨ transform æ–¹æ³•æ¥åˆ›å»ºè®­ç»ƒæ•°æ®çš„è¯è¢‹è¡¨ç¤ºï¼š</p><pre><code class="lang-python">bag_of_words = vect.transform(bards_words)print(&quot;bag_of_words: &#123;&#125;&quot;.format(repr(bag_of_words)))#--------------------#bag_of_words: &lt;2x13 sparse matrix of type &#39;&lt;class &#39;numpy.int64&#39;&gt;&#39;with 16 stored elements in Compressed Sparse Row format&gt;</code></pre><p>è¯è¢‹è¡¨ç¤ºä¿å­˜åœ¨ä¸€ä¸ª SciPy ç¨€ç–çŸ©é˜µä¸­ï¼Œè¿™ç§æ•°æ®æ ¼å¼åªä¿å­˜éé›¶å…ƒç´ ã€‚è¿™ä¸ªçŸ©é˜µçš„å½¢çŠ¶ä¸º 2Ã—13ï¼Œæ¯è¡Œå¯¹åº”äºä¸¤ä¸ªæ•°æ®ç‚¹ä¹‹ä¸€ï¼Œæ¯ä¸ªç‰¹å¾å¯¹åº”äºè¯è¡¨ä¸­çš„ä¸€ä¸ªå•è¯ã€‚è¦æƒ³æŸ¥çœ‹ç¨€ç–çŸ©é˜µçš„å®é™…å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨ toarray æ–¹æ³•å°†å…¶è½¬æ¢ä¸ºâ€œå¯†é›†çš„â€NumPy æ•°ç»„ï¼ˆä¿å­˜æ‰€æœ‰ 0 å…ƒç´ ï¼‰ï¼š</p><pre><code class="lang-python">print(&quot;Dense representation of bag_of_words:\n&#123;&#125;&quot;.format(    bag_of_words.toarray()))#---------------------#Dense representation of bag_of_words:[[0 0 1 1 1 0 1 0 0 1 1 0 1][1 1 0 1 0 1 0 1 1 1 0 1 1]]</code></pre><p>åˆ é™¤æ²¡æœ‰ä¿¡æ¯é‡çš„å•è¯ï¼Œé™¤äº†ä½¿ç”¨<code>min_df</code>å‚æ•°è®¾å®šè¯ä¾‹è‡³å°‘éœ€è¦åœ¨å¤šå°‘ä¸ªæ–‡æ¡£ä¸­å‡ºç°è¿‡ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡æ·»åŠ åœç”¨è¯çš„æ–¹æ³•ã€‚</p><h4 id="1-3-ç”¨tf-idfç¼–ç æ•°æ®"><a href="#1-3-ç”¨tf-idfç¼–ç æ•°æ®" class="headerlink" title="1.3 ç”¨tf-idfç¼–ç æ•°æ®"></a>1.3 ç”¨tf-idfç¼–ç æ•°æ®</h4><p>è¯é¢‘ - é€†å‘æ–‡æ¡£é¢‘ç‡ï¼ˆterm frequencyâ€“inverse document frequencyï¼Œtf-idfï¼‰æ–¹æ³•ï¼Œå¯¹åœ¨æŸä¸ªç‰¹å®šæ–‡æ¡£ä¸­ç»å¸¸å‡ºç°çš„æœ¯è¯­ç»™äºˆå¾ˆé«˜çš„æƒé‡ï¼Œä½†å¯¹åœ¨è¯­æ–™åº“çš„è®¸å¤šæ–‡æ¡£ä¸­éƒ½ç»å¸¸å‡ºç°çš„æœ¯è¯­ç»™äºˆçš„æƒé‡å´ä¸é«˜ã€‚</p><p>scikit-learn åœ¨ä¸¤ä¸ªç±»ä¸­å®ç°äº† tf-idf æ–¹æ³•ï¼šTfidfTransformer å’Œ TfidfVectorizerï¼Œå‰è€…æ¥å— CountVectorizer ç”Ÿæˆçš„ç¨€ç–çŸ©é˜µå¹¶å°†å…¶å˜æ¢ï¼Œåè€…æ¥å—æ–‡æœ¬æ•°æ®å¹¶å®Œæˆè¯è¢‹ç‰¹å¾æå–ä¸ tf-idf å˜æ¢ã€‚</p><p>å•è¯wåœ¨æ–‡æ¡£dä¸­çš„tf-idfåˆ†æ•°ä¸ºï¼š</p><script type="math/tex; mode=display">\operatorname{tfidf}(w, d)=\operatorname{tf} \log \left(\frac{N+1}{N_{w}+1}\right)+1</script><p>å¼ä¸­ï¼Œtfä¸ºè¯é¢‘ï¼ŒTerm Frequency, è¡¨ç¤ºä¸€ä¸ªè¯åœ¨ä¸€ä¸ªæ–‡æ¡£ä¸­çš„å‡ºç°é¢‘ç‡ã€‚è¯¥é¢‘ç‡æœ€åè¦é™¤ä»¥è¯¥æ–‡æ¡£çš„é•¿åº¦ï¼Œç”¨ä»¥å½’ä¸€åŒ–ã€‚</p><p>å¼ä¸­ï¼Œ$N$ä¸ºæ€»æ–‡æ¡£æ•°ï¼Œ$N_w$ä¸ºå¸¦æœ‰å•è¯$w$çš„æ–‡æ¡£æ•°ã€‚ç”±äºåˆ†å­æ¯”åˆ†æ¯å¤§ï¼Œæ‰€ä»¥è¯¥ $\log$ å€¼å¿…ä¸å¯èƒ½å°äºé›¶ã€‚</p><pre><code class="lang-python">from sklearn.feature_extraction.text import TfidfVectorizercorpus=[&quot;I come to China to travel&quot;,&quot;This is a car polupar in China&quot;,&quot;I love tea and Apple &quot;,&quot;The work is to write some papers in science&quot;]tfidf = TfidfVectorizer()vector = tfidf.fit_transform(corpus)print(vector)#---------------#(0, 16)    0.4424621378947393(0, 3)    0.348842231691988(0, 15)    0.697684463383976(0, 4)    0.4424621378947393(1, 5)    0.3574550433419527(1, 9)    0.45338639737285463(1, 2)    0.45338639737285463(1, 6)    0.3574550433419527(1, 14)    0.45338639737285463(1, 3)    0.3574550433419527(2, 1)    0.5(2, 0)    0.5(2, 12)    0.5(2, 7)    0.5(3, 10)    0.3565798233381452(3, 8)    0.3565798233381452(3, 11)    0.3565798233381452(3, 18)    0.3565798233381452(3, 17)    0.3565798233381452(3, 13)    0.3565798233381452(3, 5)    0.2811316284405006(3, 6)    0.2811316284405006(3, 15)    0.2811316284405006</code></pre><p>è¿”å›å€¼ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ(0, 16)ä»£è¡¨ç¬¬0ä¸ªæ–‡æ¡£ï¼Œç¬¬ä¸€ä¸ªå•è¯åœ¨å•è¯è¡¨ï¼ˆè¯è¢‹ï¼‰ä¸­çš„ä½ç½®æ˜¯ç¬¬16ä¸ªï¼Œè¯¥å•è¯çš„tf-idfå€¼ä¸º0.44246213ï¼›ç¬¬äºŒä¸ªå•è¯åœ¨è¯è¢‹ä¸­ç¬¬3ä¸ªä½ç½®â€¦â€¦</p><p>æ˜¾ç„¶è¿™æ˜¯ä¸ªç»è¿‡å‹ç¼©çš„ç³»æ•°çŸ©é˜µï¼Œæ¯ä¸€è¡Œçš„å…ƒç»„è¡¨æ˜è¯¥å…ƒç´ åœ¨ç¨€ç–çŸ©é˜µä¸­çš„ä½ç½®ï¼Œå…¶å€¼ä¸ºå³è¾¹çš„tf-idfå€¼ï¼Œä»£è¡¨ä¸€ä¸ªå•è¯ã€‚å¯ä»¥é€šè¿‡<code>.toarray()</code>æ–¹æ³•ä»¤å…¶æ¢å¤åˆ°ç³»æ•°çŸ©é˜µçŠ¶æ€ã€‚</p><pre><code class="lang-python">print(vector.toarray().shape)print(len(vector.toarray()))print(type(vector.toarray()))print(vector.toarray())#-----------------------------#(4, 19)4&lt;class &#39;numpy.ndarray&#39;&gt;[[0. 0. 0. 0.34884223 0.44246214 0.  0. 0. 0. 0. 0. 0.  0. 0. 0. 0.69768446 0.44246214 0.  0. ] [0. 0. 0.4533864  0.35745504 0. 0.35745504  0.35745504 0. 0. 0.4533864  0. 0.  0. 0. 0.4533864  0. 0. 0.  0. ] [0.5 0.5 0. 0. 0. 0.  0. 0.5 0. 0. 0. 0.  0.5 0. 0. 0. 0. 0.  0. ] [0. 0. 0. 0. 0. 0.28113163  0.28113163 0. 0.35657982 0. 0.35657982 0.35657982  0. 0.35657982 0. 0.28113163 0. 0.35657982  0.35657982]]</code></pre><h4 id="1-4-Hashç¼–ç "><a href="#1-4-Hashç¼–ç " class="headerlink" title="1.4 Hashç¼–ç "></a>1.4 Hashç¼–ç </h4><p>æ— è®ºé‡‡ç”¨ä»€ä¹ˆç¼–ç ï¼Œåªè¦ä»¤æ¯ä¸ªç‰¹å¾èƒ½å¤Ÿç‹¬ä¸€æ— äºŒåœ°è¡¨ç¤ºå³å¯ã€‚å¯é‡‡ç”¨Hashæ€æƒ³ã€‚</p><p>å¯¹äºç±»åˆ«æ•°é‡å¾ˆå¤šçš„åˆ†ç±»å˜é‡ï¼Œåˆ©ç”¨å“ˆå¸Œå‡½æ•°å°†ä¸€ä¸ªæ•°æ®ç‚¹è½¬æ¢æˆä¸€ä¸ªå‘é‡ã€‚ç›¸æ¯”è¾ƒOne-Hotæ¨¡å‹ï¼Œå“ˆå¸Œç¼–ç ç»´åº¦ä¸‹é™äº†å¾ˆå¤šã€‚</p><p>è‹¥é‡‡ç”¨å“ˆå¸Œå‡½æ•°</p><pre><code>h(the) mod 5 = 0h(quick) mod 5 = 1h(brown) mod 5 = 1h(fox) mod 5 = 3</code></pre><p>åˆ™å¯¹äºæŸå¥è¯ï¼š<br><code>the quick brown fox</code><br>æ¥è¯´ï¼Œå…¶ä½¿ç”¨å“ˆå¸Œç‰¹è½¬æ¢çš„å‘é‡å°±æ˜¯ï¼š<br><code>(1,2,0,1,0)</code><br>å¯¹æ¯”one-hotç¼–ç å‘é‡ï¼ˆåœ¨å•è¯è¡¨é‡Œå°±è¿™å››ä¸ªå•è¯çš„æƒ…å†µä¸‹ï¼‰ï¼š<br><code>(0001,0010,0100,1000)</code></p><p>åœ¨å®è·µä¸­ï¼Œå“ˆå¸Œç¼–ç é€šè¿‡è°ƒç”¨sklearnçš„HashingVectorizerå®ç°ã€‚</p><p>å…³äºæ•°æ®çš„ç¼–ç åŠå…¶ä»–ç‰¹å¾å·¥ç¨‹ï¼Œè¯·çœ‹<a href="https://superlova.github.io/2020/07/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B/#%E4%B8%80%E3%80%81%E7%B1%BB%E5%88%AB%E7%89%B9%E5%BE%81">è¿™é‡Œ</a>ã€‚</p><h3 id="2-è¯„åˆ†æ ‡å‡†"><a href="#2-è¯„åˆ†æ ‡å‡†" class="headerlink" title="2. è¯„åˆ†æ ‡å‡†"></a>2. è¯„åˆ†æ ‡å‡†</h3><p>åˆ†ç±»æ¨¡å‹çš„è¯„åˆ†æ ‡å‡†éå¸¸ä¸°å¯Œï¼Œé€šç”¨è¯„ä»·æŒ‡æ ‡æœ‰ç²¾åº¦å’Œé”™è¯¯ç‡</p><script type="math/tex; mode=display">\operatorname{accuracy}=\frac{T P+T N}{N}, \text { Error Rate }=\frac{F P+F N}{N}</script><p>å…¶ä¸­Næ˜¯æ ·æœ¬æ€»æ•°ï¼ŒTPã€FPã€TNã€FNçš„å«ä¹‰å¦‚ä¸‹è¡¨</p><p><img src="/2020/07/21/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8NLP%E4%B9%8B%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E8%B5%9B%E9%A2%98%E7%90%86%E8%A7%A3/table.png" alt></p><p>é™¤æ­¤ä¹‹å¤–ï¼Œå‡†ç¡®ç‡ã€å¬å›ç‡ã€F1å€¼ä¹Ÿæ˜¯å¸¸ç”¨çš„è¯„ä»·æŒ‡æ ‡ã€‚</p><p><img src="/2020/07/21/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8NLP%E4%B9%8B%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E8%B5%9B%E9%A2%98%E7%90%86%E8%A7%A3/metrics.png" alt></p><p>P-Ræ›²çº¿å³å¬å›ç‡Rä¸ºæ¨ªè½´ã€ç²¾ç¡®ç‡Pä¸ºçºµè½´ç”»çš„æ›²çº¿ã€‚åˆ†ç±»å™¨çš„P-Ræ›²çº¿ä¸‹é¢ç§¯è¶Šå¤§ï¼Œè¡¨æ˜åˆ†ç±»æ€§èƒ½è¶Šå¥½ã€‚</p><p>ROCæ›²çº¿åˆ†æçš„æ˜¯äºŒå…ƒåˆ†ç±»æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯è¾“å‡ºç»“æœåªæœ‰ä¸¤ç§ç±»åˆ«çš„æ¨¡å‹ã€‚ROCä»¥ä¼ªé˜³æ€§ç‡ï¼ˆFPRï¼‰ä¸º X è½´ï¼Œä»¥çœŸé˜³æ€§ç‡ï¼ˆTPRï¼‰ä¸º Y è½´ç»˜åˆ¶æ›²çº¿ã€‚AUCï¼ˆArea Under Curveï¼‰è¢«å®šä¹‰ä¸ºROCæ›²çº¿ä¸‹ä¸åæ ‡è½´å›´æˆçš„é¢ç§¯ï¼Œå®Œç¾åˆ†ç±»å™¨çš„AUC=1ã€‚</p><p><img src="/2020/07/21/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8NLP%E4%B9%8B%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E8%B5%9B%E9%A2%98%E7%90%86%E8%A7%A3/metrics2.png" alt></p><h3 id="3-å®éªŒç¯å¢ƒ"><a href="#3-å®éªŒç¯å¢ƒ" class="headerlink" title="3. å®éªŒç¯å¢ƒ"></a>3. å®éªŒç¯å¢ƒ</h3><p>ä½ è¿˜ä¸çŸ¥é“Colabå—ï¼Ÿæˆ‘ä¸å…è®¸æœ‰äººä¸çŸ¥é“è¿™ä¹ˆå¥½çš„ä¸œè¥¿ï¼Colabæ˜¯ä¸€æ¬¾åœ¨çº¿Pythonç¼–ç¨‹å·¥å…·ã€‚ä½¿ç”¨Colabï¼Œè®©ä½ å†ä¹Ÿä¸ç”¨ä¸‹è½½å’Œå®‰è£…Anacondaï¼Œå†ä¹Ÿä¸ç”¨çº ç»“æ˜¾å¡é©±åŠ¨ï¼æœ‰äº†å®ƒå°±å¯ä»¥ç™½å«–Googleçš„GPUæœåŠ¡å™¨å•¦ï¼(<a href="https://colab.research.google.com/">https://colab.research.google.com/</a>)</p><p>Colabæ·±åº¦å­¦ä¹ ä¹ä¸ç‚¼ä¸¹å¸ˆçš„æœ€çˆ±ï¼ä½†æ˜¯æƒ³è¯´çˆ±ä½ ä¸å®¹æ˜“ï¼Œå„ç§æ‰çº¿ã€å†…å­˜ä¸è¶³ï¼Œå¿ƒé…¸â€¦â€¦æœ‰é’±è¿˜æ˜¯ä¹°å¸¦æ˜¾å¡çš„æœåŠ¡å™¨å§ï¼</p><p>å…³äºå¦‚ä½•ä½¿ç”¨Colabï¼Œå¯ä»¥å‚è€ƒçŸ¥ä¹çš„<a href="https://zhuanlan.zhihu.com/p/35063343">è¿™ç¯‡æ–‡ç« </a>ã€‚</p><p>ï¼ˆå…¶å®ä½¿ç”¨Colabæœ€å¤§çš„éšœç¢æ˜¯ï¼Œä½ å¾—æœ‰ä¸ªç¨³å®šçš„VPNâ€¦â€¦ï¼‰</p><h3 id="4-è§£é¢˜æ€è·¯"><a href="#4-è§£é¢˜æ€è·¯" class="headerlink" title="4. è§£é¢˜æ€è·¯"></a>4. è§£é¢˜æ€è·¯</h3><p>æ–‡æœ¬åˆ†ç±»é—®é¢˜å˜›ï¼Œç›¸æ¯”å¤§å®¶éƒ½ç”¨LSTMåˆ†ç±»è¿‡IMDbå½±è¯„ï¼Œç›¸å½“äºHello Worldä¹‹äºç¨‹åºå‘˜äº†ã€‚ç”¨LSTMåˆ†ç±»IMDbå½±è¯„çš„ç¬”è®°æˆ‘éƒ½å†™å¥½äº†ï¼š<a href="https://superlova.github.io/2020/06/03/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E4%BD%BF%E7%94%A8LSTM%E8%AE%AD%E7%BB%83imdb%E6%83%85%E6%84%9F%E5%88%86%E7%B1%BB%E6%A8%A1%E5%9E%8B/">è¿™é‡Œ</a>ã€‚<a href="https://www.tensorflow.org/tutorials/text/text_classification_rnn?hl=zh-cn">Tensorflowçš„å®˜æ–¹æ•™ç¨‹</a>ä¹Ÿæœ‰ç”¨LSTMåˆ†ç±»IMDbå½±è¯„çš„Notebookã€‚</p><p>å› æ­¤ä½¿ç”¨LSTMçš„æ–¹æ³•å¯ä»¥ä½œä¸ºBaselineã€‚</p><h3 id="5-å°è¯•ç‰›åˆ€"><a href="#5-å°è¯•ç‰›åˆ€" class="headerlink" title="5. å°è¯•ç‰›åˆ€"></a>5. å°è¯•ç‰›åˆ€</h3><p><img src="/2020/07/21/%E3%80%90%E7%AB%9E%E8%B5%9B%E6%89%93%E5%8D%A1%E3%80%91%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8NLP%E4%B9%8B%E6%96%B0%E9%97%BB%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%B9%8B%E8%B5%9B%E9%A2%98%E7%90%86%E8%A7%A3/score.png" alt></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Feature Engineering</tag>
      
      <tag>Data Science</tag>
      
      <tag>Datawhale</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘ç‰¹å¾å·¥ç¨‹</title>
    <link href="/2020/07/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B/"/>
    <url>/2020/07/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ç¿»è¯‘è‡ªHJ van Veençš„Feature Engineeringä¸€æ–‡ï¼Œæ€»ç»“äº†æ•°æ®ç«èµ›ä¸­å¸¸ç”¨çš„ç‰¹å¾å·¥ç¨‹æ–¹æ³•ã€‚<br><!--more---></p><h1 id="ç‰¹å¾å·¥ç¨‹"><a href="#ç‰¹å¾å·¥ç¨‹" class="headerlink" title="ç‰¹å¾å·¥ç¨‹"></a>ç‰¹å¾å·¥ç¨‹</h1><p>æœ¬æ–‡ç¿»è¯‘è‡ªHJ van Veençš„Feature Engineeringä¸€æ–‡ã€‚ç”±äºåŸæ–‡ä»¥PPTæ–¹å¼å‘ˆç°ï¼Œä¿¡æ¯é«˜åº¦å‹ç¼©ï¼Œå› æ­¤åœ¨æˆ‘æ•´ç†æœ¬æ–‡è¿‡ç¨‹ä¸­ï¼Œæ·»åŠ äº†è‡ªå·±çš„ç†è§£ã€‚å¦‚æœ‰é”™è¯¯ï¼Œæ•¬è¯·æŒ‡æ­£ï¼</p><p><img src="/2020/07/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B/title.png" alt></p><p><strong>å…¨æ–‡æ¦‚è§ˆï¼š</strong></p><p><img src="/2020/07/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B/ç‰¹å¾å·¥ç¨‹.png" alt></p><p>æœºå™¨å­¦ä¹ çš„ç‰¹å¾å·¥ç¨‹æ˜¯å°†åŸå§‹çš„è¾“å…¥æ•°æ®è½¬æ¢æˆç‰¹å¾ï¼Œä»¥ä¾¿äºæ›´å¥½çš„è¡¨ç¤ºæ½œåœ¨çš„é—®é¢˜ã€æé«˜é¢„æµ‹æ¨¡å‹å‡†ç¡®æ€§çš„è¿‡ç¨‹ã€‚</p><p>ç‰¹å¾å·¥ç¨‹æ˜¯æ•°æ®ç§‘å­¦ä¸­æœ€å…·åˆ›é€ æ€§çš„éƒ¨åˆ†ï¼Œå†³å®šäº†æœºå™¨å­¦ä¹ æ¨¡å‹çš„æ€§èƒ½ä¸Šé™ã€‚</p><p>å³ä¾¿æ˜¯å·ç§°ç«¯åˆ°ç«¯çš„ç¥ç»ç½‘ç»œä¹Ÿéœ€è¦ç‰¹å¾å·¥ç¨‹ï¼Œæ¯”å¦‚cvéœ€è¦è·å¾—HOGï¼ŒSIFTï¼Œwhitening, perturbation, image pyramids, rotation, z-scaling, log-scaling, frame-grams, external semantic dataç­‰ä¿¡æ¯ã€‚</p><p>æœºå™¨å­¦ä¹ çš„è¾“å…¥ç‰¹å¾åŒ…æ‹¬å‡ ç§ï¼š</p><ul><li>ç±»åˆ«ç‰¹å¾ï¼šå¦‚IDã€æ€§åˆ«ç­‰ï¼Œå€¼çš„å¤§å°æ— æ„ä¹‰ã€‚</li><li>æ•°å€¼ç‰¹å¾ï¼šåŒ…æ‹¬æ•´å‹ã€æµ®ç‚¹å‹ç­‰ï¼Œå€¼çš„å¤§å°æœ‰æ„ä¹‰ã€‚</li><li>æ—¶é—´ç‰¹å¾ï¼šå¦‚æœˆä»½ã€å¹´ä»½ã€å­£åº¦ã€æ—¥æœŸã€å°æ—¶ç­‰ã€‚</li><li>ç©ºé—´ç‰¹å¾ï¼šç»çº¬åº¦ç­‰ï¼Œå¯ä»¥è½¬æ¢æˆé‚®ç¼–ï¼ŒåŸå¸‚ç­‰ã€‚</li><li>æ–‡æœ¬ç‰¹å¾ï¼šæ–‡æ¡£ï¼Œè‡ªç„¶è¯­è¨€ï¼Œç¨‹åºè¯­å¥ç­‰ã€‚</li></ul><h2 id="ä¸€ã€ç±»åˆ«ç‰¹å¾"><a href="#ä¸€ã€ç±»åˆ«ç‰¹å¾" class="headerlink" title="ä¸€ã€ç±»åˆ«ç‰¹å¾"></a>ä¸€ã€ç±»åˆ«ç‰¹å¾</h2><p>åˆ†ç±»ç‰¹å¾çš„ç‰¹ç‚¹æ˜¯å‡ ä¹æ€»æ˜¯éœ€è¦å¤„ç†åæ‰èƒ½è¾“å…¥ç®—æ³•ã€‚</p><p>ç±»åˆ«ç‰¹å¾éš¾ä»¥ä¼°ç®—ç¼ºå¤±æ•°æ®ï¼Œç±»åˆ«å¤ªå¤šï¼ˆæ•°æ®ç»´åº¦é«˜ï¼‰ä¼šå¯¼è‡´æ•°æ®ç¨€ç–ï¼Œå› æ­¤ç±»åˆ«ç‰¹å¾æ˜¯ç‰¹å¾å·¥ç¨‹çš„é‡ç‚¹ã€‚</p><h3 id="One-Hotç¼–ç "><a href="#One-Hotç¼–ç " class="headerlink" title="One-Hotç¼–ç "></a>One-Hotç¼–ç </h3><p>å°†æ¯ä¸ªç‰¹å¾ç¼–ç æˆé•¿åº¦ä¸ºKçš„å‘é‡ï¼Œæ¯ä¸ªå‘é‡åªæœ‰ä¸€ä¸ªç»´åº¦å€¼ä¸º1ï¼Œå…¶ä»–å€¼ä¸º0ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ç®€å•æ˜“å®ç°ï¼Œä¸”æ•°æ®æ ·æœ¬çš„é•¿åº¦ä¹Ÿå½’ä¸€åŒ–äº†ã€‚</p><p>æ¯”å¦‚åˆ†ç±»ç‰¹å¾{é»„ï¼Œç»¿ï¼Œè“}å¯ä»¥ç¼–ç æˆ{001,010,100}ï¼›{ç”·ï¼Œå¥³}=&gt;{01,10}ï¼›{1,2,3,4,5,6,7,8,9}=&gt;{000000001,â€¦,100000000}</p><p><strong>é€šå¸¸ä¸¢å¼ƒç¬¬ä¸€åˆ—ä»¥é¿å…çº¿æ€§ç›¸å…³ã€‚</strong></p><p>æ¯”å¦‚Pandasä¸­ï¼Œ<code>get_dummies</code>å‡½æ•°æœ‰ä¸€ä¸ªå‚æ•°ä¸º<code>drop_first</code>ï¼Œå¦‚æœä¸ºTrueå°±ä¸¢å¼ƒOne-Hotç¼–ç åæ•°æ®çš„ç¬¬ä¸€åˆ—ï¼Œå› ä¸ºä¸¢å¼ƒçš„ä¸€åˆ—å¯ä»¥é€šè¿‡å…¶ä»–å‰©ä½™çš„k-1åˆ—è®¡ç®—å¾—åˆ°ï¼Œè¿™ä¸€åˆ—ä¹Ÿå°±å˜æˆäº†é‡å¤æ•°æ®ã€‚</p><p>ç¼ºé™·ï¼šå®¹æ˜“é€ æˆæ•°æ®ç¨€ç–ï¼Œä¸”ç°æœ‰çš„One-Hotç¼–ç å®ç°æ–¹å¼ï¼Œè¾ƒéš¾åº”å¯¹ç¼ºå¤±æ•°æ®å’Œæ²¡å‡ºç°è¿‡çš„å˜é‡ã€‚</p><p>å¯¹äºç±»åˆ«ä¸å¤šçš„åˆ†ç±»å˜é‡ï¼Œå¯ä»¥é‡‡ç”¨ç‹¬çƒ­ç¼–ç ã€‚ä½†å…¶å®è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ä¸­ä¹Ÿå¹¿æ³›ä½¿ç”¨äº†One-Hotç¼–ç ã€‚è¦çŸ¥é“è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡çš„è¯å…¸å¤§å°åŠ¨è¾„ä¸Šä¸‡ï¼Œé‚£ä¹ˆä¸€ä¸ªå•è¯çš„One-Hotå‘é‡é•¿åº¦ä¹Ÿä¸Šä¸‡ï¼Œä¸€ç¯‡æ–‡æ¡£è½¬åŒ–æˆOne-HotçŸ©é˜µï¼Œè¿™ä¸ªæ•°æ®é‡å°±éå¸¸å¯è§‚äº†ã€‚</p><h3 id="Hashç¼–ç "><a href="#Hashç¼–ç " class="headerlink" title="Hashç¼–ç "></a>Hashç¼–ç </h3><p>æ— è®ºé‡‡ç”¨ä»€ä¹ˆç¼–ç ï¼Œåªè¦ä»¤æ¯ä¸ªç‰¹å¾èƒ½å¤Ÿç‹¬ä¸€æ— äºŒåœ°è¡¨ç¤ºå³å¯ã€‚å¯é‡‡ç”¨Hashæ€æƒ³ã€‚</p><p>å¯¹äºç±»åˆ«æ•°é‡å¾ˆå¤šçš„åˆ†ç±»å˜é‡ï¼Œåˆ©ç”¨å“ˆå¸Œå‡½æ•°å°†ä¸€ä¸ªæ•°æ®ç‚¹è½¬æ¢æˆä¸€ä¸ªå‘é‡ã€‚ç›¸æ¯”è¾ƒOne-Hotæ¨¡å‹ï¼Œå“ˆå¸Œç¼–ç ç»´åº¦ä¸‹é™äº†å¾ˆå¤šã€‚</p><p>è‹¥é‡‡ç”¨å“ˆå¸Œå‡½æ•°</p><pre><code>h(the) mod 5 = 0h(quick) mod 5 = 1h(brown) mod 5 = 1h(fox) mod 5 = 3</code></pre><p>åˆ™å¯¹äºæŸå¥è¯ï¼š<br><code>the quick brown fox</code><br>æ¥è¯´ï¼Œå…¶ä½¿ç”¨å“ˆå¸Œç‰¹è½¬æ¢çš„å‘é‡å°±æ˜¯ï¼š<br><code>(1,2,0,1,0)</code><br>å¯¹æ¯”one-hotç¼–ç å‘é‡ï¼ˆåœ¨å•è¯è¡¨é‡Œå°±è¿™å››ä¸ªå•è¯çš„æƒ…å†µä¸‹ï¼‰ï¼š<br><code>(0001,0010,0100,1000)</code></p><p>å“ˆå¸Œè¡¨æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š</p><ul><li>ç›¸åŒçš„è¾“å…¥å¯èƒ½æœ‰ç›¸åŒçš„è¾“å‡ºï¼ˆä¸€èˆ¬æƒ…å†µä¸‹æ¯”ä¾‹ä¸é«˜ï¼‰</li><li>ä¸åŒçš„è¾“å‡ºä¸€å®šå¯¹åº”ä¸åŒçš„è¾“å…¥</li><li>æ­£å‘è®¡ç®—å¾ˆç®€å•ï¼Œåå‘è®¡ç®—å¾ˆå›°éš¾</li><li>æ ¹æ®è¾“å…¥æŸ¥æ‰¾è¾“å‡ºæ•ˆç‡å¾ˆé«˜</li></ul><p>æœ¬éƒ¨åˆ†å‚è€ƒè‡ª <a href="https://www.datalearner.com/blog/1051537932880901">https://www.datalearner.com/blog/1051537932880901</a></p><h3 id="æ ‡ç­¾ç¼–ç "><a href="#æ ‡ç­¾ç¼–ç " class="headerlink" title="æ ‡ç­¾ç¼–ç "></a>æ ‡ç­¾ç¼–ç </h3><p>ç»™äºˆæ¯ä¸ªç±»åˆ«å˜é‡ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„æ•°å­—IDã€‚</p><p>å‡å¦‚æœ‰ä¸‰ç§é¢œè‰²ç‰¹å¾ï¼šçº¢ã€é»„ã€è“ï¼Œé‚£ä¹ˆä½ å¯èƒ½æƒ³ä»¤çº¢=1ï¼Œé»„=2ï¼Œè“=3ï¼Œè¿™å°±æ˜¯æ ‡ç­¾ç¼–ç ã€‚</p><p>è¿™ç§ç¼–ç å¯¹äºæ ‘ç®—æ³•ç­‰éçº¿æ€§ç®—æ³•æ¯”è¾ƒæœ‰ç”¨ï¼Œå¥½å¤„æ˜¯ä¸ä¼šå‡ç»´ï¼Œåå¤„æ˜¯ä¼šè®©æœºå™¨å­¦ä¹ ç®—æ³•è¯¯ä»¥ä¸ºé¢œè‰²å­˜åœ¨æ•°å€¼å¤§å°å…³ç³»ã€‚</p><h3 id="è®¡æ•°ç¼–ç "><a href="#è®¡æ•°ç¼–ç " class="headerlink" title="è®¡æ•°ç¼–ç "></a>è®¡æ•°ç¼–ç </h3><p>å°†æ¯ä¸ªç±»åˆ«çš„ç¼–ç å®šä¹‰ä¸ºå…¶åœ¨æ•°æ®é›†ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚æ¯”å¦‚åœ¨æ•°æ®é›†ä¸­â€™çº¢â€™å‡ºç°äº†300æ¬¡ï¼Œé‚£ä¹ˆâ€™çº¢â€™çš„ç¼–ç å°±æ˜¯300ã€‚</p><p><code>df.groupby([&#39;category&#39;])[&#39;target&#39;].transform(sum)</code><br>è¿™ç§åšæ³•å¾ˆå¸¸è§ï¼Œä¹Ÿå¾ˆç®€å•ã€‚ç¼ºç‚¹æ˜¯å¯¹å¼‚å¸¸å€¼æ•æ„Ÿï¼Œä¸”ä¸åŒç±»åˆ«å‡ºç°æ¬¡æ•°ç›¸åŒæ—¶å¯èƒ½å¼•å…¥å†²çªã€‚</p><h3 id="è®¡æ•°æ’åºç¼–ç "><a href="#è®¡æ•°æ’åºç¼–ç " class="headerlink" title="è®¡æ•°æ’åºç¼–ç "></a>è®¡æ•°æ’åºç¼–ç </h3><p>æ ¹æ®ç±»åˆ«å˜é‡åœ¨è®­ç»ƒé›†ä¸­å‡ºç°çš„æ¬¡æ•°<strong>æ’åº</strong></p><p>å¯¹å¼‚å¸¸å€¼ä¸æ•æ„Ÿï¼Œä¸ä¼šå¼•å…¥å†²çªã€‚åœ¨å®é™…æ¯”èµ›ä¸­æ•ˆæœå¯èƒ½å‡ºä¹æ„æ–™çš„å¥½ã€‚</p><h3 id="Targetç¼–ç "><a href="#Targetç¼–ç " class="headerlink" title="Targetç¼–ç "></a>Targetç¼–ç </h3><p>å°†ç±»åˆ«å˜é‡ç¼–ç ä¸ºåˆ†ç±»ä¸ºæ­£çš„æ¯”ä¾‹ï¼Œç±»ä¼¼äºè¯¥ç±»åˆ«å¯¹æ­£ç±»çš„è´¡çŒ®æŒ‡æ•°ã€‚</p><p>æ¯”å¦‚èŒä¸šç±»åˆ«ç‰¹å¾{â€˜managerâ€™,â€™engineerâ€™,â€™scientistâ€™}åœ¨æ•°æ®é›†ä¸­ï¼Œä½†å‡¡scientistéƒ½ä½¿å¾—target=1ï¼Œé‚£ä¹ˆscientistå°±ç¼–ç æˆ1.00ã€‚</p><p><img src="/2020/07/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B/2020-07-20-11-20-25.png" alt></p><h3 id="ç±»åˆ«åµŒå…¥"><a href="#ç±»åˆ«åµŒå…¥" class="headerlink" title="ç±»åˆ«åµŒå…¥"></a>ç±»åˆ«åµŒå…¥</h3><p>ç”±ç¥ç»ç½‘ç»œå¾—åˆ°æ¯ä¸ªç±»åˆ«çš„åµŒå…¥è¡¨è¾¾ï¼Œå°†ç‰¹å¾æŠ•å½±åˆ°æ›´é«˜ç»´åº¦çš„ç©ºé—´ã€‚åœ¨è¿›è¡Œæ–‡æ¡£åˆ†ç±»ç­‰ï¼ŒåŸæœ¬å…·æœ‰è¯­ä¹‰ç›¸ä¼¼æ€§çš„å•è¯æ˜ å°„ä¹‹åçš„å‘é‡ä¹‹é—´çš„è·ç¦»ä¹Ÿæ¯”è¾ƒå°ï¼Œè¿›è€Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿›ä¸€æ­¥è¿›è¡Œæœºå™¨å­¦ä¹ çš„åº”ç”¨ï¼Œè¿™ä¸€ç‚¹æ¯”ç‹¬çƒ­æ¨¡å‹å¥½å¾ˆå¤šã€‚</p><p>å‚è€ƒ <a href="https://arxiv.org/abs/1604.06737">https://arxiv.org/abs/1604.06737</a></p><p><img src="/2020/07/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B/2020-07-20-11-21-54.png" alt></p><h3 id="æŠŠNanä¹Ÿå½“ä½œä¸€ä¸ªç±»åˆ«"><a href="#æŠŠNanä¹Ÿå½“ä½œä¸€ä¸ªç±»åˆ«" class="headerlink" title="æŠŠNanä¹Ÿå½“ä½œä¸€ä¸ªç±»åˆ«"></a>æŠŠNanä¹Ÿå½“ä½œä¸€ä¸ªç±»åˆ«</h3><p>åªåœ¨Nanç¡®å®šæœ‰æ„ä¹‰æ—¶ä½¿ç”¨ã€‚</p><h3 id="å¤šå…ƒç¼–ç "><a href="#å¤šå…ƒç¼–ç " class="headerlink" title="å¤šå…ƒç¼–ç "></a>å¤šå…ƒç¼–ç </h3><p>å°†ä¸¤ä¸ªäºŒå…ƒåˆ†ç±»å˜é‡ç»„åˆï¼Œå½¢æˆå››å…ƒå‘é‡è¡¨ç¤º</p><p><img src="/2020/07/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B/2020-07-19-14-09-28.png" alt></p><h3 id="æ‰©å¼ ç¼–ç "><a href="#æ‰©å¼ ç¼–ç " class="headerlink" title="æ‰©å¼ ç¼–ç "></a>æ‰©å¼ ç¼–ç </h3><p>å°†ä¸€ä¸ªFeatureæ‹†åˆ†æˆå¤šä¸ªFeature</p><h3 id="åˆå¹¶ç¼–ç "><a href="#åˆå¹¶ç¼–ç " class="headerlink" title="åˆå¹¶ç¼–ç "></a>åˆå¹¶ç¼–ç </h3><p>å°†å¤šä¸ªFeatureåˆå¹¶æˆä¸€ä¸ªFeature</p><h2 id="äºŒã€æ•°å€¼ç‰¹å¾"><a href="#äºŒã€æ•°å€¼ç‰¹å¾" class="headerlink" title="äºŒã€æ•°å€¼ç‰¹å¾"></a>äºŒã€æ•°å€¼ç‰¹å¾</h2><h3 id="èˆå…¥"><a href="#èˆå…¥" class="headerlink" title="èˆå…¥"></a>èˆå…¥</h3><p>è¿‡é«˜çš„ç²¾åº¦æœ‰æ—¶æ˜¯å™ªéŸ³ã€‚</p><p>èˆå…¥åçš„æ•°æ®å¯ä»¥è¢«å½“ä½œæ˜¯ç±»åˆ«å˜é‡ã€‚</p><p>èˆå…¥å‰å¯ä»¥logä¸€ä¸‹ï¼Œlogè½¬æ¢å¯ä»¥å°†èŒƒå›´å¾ˆå¤§çš„å€¼ç¼©å°åœ¨ä¸€å®šèŒƒå›´å†…ï¼Œè¿™å¯¹æŸäº›å¼‚å¸¸å€¼çš„å¤„ç†ä¹Ÿå¾ˆæœ‰æ•ˆã€‚</p><p><img src="http://www.datalearner.com/resources/blog_images/6a4db741-d9bb-4391-8d24-7214ecd07b3b.jpg" alt></p><h3 id="æŒ‰æ•°å€¼å¤§å°åˆ†ç®±ï¼ˆBinningï¼‰"><a href="#æŒ‰æ•°å€¼å¤§å°åˆ†ç®±ï¼ˆBinningï¼‰" class="headerlink" title="æŒ‰æ•°å€¼å¤§å°åˆ†ç®±ï¼ˆBinningï¼‰"></a>æŒ‰æ•°å€¼å¤§å°åˆ†ç®±ï¼ˆBinningï¼‰</h3><p>æ•°æ®åˆ†ç®±æ˜¯ä¸€ç§å°†å¤šä¸ªæˆ–å¤šæˆ–å°‘è¿ç»­å€¼åˆ†ç»„ä¸ºè¾ƒå°‘æ•°é‡çš„â€œç®±(bin)â€çš„æ–¹æ³•ã€‚é€šè¿‡åˆ†ç®±ï¼Œæ•°å€¼ç‰¹å¾è½¬æ¢æˆç±»åˆ«ç‰¹å¾äº†ã€‚</p><p>ä¾‹å¦‚ä¸€å¤©24å°æ—¶å¯ä»¥åˆ†æˆæ—©æ™¨[5,8)ï¼Œä¸Šåˆ[8,11)ï¼Œä¸­åˆ[11,14)ï¼Œä¸‹åˆ[14,19)ï¼Œå¤œæ™š[10,22)ï¼Œæ·±å¤œ[19,24)å’Œ[24,5)ã€‚å› ä¸ºæ¯”å¦‚ä¸­åˆ11ç‚¹å’Œ12ç‚¹å…¶å®æ²¡æœ‰å¾ˆå¤§åŒºåˆ«ï¼Œå¯ä»¥ä½¿ç”¨åˆ†ç®±æŠ€å·§å¤„ç†ä¹‹åå¯ä»¥å‡å°‘è¿™äº›â€œè¯¯å·®â€ã€‚</p><h3 id="ç‰¹å¾ç¼©æ”¾ï¼ˆScalingï¼‰"><a href="#ç‰¹å¾ç¼©æ”¾ï¼ˆScalingï¼‰" class="headerlink" title="ç‰¹å¾ç¼©æ”¾ï¼ˆScalingï¼‰"></a>ç‰¹å¾ç¼©æ”¾ï¼ˆScalingï¼‰</h3><p>ä¹Ÿç§°ä¸ºæ•°æ®æ ‡å‡†åŒ–ã€‚å¯ä»¥å°†å¾ˆå¤§èŒƒå›´çš„æ•°æ®é™å®šåœ¨æŒ‡å®šèŒƒå›´å†…ã€‚ç”±äºåŸå§‹æ•°æ®çš„å€¼èŒƒå›´å˜åŒ–å¾ˆå¤§ï¼Œåœ¨ä¸€äº›æœºå™¨å­¦ä¹ ç®—æ³•ä¸­ï¼Œå¦‚æœæ²¡æœ‰æ ‡å‡†åŒ–ï¼Œç›®æ ‡å‡½æ•°å°†æ— æ³•æ­£å¸¸å·¥ä½œã€‚</p><p>ç‰¹å¾ç¼©æ”¾æ–¹æ³•ä¸»è¦æœ‰ï¼š</p><ul><li>è½¬ä¸ºæ ‡å‡†æ­£æ€</li><li>æœ€å¤§æœ€å°ç¼©æ”¾</li><li>å¯¹æ•°ç¼©æ”¾</li><li>å¼€æ–¹ç¼©æ”¾ root scale</li></ul><h3 id="ä¼°ç®—ç¼ºå¤±æ•°æ®ï¼ˆImputationï¼‰"><a href="#ä¼°ç®—ç¼ºå¤±æ•°æ®ï¼ˆImputationï¼‰" class="headerlink" title="ä¼°ç®—ç¼ºå¤±æ•°æ®ï¼ˆImputationï¼‰"></a>ä¼°ç®—ç¼ºå¤±æ•°æ®ï¼ˆImputationï¼‰</h3><p>ç”±äºå„ç§åŸå› ï¼Œè®¸å¤šçœŸå®ä¸–ç•Œçš„æ•°æ®é›†åŒ…å«ç¼ºå¤±çš„å€¼ï¼Œé€šå¸¸ç¼–ç ä¸ºç©ºç™½ã€NANæˆ–å…¶ä»–å ä½ç¬¦ã€‚ç®€å•åˆ é™¤è¯¥æ¡æ•°æ®é¡¹å°±å¤ªå¯æƒœäº†ï¼Œä¸€ä¸ªæ›´å¥½çš„ç­–ç•¥æ˜¯ä¼°ç®—ç¼ºå¤±çš„å€¼ï¼Œ å³ä»æ•°æ®çš„å·²çŸ¥éƒ¨åˆ†æ¨æ–­å®ƒä»¬ã€‚</p><p>ç¼ºå¤±çš„å€¼å¯ä»¥ç”¨æä¾›çš„å¸¸é‡å€¼æ¥è®¡ç®—ï¼Œæˆ–ä½¿ç”¨ç¼ºå¤±å€¼æ‰€åœ¨çš„æ¯ä¸€åˆ—çš„ç»Ÿè®¡æ•°æ®(å¹³å‡å€¼ä¸å¦‚ä¸­ä½æ•°é²æ£’)ã€‚å¤„ç†ç¼ºå¤±æ•°æ®çš„æ–¹æ³•è¿˜æœ‰å¾ˆå¤šã€‚</p><p>sklearnçš„SimpleImputerç±»å°±æ˜¯ç”¨æ¥ä¼°ç®—ç¼ºå¤±å€¼çš„ã€‚<br><a href="https://www.studyai.cn/modules/impute.html">https://www.studyai.cn/modules/impute.html</a></p><h3 id="ç‰¹å¾äº¤å‰-feature-interactions"><a href="#ç‰¹å¾äº¤å‰-feature-interactions" class="headerlink" title="ç‰¹å¾äº¤å‰(feature interactions)"></a>ç‰¹å¾äº¤å‰(feature interactions)</h3><p>åœ¨å›å½’æ¨¡å‹ä¸­åŠ å…¥äº¤äº’é¡¹æ˜¯ä¸€ç§éå¸¸å¸¸è§çš„å¤„ç†æ–¹å¼ã€‚å®ƒå¯ä»¥æå¤§çš„æ‹“å±•å›å½’æ¨¡å‹å¯¹å˜é‡ä¹‹é—´çš„ä¾èµ–çš„è§£é‡Šã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼š<a href="https://www.datalearner.com/blog/1051508158689792">æ¥æº</a></p><p>ä¸åŒç‰¹å¾ä¹‹é—´å¯èƒ½ç›¸äº’å½±å“ï¼Œæ¯”å¦‚é˜³å…‰å’ŒåœŸå£¤è´¨é‡åŒæ—¶å†³å®šæ ‘æœ¨ç”Ÿé•¿é«˜åº¦ï¼Œæˆ‘ä»¬å¯ä»¥å»ºæ¨¡ï¼š</p><script type="math/tex; mode=display">\text{Tree}=a\times \text{Sun}+b\times \text{Soil}+c</script><p>ä½†æ˜¯é˜³å…‰æœ¬èº«ä¹Ÿå¯èƒ½å½±å“åœŸå£¤è´¨é‡ï¼Œè€Œæˆ‘ä»¬å»ºç«‹çš„çº¿æ€§æ¨¡å‹äº‹å®ä¸Šæ˜¯æŠŠåœŸå£¤å’Œé˜³å…‰å½“ä½œç‹¬ç«‹å˜é‡çš„ã€‚æƒ³è¦å­¦ä¹ çº¿æ€§ç›¸å…³æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å¢åŠ ä¸€ä¸ªç‰¹å¾:</p><script type="math/tex; mode=display">\text{Tree}=a\cdot\text{Sun}+b\cdot\text{Soil}+c\cdot(\text{Sun}\cdot\text{Soil})+d</script><p>ç‰¹å¾äº¤å‰çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ä¸åŒç‰¹å¾é—´è¿›è¡ŒåŠ å‡ä¹˜é™¤ã€æŒ‡æ•°æ“ä½œç­‰ã€‚</p><h3 id="éçº¿æ€§ç‰¹å¾åœ¨çº¿æ€§æ¨¡å‹ä¸­çš„åº”ç”¨"><a href="#éçº¿æ€§ç‰¹å¾åœ¨çº¿æ€§æ¨¡å‹ä¸­çš„åº”ç”¨" class="headerlink" title="éçº¿æ€§ç‰¹å¾åœ¨çº¿æ€§æ¨¡å‹ä¸­çš„åº”ç”¨"></a>éçº¿æ€§ç‰¹å¾åœ¨çº¿æ€§æ¨¡å‹ä¸­çš„åº”ç”¨</h3><ul><li><p>é€šè¿‡å¤šé¡¹å¼æ ¸å‡½æ•°(polynomial kernel)å’Œå¾„å‘åŸºæ ¸å‡½æ•°(RBF kernel)å°†çº¿æ€§ä¸å¯åˆ†çš„æ•°æ®æ˜ å°„åˆ°é«˜ç»´ç©ºé—´å»</p></li><li><p>Leafcodingï¼ˆéšæœºæ£®æ—åµŒå…¥ï¼‰ï¼ˆacebookçš„gbdt+lrè¿™ç§æ€è·¯ï¼‰</p></li><li><p>é—ä¼ ç®—æ³•ï¼ˆå…¸å‹ä»£è¡¨gplearnï¼‰</p></li><li><p>å±€éƒ¨çº¿æ€§åµŒå…¥ Locally Linear Embeddingï¼Œé¢‘è°±åµŒå…¥ Spectral Embeddingï¼Œt-SNE ï¼ˆé™ç»´æå–é‡è¦ç‰¹å¾ï¼‰</p></li></ul><h3 id="è¡Œç»Ÿè®¡"><a href="#è¡Œç»Ÿè®¡" class="headerlink" title="è¡Œç»Ÿè®¡"></a>è¡Œç»Ÿè®¡</h3><p>ç»Ÿè®¡ä¸€è¡Œæ•°æ®ä¸­Nanä¸ªæ•°ã€0çš„ä¸ªæ•°ã€è´Ÿæ•°ä¸ªæ•°ã€æœ€å¤§å€¼ã€æœ€å°å€¼ã€ä¸­ä½æ•°ã€å³°åº¦ååº¦ç­‰</p><h2 id="ä¸‰ã€æ—¶é—´ç‰¹å¾"><a href="#ä¸‰ã€æ—¶é—´ç‰¹å¾" class="headerlink" title="ä¸‰ã€æ—¶é—´ç‰¹å¾"></a>ä¸‰ã€æ—¶é—´ç‰¹å¾</h2><p>æ—¶é—´å˜é‡éå¸¸å®¹æ˜“å‡ºé”™ï¼Œéœ€è¦æ›´å¥½çš„å±€éƒ¨éªŒè¯æ–¹æ¡ˆï¼ˆå¦‚å›æµ‹ï¼‰</p><h3 id="å°†æ—¶é—´æ˜ å°„æˆç¯ï¼ˆå‘¨æœŸæ€§å˜é‡ï¼‰"><a href="#å°†æ—¶é—´æ˜ å°„æˆç¯ï¼ˆå‘¨æœŸæ€§å˜é‡ï¼‰" class="headerlink" title="å°†æ—¶é—´æ˜ å°„æˆç¯ï¼ˆå‘¨æœŸæ€§å˜é‡ï¼‰"></a>å°†æ—¶é—´æ˜ å°„æˆç¯ï¼ˆå‘¨æœŸæ€§å˜é‡ï¼‰</h3><p>Turn single features, like day_of_week, into two coordinates on a circle</p><p>Ensures that distance between max and min is the same as min and min +1.</p><p>å«ä¹‰æ˜¯æŒ‡å‘¨å…­å’Œå‘¨å¤©ï¼Œä¸å‘¨å¤©å’Œå‘¨ä¸€çš„è·ç¦»æ˜¯ä¸€æ ·çš„ã€‚</p><p>Use for day_of_week, day_of_month, hour_of_day, etc.</p><p>å°±æ˜¯å°†å¤§æ—¶é—´é¡¹ï¼Œæ¯”å¦‚2019å¹´11æœˆ11æ—¥åˆ†è§£æˆå°æ—¶é—´é¡¹çš„æ„æ€ã€‚</p><h3 id="è¶‹åŠ¿çº¿"><a href="#è¶‹åŠ¿çº¿" class="headerlink" title="è¶‹åŠ¿çº¿"></a>è¶‹åŠ¿çº¿</h3><p>æ•°æ®çš„å˜åŒ–è¶‹åŠ¿æœ¬èº«ä¹Ÿæ˜¯ä¿¡æ¯ã€‚å› æ­¤ä¸è¦ä½¿ç”¨è¯¸å¦‚total_spendè¿™ç§æ€»ç»“å¼å˜é‡ï¼Œè¦æœ‰ä¸€äº›ä¸­é—´å˜é‡ï¼Œè¯¸å¦‚spend_in_last_weekï¼Œspend_in_last_monthã€‚å±•ç°æ•°æ®è¶‹åŠ¿ï¼Œåˆ©äºæ¨¡å‹è·å–ä¿¡æ¯ã€‚</p><h3 id="äº‹ä»¶ç¼–ç "><a href="#äº‹ä»¶ç¼–ç " class="headerlink" title="äº‹ä»¶ç¼–ç "></a>äº‹ä»¶ç¼–ç </h3><p>å°†æŸæ—¥æœŸä¸é‡å¤§èŠ‚æ—¥ä¹‹é—´çš„è·ç¦»ä¹Ÿä½œä¸ºç‰¹å¾ï¼Œæ¯”å¦‚æ³•å®šå‡æ—¥ã€é‡å¤§ä½“è‚²èµ›äº‹ã€å‘¨æœ«ã€æ¯æœˆçš„ç¬¬ä¸€ä¸ªæ˜ŸæœŸå…­ç­‰ã€‚</p><h2 id="å››ã€ç©ºé—´ç‰¹å¾"><a href="#å››ã€ç©ºé—´ç‰¹å¾" class="headerlink" title="å››ã€ç©ºé—´ç‰¹å¾"></a>å››ã€ç©ºé—´ç‰¹å¾</h2><h3 id="å°†åœ°ç‚¹è§†ä½œåˆ†ç±»ç‰¹å¾"><a href="#å°†åœ°ç‚¹è§†ä½œåˆ†ç±»ç‰¹å¾" class="headerlink" title="å°†åœ°ç‚¹è§†ä½œåˆ†ç±»ç‰¹å¾"></a>å°†åœ°ç‚¹è§†ä½œåˆ†ç±»ç‰¹å¾</h3><ul><li>å…‹é‡Œé‡‘æ³• Krigingï¼Œç©ºé—´æ’å€¼æ–¹æ³•</li><li>K-means èšç±»</li><li>åŸå§‹ç»çº¬åº¦</li><li>å°†åŸå¸‚è½¬æ¢ä¸ºç»çº¬åº¦</li><li>åœ¨è¡—é“åç§°ä¸­æ·»åŠ é‚®æ”¿ç¼–ç </li></ul><h3 id="å°†æŸåœ°ç‚¹ä¸å…³é”®åœ°ç‚¹ä¹‹é—´çš„è·ç¦»ä¹Ÿä½œä¸ºç‰¹å¾"><a href="#å°†æŸåœ°ç‚¹ä¸å…³é”®åœ°ç‚¹ä¹‹é—´çš„è·ç¦»ä¹Ÿä½œä¸ºç‰¹å¾" class="headerlink" title="å°†æŸåœ°ç‚¹ä¸å…³é”®åœ°ç‚¹ä¹‹é—´çš„è·ç¦»ä¹Ÿä½œä¸ºç‰¹å¾"></a>å°†æŸåœ°ç‚¹ä¸å…³é”®åœ°ç‚¹ä¹‹é—´çš„è·ç¦»ä¹Ÿä½œä¸ºç‰¹å¾</h3><p>è¯¸å¦‚å¤§åŸå¸‚ã€è¶…å¸‚ç­‰ï¼Œå¯¹ä½ çš„ä»»åŠ¡æœ‰é‡è¦å½±å“çš„åœ°åŒºã€‚</p><h3 id="ä½ç½®äº‹ä»¶æ•°æ®å¯ä»¥æŒ‡ç¤ºå¯ç–‘è¡Œä¸º"><a href="#ä½ç½®äº‹ä»¶æ•°æ®å¯ä»¥æŒ‡ç¤ºå¯ç–‘è¡Œä¸º" class="headerlink" title="ä½ç½®äº‹ä»¶æ•°æ®å¯ä»¥æŒ‡ç¤ºå¯ç–‘è¡Œä¸º"></a>ä½ç½®äº‹ä»¶æ•°æ®å¯ä»¥æŒ‡ç¤ºå¯ç–‘è¡Œä¸º</h3><p>æ¯”å¦‚åŒæ—¶å‡ºç°åœ¨ä¸åŒåŸå¸‚çš„ä¸¤ç¬”äº¤æ˜“ã€åœ¨ä¸ä½æ‰€æˆ–é€è´§åœ°å€ä¸åŒçš„åŸé•‡ä¸­æ¶ˆè´¹ã€ä»ä¸åœ¨åŒä¸€ä¸ªä½ç½®æ¶ˆè´¹ã€‚</p><h2 id="äº”ã€æ•°æ®æ¢ç´¢"><a href="#äº”ã€æ•°æ®æ¢ç´¢" class="headerlink" title="äº”ã€æ•°æ®æ¢ç´¢"></a>äº”ã€æ•°æ®æ¢ç´¢</h2><p>æ•°æ®æ¢ç´¢çš„ç›®çš„æ˜¯æå‰å‘ç°æ•°æ®çš„æ½œåœ¨é—®é¢˜ï¼Œè¯¸å¦‚å¼‚å¸¸å€¼ã€å™ªéŸ³ï¼›ç„¶åæ¢ç´¢æ•°æ®çš„ç‰¹å¾å·¥ç¨‹æ–¹æ³•ã€æ¸…æ´—æ–¹æ³•ï¼Œä¸ºæ•°æ®é¢„å¤„ç†åšå‡†å¤‡ã€‚</p><p>ä¸€å¼€å§‹å°è¯•ç®€å•ç»Ÿè®¡é‡ï¼šminã€maxã€‚</p><p>Incorporate the target so find correlation between signal.</p><p>æˆ‘çš„ç†è§£æ˜¯ï¼Œæ¢ç´¢è¯¥ç‰¹å¾ä¸è¯¥æ•°æ®çš„labelçš„ç›¸å…³æ€§ã€‚</p><h3 id="è¿­ä»£å’ŒDebugging"><a href="#è¿­ä»£å’ŒDebugging" class="headerlink" title="è¿­ä»£å’ŒDebugging"></a>è¿­ä»£å’ŒDebugging</h3><p>ç‰¹å¾å·¥ç¨‹æ˜¯ä¸€ä¸ªè¿­ä»£çš„è¿‡ç¨‹ï¼Œç¡®ä¿ä½ çš„Pipelineèƒ½å¤Ÿå¿«é€Ÿè¿­ä»£ã€‚</p><p>Use sub-linear debugging: Output intermediate information on the process, do spurious logging</p><p>ä½¿ç”¨sub-linear debuggingï¼šè¾“å‡ºæœ‰å…³è¿‡ç¨‹çš„ä¸­é—´ä¿¡æ¯ï¼Œè¿›è¡Œä¼ªè®°å½•ã€‚</p><p>ä½¿ç”¨ä¸€äº›å¸®åŠ©å¿«é€Ÿå®éªŒçš„å·¥å…·ã€‚</p><p>ä¸€é¸Ÿåœ¨æ‰‹èƒœè¿‡åŒé¸Ÿåœ¨æ—ï¼Œæƒ³æ³•å¤ªå¤šä¸å®¹æ˜“æˆåŠŸã€‚</p><h3 id="Labelå·¥ç¨‹"><a href="#Labelå·¥ç¨‹" class="headerlink" title="Labelå·¥ç¨‹"></a>Labelå·¥ç¨‹</h3><p>å¯ä»¥æŠŠæ•°æ®é›†çš„æ ‡ç­¾labelç»™å˜æ¢ä¸€ä¸‹ï¼Œå½“æˆæ•°æ®çš„ç‰¹å¾ï¼ˆæœ‰ç‚¹æ³„æ¼ç­”æ¡ˆçš„æ„æ€ï¼‰ã€‚</p><ul><li>logå˜æ¢ï¼š$y\rightarrow\log{(y+1)}$ã€$\exp{y_{pred}}-1$</li><li>å¹³æ–¹å˜æ¢</li><li>Box-Coxå˜æ¢</li><li>åˆ›å»ºä¸€ä¸ªè¯„åˆ†ï¼Œç”¨æ¥æŠŠäºŒå…ƒåˆ†ç±»targetå˜æˆå›å½’é—®é¢˜</li><li>è®­ç»ƒå›å½’æ¨¡å‹ï¼Œç”¨äºé¢„æµ‹æµ‹è¯•é›†ä¸­ä¸å¯è·å–çš„ç‰¹å¾</li></ul><h2 id="å…­ã€æ–‡æœ¬ç‰¹å¾"><a href="#å…­ã€æ–‡æœ¬ç‰¹å¾" class="headerlink" title="å…­ã€æ–‡æœ¬ç‰¹å¾"></a>å…­ã€æ–‡æœ¬ç‰¹å¾</h2><p>ä¸ç±»åˆ«ç‰¹å¾ç±»ä¼¼ï¼Œç‰¹å¾å·¥ç¨‹æ‰‹æ®µæ›´ä¸ºä¸°å¯Œï¼Œä¸¾ä¾‹ï¼š</p><ul><li>Lowercasing,</li><li>Removing non-alphanumeric,</li><li>Repairing,</li><li>Encoding punctuation marks,</li><li>Tokenizing,</li><li>Token-grams,</li><li>skipgrams,</li><li>char-grams,</li><li>Removing stopwords,</li><li>Removing rare words</li><li>and very common words,</li><li>Spelling Correction,</li><li>Chopping,</li><li>Stemming,</li><li>Lemmatization,</li><li>Document features,</li><li>Entitity Insertion &amp; Extraction</li><li>Simplification,</li><li>Word2Vec and GloVe / Doc2Vec,</li><li>String Similarity,</li><li>Reading level,</li><li>Nearest Neighbors,</li><li>TF-IDF,</li><li>BayesSVM, Vectorization, LDA, LSA.</li></ul><h3 id="æ•°æ®æ¸…æ´—"><a href="#æ•°æ®æ¸…æ´—" class="headerlink" title="æ•°æ®æ¸…æ´—"></a>æ•°æ®æ¸…æ´—</h3><p>ä»å¤§å†™å­—æ¯è½¬æ¢æˆå°å†™ï¼Œä»unicodeè½¬æ¢æˆasciiï¼Œç§»é™¤éå­—æ¯å­—ç¬¦ï¼Œä¿®å¤æºæ–‡æœ¬ä¸­çš„æ ¼å¼é—®é¢˜ç­‰ã€‚</p><h3 id="åˆ†è¯"><a href="#åˆ†è¯" class="headerlink" title="åˆ†è¯"></a>åˆ†è¯</h3><ul><li>å°†å¥å­åˆ†æˆå•è¯tokenåºåˆ—ï¼Œè‹±æ–‡å¯èƒ½å¥½åšä¸€ç‚¹ï¼Œä¸­æ–‡ä¹‹ç±»çš„è¯­è¨€å°±éœ€è¦ç‰¹å®šçš„å·¥å…·äº†ï¼Œæ¯”å¦‚jiebaåˆ†è¯ã€‚</li><li>å°†æ ‡ç‚¹ç¬¦å·ä¹Ÿç¡¬ç¼–ç ä¸ºtokenï¼Œå› ä¸ºæ ‡ç‚¹å¯èƒ½ä¹Ÿä»£è¡¨æœ‰ç”¨çš„ä¿¡æ¯ã€‚</li><li>è¯è¢‹æ¨¡å‹ï¼ˆbag-of-word modelï¼‰</li><li>Nå…ƒåˆ†è¯ï¼šâ€œI like the Beatlesâ€ -&gt; [â€œI likeâ€, â€œlike theâ€, â€œthe Beatlesâ€]</li><li>Skip-gramsï¼šâ€œI like Beatlesâ€ -&gt; [â€œI theâ€, â€œlike Beatlesâ€]</li><li>Char-gramsï¼šâ€œBeatlesâ€ -&gt; [â€œBeaâ€, â€œeatâ€, â€œatlâ€, â€œtleâ€, â€œlesâ€]</li><li>Affixesï¼šSame as char-grams, but only the postfixes and prefixe</li></ul><h3 id="åˆ é™¤è¯"><a href="#åˆ é™¤è¯" class="headerlink" title="åˆ é™¤è¯"></a>åˆ é™¤è¯</h3><ul><li>åˆ é™¤åœç”¨è¯</li><li>åˆ é™¤ç½•è§è¯</li><li>åˆ é™¤å…¶ä»–å¸¸è§è¯ï¼Œä¸èƒ½åæ˜ ç‰¹å¾çš„è¯</li></ul><h3 id="è¿˜åŸè¯å½¢-root"><a href="#è¿˜åŸè¯å½¢-root" class="headerlink" title="è¿˜åŸè¯å½¢ root"></a>è¿˜åŸè¯å½¢ root</h3><ul><li>æ‹¼å†™æ£€æŸ¥</li><li>Chopï¼Œåªå–æ¯ä¸ªtokençš„å‰8ä¸ªå­—ç¬¦</li><li>Stemï¼Œå°†tokenç¼©å‡ä¸ºè¯æ ¹å½¢å¼</li><li>Lemmatizeï¼Œè¯å½¢è¿˜åŸ</li></ul><h3 id="æ›´å¤šç‰¹å¾"><a href="#æ›´å¤šç‰¹å¾" class="headerlink" title="æ›´å¤šç‰¹å¾"></a>æ›´å¤šç‰¹å¾</h3><ul><li>æ–‡æ¡£ç‰¹å¾ï¼Œè¯¸å¦‚ç»Ÿè®¡ç©ºæ ¼ã€tabã€æ¢è¡Œã€å­—ç¬¦ã€tokenå‡ºç°æ¬¡æ•°ç­‰</li><li>æ·»åŠ ä¸€äº›é€šç”¨çš„æè¿°ï¼Œâ€œMicrosoft releases Windowsâ€ -&gt; â€œMicrosoft (company) releases Windows (application)â€</li><li>è¯­æ³•åˆ†ææ ‘ Parse Treeï¼ŒNLTKå·¥å…·åŒ…æœ‰å®ç°</li><li>Reading level: Compute the reading level of a document.ï¼ˆå›½å¤–çš„é˜…è¯»åˆ†çº§åˆ¶åº¦ï¼‰</li></ul><h3 id="ç›¸ä¼¼åº¦"><a href="#ç›¸ä¼¼åº¦" class="headerlink" title="ç›¸ä¼¼åº¦"></a>ç›¸ä¼¼åº¦</h3><ul><li>tokenç›¸ä¼¼åº¦ï¼šè®¡ç®—ä¸¤æ®µæ–‡æœ¬ä¸­ç›¸åŒtokenæ•°</li><li>å‹ç¼©è·ç¦» Compression distanceï¼šä¸€æ®µå¥å­æ˜¯å¦èƒ½è¢«å‹ç¼©æˆå¦å¤–ä¸€æ®µ</li><li>Levenshiteinã€Hammingã€Jaccardè·ç¦»ï¼Œç”¨æ¥è¡¡é‡ä¸¤ä¸ªstringçš„è·ç¦»ï¼Œè®¡ç®—å°†è¯¥æ–‡æœ¬è½¬ä¸ºå¦ä¸€ä¸ªæ–‡æœ¬æ‰€éœ€çš„æœ€å°æ“ä½œæ¬¡æ•°</li><li>word2vecã€gloveï¼šè®¡ç®—ä¸¤å‘é‡çš„ä½™å¼¦è·ç¦»</li></ul><h3 id="TF-IDF"><a href="#TF-IDF" class="headerlink" title="TF-IDF"></a>TF-IDF</h3><ul><li>Term Frequency: èƒ½å¤Ÿé™ä½é•¿æ–‡æœ¬é€ æˆçš„bias</li><li>Inverse Document Frequency: é™ä½å¸¸ç”¨è¯é€ æˆçš„Bias</li><li>TF-IDF: è¾¨åˆ«åœ¨documentä¸­æœ€é‡è¦çš„tokenï¼Œåˆ é™¤ä¸é‡è¦çš„tokenï¼›æˆ–è€…ç”¨åœ¨æ•°æ®é¢„å¤„ç†ä¸Šï¼Œå¯ä»¥ä½¿ç»´åº¦ä¸‹é™</li></ul><h3 id="é™ç»´"><a href="#é™ç»´" class="headerlink" title="é™ç»´"></a>é™ç»´</h3><ul><li>PCA: å°†æ–‡æœ¬å‹ç¼©åˆ°50~100ç»´çš„å‘é‡</li><li>SVD: åŒä¸Š</li><li>LDA: ä¸TF-IDFé…å¥—</li><li>LSA: åˆ›å»ºä¸»é¢˜å‘é‡</li></ul><h3 id="å¤–éƒ¨æ¨¡å‹"><a href="#å¤–éƒ¨æ¨¡å‹" class="headerlink" title="å¤–éƒ¨æ¨¡å‹"></a>å¤–éƒ¨æ¨¡å‹</h3><ul><li>æ„Ÿæƒ…åˆ†æå™¨ï¼šè·å¾—textçš„æƒ…æ„Ÿå€¾å‘</li><li>ä¸»é¢˜æ¨¡å‹ï¼šä½¿ç”¨ä¸€ä¸ªdatasetåˆ›å»ºä¸»é¢˜å‘é‡ï¼Œç”¨äºå¦ä¸€ä¸ªä»»åŠ¡</li></ul><h2 id="ä¸ƒã€æ³„éœ²çš„ç‰¹å¾-é»„é‡‘ç‰¹å¾"><a href="#ä¸ƒã€æ³„éœ²çš„ç‰¹å¾-é»„é‡‘ç‰¹å¾" class="headerlink" title="ä¸ƒã€æ³„éœ²çš„ç‰¹å¾ / é»„é‡‘ç‰¹å¾"></a>ä¸ƒã€æ³„éœ²çš„ç‰¹å¾ / é»„é‡‘ç‰¹å¾</h2><p>ç‰¹å¾å·¥ç¨‹èƒ½å¸®åŠ©å‘ç°æ³„éœ²çš„ç‰¹å¾ï¼Œè¿™äº›ç‰¹å¾å¯èƒ½å¯¹ä½ å¸®åŠ©å¾ˆå¤§ã€‚</p><ul><li>æ¯”å¦‚â€œé€†å‘â€å·¥ç¨‹ï¼š<ul><li>ç”¨å½©è™¹è¡¨ç ´è§£MD5å“ˆå¸Œã€‚<a href="https://www.cnblogs.com/by-3ks/articles/4137562.html">å½©è™¹è¡¨ï¼ˆRainbow Tableï¼‰</a>æ˜¯ä¸€ç§ç ´è§£å“ˆå¸Œç®—æ³•çš„æŠ€æœ¯ï¼Œå¯ä»¥ç ´è§£MD5ã€HASHç­‰å¤šç§å¯†ç ã€‚</li><li>åˆ©ç”¨TF-IDFè·å¾—æœ¯è¯­é¢‘ç‡ã€‚</li><li>ç¼–ç æ ·æœ¬æ•°æ®é›†çš„é¡ºåºã€‚</li><li>ç¼–ç æ–‡ä»¶åˆ›å»ºæ—¥æœŸã€‚</li></ul></li><li>æ¯”å¦‚è§„åˆ™æŒ–æ˜ï¼š<ul><li>æŸ¥æ‰¾ç®€å•çš„è§„åˆ™ï¼ˆå¹¶å¯¹å®ƒä»¬è¿›è¡Œç¼–ç ï¼‰ä»¥å¸®åŠ©æ¨¡å‹å†³ç­–ã€‚</li></ul></li></ul><h2 id="å…«ã€æ¡ˆä¾‹ç ”ç©¶"><a href="#å…«ã€æ¡ˆä¾‹ç ”ç©¶" class="headerlink" title="å…«ã€æ¡ˆä¾‹ç ”ç©¶"></a>å…«ã€æ¡ˆä¾‹ç ”ç©¶</h2><p>Quoraé‡å¤é—®é¢˜æ•°æ®é›†ï¼Œçº¦440000ä¸ªé—®é¢˜ï¼Œå°†å…¶åˆ†æˆé‡å¤é—®é¢˜æˆ–éé‡å¤é—®é¢˜ã€‚ä½œè€…å°†è‡ªå·±è§£å†³Quoraé‡å¤é—®é¢˜çš„è¿‡ç¨‹åˆ†äº«å¦‚ä¸‹ï¼š</p><ul><li>First attempt: è¯è¢‹æ¨¡å‹+é€»è¾‘å›å½’</li><li>Second attempt: tokenä¹‹é—´è¿›è¡Œæ•°æ®çš„å¤šé¡¹å¼äº¤äº’</li><li>Third attempt: ä½¿ç”¨NLTKçš„SnowballStemmerè¿›è¡Œè¯å¹²æå–</li><li>Fourth attempt: ä½¿ç”¨2-gramsåˆ†è¯</li><li>Fifth attempt: æ·»åŠ ä»¥ä¸‹æ‰‹å·¥æ„é€ çš„ç‰¹å¾ï¼š<ul><li>å½’ä¸€åŒ–é—®ç­”å¯¹çš„é•¿åº¦</li><li>å½’ä¸€åŒ–é—®ç­”å¯¹çš„compressionè·ç¦»</li><li>è®¡ç®—é—®ç­”å¯¹çš„è¯å‘é‡ä¹‹é—´çš„ä½™å¼¦è·ç¦»</li><li>Chargram co-occurence between question pairs.</li><li>è®¡ç®—wordå‡ºç°æ¬¡æ•°ï¼šwhichï¼Œwhatï¼Œwhere</li></ul></li><li>è¿˜èƒ½æƒ³åˆ°æ›´å¤šçš„æ”¹è¿›æ–¹æ³•å—ï¼Ÿ<ul><li>å¤–éƒ¨æˆ–é¢„è®­ç»ƒæ¨¡å‹ï¼Ÿ</li><li>Search engine models?</li><li>Logic based models?</li></ul></li></ul><h2 id="ä¹ã€å…¶ä»–èµ„æºå‚è€ƒ"><a href="#ä¹ã€å…¶ä»–èµ„æºå‚è€ƒ" class="headerlink" title="ä¹ã€å…¶ä»–èµ„æºå‚è€ƒ"></a>ä¹ã€å…¶ä»–èµ„æºå‚è€ƒ</h2><ul><li><strong>Kaggle forums &amp; kernels:</strong> Far0n, KazAnova, Fchollet, Abhishek, Gilberto Titericz, Leustagos, Owen Zhang, Gert Jacobusse â€¦</li><li><strong>Introduction:</strong> <a href="http://machinelearningmastery.com/discover-feature-engineering-how-to-engineer-features-and-how-to-get-good-at-it/">http://machinelearningmastery.com/discover-feature-engineering-how-to-engineer-features-and-how-to-get-good-at-it/</a></li><li><strong>Books:</strong><ul><li>Mastering Feature Engineering (Alice Zheng),</li><li>Feature Extraction (Isabelle Guyon et al.)</li></ul></li><li><strong>Blogs:</strong><ul><li><a href="https://smerity.com/articles/2016/architectures_are_the_new_feature_engineering.html">https://smerity.com/articles/2016/architectures_are_the_new_feature_engineering.html</a></li><li><a href="http://hunch.net/~jl/projects/hash_reps/">http://hunch.net/~jl/projects/hash_reps/</a></li><li><a href="https://blogs.technet.microsoft.com/machinelearning/2014/09/24/online-learning-and-sub-linear-debugging/">https://blogs.technet.microsoft.com/machinelearning/2014/09/24/online-learning-and-sub-linear-debugging/</a></li><li><a href="http://blog.kaggle.com/2015/12/03/dato-winners-interview-1st-place-mad-professors/">http://blog.kaggle.com/2015/12/03/dato-winners-interview-1st-place-mad-professors/</a></li><li><a href="http://blog.kaggle.com/2016/08/24/avito-duplicate-ads-detection-winners-interview-1st-place-team-devil-team-stanislav-dmitrii/">http://blog.kaggle.com/2016/08/24/avito-duplicate-ads-detection-winners-interview-1st-place-team-devil-team-stanislav-dmitrii/</a></li><li><a href="http://www.slideshare.net/DataRobot/featurizing-log-data-before-xgboost">http://www.slideshare.net/DataRobot/featurizing-log-data-before-xgboost</a></li></ul></li><li><strong>Data:</strong> <a href="https://data.quora.com/First-Quora-Dataset-Release-Question-Pairs">https://data.quora.com/First-Quora-Dataset-Release-Question-Pairs</a></li><li><strong>Software:</strong> <a href="https://github.com/trevorstephens/gplearn">https://github.com/trevorstephens/gplearn</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
      <category>translation</category>
      
      <category>è½¬è½½</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
      <tag>Feature Engineering</tag>
      
      <tag>Data Science</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€è®ºæ–‡é˜…è¯»ç¬”è®°ã€‘CAGFuzz: Coverage-Guided Adversarial Generative Fuzzing Testing of Deep Learning Systems</title>
    <link href="/2020/06/28/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91CAGFuzz-Coverage-Guided-Adversarial-Generative-Fuzzing-Testing-of-Deep-Learning-Systems/"/>
    <url>/2020/06/28/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91CAGFuzz-Coverage-Guided-Adversarial-Generative-Fuzzing-Testing-of-Deep-Learning-Systems/</url>
    
    <content type="html"><![CDATA[<p>æå‡ºäº†CAGFuzzï¼Œè¿™æ˜¯ä¸€ç§è¦†ç›–ç‡æŒ‡å¯¼çš„ç°ç›’å¯¹æŠ—æ€§ç”Ÿæˆæ¨¡ç³Šæµ‹è¯•æ–¹æ³•ï¼Œå¯ä»¥ä¸ºç›®æ ‡DNNç”Ÿæˆå¯¹æŠ—æ€§ç¤ºä¾‹ï¼Œä»¥å‘ç°å…¶æ½œåœ¨ç¼ºé™·ã€‚<br><!--more---></p><p>DeepXploreï¼Œä½¿ç”¨å¤šä¸ªDNNæ¥å‘ç°å¹¶ç”Ÿæˆä½äºè¿™äº›DNNå†³ç­–è¾¹ç•Œä¹‹é—´çš„å¯¹æŠ—æ€§ç¤ºä¾‹ã€‚</p><p>DeepHunterï¼Œä½¿ç”¨å˜å½¢çªå˜ç­–ç•¥æ¥ç”Ÿæˆæ–°çš„æµ‹è¯•ç¤ºä¾‹ã€‚</p><p>DeepGaugeï¼Œæå‡ºäº†æ·±åº¦ç¥ç»ç½‘ç»œçš„æ–°è¦†ç›–æ ‡å‡†ã€‚</p><ol><li>ä¸ºäº†æé«˜æ³›åŒ–èƒ½åŠ›ï¼Œä»…ä»æ•°æ®çš„è§’åº¦æ·»åŠ è¾ƒå°çš„æ‰°åŠ¨å°±éå¸¸é‡è¦ã€‚</li><li>ç°æœ‰ç ”ç©¶å®Œå…¨å¿½ç•¥äº†åŒ…å«é«˜çº§è¯­ä¹‰ä¿¡æ¯ï¼ˆä¾‹å¦‚å›¾åƒå¯¹è±¡ç±»åˆ«å’Œåœºæ™¯è¯­ä¹‰ï¼‰çš„æ·±åº¦ç‰¹å¾çº¦æŸã€‚ä½¿ç”¨L0å’ŒLâˆæ¥é™åˆ¶å¯¹æŠ—æ€§ç¤ºä¾‹çš„åƒç´ çº§å˜åŒ–ï¼Œè¿™æ ·çš„çº¦æŸåªèƒ½ä»£è¡¨å¯¹æŠ—å®ä¾‹å’ŒåŸå§‹å®ä¾‹ä¹‹é—´çš„è§†è§‰ä¸€è‡´æ€§ï¼Œè€Œä¸èƒ½ä¿è¯å¯¹æŠ—å®ä¾‹å’ŒåŸå§‹å®ä¾‹çš„é«˜çº§è¯­ä¹‰ä¿¡æ¯ä¹‹é—´çš„ä¸€è‡´æ€§ã€‚</li></ol><p>å…·ä½“åœ°ï¼Œ</p><ol><li>åŒé‡GANæ„é€ å¯¹æŠ—æ ·æœ¬ç”Ÿæˆå™¨AEG<br>CAGFuzzçš„ç›®æ ‡æ˜¯æœ€å¤§åŒ–ç¥ç»å…ƒè¦†ç›–èŒƒå›´ï¼Œå¹¶åœ¨å¯¹ç›®æ ‡DNNäº§ç”Ÿè¾ƒå°æ‰°åŠ¨çš„æƒ…å†µä¸‹å°½å¯èƒ½å¤šåœ°ç”Ÿæˆå¯¹æŠ—æ€§æµ‹è¯•ç¤ºä¾‹ã€‚åŒæ—¶ï¼Œç”Ÿæˆçš„ç¤ºä¾‹é€‚ç”¨äºä¸åŒç§ç±»çš„DNNã€‚</li></ol><p>CycleGAN [19]çš„ç›®æ ‡æ˜¯å°†å›¾åƒAè½¬æ¢ä¸ºå…·æœ‰ä¸åŒæ ·å¼çš„å›¾åƒBã€‚</p><p>åŸºäºCycleGANï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å°†å›¾åƒBè½¬æ¢å›å›¾åƒAï¼Œä»¥è·å¾—ä¸åŸå§‹å›¾åƒAç±»ä¼¼çš„å›¾åƒAâ€™ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å°†ä¸¤ä¸ªå…·æœ‰ç›¸ååŠŸèƒ½çš„CycleGANçš„ç”Ÿæˆå™¨ç»„åˆä¸ºå¯¹æŠ—ç¤ºä¾‹ç”Ÿæˆå™¨ã€‚</p><p>åŸºäºå‡ ä¸ªç‰¹å®šçš„â€‹â€‹æ•°æ®é›†å¯¹AEGè¿›è¡Œè®­ç»ƒï¼Œå¹¶ä¸”ä¸éœ€è¦ä¾èµ–ä»»ä½•ç‰¹å®šçš„DNNæ¨¡å‹ã€‚</p><ol><li>é‡‡ç”¨ç½‘ç»œä¿¡æ¯ç¡®ä¿ä¸¤æ ·æœ¬è¯­ä¹‰ä¸€è‡´<br>æˆ‘ä»¬æå–åŸå§‹ç¤ºä¾‹å’Œå¯¹æŠ—ç¤ºä¾‹çš„æ·±åº¦ç‰¹å¾ï¼Œå¹¶é€šè¿‡ç›¸ä¼¼æ€§åº¦é‡ä½¿å…¶å°½å¯èƒ½ç›¸ä¼¼ã€‚</li></ol><p>æˆ‘ä»¬ä½¿ç”¨VGG-19ç½‘ç»œ[20]æå–åŸå§‹ç¤ºä¾‹å’Œå¯¹æŠ—ç¤ºä¾‹çš„æ·±åº¦è¯­ä¹‰ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦æµ‹é‡æ–¹æ³•æ¥ç¡®ä¿å¯¹æŠ—ç¤ºä¾‹çš„æ·±åº¦è¯­ä¹‰ä¿¡æ¯ä¸åŸå§‹ç¤ºä¾‹ä¸€è‡´ è¶Šå¤šè¶Šå¥½ã€‚</p><ol><li>ç»“æœ<br>AGFuzzå¯ä»¥æœ‰æ•ˆåœ°æ”¹å–„ç›®æ ‡DNNæ¨¡å‹çš„ç¥ç»å…ƒè¦†ç›–èŒƒå›´ã€‚è¯æ˜äº†ç”±CAGFuzzç”Ÿæˆçš„å¯¹æŠ—ç¤ºä¾‹å¯ä»¥å‘ç°ç›®æ ‡DNNæ¨¡å‹ä¸­çš„éšè—ç¼ºé™·ã€‚é€šè¿‡AEGè®­ç»ƒçš„DNNæ¨¡å‹çš„å‡†ç¡®æ€§å’Œé²æ£’æ€§å·²å¾—åˆ°æ˜¾ç€æé«˜ã€‚</li></ol><h1 id="èƒŒæ™¯çŸ¥è¯†"><a href="#èƒŒæ™¯çŸ¥è¯†" class="headerlink" title="èƒŒæ™¯çŸ¥è¯†"></a>èƒŒæ™¯çŸ¥è¯†</h1><h2 id="è¦†ç›–ç‡å¼•å¯¼çš„ç°ç›’æ¨¡ç³Šæµ‹è¯•"><a href="#è¦†ç›–ç‡å¼•å¯¼çš„ç°ç›’æ¨¡ç³Šæµ‹è¯•" class="headerlink" title="è¦†ç›–ç‡å¼•å¯¼çš„ç°ç›’æ¨¡ç³Šæµ‹è¯•"></a>è¦†ç›–ç‡å¼•å¯¼çš„ç°ç›’æ¨¡ç³Šæµ‹è¯•</h2><p>æœ€æ–°çš„CGFæ–¹æ³•ä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ï¼šçªå˜ï¼Œåé¦ˆæŒ‡å¯¼å’Œæ¨¡ç³Šç­–ç•¥</p><h2 id="CycleGAN"><a href="#CycleGAN" class="headerlink" title="CycleGAN"></a>CycleGAN</h2><p>ç”Ÿæˆå¯¹æŠ—æ€§ç¤ºä¾‹çš„æƒ³æ³•æ˜¯å¢åŠ äººä»¬æ— æ³•ä¸åŸå§‹ç¤ºä¾‹åŒºåˆ†å¼€çš„å¹²æ‰°ã€‚è¿™ä¸GAN [27]ç”Ÿæˆç¤ºä¾‹çš„æƒ³æ³•éå¸¸ç›¸ä¼¼ã€‚</p><p>GANçš„ç”Ÿæˆå™¨Gå’Œé‰´åˆ«å™¨Dæ ¹æ®å™ªå£°æ•°æ®äº¤æ›¿ç”Ÿæˆä¸åŸå§‹ç¤ºä¾‹éå¸¸ç›¸ä¼¼ä½†ä¸å®Œå…¨ç›¸åŒçš„å¯¹æŠ—ç¤ºä¾‹ã€‚</p><p>è€ƒè™‘åˆ°ä¸åŒç›®æ ‡DLç³»ç»Ÿï¼ˆä¾‹å¦‚æŸäº›å¸¦æœ‰æ ‡ç­¾æ•°æ®çš„DLç³»ç»Ÿå’Œå…¶ä»–DLç³»ç»Ÿçš„æ•°æ®é›†ï¼‰çš„å·®å¼‚ï¼Œæˆ‘ä»¬é€‰æ‹©CycleGAN [19]ä½œä¸ºå¯¹æŠ—æ€§ç¤ºä¾‹ç”Ÿæˆå™¨çš„è®­ç»ƒæ¨¡å‹ï¼Œå› ä¸ºCycleGANä¸éœ€è¦æ•°æ®åŒ¹é…é›†å’Œæ ‡ç­¾ä¿¡æ¯ã€‚</p><p>CycleGANçš„ç›®æ ‡æ˜¯å­¦ä¹ Xå’ŒYä¹‹é—´çš„æ˜ å°„å…³ç³»Gå’ŒFã€‚æœ‰ä¸¤ä¸ªå¯¹æŠ—åˆ¤åˆ«å™¨$D_x$å’Œ$D_y$ï¼Œ$D_x$åˆ†è¾¨å›¾ç‰‡$x$å’Œè½¬æ¢åçš„å›¾ç‰‡$F(x)$ã€‚$D_y$ç›¸ä¼¼ã€‚</p><p>å’Œå…¶ä»–GANä¸€æ ·ï¼Œç”¨æŸå¤±å‡½æ•°ä¼˜åŒ–æ˜ å°„å‡½æ•°ã€‚è¿™é‡Œç”¨æœ€å°äºŒä¹˜æŸå¤±ã€‚</p><p>æœ¬ç¤ºä¾‹çš„ç›®çš„æ˜¯å°†çœŸå®å›¾ç‰‡å’Œæ¢µé«˜é£æ ¼çš„ç»˜ç”»ç›¸äº’è½¬åŒ–ã€‚<br><img src="/2020/06/28/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91CAGFuzz-Coverage-Guided-Adversarial-Generative-Fuzzing-Testing-of-Deep-Learning-Systems/2020-06-28-00-36-54.png" alt></p><h2 id="VGG-19"><a href="#VGG-19" class="headerlink" title="VGG-19"></a>VGG-19</h2><p>VGG-19ç½‘ç»œå¯ä»¥ä»å›¾åƒä¸­æå–é«˜çº§è¯­ä¹‰ä¿¡æ¯[29]ï¼Œ[30]ï¼Œå¯ç”¨äºè¯†åˆ«å›¾åƒä¹‹é—´çš„ç›¸ä¼¼æ€§ã€‚</p><p>æœ¬æ–‡å°†æœ€åä¸€ä¸ªå®Œæ•´è¿æ¥å±‚çš„è¾“å‡ºä½œä¸ºç‰¹å¾å‘é‡è¿›è¡Œèåˆï¼Œä»¥æ¯”è¾ƒå¯¹æŠ—æ€§ç¤ºä¾‹ä¸åŸå§‹ç¤ºä¾‹ä¹‹é—´çš„ç›¸ä¼¼æ€§ï¼Œå¹¶ä½œä¸ºè¿‡æ»¤ç”Ÿæˆçš„å¯¹æŠ—æ€§ç¤ºä¾‹çš„é˜ˆå€¼ã€‚</p><h2 id="ç¥ç»ç½‘ç»œè¦†ç›–ç‡"><a href="#ç¥ç»ç½‘ç»œè¦†ç›–ç‡" class="headerlink" title="ç¥ç»ç½‘ç»œè¦†ç›–ç‡"></a>ç¥ç»ç½‘ç»œè¦†ç›–ç‡</h2><p><img src="/2020/06/28/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91CAGFuzz-Coverage-Guided-Adversarial-Generative-Fuzzing-Testing-of-Deep-Learning-Systems/2020-06-28-00-39-59.png" alt></p><h1 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p><img src="/2020/06/28/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91CAGFuzz-Coverage-Guided-Adversarial-Generative-Fuzzing-Testing-of-Deep-Learning-Systems/2020-06-28-00-41-11.png" alt></p><p>ç¬¬ä¸€æ­¥æ˜¯æ•°æ®æ”¶é›†å’Œè®­ç»ƒå¯¹æŠ—æ€§ç¤ºä¾‹ç”Ÿæˆå™¨</p><p>å°†æ•°æ®é›†åˆ†ä¸ºä¸¤ä¸ªå­é›†ï¼Œå¹¶ä½œä¸ºCycleGANçš„è¾“å…¥æ¥è®­ç»ƒAEGã€‚</p><p>åœ¨æ ¹æ®å­˜å‚¨æ—¶é—´ç­‰è®¾ç½®äº†ä¼˜å…ˆçº§ä¹‹åï¼Œå°†è¿™äº›ç¤ºä¾‹æ”¾å…¥å¤„ç†æ± ä¸­ï¼Œä½œä¸ºæ¨¡ç³Šæµ‹è¯•çš„åŸå§‹ç¤ºä¾‹é›†ã€‚</p><p>ç¬¬äºŒæ­¥æ˜¯å¯¹æŠ—ç¤ºä¾‹ç”Ÿæˆã€‚</p><p>æ¯æ¬¡ä»å¤„ç†æ± ä¸­é€‰æ‹©ä¼˜å…ˆçš„åŸå§‹ç¤ºä¾‹ï¼Œå¹¶å°†å…¶ç”¨ä½œAEGçš„è¾“å…¥ä»¥ç”Ÿæˆå¯¹æŠ—ç¤ºä¾‹ã€‚</p><p>VGG-19å¤„ç†å¯¹æŠ—æ€§ç¤ºä¾‹å’ŒåŸå§‹ç¤ºä¾‹ï¼Œä»¥æå–ç¤ºä¾‹çš„ç‰¹å¾çŸ©é˜µã€‚</p><p>è®¡ç®—å¯¹æŠ—æ€§ç¤ºä¾‹ä¸åŸå§‹ç¤ºä¾‹ä¹‹é—´çš„ç‰¹å¾çŸ©é˜µçš„ä½™å¼¦ç›¸ä¼¼åº¦ï¼Œä»¥ç¡®ä¿å¯¹æŠ—æ€§ç¤ºä¾‹çš„æ·±å±‚è¯­ä¹‰ä¸åŸå§‹ç¤ºä¾‹ä¸€è‡´ã€‚</p><p>ç¬¬ä¸‰æ­¥æ˜¯ä½¿ç”¨ç¥ç»å…ƒè¦†ç›–ç‡æ¥æŒ‡å¯¼ç”Ÿæˆè¿‡ç¨‹ã€‚</p><p>ç¬¬äºŒæ­¥ä¸­ç”Ÿæˆçš„å¯¹æŠ—ç¤ºä¾‹å°†è¾“å…¥åˆ°è¢«æµ‹DNNä¸­ä»¥è¿›è¡Œè¦†ç›–ç‡åˆ†æã€‚</p><p>å¦‚æœå‘ç”Ÿæ–°çš„è¦†ç›–ï¼Œåˆ™å¯¹æŠ—æ€§ç¤ºä¾‹å°†ä½œä¸ºæ•°æ®é›†çš„ä¸€éƒ¨åˆ†æ”¾å…¥å¤„ç†æ± ä¸­ã€‚</p><p>æ–°çš„è¦†ç›–èŒƒå›´æ„å‘³ç€å¯¹æŠ—ç¤ºä¾‹çš„ç¥ç»å…ƒè¦†ç›–èŒƒå›´é«˜äºåŸå§‹ç¤ºä¾‹çš„ç¥ç»å…ƒè¦†ç›–èŒƒå›´ã€‚</p><p><img src="/2020/06/28/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91CAGFuzz-Coverage-Guided-Adversarial-Generative-Fuzzing-Testing-of-Deep-Learning-Systems/2020-06-28-00-44-35.png" alt></p><p>CAGFuzzçš„è¾“å…¥åŒ…æ‹¬ç›®æ ‡æ•°æ®é›†Dï¼Œç»™å®šæ·±åº¦ç¥ç»ç½‘ç»œDNNï¼Œæœ€å¤§è¿­ä»£æ•°Nï¼Œæ¯ä¸ªåŸå§‹ç¤ºä¾‹ç”Ÿæˆçš„å¯¹æŠ—æ€§ç¤ºä¾‹N1ä»¥åŠtop-kçš„å‚æ•°Kã€‚</p><p>è¾“å‡ºæ˜¯ç”Ÿæˆçš„æµ‹è¯•ç¤ºä¾‹ï¼Œå¯æ”¹å–„ç›®æ ‡DNNçš„è¦†ç›–èŒƒå›´ã€‚</p><p>åœ¨æ•´ä¸ªæ¨¡ç³Šæµ‹è¯•è¿‡ç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†æ•°æ®é›†ã€‚</p><p>ä¸€æ–¹é¢ï¼Œå®ƒè¢«åˆ†ä¸ºä¸¤ä¸ªç›¸ç­‰çš„æ•°æ®å­—æ®µï¼ˆç¬¬1è¡Œï¼‰ï¼Œä»¥è®­ç»ƒå¯¹æŠ—æ€§ç¤ºä¾‹ç”Ÿæˆå™¨AEGï¼ˆç¬¬2è¡Œï¼‰ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œæ‰€æœ‰ç¤ºä¾‹éƒ½ç»è¿‡é¢„å¤„ç†ï¼ˆç¬¬3è¡Œï¼‰ï¼Œå¹¶å­˜å‚¨åœ¨å¤„ç†æ± ä¸­ï¼ˆç¬¬4è¡Œï¼‰ã€‚</p><p>åœ¨æ¯ä¸ªè¿­ä»£è¿‡ç¨‹ä¸­ï¼ˆç¬¬5è¡Œï¼‰ï¼Œæ ¹æ®æ—¶é—´ä¼˜å…ˆçº§ï¼ˆç¬¬6ã€7è¡Œï¼‰ä»å¤„ç†æ± ä¸­é€‰æ‹©åŸå§‹ç¤ºä¾‹çˆ¶å¯¹è±¡ã€‚</p><p>ç„¶åï¼Œæ¯ä¸ªåŸå§‹ç¤ºä¾‹çˆ¶å¯¹è±¡éƒ½ä¼šç”Ÿæˆå¤šæ¬¡ï¼ˆç¬¬8è¡Œï¼‰ã€‚</p><p>å¯¹äºæ¯ä¸€ä»£ï¼Œå¯¹æŠ—æ€§ç¤ºä¾‹ç”Ÿæˆå™¨AEGç”¨äºå˜å¼‚åŸå§‹ç¤ºä¾‹æ€§çˆ¶çº§ï¼Œä»¥ç”Ÿæˆå¯¹æŠ—æ€§ç¤ºä¾‹æ•°æ®ï¼ˆç¬¬9è¡Œï¼‰ã€‚</p><p>åˆ†åˆ«æå–åŸå§‹ç¤ºä¾‹çˆ¶å¯¹è±¡å’Œå¯¹æŠ—ç¤ºä¾‹æ•°æ®çš„æ·±åº¦ç‰¹å¾ï¼Œå¹¶è®¡ç®—å®ƒä»¬ä¹‹é—´çš„ä½™å¼¦ç›¸ä¼¼åº¦ï¼ˆç¬¬10-11è¡Œï¼‰ã€‚</p><p>æœ€åï¼Œå°†åŸå§‹æ ·æœ¬äº§ç”Ÿçš„æ‰€æœ‰å¯¹æŠ—æ€§ç¤ºä¾‹æŒ‰ç…§ç›¸ä¼¼æ€§ä»é«˜åˆ°ä½æ’åºï¼Œå¹¶é€‰æ‹©å…¶ä¸­çš„å‰kä¸ªä½œä¸ºç›®æ ‡ç¤ºä¾‹ï¼ˆç¬¬13è¡Œï¼‰ã€‚</p><p>æ’åå‰kä½çš„å¯¹æŠ—æ€§ç¤ºä¾‹æ˜¯å…·æœ‰è¦†ç›–èŒƒå›´çš„åé¦ˆï¼ˆç¬¬15è¡Œï¼‰ã€‚</p><p>å¦‚æœå¯¹æŠ—æ€§ç¤ºä¾‹å¢åŠ äº†ç›®æ ‡DNNçš„è¦†ç›–èŒƒå›´ï¼Œå®ƒä»¬å°†è¢«å­˜å‚¨åœ¨å¤„ç†æ± ä¸­å¹¶è®¾ç½®æ—¶é—´ä¼˜å…ˆçº§ï¼ˆç¬¬16-19è¡Œï¼‰ã€‚</p><h2 id="æ•°æ®æ”¶é›†"><a href="#æ•°æ®æ”¶é›†" class="headerlink" title="æ•°æ®æ”¶é›†"></a>æ•°æ®æ”¶é›†</h2><p>é¦–å…ˆå¯¹æ•°æ®é›†è¿›è¡Œæ’åºï¼Œå°†æ’å¥½åºçš„æ•°æ®é›†å‚¨å­˜åœ¨é˜Ÿåˆ—ä¸­ã€‚ç„¶åå°†é˜Ÿåˆ—åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œè®­ç»ƒcycleGANä½¿ç”¨ã€‚</p><h2 id="è®­ç»ƒå¯¹æŠ—æ ·æœ¬ç”Ÿæˆå™¨"><a href="#è®­ç»ƒå¯¹æŠ—æ ·æœ¬ç”Ÿæˆå™¨" class="headerlink" title="è®­ç»ƒå¯¹æŠ—æ ·æœ¬ç”Ÿæˆå™¨"></a>è®­ç»ƒå¯¹æŠ—æ ·æœ¬ç”Ÿæˆå™¨</h2><p>å¦‚ä½•æŠŠæ¡çªå˜ç¨‹åº¦degreeæ˜¯å…³é”®ã€‚æœ¬æ–‡æå‡ºäº†ä¸€ä¸ªæ–°çš„å¯¹æŠ—æ ·æœ¬ç”Ÿæˆæ–¹æ³•ï¼Œèƒ½å¤Ÿä¿è¯æ·±å±‚æ¬¡semanticä¿¡æ¯çš„ä¸å˜æ€§ï¼Œä¸”æ‰°åŠ¨å¯¹äººç±»æ˜¯ä¸å¯å¯Ÿè§‰çš„ã€‚</p><p>è¿™ä¸ªæ–°çš„æ–¹æ³•å°±æ˜¯å¼•ç”¨äº†cycleganï¼Œä¾èµ–adversarial losså‡½æ•°æ·»åŠ å¯¹æŠ—æ‰°åŠ¨ï¼Œä¸”é€šè¿‡cyclic consistency lossæ§åˆ¶æ‰°åŠ¨åœ¨äººç±»ä¸å¯å¯Ÿè§‰çš„èŒƒå›´å†…ã€‚</p><p>CycleGANæ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿé¦–å…ˆå°†æ•°æ®é›†å‡åŒ€åˆ†æˆä¸¤éƒ¨åˆ†Xã€Yï¼Œæ¨¡å‹è¯•å›¾å­¦ä¹ ä¸¤ä¸ªæ˜ å°„ï¼Œåˆ†åˆ«æ˜¯ä»Xåˆ°Yçš„æ˜ å°„Pï¼Œä»¥åŠä»Yåˆ°Xçš„æ˜ å°„Qã€‚å¯¹åº”åœ°ï¼Œæœ‰ä¸¤ä¸ªå¯¹æŠ—åˆ¤åˆ«å™¨$D_x$å’Œ$D_y$ï¼Œåˆ†åˆ«è´Ÿè´£åˆ¤æ–­å½“å‰çš„$x$æ˜¯æ¥è‡ªXçš„æ ·æœ¬è¿˜æ˜¯æ¥è‡ªQç”Ÿæˆçš„æ ·æœ¬ï¼Œä»¥åŠè´Ÿè´£åˆ¤æ–­å½“å‰çš„$y$æ˜¯æ¥è‡ªYçš„æ ·æœ¬è¿˜æ˜¯æ¥è‡ªPç”Ÿæˆçš„æ ·æœ¬ã€‚</p><p>å¯¹äºæ˜ å°„å‡½æ•°På’Œå¯¹åº”çš„å¯¹æŠ—æ ·æœ¬åˆ¤åˆ«å™¨$D_y$ï¼Œå¯¹æŠ—æŸå¤±å‡½æ•°ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}\min _{P} \max _{D} Y V\left(P, D_{Y}, X, Y\right)=E_{y \sim P_{\text {data}}(y)}\left[\log D_{Y}(y)\right] &+\\E_{x \sim P_{\text {data}}(x)}\left[\log \left(1-D_{Y}(P(x))\right)\right] &]\end{aligned}</script><p>æœ€å°åŒ–æ˜ å°„å‡½æ•°Pï¼Œæœ€å¤§åŒ–å¯¹æŠ—åˆ¤åˆ«å™¨$D_y$ã€‚</p><p>Pæ˜ å°„çš„ç›®çš„æ˜¯ç”Ÿæˆå¯¹æŠ—æ ·æœ¬$yâ€™=P(x)$ï¼Œè®©$yâ€™$çœ‹èµ·æ¥åƒæ˜¯ä»Yä¸­æ¥çš„ä¸€æ ·ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç†è§£æˆï¼ŒæŠŠå¤§é‡çš„æ¥è‡ªäºYçš„ç‰¹æ€§ç»™æ·»åŠ åˆ°æ¥è‡ªäºXçš„$x$ä¸­ã€‚åŒæ—¶è®­ç»ƒä¸€ä¸ªè¾¨åˆ«å™¨$D_y$ï¼Œè¾¨åˆ«çœŸæ­£çš„$y$ä¸Pç”Ÿæˆå‡ºæ¥çš„$yâ€™$ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>paper</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fuzzing</tag>
      
      <tag>Robustness</tag>
      
      <tag>DeepÂ NeuralÂ Networks</tag>
      
      <tag>Coverage</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€è®ºæ–‡é˜…è¯»ç¬”è®°ã€‘Towards Evaluating the Robustness of Neural Networks</title>
    <link href="/2020/06/27/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Towards-Evaluating-the-Robustness-of-Neural-Networks/"/>
    <url>/2020/06/27/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Towards-Evaluating-the-Robustness-of-Neural-Networks/</url>
    
    <content type="html"><![CDATA[<p>2017å¹´çš„æ”»å‡»æ–‡ç« ï¼Œç›®æ ‡æ˜¯å½“æ—¶é˜²å¾¡æ€§è¾ƒé«˜çš„<strong>é˜²å¾¡æ€§è’¸é¦</strong>æ¨¡å‹ï¼Œå±äºå›¾åƒåˆ†ç±»æ¨¡å‹ã€‚ç»“æœæ˜¯æˆåŠŸä»¤å…¶é²æ£’æ€§ä¸‹é™ã€‚æ–‡ç« æœ€åçš„ç»“è®ºæ˜¯ï¼Œåšé˜²å¾¡çš„äººåº”è¯¥ç”¨è¾ƒå…ˆè¿›çš„æ”»å‡»æ‰‹æ®µæµ‹è¯•è‡ªå·±çš„æ¨¡å‹ï¼ŒåŒæ—¶åº”è¯¥æ³¨æ„é˜²å¾¡å¯¹æŠ—æ ·æœ¬çš„è¿ç§»ç‰¹æ€§ï¼Œå³åœ¨å…¶ä»–å¼±æ¨¡å‹ä¸Šç”Ÿæˆæ ·æœ¬ååœ¨ç›®æ ‡æ¨¡å‹ä¸Šæµ‹è¯•çš„è¡Œä¸ºã€‚<br><!--more---></p><blockquote><p>è­¦å‘Šï¼æœ¬æ–‡ä¸ºç®€è¯»ï¼Œå¤§é‡çœç•¥äº†åŸæ–‡å†…å®¹ï¼Œåªç•™ä¸‹äº†æˆ‘å…³æ³¨çš„ç»†èŠ‚ã€‚</p></blockquote><h1 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h1><p>é˜²å¾¡æ€§æ¨¡å‹è’¸é¦ï¼ˆDefensive distillationï¼‰æ˜¯è¿‘å¹´æ¥æŠµå¾¡å¯¹æŠ—æ ·æœ¬æ”»å‡»çš„æœ€æœ‰æ•ˆæ–¹æ³•ä¹‹ä¸€ã€‚é˜²å¾¡æ€§æ¨¡å‹è’¸é¦åº”ç”¨äºå‰é¦ˆç¥ç»ç½‘ç»œï¼Œåªéœ€ä¸€æ¬¡é‡è®­ç»ƒï¼Œå°±èƒ½å°†æ”»å‡»æˆåŠŸç‡ä»95%é™è‡³0.5%ã€‚</p><p>ç›®å‰æœ‰ä¸¤ç§è¡¡é‡ç¥ç»ç½‘ç»œé²æ£’æ€§çš„æ–¹æ³•ï¼Œä¸€æ˜¯è¯•å›¾è¯æ˜ä¸€ä¸ªä¸‹ç•Œï¼ŒäºŒæ˜¯æ”»å‡»æ¨¡å‹ï¼Œè¯•å›¾å±•ç¤ºä¸€ä¸ªä¸Šç•Œã€‚ç¬¬ä¸€ç§æ–¹æ³•æ˜¾ç„¶æ›´åŠ éš¾ä»¥å®è·µï¼Œä½†æ˜¯å¦‚æœæ”»å‡»ç®—æ³•ä¸å¤Ÿå¥½ï¼Œç¬¬äºŒç§æ–¹æ³•å¾—åˆ°çš„ç»“æœä¹Ÿæ²¡æœ‰è¯´æœåŠ›ã€‚</p><p>æœ¬æ–‡æ„å»ºä¸€ç³»åˆ—æ”»å‡»æ‰‹æ®µï¼Œå¯ä»¥ç”¨äºæ„å»ºé²æ£’æ€§ä¸Šç•Œã€‚</p><p>æœ¬æ–‡è¿˜å»ºè®®ä½¿ç”¨é«˜ç½®ä¿¡åº¦ï¼ˆhigh-confidenceï¼‰çš„å¯¹æŠ—æ€§ç¤ºä¾‹æ¥è¯„ä¼°æ¨¡å‹çš„é²æ£’æ€§ã€‚</p><p>å¯¹æŠ—æ ·æœ¬æœ‰è½¬ç§»æ€§ï¼Œå¯ä»¥ä½¿ç”¨ä¸å®‰å…¨çš„æ¨¡å‹æ‰¾å‡ºå¯¹æŠ—æ ·æœ¬ï¼Œè¿™äº›å¯¹æŠ—æ ·æœ¬åœ¨é‡‡å–è’¸é¦é˜²å¾¡çš„æ¨¡å‹ä¸ŠåŒæ ·æœ‰æ•ˆã€‚</p><p>æ¢å¥è¯è¯´ï¼Œæœ‰æ•ˆçš„é˜²å¾¡æ‰‹æ®µå¿…é¡»ç ´åè½¬ç§»æ€§</p><p>æ€»çš„æ¥è¯´ï¼Œæœ¬æ–‡çš„è´¡çŒ®æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ol><li>å¼•å…¥äº†æ”»å‡»æ‰‹æ®µï¼Œåˆ†åˆ«ä»¥$L<em>0$ï¼Œ$L_2$ï¼Œ$L</em>{infty}$ä½œä¸ºè·ç¦»æŒ‡æ ‡ã€‚</li><li>è°ƒç ”äº†ä¼˜åŒ–ç›®æ ‡å¯¹ç”Ÿæˆå¯¹æŠ—æ ·æœ¬çš„å½±å“ã€‚</li></ol><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>ç›®å‰ç”Ÿæˆå¯¹æŠ—æ ·æœ¬çš„å…³é”®é—®é¢˜ä¹‹ä¸€æ˜¯æ·»åŠ distortionçš„ç¨‹åº¦ã€‚ä¸åŒé¢†åŸŸçš„distance metricè‚¯å®šæ˜¯ä¸åŒçš„ã€‚</p><p>æœ¬æ–‡é»˜è®¤çš„æ”»å‡»æ–¹æ³•æ˜¯ç™½ç›’æ”»å‡»ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿ç§»çš„æ–¹æ³•ï¼Œå°†ç™½ç›’ç”Ÿæˆçš„å¯¹æŠ—æ ·æœ¬è¿ç§»åˆ°ç›®æ ‡æ ·æœ¬çš„é»‘ç›’æµ‹è¯•ä¸­ã€‚</p><p>ç¥ç»ç½‘ç»œçš„robustnesså®šä¹‰ä¸ºç”Ÿæˆå¯¹æŠ—æ ·æœ¬çš„å®¹æ˜“ç¨‹åº¦ã€‚</p><p>æœ¬æ–‡æ”»å‡»çš„å¯¹è±¡æ˜¯ä»¥æ¨¡å‹è’¸é¦ä¸ºé˜²å¾¡æ–¹æ³•çš„æ¨¡å‹ã€‚è¿™ç§æ–¹æ³•èƒ½å¤Ÿé˜²å¾¡ä½è¿„ä»Šä¸ºæ­¢çš„å¤§éƒ¨åˆ†æ”»å‡»æ‰‹æ®µã€‚</p><p>æœ¬æ–‡æ”»å‡»çš„æ¨¡å‹çš†ä¸ºå›¾åƒè¯†åˆ«é¢†åŸŸçš„måˆ†ç±»å™¨ï¼Œè¾“å‡ºå±‚ä¸ºsoftmaxå±‚ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€è¾“å‡ºå‘é‡ç»´åº¦ä¸ºmï¼Œ$y_i$å³ä¸ºæ ·æœ¬åˆ†ç±»ä¸ºiçš„æ¦‚ç‡ã€‚</p><p>å¯¹æŠ—æ”»å‡»åˆ†ä¸ºå¸¦ç›®æ ‡çš„å’Œä¸å¸¦ç›®æ ‡çš„ã€‚æœ¬æ–‡å°†å¸¦ç›®æ ‡æ”»å‡»åˆ†æˆä¸‰ç§æƒ…å†µï¼š</p><p>ä¸€èˆ¬æƒ…å†µï¼šåœ¨ä¸æ˜¯æ­£ç¡®æ ‡ç­¾çš„æ ‡ç­¾ä¸­éšæœºé€‰æ‹©ç›®æ ‡ç±»åˆ«ã€‚</p><p>æœ€ä½³æƒ…å†µï¼šå¯¹æ‰€æœ‰ä¸æ­£ç¡®çš„ç±»åˆ«è¿›è¡Œæ”»å‡»ï¼Œå¹¶æŠ¥å‘Šæœ€éš¾æ”»å‡»çš„ç›®æ ‡ç±»åˆ«ã€‚</p><p>åœ¨æ‰€æœ‰è¯„ä¼°ä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œæ‰€æœ‰ä¸‰ç§ç±»å‹çš„æ”»å‡»ï¼šæœ€ä½³æƒ…å†µï¼Œå¹³å‡æƒ…å†µå’Œæœ€åæƒ…å†µã€‚</p><p>è¯·æ³¨æ„ï¼Œå¦‚æœåˆ†ç±»å™¨åœ¨80ï¼…çš„æ—¶é—´ä¸­ä»…æ˜¯å‡†ç¡®çš„ï¼Œåˆ™æœ€ä½³æ¡ˆä¾‹æ”»å‡»å°†éœ€è¦åœ¨20ï¼…çš„æ¡ˆä¾‹ä¸­å°†å…¶æ›´æ”¹ä¸º0ã€‚</p><p>æ— è®ºæ˜¯L0,L2,Looï¼Œæ²¡æœ‰è·ç¦»åº¦é‡æ˜¯äººç±»æ„ŸçŸ¥ç›¸ä¼¼æ€§çš„å®Œç¾åº¦é‡ï¼Œå¹¶ä¸”æˆ‘ä»¬æ²¡æœ‰å‡†ç¡®åˆ¤æ–­å“ªä¸ªè·ç¦»åº¦é‡æ˜¯æœ€ä½³çš„ã€‚</p><p><strong>é˜²å¾¡æ€§è’¸é¦</strong>ï¼šä»¥æ ‡å‡†æ–¹å¼åœ¨è®­ç»ƒæ•°æ®ä¸Šè®­ç»ƒå…·æœ‰ç›¸åŒæ¶æ„çš„ç½‘ç»œã€‚å½“æˆ‘ä»¬åœ¨è®­ç»ƒè¯¥ç½‘ç»œæ—¶è®¡ç®—softmaxæ—¶ï¼Œå°†å…¶æ›¿æ¢ä¸ºæ›´å¹³æ»‘çš„softmaxç‰ˆæœ¬ï¼ˆå°†å¯¹æ•°é™¤ä»¥æŸä¸ªå¸¸æ•°Tï¼‰ã€‚</p><p>è®­ç»ƒç»“æŸåï¼Œè¾“å…¥è®­ç»ƒé›†å¾—åˆ°æ¨¡å‹æ¨æ–­çš„æ ‡ç­¾ï¼Œæ”¶é›†è¿™äº›æ ‡ç­¾å¹¶ä»£æ›¿çœŸå®æ ‡ç­¾ï¼Œå†è®­ç»ƒç¬¬äºŒä¸ªç½‘ç»œã€‚</p><p>è¿™æ ·åšçš„ç†ç”±æ˜¯ï¼Œæå‡ºè’¸é¦é˜²å¾¡çš„äººè®¤ä¸ºï¼Œå¯¹æŠ—æ ·æœ¬æ˜¯æ¨¡å‹è¿‡æ‹Ÿåˆçš„ä½“ç°ï¼Œé‚£ä¹ˆé¿å…è¿‡æ‹Ÿåˆå¯èƒ½ä¼šæ¶ˆé™¤é«˜ç»´ç©ºé—´ä¸­çš„ç›²ç‚¹ã€‚</p><p>ä½†äº‹å®ä¸Šè’¸é¦ä¸ä¼šå¢åŠ ç½‘ç»œå¥å£®æ€§ã€‚</p><h1 id="æ”»å‡»æ–¹æ³•"><a href="#æ”»å‡»æ–¹æ³•" class="headerlink" title="æ”»å‡»æ–¹æ³•"></a>æ”»å‡»æ–¹æ³•</h1><h2 id="L-BFGS"><a href="#L-BFGS" class="headerlink" title="L-BFGS"></a>L-BFGS</h2><p>æ‰¾å¯¹æŠ—æ ·æœ¬çš„è¿‡ç¨‹å»ºæ¨¡ä¸ºä¼˜åŒ–è¿‡ç¨‹ã€‚<br><img src="/2020/06/27/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Towards-Evaluating-the-Robustness-of-Neural-Networks/2020-06-27-23-41-04.png" alt><br>losså‡½æ•°å¯ä»¥å–äº¤å‰ç†µã€‚ä¸Šå¼æ±‚è§£çš„æ˜¯cï¼Œä½¿ç”¨çš„è·ç¦»æ˜¯$L_2$</p><h2 id="FGSM"><a href="#FGSM" class="headerlink" title="FGSM"></a>FGSM</h2><p>ç”¨çš„æ˜¯$L_{\infty}$</p><h2 id="JSMA"><a href="#JSMA" class="headerlink" title="JSMA"></a>JSMA</h2><p>Jacobian-based Saliency Map Attack</p><p>JSMAä½¿ç”¨çš„ä¸æ˜¯softmaxçš„è¾“å‡ºï¼Œè€Œæ˜¯softmaxçš„è¾“å…¥ï¼Œæ¢å¥è¯è¯´å°±æ˜¯å‰ä¸€å±‚çš„è¾“å‡ºã€‚$L_0$</p><h2 id="DeepFool"><a href="#DeepFool" class="headerlink" title="DeepFool"></a>DeepFool</h2><p>$L_2$</p><h1 id="å®éªŒè®¾è®¡"><a href="#å®éªŒè®¾è®¡" class="headerlink" title="å®éªŒè®¾è®¡"></a>å®éªŒè®¾è®¡</h1><p><img src="/2020/06/27/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Towards-Evaluating-the-Robustness-of-Neural-Networks/2020-06-27-23-54-11.png" alt></p><p><img src="/2020/06/27/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Towards-Evaluating-the-Robustness-of-Neural-Networks/2020-06-27-23-54-31.png" alt></p>]]></content>
    
    
    <categories>
      
      <category>paper</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Robustness</tag>
      
      <tag>DeepÂ NeuralÂ Networks</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€è®ºæ–‡é˜…è¯»ç¬”è®°ã€‘Fuzzing: A Survey</title>
    <link href="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing-A-Survey/"/>
    <url>/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing-A-Survey/</url>
    
    <content type="html"><![CDATA[<p>2018å¹´CyberSecurityæ”¶å½•çš„ä¸€ç¯‡å…³äºè½¯ä»¶æµ‹è¯•ä¸­æ¨¡ç³Šæµ‹è¯•çš„ç»¼è¿°ã€‚ä½œè€…æ¥è‡ªæ¸…åå¤§å­¦ã€‚æ–‡ç« åè¶ŠçŸ­è¶Šéœ¸æ°”ã€‚<br><!--more---></p><blockquote><p>è­¦å‘Šï¼æœ¬æ–‡åœ¨å†™ä½œè¿‡ç¨‹ä¸­å¤§é‡ä½¿ç”¨äº†è°·æ­Œç¿»è¯‘ã€‚</p></blockquote><h1 id="ä¸€ã€å¼•è¨€"><a href="#ä¸€ã€å¼•è¨€" class="headerlink" title="ä¸€ã€å¼•è¨€"></a>ä¸€ã€å¼•è¨€</h1><p>æ¨¡ç³Šæµ‹è¯•å‡ ä¹ä¸éœ€è¦äº†è§£ç›®æ ‡ï¼Œå¹¶ä¸”å¯ä»¥è½»æ¾æ‰©å±•åˆ°å¤§å‹åº”ç”¨ç¨‹åºï¼Œå› æ­¤å·²æˆä¸ºæœ€å—æ¬¢è¿çš„æ¼æ´å‘ç°è§£å†³æ–¹æ¡ˆ</p><p>æ¨¡ç³Šçš„éšæœºæ€§å’Œç›²ç›®æ€§å¯¼è‡´å‘ç°é”™è¯¯çš„æ•ˆç‡ä½ä¸‹</p><p>åé¦ˆé©±åŠ¨çš„æ¨¡ç³Šæ¨¡å¼ï¼ˆfeedback-driven fuzzing modeï¼‰å’Œé—ä¼ ç®—æ³•ï¼ˆgenetic algorithmsï¼‰çš„ç»“åˆæä¾›äº†æ›´çµæ´»å’Œå¯è‡ªå®šä¹‰çš„æ¨¡ç³Šæ¡†æ¶ï¼Œå¹¶ä½¿æ¨¡ç³Šè¿‡ç¨‹æ›´åŠ æ™ºèƒ½å’Œé«˜æ•ˆã€‚</p><h1 id="äºŒã€èƒŒæ™¯"><a href="#äºŒã€èƒŒæ™¯" class="headerlink" title="äºŒã€èƒŒæ™¯"></a>äºŒã€èƒŒæ™¯</h1><p><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing-A-Survey/2020-06-26-22-37-23.png" alt></p><h2 id="1-é™æ€åˆ†æ"><a href="#1-é™æ€åˆ†æ" class="headerlink" title="1.é™æ€åˆ†æ"></a>1.é™æ€åˆ†æ</h2><p>é™æ€åˆ†æï¼ˆStatic Analysisï¼‰æ˜¯å¯¹åœ¨æ²¡æœ‰å®é™…æ‰§è¡Œç¨‹åºçš„æƒ…å†µä¸‹æ‰§è¡Œçš„ç¨‹åºçš„åˆ†æã€‚</p><p>é€šå¸¸å¯¹æºä»£ç æ‰§è¡Œé™æ€åˆ†æï¼Œæœ‰æ—¶è¿˜å¯¹ç›®æ ‡ä»£ç æ‰§è¡Œé™æ€åˆ†æã€‚é€šè¿‡åˆ†æè¯æ³•ï¼Œè¯­æ³•ï¼Œè¯­ä¹‰ç‰¹å¾ä»¥åŠæ•°æ®æµåˆ†æï¼Œæ¨¡å‹æ£€æŸ¥ï¼Œé™æ€åˆ†æï¼Œå¯ä»¥æ£€æµ‹åˆ°éšè—çš„é”™è¯¯ã€‚</p><p>é™æ€åˆ†æçš„ä¼˜ç‚¹æ˜¯æ£€æµ‹é€Ÿåº¦å¿«ã€‚</p><p>ç”±äºç¼ºä¹æ˜“äºä½¿ç”¨çš„æ¼æ´æ£€æµ‹æ¨¡å‹ï¼Œå› æ­¤é™æ€åˆ†æå·¥å…·å®¹æ˜“äº§ç”Ÿå¤§é‡è¯¯æŠ¥ã€‚å› æ­¤ï¼Œç¡®å®šé™æ€åˆ†æçš„ç»“æœä»ç„¶æ˜¯ä¸€é¡¹è‰°å·¨çš„å·¥ä½œã€‚</p><h2 id="2-åŠ¨æ€åˆ†æ"><a href="#2-åŠ¨æ€åˆ†æ" class="headerlink" title="2.åŠ¨æ€åˆ†æ"></a>2.åŠ¨æ€åˆ†æ</h2><p>åŠ¨æ€åˆ†æï¼ˆDynamic Analysisï¼‰ä¸é™æ€åˆ†æç›¸æ¯”ï¼Œåˆ†æäººå‘˜éœ€è¦åœ¨å®é™…ç³»ç»Ÿæˆ–ä»¿çœŸå™¨ä¸­æ‰§è¡Œç›®æ ‡ç¨‹åºã€‚</p><p>é€šè¿‡ç›‘è§†è¿è¡ŒçŠ¶æ€å¹¶åˆ†æè¿è¡Œæ—¶çŸ¥è¯†ï¼ŒåŠ¨æ€åˆ†æå·¥å…·å¯ä»¥ç²¾ç¡®åœ°æ£€æµ‹ç¨‹åºé”™è¯¯ã€‚</p><p>åŠ¨æ€åˆ†æçš„ä¼˜ç‚¹æ˜¯ç²¾åº¦é«˜ï¼Œç¼ºç‚¹æ˜¯é€Ÿåº¦æ…¢ï¼Œæ•ˆç‡ä½ï¼Œå¯¹æµ‹è¯•äººå‘˜çš„æŠ€æœ¯æ°´å¹³è¦æ±‚é«˜ï¼Œå¯æ‰©å±•æ€§å·®ï¼Œå¹¶ä¸”éš¾ä»¥è¿›è¡Œå¤§è§„æ¨¡æµ‹è¯•ã€‚</p><h2 id="3-ç¬¦å·æ‰§è¡Œ"><a href="#3-ç¬¦å·æ‰§è¡Œ" class="headerlink" title="3.ç¬¦å·æ‰§è¡Œ"></a>3.ç¬¦å·æ‰§è¡Œ</h2><p>ç¬¦å·æ‰§è¡Œï¼ˆSymbolic Executionï¼‰æ˜¯å¦ä¸€ç§å‘ç°æ¼æ´çš„æŠ€æœ¯ã€‚</p><p>é€šè¿‡ç¬¦å·åŒ–ç¨‹åºè¾“å…¥ï¼Œç¬¦å·æ‰§è¡Œä¸ºæ¯ä¸ªæ‰§è¡Œè·¯å¾„ç»´æŠ¤äº†ä¸€ç»„çº¦æŸï¼ˆconstraintï¼‰ã€‚</p><p>æ‰§è¡Œä¹‹åï¼Œçº¦æŸæ±‚è§£å™¨ï¼ˆconstraint solversï¼‰å°†ç”¨äºæ±‚è§£çº¦æŸå¹¶ç¡®å®šå¯¼è‡´æ‰§è¡Œçš„è¾“å…¥ã€‚</p><p>ä»æŠ€æœ¯ä¸Šè®²ï¼Œç¬¦å·æ‰§è¡Œå¯ä»¥è¦†ç›–ç¨‹åºä¸­çš„ä»»ä½•æ‰§è¡Œè·¯å¾„ï¼Œå¹¶ä¸”åœ¨å°å‹ç¨‹åºçš„æµ‹è¯•ä¸­å·²æ˜¾ç¤ºå‡ºè‰¯å¥½çš„æ•ˆæœï¼Œä½†ä¹Ÿå­˜åœ¨è®¸å¤šé™åˆ¶ã€‚</p><p>é¦–å…ˆï¼Œè·¯å¾„çˆ†ç‚¸é—®é¢˜ã€‚éšç€ç¨‹åºè§„æ¨¡çš„å¢é•¿ï¼Œæ‰§è¡ŒçŠ¶æ€ä¼šçˆ†ç‚¸ï¼Œè¿™è¶…å‡ºäº†çº¦æŸæ±‚è§£å™¨çš„æ±‚è§£èƒ½åŠ›ã€‚</p><p>ç¬¬äºŒï¼Œç¯å¢ƒçš„ç›¸äº’ä½œç”¨ã€‚åœ¨ç¬¦å·æ‰§è¡Œä¸­ï¼Œå½“ç›®æ ‡ç¨‹åºæ‰§è¡Œä¸ç¬¦å·æ‰§è¡Œç¯å¢ƒä¹‹å¤–çš„ç»„ä»¶äº¤äº’æ—¶ï¼Œä¾‹å¦‚ç³»ç»Ÿè°ƒç”¨ï¼Œå¤„ç†ä¿¡å·ç­‰ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸€è‡´æ€§é—®é¢˜ã€‚</p><p>å› æ­¤ç¬¦å·æ‰§è¡Œä»ç„¶å¾ˆéš¾æ‰©å±•åˆ°å¤§å‹åº”ç”¨ç¨‹åºã€‚</p><h2 id="4-æ¨¡ç³Šæµ‹è¯•"><a href="#4-æ¨¡ç³Šæµ‹è¯•" class="headerlink" title="4.æ¨¡ç³Šæµ‹è¯•"></a>4.æ¨¡ç³Šæµ‹è¯•</h2><p>æ¨¡ç³Šæµ‹è¯•ï¼ˆFuzzingï¼‰æ˜¯ç›®å‰æœ€æµè¡Œçš„æ¼æ´å‘ç°æŠ€æœ¯ã€‚</p><p>ä»æ¦‚å¿µä¸Šè®²ï¼Œæ¨¡ç³Šæµ‹è¯•ä»ä¸ºç›®æ ‡åº”ç”¨ç¨‹åºç”Ÿæˆå¤§é‡æ­£å¸¸å’Œå¼‚å¸¸è¾“å…¥å¼€å§‹ï¼Œå¹¶å°è¯•é€šè¿‡å°†ç”Ÿæˆçš„è¾“å…¥æä¾›ç»™ç›®æ ‡åº”ç”¨ç¨‹åºå¹¶ç›‘è§†æ‰§è¡ŒçŠ¶æ€æ¥æ£€æµ‹å¼‚å¸¸ã€‚</p><p>ä¸å…¶ä»–æŠ€æœ¯ç›¸æ¯”ï¼Œæ¨¡ç³Šæµ‹è¯•æ˜“äºéƒ¨ç½²å¹¶ä¸”å…·æœ‰è‰¯å¥½çš„å¯æ‰©å±•æ€§å’Œé€‚ç”¨æ€§ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æœ‰æˆ–æ²¡æœ‰æºä»£ç çš„æƒ…å†µä¸‹æ‰§è¡Œã€‚</p><p>æ­¤å¤–ï¼Œç”±äºæ¨¡ç³Šæµ‹è¯•æ˜¯åœ¨å®é™…æ‰§è¡Œä¸­æ‰§è¡Œçš„ï¼Œå› æ­¤å®ƒå…·æœ‰å¾ˆé«˜çš„å‡†ç¡®æ€§ã€‚</p><p>è€Œä¸”ï¼Œæ¨¡ç³Šæµ‹è¯•å‡ ä¹ä¸éœ€è¦äº†è§£ç›®æ ‡åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”å¯ä»¥è½»æ¾æ‰©å±•åˆ°å¤§å‹åº”ç”¨ç¨‹åºã€‚</p><p>å°½ç®¡æ¨¡ç³Šæµ‹è¯•å­˜åœ¨è®¸å¤šç¼ºç‚¹ï¼Œä¾‹å¦‚æ•ˆç‡ä½å’Œä»£ç è¦†ç›–ç‡ä½ï¼Œä½†æ˜¯ï¼Œç¼ºç‚¹å´èƒœè¿‡ç¼ºç‚¹ï¼Œæ¨¡ç³Šå¤„ç†å·²æˆä¸ºå½“å‰æœ€æœ‰æ•ˆï¼Œæœ€é«˜æ•ˆçš„æœ€æ–°æ¼æ´å‘ç°æŠ€æœ¯ã€‚</p><h1 id="ä¸‰ã€æ¨¡ç³Šæµ‹è¯•ä»‹ç»"><a href="#ä¸‰ã€æ¨¡ç³Šæµ‹è¯•ä»‹ç»" class="headerlink" title="ä¸‰ã€æ¨¡ç³Šæµ‹è¯•ä»‹ç»"></a>ä¸‰ã€æ¨¡ç³Šæµ‹è¯•ä»‹ç»</h1><h2 id="1-æ¨¡ç³Šæµ‹è¯•çš„å·¥ä½œè¿‡ç¨‹"><a href="#1-æ¨¡ç³Šæµ‹è¯•çš„å·¥ä½œè¿‡ç¨‹" class="headerlink" title="1.æ¨¡ç³Šæµ‹è¯•çš„å·¥ä½œè¿‡ç¨‹"></a>1.æ¨¡ç³Šæµ‹è¯•çš„å·¥ä½œè¿‡ç¨‹</h2><p><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing-A-Survey/2020-06-26-22-38-53.png" alt></p><p>æ¨¡ç³Šæµ‹è¯•åŒ…æ‹¬å››ä¸ªä¸»è¦é˜¶æ®µï¼Œå³æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆé˜¶æ®µï¼Œæµ‹è¯•ç”¨ä¾‹è¿è¡Œé˜¶æ®µï¼Œç¨‹åºæ‰§è¡ŒçŠ¶æ€ç›‘è§†å’Œå¼‚å¸¸åˆ†æã€‚</p><p>æ¨¡ç³Šæµ‹è¯•ä»ç”Ÿæˆä¸€å †ç¨‹åºè¾“å…¥ï¼ˆå³æµ‹è¯•ç”¨ä¾‹ï¼‰å¼€å§‹ã€‚ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹çš„è´¨é‡ç›´æ¥å½±å“æµ‹è¯•æ•ˆæœã€‚</p><p>ä¸€æ–¹é¢ï¼Œè¾“å…¥åº”å°½å¯èƒ½æ»¡è¶³æµ‹è¯•ç¨‹åºå¯¹è¾“å…¥æ ¼å¼çš„è¦æ±‚ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œåº”å……åˆ†ç ´åè¾“å…¥ï¼Œä»¥ä¾¿å¯¹è¿™äº›è¾“å…¥è¿›è¡Œå¤„ç†å¾ˆå¯èƒ½ä¼šä½¿ç¨‹åºå¤±è´¥ã€‚</p><p>æ ¹æ®ç›®æ ‡ç¨‹åºï¼Œè¾“å…¥å¯ä»¥æ˜¯å…·æœ‰ä¸åŒæ–‡ä»¶æ ¼å¼çš„æ–‡ä»¶ï¼Œç½‘ç»œé€šä¿¡æ•°æ®ï¼Œå…·æœ‰æŒ‡å®šç‰¹å¾çš„å¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ç­‰ã€‚</p><p>å¦‚ä½•ç”Ÿæˆè¶³å¤Ÿå¤šçš„æµ‹è¯•ç”¨ä¾‹æ˜¯Fuzzeré¢ä¸´çš„ä¸»è¦æŒ‘æˆ˜ã€‚</p><p>åœ¨ä¸Šä¸€é˜¶æ®µç”Ÿæˆæµ‹è¯•ç”¨ä¾‹åï¼Œå°†å®ƒä»¬é¦ˆé€åˆ°ç›®æ ‡ç¨‹åºã€‚</p><p>æ¨¡ç³Šæµ‹è¯•å™¨è‡ªåŠ¨å¼€å§‹å’Œå®Œæˆç›®æ ‡ç¨‹åºçš„è¿‡ç¨‹ï¼Œå¹¶é©±åŠ¨ç›®æ ‡ç¨‹åºçš„æµ‹è¯•ç”¨ä¾‹å¤„ç†è¿‡ç¨‹ã€‚</p><p>åœ¨æ‰§è¡Œä¹‹å‰ï¼Œåˆ†æäººå‘˜å¯ä»¥é…ç½®ç›®æ ‡ç¨‹åºçš„å¯åŠ¨å’Œå®Œæˆæ–¹å¼ï¼Œå¹¶é¢„å®šä¹‰å‚æ•°å’Œç¯å¢ƒå˜é‡ã€‚</p><p>é€šå¸¸ï¼Œæ¨¡ç³Šå¤„ç†è¿‡ç¨‹åœ¨é¢„å®šä¹‰çš„è¶…æ—¶ã€ç¨‹åºæ‰§è¡ŒæŒ‚èµ·æˆ–å´©æºƒæ—¶åœæ­¢ã€‚</p><p>æ¨¡ç³Šå™¨åœ¨ç›®æ ‡ç¨‹åºæ‰§è¡ŒæœŸé—´ç›‘è§†æ‰§è¡ŒçŠ¶æ€ï¼Œä»¥é˜²å¼‚å¸¸å’Œå´©æºƒã€‚</p><p>å¸¸ç”¨çš„å¼‚å¸¸ç›‘è§†æ–¹æ³•åŒ…æ‹¬ç›‘è§†ç‰¹å®šçš„ç³»ç»Ÿä¿¡å·ï¼Œå´©æºƒå’Œå…¶ä»–è¿è§„ï¼ˆviolationsï¼‰ã€‚</p><p>å½“æ•è·åˆ°è¿è§„æ—¶ï¼Œæ¨¡ç³Šå™¨å°†å­˜å‚¨ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹ï¼Œä»¥ä¾›ä»¥åé‡æ’­å’Œåˆ†æã€‚</p><p>åœ¨åˆ†æé˜¶æ®µï¼Œåˆ†æäººå‘˜å°è¯•ç¡®å®šæ•è·çš„è¿è§„çš„ä½ç½®å’Œæ ¹æœ¬åŸå› ã€‚</p><p>è‡ªåŠ¨å´©æºƒåˆ†ææ˜¯å¦ä¸€ä¸ªé‡è¦çš„ç ”ç©¶é¢†åŸŸã€‚</p><h2 id="2-æ¨¡ç³Šæµ‹è¯•å™¨çš„ç§ç±»"><a href="#2-æ¨¡ç³Šæµ‹è¯•å™¨çš„ç§ç±»" class="headerlink" title="2.æ¨¡ç³Šæµ‹è¯•å™¨çš„ç§ç±»"></a>2.æ¨¡ç³Šæµ‹è¯•å™¨çš„ç§ç±»</h2><h3 id="A-åŸºäºç”Ÿæˆå’ŒåŸºäºçªå˜"><a href="#A-åŸºäºç”Ÿæˆå’ŒåŸºäºçªå˜" class="headerlink" title="A.åŸºäºç”Ÿæˆå’ŒåŸºäºçªå˜"></a>A.åŸºäºç”Ÿæˆå’ŒåŸºäºçªå˜</h3><p>æ¨¡ç³Šå™¨å¯ä»¥åˆ†ä¸ºåŸºäºç”Ÿæˆï¼ˆgeneration basedï¼‰å’ŒåŸºäºçªå˜ï¼ˆmutation basedï¼‰ä¸¤ç±»ã€‚</p><p>å¯¹äºåŸºäºç”Ÿæˆçš„æ¨¡ç³Šå™¨ï¼Œéœ€è¦æœ‰å…³ç¨‹åºè¾“å…¥çš„çŸ¥è¯†ã€‚</p><p>å¯¹äºæ–‡ä»¶æ ¼å¼æ¨¡ç³Šæµ‹è¯•ï¼ˆfile format fuzzingï¼‰ï¼Œé€šå¸¸ä¼šæä¾›ä¸€ä¸ªé¢„å®šä¹‰æ–‡ä»¶æ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚æµ‹è¯•ç”¨ä¾‹æ ¹æ®é…ç½®æ–‡ä»¶ç”Ÿæˆã€‚</p><p>æœ‰äº†ç»™å®šçš„æ–‡ä»¶æ ¼å¼çŸ¥è¯†ï¼ˆfile format knowledgeï¼‰ï¼ŒåŸºäºç”Ÿæˆçš„æ¨¡ç³Šå™¨ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹å°±å¯ä»¥æ›´è½»æ¾åœ°é€šè¿‡ç¨‹åºçš„éªŒè¯ï¼Œå¹¶ä¸”æ›´æœ‰å¯èƒ½æµ‹è¯•ç›®æ ‡ç¨‹åºçš„æ›´æ·±å±‚ä»£ç ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰å‹å¥½çš„æ–‡æ¡£ï¼Œåˆ†ææ–‡ä»¶æ ¼å¼å°†æ˜¯ä¸€é¡¹è‰°å·¨çš„å·¥ä½œã€‚</p><p>å› æ­¤ï¼ŒåŸºäºå˜å¼‚çš„æ¨¡ç³Šå™¨æ›´å®¹æ˜“å¯åŠ¨å¹¶ä¸”æ›´é€‚ç”¨ï¼Œå¹¶ä¸”è¢«æœ€æ–°çš„æ¨¡ç³Šå™¨å¹¿æ³›ä½¿ç”¨ã€‚</p><p>å¯¹äºåŸºäºçªå˜çš„æ¨¡ç³Šå™¨ï¼Œéœ€è¦ä¸€ç»„æœ‰æ•ˆçš„åˆå§‹è¾“å…¥ï¼ˆa set of valid initial inputsï¼‰ã€‚</p><p>æµ‹è¯•ç”¨ä¾‹æ˜¯é€šè¿‡å¯¹åˆå§‹è¾“å…¥å’Œæµ‹è¯•è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æµ‹è¯•ç”¨ä¾‹è¿›è¡Œå˜å¼‚è€Œç”Ÿæˆçš„ã€‚</p><p><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing-A-Survey/2020-06-26-22-43-30.png" alt></p><h3 id="B-é»‘ç›’ç™½ç›’ç°ç›’"><a href="#B-é»‘ç›’ç™½ç›’ç°ç›’" class="headerlink" title="B.é»‘ç›’ç™½ç›’ç°ç›’"></a>B.é»‘ç›’ç™½ç›’ç°ç›’</h3><p>å…³äºå¯¹ç¨‹åºæºä»£ç çš„ä¾èµ–æ€§ï¼ˆthe dependence on program source<br>codeï¼‰å’Œç¨‹åºåˆ†æçš„ç¨‹åº¦ï¼ˆthe degree of program analysisï¼‰ï¼Œæ¨¡ç³Šå™¨å¯ä»¥åˆ†ä¸ºç™½ç›’ï¼Œç°ç›’å’Œé»‘ç›’ï¼ˆwhite box, gray box and black boxï¼‰ã€‚</p><p>ç™½ç›’æ¨¡ç³Šæµ‹è¯•å™¨å¯ä»¥è®¿é—®ç¨‹åºçš„æºä»£ç ï¼Œå› æ­¤å¯ä»¥é€šè¿‡å¯¹æºä»£ç è¿›è¡Œåˆ†æä»¥åŠæµ‹è¯•ç”¨ä¾‹å¦‚ä½•å½±å“ç¨‹åºè¿è¡ŒçŠ¶æ€æ¥æ”¶é›†æ›´å¤šä¿¡æ¯ã€‚</p><p>é»‘ç›’æ¨¡ç³Šå™¨ä¼šåœ¨ä¸äº†è§£ç›®æ ‡ç¨‹åºå†…éƒ¨çš„æƒ…å†µä¸‹è¿›è¡Œæ¨¡ç³Šæµ‹è¯•ã€‚</p><p>ç°ç®±æ¨¡ç³Šå™¨ä¹Ÿä¸ä½¿ç”¨æºä»£ç ï¼Œä½†å¯ä»¥é€šè¿‡ç¨‹åºåˆ†æè·å¾—ç›®æ ‡ç¨‹åºçš„å†…éƒ¨ä¿¡æ¯ã€‚</p><p><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing-A-Survey/2020-06-26-22-44-18.png" alt></p><h3 id="C-å®šå‘æ¨¡ç³Šå’ŒåŸºäºè¦†ç›–çš„æ¨¡ç³Š"><a href="#C-å®šå‘æ¨¡ç³Šå’ŒåŸºäºè¦†ç›–çš„æ¨¡ç³Š" class="headerlink" title="C.å®šå‘æ¨¡ç³Šå’ŒåŸºäºè¦†ç›–çš„æ¨¡ç³Š"></a>C.å®šå‘æ¨¡ç³Šå’ŒåŸºäºè¦†ç›–çš„æ¨¡ç³Š</h3><p>æ ¹æ®æ¢ç´¢ç¨‹åºçš„ç­–ç•¥ï¼ˆthe strategies of exploring the programsï¼‰ï¼Œæ¨¡ç³Šå™¨å¯ä»¥åˆ†ä¸ºå®šå‘æ¨¡ç³Šï¼ˆdirected fuzzingï¼‰å’ŒåŸºäºè¦†ç›–çš„æ¨¡ç³Šï¼ˆcoverage-based fuzzingï¼‰ã€‚</p><p>å®šå‘æ¨¡ç³Šå™¨æ—¨åœ¨ç”Ÿæˆè¦†ç›–ç›®æ ‡ä»£ç å’Œç¨‹åºç›®æ ‡è·¯å¾„çš„æµ‹è¯•ç”¨ä¾‹ï¼ˆcover target code and target paths of programsï¼‰ï¼Œè€ŒåŸºäºè¦†ç›–ç‡çš„æ¨¡ç³Šå™¨æ—¨åœ¨ç”Ÿæˆè¦†ç›–å°½å¯èƒ½å¤šçš„ç¨‹åºä»£ç çš„æµ‹è¯•ç”¨ä¾‹ï¼ˆcover as much code of programs as possibleï¼‰ã€‚</p><p>å®šå‘æ¨¡ç³Šå™¨æœŸæœ›å¯¹ç¨‹åºè¿›è¡Œæ›´å¿«çš„æµ‹è¯•ï¼Œè€ŒåŸºäºè¦†ç›–ç‡çš„æ¨¡ç³Šå™¨æœŸæœ›è¿›è¡Œæ›´å½»åº•çš„æµ‹è¯•å¹¶æ£€æµ‹åˆ°å°½å¯èƒ½å¤šçš„é”™è¯¯ã€‚</p><p>å¯¹äºå®šå‘æ¨¡ç³Šå™¨å’ŒåŸºäºè¦†ç›–çš„æ¨¡ç³Šå™¨ï¼Œå¦‚ä½•æå–æ‰§è¡Œè·¯å¾„çš„ä¿¡æ¯æ˜¯ä¸€ä¸ªå…³é”®é—®é¢˜ã€‚</p><h3 id="D-å“‘æ¨¡ç³Šå’Œæ™ºèƒ½æ¨¡ç³Š"><a href="#D-å“‘æ¨¡ç³Šå’Œæ™ºèƒ½æ¨¡ç³Š" class="headerlink" title="D.å“‘æ¨¡ç³Šå’Œæ™ºèƒ½æ¨¡ç³Š"></a>D.å“‘æ¨¡ç³Šå’Œæ™ºèƒ½æ¨¡ç³Š</h3><p>æ ¹æ®å¯¹ç¨‹åºæ‰§è¡ŒçŠ¶æ€çš„ç›‘è§†å’Œæµ‹è¯•ç”¨ä¾‹çš„ç”Ÿæˆä¹‹é—´æ˜¯å¦å­˜åœ¨åé¦ˆï¼ˆwhether there is a feedback between the monitoring of program execution state and testcase generationï¼‰ï¼Œæ¨¡ç³Šå™¨å¯ä»¥åˆ†ä¸ºå“‘ç±»ï¼ˆdumb fuzzï¼‰å’Œæ™ºèƒ½ç±»ï¼ˆsmart fuzzï¼‰ã€‚</p><p>æ™ºèƒ½æ¨¡ç³Šå™¨ä¼šæ ¹æ®æ”¶é›†çš„ä¿¡æ¯ï¼ˆæµ‹è¯•ç”¨ä¾‹å¦‚ä½•å½±å“ç¨‹åºè¡Œä¸ºï¼‰æ¥è°ƒæ•´æµ‹è¯•ç”¨ä¾‹çš„ç”Ÿæˆã€‚</p><p>å¯¹äºåŸºäºå˜å¼‚çš„æ¨¡ç³Šæµ‹è¯•å™¨ï¼Œåé¦ˆä¿¡æ¯å¯ç”¨äºç¡®å®šåº”è¯¥å¯¹æµ‹è¯•ç”¨ä¾‹çš„å“ªä¸€éƒ¨åˆ†è¿›è¡Œå˜å¼‚ä»¥åŠå¯¹å®ƒä»¬è¿›è¡Œå˜å¼‚çš„æ–¹å¼ã€‚</p><p>å“‘æ¨¡ç³Šæµ‹è¯•å™¨ï¼ˆDumb fuzzersï¼‰å…·æœ‰æ›´å¥½çš„æµ‹è¯•é€Ÿåº¦ï¼ˆspeedï¼‰ï¼Œè€Œæ™ºèƒ½æ¨¡ç³Šæµ‹è¯•å™¨å¯ä»¥ç”Ÿæˆæ›´å¥½çš„æµ‹è¯•ç”¨ä¾‹å¹¶è·å¾—æ›´é«˜çš„æ•ˆç‡ï¼ˆefficiencyï¼‰ã€‚</p><h2 id="3-æ¨¡ç³Šæµ‹è¯•é¢ä¸´çš„æŒ‘æˆ˜"><a href="#3-æ¨¡ç³Šæµ‹è¯•é¢ä¸´çš„æŒ‘æˆ˜" class="headerlink" title="3.æ¨¡ç³Šæµ‹è¯•é¢ä¸´çš„æŒ‘æˆ˜"></a>3.æ¨¡ç³Šæµ‹è¯•é¢ä¸´çš„æŒ‘æˆ˜</h2><h3 id="A-å¦‚ä½•æ”¹å˜ç§å­è¾“å…¥çš„æŒ‘æˆ˜"><a href="#A-å¦‚ä½•æ”¹å˜ç§å­è¾“å…¥çš„æŒ‘æˆ˜" class="headerlink" title="A.å¦‚ä½•æ”¹å˜ç§å­è¾“å…¥çš„æŒ‘æˆ˜"></a>A.å¦‚ä½•æ”¹å˜ç§å­è¾“å…¥çš„æŒ‘æˆ˜</h3><p>åŸºäºå˜å¼‚çš„æ¨¡ç³Šæµ‹è¯•å·¥å…·åœ¨è¿›è¡Œå˜å¼‚æ—¶éœ€è¦å›ç­”ä¸¤ä¸ªé—®é¢˜ï¼šï¼ˆ1ï¼‰å˜å¼‚çš„ä½ç½®ï¼Œä»¥åŠï¼ˆ2ï¼‰å˜å¼‚çš„æ–¹å¼ã€‚</p><p>åªæœ‰å‡ ä¸ªå…³é”®ä½ç½®çš„çªå˜ä¼šå½±å“æ‰§è¡Œçš„æ§åˆ¶æµç¨‹ã€‚å› æ­¤ï¼Œå¦‚ä½•åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­å®šä½è¿™äº›å…³é”®ä½ç½®éå¸¸é‡è¦ã€‚</p><p>æ­¤å¤–ï¼Œæ¨¡ç³Šå™¨æ”¹å˜å…³é”®ä½ç½®çš„æ–¹å¼æ˜¯å¦ä¸€ä¸ªå…³é”®é—®é¢˜ï¼Œå³å¦‚ä½•ç¡®å®šå¯ä»¥å°†æµ‹è¯•å®šå‘åˆ°ç¨‹åºæœ‰è¶£è·¯å¾„çš„å€¼ã€‚</p><p>ç®€è€Œè¨€ä¹‹ï¼Œæµ‹è¯•ç”¨ä¾‹çš„ç›²ç›®çªå˜ä¼šä¸¥é‡æµªè´¹æµ‹è¯•èµ„æºï¼Œæ›´å¥½çš„å˜å¼‚ç­–ç•¥å¯ä»¥æ˜¾ç€æé«˜æ¨¡ç³Šæµ‹è¯•çš„æ•ˆç‡ã€‚</p><h3 id="B-ä½ä»£ç è¦†ç›–ç‡çš„æŒ‘æˆ˜"><a href="#B-ä½ä»£ç è¦†ç›–ç‡çš„æŒ‘æˆ˜" class="headerlink" title="B.ä½ä»£ç è¦†ç›–ç‡çš„æŒ‘æˆ˜"></a>B.ä½ä»£ç è¦†ç›–ç‡çš„æŒ‘æˆ˜</h3><p>è¾ƒé«˜çš„ä»£ç è¦†ç›–ç‡è¡¨ç¤ºå¯¹ç¨‹åºæ‰§è¡ŒçŠ¶æ€çš„è¦†ç›–ç‡æ›´é«˜ï¼Œå¹¶ä¸”æµ‹è¯•æ›´åŠ å½»åº•ã€‚å‘ç°é”™è¯¯çš„å¯èƒ½æ€§æ›´é«˜ã€‚</p><p>ä½†æ˜¯ï¼Œå¤§å¤šæ•°æµ‹è¯•ç”¨ä¾‹ä»…æ¶µç›–ç›¸åŒçš„å°‘æ•°è·¯å¾„ã€‚</p><p>å› æ­¤ï¼Œä»…é€šè¿‡å¤§é‡ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹å¹¶æŠ•å…¥æµ‹è¯•èµ„æºæ¥å®ç°é«˜è¦†ç›–ç‡æ˜¯ä¸æ˜æ™ºçš„é€‰æ‹©ã€‚</p><p>åŸºäºè¦†ç›–ç‡çš„æ¨¡ç³Šå™¨è¯•å›¾å€ŸåŠ©ç¨‹åºåˆ†ææŠ€æœ¯ï¼ˆä¾‹å¦‚ç¨‹åºæ£€æµ‹ï¼Œprogram instrumentationï¼‰æ¥è§£å†³é—®é¢˜ã€‚</p><h3 id="C-é€šè¿‡éªŒè¯çš„æŒ‘æˆ˜"><a href="#C-é€šè¿‡éªŒè¯çš„æŒ‘æˆ˜" class="headerlink" title="C.é€šè¿‡éªŒè¯çš„æŒ‘æˆ˜"></a>C.é€šè¿‡éªŒè¯çš„æŒ‘æˆ˜</h3><p>ç¨‹åºé€šå¸¸åœ¨è§£æå’Œå¤„ç†ä¹‹å‰éªŒè¯ï¼ˆValidationï¼‰è¾“å…¥ã€‚</p><p>éªŒè¯å¯ä»¥ä¿æŠ¤ç¨‹åºï¼ŒèŠ‚çœè®¡ç®—èµ„æºï¼Œå¹¶ä¿æŠ¤ç¨‹åºå…å—æ— æ•ˆè¾“å…¥å’Œæ¶æ„æ„é€ è¾“å…¥é€ æˆçš„æŸåã€‚</p><p>é»‘ç›’å’Œç°ç›’æ¨¡ç³Šå™¨ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹å¾ˆéš¾é€šè¿‡ç›²ç›®ç”Ÿæˆç­–ç•¥ï¼ˆblind generation strategyï¼‰çš„éªŒè¯ï¼Œä»è€Œå¯¼è‡´æ•ˆç‡å¾ˆä½ã€‚</p><h1 id="å››ã€è¦†ç›–å¼•å¯¼çš„æ¨¡ç³Šæµ‹è¯•"><a href="#å››ã€è¦†ç›–å¼•å¯¼çš„æ¨¡ç³Šæµ‹è¯•" class="headerlink" title="å››ã€è¦†ç›–å¼•å¯¼çš„æ¨¡ç³Šæµ‹è¯•"></a>å››ã€è¦†ç›–å¼•å¯¼çš„æ¨¡ç³Šæµ‹è¯•</h1><p>ä¸ºäº†å®ç°æ·±å…¥è€Œå½»åº•çš„ç¨‹åºæ¨¡ç³Šæµ‹è¯•ï¼Œæ¨¡ç³Šæµ‹è¯•äººå‘˜åº”å°è¯•<strong>éå†å°½å¯èƒ½å¤šçš„ç¨‹åºè¿è¡ŒçŠ¶æ€</strong>ã€‚</p><p>ä½†æ˜¯ï¼Œç”±äºç¨‹åºè¡Œä¸ºçš„ä¸ç¡®å®šæ€§ï¼Œå› æ­¤<strong>æ²¡æœ‰ç”¨äºç¨‹åºçŠ¶æ€çš„ç®€å•åº¦é‡</strong>ã€‚</p><p>æµ‹é‡ä»£ç è¦†ç›–ç‡æˆä¸ºä¸€ç§è¿‘ä¼¼çš„æ›¿ä»£è§£å†³æ–¹æ¡ˆã€‚ä»£ç è¦†ç›–ç‡çš„å¢åŠ ä»£è¡¨äº†æ–°çš„ç¨‹åºçŠ¶æ€ã€‚æ­¤å¤–ï¼Œä»£ç è¦†ç›–ç‡å¾ˆå®¹æ˜“æµ‹é‡ã€‚</p><p>ä½†æ˜¯ï¼Œä»£ç è¦†ç›–ç‡æ˜¯ä¸€ç§è¿‘ä¼¼çš„åº¦é‡ï¼Œå› ä¸ºåœ¨å®è·µä¸­ï¼Œæ’å®šçš„ä»£ç è¦†ç›–ç‡å¹¶ä¸è¡¨ç¤ºæ’å®šçš„ç¨‹åºçŠ¶æ€æ•°ã€‚ä½¿ç”¨æ­¤æŒ‡æ ‡å¯èƒ½ä¼šå¯¼è‡´æŸäº›ä¿¡æ¯ä¸¢å¤±ã€‚</p><h2 id="1-ä»£ç è¦†ç›–ç‡è®¡æ•°"><a href="#1-ä»£ç è¦†ç›–ç‡è®¡æ•°" class="headerlink" title="1.ä»£ç è¦†ç›–ç‡è®¡æ•°"></a>1.ä»£ç è¦†ç›–ç‡è®¡æ•°</h2><p>åœ¨ç¨‹åºåˆ†æä¸­ï¼Œç¨‹åºç”±åŸºæœ¬å—ï¼ˆbasic blocksï¼‰ç»„æˆã€‚åŸºæœ¬å—æ˜¯å…·æœ‰å•ä¸ªå…¥å£å’Œå‡ºå£ç‚¹çš„ä»£ç æ®µï¼ŒåŸºæœ¬å—ä¸­çš„æŒ‡ä»¤å°†é¡ºåºæ‰§è¡Œï¼Œå¹¶ä¸”åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</p><p>åœ¨ä»£ç è¦†ç›–ç‡æµ‹é‡ä¸­ï¼Œæœ€æ–°æŠ€æœ¯å°†åŸºæœ¬å—ä½œä¸ºæœ€ä½³ç²’åº¦ï¼ˆgranularityï¼‰ã€‚åŸå› åŒ…æ‹¬ï¼šï¼ˆ1ï¼‰åŸºæœ¬å—æ˜¯ç¨‹åºæ‰§è¡Œçš„æœ€å°è¿è´¯å•ä½ï¼›ï¼ˆ2ï¼‰æµ‹é‡åŠŸèƒ½æˆ–æŒ‡ä»¤ä¼šå¯¼è‡´ä¿¡æ¯ä¸¢å¤±æˆ–å†—ä½™ï¼›ï¼ˆ3ï¼‰åŸºæœ¬å—å¯ä»¥ç”±ç¬¬ä¸€æ¡æŒ‡ä»¤çš„åœ°å€æ ‡è¯†ï¼›ä»¥åŠåŸºæœ¬å—ä¿¡æ¯å¯é€šè¿‡ä»£ç æ£€æµ‹è½»æ¾æå–ã€‚</p><p>å½“å‰ï¼Œæœ‰ä¸¤ç§åŸºäºåŸºæœ¬å—çš„åŸºæœ¬æµ‹é‡é€‰æ‹©ï¼šç®€å•åœ°è®¡ç®—å·²æ‰§è¡Œçš„åŸºæœ¬å—å’Œè®¡ç®—åŸºæœ¬å—çš„è·ƒè¿ï¼ˆtransitionsï¼‰ã€‚</p><p>åœ¨åä¸€ç§æ–¹æ³•ä¸­ï¼Œç¨‹åºè¢«è§£é‡Šä¸ºå›¾ï¼Œé¡¶ç‚¹ç”¨äºè¡¨ç¤ºåŸºæœ¬å—ï¼Œè¾¹ç”¨äºè¡¨ç¤ºåŸºæœ¬å—ä¹‹é—´çš„è·ƒè¿ã€‚</p><p>åä¸€ç§æ–¹æ³•è®°å½•è¾¹ç¼˜ï¼Œè€Œå‰ä¸€ç§æ–¹æ³•è®°å½•é¡¶ç‚¹ã€‚</p><p>ä½†æ˜¯å®éªŒè¡¨æ˜ä»…å¯¹å·²æ‰§è¡Œçš„åŸºæœ¬å—è¿›è¡Œè®¡æ•°å°†å¯¼è‡´ä¸¥é‡çš„ä¿¡æ¯ä¸¢å¤±ã€‚</p><p>å¦‚å›¾æ‰€ç¤ºï¼Œå¦‚æœé¦–å…ˆæ‰§è¡Œç¨‹åºè·¯å¾„ï¼ˆBB1ï¼ŒBB2ï¼ŒBB3ï¼ŒBB4ï¼‰ï¼Œç„¶åæ‰§è¡Œæ—¶é‡åˆ°è·¯å¾„ï¼ˆBB1ï¼ŒBB2ï¼ŒBB4ï¼‰ï¼Œåˆ™æ–°è¾¹ï¼ˆBB2ï¼ŒBB4ï¼‰ä¿¡æ¯ä¸ºä¸¢å¤±ã€‚</p><p><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing-A-Survey/2020-06-27-00-11-48.png" alt></p><h2 id="2-åŸºäºè¦†ç›–çš„æ¨¡ç³Šæµ‹è¯•çš„å·¥ä½œè¿‡ç¨‹"><a href="#2-åŸºäºè¦†ç›–çš„æ¨¡ç³Šæµ‹è¯•çš„å·¥ä½œè¿‡ç¨‹" class="headerlink" title="2.åŸºäºè¦†ç›–çš„æ¨¡ç³Šæµ‹è¯•çš„å·¥ä½œè¿‡ç¨‹"></a>2.åŸºäºè¦†ç›–çš„æ¨¡ç³Šæµ‹è¯•çš„å·¥ä½œè¿‡ç¨‹</h2><p>ç®—æ³•1æ˜¾ç¤ºäº†åŸºäºè¦†ç›–çš„æ¨¡ç³Šå™¨çš„ä¸€èˆ¬å·¥ä½œè¿‡ç¨‹ã€‚</p><p><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing-A-Survey/alg1.png" alt></p><p>æµ‹è¯•ä»åˆå§‹ç»™å®šçš„ç§å­è¾“å…¥å¼€å§‹ã€‚</p><p>åœ¨ä¸»æ¨¡ç³Šå¾ªç¯ä¸­ï¼Œæ¨¡ç³Šå™¨åå¤é€‰æ‹©ä¸€ä¸ªæœ‰è¶£çš„ç§å­æ¥è¿›è¡Œåç»­çš„çªå˜å’Œæµ‹è¯•ç”¨ä¾‹çš„ç”Ÿæˆã€‚ç„¶ååœ¨æ¨¡ç³Šå™¨çš„ç›‘è§†ä¸‹é©±åŠ¨ç›®æ ‡ç¨‹åºä»¥æ‰§è¡Œç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹ã€‚</p><p>æ”¶é›†è§¦å‘å´©æºƒçš„æµ‹è¯•ç”¨ä¾‹ï¼Œå¹¶å°†å…¶ä»–æœ‰è¶£çš„ç”¨ä¾‹æ·»åŠ åˆ°ç§å­åº“ä¸­ã€‚</p><p>å¯¹äºåŸºäºè¦†ç›–çš„æ¨¡ç³Šæµ‹è¯•ï¼Œè¾¾åˆ°æ–°æ§åˆ¶æµ<strong>è¾¹ç¼˜çš„æµ‹è¯•ç”¨ä¾‹</strong>è¢«è®¤ä¸ºå¾ˆæœ‰è¶£ã€‚</p><p>ä¸»æ¨¡ç³Šå¾ªç¯åœ¨é¢„å…ˆé…ç½®çš„è¶…æ—¶æˆ–ä¸­æ­¢ä¿¡å·æ—¶åœæ­¢ã€‚</p><p>åœ¨æ¨¡ç³Šæµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæ¨¡ç³Šå™¨é€šè¿‡å„ç§æ–¹æ³•è·Ÿè¸ªæ‰§è¡Œæƒ…å†µã€‚</p><p>åŸºæœ¬ä¸Šï¼Œæ¨¡ç³Šå™¨å‡ºäºä¸¤ä¸ªç›®çš„è·Ÿè¸ªæ‰§è¡Œï¼Œå³<strong>ä»£ç è¦†ç›–ç‡</strong>å’Œ<strong>å®‰å…¨æ€§è¿è§„</strong>ï¼ˆsecurity violationsï¼‰ã€‚</p><p>ä»£ç è¦†ç›–ç‡ä¿¡æ¯ç”¨äºè¿›è¡Œå½»åº•çš„ç¨‹åºçŠ¶æ€æ¢ç´¢ï¼Œè€Œå®‰å…¨è¿è§„è·Ÿè¸ªåˆ™ç”¨äºæ›´å¥½åœ°å‘ç°é”™è¯¯ã€‚</p><p>ä¸‹å›¾æ˜¾ç¤ºäº†AFLï¼ˆAmerican Fuzzy Lopï¼Œä¸€ä¸ªéå¸¸æœ‰ä»£è¡¨æ€§çš„åŸºäºè¦†ç›–çš„æ¨¡ç³Šå™¨ï¼‰çš„å·¥ä½œè¿‡ç¨‹ã€‚</p><p><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing-A-Survey/2020-06-27-00-18-50.png" alt></p><p>åœ¨æ‰§è¡Œè¦†ç›–èŒƒå›´æ”¶é›†ä¹‹å‰ï¼Œæ¨¡ç³Šå™¨å°†å¯¹ç›®æ ‡åº”ç”¨ç¨‹åºè¿›è¡Œæ£€æµ‹ã€‚</p><p>åœ¨ä¸»æ¨¡ç³Šå¾ªç¯ä¸­ï¼Œæä¾›åˆå§‹ç§å­è¾“å…¥åï¼Œï¼ˆ1ï¼‰æ¨¡ç³Šå™¨æ ¹æ®ç§å­é€‰æ‹©ç­–ç•¥ä»ç§å­åº“ä¸­é€‰æ‹©å–œæ¬¢çš„ç§å­ï¼Œæ¯”å¦‚AFLåˆ™é€‰æ‹©æœ€å¿«å’Œæœ€å°çš„ç§å­ã€‚ï¼ˆ2ï¼‰æ ¹æ®å˜å¼‚ç­–ç•¥å¯¹ç§å­æ–‡ä»¶è¿›è¡Œå˜å¼‚ï¼Œå¹¶ç”Ÿæˆä¸€å †æµ‹è¯•ç”¨ä¾‹ã€‚</p><p>AFLå½“å‰é‡‡ç”¨ä¸€äº›éšæœºä¿®æ”¹å’Œæµ‹è¯•ç”¨ä¾‹æ‹¼æ¥æ–¹æ³•ï¼ŒåŒ…æ‹¬é•¿åº¦å’Œæ­¥é•¿å˜åŒ–çš„é¡ºåºä½ç¿»è½¬ï¼Œå°æ•´æ•°çš„é¡ºåºåŠ æ³•å’Œå‡æ³•ä»¥åŠå·²çŸ¥æœ‰è¶£çš„æ•´æ•°ï¼ˆå¦‚0ã€1ï¼ŒINT_MAXç­‰ï¼‰çš„é¡ºåºæ’å…¥ã€‚ï¼ˆ3ï¼‰æµ‹è¯•ç”¨ä¾‹å·²æ‰§è¡Œï¼Œå¹¶ä¸”æ‰§è¡Œæƒ…å†µæ­£åœ¨è·Ÿè¸ªä¸­ã€‚</p><p>æ”¶é›†è¦†ç›–ç‡ä¿¡æ¯ä»¥ç¡®å®šæœ‰è¶£çš„æµ‹è¯•ç”¨ä¾‹ï¼Œå³è¾¾åˆ°æ–°æ§åˆ¶æµè¾¹ç¼˜çš„æµ‹è¯•ç”¨ä¾‹ã€‚</p><p>æœ‰è¶£çš„æµ‹è¯•ç”¨ä¾‹å°†æ·»åŠ åˆ°ç§å­æ± ä¸­ï¼Œä»¥è¿›è¡Œä¸‹ä¸€è½®è¿è¡Œã€‚</p><h2 id="3-å…³é”®é—®é¢˜"><a href="#3-å…³é”®é—®é¢˜" class="headerlink" title="3.å…³é”®é—®é¢˜"></a>3.å…³é”®é—®é¢˜</h2><p>å‰é¢çš„ä»‹ç»è¡¨æ˜ï¼Œè¦è¿è¡Œä¸€ä¸ªé«˜æ•ˆçš„ã€åŸºäºè¦†ç›–çš„æ¨¡ç³Šï¼Œéœ€è¦è§£å†³å¾ˆå¤šé—®é¢˜ã€‚æœ€è¿‘ä¸€äº›ç ”ç©¶å¦‚ä¸‹è¡¨ã€‚</p><p><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing-A-Survey/2020-06-27-00-22-32.png" alt></p><h3 id="A-å¦‚ä½•è·å¾—åˆå§‹è¾“å…¥ï¼Ÿ"><a href="#A-å¦‚ä½•è·å¾—åˆå§‹è¾“å…¥ï¼Ÿ" class="headerlink" title="A.å¦‚ä½•è·å¾—åˆå§‹è¾“å…¥ï¼Ÿ"></a>A.å¦‚ä½•è·å¾—åˆå§‹è¾“å…¥ï¼Ÿ</h3><p>å¤§å¤šæ•°æœ€å…ˆè¿›çš„åŸºäºè¦†ç›–çš„æ¨¡ç³Šå™¨éƒ½é‡‡ç”¨äº†åŸºäºçªå˜çš„æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆç­–ç•¥ï¼Œè¿™åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºåˆå§‹ç§å­è¾“å…¥çš„è´¨é‡ã€‚</p><p>è‰¯å¥½çš„åˆå§‹ç§å­è¾“å…¥å¯ä»¥æ˜¾è‘—æé«˜æ¨¡ç³Šçš„æ•ˆç‡å’Œæ•ˆæœã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œ</p><p>(1)æä¾›æ ¼å¼è‰¯å¥½çš„ç§å­è¾“å…¥å¯ä»¥èŠ‚çœæ„å»ºä¸€ä¸ªç§å­è¾“å…¥æ‰€æ¶ˆè€—çš„å¤§é‡cpuæ—¶é—´ï¼›</p><p>(2)è‰¯å¥½çš„åˆå§‹è¾“å…¥å¯ä»¥æ»¡è¶³å¤æ‚æ–‡ä»¶æ ¼å¼çš„è¦æ±‚ï¼Œè€Œå¤æ‚æ–‡ä»¶æ ¼å¼åœ¨çªå˜é˜¶æ®µæ˜¯å¾ˆéš¾çŒœæµ‹çš„ï¼›</p><p>(3)åŸºäºæ ¼å¼è‰¯å¥½çš„ç§å­è¾“å…¥çš„çªå˜æ›´å®¹æ˜“äº§ç”Ÿæµ‹è¯•ç”¨ä¾‹ï¼Œå¯ä»¥è¾¾åˆ°æ›´æ·±å±‚æ¬¡å’Œéš¾ä»¥è¾¾åˆ°çš„è·¯å¾„ï¼›</p><p>(4)è‰¯å¥½çš„ç§å­è¾“å…¥å¯ä»¥åœ¨å¤šæ¬¡æµ‹è¯•ä¸­é‡å¤ä½¿ç”¨ã€‚</p><p>å¸¸ç”¨çš„æ”¶é›†ç§å­è¾“å…¥çš„æ–¹æ³•åŒ…æ‹¬ä½¿ç”¨æ ‡å‡†åŸºå‡†ã€ä»äº’è”ç½‘ä¸ŠæŠ“å–å’Œä½¿ç”¨ç°æœ‰çš„POCï¼ˆProof of Conceptï¼‰æ ·æœ¬ã€‚</p><p>è€ƒè™‘åˆ°ç›®æ ‡åº”ç”¨è¾“å…¥çš„å¤šæ ·æ€§ï¼Œä»äº’è”ç½‘ä¸ŠæŠ“å–æ˜¯æœ€ç›´è§‚çš„æ–¹æ³•ã€‚</p><p>è¿‡é‡çš„ç§å­è¾“å…¥ä¼šå¯¼è‡´ç¬¬ä¸€æ¬¡å¹²è¿è¡Œçš„æ—¶é—´æµªè´¹ï¼Œä»è€Œå¸¦æ¥å¦ä¸€ä¸ªé—®é¢˜ï¼Œå³å¦‚ä½•æç‚¼åˆå§‹è¯­æ–™ã€‚</p><p>AFLæä¾›äº†ä¸€ä¸ªå·¥å…·ï¼Œå®ƒå¯ä»¥æå–ä¸€ä¸ªæœ€å°çš„è¾“å…¥é›†ï¼Œä»¥è¾¾åˆ°ç›¸åŒçš„ä»£ç è¦†ç›–ç‡ã€‚</p><h3 id="B-å¦‚ä½•ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼Ÿ"><a href="#B-å¦‚ä½•ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼Ÿ" class="headerlink" title="B.å¦‚ä½•ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼Ÿ"></a>B.å¦‚ä½•ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼Ÿ</h3><p>testcasesçš„è´¨é‡æ˜¯å½±å“æ¨¡ç³Šæµ‹è¯•æ•ˆç‡å’Œæ•ˆæœçš„é‡è¦å› ç´ ã€‚</p><p>é¦–å…ˆï¼Œå¥½çš„testcaseså¯ä»¥åœ¨è¾ƒçŸ­çš„æ—¶é—´å†…æ¢ç´¢æ›´å¤šçš„ç¨‹åºæ‰§è¡ŒçŠ¶æ€ï¼Œè¦†ç›–æ›´å¤šçš„ä»£ç ã€‚</p><p>æ­¤å¤–ï¼Œå¥½çš„æµ‹è¯•ç”¨ä¾‹å¯ä»¥é’ˆå¯¹æ½œåœ¨çš„è„†å¼±ä½ç½®ï¼Œå¸¦æ¥æ›´å¿«çš„ç¨‹åºbugå‘ç°ã€‚</p><p>å› æ­¤ï¼Œå¦‚ä½•åŸºäºç§å­è¾“å…¥ç”Ÿæˆå¥½çš„æµ‹è¯•ç”¨ä¾‹æ˜¯ä¸€ä¸ªé‡è¦çš„é—®é¢˜ã€‚</p><p>ç§å­è¾“å…¥çš„çªå˜æ¶‰åŠä¸¤ä¸ªå…³é”®é—®é¢˜ï¼šåœ¨å“ªé‡Œçªå˜å’Œç”¨ä»€ä¹ˆå€¼è¿›è¡Œçªå˜ã€‚</p><p>éšç€æœºå™¨å­¦ä¹ æŠ€æœ¯çš„å‘å±•å’Œå¹¿æ³›åº”ç”¨ï¼Œä¸€äº›ç ”ç©¶å°è¯•ä½¿ç”¨æœºå™¨å­¦ä¹ æŠ€æœ¯æ¥è¾…åŠ©ç”Ÿæˆtestcasesã€‚</p><p>å¾®è½¯ç ”ç©¶é™¢çš„Godefroidç­‰ï¼ˆ2017ï¼‰åˆ©ç”¨åŸºäºç¥ç»ç½‘ç»œçš„ç»Ÿè®¡æœºå™¨å­¦ä¹ æŠ€æœ¯æ¥è‡ªåŠ¨ç”Ÿæˆtestcasesã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œä»–ä»¬é¦–å…ˆé€šè¿‡æœºå™¨å­¦ä¹ æŠ€æœ¯ä»ä¸€å †æœ‰æ•ˆè¾“å…¥ä¸­å­¦ä¹ è¾“å…¥æ ¼å¼ï¼Œç„¶ååˆ©ç”¨å­¦ä¹ åˆ°çš„çŸ¥è¯†æŒ‡å¯¼æµ‹è¯•ç”¨ä¾‹çš„ç”Ÿæˆã€‚</p><p>ä»–ä»¬ä»‹ç»äº†å¾®è½¯Edgeæµè§ˆå™¨ä¸­PDFè§£æå™¨çš„æ¨¡ç³Šè¿‡ç¨‹ã€‚</p><p>è™½ç„¶å®éªŒå¹¶æ²¡æœ‰ç»™å‡ºä¸€ä¸ªä»¤äººé¼“èˆçš„ç»“æœï¼Œä½†ä»æ˜¯ä¸€ä¸ªä¸é”™çš„å°è¯•ã€‚</p><p>å¾®è½¯çš„Rajpalç­‰äººï¼ˆ2017ï¼‰ä½¿ç”¨ç¥ç»ç½‘ç»œä»è¿‡å»çš„æ¨¡ç³Šæ¢ç´¢ä¸­å­¦ä¹ ï¼Œå¹¶é¢„æµ‹è¾“å…¥æ–‡ä»¶ä¸­å“ªäº›å­—èŠ‚è¦çªå˜ã€‚</p><p>Nicholsç­‰äººï¼ˆ2017ï¼‰ä½¿ç”¨ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆGANï¼‰æ¨¡å‹æ¥å¸®åŠ©ç”¨æ–°é¢–çš„ç§å­æ–‡ä»¶é‡æ–°åˆå§‹åŒ–ç³»ç»Ÿã€‚</p><p>å®éªŒè¡¨æ˜ï¼ŒGANæ¯”LSTMæ›´å¿«ã€æ›´æœ‰æ•ˆï¼Œå¹¶ä¸”æœ‰åŠ©äºå‘ç°æ›´å¤šçš„ä»£ç è·¯å¾„ã€‚</p><h3 id="C-å¦‚ä½•ä»ç§å­æ± ä¸­é€‰æ‹©ç§å­ï¼Ÿ"><a href="#C-å¦‚ä½•ä»ç§å­æ± ä¸­é€‰æ‹©ç§å­ï¼Ÿ" class="headerlink" title="C.å¦‚ä½•ä»ç§å­æ± ä¸­é€‰æ‹©ç§å­ï¼Ÿ"></a>C.å¦‚ä½•ä»ç§å­æ± ä¸­é€‰æ‹©ç§å­ï¼Ÿ</h3><p>æ¨¡ç³Šå™¨åœ¨ä¸»æ¨¡ç³Šå¾ªç¯ä¸­æ–°ä¸€è½®æµ‹è¯•å¼€å§‹æ—¶ï¼Œåå¤ä»ç§å­æ± ä¸­é€‰æ‹©ç§å­è¿›è¡Œçªå˜ã€‚</p><p>ä»¥å¾€çš„å·¥ä½œå·²ç»è¯æ˜ï¼Œè‰¯å¥½çš„ç§å­é€‰æ‹©ç­–ç•¥å¯ä»¥æ˜¾è‘—æé«˜æ¨¡ç³Šæ•ˆç‡ï¼Œå¹¶å¸®åŠ©æ›´å¿«åœ°æ‰¾åˆ°æ›´å¤šçš„Bugsã€‚</p><p>é€šè¿‡è‰¯å¥½çš„ç§å­é€‰æ‹©ç­–ç•¥ï¼Œæ¨¡ç³Šå™¨å¯ä»¥</p><ul><li>ï¼ˆ1ï¼‰ä¼˜å…ˆé€‰æ‹©æ›´æœ‰å¸®åŠ©çš„ç§å­ï¼ŒåŒ…æ‹¬è¦†ç›–æ›´å¤šçš„ä»£ç ï¼Œæ›´å®¹æ˜“è§¦å‘æ¼æ´ï¼›</li><li>ï¼ˆ2ï¼‰å‡å°‘é‡å¤æ‰§è¡Œè·¯å¾„çš„æµªè´¹ï¼ŒèŠ‚çœè®¡ç®—èµ„æºï¼›</li><li>ï¼ˆ3ï¼‰ä¼˜åŒ–é€‰æ‹©è¦†ç›–æ›´æ·±ã€æ›´æ˜“å—æ”»å‡»çš„ä»£ç çš„ç§å­ï¼Œå¸®åŠ©æ›´å¿«åœ°è¯†åˆ«éšè—çš„æ¼æ´ã€‚</li></ul><p>BÃ¶hmeç­‰äººï¼ˆ2017ï¼‰æå‡ºäº†AFLFastï¼Œä¸€ä¸ªåŸºäºè¦†ç›–çš„ç°ç›’æ¨¡ç³Šå™¨ã€‚åœ¨æ¨¡ç³Šè¿‡ç¨‹ä¸­ï¼ŒAFLFastä¼šæµ‹é‡æ‰§è¡Œè·¯å¾„çš„é¢‘ç‡ï¼Œä¼˜å…ˆå¤„ç†è¢«æ¨¡ç³Šæ¬¡æ•°è¾ƒå°‘çš„ç§å­ï¼Œå¹¶ä¸ºè¡Œä½¿ä½é¢‘è·¯å¾„çš„ç§å­åˆ†é…æ›´å¤šçš„èƒ½é‡ã€‚</p><p>Rawatç­‰(2017)ç»¼åˆäº†é™æ€å’ŒåŠ¨æ€åˆ†ææ¥è¯†åˆ«éš¾ä»¥åˆ°è¾¾çš„æ·±å±‚è·¯å¾„ï¼Œå¹¶å¯¹åˆ°è¾¾æ·±å±‚è·¯å¾„çš„ç§å­è¿›è¡Œä¼˜å…ˆçº§æ’åºã€‚</p><p>AFLGoå°†ä¸€äº›æ˜“å—æ”»å‡»çš„ä»£ç å®šä¹‰ä¸ºç›®æ ‡ä½ç½®ï¼Œå¹¶ä¼˜åŒ–é€‰æ‹©ç¦»ç›®æ ‡ä½ç½®è¾ƒè¿‘çš„æµ‹è¯•caseã€‚</p><p>å·²çŸ¥æ¼æ´çš„ç‰¹å¾ä¹Ÿå¯ç”¨äºç§å­é€‰æ‹©ç­–ç•¥ã€‚ç„¶è€Œï¼Œæ”¶é›†è€—è´¹èµ„æºçš„ä¿¡æ¯å¸¦æ¥äº†æ²‰é‡çš„å¼€é”€ï¼Œé™ä½äº†æ¨¡ç³Šçš„æ•ˆç‡ã€‚</p><h3 id="D-å¦‚ä½•é«˜æ•ˆåœ°æµ‹è¯•åº”ç”¨ç¨‹åºï¼Ÿ"><a href="#D-å¦‚ä½•é«˜æ•ˆåœ°æµ‹è¯•åº”ç”¨ç¨‹åºï¼Ÿ" class="headerlink" title="D.å¦‚ä½•é«˜æ•ˆåœ°æµ‹è¯•åº”ç”¨ç¨‹åºï¼Ÿ"></a>D.å¦‚ä½•é«˜æ•ˆåœ°æµ‹è¯•åº”ç”¨ç¨‹åºï¼Ÿ</h3><p>ç›®æ ‡åº”ç”¨ç¨‹åºç”±ä¸»æ¨¡ç³Šå¾ªç¯ä¸­çš„æ¨¡ç³Šå™¨åå¤å¯åŠ¨å’Œå®Œæˆã€‚</p><p>å¯¹äºç”¨æˆ·åŒºåº”ç”¨ç¨‹åºçš„æ¨¡ç³Šå¤„ç†ï¼Œç¨‹åºçš„åˆ›å»ºå’Œå®Œæˆå°†æ¶ˆè€—å¤§é‡çš„cpuæ—¶é—´ã€‚é¢‘ç¹åˆ›å»ºå’Œå®Œæˆè¯¥ç¨‹åºå°†ä¸¥é‡é™ä½æ¨¡ç³Šæµ‹è¯•çš„æ•ˆç‡ã€‚</p><p>AFLä½¿ç”¨forkserveræ–¹æ³•ï¼Œè¯¥æ–¹æ³•åˆ›å»ºä¸€ä¸ªå·²åŠ è½½ç¨‹åºçš„å®Œå…¨ç›¸åŒçš„å…‹éš†ï¼Œå¹¶åœ¨æ¯æ¬¡è¿è¡Œæ—¶é‡å¤ä½¿ç”¨è¯¥å…‹éš†ã€‚</p><h1 id="äº”ã€æ¨¡ç³Šé›†æˆæŠ€æœ¯"><a href="#äº”ã€æ¨¡ç³Šé›†æˆæŠ€æœ¯" class="headerlink" title="äº”ã€æ¨¡ç³Šé›†æˆæŠ€æœ¯"></a>äº”ã€æ¨¡ç³Šé›†æˆæŠ€æœ¯</h1><p>ä½¿ç”¨éšæœºçªå˜æ–¹æ³•çš„æ¨¡ç³Šæ¨¡ç³Šæµ‹è¯•ç­–ç•¥ä¼šå¯¼è‡´å¤§é‡æ— æ•ˆæµ‹è¯•ç”¨ä¾‹ï¼Œå¹¶ä¸”æ¨¡ç³Šæµ‹è¯•æ•ˆç‡è¾ƒä½ã€‚</p><p>å½“å‰ï¼Œæœ€å…ˆè¿›çš„æ¨¡ç³Šå™¨é€šå¸¸é‡‡ç”¨æ™ºèƒ½æ¨¡ç³Šç­–ç•¥ã€‚</p><p>æ™ºèƒ½æ¨¡ç³Šå™¨é€šè¿‡ç¨‹åºåˆ†ææŠ€æœ¯æ¥æ”¶é›†ç¨‹åºæ§åˆ¶æµå’Œæ•°æ®æµä¿¡æ¯ï¼Œå¹¶å› æ­¤åˆ©ç”¨æ”¶é›†åˆ°çš„ä¿¡æ¯æ¥æ”¹è¿›æµ‹è¯•ç”¨ä¾‹çš„ç”Ÿæˆã€‚</p><p>ç”±æ™ºèƒ½æ¨¡ç³Šå™¨ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹å…·æœ‰æ›´å¥½çš„é’ˆå¯¹æ€§ï¼Œæ›´æœ‰å¯èƒ½æ»¡è¶³ç¨‹åºå¯¹æ•°æ®ç»“æ„å’Œé€»è¾‘åˆ¤æ–­çš„è¦æ±‚ã€‚</p><p>ä¸‹å›¾æç»˜äº†æ™ºèƒ½æ¨¡ç³Šçš„ç¤ºæ„å›¾ã€‚</p><p><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing-A-Survey/2020-06-27-00-36-55.png" alt></p><p>è¡¨5ä¸­æ€»ç»“äº†æ¨¡ç³Šæµ‹è¯•ä¸­é›†æˆçš„ä¸»è¦æŠ€æœ¯ã€‚</p><p><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing-A-Survey/2020-06-27-00-37-51.png" alt></p><h2 id="1-æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ"><a href="#1-æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ" class="headerlink" title="1.æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ"></a>1.æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ</h2><p>å¦‚å‰æ‰€è¿°ï¼Œæ¨¡ç³Šæµ‹è¯•ä¸­çš„æµ‹è¯•ç”¨ä¾‹æ˜¯åŸºäºç”Ÿæˆçš„æ–¹æ³•æˆ–åŸºäºå˜å¼‚çš„æ–¹æ³•ç”Ÿæˆçš„ã€‚</p><p>å¦‚ä½•ç”Ÿæˆæ»¡è¶³å¤æ‚æ•°æ®ç»“æ„è¦æ±‚å¹¶æ›´æœ‰å¯èƒ½è§¦å‘éš¾ä»¥åˆ°è¾¾çš„è·¯å¾„çš„æµ‹è¯•ç”¨ä¾‹æ˜¯ä¸€ä¸ªå…³é”®æŒ‘æˆ˜ã€‚</p><p>åœ¨åŸºäºç”Ÿæˆçš„æ¨¡ç³Šæµ‹è¯•ä¸­ï¼Œç”Ÿæˆå™¨æ ¹æ®è¾“å…¥æ•°æ®æ ¼å¼çš„çŸ¥è¯†ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ã€‚</p><p>Workï¼ˆGodefroid et al.2017ï¼‰ä½¿ç”¨æœºå™¨å­¦ä¹ æŠ€æœ¯ï¼ˆç‰¹åˆ«æ˜¯é€’å½’ç¥ç»ç½‘ç»œï¼‰æ¥å­¦ä¹ è¾“å…¥æ–‡ä»¶çš„è¯­æ³•ï¼Œå¹¶å› æ­¤ä½¿ç”¨æ‰€å­¦çš„è¯­æ³•æ¥ç”Ÿæˆæ»¡è¶³æ ¼å¼è¦æ±‚çš„æµ‹è¯•ç”¨ä¾‹ã€‚</p><p>æ›´å¤šçš„æœ€å…ˆè¿›çš„æ¨¡ç³Šå™¨é‡‡ç”¨åŸºäºå˜å¼‚çš„æ¨¡ç³Šç­–ç•¥ã€‚é€šè¿‡åœ¨çªå˜è¿‡ç¨‹ä¸­ä¿®æ”¹éƒ¨åˆ†ç§å­è¾“å…¥æ¥ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ã€‚</p><p>åœ¨ç›²ç›®çš„çªå˜æ¨¡ç³ŠåŒ–è¿‡ç¨‹ä¸­ï¼Œå˜å¼‚è€…ä½¿ç”¨éšæœºå€¼æˆ–å‡ ä¸ªç‰¹æ®Šå€¼éšæœºä¿®æ”¹ç§å­å­—èŠ‚ï¼Œè¿™è¢«è¯æ˜æ˜¯æ•ˆç‡å¾ˆä½çš„ã€‚å› æ­¤ï¼Œå¦‚ä½•ç¡®å®šè¦ä¿®æ”¹çš„ä½ç½®ä»¥åŠä¿®æ”¹ä¸­ä½¿ç”¨çš„å€¼æ˜¯å¦ä¸€ä¸ªå…³é”®æŒ‘æˆ˜ã€‚</p><h2 id="2-ç¨‹åºæ‰§è¡Œ"><a href="#2-ç¨‹åºæ‰§è¡Œ" class="headerlink" title="2.ç¨‹åºæ‰§è¡Œ"></a>2.ç¨‹åºæ‰§è¡Œ</h2><p>æ‰§è¡Œé˜¶æ®µæ¶‰åŠçš„ä¸¤ä¸ªå…³é”®é—®é¢˜æ˜¯<strong>å¦‚ä½•æŒ‡å¯¼æ¨¡ç³Šæµ‹è¯•è¿‡ç¨‹</strong>ä»¥åŠ<strong>å¦‚ä½•æ¢ç´¢æ–°è·¯å¾„</strong>ã€‚</p><p>ä»ªè¡¨ï¼ˆInstrumentationï¼‰æŠ€æœ¯ç”¨äºè®°å½•è·¯å¾„æ‰§è¡Œæƒ…å†µå¹¶è®¡ç®—åŸºäºè¦†ç›–ç‡çš„æ¨¡ç³Šæµ‹è¯•ä¸­çš„è¦†ç›–ç‡ä¿¡æ¯ã€‚</p><p>æµ‹è¯•æ‰§è¡Œè¿‡ç¨‹ä¸­çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯æ¢ç´¢æ–°è·¯å¾„ã€‚ç¬¦å·æ‰§è¡ŒæŠ€æœ¯åœ¨è·¯å¾„æ¢ç´¢ä¸­å…·æœ‰å¤©ç„¶çš„ä¼˜åŠ¿ã€‚</p><p>é€šè¿‡æ±‚è§£çº¦æŸé›†ï¼Œç¬¦å·æ‰§è¡ŒæŠ€æœ¯å¯ä»¥è®¡ç®—å‡ºæ»¡è¶³ç‰¹å®šæ¡ä»¶è¦æ±‚çš„å€¼ã€‚</p><p>åé¦ˆé©±åŠ¨çš„æ¨¡ç³Šæµ‹è¯•æä¾›äº†ä¸€ç§æœ‰æ•ˆçš„å¼•å¯¼æµ‹è¯•æ–¹æ³•ï¼Œä¼ ç»Ÿå’Œæ–°æŠ€æœ¯éƒ½å¯ä»¥å‘æŒ¥ä¼ æ„Ÿå™¨çš„ä½œç”¨ï¼Œä»¥åœ¨æµ‹è¯•æ‰§è¡Œè¿‡ç¨‹ä¸­è·å–å„ç§ä¿¡æ¯ï¼Œå¹¶å‡†ç¡®åœ°æŒ‡å¯¼æ¨¡ç³Šæµ‹è¯•ã€‚</p><h1 id="å…­ã€æ€»ç»“"><a href="#å…­ã€æ€»ç»“" class="headerlink" title="å…­ã€æ€»ç»“"></a>å…­ã€æ€»ç»“</h1><ul><li>åé¦ˆé©±åŠ¨çš„æ¨¡ç³Šæ¨¡å¼ï¼ˆfeedback-driven fuzzing modeï¼‰å’Œé—ä¼ ç®—æ³•ï¼ˆgenetic algorithmsï¼‰çš„ç»“åˆ</li><li>æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆé˜¶æ®µï¼Œæµ‹è¯•ç”¨ä¾‹è¿è¡Œé˜¶æ®µï¼Œç¨‹åºæ‰§è¡ŒçŠ¶æ€ç›‘è§†å’Œå¼‚å¸¸åˆ†æ</li><li>æ ¹æ®æ¢ç´¢ç¨‹åºçš„ç­–ç•¥ï¼ˆthe strategies of exploring the programsï¼‰ï¼Œæ¨¡ç³Šå™¨å¯ä»¥åˆ†ä¸ºå®šå‘æ¨¡ç³Šï¼ˆdirected fuzzingï¼‰å’ŒåŸºäºè¦†ç›–çš„æ¨¡ç³Šï¼ˆcoverage-based fuzzingï¼‰ã€‚</li><li>å®šå‘æ¨¡ç³Šå™¨æœŸæœ›å¯¹ç¨‹åºè¿›è¡Œæ›´å¿«çš„æµ‹è¯•ï¼Œè€ŒåŸºäºè¦†ç›–ç‡çš„æ¨¡ç³Šå™¨æœŸæœ›è¿›è¡Œæ›´å½»åº•çš„æµ‹è¯•å¹¶æ£€æµ‹åˆ°å°½å¯èƒ½å¤šçš„é”™è¯¯ã€‚</li><li>å¯¹äºå®šå‘æ¨¡ç³Šå™¨å’ŒåŸºäºè¦†ç›–çš„æ¨¡ç³Šå™¨ï¼Œå¦‚ä½•æå–æ‰§è¡Œè·¯å¾„çš„ä¿¡æ¯æ˜¯ä¸€ä¸ªå…³é”®é—®é¢˜ã€‚</li><li>æ ¹æ®å¯¹ç¨‹åºæ‰§è¡ŒçŠ¶æ€çš„ç›‘è§†å’Œæµ‹è¯•ç”¨ä¾‹çš„ç”Ÿæˆä¹‹é—´æ˜¯å¦å­˜åœ¨åé¦ˆï¼ˆwhether there is a feedback between the monitoring of program execution state and testcase generationï¼‰ï¼Œæ¨¡ç³Šå™¨å¯ä»¥åˆ†ä¸ºå“‘ç±»ï¼ˆdumb fuzzï¼‰å’Œæ™ºèƒ½ç±»ï¼ˆsmart fuzzï¼‰ã€‚</li><li>æ™ºèƒ½æ¨¡ç³Šå™¨ä¼šæ ¹æ®æ”¶é›†çš„ä¿¡æ¯ï¼ˆæµ‹è¯•ç”¨ä¾‹å¦‚ä½•å½±å“ç¨‹åºè¡Œä¸ºï¼‰æ¥è°ƒæ•´æµ‹è¯•ç”¨ä¾‹çš„ç”Ÿæˆã€‚</li><li>å¯¹äºåŸºäºå˜å¼‚çš„æ¨¡ç³Šæµ‹è¯•å™¨ï¼Œåé¦ˆä¿¡æ¯å¯ç”¨äºç¡®å®šåº”è¯¥å¯¹æµ‹è¯•ç”¨ä¾‹çš„å“ªä¸€éƒ¨åˆ†è¿›è¡Œå˜å¼‚ä»¥åŠå¯¹å®ƒä»¬è¿›è¡Œå˜å¼‚çš„æ–¹å¼ã€‚</li><li>åŸºäºå˜å¼‚çš„æ¨¡ç³Šæµ‹è¯•å·¥å…·åœ¨è¿›è¡Œå˜å¼‚æ—¶éœ€è¦å›ç­”ä¸¤ä¸ªé—®é¢˜ï¼šï¼ˆ1ï¼‰å˜å¼‚çš„ä½ç½®ï¼Œä»¥åŠï¼ˆ2ï¼‰å˜å¼‚çš„æ–¹å¼ã€‚</li><li>è¦†ç›–ç‡çš„å®šä¹‰ã€‚å®šä¹‰è¦†ç›–ç‡æ—¶è¦é˜²æ­¢ä¿¡æ¯ä¸¢å¤±ã€‚ä»£ç è¦†ç›–ç‡çš„å¢åŠ ä»£è¡¨äº†æ–°çš„ç¨‹åºçŠ¶æ€ã€‚æ­¤å¤–ï¼Œä»£ç è¦†ç›–ç‡å¾ˆå®¹æ˜“æµ‹é‡ã€‚è¾¹ç¼˜çš„æµ‹è¯•ç”¨ä¾‹è¢«è®¤ä¸ºå¾ˆæœ‰è¶£</li><li>é€šè¿‡éªŒè¯çš„æŒ‘æˆ˜ã€‚éªŒè¯å¯ä»¥ä¿æŠ¤ç¨‹åºï¼ŒèŠ‚çœè®¡ç®—èµ„æºï¼Œå¹¶ä¿æŠ¤ç¨‹åºå…å—æ— æ•ˆè¾“å…¥å’Œæ¶æ„æ„é€ è¾“å…¥é€ æˆçš„æŸåã€‚</li><li>ä¸€äº›ç ”ç©¶å°è¯•ä½¿ç”¨æœºå™¨å­¦ä¹ æŠ€æœ¯æ¥è¾…åŠ©ç”Ÿæˆtestcasesã€‚GANæ¯”LSTMæ›´å¿«ã€æ›´æœ‰æ•ˆï¼Œå¹¶ä¸”æœ‰åŠ©äºå‘ç°æ›´å¤šçš„ä»£ç è·¯å¾„ã€‚</li><li>å¦‚ä½•ä»ç§å­æ± ä¸­é€‰æ‹©ç§å­ï¼Ÿ</li><li>å¦‚ä½•é«˜æ•ˆåœ°æµ‹è¯•åº”ç”¨ç¨‹åºï¼Ÿ</li></ul>]]></content>
    
    
    <categories>
      
      <category>paper</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fuzzing</tag>
      
      <tag>Software Testing</tag>
      
      <tag>Survey</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘LSTMç½‘ç»œç»“æ„ç®€ä»‹ä¸å¯¹åº”çš„keraså®ç°</title>
    <link href="/2020/06/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91LSTM%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84%E7%AE%80%E4%BB%8B%E4%B8%8E%E5%AF%B9%E5%BA%94%E7%9A%84keras%E5%AE%9E%E7%8E%B0/"/>
    <url>/2020/06/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91LSTM%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84%E7%AE%80%E4%BB%8B%E4%B8%8E%E5%AF%B9%E5%BA%94%E7%9A%84keras%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<p>ä»ç†è®ºå’Œä»£ç ä¸¤ä¸ªå±‚é¢ä»‹ç»äº†LSTMç½‘ç»œã€‚<br><!--more---></p><h2 id="ä¸€ã€ç†è®ºæ¥ä¸€æ³¢"><a href="#ä¸€ã€ç†è®ºæ¥ä¸€æ³¢" class="headerlink" title="ä¸€ã€ç†è®ºæ¥ä¸€æ³¢"></a>ä¸€ã€ç†è®ºæ¥ä¸€æ³¢</h2><p>å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRecurrent Neural Networkï¼ŒRNNï¼‰æ˜¯ä¸€ç±»æœ‰çŸ­æœŸè®°å¿†èƒ½åŠ›çš„ç¥ç»ç½‘ç»œã€‚åœ¨å¾ªç¯ç¥ç»ç½‘ç»œä¸­ï¼Œç¥ç»å…ƒä¸ä½†å¯ä»¥æ¥å—å…¶ä»–ç¥ç»å…ƒçš„ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥æ¥å—è‡ªèº«çš„ä¿¡æ¯ï¼Œå½¢æˆå…·æœ‰ç¯è·¯çš„ç½‘ç»œç»“æ„ã€‚</p><p><img src="/2020/06/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91LSTM%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84%E7%AE%80%E4%BB%8B%E4%B8%8E%E5%AF%B9%E5%BA%94%E7%9A%84keras%E5%AE%9E%E7%8E%B0/2020-06-20-11-51-21.png" alt></p><p>é•¿çŸ­æœŸè®°å¿†ç½‘ç»œï¼ˆLong Short-Term Memory Networkï¼ŒLSTMï¼‰[Gers et al.,2000; Hochreiter et al., 1997] æ˜¯å¾ªç¯ç¥ç»ç½‘ç»œçš„ä¸€ä¸ªå˜ä½“ï¼Œå¯ä»¥æœ‰æ•ˆåœ°è§£å†³ç®€å•å¾ªç¯ç¥ç»ç½‘ç»œçš„æ¢¯åº¦çˆ†ç‚¸æˆ–æ¶ˆå¤±é—®é¢˜ã€‚</p><p><img src="/2020/06/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91LSTM%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84%E7%AE%80%E4%BB%8B%E4%B8%8E%E5%AF%B9%E5%BA%94%E7%9A%84keras%E5%AE%9E%E7%8E%B0/2020-06-20-11-51-13.png" alt></p><p>LSTM ç½‘ç»œå¼•å…¥ä¸€ä¸ªæ–°çš„å†…éƒ¨çŠ¶æ€ï¼ˆinternal stateï¼‰ $\boldsymbol{c}<em>{t}\in \mathbb{R}^{\boldsymbol{D}}$ ä¸“é—¨è¿›è¡Œçº¿æ€§çš„å¾ªç¯ä¿¡æ¯ä¼ é€’ï¼ŒåŒæ—¶ï¼ˆéçº¿æ€§åœ°ï¼‰è¾“å‡ºä¿¡æ¯ç»™éšè—å±‚çš„å¤–éƒ¨çŠ¶æ€ $\boldsymbol{h}</em>{t}\in \mathbb{R}^{\boldsymbol{D}}$ ã€‚è¿™ä¸¤ä¸ªçŠ¶æ€é€šè¿‡ä¸‹å¼è®¡ç®—ï¼š</p><script type="math/tex; mode=display">\begin{array}{l}\boldsymbol{c}_{t}=\boldsymbol{f}_{t} \odot \boldsymbol{c}_{t-1}+\boldsymbol{i}_{t} \odot \tilde{\boldsymbol{c}}_{t} \\\boldsymbol{h}_{t}=\boldsymbol{o}_{t} \odot \tanh \left(\boldsymbol{c}_{t}\right)\end{array}</script><p>å…¶ä¸­ï¼Œ$\odot$ä¸ºå‘é‡é€å…ƒç´ ä¹˜ç§¯ï¼ˆä»£è¡¨å·¦å³ä¸¤è¾¹å‘é‡ç»´åº¦ç›¸åŒï¼‰ï¼›$\boldsymbol{c}_{t-1}$ä¸ºä¸Šä¸€æ—¶åˆ»çš„è®°å¿†å•å…ƒï¼›$\tilde{\boldsymbol{c}}\in \mathbb{R}^{\boldsymbol{D}}$æ˜¯é€šè¿‡éçº¿æ€§å‡½æ•°å¾—åˆ°çš„å€™é€‰çŠ¶æ€ï¼š</p><script type="math/tex; mode=display">\tilde{\boldsymbol{c}}_{t}=\tanh \left(\boldsymbol{W}_{c} \boldsymbol{x}_{t}+\boldsymbol{U}_{c} \boldsymbol{h}_{t-1}+\boldsymbol{b}_{c}\right)</script><p>åœ¨æ¯ä¸ªæ—¶åˆ» $t$ï¼ŒLSTM ç½‘ç»œçš„å†…éƒ¨çŠ¶æ€ $\boldsymbol{c}_{t}$ è®°å½•äº†åˆ°å½“å‰æ—¶åˆ»ä¸ºæ­¢çš„å†å²ä¿¡æ¯ã€‚</p><p>LSTMå†…éƒ¨å¤šäº†ä¸‰ä¸ªgateï¼Œåˆ†åˆ«æ˜¯forgetã€inputã€outputã€‚$\boldsymbol{f}<em>{t}\in [0,1]^{\boldsymbol{D}}$ã€$\boldsymbol{i}</em>{t}\in [0,1]^{\boldsymbol{D}}$ã€$\boldsymbol{o}_{t}\in [0,1]^{\boldsymbol{D}}$ã€‚è¿™ä¸‰ä¸ªé—¨ä¸è¾“å…¥ã€éšçŠ¶æ€å’Œè¾“å‡ºçš„ç»´åº¦åº”è¯¥ç›¸åŒï¼Œéƒ½æ˜¯ç»´åº¦ä¸ºè¾“å…¥åºåˆ—ç»´åº¦nçš„å‘é‡ï¼ˆå…¶å®åº”è¯¥ä¸ºn+1ï¼‰$=D$ã€‚</p><p>ä¸æ­¤åŒæ—¶ï¼Œä¸‰ä¸ªé—¨çš„å€¼ä¾èµ–äº$t$æ—¶åˆ»çš„è¾“å…¥$x<em>t$ã€$t-1$æ—¶åˆ»çš„éšå˜é‡$h</em>{t-1}$ä»¥åŠä¸åŒçš„æƒé‡çŸ©é˜µ($W_i$/$W_f$/$W_o$/$U_i$/$U_f$/$U_o$)ã€‚</p><p>é—¨æ§æœºåˆ¶ï¼ˆGating Mechanismï¼‰æ˜¯ç”¨æ¥æ§åˆ¶ä¿¡æ¯ä¼ é€’çš„è·¯å¾„çš„æ‰‹æ®µã€‚</p><ul><li>é—å¿˜é—¨ $\boldsymbol{f}<em>{t}$ æ§åˆ¶ä¸Šä¸€ä¸ªæ—¶åˆ»çš„å†…éƒ¨çŠ¶æ€$\boldsymbol{c}</em>{t-1}$ éœ€è¦é—å¿˜å¤šå°‘ä¿¡æ¯ã€‚</li><li>è¾“å…¥é—¨ $\boldsymbol{i}<em>{t}$ æ§åˆ¶å½“å‰æ—¶åˆ»çš„å€™é€‰çŠ¶æ€ Ìƒ$\tilde{\boldsymbol{c}}</em>{t}$ æœ‰å¤šå°‘ä¿¡æ¯éœ€è¦ä¿å­˜ã€‚</li><li>è¾“å‡ºé—¨ $\boldsymbol{o}<em>{t}$ æ§åˆ¶å½“å‰æ—¶åˆ»çš„å†…éƒ¨çŠ¶æ€ $\boldsymbol{c}</em>{t}$ æœ‰å¤šå°‘ä¿¡æ¯éœ€è¦è¾“å‡ºç»™å¤–éƒ¨çŠ¶æ€ $\boldsymbol{h}_{t}$ã€‚</li></ul><p>ä¸¾ä¸ªä¾‹å­ï¼Œå½“$\boldsymbol{f}<em>{t}=\mathbf{0}, \boldsymbol{i}</em>{t}=\mathbf{1}$æ—¶ï¼Œè®°å¿†å•å…ƒå°†å†å²ä¿¡æ¯æ¸…ç©ºï¼Œå¹¶å°†å€™é€‰çŠ¶æ€å‘é‡$\tilde{\boldsymbol{c}}<em>{t}$å†™å…¥ã€‚ä½†æ­¤æ—¶è®°å¿†å•å…ƒ $\boldsymbol{c}</em>{t}$ ä¾ç„¶å’Œä¸Šä¸€æ—¶åˆ»çš„å†å²ä¿¡æ¯ç›¸å…³ã€‚å½“$\boldsymbol{f}<em>{t}=\mathbf{1}, \boldsymbol{i}</em>{t}=\mathbf{0}$æ—¶ï¼Œè®°å¿†å•å…ƒå°†å¤åˆ¶ä¸Šä¸€æ—¶åˆ»çš„å†…å®¹ï¼Œä¸å†™å…¥æ–°çš„ä¿¡æ¯ã€‚</p><p>LSTM ç½‘ç»œä¸­çš„â€œé—¨â€æ˜¯ä¸€ç§â€œè½¯â€é—¨ï¼Œå–å€¼åœ¨ (0, 1) ä¹‹é—´ï¼Œè¡¨ç¤ºä»¥ä¸€å®šçš„æ¯”ä¾‹å…è®¸ä¿¡æ¯é€šè¿‡ï¼ä¸‰ä¸ªé—¨çš„è®¡ç®—æ–¹å¼ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}\boldsymbol{i}_{t} &=\sigma\left(\boldsymbol{W}_{i} \boldsymbol{x}_{t}+\boldsymbol{U}_{i} \boldsymbol{h}_{t-1}+\boldsymbol{b}_{i}\right) \\\boldsymbol{f}_{t} &=\sigma\left(\boldsymbol{W}_{f} \boldsymbol{x}_{t}+\boldsymbol{U}_{f} \boldsymbol{h}_{t-1}+\boldsymbol{b}_{f}\right) \\\boldsymbol{o}_{t} &=\sigma\left(\boldsymbol{W}_{o} \boldsymbol{x}_{t}+\boldsymbol{U}_{o} \boldsymbol{h}_{t-1}+\boldsymbol{b}_{o}\right)\end{aligned}</script><p>å…¶ä¸­$\sigma(\cdot)$ ä¸º Logistic å‡½æ•°ï¼Œå…¶è¾“å‡ºåŒºé—´ä¸º (0, 1)ï¼›$\boldsymbol{x}_{t}$ä¸ºå½“å‰æ—¶åˆ»çš„è¾“å…¥ã€‚</p><h2 id="äºŒã€è¿˜æ˜¯å¾—çœ‹ä»£ç "><a href="#äºŒã€è¿˜æ˜¯å¾—çœ‹ä»£ç " class="headerlink" title="äºŒã€è¿˜æ˜¯å¾—çœ‹ä»£ç "></a>äºŒã€è¿˜æ˜¯å¾—çœ‹ä»£ç </h2><p>ä¸‹é¢æ˜¯æˆ‘å®šä¹‰çš„ä¸€ä¸ªä¸“ç”¨äºIMDbå½±è¯„æƒ…æ„Ÿåˆ†æçš„äºŒåˆ†ç±»æ¨¡å‹ï¼ŒåŒ…è£…åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ã€‚è¾“å…¥è®­ç»ƒé›†ã€æµ‹è¯•é›†åŠå…¶æ ‡ç­¾ï¼Œè®¾å®šå¥½å‚æ•°å°±å¯ä»¥è¿è¡Œã€è®­ç»ƒã€‚å¯ä»¥é€‰æ‹©æ˜¯å¦ä¿å­˜æ¨¡å‹åˆ°æœ¬åœ°ã€‚æœ€åå‡½æ•°è¿”å›è®­ç»ƒå¥½çš„æ¨¡å‹ã€‚</p><p>è¿™ä¸ªäºŒåˆ†ç±»æ¨¡å‹ä¸­ï¼Œè¾“å…¥æ˜¯é•¿åº¦ä¸º80çš„æ•´æ•°åˆ—è¡¨ï¼ˆmaxlen=80ï¼‰ï¼Œä»£è¡¨ç€80ä¸ªä¸åŒçš„å•è¯æ„æˆçš„ä¸€å¥è¯ã€‚</p><p>å¦‚æœæœ‰å½±è¯„ä¸å¤Ÿ80ä¸ªè¯ï¼Œå°±åœ¨å½±è¯„å‰é¢åŠ è¶³å¤Ÿçš„0ï¼Œç›´åˆ°è¿™æ¡å½±è¯„è¾¾åˆ°80ä¸ªè¯ä¸ºæ­¢ã€‚å¦‚æœå½±è¯„å•è¯é‡å¤§äº80ä¸ªï¼Œä¾¿æˆªå–å‰é¢çš„80ä¸ªè¯ã€‚</p><p>æ¯ä¸ªæ•´æ•°éƒ½ä»£è¡¨ä¸€ä¸ªå•è¯è¡¨ä¸­çš„å•è¯ã€‚å½“ç„¶å•è¯è¡¨çš„å¤§å°æ˜¯å›ºå®šçš„ï¼ˆnum_words=10000ä¸ªå•è¯ï¼‰ï¼Œå¦‚æœå‡ºç°ä¸åœ¨å•è¯è¡¨ä¸­çš„å•è¯ï¼Œå›ºå®šå°†å…¶ç¼–ç æˆ2ï¼Œè¡¨ç¤ºUNKNOWNï¼ˆè¿™æ¡è®¾ç½®ä¸åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œå±äºæ•°æ®é¢„å¤„ç†ï¼‰ã€‚</p><p>ç¬¬ä¸€å±‚æ˜¯Embeddingå±‚ï¼Œè´Ÿè´£å°†ä¸€å¥è¯ä¸­çš„æ¯ä¸ªå•è¯æ˜ å°„æˆå›ºå®šç»´åº¦çš„è¯å‘é‡ï¼›</p><p>æ³¨æ„ï¼Œæ¯ä¸ªå•è¯ï¼ˆåœ¨è¿™é‡Œæ˜¯æ¯ä¸ªæ•´æ•°ï¼‰éƒ½ä¼šå˜æˆå›ºå®šç»´åº¦ï¼ˆembedding_dim=128ï¼‰çš„å‘é‡ï¼Œå› æ­¤æ¯æ¡å½±è¯„ä»Embeddingå±‚è¾“å‡ºåï¼Œéƒ½ä¼šå˜æˆ80*128çš„çŸ©é˜µã€‚</p><p>ç¬¬äºŒå±‚æ˜¯LSTMå±‚ã€‚å¦‚æœä½ çœ‹äº†ç†è®ºéƒ¨åˆ†çš„å™è¿°ï¼Œå°±çŸ¥é“LSTMå±‚ä¸­æ— è®ºæ˜¯éšçŠ¶æ€$\boldsymbol{c}$ã€$\boldsymbol{h}$è¿˜æ˜¯ä¸‰ä¸ªé—¨$\boldsymbol{f}$ã€$\boldsymbol{i}$ã€$\boldsymbol{o}$ï¼Œä»–ä»¬çš„ç»´åº¦éƒ½æ˜¯$\boldsymbol{D}$ã€‚è¿™ä¸ª$\boldsymbol{D}$çš„å¤§å°å°±éœ€è¦æˆ‘ä»¬ç”¨å‚æ•°<code>lstm_dim=32</code>æ¥å®šä¹‰ã€‚è¿™ä¸ªå‚æ•°è¶Šå¤§ï¼Œä»£è¡¨LSTMå±‚çš„å‚æ•°è¶Šå¤šã€æ³›åŒ–èƒ½åŠ›è¶Šå¼ºï¼Œä¹Ÿæ›´éš¾è®­ç»ƒã€æ›´å®¹æ˜“è¿‡æ‹Ÿåˆã€‚</p><p>ç¬¬ä¸‰å±‚æ˜¯å•ä¸ªç¥ç»å…ƒçš„sigmoidå±‚ï¼Œåœ¨è¿™é‡Œå°±ç›´æ¥è½¬æ¢æˆæ¦‚ç‡å¹¶åˆ†ç±»äº†ã€‚</p><pre><code class="lang-python">def train_lstm(x_train, y_train, x_test, y_test,                num_words=10000,                maxlen=80,                embedding_dim=128,                lstm_dim=32,                batch_size=32,                epochs=10):    # æ¥æ”¶ä¸€ä¸ªå«æœ‰ 100 ä¸ªæ•´æ•°çš„åºåˆ—ï¼Œæ¯ä¸ªæ•´æ•°åœ¨ 1 åˆ° 20000 ä¹‹é—´    inputs = Input(shape=(maxlen,), dtype=&#39;int32&#39;, name=&#39;main_input&#39;)    # Embedding å±‚å°†è¾“å…¥åºåˆ—ç¼–ç ä¸ºä¸€ä¸ªç¨ å¯†å‘é‡çš„åºåˆ—ï¼Œ    # æ¯ä¸ªå‘é‡ç»´åº¦ä¸º 512ã€‚    x = Embedding(input_dim=num_words,                   input_length=maxlen,                   output_dim=embedding_dim,                   name=&#39;embedding&#39;)(inputs)    # LSTM å±‚æŠŠå‘é‡åºåˆ—è½¬æ¢æˆå•ä¸ªå‘é‡ï¼Œ    # å®ƒåŒ…å«æ•´ä¸ªåºåˆ—çš„ä¸Šä¸‹æ–‡ä¿¡æ¯    lstm_output = LSTM(lstm_dim, name=&#39;lstm&#39;)(x)    # æ’å…¥è¾…åŠ©æŸå¤±ï¼Œ    #ä½¿å¾—å³ä½¿åœ¨æ¨¡å‹ä¸»æŸå¤±å¾ˆé«˜çš„æƒ…å†µä¸‹ï¼ŒLSTM å±‚å’Œ Embedding å±‚éƒ½èƒ½è¢«å¹³ç¨³åœ°è®­ç»ƒ    outputs = Dense(1, activation=&#39;sigmoid&#39;, name=&#39;output&#39;)(lstm_output)    model = Model(inputs=inputs, outputs=outputs)    model.compile(optimizer=&#39;adam&#39;,            loss=&#39;binary_crossentropy&#39;,            metrics=[&#39;accuracy&#39;])    model.fit(x_train, y_train,        batch_size=batch_size,        epochs=epochs,        validation_data=(x_test, y_test,))    score, acc = model.evaluate(x_test, y_test, batch_size=batch_size)    print(&#39;Test score:&#39;, score)    print(&#39;Test accuracy:&#39;, acc)    # model.save(&quot;lstm_imdb.h5&quot;)    return model</code></pre><h2 id="ä¸‰ã€LSTMè¿”å›æ‰€æœ‰æ—¶é—´æ­¥çš„hidden-stateå‘é‡"><a href="#ä¸‰ã€LSTMè¿”å›æ‰€æœ‰æ—¶é—´æ­¥çš„hidden-stateå‘é‡" class="headerlink" title="ä¸‰ã€LSTMè¿”å›æ‰€æœ‰æ—¶é—´æ­¥çš„hidden stateå‘é‡"></a>ä¸‰ã€LSTMè¿”å›æ‰€æœ‰æ—¶é—´æ­¥çš„hidden stateå‘é‡</h2><p>æ•°æ®ç»è¿‡LSTMå±‚ï¼Œè¾“å‡ºçš„æ˜¯æœ€åä¸€ä¸ªæ—¶é—´æ­¥å¾—åˆ°çš„outputå‘é‡ï¼ˆå³$\boldsymbol{h}_{finally}$ï¼‰ï¼Œç»´åº¦ä¸º$\boldsymbol{D}$ã€‚</p><p>å…¶å®LSTMèƒ½å¤Ÿåœ¨æ¯ä¸ªæ—¶é—´æ­¥éƒ½è¾“å‡ºoutputï¼ˆå³$\boldsymbol{h}_{t}$ï¼‰ï¼Œåªä¸è¿‡æˆ‘ä»¬æŠŠè¿™äº›æ²¡åˆ°æ—¶é—´çš„åŠæˆå“outputé€‰æ‹©æ€§å¿½ç•¥äº†ã€‚</p><p>å¦‚æœä½ æƒ³è¦å †å LSTMå±‚ï¼Œä¹Ÿå°±æ˜¯LSTMå±‚ä¸‹é¢è¿˜æœ‰LSTMï¼Œæˆ–è€…ä½ <strong>éœ€è¦æ‰€æœ‰æ—¶é—´æ­¥çš„</strong>$\boldsymbol{h}_{t}$ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨è®­ç»ƒçš„æ—¶å€™æŠŠ<code>return_sequences=True</code>å†™è¿›LSTMå‚æ•°ä¹‹ä¸­ã€‚</p><p><img src="/2020/06/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91LSTM%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84%E7%AE%80%E4%BB%8B%E4%B8%8E%E5%AF%B9%E5%BA%94%E7%9A%84keras%E5%AE%9E%E7%8E%B0/å †å rnn.png" alt></p><p>ä¸‹é¢è®©æˆ‘ä»¬æ¥æ¯”è¾ƒä¸€ä¸‹<code>return_sequences</code>å‚æ•°å¼€å¯ä¹‹åè¾“å‡ºå€¼çš„å˜åŒ–ã€‚</p><h3 id="return-sequences-False"><a href="#return-sequences-False" class="headerlink" title="return_sequences=False"></a>return_sequences=False</h3><p>é¦–å…ˆå›ºå®šéšæœºæ•°ç§å­ã€‚</p><pre><code class="lang-python">np.random.seed(0)tf.random.set_seed(0)</code></pre><p>ç„¶åæ„å»ºè¾“å…¥Inputå‘é‡å’ŒLSTMå±‚ï¼Œæ­¤æ—¶LSTMå±‚ä½¿ç”¨é»˜è®¤å‚æ•°<code>return_sequences=False</code>ã€‚</p><pre><code class="lang-python">input1 = Input(shape=(3,1)) # è¾“å…¥æ˜¯ä¸‰ç»´å‘é‡lstm1 = LSTM(1)(input1) # å†…éƒ¨hiddenå’Œcellçš„ç»´åº¦ä¸º1model = Model(inputs=input1, outputs=lstm1)</code></pre><p>æ„é€ ä¸€æ‰¹è¾“å…¥ï¼ŒåŒ…æ‹¬6ä¸ªå¥å­ï¼Œæ¯ä¸ªå¥å­ä¸‰ä¸ªå•è¯ï¼Œç„¶åè¾“å…¥LSTMï¼ŒæŸ¥çœ‹LSTMå±‚çš„è¾“å‡ºã€‚</p><pre><code class="lang-python">data = np.array([[0.1, 0.2, 0.3],                    [0.3, 0.2, 0.1],                    [0.2, 0.6, 0.3],                    [0.8, 0.2, 0.3],                    [0.3, 0.5, 0.1],                    [0.2, 0.6, 0.2]])print(model.predict(data))</code></pre><p>æ­¤æ—¶è¾“å‡ºä¸ºï¼š</p><pre><code class="lang-python">[[0.00844267] [0.00617958] [0.01279002] [0.01231858] [0.009055  ] [0.01108878]]Process finished with exit code 0</code></pre><h3 id="return-sequences-True"><a href="#return-sequences-True" class="headerlink" title="return_sequences=True"></a>return_sequences=True</h3><p>ç„¶åæ‰“å¼€<code>return_sequences</code>çš„å¼€å…³</p><pre><code class="lang-python">lstm1 = LSTM(1, return_sequences=True)(input1)</code></pre><p>æ­¤æ—¶çš„è¾“å‡ºä¸ºï¼š</p><pre><code>[[[0.00190693]  [0.00490441]  [0.00844267]] #  [[0.0055262 ]  [0.00704476]  [0.00617958]] # [[0.00374958]  [0.01259477]  [0.01279002]] # [[0.01337298]  [0.01142679]  [0.01231858]] # [[0.0055262 ]  [0.01206062]  [0.009055  ]] # [[0.00374958]  [0.01259477]  [0.01108878]]] #Process finished with exit code 0</code></pre><p>æ­¤ä¸ºè¾“å‡ºæ‰€æœ‰æ—¶é—´æ­¥çš„hidden stateã€‚é‰´äºä¸€å…±6ä¸ªæµ‹è¯•è¾“å…¥ï¼Œæ¯ä¸ªè¾“å…¥æœ‰3ä¸ªfeatureï¼Œæ‰€ä»¥æ—¶é—´æ­¥ä¹Ÿå°±ä¸‰æ­¥ã€‚LSTMçš„è¾“å‡ºç»“æœä»6ä¸ªhidden stateå˜æˆäº†6*3ä¸ªhidden stateã€‚</p><h3 id="return-state-True"><a href="#return-state-True" class="headerlink" title="return_state=True"></a>return_state=True</h3><p>æˆ‘ä»¬å†æ¥çœ‹å¦ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°èƒ½å¤Ÿæ§åˆ¶LSTMè¾“å‡ºcell stateã€‚</p><pre><code class="lang-python">lstm1 = LSTM(1, return_state=True)(input1)</code></pre><pre><code>[array([[0.00844267],       [0.00617958],       [0.01279002],       [0.01231858],       [0.009055  ],       [0.01108878]], dtype=float32), array([[0.00844267],       [0.00617958],       [0.01279002],       [0.01231858],       [0.009055  ],       [0.01108878]], dtype=float32), array([[0.01655067],       [0.01227413],       [0.02506882],       [0.02414548],       [0.01798305],       [0.02187706]], dtype=float32)]Process finished with exit code 0</code></pre><p>å¼€å¯<code>return_state=True</code>ä¹‹åï¼ŒLSTMè¿”å›3ä¸ªarrayï¼Œç¬¬ä¸€ä¸ªarrayå’Œç¬¬äºŒä¸ªarrayä¸€æ ·ï¼Œéƒ½æ˜¯hidden stateï¼Œå’Œé»˜è®¤è¿”å›çš„ä¸€æ ·ã€‚ç¬¬ä¸‰ä¸ªarrayå°±æ˜¯æœ€åä¸€ä¸ªæ—¶é—´æ­¥çš„cell stateã€‚</p><h3 id="return-state-True-return-sequences-True"><a href="#return-state-True-return-sequences-True" class="headerlink" title="return_state=True, return_sequences=True"></a>return_state=True, return_sequences=True</h3><p>å¦‚æœä¸¤ä¸ªå¼€å…³éƒ½æ‰“å¼€ï¼Œåˆ™ç»“æœå˜æˆ</p><pre><code class="lang-python">lstm1 = LSTM(1, return_state=True, return_sequences=True)(input1)</code></pre><pre><code>[array([[[0.00190693],        [0.00490441],        [0.00844267]],       [[0.0055262 ],        [0.00704476],        [0.00617958]],       [[0.00374958],        [0.01259477],        [0.01279002]],       [[0.01337298],        [0.01142679],        [0.01231858]],       [[0.0055262 ],        [0.01206062],        [0.009055  ]],       [[0.00374958],        [0.01259477],        [0.01108878]]], dtype=float32), array([[0.00844267],       [0.00617958],       [0.01279002],       [0.01231858],       [0.009055  ],       [0.01108878]], dtype=float32), array([[0.01655067],       [0.01227413],       [0.02506882],       [0.02414548],       [0.01798305],       [0.02187706]], dtype=float32)]Process finished with exit code 0</code></pre><p>è¿˜æ˜¯è¿”å›ä¸‰ä¸ªarrayï¼Œç¬¬ä¸€ä¸ªæ˜¯æ‰€æœ‰æ—¶é—´æ­¥çš„hidden stateï¼Œè¿™æ˜¯å¼€å¯<code>return_sequences=True</code>çš„æ•ˆæœï¼›ç¬¬äºŒä¸ªåˆ™æ˜¯åŸæœ¬LSTMçš„è¾“å‡ºhidden stateï¼›ç¬¬ä¸‰ä¸ªæ˜¯å¼€å¯<code>return_state=True</code>çš„æ•ˆæœï¼Œè¿”å›æœ€åä¸€ä¸ªæ—¶é—´æ­¥çš„cell state</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RNN</tag>
      
      <tag>LSTM</tag>
      
      <tag>Keras</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€è®ºæ–‡é˜…è¯»ç¬”è®°ã€‘Deep Text Classification Can be Fooled</title>
    <link href="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Deep-Text-Classification-Can-be-Fooled/"/>
    <url>/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Deep-Text-Classification-Can-be-Fooled/</url>
    
    <content type="html"><![CDATA[<p>å›½å†…äººæ°‘å¤§å­¦çš„ä¸€ç¯‡è®ºæ–‡ï¼Œè¢«IJCAI-2018æ¥æ”¶ã€‚ä¸»è¦ç ”ç©¶æ–‡æœ¬é¢†åŸŸçš„å¯¹æŠ—æ ·æœ¬ç”Ÿæˆï¼Œè¢«æµ‹æ¨¡å‹æ˜¯æ–‡æœ¬åˆ†ç±»é¢†åŸŸçš„æ¨¡å‹ã€‚<br><!--more---></p><h2 id="1-å¼•è¨€"><a href="#1-å¼•è¨€" class="headerlink" title="1. å¼•è¨€"></a>1. å¼•è¨€</h2><p>å½“å‰çš„å¯¹æŠ—æ ·æœ¬ç”Ÿæˆé¢†åŸŸé›†ä¸­åœ¨å›¾åƒçš„æ‰°åŠ¨å’Œç”Ÿæˆï¼Œæ–‡æœ¬é¢†åŸŸå°‘æœ‰æ¶‰åŠã€‚</p><p><strong>æ–‡æœ¬å¯¹æŠ—æ ·æœ¬åº”å½“æ»¡è¶³</strong>ï¼š</p><ul><li>ä½¿æ¨¡å‹åˆ†ç±»é”™è¯¯</li><li>ä¸åŸæ ·æœ¬ç›¸æ¯”ï¼Œæ‰°åŠ¨éš¾ä»¥å¯Ÿè§‰</li><li>å®ç”¨æ€§ï¼Œå³æ–‡æœ¬å«ä¹‰ä¸å‘ç”Ÿæ”¹å˜</li></ul><p><strong>æœ¬æ–‡é‡‡ç”¨çš„ç”Ÿæˆæ€è·¯</strong>ï¼š</p><ul><li>ä¸‰ç§æ‰°åŠ¨ç­–ç•¥ï¼šæ’å…¥ã€ä¿®æ”¹å’Œåˆ é™¤</li><li>è‡ªç„¶è¯­è¨€æ°´å°</li><li>ç™½ç›’+é»‘ç›’</li></ul><blockquote><p>è‡ªç„¶è¯­è¨€æ°´å°ï¼ˆNatural Language Watermarkingï¼‰æ˜¯é€šè¿‡ä¿®æ”¹æ–‡æœ¬å…ƒç´ ï¼ˆå¦‚çº¿æ¡ï¼Œæ–‡å­—æˆ–å­—ç¬¦ï¼‰çš„å¤–è§‚ï¼Œæˆ–æ›´æ”¹æ–‡æœ¬æ ¼å¼æˆ–å­—ä½“ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡-æ–‡å­—ä¸­çš„å•è¯å’Œå­—æ¯é—´è·ï¼‰æ¥åµŒå…¥ä¿¡æ¯çš„æŠ€æœ¯ã€‚</p></blockquote><h2 id="2-ç›®æ ‡æ¨¡å‹å’Œæ•°æ®é›†"><a href="#2-ç›®æ ‡æ¨¡å‹å’Œæ•°æ®é›†" class="headerlink" title="2. ç›®æ ‡æ¨¡å‹å’Œæ•°æ®é›†"></a>2. ç›®æ ‡æ¨¡å‹å’Œæ•°æ®é›†</h2><p><strong>å­—ç¬¦çº§æ¨¡å‹</strong>ï¼š</p><ul><li>ä»¥å­—æ¯ä¸ºå•ä½ï¼Œç¼–ç é•¿åº¦ä¸ºå­—æ¯è¡¨å¤§å°ï¼ˆ26+ç©ºç™½ç¬¦ä¸ªæ•°ï¼‰</li><li>ç»“æ„ï¼š6conv + 3fc</li><li>æ•°æ®é›†ï¼šDBPediaï¼ŒåŒ…å«14ä¸ªç±»åˆ«ï¼Œ56000è®­ç»ƒã€70000æµ‹è¯•</li></ul><p><strong>å•è¯çº§æ¨¡å‹</strong>ï¼š</p><ul><li>ä»¥å•è¯ä¸ºå•ä½ï¼Œç¼–ç é•¿åº¦ä¸ºå•è¯è¡¨å¤§å°ï¼ˆæ•°ä¸‡åˆ°æ•°åä¸‡ï¼‰</li><li>ç»“æ„ï¼šembedding + conv + maxpooling + fc(å¸¦dropout) + softmax</li><li>æ•°æ®é›†ï¼šå½±è¯„MRã€äº§å“è¯„ä»·CRã€äº§å“æ„è§MPQAï¼Œéƒ½æ˜¯äºŒåˆ†ç±»</li></ul><h2 id="3-ç™½ç›’æ”»å‡»"><a href="#3-ç™½ç›’æ”»å‡»" class="headerlink" title="3. ç™½ç›’æ”»å‡»"></a>3. ç™½ç›’æ”»å‡»</h2><p>æ‰€è°“ç™½ç›’æ”»å‡»ï¼Œå°±æ˜¯åœ¨å·²çŸ¥è¢«æµ‹æ¨¡å‹å†…éƒ¨ä¿¡æ¯çš„æƒ…å†µä¸‹å¼€å±•çš„æ”»å‡»ã€‚ç”±äºå·²çŸ¥ä¿¡æ¯è¾ƒå¤šï¼Œæ‰€ä»¥æ”»å‡»èµ·æ¥ä¹Ÿæ¯”è¾ƒå®¹æ˜“ã€‚</p><p>ç™½ç›’æ”»å‡»ç”Ÿæˆå¯¹æŠ—æ ·æœ¬çš„æ€æƒ³åœ¨å›¾åƒé¢†åŸŸç”¨çš„æ¯”è¾ƒå¤šã€‚æ¯”å¦‚åˆ©ç”¨ç½‘ç»œå‚æ•°å’ŒæŸå¤±å‡½æ•°è¿›è¡ŒæŒ‡å¯¼æ”»å‡»è¿‡ç¨‹çš„FGSMç®—æ³•ã€‚</p><p>æœ¬æ–‡é‡‡ç”¨çš„ç™½ç›’æ”»å‡»æ‰‹æ®µï¼Œä¹Ÿæ˜¯åˆ©ç”¨æ¨¡å‹å†…éƒ¨çš„å‚æ•°å’Œç½‘ç»œè®­ç»ƒæ—¶çš„æŸå¤±å‡½æ•°ä½œä¸ºå¼•å¯¼ï¼Œä½†æ˜¯ä¸ä¼šç›´æ¥ç”Ÿæˆå¯¹æŠ—æ ·æœ¬ï¼Œè€Œæ˜¯<strong>é¦–å…ˆè¯†åˆ«å¯¹åˆ†ç±»æœ‰é‡å¤§è´¡çŒ®çš„æ–‡æœ¬é¡¹</strong>ã€‚</p><h3 id="HTPï¼šHot-Training-Phrases"><a href="#HTPï¼šHot-Training-Phrases" class="headerlink" title="HTPï¼šHot Training Phrases"></a>HTPï¼šHot Training Phrases</h3><p>ä»¥å­—ç¬¦çº§æ¨¡å‹ä¸ºä¾‹ï¼Œè¯†åˆ«è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li>è¾“å…¥è®­ç»ƒæ ·æœ¬xï¼Œè®¡ç®—cost gradients âˆ‡x C(M, x, label)ï¼›</li><li>æ¯ä¸ªæ ·æœ¬xé€‰å–ä»¤gradientæœ€å¤§çš„å‰50ä¸ªå­—ç¬¦å®šä¹‰ä¸º<strong>hot character</strong>ï¼›</li><li>åŒ…å«3ä¸ªåŠä»¥ä¸Šhot charactersçš„å•è¯å®šä¹‰ä¸º<strong>hot word</strong>ï¼›</li><li>ç›¸é‚»çš„hot wordså®šä¹‰ä¸º<strong>hot phrase</strong>ï¼›</li><li>ä¸åŒç±»åˆ«æœ‰ä¸åŒçš„hot phraseï¼Œä»£è¡¨ç€è¯¥ç±»å¯¹åˆ†ç±»è´¡çŒ®æœ€å¤§çš„è¯ç»„ï¼›</li><li>æ¯ä¸ªç±»åˆ«ä¸­æœ€å¸¸å‡ºç°çš„hot phraseå®šä¹‰ä¸º<strong>Hot Training Phrases (HTPs)</strong>ã€‚</li></ol><p>ä¸‹å›¾æ˜¯DBPediaçš„Buildingç±»åˆ«æ–‡æœ¬æ•°æ®é›†ä¸­çš„HTPè¯æ±‡æ’åå‰10ã€‚<br><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Deep-Text-Classification-Can-be-Fooled/2020-06-23-20-11-30.png" alt></p><h3 id="HSPï¼šHot-Sample-Phrases"><a href="#HSPï¼šHot-Sample-Phrases" class="headerlink" title="HSPï¼šHot Sample Phrases"></a>HSPï¼šHot Sample Phrases</h3><p>ç»™å®šæ ·æœ¬xï¼Œè¯†åˆ«xä¸­çš„hot phraseä½œä¸ºæ“ä½œä½ç½®ï¼Œè¯¥ä½ç½®çš„å•è¯æˆ–è¯ç»„å°±å®šä¹‰ä¸º<strong>Hot Sample Phrases (HSPs)</strong>ã€‚</p><h3 id="Attacking-Character-level-DNN"><a href="#Attacking-Character-level-DNN" class="headerlink" title="Attacking Character-level DNN"></a>Attacking Character-level DNN</h3><h4 id="Insertion"><a href="#Insertion" class="headerlink" title="Insertion"></a><strong>Insertion</strong></h4><p>é€šè¿‡åœ¨æ ·æœ¬çš„HSPä½ç½®æ’å…¥ä»¥ä¸‹å†…å®¹å®ç°å˜å¼‚æ“ä½œï¼š</p><ul><li>HTPï¼›</li><li>å¯æœ‰å¯æ— çš„äº‹å®ï¼ˆæ–‡æœ¬æ°´å°ç®—æ³•ç”Ÿæˆï¼‰ï¼›</li><li>ä¸ä¼¤å®³æ–‡æœ¬ä¸»è¯­ä¹‰çš„ä¼ªé€ äº‹å®ï¼ˆæ–‡æœ¬æ°´å°ç®—æ³•ç”Ÿæˆï¼‰ã€‚</li></ul><p>ä¸‹é¢æ˜¯ä¸‰ä¸ªé€šè¿‡æ’å…¥çº¢è‰²æ–‡æœ¬é€ æˆæ ‡ç­¾æ”¹å˜çš„ä¾‹å­ã€‚<br><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Deep-Text-Classification-Can-be-Fooled/2020-06-23-20-11-43.png" alt="Figure2"><br><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Deep-Text-Classification-Can-be-Fooled/2020-06-23-20-11-56.png" alt="Figure3"><br><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Deep-Text-Classification-Can-be-Fooled/Figure4.png" alt="Figure4"></p><h4 id="Modification"><a href="#Modification" class="headerlink" title="Modification"></a><strong>Modification</strong></h4><p>å¯¹HSPç¨åŠ æ“ä½œï¼Œæ¯”å¦‚typo-based watermarking techniqueï¼ˆåŸºäºé”™åˆ«å­—çš„æ°´å°æŠ€æœ¯ï¼‰ï¼š</p><ul><li>(1)æ›¿æ¢ä»¥å¸¸è§çš„é”™è¯¯æ‹¼å†™ï¼ˆéœ€è¦æœ‰é”™åˆ«å­—è¯­æ–™åº“ï¼‰</li><li>(2)æ›¿æ¢ä»¥å¤–è§‚ç›¸ä¼¼çš„å­—ç¬¦</li></ul><p>ä¸‹å›¾æ˜¯æ›¿æ¢æ“ä½œåç”Ÿæˆå¯¹æŠ—æ ·æœ¬çš„ä¸€ä¸ªä¾‹å­ã€‚<br><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Deep-Text-Classification-Can-be-Fooled/Figure5.png" alt></p><p>ä¸‹å›¾æ˜¯å°†filmæ›¿æ¢æˆflimåæ¨¡å‹å†…éƒ¨æŸå¤±å‡½æ•°æ¢¯åº¦çš„æ”¹å˜ã€‚<br><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Deep-Text-Classification-Can-be-Fooled/Figure6.png" alt></p><h4 id="Removal"><a href="#Removal" class="headerlink" title="Removal"></a><strong>Removal</strong></h4><p>åˆ é™¤HSPå¯é™ä½æ¨¡å‹å¯¹æ ·æœ¬çš„confidenceã€‚åªèƒ½åˆ é™¤HSPsä¸­èµ·è¾…åŠ©ä½œç”¨çš„è¯ï¼Œè¦ä¸ç„¶ä¼šæ”¹å˜æœ¬æ¥çš„å«ä¹‰ã€‚</p><p>ä¸‹é¢æ˜¯é€šè¿‡åˆ é™¤æ¥å¯¼è‡´ç½®ä¿¡ç¨‹åº¦ä¸‹é™çš„ä¾‹å­ã€‚<br><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Deep-Text-Classification-Can-be-Fooled/Figure7.png" alt></p><h4 id="Combination"><a href="#Combination" class="headerlink" title="Combination"></a><strong>Combination</strong></h4><p>ç»„åˆä¸Šè¿°ä¸‰ç§æ‰‹æ³•ã€‚</p><p><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Deep-Text-Classification-Can-be-Fooled/Figure8.png" alt></p><h3 id="Attacking-Word-level-DNN"><a href="#Attacking-Word-level-DNN" class="headerlink" title="Attacking Word-level DNN"></a>Attacking Word-level DNN</h3><p>å•è¯çº§æ¨¡å‹ä¹Ÿæ˜¯åŒç†ï¼Œä¸ä»…å¦‚æ­¤ï¼Œç”šè‡³çœäº†hot-characterè¿™ä¸€æ­¥ã€‚ä¸‹é¢æ˜¯å‡ ä¸ªä¾‹å­ã€‚</p><p><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Deep-Text-Classification-Can-be-Fooled/Figure9.png" alt></p><p><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Deep-Text-Classification-Can-be-Fooled/Figure10.png" alt></p><h2 id="4-é»‘ç›’æ”»å‡»"><a href="#4-é»‘ç›’æ”»å‡»" class="headerlink" title="4. é»‘ç›’æ”»å‡»"></a>4. é»‘ç›’æ”»å‡»</h2><p>é»‘ç›’æ”»å‡»æ˜¾ç„¶ä¸èƒ½é€šè¿‡æ¯”è¾ƒCost Gradientçš„æ–¹å¼ç¡®å®šHTPå’ŒHSPäº†ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é‡‡ç”¨å…¶ä»–æ–¹æ³•ç¡®å®šHTPå’ŒHSPã€‚</p><p>å…·ä½“åœ°ï¼Œæˆ‘ä»¬é€šè¿‡ç”Ÿæˆä¸€äº›æµ‹è¯•æ ·æœ¬æ¥æ¢æµ‹ç›®æ ‡æ¨¡å‹ï¼Œåˆ¤æ–­å“ªäº›æ˜¯Hot Phrasesã€‚</p><p>ç”Ÿæˆæ–¹æ³•ï¼š</p><ul><li>ç”¨è‹¥å¹²ç©ºæ ¼é€ä¸ªä»£æ›¿å•è¯ï¼ˆç©ºæ ¼ä¸ªæ•°ä¸å•è¯é•¿åº¦ç›¸åŒï¼‰</li><li>å°†æµ‹è¯•æ ·æœ¬çš„åˆ†ç±»ç»“æœä¸ç§å­è¿›è¡Œæ¯”è¾ƒ</li><li>åå·®è¶Šå¤§ï¼Œç›¸åº”å•è¯å¯¹æ­£ç¡®åˆ†ç±»çš„é‡è¦æ€§å°±è¶Šå¤§</li><li>å¸¦æ¥æœ€å¤§åå·®çš„å•è¯è¢«æ ‡è¯†ä¸ºç§å­æ ·æœ¬çš„HSP</li></ul><p><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Deep-Text-Classification-Can-be-Fooled/Figure11.png" alt></p><p>ä¸‹é¢æ˜¯é»‘ç›’æ”»å‡»ç¡®å®šçš„HTPä¹‹åè¿›è¡Œæ”»å‡»çš„ä¾‹å­ï¼š</p><p><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Deep-Text-Classification-Can-be-Fooled/Figure12.png" alt></p><h2 id="5-Evaluation"><a href="#5-Evaluation" class="headerlink" title="5. Evaluation"></a>5. Evaluation</h2><h3 id="Q1-Can-our-method-perform-effective-source-target-misclassification-attack"><a href="#Q1-Can-our-method-perform-effective-source-target-misclassification-attack" class="headerlink" title="Q1: Can our method perform effective source/target misclassification attack?"></a>Q1: Can our method perform effective source/target misclassification attack?</h3><p>è¿™ä¸ªé—®é¢˜æ˜¯é—®æœ¬æ–¹æ³•èƒ½ä¸èƒ½å¯¹æ¨¡å‹å®è¡Œå®šå‘çš„æ”»å‡»ï¼Œå³â€œæŒ‡å“ªæ‰“å“ªâ€ï¼Œæ— è®ºå“ªä¸ªç±»åˆ«çš„æ ·æœ¬éƒ½èƒ½é€šè¿‡é€‚å½“ä¿®æ”¹ï¼Œçªå˜æˆæŒ‡å®šç±»åˆ«ã€‚</p><p><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Deep-Text-Classification-Can-be-Fooled/Fig13.png" alt></p><p><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Deep-Text-Classification-Can-be-Fooled/Fig14.png" alt></p><p>é€šè¿‡ä¸Šè¡¨å¯çŸ¥ï¼Œsourceæ æ˜¯æºç±»åˆ«ã€‚targetæ æ˜¯ç›®æ ‡ç±»åˆ«ï¼ŒNoæ æ˜¯æ ·æœ¬ç¼–å·ã€‚æœ¬æ¥éƒ½æ˜¯ç±»åˆ«sourceä¸­å®šä¹‰çš„æ ·æœ¬ï¼Œç»è¿‡å³è¾¹ä¸‰æ çš„çªå˜æ–¹æ³•ï¼Œæœ€ç»ˆéƒ½ä»¥è¾ƒé«˜ç½®ä¿¡åº¦è¢«æ¨¡å‹åˆ†ç±»æˆäº†targetæ ä¸­çš„ç±»åˆ«ã€‚å¯ä»¥è¯æ˜æ­¤æ–¹æ³•ç¡®å®èƒ½å®ç°å®šå‘çªå˜ã€å®šå‘æ”»å‡»ã€‚</p><h3 id="Q2-Can-the-adversarial-samples-avoid-being-distinguished-by-human-observers-and-still-keep-the-utility"><a href="#Q2-Can-the-adversarial-samples-avoid-being-distinguished-by-human-observers-and-still-keep-the-utility" class="headerlink" title="Q2: Can the adversarial samples avoid being distinguished by human observers and still keep the utility?"></a>Q2: Can the adversarial samples avoid being distinguished by human observers and still keep the utility?</h3><p>è¿™ä¸ªé—®é¢˜æ˜¯é—®å¯¹æŠ—æ ·æœ¬æ˜¯ä¸æ˜¯èƒ½å¤Ÿé¿å…è¢«äººç±»è¯†åˆ«ã€‚æ¯•ç«Ÿæ–‡æœ¬çªå˜è¿˜æ˜¯å¾ˆå®¹æ˜“è¢«äººç±»è¯†åˆ«çš„ã€‚</p><p>æœ¬è®ºæ–‡æ˜¯è¿™ä¹ˆè®¾è®¡å®éªŒçš„ï¼š</p><ul><li>æ‰¾23åå­¦ç”Ÿï¼Œæ¯ä¸ªäººéƒ½æä¾›äº†20ä¸ªæ–‡æœ¬æ ·æœ¬ï¼Œå…¶ä¸­ä¸€åŠå¸¦æœ‰æ‰°åŠ¨ï¼Œå¯¹æ¯ä¸ªæ ·æœ¬è¿›è¡Œæ‰‹åŠ¨åˆ†ç±»</li><li>å¦‚æœä»–ä»¬è®¤ä¸ºæ ·å“æ˜¯äººä¸ºä¿®æ”¹çš„ï¼Œåˆ™è¦æ±‚ä»–ä»¬æŸ¥æ˜ä¿®æ”¹çš„ä½ç½®</li><li>åŸæ ·æœ¬å‡†ç¡®ç‡ï¼š94.2%</li><li>æ‰°åŠ¨æ ·æœ¬å‡†ç¡®ç‡ï¼š94.8%</li><li>æ€»å…±ç”Ÿæˆ594ä¸ªå˜åŒ–ï¼Œæœ‰240ä¸ªè¢«å—è¯•è€…æ ‡è®°ä¸ºå·²ä¿®æ”¹çš„ä½ç½®ï¼Œå…¶ä¸­12ä¸ªæ­£ç¡®ã€‚å‡†ç¡®ç‡ä¸º12/240 = 5.0ï¼…ï¼Œå¬å›ç‡ä¸º12/594 = 2.0ï¼…</li></ul><p>å¯ä»¥çœ‹åˆ°è™½ç„¶æ ·æœ¬æ•°æ¯”è¾ƒå°ï¼Œä½†æ˜¯ç»“æœè¿˜æ˜¯å¾ˆæ˜¾è‘—çš„ï¼Œåœ¨é‚£23ä¸ªåŒå­¦éƒ½æ¯”è¾ƒé è°±çš„å‰æä¸‹ï¼Œè¯¥ç®—æ³•è¿˜æ˜¯èƒ½å¤Ÿä¿è¯ç”Ÿæˆçš„æ–‡æœ¬ä¸åŸæ–‡æœ¬å·®è·ä¸å¤§çš„ã€‚</p><h3 id="Q3-Is-our-method-efficient-enough"><a href="#Q3-Is-our-method-efficient-enough" class="headerlink" title="Q3: Is our method efficient enough?"></a>Q3: Is our method efficient enough?</h3><p>ç®—æ³•æ•ˆç‡å…¶å®ä¸æ˜¯å¾ˆé‡è¦ï¼Œæ¯•ç«Ÿåœ¨å®è·µä¸­ï¼Œæ”»å‡»è€…å¾€å¾€æ„¿æ„èŠ±è´¹æ›´å¤šæ—¶é—´æ¥åˆ¶ä½œç†æƒ³çš„å¯¹æŠ—æ€§æ ·æœ¬ã€‚</p><p>ç™½ç›’æ”»å‡»ï¼ˆè®¡ç®—æ¢¯åº¦ã€ç¡®å®šHTPï¼‰ï¼Œæ€»å…±116å°æ—¶ï¼Œå¹³å‡æ¯ç±»8.29å°æ—¶ï¼›<br>é»‘ç›’æ”»å‡»ï¼ˆç”Ÿæˆæ ·æœ¬ã€ç¡®å®šHTPï¼‰ï¼Œæ€»å…±107å°æ—¶ï¼Œå¹³å‡æ¯ç±»7.63å°æ—¶ã€‚</p><h3 id="Q4-White-box-and-black-box-which-is-more-powerful"><a href="#Q4-White-box-and-black-box-which-is-more-powerful" class="headerlink" title="Q4: White-box and black-box, which is more powerful?"></a>Q4: White-box and black-box, which is more powerful?</h3><p>ä¸¤ç§æ–¹å¼éƒ½æœ‰æ•ˆå¹¶ä¸”å½¼æ­¤äº’è¡¥ã€‚</p><p>ä¸‹å›¾åˆ†åˆ«æ˜¯é»‘ç›’å’Œç™½ç›’ç”Ÿæˆçš„HTPæ¯”è¾ƒï¼Œå¯ä»¥çœ‹åˆ°éƒ½æ˜¯æ¯”è¾ƒç±»ä¼¼çš„ã€‚</p><p><img src="/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Deep-Text-Classification-Can-be-Fooled/Fig15.png" alt></p><h2 id="6-è¯»åæ„Ÿ"><a href="#6-è¯»åæ„Ÿ" class="headerlink" title="6. è¯»åæ„Ÿ"></a>6. è¯»åæ„Ÿ</h2><p>å…¶å®æœ¬ç¯‡æ–‡ç« çš„æ€æƒ³å¹¶ä¸å¤æ‚ï¼Œæ ¸å¿ƒæ˜¯ç¡®å®šä¸€æ®µæ–‡æœ¬çš„HTPå’ŒHSPã€‚æ‰€è°“HTPå¯ä»¥è®¤ä¸ºæ˜¯ï¼Œæ¨¡å‹ä¸€çœ‹åˆ°è¿™ç§è¯å°±ç›¸ä¿¡è¿™å¥è¯æ˜¯è¯¥ç±»åˆ«çš„äº†ã€‚é‚£å¦‚æœæŠŠç±»åˆ«1çš„å¥å­xä¸­çš„HSPç»™æ›¿æ¢æˆç±»åˆ«2çš„HTPï¼Œçš„ç¡®å¯èƒ½è®©æ¨¡å‹ä»¥ä¸ºå¥å­xæ˜¯ç±»åˆ«2çš„å¥å­äº†ã€‚</p><p>æ‰€ä»¥å»¶ä¼¸å‡ºæ¥ä¸€ä¸ªæ–¹å‘ï¼Œé‚£å°±æ˜¯ç¡®å®šHSPå’ŒHTPçš„æ–¹æ³•ä¸Šã€‚å¯¹äºç™½ç›’æ”»å‡»ï¼Œè¿˜æ˜¯æŸ¥çœ‹å†…éƒ¨çš„ä¿¡æ¯ï¼Œç„¶åè®¡ç®—æ¢¯åº¦ï¼Œè¿™æ˜¯ä¸€ç§æ¯”è¾ƒä¼ ç»Ÿçš„æ–¹æ³•ã€‚å¯¹äºé»‘ç›’æ”»å‡»ï¼Œåˆ™æ˜¯éå†æ‰€æœ‰å¯èƒ½åˆ é™¤çš„å•è¯ï¼Œä»ç»“æœä¸Šæ¥çœ‹ï¼Œæ¯”è¾ƒè¿™äº›åˆ é™¤å•è¯çš„é‡è¦ç¨‹åº¦ã€‚</p><p>æ‰€ä»¥è¯´æœ‰æ²¡æœ‰å…¶ä»–æ–¹æ³•èƒ½å¤Ÿè¡¡é‡å•è¯çš„é‡è¦ç¨‹åº¦ï¼Ÿè¿™æ˜¯ä¸€ä¸ªå€¼å¾—ç ”ç©¶çš„æ–¹å‘ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>paper</category>
      
    </categories>
    
    
    <tags>
      
      <tag>NLP</tag>
      
      <tag>testing</tag>
      
      <tag>DNN</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘æœºå™¨å­¦ä¹ ä¸­å¤„ç†æ–‡æœ¬æ•°æ®çš„å¸¸ç”¨æ–¹æ³•</title>
    <link href="/2020/06/09/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B8%AD%E5%A4%84%E7%90%86%E6%96%87%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    <url>/2020/06/09/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B8%AD%E5%A4%84%E7%90%86%E6%96%87%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>æ€»ç»“è¯è¢‹æ¨¡å‹ã€Tf-idfç­‰æ–‡æœ¬ç‰¹å¾æå–æ–¹æ³•<br><!--more---></p><h2 id="ä¸€ã€è¯è¢‹æ¨¡å‹"><a href="#ä¸€ã€è¯è¢‹æ¨¡å‹" class="headerlink" title="ä¸€ã€è¯è¢‹æ¨¡å‹"></a>ä¸€ã€è¯è¢‹æ¨¡å‹</h2><p>æ–‡æœ¬æ•°æ®é€šå¸¸è¢«è¡¨ç¤ºä¸ºç”±å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ã€‚æˆ‘ä»¬éœ€è¦å…ˆå¤„ç†æ•°æ®ï¼Œç„¶åæ‰èƒ½å¯¹å…¶åº”ç”¨æœºå™¨å­¦ä¹ ç®—æ³•ã€‚</p><p>åœ¨æ–‡æœ¬åˆ†æçš„è¯­å¢ƒä¸­ï¼Œæ•°æ®é›†é€šå¸¸è¢«ç§°ä¸ºè¯­æ–™åº“ï¼ˆcorpusï¼‰ï¼Œæ¯ä¸ªç”±å•ä¸ªæ–‡æœ¬è¡¨ç¤ºçš„æ•°æ®ç‚¹è¢«ç§°ä¸ºæ–‡æ¡£ï¼ˆdocumentï¼‰ã€‚</p><p>æœ€ç®€å•çš„å¤„ç†æ–¹æ³•ï¼Œæ˜¯<strong>åªè®¡ç®—è¯­æ–™åº“ä¸­æ¯ä¸ªå•è¯åœ¨æ¯ä¸ªæ–‡æœ¬ä¸­çš„å‡ºç°é¢‘æ¬¡</strong>ã€‚è¿™ç§æ–‡æœ¬å¤„ç†æ¨¡å‹ç§°ä¹‹ä¸º<strong>è¯è¢‹æ¨¡å‹</strong>ã€‚</p><p>ä¸è€ƒè™‘è¯è¯­å‡ºç°çš„é¡ºåºï¼Œæ¯ä¸ªå‡ºç°è¿‡çš„è¯æ±‡å•ç‹¬ä½œä¸ºä¸€åˆ—ç‰¹å¾ï¼Œè¿™äº›ä¸é‡å¤çš„ç‰¹å¾è¯æ±‡é›†åˆä¸ºè¯è¡¨ã€‚</p><p>æ¯ä¸€ä¸ªæ–‡æœ¬éƒ½å¯ä»¥åœ¨å¾ˆé•¿çš„è¯è¡¨ä¸Šç»Ÿè®¡å‡ºä¸€ä¸ªå¾ˆå¤šåˆ—çš„ç‰¹å¾å‘é‡ã€‚å¦‚æœæ¯ä¸ªæ–‡æœ¬éƒ½å‡ºç°çš„è¯æ±‡ï¼Œä¸€èˆ¬è¢«æ ‡è®°ä¸º<strong>åœç”¨è¯</strong>ä¸è®¡å…¥ç‰¹å¾å‘é‡ã€‚</p><p>ä¸ºäº†ææ¸…æ¥šè¯è¢‹æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯<code>CountVectorizer</code>åˆ°åº•åšäº†ä»€ä¹ˆï¼Œæˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š</p><pre><code class="lang-python">bards_words =[&quot;The fool doth think he is wise,&quot;,    &quot;but the wise man knows himself to be a fool&quot;]</code></pre><p>æˆ‘ä»¬å¯¼å…¥ CountVectorizer å¹¶å°†å…¶å®ä¾‹åŒ–ï¼Œç„¶åå¯¹ bards_words è¿›è¡Œæ‹Ÿåˆï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code class="lang-python">from sklearn.feature_extraction.text import CountVectorizervect = CountVectorizer()vect.fit(bards_words)</code></pre><p>æ‹Ÿåˆ CountVectorizer åŒ…æ‹¬è®­ç»ƒæ•°æ®çš„åˆ†è¯ä¸è¯è¡¨çš„æ„å»ºï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ vocabulary_ å±æ€§æ¥è®¿é—®è¯è¡¨ï¼š</p><pre><code class="lang-python">print(&quot;Vocabulary size: &#123;&#125;&quot;.format(len(vect.vocabulary_)))print(&quot;Vocabulary content:\n &#123;&#125;&quot;.format(vect.vocabulary_))#------------------#Vocabulary size: 13Vocabulary content:&#123;&#39;the&#39;: 9, &#39;himself&#39;: 5, &#39;wise&#39;: 12, &#39;he&#39;: 4, &#39;doth&#39;: 2, &#39;to&#39;: 11, &#39;knows&#39;: 7,&#39;man&#39;: 8, &#39;fool&#39;: 3, &#39;is&#39;: 6, &#39;be&#39;: 0,  &#39;think&#39;: 10, &#39;but&#39;: 1&#125;</code></pre><p>è¯è¡¨å…±åŒ…å« 13 ä¸ªè¯ï¼Œä» â€œbeâ€ åˆ° â€œwiseâ€ã€‚<br>æˆ‘ä»¬å¯ä»¥è°ƒç”¨ transform æ–¹æ³•æ¥åˆ›å»ºè®­ç»ƒæ•°æ®çš„è¯è¢‹è¡¨ç¤ºï¼š</p><pre><code class="lang-python">bag_of_words = vect.transform(bards_words)print(&quot;bag_of_words: &#123;&#125;&quot;.format(repr(bag_of_words)))#--------------------#bag_of_words: &lt;2x13 sparse matrix of type &#39;&lt;class &#39;numpy.int64&#39;&gt;&#39;with 16 stored elements in Compressed Sparse Row format&gt;</code></pre><p>è¯è¢‹è¡¨ç¤ºä¿å­˜åœ¨ä¸€ä¸ª SciPy ç¨€ç–çŸ©é˜µä¸­ï¼Œè¿™ç§æ•°æ®æ ¼å¼åªä¿å­˜éé›¶å…ƒç´ ã€‚è¿™ä¸ªçŸ©é˜µçš„å½¢çŠ¶ä¸º 2Ã—13ï¼Œæ¯è¡Œå¯¹åº”äºä¸¤ä¸ªæ•°æ®ç‚¹ä¹‹ä¸€ï¼Œæ¯ä¸ªç‰¹å¾å¯¹åº”äºè¯è¡¨ä¸­çš„ä¸€ä¸ªå•è¯ã€‚è¦æƒ³æŸ¥çœ‹ç¨€ç–çŸ©é˜µçš„å®é™…å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨ toarray æ–¹æ³•å°†å…¶è½¬æ¢ä¸ºâ€œå¯†é›†çš„â€NumPy æ•°ç»„ï¼ˆä¿å­˜æ‰€æœ‰ 0 å…ƒç´ ï¼‰ï¼š</p><pre><code class="lang-python">print(&quot;Dense representation of bag_of_words:\n&#123;&#125;&quot;.format(    bag_of_words.toarray()))#---------------------#Dense representation of bag_of_words:[[0 0 1 1 1 0 1 0 0 1 1 0 1][1 1 0 1 0 1 0 1 1 1 0 1 1]]</code></pre><p>åˆ é™¤æ²¡æœ‰ä¿¡æ¯é‡çš„å•è¯ï¼Œé™¤äº†ä½¿ç”¨<code>min_df</code>å‚æ•°è®¾å®šè¯ä¾‹è‡³å°‘éœ€è¦åœ¨å¤šå°‘ä¸ªæ–‡æ¡£ä¸­å‡ºç°è¿‡ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡æ·»åŠ åœç”¨è¯çš„æ–¹æ³•ã€‚</p><h2 id="äºŒã€ç”¨tf-idfç¼©æ”¾æ•°æ®"><a href="#äºŒã€ç”¨tf-idfç¼©æ”¾æ•°æ®" class="headerlink" title="äºŒã€ç”¨tf-idfç¼©æ”¾æ•°æ®"></a>äºŒã€ç”¨tf-idfç¼©æ”¾æ•°æ®</h2><p>è¯é¢‘ - é€†å‘æ–‡æ¡£é¢‘ç‡ï¼ˆterm frequencyâ€“inverse document frequencyï¼Œtf-idfï¼‰æ–¹æ³•ï¼Œå¯¹åœ¨æŸä¸ªç‰¹å®šæ–‡æ¡£ä¸­ç»å¸¸å‡ºç°çš„æœ¯è¯­ç»™äºˆå¾ˆé«˜çš„æƒé‡ï¼Œä½†å¯¹åœ¨è¯­æ–™åº“çš„è®¸å¤šæ–‡æ¡£ä¸­éƒ½ç»å¸¸å‡ºç°çš„æœ¯è¯­ç»™äºˆçš„æƒé‡å´ä¸é«˜ã€‚</p><p>scikit-learn åœ¨ä¸¤ä¸ªç±»ä¸­å®ç°äº† tf-idf æ–¹æ³•ï¼šTfidfTransformer å’Œ TfidfVectorizerï¼Œå‰è€…æ¥å— CountVectorizer ç”Ÿæˆçš„ç¨€ç–çŸ©é˜µå¹¶å°†å…¶å˜æ¢ï¼Œåè€…æ¥å—æ–‡æœ¬æ•°æ®å¹¶å®Œæˆè¯è¢‹ç‰¹å¾æå–ä¸ tf-idf å˜æ¢ã€‚</p><p>å•è¯wåœ¨æ–‡æ¡£dä¸­çš„tf-idfåˆ†æ•°ä¸ºï¼š</p><p><img src="/2020/06/09/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B8%AD%E5%A4%84%E7%90%86%E6%96%87%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95/2020-06-09-23-20-54.png" alt></p><p>å¼ä¸­ï¼Œtfä¸ºè¯é¢‘ï¼ŒTerm Frequency, è¡¨ç¤ºä¸€ä¸ªè¯åœ¨ä¸€ä¸ªæ–‡æ¡£ä¸­çš„å‡ºç°é¢‘ç‡ã€‚è¯¥é¢‘ç‡æœ€åè¦é™¤ä»¥è¯¥æ–‡æ¡£çš„é•¿åº¦ï¼Œç”¨ä»¥å½’ä¸€åŒ–ã€‚</p><p>å¼ä¸­ï¼Œ$N$ä¸ºæ€»æ–‡æ¡£æ•°ï¼Œ$N_w$ä¸ºå¸¦æœ‰å•è¯$w$çš„æ–‡æ¡£æ•°ã€‚ç”±äºåˆ†å­æ¯”åˆ†æ¯å¤§ï¼Œæ‰€ä»¥è¯¥ $\log$ å€¼å¿…ä¸å¯èƒ½å°äºé›¶ã€‚</p><pre><code class="lang-python">from sklearn.feature_extraction.text import TfidfVectorizercorpus=[&quot;I come to China to travel&quot;,&quot;This is a car polupar in China&quot;,&quot;I love tea and Apple &quot;,&quot;The work is to write some papers in science&quot;]tfidf = TfidfVectorizer()vector = tfidf.fit_transform(corpus)print(vector)#---------------#(0, 16)    0.4424621378947393(0, 3)    0.348842231691988(0, 15)    0.697684463383976(0, 4)    0.4424621378947393(1, 5)    0.3574550433419527(1, 9)    0.45338639737285463(1, 2)    0.45338639737285463(1, 6)    0.3574550433419527(1, 14)    0.45338639737285463(1, 3)    0.3574550433419527(2, 1)    0.5(2, 0)    0.5(2, 12)    0.5(2, 7)    0.5(3, 10)    0.3565798233381452(3, 8)    0.3565798233381452(3, 11)    0.3565798233381452(3, 18)    0.3565798233381452(3, 17)    0.3565798233381452(3, 13)    0.3565798233381452(3, 5)    0.2811316284405006(3, 6)    0.2811316284405006(3, 15)    0.2811316284405006</code></pre><p>è¿”å›å€¼ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ(0, 16)ä»£è¡¨ç¬¬0ä¸ªæ–‡æ¡£ï¼Œç¬¬ä¸€ä¸ªå•è¯åœ¨å•è¯è¡¨ï¼ˆè¯è¢‹ï¼‰ä¸­çš„ä½ç½®æ˜¯ç¬¬16ä¸ªï¼Œè¯¥å•è¯çš„tf-idfå€¼ä¸º0.44246213ï¼›ç¬¬äºŒä¸ªå•è¯åœ¨è¯è¢‹ä¸­ç¬¬3ä¸ªä½ç½®â€¦â€¦</p><p>æ˜¾ç„¶è¿™æ˜¯ä¸ªç»è¿‡å‹ç¼©çš„ç³»æ•°çŸ©é˜µï¼Œæ¯ä¸€è¡Œçš„å…ƒç»„è¡¨æ˜è¯¥å…ƒç´ åœ¨ç¨€ç–çŸ©é˜µä¸­çš„ä½ç½®ï¼Œå…¶å€¼ä¸ºå³è¾¹çš„tf-idfå€¼ï¼Œä»£è¡¨ä¸€ä¸ªå•è¯ã€‚å¯ä»¥é€šè¿‡<code>.toarray()</code>æ–¹æ³•ä»¤å…¶æ¢å¤åˆ°ç³»æ•°çŸ©é˜µçŠ¶æ€ã€‚</p><pre><code class="lang-python">print(vector.toarray().shape)print(len(vector.toarray()))print(type(vector.toarray()))print(vector.toarray())#-----------------------------#(4, 19)4&lt;class &#39;numpy.ndarray&#39;&gt;[[0. 0. 0. 0.34884223 0.44246214 0.  0. 0. 0. 0. 0. 0.  0. 0. 0. 0.69768446 0.44246214 0.  0. ] [0. 0. 0.4533864  0.35745504 0. 0.35745504  0.35745504 0. 0. 0.4533864  0. 0.  0. 0. 0.4533864  0. 0. 0.  0. ] [0.5 0.5 0. 0. 0. 0.  0. 0.5 0. 0. 0. 0.  0.5 0. 0. 0. 0. 0.  0. ] [0. 0. 0. 0. 0. 0.28113163  0.28113163 0. 0.35657982 0. 0.35657982 0.35657982  0. 0.35657982 0. 0.28113163 0. 0.35657982  0.35657982]]</code></pre><h2 id="ä¸‰ã€å¤šå…ƒè¯è¢‹"><a href="#ä¸‰ã€å¤šå…ƒè¯è¢‹" class="headerlink" title="ä¸‰ã€å¤šå…ƒè¯è¢‹"></a>ä¸‰ã€å¤šå…ƒè¯è¢‹</h2><p>è¯è¢‹æ¨¡å‹å°†ä¸€æ®µæ–‡æ¡£æ‹†åˆ†æˆå•è¯åï¼Œå¿½ç•¥äº†å•è¯çš„ä¸Šä¸‹æ–‡å¯èƒ½å¯¹æ–‡æ¡£çš„å«ä¹‰é€ æˆå½±å“ã€‚</p><h2 id="å››ã€è‹±è¯­çš„è¯å¹²æå–ä¸è¯å½¢è¿˜åŸ"><a href="#å››ã€è‹±è¯­çš„è¯å¹²æå–ä¸è¯å½¢è¿˜åŸ" class="headerlink" title="å››ã€è‹±è¯­çš„è¯å¹²æå–ä¸è¯å½¢è¿˜åŸ"></a>å››ã€è‹±è¯­çš„è¯å¹²æå–ä¸è¯å½¢è¿˜åŸ</h2><h2 id="äº”ã€ä¸­æ–‡çš„åˆ†è¯"><a href="#äº”ã€ä¸­æ–‡çš„åˆ†è¯" class="headerlink" title="äº”ã€ä¸­æ–‡çš„åˆ†è¯"></a>äº”ã€ä¸­æ–‡çš„åˆ†è¯</h2><h2 id="å…­ã€ä¸»é¢˜å»ºæ¨¡ä¸æ–‡æ¡£èšç±»"><a href="#å…­ã€ä¸»é¢˜å»ºæ¨¡ä¸æ–‡æ¡£èšç±»" class="headerlink" title="å…­ã€ä¸»é¢˜å»ºæ¨¡ä¸æ–‡æ¡£èšç±»"></a>å…­ã€ä¸»é¢˜å»ºæ¨¡ä¸æ–‡æ¡£èšç±»</h2>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>Machine Learning</tag>
      
      <tag>IMDb</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç»éªŒåˆ†äº«ã€‘IMDbæ•°æ®é›†çš„é¢„å¤„ç†</title>
    <link href="/2020/06/09/%E3%80%90%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB%E3%80%91IMDb%E6%95%B0%E6%8D%AE%E9%9B%86%E7%9A%84%E9%A2%84%E5%A4%84%E7%90%86/"/>
    <url>/2020/06/09/%E3%80%90%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB%E3%80%91IMDb%E6%95%B0%E6%8D%AE%E9%9B%86%E7%9A%84%E9%A2%84%E5%A4%84%E7%90%86/</url>
    
    <content type="html"><![CDATA[<p>IMDbä»å®˜ç½‘ä¸‹è½½ä¸ä»kerasç›´æ¥è°ƒç”¨çš„å¤„ç†æ–¹æ³•æ˜¯ä¸åŒçš„ã€‚<br><!--more---></p><h2 id="ä¸€ã€IMDbæ•°æ®é›†çš„å¤„ç†æ–¹æ³•"><a href="#ä¸€ã€IMDbæ•°æ®é›†çš„å¤„ç†æ–¹æ³•" class="headerlink" title="ä¸€ã€IMDbæ•°æ®é›†çš„å¤„ç†æ–¹æ³•"></a>ä¸€ã€IMDbæ•°æ®é›†çš„å¤„ç†æ–¹æ³•</h2><h3 id="1-å®˜ç½‘ä¸‹è½½æ³•"><a href="#1-å®˜ç½‘ä¸‹è½½æ³•" class="headerlink" title="1. å®˜ç½‘ä¸‹è½½æ³•"></a>1. å®˜ç½‘ä¸‹è½½æ³•</h3><pre><code class="lang-python">import pandas as pdimport numpy as npfrom sklearn.datasets import load_files</code></pre><pre><code class="lang-shell">!wget http://ai.stanford.edu/~amaas/data/sentiment/aclImdb_v1.tar.gz!tar -zxvf aclImdb_v1.tar.gz!ls</code></pre><p>å¯¹äº v1.0 ç‰ˆæ•°æ®ï¼Œå…¶è®­ç»ƒé›†å¤§å°æ˜¯ 75 000ï¼Œè€Œä¸æ˜¯ 25 000ï¼Œå› ä¸ºå…¶ä¸­è¿˜åŒ…å« 50 000 ä¸ªç”¨äºæ— ç›‘ç£å­¦ä¹ çš„æ— æ ‡ç­¾æ–‡æ¡£ã€‚</p><p>åœ¨è¿›è¡Œåç»­æ“ä½œä¹‹å‰ï¼Œå»ºè®®å…ˆå°†è¿™ 50 000 ä¸ªæ— æ ‡ç­¾æ–‡æ¡£ä»è®­ç»ƒé›†ä¸­å‰”é™¤ã€‚</p><pre><code class="lang-bash">!mkdir aclImdb/train_unlabel!mv aclImdb/train/unsupBow.feat aclImdb/train_unlabel!mv aclImdb/train/urls_unsup.txt aclImdb/train_unlabel!mv aclImdb/train/unsup aclImdb/train_unlabel</code></pre><pre><code class="lang-python">reviews_train = load_files(&quot;aclImdb/train/&quot;)text_train, y_train = reviews_train.data, reviews_train.targetreviews_test = load_files(&quot;aclImdb/test/&quot;)text_test, y_test = reviews_test.data, reviews_test.target# åˆ æ‰HTMLæ¢è¡Œç¬¦text_train = [doc.replace(b&quot;&lt;br /&gt;&quot;, b&quot; &quot;) for doc in text_train]text_test = [doc.replace(b&quot;&lt;br /&gt;&quot;, b&quot; &quot;) for doc in text_test]print(&quot;type of text_train: &#123;&#125;&quot;.format(type(text_train))) # æŸ¥çœ‹è®­ç»ƒé›†ç±»å‹ï¼šlistprint(&quot;length of text_train: &#123;&#125;&quot;.format(len(text_train))) # æŸ¥çœ‹è®­ç»ƒé›†å¤§å°print(&quot;text_train[1]:\n&#123;&#125;&quot;.format(text_train[1])) # æŸ¥çœ‹ç¬¬äºŒæ®µæ–‡æœ¬print(&quot;Samples per class (training): &#123;&#125;&quot;.format(np.bincount(y_train))) # æŸ¥çœ‹æ•°æ®é›†æ˜¯å¦å‡ç­‰#------------------------------------------------#type of text_train: &lt;class &#39;list&#39;&gt;length of text_train: 25000text_train[1]:b&#39;Words can\&#39;t describe how bad this movie is. I can\&#39;t explain it by writing only. You have too see it for yourself to get at grip of how horrible a movie really can be. Not that I recommend you to do that. There are so many clich\xc3\xa9s, mistakes (and all other negative things you can imagine) here that will just make you cry. To start with the technical first, there are a LOT of mistakes regarding the airplane. I won\&#39;t list them here, but just mention the coloring of the plane. They didn\&#39;t even manage to show an airliner in the colors of a fictional airline, but instead used a 747 painted in the original Boeing livery. Very bad. The plot is stupid and has been done many times before, only much, much better. There are so many ridiculous moments here that i lost count of it really early. Also, I was on the bad guys\&#39; side all the time in the movie, because the good guys were so stupid. &quot;Executive Decision&quot; should without a doubt be you\&#39;re choice over this one, even the &quot;Turbulence&quot;-movies are better. In fact, every other movie in the world is better than this one.&#39;Samples per class (training): [12500 12500]</code></pre><p>é‡‡ç”¨è¯è¢‹æ¨¡å‹æ•´ç†æ•°æ®</p><pre><code class="lang-python">vect = CountVectorizer().fit(text_train)X_train = vect.transform(text_train)print(&quot;X_train:\n&#123;&#125;&quot;.format(repr(X_train)))#---------------------------#X_train:&lt;25000x74849 sparse matrix of type &#39;&lt;class &#39;numpy.int64&#39;&gt;&#39;with 3431196 stored elements in Compressed Sparse Row format&gt;</code></pre><p>X_train æ˜¯è®­ç»ƒæ•°æ®çš„è¯è¢‹è¡¨ç¤ºï¼Œå…¶å½¢çŠ¶ä¸º 25 000Ã—74 849ï¼Œè¿™è¡¨ç¤ºè¯è¡¨ä¸­åŒ…å« 74 849 ä¸ªå…ƒç´ ã€‚æ•°æ®è¢«ä¿å­˜ä¸º SciPy ç¨€ç–çŸ©é˜µã€‚</p><p>è®¿é—®è¯è¡¨çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å‘é‡å™¨ï¼ˆvectorizerï¼‰çš„ get_feature_name æ–¹æ³•ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ å¯¹åº”äºä¸€ä¸ªç‰¹å¾ï¼š</p><p>feature_names = vect.get_feature_names()<br>print(â€œNumber of features: {}â€.format(len(feature_names)))<br>print(â€œFirst 20 features:\n{}â€.format(feature_names[:20]))<br>print(â€œFeatures 20010 to 20030:\n{}â€.format(feature_names[20010:20030]))<br>print(â€œEvery 2000th feature:\n{}â€.format(feature_names[::2000]))</p><p>Number of features: 74849<br>First 20 features:<br>[â€˜00â€™, â€˜000â€™, â€˜0000000000001â€™, â€˜00001â€™, â€˜00015â€™, â€˜000sâ€™, â€˜001â€™, â€˜003830â€™,<br>â€˜006â€™, â€˜007â€™, â€˜0079â€™, â€˜0080â€™, â€˜0083â€™, â€˜0093638â€™, â€˜00amâ€™, â€˜00pmâ€™, â€˜00sâ€™,â€™01â€™, â€˜01pmâ€™, â€˜02â€™]<br>Features 20010 to 20030:<br>[â€˜drattedâ€™, â€˜draubâ€™, â€˜draughtâ€™, â€˜draughtsâ€™, â€˜draughtswomanâ€™, â€˜drawâ€™, â€˜drawbackâ€™,<br>â€˜drawbacksâ€™, â€˜drawerâ€™, â€˜drawersâ€™, â€˜drawingâ€™, â€˜drawingsâ€™, â€˜drawlâ€™,<br>â€˜drawledâ€™, â€˜drawlingâ€™, â€˜drawnâ€™, â€˜drawsâ€™, â€˜drazaâ€™, â€˜dreâ€™, â€˜dreaâ€™]<br>Every 2000th feature:<br>[â€˜00â€™, â€˜aesirâ€™, â€˜aquarianâ€™, â€˜barkingâ€™, â€˜blusteringâ€™, â€˜beÃªteâ€™, â€˜chicaneryâ€™,<br>â€˜condensingâ€™, â€˜cunningâ€™, â€˜detoxâ€™, â€˜draperâ€™, â€˜enshrinedâ€™, â€˜favoritâ€™, â€˜freezerâ€™,<br>â€˜goldmanâ€™, â€˜hasanâ€™, â€˜huitiemeâ€™, â€˜intelligibleâ€™, â€˜kantrowitzâ€™, â€˜lawfulâ€™,<br>â€˜maarsâ€™, â€˜megalungedâ€™, â€˜mosteyâ€™, â€˜norrlandâ€™, â€˜padillaâ€™, â€˜pincherâ€™,<br>â€˜promisinglyâ€™, â€˜receptionistâ€™, â€˜rivalsâ€™, â€˜schnaasâ€™, â€˜shunningâ€™, â€˜sparseâ€™,<br>â€˜subsetâ€™, â€˜temptationsâ€™, â€˜treatisesâ€™, â€˜unprovenâ€™, â€˜walkmanâ€™, â€˜xylophonistâ€™]</p><p>è¯è¡¨çš„å‰ 10 ä¸ªå…ƒç´ éƒ½æ˜¯æ•°å­—ã€‚æ‰€æœ‰è¿™äº›æ•°å­—éƒ½å‡ºç°åœ¨è¯„è®ºä¸­çš„æŸå¤„ï¼Œå› æ­¤è¢«æå–ä¸ºå•è¯ã€‚</p><h3 id="2-ä½¿ç”¨kerasè‡ªå¸¦çš„IMDbæ•°æ®é›†"><a href="#2-ä½¿ç”¨kerasè‡ªå¸¦çš„IMDbæ•°æ®é›†" class="headerlink" title="2. ä½¿ç”¨kerasè‡ªå¸¦çš„IMDbæ•°æ®é›†"></a>2. ä½¿ç”¨kerasè‡ªå¸¦çš„IMDbæ•°æ®é›†</h3><pre><code class="lang-python">from tensorflow.keras.datasets import imdb(X_train, y_train), (X_test, y_test) = imdb.load_data(num_words=10000) # ä»…ä¿ç•™è®­ç»ƒæ•°æ®ä¸­å‰10000ä¸ªæœ€ç»å¸¸å‡ºç°çš„å•è¯ï¼Œä½é¢‘å•è¯è¢«èˆå¼ƒprint(&#39;len of X_train: &#123;&#125;&#39;.format(len(X_train)))print(&#39;shape of X_train: &#123;&#125;&#39;.format(X_train.shape))print(&#39;first of X_train: &#123;&#125;&#39;.format(X_train[0]))print(&#39;training sample per class: &#123;&#125;&#39;.format(np.bincount(y_train)))#-------------------#len of X_train: 25000shape of X_train: (25000,)first of X_train: [1, 14, 22, 16, 43, 530, 973, 1622, 1385, 65, 458, 4468, 66, 3941, 4, 173, 36, 256, 5, 25, 100, 43, 838, 112, 50, 670, 2, 9, 35, 480, 284, 5, 150, 4, 172, 112, 167, 2, 336, 385, 39, 4, 172, 4536, 1111, 17, 546, 38, 13, 447, 4, 192, 50, 16, 6, 147, 2025, 19, 14, 22, 4, 1920, 4613, 469, 4, 22, 71, 87, 12, 16, 43, 530, 38, 76, 15, 13, 1247, 4, 22, 17, 515, 17, 12, 16, 626, 18, 2, 5, 62, 386, 12, 8, 316, 8, 106, 5, 4, 2223, 5244, 16, 480, 66, 3785, 33, 4, 130, 12, 16, 38, 619, 5, 25, 124, 51, 36, 135, 48, 25, 1415, 33, 6, 22, 12, 215, 28, 77, 52, 5, 14, 407, 16, 82, 2, 8, 4, 107, 117, 5952, 15, 256, 4, 2, 7, 3766, 5, 723, 36, 71, 43, 530, 476, 26, 400, 317, 46, 7, 4, 2, 1029, 13, 104, 88, 4, 381, 15, 297, 98, 32, 2071, 56, 26, 141, 6, 194, 7486, 18, 4, 226, 22, 21, 134, 476, 26, 480, 5, 144, 30, 5535, 18, 51, 36, 28, 224, 92, 25, 104, 4, 226, 65, 16, 38, 1334, 88, 12, 16, 283, 5, 16, 4472, 113, 103, 32, 15, 16, 5345, 19, 178, 32]training sample per class: [12500 12500]</code></pre><p>å¯ä»¥çœ‹åˆ°keraså·²ç»æŠŠIMDbæ•°æ®é›†ç»™æå‰æ•´ç†è¿‡äº†ã€‚æ­¤å¤„æ¯æ¡æ•°æ®éƒ½æ˜¯ä¸€ä¸ªå‘é‡ï¼Œæ¯ä¸ªæ•°å€¼ä»£è¡¨ä¸€ä¸ªå•è¯ã€‚æ•°å€¼çš„å¤§å°ä»£è¡¨äº†è¯¥å•è¯åœ¨å•è¯è¡¨ä¸­çš„ä½ç½®ã€‚æ˜¾ç„¶ï¼Œæ¯æ¡æ•°æ®å‘é‡çš„é•¿åº¦ä¸ä¸€å®šç›¸åŒã€‚</p><p>ä¸ºäº†æ–¹ä¾¿å¤„ç†ï¼Œæˆ‘ä»¬å¯ä»¥è§„å®šæ¯æ¡æ–‡æ¡£çš„é•¿åº¦ä¸ºmaxlen</p><pre><code class="lang-python">from tensorflow.keras.preprocessing import sequenceprint(&#39;Pad sequences (samples x time)&#39;)x_train = sequence.pad_sequences(x_train, maxlen=maxlen)x_test = sequence.pad_sequences(x_test, maxlen=maxlen)print(&#39;x_train shape:&#39;, x_train.shape)print(&#39;x_test shape:&#39;, x_test.shape)#-------------------#Pad sequences (samples x time)x_train shape: (25000, 80)x_test shape: (25000, 80)</code></pre><p>è®­ç»ƒé›†ä¸­ä¸€å…±25000æ¡æ–‡æ¡£ï¼Œå…¶ä¸­12500ä¸ªæ­£ç±»ï¼Œ12500ä¸ªè´Ÿç±»ã€‚æ¯ä¸ªæ–‡æ¡£éƒ½æ˜¯ç”±80ä¸ªæ•°å­—ç»„æˆçš„å‘é‡ã€‚æµ‹è¯•é›†äº¦ç„¶ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>preprocessing</tag>
      
      <tag>IMDb</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç»éªŒåˆ†äº«ã€‘åœç”µäº†æ€ä¹ˆåŠï¼ŸPythonè·å–Windowsç”µæºè¿æ¥ä¿¡æ¯</title>
    <link href="/2020/06/08/%E3%80%90%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB%E3%80%91%E5%81%9C%E7%94%B5%E4%BA%86%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9FPython%E8%8E%B7%E5%8F%96Windows%E7%94%B5%E6%BA%90%E8%BF%9E%E6%8E%A5%E4%BF%A1%E6%81%AF/"/>
    <url>/2020/06/08/%E3%80%90%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB%E3%80%91%E5%81%9C%E7%94%B5%E4%BA%86%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9FPython%E8%8E%B7%E5%8F%96Windows%E7%94%B5%E6%BA%90%E8%BF%9E%E6%8E%A5%E4%BF%A1%E6%81%AF/</url>
    
    <content type="html"><![CDATA[<p>ä¸€æ—¦åœç”µï¼Œå°±ä»¤ç¬”è®°æœ¬ç”µè„‘å‘å‡ºå“å£°ã€å‘é€ä¿¡æ¯â€¦â€¦ã€‚çœ‹ä¼¼ç®€å•çš„åŠŸèƒ½ï¼Œè¯¥å¦‚ä½•åˆ©ç”¨Pythonå®ç°å‘¢ï¼Ÿ<br><!--more---></p><p>é‡‡ç”¨ç¬”è®°æœ¬ç”µè„‘åŠå…¬çš„å¥½å¤„æ˜¯ä¸å¿…å®³æ€•çªç„¶åœç”µã€‚ç„¶è€Œç¬”è®°æœ¬ç”µè„‘ä¸å¯èƒ½ä½¿ç”¨ç”µæ± å·¥ä½œå¤ªä¹…ï¼Œæ­¤æ—¶å¿…é¡»å°½å¿«é€šçŸ¥ç®¡ç†äººå‘˜ï¼Œæ¢å¤ä¾›ç”µã€‚</p><p>çœ‹ä¼¼ç®€å•çš„åŠŸèƒ½ï¼Œåªéœ€åœ¨Windowsä¸­æ³¨å†Œä¸€ä¸ªHANDLEï¼Œè´Ÿè´£æ¥æ”¶ç”µæºé€‚é…å™¨æ›´æ”¹è¿™ä¸€äº‹ä»¶å³å¯ã€‚ä½†æ˜¯æœ¬äººæ²¡æœ‰Windowsç¼–ç¨‹å’Œç³»ç»Ÿç¼–ç¨‹çš„ç»éªŒï¼Œåªå¯¹Pythonç†Ÿæ‚‰ã€‚å¦‚ä½•å®ç°è¿™ä¸€åŠŸèƒ½ï¼Ÿ</p><p>åºŸè¯ä¸å¤šè¯´ï¼Œä¸‹é¢æ˜¯ä»£ç ã€‚</p><pre><code class="lang-python">import win32conimport win32apiimport win32guiimport timefrom ctypes import POINTER, windll, Structure, cast, CFUNCTYPE, c_int, c_uint, c_void_p, c_boolfrom comtypes import GUIDfrom ctypes.wintypes import HANDLE, DWORDPBT_POWERSETTINGCHANGE = 0x8013GUID_CONSOLE_DISPLAY_STATE = &#39;&#123;6FE69556-704A-47A0-8F24-C28D936FDA47&#125;&#39;GUID_ACDC_POWER_SOURCE = &#39;&#123;5D3E9A59-E9D5-4B00-A6BD-FF34FF516548&#125;&#39;GUID_BATTERY_PERCENTAGE_REMAINING = &#39;&#123;A7AD8041-B45A-4CAE-87A3-EECBB468A9E1&#125;&#39;GUID_MONITOR_POWER_ON = &#39;&#123;02731015-4510-4526-99E6-E5A17EBD1AEA&#125;&#39;GUID_SYSTEM_AWAYMODE = &#39;&#123;98A7F580-01F7-48AA-9C0F-44352C29E5C0&#125;&#39;class POWERBROADCAST_SETTING(Structure):    _fields_ = [(&quot;PowerSetting&quot;, GUID),                (&quot;DataLength&quot;, DWORD),                (&quot;Data&quot;, DWORD)]def wndproc(hwnd, msg, wparam, lparam):    if msg == win32con.WM_POWERBROADCAST:        if wparam == win32con.PBT_APMPOWERSTATUSCHANGE:            print(&#39;Power status has changed&#39;)        if wparam == win32con.PBT_APMRESUMEAUTOMATIC:            print(&#39;System resume&#39;)        if wparam == win32con.PBT_APMRESUMESUSPEND:            print(&#39;System resume by user input&#39;)        if wparam == win32con.PBT_APMSUSPEND:            print(&#39;System suspend&#39;)        if wparam == PBT_POWERSETTINGCHANGE:            print(&#39;Power setting changed...&#39;)            settings = cast(lparam, POINTER(POWERBROADCAST_SETTING)).contents            power_setting = str(settings.PowerSetting)            data_length = settings.DataLength            data = settings.Data            if power_setting == GUID_CONSOLE_DISPLAY_STATE:                if data == 0: print(&#39;Display off&#39;)                if data == 1: print(&#39;Display on&#39;)                if data == 2: print(&#39;Display dimmed&#39;)            elif power_setting == GUID_ACDC_POWER_SOURCE:                if data == 0: print(&#39;AC power&#39;)                if data == 1:                    print(&#39;Battery power&#39;)                    #################################################                    playsound(&#39;alert.mp3&#39;) # æ­¤å¤„è‡ªå®šä¹‰ä½ çš„æ“ä½œ                    #################################################                if data == 2: print(&#39;Short term power&#39;)            elif power_setting == GUID_BATTERY_PERCENTAGE_REMAINING:                print(&#39;battery remaining: %s&#39; % data)            elif power_setting == GUID_MONITOR_POWER_ON:                if data == 0: print(&#39;Monitor off&#39;)                if data == 1: print(&#39;Monitor on&#39;)            elif power_setting == GUID_SYSTEM_AWAYMODE:                if data == 0: print(&#39;Exiting away mode&#39;)                if data == 1: print(&#39;Entering away mode&#39;)            else:                print(&#39;unknown GUID&#39;)        return True    return Falseif __name__ == &quot;__main__&quot;:    print(&quot;*** STARTING ***&quot;)    hinst = win32api.GetModuleHandle(None)    wndclass = win32gui.WNDCLASS()    wndclass.hInstance = hinst    wndclass.lpszClassName = &quot;testWindowClass&quot;    CMPFUNC = CFUNCTYPE(c_bool, c_int, c_uint, c_uint, c_void_p)    wndproc_pointer = CMPFUNC(wndproc)    wndclass.lpfnWndProc = &#123;win32con.WM_POWERBROADCAST : wndproc_pointer&#125;    try:        myWindowClass = win32gui.RegisterClass(wndclass)        hwnd = win32gui.CreateWindowEx(win32con.WS_EX_LEFT,                                     myWindowClass,                                     &quot;testMsgWindow&quot;,                                     0,                                     0,                                     0,                                     win32con.CW_USEDEFAULT,                                     win32con.CW_USEDEFAULT,                                     0,                                     0,                                     hinst,                                     None)    except Exception as e:        print(&quot;Exception: %s&quot; % str(e))    if hwnd is None:        print(&quot;hwnd is none!&quot;)    else:        print(&quot;hwnd: %s&quot; % hwnd)    guids_info = &#123;                    &#39;GUID_MONITOR_POWER_ON&#39; : GUID_MONITOR_POWER_ON,                    &#39;GUID_SYSTEM_AWAYMODE&#39; : GUID_SYSTEM_AWAYMODE,                    &#39;GUID_CONSOLE_DISPLAY_STATE&#39; : GUID_CONSOLE_DISPLAY_STATE,                    &#39;GUID_ACDC_POWER_SOURCE&#39; : GUID_ACDC_POWER_SOURCE,                    &#39;GUID_BATTERY_PERCENTAGE_REMAINING&#39; : GUID_BATTERY_PERCENTAGE_REMAINING                 &#125;    for name, guid_info in guids_info.items():        result = windll.user32.RegisterPowerSettingNotification(HANDLE(hwnd), GUID(guid_info), DWORD(0))        print(&#39;registering&#39;, name)        print(&#39;result:&#39;, hex(result))        print(&#39;lastError:&#39;, win32api.GetLastError())        print()    print(&#39;\nEntering loop&#39;)    while True:        win32gui.PumpWaitingMessages()        time.sleep(1)</code></pre><p>COM: The Component Object Model ç»„ä»¶å¯¹è±¡æ¨¡å‹ï¼Œæ˜¯å¾®è½¯çš„ä¸€å¥—è½¯ä»¶ç»„ä»¶çš„äºŒè¿›åˆ¶æ¥å£æ ‡å‡†ã€‚COMä½¿å¾—è·¨ç¼–ç¨‹è¯­è¨€çš„è¿›ç¨‹é—´é€šä¿¡ã€åŠ¨æ€å¯¹è±¡åˆ›å»ºæˆä¸ºå¯èƒ½ã€‚</p><p>COMå®è´¨ä¸Šæ˜¯ä¸€ç§è¯­è¨€æ— å…³çš„å¯¹è±¡å®ç°æ–¹å¼ï¼Œè¿™ä½¿å…¶å¯ä»¥åœ¨åˆ›å»ºç¯å¢ƒä¸åŒçš„åœºåˆã€ç”šè‡³è·¨è®¡ç®—æœºçš„åˆ†å¸ƒç¯å¢ƒä¸‹è¢«å¤ç”¨ã€‚COMå…è®¸å¤ç”¨è¿™äº›å¯¹è±¡ï¼Œè€Œä¸å¿…çŸ¥é“å¯¹è±¡å†…éƒ¨æ˜¯å¦‚ä½•å®ç°ï¼Œå› ä¸ºç»„ä»¶å®ç°è€…å¿…é¡»æä¾›è‰¯å¥½å®šä¹‰çš„æ¥å£ä»è€Œå±è”½å®ç°ç»†èŠ‚ã€‚é€šè¿‡å¼•ç”¨è®¡æ•°ï¼Œç»„ä»¶å¯¹è±¡è‡ªå·±è´Ÿè´£åŠ¨æ€åˆ›å»ºä¸é”€æ¯ï¼Œä»è€Œå±è”½äº†ä¸åŒç¼–ç¨‹è¯­è¨€ä¹‹é—´çš„å†…å­˜åˆ†é…è¯­ä¹‰å·®å¼‚ã€‚</p><p>å¯¹äºæŸäº›åº”ç”¨ç¨‹åºæ¥è¯´ï¼ŒCOMå·²ç»éƒ¨åˆ†è¢«.NETæ¡†æ¶å–ä»£ã€‚.NET Frameworkæ˜¯æ–°ä¸€ä»£çš„Microsoft Windowsåº”ç”¨ç¨‹åºå¼€å‘å¹³å°ã€‚</p><p>COMæ˜¯åŸºäºç»„ä»¶å¯¹è±¡æ–¹å¼æ¦‚å¿µæ¥è®¾è®¡çš„ï¼Œåœ¨åŸºç¡€ä¸­ï¼Œè‡³å°‘è¦è®©æ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥æ”¯æŒäºŒä¸ªåŠŸèƒ½ï¼š</p><p>æŸ¥è¯¢ç»„ä»¶ä¸­æœ‰å“ªäº›æ¥å£<br>è®©ç»„ä»¶åšè‡ªæˆ‘ç”Ÿå‘½ç®¡ç†ï¼Œæ­¤æ¦‚å¿µçš„å®è·µå³ä¸ºå¼•ç”¨è®¡æ•°ï¼ˆReference Countingï¼‰</p><p>GUID æ˜¯ä¸€ä¸ª 128 ä½æ•´æ•°ï¼ˆ16 å­—èŠ‚ï¼‰ï¼ŒCOMå°†å…¶ç”¨äºè®¡ç®—æœºå’Œç½‘ç»œçš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚å…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆè‹±è¯­ï¼šGlobally Unique Identifierï¼Œç¼©å†™ï¼šGUIDï¼›å‘éŸ³ä¸º/ËˆÉ¡uËÉªd/æˆ–/ËˆÉ¡wÉªd/ï¼‰æ˜¯ä¸€ç§ç”±ç®—æ³•ç”Ÿæˆçš„å”¯ä¸€æ ‡è¯†ï¼Œé€šå¸¸è¡¨ç¤ºæˆ32ä¸ª16è¿›åˆ¶æ•°å­—ï¼ˆ0ï¼9ï¼ŒAï¼Fï¼‰ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œå¦‚ï¼š{21EC2020-3AEA-1069-A2DD-08002B30309D}ï¼Œå®ƒå®è´¨ä¸Šæ˜¯ä¸€ä¸ª128ä½é•¿çš„äºŒè¿›åˆ¶æ•´æ•°ã€‚</p><p>Windowsæ“ä½œç³»ç»Ÿä½¿ç”¨GUIDæ¥æ ‡è¯†COMå¯¹è±¡ä¸­çš„ç±»å’Œç•Œé¢ã€‚ä¸€ä¸ªè„šæœ¬å¯ä»¥ä¸éœ€çŸ¥é“DLLçš„ä½ç½®å’Œåå­—ç›´æ¥é€šè¿‡GUIDæ¥æ¿€æ´»å…¶ä¸­çš„ç±»æˆ–å¯¹è±¡ã€‚</p><p>å‚è€ƒï¼š<a href="https://stackoverflow.com/questions/48720924/python-3-detect-monitor-power-state-in-windows">https://stackoverflow.com/questions/48720924/python-3-detect-monitor-power-state-in-windows</a></p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>Windows</tag>
      
      <tag>PowerOff</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç»éªŒåˆ†äº«ã€‘TensorFlowæ¨¡å‹è®­ç»ƒå’Œä¿å­˜</title>
    <link href="/2020/06/03/%E3%80%90%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB%E3%80%91TensorFlow%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E5%92%8C%E4%BF%9D%E5%AD%98/"/>
    <url>/2020/06/03/%E3%80%90%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB%E3%80%91TensorFlow%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E5%92%8C%E4%BF%9D%E5%AD%98/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨LSTMè®­ç»ƒæœ€ç®€å•çš„IMDBå½±è¯„åˆ†ç±»ä»»åŠ¡ï¼Œæ€»ç»“æ–‡æœ¬åˆ†ç±»ä»»åŠ¡å¸¸è§æµç¨‹ã€‚<br><!--more---></p><h2 id="1-æ¨¡å‹è®­ç»ƒå’Œä¿å­˜"><a href="#1-æ¨¡å‹è®­ç»ƒå’Œä¿å­˜" class="headerlink" title="1. æ¨¡å‹è®­ç»ƒå’Œä¿å­˜"></a>1. æ¨¡å‹è®­ç»ƒå’Œä¿å­˜</h2><h3 id="1-1-è®­ç»ƒç»“æŸæ—¶ä¿å­˜"><a href="#1-1-è®­ç»ƒç»“æŸæ—¶ä¿å­˜" class="headerlink" title="1.1 è®­ç»ƒç»“æŸæ—¶ä¿å­˜"></a>1.1 è®­ç»ƒç»“æŸæ—¶ä¿å­˜</h3><p>è®­ç»ƒæ¨¡å‹ï¼Œä½¿ç”¨fitå‡½æ•°ã€‚fitå‡½æ•°çš„å‚æ•°å¦‚ä¸‹ã€‚</p><pre><code class="lang-python">fit(    x=None, y=None, batch_size=None, epochs=1, verbose=1, callbacks=None,    validation_split=0.0, validation_data=None, shuffle=True, class_weight=None,    sample_weight=None, initial_epoch=0, steps_per_epoch=None,    validation_steps=None, validation_batch_size=None, validation_freq=1,    max_queue_size=10, workers=1, use_multiprocessing=False)</code></pre><p>xï¼šè®­ç»ƒæ•°æ®<br>yï¼šè®­ç»ƒæ ‡ç­¾<br>batch_sizeï¼šæ‰¹æ¬¡å¤§å°ï¼Œé»˜è®¤ä¸º32<br>validation_dataï¼šåœ¨æ¯ä¸ªepochç»“æŸä¹‹æ—¶è®¡ç®—lossç­‰å…¶ä»–æ¨¡å‹æ€§èƒ½æŒ‡æ ‡ï¼Œä¸ç”¨åšè®­ç»ƒã€‚<br>epochï¼šè®­ç»ƒè½®æ¬¡<br>verboseï¼šè¾“å‡ºçš„è¯¦ç»†ç¨‹åº¦ï¼Œä¸º1åˆ™è¾“å‡ºè¿›åº¦æ¡ï¼Œè¡¨æ˜æ¯ä¸ªepochè®­ç»ƒå®Œæˆåº¦ï¼›ä¸º0åˆ™ä»€ä¹ˆä¹Ÿä¸è¾“å‡ºï¼Œä¸º2åˆ™å¾ˆå•°å—¦åœ°è¾“å‡ºæ‰€æœ‰ä¿¡æ¯</p><p>æœ€åä¿å­˜æ¨¡å‹ç”¨<code>model.save(&#39;xxx.h5&#39;)</code>ï¼Œè¿™é‡Œæ¨¡å‹æ ¼å¼ä¸ºHDF5ï¼Œå› æ­¤ç»“å°¾ä¸ºh5ã€‚</p><pre><code class="lang-python">model.fit(X_train, y_train, validation_data=(X_test, y_test), epoch=10, batch_size=64) scores = model.evaluate(X_test, y_test, verbose=0)print(&quot;Accuracy: %.2f%%&quot; % (scores[1]*100))model.save(&#39;models/sentiment-lstm.h5&#39;)</code></pre><h3 id="1-2-åœ¨è®­ç»ƒæœŸé—´ä¿å­˜æ¨¡å‹ï¼ˆä»¥-checkpoints-å½¢å¼ä¿å­˜ï¼‰"><a href="#1-2-åœ¨è®­ç»ƒæœŸé—´ä¿å­˜æ¨¡å‹ï¼ˆä»¥-checkpoints-å½¢å¼ä¿å­˜ï¼‰" class="headerlink" title="1.2 åœ¨è®­ç»ƒæœŸé—´ä¿å­˜æ¨¡å‹ï¼ˆä»¥ checkpoints å½¢å¼ä¿å­˜ï¼‰"></a>1.2 åœ¨è®­ç»ƒæœŸé—´ä¿å­˜æ¨¡å‹ï¼ˆä»¥ checkpoints å½¢å¼ä¿å­˜ï¼‰</h3><p>æ‚¨å¯ä»¥ä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹è€Œæ— éœ€ä»å¤´å¼€å§‹é‡æ–°è®­ç»ƒï¼Œæˆ–åœ¨æ‚¨æ‰“æ–­çš„åœ°æ–¹å¼€å§‹è®­ç»ƒï¼Œä»¥é˜²æ­¢è®­ç»ƒè¿‡ç¨‹æ²¡æœ‰ä¿å­˜ã€‚<code>tf.keras.callbacks.ModelCheckpoint</code> å…è®¸åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­å’Œç»“æŸæ—¶å›è°ƒä¿å­˜çš„æ¨¡å‹ã€‚</p><pre><code class="lang-python">checkpoint_path = &quot;training_1/cp.ckpt&quot;checkpoint_dir = os.path.dirname(checkpoint_path)# åˆ›å»ºä¸€ä¸ªä¿å­˜æ¨¡å‹æƒé‡çš„å›è°ƒå‡½æ•°cp_callback = tf.keras.callbacks.ModelCheckpoint(filepath=checkpoint_path,                                                 save_weights_only=True,                                                 verbose=1)# ä½¿ç”¨æ–°çš„å›è°ƒå‡½æ•°è®­ç»ƒæ¨¡å‹model.fit(train_images,           train_labels,            epochs=10,          validation_data=(test_images,test_labels),          callbacks=[cp_callback])  # é€šè¿‡å›è°ƒè®­ç»ƒ# è¿™å¯èƒ½ä¼šç”Ÿæˆä¸ä¿å­˜ä¼˜åŒ–ç¨‹åºçŠ¶æ€ç›¸å…³çš„è­¦å‘Šã€‚# è¿™äº›è­¦å‘Šï¼ˆä»¥åŠæ•´ä¸ªç¬”è®°æœ¬ä¸­çš„ç±»ä¼¼è­¦å‘Šï¼‰æ˜¯é˜²æ­¢è¿‡æ—¶ä½¿ç”¨ï¼Œå¯ä»¥å¿½ç•¥ã€‚</code></pre><p>è¿™å°†åˆ›å»ºä¸€ä¸ª TensorFlow checkpoint æ–‡ä»¶é›†åˆï¼Œè¿™äº›æ–‡ä»¶åœ¨æ¯ä¸ª epoch ç»“æŸæ—¶æ›´æ–°</p><pre><code>cp.ckpt.data-00001-of-00002cp.ckpt.data-00000-of-00002  cp.ckpt.index</code></pre><p>é»˜è®¤çš„ tensorflow æ ¼å¼ä»…ä¿å­˜æœ€è¿‘çš„5ä¸ª checkpoint ã€‚</p><h3 id="1-3-æ‰‹åŠ¨ä¿å­˜æƒé‡"><a href="#1-3-æ‰‹åŠ¨ä¿å­˜æƒé‡" class="headerlink" title="1.3 æ‰‹åŠ¨ä¿å­˜æƒé‡"></a>1.3 æ‰‹åŠ¨ä¿å­˜æƒé‡</h3><p>ä¸å¿…ç­‰å¾…epochç»“æŸï¼Œé€šè¿‡æ‰§è¡Œ<code>save_weights</code>å°±å¯ä»¥ç”Ÿæˆckptæ–‡ä»¶ã€‚</p><pre><code class="lang-python"># ä¿å­˜æƒé‡model.save_weights(&#39;./checkpoints/my_checkpoint&#39;)</code></pre><h2 id="2-æ¨¡å‹åŠ è½½"><a href="#2-æ¨¡å‹åŠ è½½" class="headerlink" title="2. æ¨¡å‹åŠ è½½"></a>2. æ¨¡å‹åŠ è½½</h2><h3 id="2-1-ä»h5æ–‡ä»¶ä¸­æ¢å¤"><a href="#2-1-ä»h5æ–‡ä»¶ä¸­æ¢å¤" class="headerlink" title="2.1 ä»h5æ–‡ä»¶ä¸­æ¢å¤"></a>2.1 ä»h5æ–‡ä»¶ä¸­æ¢å¤</h3><pre><code class="lang-python"># é‡æ–°åˆ›å»ºå®Œå…¨ç›¸åŒçš„æ¨¡å‹model=load_model(&#39;models/sentiment-lstm.h5&#39;)# åŠ è½½åé‡æ–°ç¼–è¯‘æ¨¡å‹ï¼Œå¦åˆ™æ‚¨å°†å¤±å»ä¼˜åŒ–å™¨çš„çŠ¶æ€model.compile(loss=&#39;binary_crossentropy&#39;,optimizer=&#39;adam&#39;, metrics=[&#39;accuracy&#39;]) model.summary()</code></pre><p>åŠ è½½æ¨¡å‹çš„æ—¶å€™ï¼ŒæŸå¤±å‡½æ•°ç­‰å‚æ•°éœ€è¦é‡æ–°è®¾ç½®ã€‚</p><h3 id="2-2-ä»ckptæ–‡ä»¶ä¸­æ–­ç‚¹ç»­è®­"><a href="#2-2-ä»ckptæ–‡ä»¶ä¸­æ–­ç‚¹ç»­è®­" class="headerlink" title="2.2 ä»ckptæ–‡ä»¶ä¸­æ–­ç‚¹ç»­è®­"></a>2.2 ä»ckptæ–‡ä»¶ä¸­æ–­ç‚¹ç»­è®­</h3><p>ä»…æ¢å¤æ¨¡å‹çš„æƒé‡æ—¶ï¼Œå¿…é¡»å…·æœ‰ä¸åŸå§‹æ¨¡å‹å…·æœ‰ç›¸åŒç½‘ç»œç»“æ„çš„æ¨¡å‹ã€‚</p><pre><code class="lang-python"># è¿™ä¸ªæ¨¡å‹ä¸ckptä¿å­˜çš„ä¸€æ ·æ¶æ„ï¼Œåªä¸è¿‡æ²¡ç»è¿‡fitè®­ç»ƒmodel = create_model()# åŠ è½½æƒé‡model.load_weights(checkpoint_path)</code></pre><p>æˆ‘ä»¬å¯ä»¥å¯¹å›è°ƒå‡½æ•°å¢åŠ ä¸€äº›æ–°çš„è®¾ç½®ï¼Œä¹‹å‰çš„å›è°ƒå‡½æ•°æ¯ä¸ªepochéƒ½è¦†ç›–æ‰ä¹‹å‰çš„ckptï¼Œç°åœ¨æˆ‘ä»¬æƒ³æ¯è¿‡5ä¸ªepochä¿å­˜ä¸€ä¸ªæ–°çš„æ–­ç‚¹ï¼š</p><pre><code class="lang-python"># åœ¨æ–‡ä»¶åä¸­åŒ…å« epoch (ä½¿ç”¨ `str.format`)checkpoint_path = &quot;training_2/cp-&#123;epoch:04d&#125;.ckpt&quot;checkpoint_dir = os.path.dirname(checkpoint_path)# åˆ›å»ºä¸€ä¸ªå›è°ƒï¼Œæ¯ 5 ä¸ª epochs ä¿å­˜æ¨¡å‹çš„æƒé‡cp_callback = tf.keras.callbacks.ModelCheckpoint(    filepath=checkpoint_path,     verbose=1,     save_weights_only=True,    period=5)</code></pre><p>åˆ©ç”¨æ–°çš„å›è°ƒè®­ç»ƒï¼Œå¹¶éšåé€‰æ‹©æœ€æ–°çš„æ–­ç‚¹æ–‡ä»¶ï¼š</p><pre><code class="lang-python"># ä½¿ç”¨æ–°çš„å›è°ƒè®­ç»ƒæ¨¡å‹model.fit(train_images,               train_labels,              epochs=50,               callbacks=[cp_callback],              validation_data=(test_images,test_labels),              verbose=0)# é€‰æ‹©æ–°çš„æ–­ç‚¹latest = tf.train.latest_checkpoint(checkpoint_dir)&gt;&gt;&gt; &#39;training_2/cp-0050.ckpt&#39;# åŠ è½½ä»¥å‰ä¿å­˜çš„æƒé‡model.load_weights(latest)</code></pre>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>TensorFlow</tag>
      
      <tag>SaveModel</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘ä½¿ç”¨LSTMè®­ç»ƒimdbæƒ…æ„Ÿåˆ†ç±»æ¨¡å‹</title>
    <link href="/2020/06/03/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E4%BD%BF%E7%94%A8LSTM%E8%AE%AD%E7%BB%83imdb%E6%83%85%E6%84%9F%E5%88%86%E7%B1%BB%E6%A8%A1%E5%9E%8B/"/>
    <url>/2020/06/03/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E4%BD%BF%E7%94%A8LSTM%E8%AE%AD%E7%BB%83imdb%E6%83%85%E6%84%9F%E5%88%86%E7%B1%BB%E6%A8%A1%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨LSTMè®­ç»ƒæœ€ç®€å•çš„IMDBå½±è¯„åˆ†ç±»ä»»åŠ¡ï¼Œæ€»ç»“æ–‡æœ¬åˆ†ç±»ä»»åŠ¡å¸¸è§æµç¨‹ã€‚<br><!--more---></p><h2 id="1-æŸ¥çœ‹æ•°æ®é›†"><a href="#1-æŸ¥çœ‹æ•°æ®é›†" class="headerlink" title="1. æŸ¥çœ‹æ•°æ®é›†"></a>1. æŸ¥çœ‹æ•°æ®é›†</h2><h3 id="1-1-å®˜ç½‘ä¸Šçš„æ•°æ®é›†å‹ç¼©åŒ…"><a href="#1-1-å®˜ç½‘ä¸Šçš„æ•°æ®é›†å‹ç¼©åŒ…" class="headerlink" title="1.1 å®˜ç½‘ä¸Šçš„æ•°æ®é›†å‹ç¼©åŒ…"></a>1.1 å®˜ç½‘ä¸Šçš„æ•°æ®é›†å‹ç¼©åŒ…</h3><p>ä»IMDBå®˜ç½‘ä¸Šä¸‹è½½çš„æ•°æ®é›†ï¼Œæ˜¯ä¸€ä¸ªå‹ç¼©åŒ…<code>aclImdb_v1.tar.gz</code>ã€‚è§£å‹åçš„ç›®å½•å¦‚ä¸‹ï¼š<br><img src="/2020/06/03/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E4%BD%BF%E7%94%A8LSTM%E8%AE%AD%E7%BB%83imdb%E6%83%85%E6%84%9F%E5%88%86%E7%B1%BB%E6%A8%A1%E5%9E%8B/2020-06-03-18-12-58.png" alt></p><ul><li><code>test</code></li><li><code>train</code></li><li><code>imdb.vocab</code></li><li><code>imdbEr.txt</code></li><li><code>README</code></li></ul><p>å…¶å†…éƒ¨ä¸ä»…æœ‰å®Œæ•´çš„å½±è¯„æ–‡ä»¶ï¼Œè¿˜åŒ…å«è¯¥å½±è¯„çš„é“¾æ¥ç­‰ä¿¡æ¯ã€‚</p><h3 id="1-2-kerasè‡ªå¸¦çš„æ•°æ®é›†"><a href="#1-2-kerasè‡ªå¸¦çš„æ•°æ®é›†" class="headerlink" title="1.2 kerasè‡ªå¸¦çš„æ•°æ®é›†"></a>1.2 kerasè‡ªå¸¦çš„æ•°æ®é›†</h3><p>kerasé‡Œçš„IMDBå½±è¯„æ•°æ®é›†ï¼Œå†…éƒ¨ç»“æ„åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šå½±è¯„éƒ¨åˆ†å’Œæƒ…æ„Ÿæ ‡ç­¾éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯æ•°æ®é›†çš„Xå’Œyéƒ¨åˆ†ã€‚</p><p>Xéƒ¨åˆ†çš„æ¯æ¡å½±è¯„éƒ½è¢«ç¼–ç ä¸ºä¸€ä¸ªæ•´æ•°åˆ—è¡¨ã€‚å¦å¤–ï¼Œæ¯ä¸ªå•è¯çš„åœ¨å•è¯è¡¨ä¸­çš„ç¼–ç è¶Šå°ï¼Œä»£è¡¨åœ¨å½±è¯„ä¸­å‡ºç°é¢‘ç‡è¶Šé«˜ã€‚è¿™ä½¿å¾—æˆ‘ä»¬èƒ½åœ¨å–æ•°æ®æ—¶æŒ‡å®šåªä½¿ç”¨æŸä¸€å‡ºç°é¢‘ç‡å†…èŒƒå›´çš„å•è¯ï¼ˆå…¶ä»–å•è¯ç”±äºå‡ºç°é¢‘ç‡å¤ªä½ï¼Œå¯ä»¥ç›´æ¥æ ‡è®°ä¸ºæœªçŸ¥ï¼‰ã€‚</p><p>â€œ0â€åœ¨æ•°æ®é›†ä¸­ä»£è¡¨â€œæœªçŸ¥â€å•è¯ã€‚</p><p>æˆ‘ä»¬é‡‡ç”¨å†…ç½®çš„<code>load_data</code>å‡½æ•°æ¥å–å‡ºæ•°æ®ã€‚</p><pre><code class="lang-python">tf.keras.datasets.imdb.load_data(    path=&#39;imdb.npz&#39;, num_words=None, skip_top=0, maxlen=None, seed=113,    start_char=1, oov_char=2, index_from=3, **kwargs)</code></pre><p>num_words: å³è®¾å®šå–å‡ºç°é¢‘ç‡åœ¨å‰num_wordsçš„å•è¯ã€‚å¦‚æœä¸å¡«ï¼Œæ‰€æœ‰å•è¯è¡¨ä¸­çš„å•è¯éƒ½ä¼šæ ‡è®°ã€‚<br>skip_top: è®¾å®šå‰skip_topé¢‘ç‡å‡ºç°çš„å•è¯ä¸äºˆæ ‡è®°ã€‚è¿™å¯èƒ½æ˜¯ç”±äºé«˜é¢‘å‡ºç°çš„å•è¯ä¿¡æ¯é‡å¤ªä½ï¼ˆå¦‚theã€aç­‰ï¼‰ã€‚<br>maxlen: è®¾å®šæœ€å¤§å½±è¯„é•¿åº¦ï¼Œè¶…è¿‡è¯¥é•¿åº¦çš„å½±è¯„éƒ½ä¼šè¢«æˆªæ–­ã€‚<br>x_train, x_test: è¿”å›å½±è¯„åˆ—è¡¨ï¼Œé•¿åº¦ä¸ºå½±è¯„ä¸ªæ•°ï¼ˆ25000ä¸ªè®­ç»ƒï¼Œ25000ä¸ªæµ‹è¯•ï¼‰ï¼Œæ¯ä¸ªå½±è¯„æ˜¯æ•´æ•°æ•°ç»„ã€‚<br>y_train, y_test: è¿”å›æ•´æ•°æ•°ç»„ï¼Œé•¿åº¦ä¸ºå½±è¯„ä¸ªæ•°ï¼Œä»£è¡¨å½±è¯„çš„æƒ…æ„Ÿå€¾å‘ï¼ˆ0æˆ–1ï¼‰ã€‚</p><pre><code class="lang-python">from tensorflow.keras.datasets import imdbmax_features = 50000 # å–å‰50000ä¸ªæœ€å¸¸è§çš„å•è¯ï¼Œç»„å»ºè¯å…¸(x_train, y_train), (x_test, y_test) = imdb.load_data(num_words=max_features)</code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯è¿™ä¸ª<code>max_features</code>ä¸æ•°æ®é›†çš„æ•°ç›®æ²¡æœ‰å…³ç³»ï¼Œä¸è¦ææ··äº†ã€‚</p><h2 id="2-æ•°æ®é¢„å¤„ç†"><a href="#2-æ•°æ®é¢„å¤„ç†" class="headerlink" title="2. æ•°æ®é¢„å¤„ç†"></a>2. æ•°æ®é¢„å¤„ç†</h2><pre><code class="lang-python">from tensorflow.keras.preprocessing import sequenceprint(&#39;Pad sequences (samples x time)&#39;)x_train = sequence.pad_sequences(x_train, maxlen=maxlen)x_test = sequence.pad_sequences(x_test, maxlen=maxlen)X_trainarray([[    0,     0,     0, ...,    19,   178,    32],       [    0,     0,     0, ...,    16,   145,    95],       [    0,     0,     0, ...,     7,   129,   113],       ...,       [    0,     0,     0, ...,     4,  3586, 22459],       [    0,     0,     0, ...,    12,     9,    23],       [    0,     0,     0, ...,   204,   131,     9]], dtype=int32)</code></pre><p>ç»è¿‡è¿™ä¸ªå‡½æ•°å¤„ç†ï¼Œæ¯æ¡å½±è¯„è¢«è§„æ•´æˆäº†é•¿åº¦ä¸º500çš„æ•´å½¢å…ƒç´ åˆ—è¡¨ï¼Œé•¿åº¦ä¸å¤Ÿ500ä¸ªå•è¯çš„å½±è¯„ï¼Œåœ¨æœ€å‰é¢åŠ 0ï¼›é•¿åº¦ä¸å¤Ÿçš„åˆ™åœ¨æœ€åæˆªæ–­ã€‚</p><h2 id="3-æ¨¡å‹æ„å»º"><a href="#3-æ¨¡å‹æ„å»º" class="headerlink" title="3. æ¨¡å‹æ„å»º"></a>3. æ¨¡å‹æ„å»º</h2><p><strong>Embeddingå±‚</strong></p><p>åœ¨æœ€å¼€å§‹æˆ‘ä»¬åŠ å…¥äº†Embeddingå±‚ï¼Œmax_featuresæ˜¯å­—å…¸é•¿åº¦ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯one-hotå‘é‡é•¿åº¦ã€‚<br>input_length=500ä¸ºæ¯ä¸ªåºåˆ—ä¸º500ä¸ªå•è¯æ„æˆã€‚<br>input_shape=(max_features,)è¡¨æ˜one-hotçš„ç»´åº¦ï¼Œè¿™ä¸¤ä¸ªéƒ½å¯ä»¥ä¸å¡«ï¼Œç›´æ¥é€šè¿‡fitçš„æ—¶å€™æ¨æ–­å‡ºæ¥</p><p><strong>LSTMå±‚</strong></p><p>LSTMå±‚çš„å‚æ•°æ˜¯output_dimï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥è‡ªå®šä¹‰ï¼Œå› ä¸ºå®ƒä¸å—ä¹‹å‰å½±å“ï¼Œåªè¡¨æ˜è¾“å‡ºçš„ç»´åº¦ã€‚</p><p>åŒæ—¶ä¹Ÿæ˜¯æ˜¯é—¨ç»“æ„ï¼ˆforgeté—¨ã€updateé—¨ã€outputé—¨ï¼‰çš„ç»´åº¦ã€‚ä¹‹æ‰€ä»¥ç†è§£æˆç»´åº¦ï¼Œæ˜¯å› ä¸ºLSTMä¸­éšè—å•å…ƒä¸ªæ•°è¿™ä¸ªæ¦‚å¿µä¸å¥½ç†è§£ã€‚å…¶å®è¯¥å‚æ•°åç§°ä¸º<code>units</code>ï¼Œå®˜æ–¹è¯´æ³•å°±æ˜¯â€œéšè—å•å…ƒä¸ªæ•°â€ã€‚</p><p>LSTMå±‚çš„è¾“å…¥æ˜¯å½¢å¦‚ï¼ˆsamplesï¼Œtimestepsï¼Œinput_dimï¼‰çš„3Då¼ é‡ï¼›è¾“å‡ºæ˜¯å½¢å¦‚ï¼ˆsamplesï¼Œtimestepsï¼Œoutput_dimï¼‰çš„3Då¼ é‡ï¼Œæˆ–è€…è¿”å›å½¢å¦‚ï¼ˆsamplesï¼Œoutput_dimï¼‰çš„2Då¼ é‡ã€‚äºŒè€…åŒºåˆ«åœ¨äºï¼Œè‹¥LSTMå±‚ä¸­å‚æ•°<code>return_sequences=True</code>ï¼Œå°±è¿”å›å¸¦æ—¶é—´æ­¥çš„å¼ é‡ã€‚</p><p>è‹¥æˆ‘ä»¬æœ‰å¾ˆå¤šLSTMå±‚ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå¾ˆå¤šLSTMå±‚ä¸²åœ¨ä¸€èµ·ï¼Œä¸ºäº†æ–¹ä¾¿LSTMå±‚ä¸å±‚ä¹‹é—´çš„ä¿¡æ¯ä¼ é€’ï¼Œå¯ä»¥è®¾ç½®<code>return_sequences=True</code>ã€‚ä½†æ˜¯æœ€åä¸€ä¸ªLSTMå±‚return_sequencesé€šå¸¸ä¸ºfalseï¼Œæ­¤æ—¶è¾“å‡ºçš„å°±æ˜¯æ¯ä¸ªæ ·æœ¬çš„ç»“æœå¼ é‡ã€‚</p><p>å‡å¦‚æˆ‘ä»¬è¾“å…¥æœ‰25000ä¸ªå¥å­ï¼Œæ¯ä¸ªå¥å­éƒ½ç”±500ä¸ªå•è¯ç»„æˆï¼Œè€Œæ¯ä¸ªå•è¯ç”¨64ç»´çš„è¯å‘é‡è¡¨ç¤ºã€‚é‚£ä¹ˆæ ·æœ¬æ•°ç›®samples=25000ï¼Œæ—¶é—´æ­¥timesteps=500ï¼ˆå¯ä»¥ç®€å•åœ°ç†è§£timestepså°±æ˜¯è¾“å…¥åºåˆ—çš„é•¿åº¦input_lengthï¼‰ï¼Œå‰ä¸€å±‚Embeddingè¯å‘é‡è¾“å‡ºç»´åº¦input_dim=128ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´é€šè¿‡LSTMï¼ŒæŠŠè¯çš„ç»´åº¦ç”±128è½¬å˜æˆäº†100ã€‚</p><p>åœ¨LSTMå±‚ä¸­è¿˜å¯ä»¥è®¾ç½®Dropoutï¼Œè¿™ä¸€ç‚¹åœ¨ä¹‹åä¼šè¯¦ç»†è¯´æ˜ã€‚</p><p><strong>å…¨è¿æ¥å±‚</strong></p><p>æ±‡æ€»è‡³ä¸€ä¸ªç¥ç»å…ƒçš„å…¨è¿æ¥å±‚ï¼Œå³sigmoidå±‚ï¼Œåˆ¤æ–­0æˆ–1å³å¯ã€‚</p><pre><code class="lang-python">from tensorflow.keras.models import Sequentialfrom tensorflow.keras.layers import Dense, Embedding, LSTMmodel = Sequential() model.add(Embedding(max_features, 128, input_length=500, input_shape=(max_features,))) model.add(LSTM(100, dropout=0.2, recurrent_dropout=0.2))model.add(Dense(1, activation=&#39;sigmoid&#39;)) model.compile(loss=&#39;binary_crossentropy&#39;,optimizer=&#39;adam&#39;, metrics=[&#39;accuracy&#39;]) print(model.summary())</code></pre><h2 id="4-æ¨¡å‹è®­ç»ƒå’Œä¿å­˜"><a href="#4-æ¨¡å‹è®­ç»ƒå’Œä¿å­˜" class="headerlink" title="4. æ¨¡å‹è®­ç»ƒå’Œä¿å­˜"></a>4. æ¨¡å‹è®­ç»ƒå’Œä¿å­˜</h2><pre><code class="lang-python">model.fit(X_train, y_train, validation_data=(X_test, y_test), epoch=10, batch_size=64) scores = model.evaluate(X_test, y_test, verbose=0)print(&quot;Accuracy: %.2f%%&quot; % (scores[1]*100))model.save(&#39;models/sentiment-lstm.h5&#39;)</code></pre>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>LSTM</tag>
      
      <tag>IMDB</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€è®ºæ–‡é˜…è¯»ç¬”è®°ã€‘Adversarial Attacks on Deep Learning Models in Natural Language Processing: A Survey</title>
    <link href="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Adversarial-Attacks-on-Deep-Learning-Models-in-Natural-Language-Processing-A-Survey/"/>
    <url>/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Adversarial-Attacks-on-Deep-Learning-Models-in-Natural-Language-Processing-A-Survey/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡æ€»ç»“äº†å¸¸è§çš„nlpé¢†åŸŸçš„å¯¹æŠ—æ ·æœ¬ç”ŸæˆåŠæ”»å‡»æ–¹æ³•ã€‚<br><!--more---></p><p>ç¿»è¯‘è…”é¢„è­¦ï¼é•¿æ–‡é¢„è­¦ï¼</p><h1 id="ä¸€ã€Introduction"><a href="#ä¸€ã€Introduction" class="headerlink" title="ä¸€ã€Introduction"></a>ä¸€ã€Introduction</h1><p>ä¸ºä»£è¡¨çš„ç¥ç»ç½‘ç»œåœ¨æœ€è¿‘å‡ å¹´å–å¾—äº†è¾ƒå¤§çš„æˆåŠŸã€‚ç„¶è€Œå…ˆå‰çš„ç ”ç©¶è¡¨æ˜ï¼ŒDNNç­‰æ·±åº¦å­¦ä¹ æ¨¡å‹å®¹æ˜“å—åˆ°ç²¾å¿ƒæ„å»ºçš„å¯¹æŠ—æ ·æœ¬çš„æ”»å‡»ï¼Œè¿™äº›æ”»å‡»ç®—æ³•åœ¨åŸæœ‰æ ·æœ¬åŸºç¡€ä¸Šäº§ç”Ÿä¸€äº›ä¸å¯å¯Ÿè§‰çš„æ‰°åŠ¨ï¼Œæ¬ºéª—DNNç»™å‡ºé”™è¯¯çš„é¢„æµ‹ã€‚</p><p>æ­¤ç±»å¯¹æŠ—æ ·æœ¬æ”»å‡»æ‰‹æ®µå¹¿æ³›åº”ç”¨äºå›¾åƒè¯†åˆ«ï¼Œå›¾åƒåˆ†ç±»ä»»åŠ¡ç­‰ï¼Œä½†æ˜¯æ­¤ç±»æ”»å‡»æ‰‹æ®µåœ¨è‡ªç„¶è¯­è¨€å¤„ç†nlpä»»åŠ¡ä¸­è¡¨ç°ä¸ä½³ï¼Œç©¶å…¶åŸå› æ˜¯å›¾åƒä¸æ–‡æœ¬ä¹‹é—´çš„å†…åœ¨å·®å¼‚ï¼Œä½¿å¾—å›¾åƒè¯†åˆ«ä»»åŠ¡ä¸­çš„æ”»å‡»æ–¹æ³•æ— æ³•ç›´æ¥ä½¿ç”¨äºnlpé¢†åŸŸã€‚</p><p>ç›®å‰é’ˆå¯¹æ·±åº¦å­¦ä¹ ç³»ç»Ÿçš„å¯¹æŠ—æ ·æœ¬ç ”ç©¶æœ‰ä»¥ä¸‹ä¸‰ä¸ªè§’åº¦ï¼šç¬¬ä¸€ï¼Œé€šè¿‡ç»™æ•°æ®é›†æ·»åŠ æ— æ³•è¢«äººç±»å¯Ÿè§‰çš„æ‰°åŠ¨æ¥æ¬ºéª—æ¨¡å‹ï¼›ç¬¬äºŒï¼Œæ•…æ„æ›´æ”¹ç¥ç»ç½‘ç»œå†…éƒ¨çš„è¾“å‡ºå€¼å’Œæƒé‡ï¼›ç¬¬ä¸‰ï¼Œæ£€æµ‹æ·±åº¦ç¥ç»ç½‘ç»œçš„å¼±ç‚¹ï¼Œæ‰¾åˆ°é˜²å¾¡æ”»å‡»çš„è§£å†³æ–¹æ¡ˆã€‚</p><h2 id="ä¸ºä»€ä¹ˆCVé¢†åŸŸçš„æ”»å‡»æ‰‹æ®µä¸èƒ½ç›´æ¥è¿ç§»åˆ°NLPé¢†åŸŸï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆCVé¢†åŸŸçš„æ”»å‡»æ‰‹æ®µä¸èƒ½ç›´æ¥è¿ç§»åˆ°NLPé¢†åŸŸï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆCVé¢†åŸŸçš„æ”»å‡»æ‰‹æ®µä¸èƒ½ç›´æ¥è¿ç§»åˆ°NLPé¢†åŸŸï¼Ÿ"></a>ä¸ºä»€ä¹ˆCVé¢†åŸŸçš„æ”»å‡»æ‰‹æ®µä¸èƒ½ç›´æ¥è¿ç§»åˆ°NLPé¢†åŸŸï¼Ÿ</h2><p>ç”±äºå›¾åƒå’Œæ–‡æœ¬æ•°æ®ä¹‹é—´çš„å†…åœ¨å·®å¼‚ï¼Œå¯¹å›¾åƒçš„å¯¹æŠ—æ”»å‡»æ–¹æ³•ä¸èƒ½ç›´æ¥åº”ç”¨äºåè€…ã€‚</p><p><strong>é¦–å…ˆï¼Œå›¾åƒæ•°æ®ï¼ˆä¾‹å¦‚åƒç´ å€¼ï¼‰æ˜¯æ•°å€¼ç‰¹å¾ï¼Œä½†æ˜¯æ–‡æœ¬æ•°æ®æœ¬è´¨ä¸Šæ˜¯ç¦»æ•£çš„ç‰¹å¾ã€‚</strong></p><p>å¦‚æœæˆ‘ä»¬å°†æ–‡æœ¬æ•°æ®é‡‡ç”¨æ–‡æœ¬å‘é‡åŒ–æ–¹æ³•è½¬åŒ–æˆæ•°å€¼å‘é‡ï¼Œç„¶ååº”ç”¨åœ¨å›¾åƒæ”»å‡»ä¸­å¸¸ç”¨çš„åŸºäºæ¢¯åº¦çš„å¯¹æŠ—æ”»å‡»æ—¶ï¼Œç”Ÿæˆçš„å¯¹æŠ—æ ·æœ¬ä¸ºæ— æ•ˆå­—ç¬¦æˆ–æ— æ„ä¹‰çš„å•è¯åºåˆ—[157]ã€‚</p><p>å¦‚æœæˆ‘ä»¬é‡‡ç”¨è¯åµŒå…¥ç®—æ³•å¾—åˆ°å…·æœ‰è¯­ä¹‰çš„è¯åµŒå…¥ç©ºé—´ï¼Œä½†æ˜¯å¦‚æœé‡‡ç”¨åŸºäºæ¢¯åº¦çš„å¯¹æŠ—æ”»å‡»ï¼Œä¹Ÿä¼šäº§ç”Ÿæ— æ³•ä¸è¯åµŒå…¥ç©ºé—´ä¸­çš„ä»»ä½•è¯åŒ¹é…çš„å‘é‡[38]ã€‚</p><p><strong>å…¶æ¬¡ï¼Œå¯¹æ–‡æœ¬çš„æ‰°åŠ¨å¾ˆå®¹æ˜“è¢«å¯Ÿè§‰</strong></p><p>å›¾åƒçš„æ‰°åŠ¨æ˜¯äººçœ¼éš¾ä»¥å¯Ÿè§‰çš„åƒç´ å€¼çš„å¾®å°å˜åŒ–ã€‚äººç±»å¯ä»¥æ­£ç¡®åœ°å¯¹æ‰°åŠ¨å›¾åƒè¿›è¡Œåˆ†ç±»è€Œæ¨¡å‹ä¸å¯ä»¥ï¼Œè¿™è¡¨æ˜æ·±åº¦ç¥ç»æ¨¡å‹çš„é²æ£’æ€§è¾ƒå·®ã€‚</p><p>ä½†æ˜¯å¯¹äºæ–‡æœ¬çš„å¯¹æŠ—æ€§æ”»å‡»ï¼Œäººç±»å¾ˆå®¹æ˜“å¯Ÿè§‰åˆ°å¾ˆå°çš„æ‰°åŠ¨ã€‚ä¾‹å¦‚ï¼Œæ›¿æ¢å­—ç¬¦æˆ–å•è¯ä¼šç”Ÿæˆæ— æ•ˆçš„å•è¯æˆ–è¯­æ³•é”™è¯¯çš„å¥å­ã€‚</p><p>æ­¤å¤–ï¼Œå®ƒå°†å¤§å¤§æ”¹å˜å¥å­çš„è¯­ä¹‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå³ä½¿äººç±»ä¹Ÿæ— æ³•æä¾›â€œæ­£ç¡®â€çš„é¢„æµ‹ã€‚</p><h2 id="å…¶ä»–ç±»ä¼¼çš„ç»¼è¿°"><a href="#å…¶ä»–ç±»ä¼¼çš„ç»¼è¿°" class="headerlink" title="å…¶ä»–ç±»ä¼¼çš„ç»¼è¿°"></a>å…¶ä»–ç±»ä¼¼çš„ç»¼è¿°</h2><ul><li>[9]é’ˆå¯¹ä¸åŒç±»åˆ«çš„<strong>æœºå™¨å­¦ä¹ ç³»ç»Ÿ</strong>çš„æ”»å‡»å’Œé˜²å¾¡è¿›è¡Œäº†å…¨é¢çš„ç»¼è¿°</li><li>[35]ä»å®‰å…¨è§’åº¦æ€»ç»“äº†å¯¹æŠ—æ€§æ”»å‡»çš„é˜²å¾¡æªæ–½ã€‚ä»‹ç»å¯¹è±¡ä¸ä»…é™äºæœºå™¨å­¦ä¹ ç®—æ³•ï¼Œè€Œä¸”åŒ…æ‹¬å…¶ä»–å®‰å…¨ç›¸å…³åº”ç”¨çš„å¯¹æŠ—æ ·æœ¬é˜²å¾¡æªæ–½ï¼Œä»¥åŠå¦‚ä½•æœ‰æ•ˆåœ°<strong>è¯„ä¼°æ”»å‡»å’Œé˜²å¾¡æ‰‹æ®µ</strong>ï¼Œå»ºç«‹äº†æ ¹æ®åŠ¨æœºã€é™åˆ¶ã€æ€§èƒ½çš„<strong>åˆ†ç±»æ–¹æ³•</strong>ã€‚</li><li>[13]å…¨é¢çš„æ€»ç»“äº†ä»2008å¹´åˆ°2018å¹´çš„åå¹´ä¸­ï¼Œ<strong>è®¡ç®—æœºè§†è§‰</strong>å’Œ<strong>ç½‘ç»œå®‰å…¨</strong>æ–¹é¢çš„å¯¹æŠ—æ€§æ”»å‡»ç ”ç©¶çš„å‘å±•ï¼Œæä¾›äº†æœ‰å…³æ”»å‡»å’Œé˜²å¾¡<strong>æ•ˆæœçš„è¯¦ç»†åˆ†æ</strong>ã€‚</li><li>[79]ä»æ•°æ®é©±åŠ¨çš„è§’åº¦ç ”ç©¶å¯¹æŠ—æ ·æœ¬æ”»å‡»å’Œé˜²å¾¡é—®é¢˜ï¼Œ<strong>æ ¹æ®å­¦ä¹ é˜¶æ®µï¼ˆå³è®­ç»ƒé˜¶æ®µå’Œæµ‹è¯•é˜¶æ®µï¼‰åˆ†æ</strong>äº†æ”»å‡»å’Œé˜²å¾¡æ‰‹æ®µã€‚</li><li>[154]å›é¡¾äº†å½“å‰<strong>é’ˆå¯¹å„ç§æ·±åº¦ç¥ç»ç½‘ç»œçš„æ”»å‡»</strong>æ‰‹æ®µå’Œç ”ç©¶æˆæœ</li><li>[2]å¯¹<strong>è®¡ç®—æœºè§†è§‰</strong>ä»»åŠ¡ä¸­ä½¿ç”¨çš„<strong>æ·±åº¦å­¦ä¹ æ¨¡å‹</strong>çš„å¯¹æŠ—æ€§æ”»å‡»å’Œ<strong>é˜²å¾¡æ‰‹æ®µ</strong>è¿›è¡Œäº†å…¨é¢ç»¼è¿°</li></ul><p>æœ¬æ–‡é’ˆå¯¹æ–‡æœ¬æ·±åº¦å­¦ä¹ æ¨¡å‹çš„æ”»å‡»å’Œé˜²å¾¡è¿›è¡Œå…¨é¢çš„ç»¼è¿°ï¼Œæ¶µç›–äº†æ¥è‡ªå„ä¸ªæ–¹é¢çš„ä¿¡æ¯ã€‚è®ºæ–‡æ¥æºåŒ…æ‹¬ACLï¼ŒCOLINGï¼ŒNAACLï¼ŒEMNLPï¼ŒICLRï¼ŒAAAIï¼ŒIJCAIåœ¨å†…çš„é¡¶çº§ä¼šè®®ã€‚è®ºæ–‡æŒ‡æ ‡ï¼šè®ºæ–‡è´¨é‡ï¼Œæ–¹æ³•æ–°é¢–åº¦ï¼Œå¼•æ–‡æ•°é‡ã€‚</p><p>æœ¬æ–‡è´¡çŒ®ï¼š</p><ol><li>å…¨é¢è°ƒç ”äº†è¿„ä»Šä¸ºæ­¢çš„æ–‡æœ¬é¢†åŸŸçš„æ·±åº¦ç¥ç»ç½‘ç»œå¯¹æŠ—æ ·æœ¬ç”Ÿæˆç®—æ³•ï¼Œå¹¶ä½¿ç”¨ä¸åŒçš„åˆ†ç±»æ–¹æ¡ˆï¼›</li><li>è®¨è®ºäº†ä¸€äº›æœªè§£å†³çš„æ–°é¢–çš„topic</li></ol><h1 id="äºŒã€Overview"><a href="#äºŒã€Overview" class="headerlink" title="äºŒã€Overview"></a>äºŒã€Overview</h1><h2 id="æ·±åº¦å­¦ä¹ æ¨¡å‹å¯¹æŠ—æ€§æ”»å‡»çš„ä¸€èˆ¬åˆ†ç±»æ³•"><a href="#æ·±åº¦å­¦ä¹ æ¨¡å‹å¯¹æŠ—æ€§æ”»å‡»çš„ä¸€èˆ¬åˆ†ç±»æ³•" class="headerlink" title="æ·±åº¦å­¦ä¹ æ¨¡å‹å¯¹æŠ—æ€§æ”»å‡»çš„ä¸€èˆ¬åˆ†ç±»æ³•"></a>æ·±åº¦å­¦ä¹ æ¨¡å‹å¯¹æŠ—æ€§æ”»å‡»çš„ä¸€èˆ¬åˆ†ç±»æ³•</h2><h3 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><ul><li>æ·±åº¦ç¥ç»ç½‘ç»œï¼ˆDeep Neural Network, DNNï¼‰ï¼šç•¥</li><li>æ‰°åŠ¨ï¼ˆPerturbationï¼‰ï¼šè¿™é‡Œçš„æ‰°åŠ¨æŒ‡è‡ªç„¶æˆ–äººä¸ºæ·»åŠ åˆ°æµ‹è¯•é›†ä¸­çš„å™ªå£°ï¼Œæ—¨åœ¨ä½¿æ·±åº¦å­¦ä¹ æ¨¡å‹å‡ºé”™</li><li>å¯¹æŠ—æ ·æœ¬ï¼ˆAdversarial Examplesï¼‰ï¼šå¯¹æ·±åº¦å­¦ä¹ æ¨¡å‹æ·»åŠ æœ€åæ‰°åŠ¨ï¼ˆworst-case perturbationï¼‰è€Œç”Ÿæˆçš„æ ·æœ¬ã€‚åœ¨åˆ†ç±»ä»»åŠ¡ä¸‹ï¼Œç†æƒ³çš„DNNä»èƒ½å°†å¯¹æŠ—æ ·æœ¬åˆ†ç±»ä¸ºæ­£ç¡®çš„ç±»åˆ«ï¼Œè€Œç›®æ ‡DNNï¼ˆvictimï¼‰åˆ™ä»¥è¾ƒé«˜çš„ç½®ä¿¡ç¨‹åº¦è¯¯åˆ¤æ ·æœ¬çš„ç±»åˆ«ã€‚</li></ul><p>å‡è®¾$x$ä¸ºåŸæ ·æœ¬ï¼Œ$xâ€™$ä¸ºå¯¹æŠ—æ ·æœ¬ï¼Œ$\eta$ä¸ºæœ€åæƒ…å†µçš„æ‰°åŠ¨ï¼Œ$f(x)$ä¸ºæ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œ$y$ä¸º$x$çš„æ­£ç¡®ç±»åˆ«ï¼Œ$yâ€™$ä¸º$x$çš„é”™è¯¯ç±»åˆ«ï¼Œåˆ™å¯¹æŠ—æ ·æœ¬å½¢å¼åŒ–å®šä¹‰ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{array}{c}\mathbf{x}^{\prime}=\mathbf{x}+\eta, f(\mathbf{x})=\mathbf{y}, \mathbf{x} \in \mathbf{X}, \\f\left(\mathbf{x}^{\prime}\right) \neq \mathbf{y} \\\text { or } f\left(\mathbf{x}^{\prime}\right)=\mathbf{y}^{\prime}, \mathbf{y}^{\prime} \neq \mathbf{y}\end{array}</script><ul><li>å¯¹æŠ—æ”»å‡»ï¼ˆæˆ–è€…è¯´ï¼Œå¯¹æŠ—æ ·æœ¬ç”Ÿæˆï¼‰çš„ç›®æ ‡æ˜¯$f(xâ€™)\neq y$æˆ–è€…$f(xâ€™)=yâ€™$</li></ul><h3 id="åˆ†ç±»æ ‡å‡†-Threat-Model"><a href="#åˆ†ç±»æ ‡å‡†-Threat-Model" class="headerlink" title="åˆ†ç±»æ ‡å‡† Threat Model"></a>åˆ†ç±»æ ‡å‡† Threat Model</h3><p><span id="Threat_Model" style.display="none"></span></p><ul><li>æ ¹æ®æ¨¡å‹ä¿¡æ¯åˆ©ç”¨ç¨‹åº¦ï¼Œåˆ†ä¸ºé»‘ç›’æ”»å‡»å’Œç™½ç›’æ”»å‡»<ul><li>ä¸å¿…è®¿é—®DNNçš„ä½“ç³»ç»“æ„ã€å‚æ•°ã€æŸå¤±å‡½æ•°ã€æ¿€æ´»å‡½æ•°å’Œè®­ç»ƒæ•°æ®çš„æ”»å‡»æ‰‹æ®µç§°ä¸ºé»‘ç›’æ”»å‡»ï¼Œé»‘ç›’æ”»å‡»é€šè¿‡æµ‹è¯•é›†æˆ–æ£€æŸ¥DNNè¾“å‡ºæ¥ç”Ÿæˆå¯¹æŠ—æ ·æœ¬ã€‚</li><li>å¯¹åº”åœ°ï¼Œç™½ç›’æ”»å‡»åŸºäºä¸Šè¿°çš„DNNçš„ç»“æ„ç»†èŠ‚ä¿¡æ¯ã€‚é»‘ç›’æ”»å‡»éœ€è¦çš„ä¿¡æ¯é‡æ›´å°‘ï¼Œå› æ­¤æ˜¯ä¸€ç§æ›´æœ‰å¸å¼•åŠ›çš„æ”»å‡»æ‰‹æ®µï¼›ä½†æ˜¯ç™½ç›’æ”»å‡»å¾€å¾€æ›´æœ‰æ•ˆã€‚</li></ul></li><li>æ ¹æ®æ˜¯å¦èƒ½å¤Ÿä»¤æ¨¡å‹è¯¯åˆ¤ä¸ºä¸€ä¸ªç‰¹å®šçš„é”™è¯¯ç»“æœï¼Œåˆ†ä¸ºç›®æ ‡æ”»å‡»å’Œæ— ç›®æ ‡æ”»å‡»ã€‚æ˜¾ç„¶æŒ‡å®šç›®æ ‡çš„æ”»å‡»æ‰‹æ®µæ›´åŠ ä¸¥æ ¼ã€‚å¯¹äºäºŒåˆ†ç±»ä»»åŠ¡ï¼Œç›®æ ‡æ”»å‡»å³ä¸ºéç›®æ ‡æ”»å‡»ã€‚</li><li>æ ¹æ®æ”»å‡»ç®—æ³•ç”Ÿæˆçš„æ‰°åŠ¨çš„ç²’åº¦ï¼Œå¯ä»¥åˆ†ç±»æ”»å‡»æ‰‹æ®µï¼Œæ¯”å¦‚é’ˆå¯¹å›¾åƒåƒç´ çš„æ”»å‡»ï¼Œé’ˆå¯¹å­—ç¬¦ã€å•è¯ã€å¥åµŒå…¥çš„æ”»å‡»ç­‰</li><li>æ ¹æ®äº§ç”Ÿå¯¹æŠ—æ ·æœ¬çš„åŠ¨æœºï¼Œå¯ä»¥æŠŠå¯¹æŠ—æ ·æœ¬ç”Ÿæˆç®—æ³•åˆ†æˆæ”»å‡»æ–¹æ³•å’Œé˜²å¾¡æ–¹æ³•ã€‚æ”»å‡»ç®—æ³•æ—¨åœ¨æ£€æŸ¥DNNçš„é²æ£’æ€§ï¼Œè€Œé˜²å¾¡ç®—æ³•åˆ™è¿›ä¸€æ­¥åˆ©ç”¨ç”Ÿæˆçš„å¯¹æŠ—æ ·æœ¬å¢å¼ºDNNçš„é²æ£’æ€§ã€‚</li></ul><h3 id="è¡¡é‡æ ‡å‡†-Measurements"><a href="#è¡¡é‡æ ‡å‡†-Measurements" class="headerlink" title="è¡¡é‡æ ‡å‡† Measurements"></a>è¡¡é‡æ ‡å‡† Measurements</h3><ul><li><strong>æ‰°åŠ¨é™åˆ¶ï¼ˆPerturbation Constraintï¼‰</strong></li></ul><p>æ‰°åŠ¨$\eta$ä¸åº”æ›´æ”¹è¾“å…¥çš„çœŸå®ç±»åˆ«æ ‡ç­¾ã€‚ä»¥åˆ†ç±»ä»»åŠ¡ä¸ºä¾‹ï¼Œç†æƒ³çš„DNNåˆ†ç±»å™¨å°†èƒ½å¤Ÿæ­£ç¡®è¾¨åˆ«å¯¹æŠ—æ ·æœ¬ã€‚$\eta$ä¹Ÿä¸èƒ½å¤ªå°ï¼Œä»¥å…æœ€ç»ˆå¯¹ç›®æ ‡DNNæ²¡æœ‰å½±å“ã€‚</p><p>ç†æƒ³æƒ…å†µä¸‹ï¼Œæœ‰æ•ˆ$\eta$æ˜¯åœ¨å—é™èŒƒå›´å†…å½±å“æœ€å¤§çš„å™ªå£°ã€‚</p><p>[132]æ·»åŠ å›¾åƒé¢†åŸŸçš„æ‰°åŠ¨é™åˆ¶$(\mathbf{x}+\eta) \in[0,1]^{n}$ä»¥ç¡®ä¿å¯¹æŠ—æ ·æœ¬å…·æœ‰ä¸åŸå§‹æ•°æ®ç›¸åŒçš„åƒç´ å€¼èŒƒå›´</p><p>[40]ç”¨æœ€å¤§èŒƒæ•°çº¦æŸæ‰°åŠ¨ï¼š$|\eta|_{\infty} \leq \epsilon$ã€‚æœ€å¤§èŒƒæ•°çš„å«ä¹‰æ˜¯æ±‚å‘é‡ä¸­çš„æœ€å¤§åˆ†é‡ã€‚å› æ­¤è¯¥é™åˆ¶ä¿è¯ä»»ä½•ç‰¹å®šåƒç´ çš„å˜åŒ–ä¸ä¼šè¶…è¿‡æŸä¸ªé‡$\epsilon$ã€‚</p><p>åœ¨è®¡ç®—æœºè§†è§‰é¢†åŸŸï¼Œmax-normã€$L_2$ã€$L_0$éƒ½å¯ä»¥ç”¨äºæ§åˆ¶æ‰°åŠ¨å¤§å°ï¼Œè€Œæ–‡æœ¬é¢†åŸŸåˆ™æœ‰æ‰€ä¸åŒï¼Œ</p><ul><li><strong>æ”»å‡»æ•ˆæœåº¦é‡</strong></li></ul><p>æ”»å‡»ç®—æ³•å¯ä»¥ä½¿å¾—æ¨¡å‹æ€§èƒ½å¤§å¹…ä¸‹é™ï¼Œåˆ™è¡¡é‡æ”»å‡»ç®—æ³•å¯ä»¥ç›´æ¥ä½¿ç”¨æ¨¡å‹åº¦é‡æŒ‡æ ‡ã€‚æ¯”å¦‚åˆ†ç±»ä»»åŠ¡çš„ç²¾åº¦ã€F1å’ŒAUCï¼Œæ–‡æœ¬ç”Ÿæˆä»»åŠ¡çš„å›°æƒ‘åº¦ã€BLEUè¯„ä»·æŒ‡æ ‡ç­‰ã€‚</p><h2 id="æ·±åº¦å­¦ä¹ æŠ€æœ¯åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„åº”ç”¨"><a href="#æ·±åº¦å­¦ä¹ æŠ€æœ¯åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„åº”ç”¨" class="headerlink" title="æ·±åº¦å­¦ä¹ æŠ€æœ¯åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„åº”ç”¨"></a>æ·±åº¦å­¦ä¹ æŠ€æœ¯åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„åº”ç”¨</h2><p><span id="Models" style.display="none"> <span><br>å‰é¦ˆç¥ç»ç½‘ç»œï¼ˆFNNï¼‰ï¼Œå·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰ï¼Œå¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRNNï¼‰æ˜¯NLPä»»åŠ¡ä¸­æœ€å¸¸ä½¿ç”¨çš„ç¥ç»ç½‘ç»œã€‚</span></span></p><p>Seq2Seq[131]å’ŒAttentionæœºåˆ¶[8]æ˜¯æœ€æ–°çš„NLPæŠ€æœ¯ï¼Œå¼ºåŒ–å­¦ä¹ ï¼ˆReinforcement learningï¼‰å’Œç”Ÿæˆæ¨¡å‹ï¼ˆgenerative modelsï¼‰ä¹Ÿå–å¾—äº†ä¸é”™çš„æ•ˆæœ[152]ã€‚[100ï¼Œ152]è®¨è®ºäº†NLPé¢†åŸŸçš„ç¥ç»ç½‘ç»œåº”ç”¨çŠ¶å†µã€‚</p><h3 id="å‰é¦ˆç¥ç»ç½‘ç»œ"><a href="#å‰é¦ˆç¥ç»ç½‘ç»œ" class="headerlink" title="å‰é¦ˆç¥ç»ç½‘ç»œ"></a>å‰é¦ˆç¥ç»ç½‘ç»œ</h3><p>å‰é¦ˆç¥ç»ç½‘ç»œï¼ˆFeed Forward Networksï¼‰ä¸€èˆ¬æŒ‡å®Œå…¨ç”±å…¨è¿æ¥å±‚æ„æˆçš„ç½‘ç»œã€‚è¿™ç§ç½‘ç»œåˆ†æˆå¤šä¸ªå±‚ï¼Œæ¯ä¸€å±‚æœ‰å¤šä¸ªç¥ç»å…ƒï¼Œä¸€å±‚ä¸­çš„æ¯ä¸ªç¥ç»å…ƒéƒ½ä¸ä¸‹ä¸€å±‚ä¸­çš„æ¯ä¸ªç¥ç»å…ƒç›¸è¿æ¥ã€‚è¿™ç§ç½‘ç»œæ— æ³•è®°å½•å…ƒç´ é¡ºåºï¼Œä¸èƒ½å¤„ç†æ–‡æœ¬åºåˆ—ã€‚</p><h3 id="å·ç§¯ç¥ç»ç½‘ç»œ"><a href="#å·ç§¯ç¥ç»ç½‘ç»œ" class="headerlink" title="å·ç§¯ç¥ç»ç½‘ç»œ"></a>å·ç§¯ç¥ç»ç½‘ç»œ</h3><p>å·ç§¯ç¥ç»ç½‘ç»œï¼ˆConvolutional Neural Networksï¼‰ä¸€èˆ¬ç”±å·ç§¯å±‚ã€æ± åŒ–å±‚å’Œæœ€åçš„å…¨è¿æ¥å±‚æ„æˆã€‚è‘—åçš„å·ç§¯ç½‘ç»œæ¶æ„åŒ…æ‹¬å…¸å‹çš„LeNetã€AlexNetã€Vggã€GoogLeNetã€ResNetã€DenseNetç­‰ã€‚å·ç§¯ç¥ç»ç½‘ç»œåœ¨è®¡ç®—æœºè§†è§‰é¢†åŸŸå–å¾—äº†æˆåŠŸã€‚</p><p>å·ç§¯å±‚ä½¿ç”¨å·ç§¯è¿ç®—æ¥æå–æœ‰æ„ä¹‰çš„è¾“å…¥æ¨¡å¼ã€‚å¦å¤–å·ç§¯å±‚ä¹Ÿå¯¹è¾“å…¥é¡ºåºæ•æ„Ÿï¼Œå› æ­¤å¯ä»¥ç”¨æ¥å¤„ç†æ–‡æœ¬æ•°æ®ã€‚[59]é‡‡ç”¨CNNå¯¹å¥å­åˆ†ç±»ï¼Œ[156]æå‡ºå°†CNNç”¨äºå­—ç¬¦çº§åˆ«çš„æ–‡æœ¬åˆ†ç±»æ–¹æ³•ã€‚[12ã€29ã€30ã€34ã€76]åˆ™å¯¹ä¸Šè¿°CNNåº”ç”¨åšäº†å¯¹æŠ—æ ·æœ¬è¯„ä¼°ã€‚</p><h3 id="å¾ªç¯ç¥ç»ç½‘ç»œ"><a href="#å¾ªç¯ç¥ç»ç½‘ç»œ" class="headerlink" title="å¾ªç¯ç¥ç»ç½‘ç»œ"></a>å¾ªç¯ç¥ç»ç½‘ç»œ</h3><p>å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRecurrent Neural Networksï¼‰é€šè¿‡åœ¨è®¡ç®—å›¾ä¸­å¼•å…¥å¾ªç¯ï¼Œèƒ½å¤Ÿç¼–ç æ—¶é—´é¡ºåºï¼Œåœ¨å¤„ç†é¡ºåºæ•°æ®æ–¹é¢å…·æœ‰ä»¤äººå°è±¡æ·±åˆ»çš„æ€§èƒ½ã€‚</p><p>é€’å½’ç¥ç»ç½‘ç»œï¼ˆRecursive Neural Networksï¼‰å°†å¾ªç¯ç¥ç»ç½‘ç»œæ‹“æ‰‘ä»é¡ºåºç»“æ„æ‰©å±•åˆ°æ ‘ç»“æ„ï¼›åŒå‘RNNåˆ™å¯¹è¾“å…¥é‡‡ç”¨ä»å‰å‘åå’Œä»åå‘å‰ä¸¤ä¸ªæ–¹é¢è¿›è¡Œå»ºæ¨¡ï¼›é•¿çŸ­æœŸè®°å¿†ï¼ˆLong Short-Term Memory, LSTMï¼‰ç½‘ç»œé€šè¿‡æ§åˆ¶ä¿¡æ¯çš„ä¸‰ä¸ªé—¨ï¼ˆå³è¾“å…¥é—¨ï¼Œå¿˜è®°é—¨å’Œè¾“å‡ºé—¨ï¼‰çš„ç»„åˆï¼Œå®ç°é•¿æœŸè®°å¿†ï¼›GRUæ˜¯LSTMçš„ç®€åŒ–ç‰ˆæœ¬ï¼Œå®ƒä»…åŒ…å«ä¸¤ä¸ªé—¨ï¼Œå› æ­¤åœ¨è®¡ç®—æˆæœ¬æ–¹é¢æ›´åŠ é«˜æ•ˆã€‚</p><p>å„ç§LSTMå˜ä½“ï¼š[21ã€50ã€112ã€133ã€141ã€146]ã€‚<br>å¯¹è¿™äº›RNNæ¨¡å‹çš„å¯¹æŠ—æ”»å‡»ï¼š[34ã€53ã€54ã€91ã€103ã€112ã€118ã€130ã€157]ã€‚</p><h3 id="åºåˆ—åˆ°åºåˆ—å­¦ä¹ "><a href="#åºåˆ—åˆ°åºåˆ—å­¦ä¹ " class="headerlink" title="åºåˆ—åˆ°åºåˆ—å­¦ä¹ "></a>åºåˆ—åˆ°åºåˆ—å­¦ä¹ </h3><p>åºåˆ—åˆ°åºåˆ—å­¦ä¹ ï¼ˆSeq2Seqï¼‰[131]æ˜¯æ·±åº¦å­¦ä¹ çš„é‡è¦çªç ´ä¹‹ä¸€ã€‚Seq2Seqæ¨¡å‹ç”±ä¸¤ä¸ªRNNç»„æˆï¼šä¸€ä¸ªå¤„ç†è¾“å…¥å¹¶å°†å…¶å‹ç¼©ä¸ºçŸ¢é‡è¡¨ç¤ºçš„ç¼–ç å™¨ï¼ˆEncoderï¼‰ï¼Œä»¥åŠä¸€ä¸ªé¢„æµ‹è¾“å‡ºçš„è§£ç å™¨ï¼ˆDecoderï¼‰ã€‚</p><p>éšå˜é‡åˆ†å±‚å¾ªç¯ç¼–ç å™¨/è§£ç å™¨ï¼ˆVHREDï¼‰æ¨¡å‹[122]æ˜¯æœ€è¿‘æµè¡Œçš„Seq2Seqæ¨¡å‹ï¼Œè¯¥æ¨¡å‹åˆ©ç”¨å­åºåˆ—ä¹‹é—´çš„å¤æ‚ä¾èµ–æ€§ç”Ÿæˆåºåˆ—ã€‚</p><p>[24]æ˜¯é‡‡ç”¨Seq2Seqæ¨¡å‹çš„ç¬¬ä¸€ä¸ªç¥ç»æœºå™¨ç¿»è¯‘ï¼ˆNMTï¼‰æ¨¡å‹ä¹‹ä¸€ã€‚OpenNMT [63]æ˜¯æœ€è¿‘æå‡ºçš„Seq2Seq NMTæ¨¡å‹ï¼Œå·²æˆä¸ºNMTçš„åŸºå‡†å·¥ä½œä¹‹ä¸€ã€‚</p><p>éšç€å®ƒä»¬çš„å¹¿æ³›åº”ç”¨ï¼Œæ”»å‡»å·¥ä½œä¹Ÿåº”è¿è€Œç”Ÿ[22ï¼Œ30ï¼Œ98ï¼Œ127]ã€‚</p><h3 id="æ³¨æ„åŠ›æœºåˆ¶"><a href="#æ³¨æ„åŠ›æœºåˆ¶" class="headerlink" title="æ³¨æ„åŠ›æœºåˆ¶"></a>æ³¨æ„åŠ›æœºåˆ¶</h3><p>æ³¨æ„åŠ›æœºåˆ¶ï¼ˆAttentionï¼‰[8]æ˜¯æ·±åº¦å­¦ä¹ çš„å¦ä¸€ä¸ªçªç ´ã€‚æœ€åˆå¼€å‘å®ƒæ˜¯ä¸ºäº†å…‹æœç¼–ç Seq2Seqæ¨¡å‹ä¸­æ‰€éœ€çš„é•¿åºåˆ—çš„å›°éš¾[27]ã€‚æ³¨æ„åŠ›æœºåˆ¶ä½¿è§£ç å™¨å¯ä»¥å›é¡¾æºåºåˆ—çš„éšè—çŠ¶æ€ï¼Œå°†è¿™äº›éšè—çŠ¶æ€æŒ‰ç…§æ³¨æ„åŠ›åŠ æƒå¹³å‡ï¼Œä½œä¸ºè§£ç å™¨çš„é™„åŠ è¾“å…¥ã€‚</p><p>NLPä¸­çš„è‡ªæ³¨æ„åŠ›[136]ç”¨æ¥æŸ¥çœ‹åºåˆ—ä¸­çš„å‘¨å›´å•è¯ï¼Œä»¥è·å¾—æ›´å¤šä¸Šä¸‹æ–‡ç›¸å…³çš„å•è¯è¡¨ç¤ºå½¢å¼[152]ï¼Œè€Œä¸æ˜¯æŸ¥çœ‹åŸå§‹æ³¨æ„åŠ›æ¨¡å‹ä¸­çš„è¾“å…¥åºåˆ—ã€‚</p><p>BiDAF [121]æ˜¯ä¸€ç§ç”¨äºæœºå™¨ç†è§£çš„åŒå‘æ³¨æ„åŠ›æµæœºåˆ¶ï¼Œå¹¶åœ¨æå‡ºæ—¶å–å¾—äº†å‡ºè‰²çš„æ€§èƒ½ã€‚</p><p>[54ï¼Œ127]é€šè¿‡å¯¹æŠ—æ ·æœ¬è¯„ä¼°äº†è¯¥æ¨¡å‹çš„é²æ£’æ€§ï¼Œæ˜¯ç‡å…ˆä½¿ç”¨å¯¹æŠ—æ ·æœ¬æ”»å‡»æ–‡æœ¬DNNçš„å‡ éƒ¨ä½œå“ã€‚å…¶ä»–åŸºäºæ³¨æ„åŠ›çš„DNN [25ï¼Œ107]æœ€è¿‘ä¹Ÿå—åˆ°äº†å¯¹æŠ—æ”»å‡»[29ï¼Œ91]ã€‚</p><h3 id="å¼ºåŒ–å­¦ä¹ "><a href="#å¼ºåŒ–å­¦ä¹ " class="headerlink" title="å¼ºåŒ–å­¦ä¹ "></a>å¼ºåŒ–å­¦ä¹ </h3><p>å¼ºåŒ–å­¦ä¹ ï¼ˆReinforcement Learningï¼‰é€šè¿‡åœ¨æ™ºèƒ½ä½“æ‰§è¡Œç¦»æ•£æ“ä½œåç»™äºˆä¸åŒçš„å¥–åŠ±æ¥è®­ç»ƒæ™ºèƒ½ä½“ã€‚åœ¨NLPä¸­ï¼Œå¼ºåŒ–å­¦ä¹ æ¡†æ¶é€šå¸¸ç”±ä¸€ä¸ªæ™ºèƒ½ä½“ï¼ˆAgentï¼Œä»¥DNNå®ç°ï¼‰ï¼Œä¸€ä¸ªç­–ç•¥ï¼ˆPolicyï¼ŒæŒ‡å¯¼è¡ŒåŠ¨ï¼‰å’Œä¸€ä¸ªå¥–åŠ±ï¼ˆRewardï¼‰ç»„æˆã€‚æ™ºèƒ½ä½“æ ¹æ®ç­–ç•¥é€‰æ‹©ä¸€ä¸ªåŠ¨ä½œï¼ˆä¾‹å¦‚ï¼Œé¢„æµ‹åºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå•è¯ï¼‰ï¼Œç„¶åç›¸åº”åœ°æ›´æ–°å…¶å†…éƒ¨çŠ¶æ€ï¼Œç›´åˆ°åˆ°è¾¾è®¡ç®—å¥–åŠ±çš„åºåˆ—æœ«å°¾ä¸ºæ­¢ã€‚</p><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œåœ¨NLPä¸­æ”»å‡»å¼ºåŒ–å­¦ä¹ æ¨¡å‹çš„å·¥ä½œæœ‰é™ï¼Œæ¯”å¦‚[98]ã€‚</p><h3 id="æ·±åº¦ç”Ÿæˆæ¨¡å‹"><a href="#æ·±åº¦ç”Ÿæˆæ¨¡å‹" class="headerlink" title="æ·±åº¦ç”Ÿæˆæ¨¡å‹"></a>æ·±åº¦ç”Ÿæˆæ¨¡å‹</h3><p>æ·±åº¦ç”Ÿæˆæ¨¡å‹ï¼ˆDeep Generative Modelsï¼‰èƒ½å¤Ÿç”Ÿæˆä¸éšç©ºé—´ï¼ˆLatent Spaceï¼‰ä¸­çš„çœŸå®æ•°æ®ï¼ˆGround Truthï¼‰éå¸¸ç›¸ä¼¼çš„çœŸå®æ•°æ®å®ä¾‹ï¼Œæ¯”å¦‚ç”¨äºç”Ÿæˆæ–‡æœ¬ã€‚ä½†æ˜¯æ·±åº¦ç”Ÿæˆæ¨¡å‹ä¸å®¹æ˜“è®­ç»ƒå’Œè¯„ä¼°ï¼Œè¿™é˜»ç¢äº†å®ƒä»¬åœ¨è®¸å¤šå®é™…åº”ç”¨ä¸­çš„å¹¿æ³›ä½¿ç”¨[152]ã€‚</p><p>è¿‘å¹´æ¥ï¼Œæå‡ºäº†ä¸¤ä¸ªå¼ºå¤§çš„æ·±åº¦ç”Ÿæˆæ¨¡å‹ï¼Œå³ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆGANï¼‰[39]å’Œå˜åˆ†è‡ªåŠ¨ç¼–ç å™¨ï¼ˆVAEï¼‰[62]ã€‚</p><p>GAN [39]ç”±ä¸¤ä¸ªå¯¹æŠ—ç½‘ç»œç»„æˆï¼šç”Ÿæˆå™¨å’Œé‰´åˆ«å™¨ã€‚é‰´åˆ«å™¨å°†é‰´åˆ«çœŸå®æ ·æœ¬å’Œç”Ÿæˆçš„æ ·æœ¬ï¼Œè€Œç”Ÿæˆå™¨å°†ç”Ÿæˆæ—¨åœ¨æ¬ºéª—é‰´åˆ«å™¨çš„çœŸå®æ ·æœ¬ã€‚GANä½¿ç”¨æœ€å°-æœ€å¤§æŸå¤±å‡½æ•°æ¥åŒæ—¶è®­ç»ƒä¸¤ä¸ªç¥ç»ç½‘ç»œã€‚</p><p>VAEç”±ç¼–ç å™¨ï¼ˆEncoderï¼‰å’Œç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰ç½‘ç»œç»„æˆã€‚ç¼–ç å™¨å°†è¾“å…¥ç¼–ç åˆ°éšç©ºé—´ä¸­ï¼Œç”Ÿæˆå™¨ä»éšç©ºé—´ä¸­ç”Ÿæˆæ ·æœ¬ã€‚</p><p>å°½ç®¡å®ƒä»¬å·²è¢«ç”¨äºç”Ÿæˆæ–‡æœ¬ï¼Œä½†åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå°šæ— ä»»ä½•ä½œå“ä½¿ç”¨å¯¹æŠ—æ ·æœ¬æ¥æ£€éªŒå…¶å¥å£®æ€§ã€‚</p><h1 id="ä¸‰ã€FROM-IMAGE-TO-TEXT"><a href="#ä¸‰ã€FROM-IMAGE-TO-TEXT" class="headerlink" title="ä¸‰ã€FROM IMAGE TO TEXT"></a>ä¸‰ã€FROM IMAGE TO TEXT</h1><h2 id="è®¡ç®—æœºè§†è§‰é¢†åŸŸçš„å¯¹æŠ—æ”»å‡»æŠ€æœ¯"><a href="#è®¡ç®—æœºè§†è§‰é¢†åŸŸçš„å¯¹æŠ—æ”»å‡»æŠ€æœ¯" class="headerlink" title="è®¡ç®—æœºè§†è§‰é¢†åŸŸçš„å¯¹æŠ—æ”»å‡»æŠ€æœ¯"></a>è®¡ç®—æœºè§†è§‰é¢†åŸŸçš„å¯¹æŠ—æ”»å‡»æŠ€æœ¯</h2><p>æœ‰å…³è®¡ç®—æœºè§†è§‰ä¸­çš„æ”»å‡»å·¥ä½œçš„å…¨é¢æ¦‚è¿°ï¼Œè¯·å‚é˜…å‚è€ƒæ–‡çŒ®[2]ã€‚å¦å¤–ï¼Œ[17ã€40ã€95ã€104ã€105ã€132ã€157]æ˜¯è®¡ç®—æœºè§†è§‰ä¸­é¢‡æœ‰ä»£è¡¨æ€§çš„å¯¹æŠ—æ”»å‡»ç®—æ³•ã€‚</p><h3 id="L-BFGS"><a href="#L-BFGS" class="headerlink" title="L-BFGS"></a>L-BFGS</h3><p>Szegedyç­‰äººç‡å…ˆæå‡ºäº†å¯¹æŠ—æ ·æœ¬çš„æ¦‚å¿µ[132]ã€‚ä»–å°†ç”Ÿæˆå¯¹æŠ—æ ·æœ¬çš„è¿‡ç¨‹å»ºæ¨¡æˆæœ€ä¼˜åŒ–é—®é¢˜ï¼š</p><script type="math/tex; mode=display">\eta=\arg \min _{\eta} \lambda\|\eta\|_{2}^{2}+J\left(\mathbf{x}+\eta, y^{\prime}\right) \quad \text { s.t. } \quad(\mathbf{x}+\eta) \in[0,1]^{n}</script><p>å…¶ä¸­$\eta$æ˜¯æ‰°åŠ¨ï¼Œ$\lambda$æ˜¯è¶…å‚æ•°ï¼Œ$\mathbf{x}$æ˜¯è¾“å…¥æ ·ä¾‹ï¼Œ$y$å’Œ$yâ€™$åˆ†åˆ«æ˜¯æ­£ç¡®æ ‡ç­¾å’Œé”™è¯¯æ ‡ç­¾ï¼Œ$J(x,y)$æ˜¯DNNçš„æŸå¤±å‡½æ•°ã€‚ä»–ä»¬é‡‡ç”¨Box-constrained Limited memory Broyden-Fletcher-Goldfarb-Shannoç®—æ³•ä¼˜åŒ–æ±‚è§£ï¼Œå› æ­¤å¾—åL-BFGSç®—æ³•ã€‚æ•´ä¸ªä¼˜åŒ–è¿‡ç¨‹å¯èƒ½è¿­ä»£å¤šæ¬¡ã€‚</p><h3 id="Fast-Gradient-Sign-Method-FGSM"><a href="#Fast-Gradient-Sign-Method-FGSM" class="headerlink" title="Fast Gradient Sign Method (FGSM)"></a>Fast Gradient Sign Method (FGSM)</h3><p><span style.display="none" id="FGSM"></span><br>L-BFGSè®¡ç®—æ‰°åŠ¨çš„æ–¹æ³•çš„è®¡ç®—ä»£ä»·è¿‡é«˜ï¼Œå› æ­¤Goodfellow[40]æå‡ºäº†ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬ã€‚ä¸L-BFGSç®—æ³•çš„å…ˆå›ºå®š$yâ€™$ã€ç¡®å®šæœ€æœ‰æ•ˆçš„$\eta$çš„æ–¹æ³•ä¸åŒï¼ŒFGSMç®—æ³•å…ˆå›ºå®š$|\eta|_{\infty}$ï¼Œç„¶åæœ€å°åŒ–æŸå¤±å‡½æ•°$J$ã€‚ç„¶åç”¨ä¸€é˜¶æ³°å‹’çº§æ•°é€¼è¿‘ï¼Œå¹¶å¾—åˆ°$\eta$çš„é—­å¼è§£[143]ï¼š</p><script type="math/tex; mode=display">\begin{array}{c}\eta=\arg \min _{\eta} J(\mathbf{x}+\eta, y) \text { s.t. }\|\eta\|_{\infty} \leq \epsilon \\\eta=\arg \min _{\eta} J(\mathbf{x}, y)+\eta^{\mathrm{T}} \nabla_{\mathbf{x}} J(\mathbf{x}, y) \text { s.t. }\|\eta\|_{\infty} \leq \epsilon \\\eta=\epsilon \cdot \operatorname{sign}\left(\nabla_{\mathbf{x}} J(\mathbf{x}, \mathbf{y})\right)\end{array}</script><p>å…¶ä¸­$\epsilon$æ˜¯æ”»å‡»è€…è®¾ç½®çš„å‚æ•°ï¼Œç”¨äºæ§åˆ¶æ‰°åŠ¨çš„å¤§å°ã€‚$sign(x)$æ˜¯ä¸€ä¸ªç¬¦å·å‡½æ•°ï¼Œå½“$x&gt; 0$æ—¶è¿”å›1ï¼Œå½“$x &lt;0$æ—¶è¿”å›-1ï¼Œå¦åˆ™è¿”å›0ã€‚$\nabla_{x}J(x,y)$è¡¨ç¤ºæŸå¤±å‡½æ•°ç›¸å¯¹äºè¾“å…¥çš„æ¢¯åº¦ï¼Œå¯ä»¥é€šè¿‡åå‘ä¼ æ’­è®¡ç®—å‡ºæ¥ã€‚</p><h3 id="Jacobian-Saliency-Map-Adversary-JSMA"><a href="#Jacobian-Saliency-Map-Adversary-JSMA" class="headerlink" title="Jacobian Saliency Map Adversary (JSMA)"></a>Jacobian Saliency Map Adversary (JSMA)</h3><p><span style.display="none" id="JSMA"></span><br>JSMAä½¿ç”¨å…¶é›…å¯æ¯”çŸ©é˜µï¼ˆJacobian Matrixï¼‰è¯„ä¼°ç¥ç»æ¨¡å‹å¯¹æ¯ä¸ªè¾“å…¥ç‰¹å¾å¯¹è¾“å‡ºçš„çµæ•åº¦ã€‚é›…å¯æ¯”çŸ©é˜µå½¢æˆå¯¹æŠ—æ˜¾ç€æ€§å›¾ï¼ˆadversarial saliency mapsï¼‰ï¼Œç»™æ¯ä¸ªè¾“å…¥ç‰¹å¾å¯¹ç›®æ ‡æ”»å‡»çš„è´¡çŒ®è¿›è¡Œæ’åï¼Œç„¶ååœ¨å¯¹æŠ—æ˜¾ç€æ€§å›¾ä¸­é€‰æ‹©ä¸€ä¸ªç‰¹å¾åšæ‰°åŠ¨ã€‚</p><p>ç»™å®šè¾“å…¥$\mathbf{x}$ï¼Œå¯¹åº”çš„é›…å¯æ¯”çŸ©é˜µä¸ºï¼š</p><script type="math/tex; mode=display">\operatorname{Jacb}_{F}[i, j]=\frac{\partial F_{i}}{\partial \mathbf{x}_{j}}</script><p>å…¶ä¸­$\mathbf{x}_i$æ˜¯è¾“å…¥çš„ç¬¬iä¸ªç‰¹å¾ï¼ˆcomponentï¼‰ï¼Œ$F_j$æ˜¯è¾“å‡ºçš„ç¬¬jä¸ªç‰¹å¾ã€‚Fçš„åˆ†é‡ä»£è¡¨ç€logitå€¼ï¼Œ$J_F[i,j]$åº¦é‡äº†$F_j$å¯¹$\mathbf{x}_i$çš„æ•æ„Ÿç¨‹åº¦ï¼ˆsensitivityï¼‰ã€‚</p><h3 id="C-amp-W-Attack"><a href="#C-amp-W-Attack" class="headerlink" title="C&amp;W Attack"></a>C&amp;W Attack</h3><p><span style.display="none" id="C_W"></span><br>Carlini and Wagner [17]æ—¨åœ¨è¯„ä¼°é˜²å¾¡æ€§è’¸é¦ç­–ç•¥[49]ï¼Œä»¥ç¼“è§£å¯¹æŠ—æ€§æ”»å‡»ã€‚C&amp;Wç®—æ³•çš„ä¼˜åŒ–ç›®æ ‡ï¼š</p><script type="math/tex; mode=display">\eta=\arg \min _{\eta}\|\eta\|_{p}+\lambda J\left(\mathbf{x}+\eta, y^{\prime}\right) \quad \text { s.t. } \quad(\mathbf{x}+\eta) \in[0,1]^{n}</script><p>C&amp;Wç®—æ³•ä½¿ç”¨$L_p$èŒƒæ•°æ¥é™åˆ¶æ‰°åŠ¨ï¼Œå…¶ä¸­$p=0,2,\infty$ï¼Œå¹¶æå‡ºäº†7ç§ä¸åŒçš„æŸå¤±å‡½æ•°$J$ã€‚</p><h3 id="DeepFool"><a href="#DeepFool" class="headerlink" title="DeepFool"></a>DeepFool</h3><p>DeepFool [95]æ˜¯ä¸€ä¸ªè¿­ä»£çš„L2æ­£åˆ™åŒ–ç®—æ³•ã€‚</p><p>ä½œè€…é¦–å…ˆå‡è®¾ç¥ç»ç½‘ç»œæ˜¯çº¿æ€§çš„ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨è¶…å¹³é¢å°†ä¸åŒç±»åˆ†å¼€ã€‚</p><p>ä½œè€…åŸºäºæ­¤å‡è®¾æ‰¾åˆ°äº†æœ€ä½³è§£å†³æ–¹æ¡ˆï¼Œå¹¶æ„å»ºäº†å¯¹æŠ—æ ·æœ¬ã€‚</p><p>ä¸ºäº†è§£å†³ç¥ç»ç½‘ç»œçš„éçº¿æ€§é—®é¢˜ï¼Œä»–ä»¬é‡å¤äº†è¿™ä¸€è¿‡ç¨‹ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªçœŸå®çš„å¯¹æŠ—ç¤ºä¾‹ã€‚</p><h3 id="Substitute-Attack"><a href="#Substitute-Attack" class="headerlink" title="Substitute Attack"></a>Substitute Attack</h3><p>ä¸Šè¿°ä»£è¡¨æ€§ä½œå“éƒ½æ˜¯ç™½ç›’æ–¹æ³•ï¼Œéœ€è¦å¯¹ç¥ç»æ¨¡å‹çš„å‚æ•°å’Œç»“æ„æœ‰å…¨é¢çš„äº†è§£ã€‚å®é™…ä¸Šï¼Œç”±äºå¯¹æ¨¡å‹çš„è®¿é—®å—é™ï¼Œæ”»å‡»è€…å¹¶éæ€»æ˜¯èƒ½å¤Ÿä»¥ç™½ç›’æ–¹å¼åˆ¶é€ å¯¹æŠ—æ ·æœ¬ã€‚</p><p>Papernotç­‰äººè§£å†³äº†è¯¥é™åˆ¶ï¼Œ[104]å¼•å…¥äº†é»‘ç›’æ”»å‡»ç­–ç•¥ã€‚</p><p>ä»–ä»¬<strong>è®­ç»ƒäº†ä¸€ä¸ªæ›¿ä»£æ¨¡å‹</strong>ï¼Œä»¥é€šè¿‡æŸ¥è¯¢ç›®æ ‡æ¨¡å‹è·å¾—çš„æ ‡ç­¾æ¥è¿‘ä¼¼ç›®æ ‡æ¨¡å‹çš„å†³ç­–è¾¹ç•Œã€‚ç„¶åï¼Œä»–ä»¬å¯¹è¯¥æ›¿ä»£å“è¿›è¡Œäº†ç™½ç›’æ”»å‡»ï¼Œå¹¶æ®æ­¤ç”Ÿæˆäº†å¯¹æŠ—æ ·æœ¬ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œä»–ä»¬åœ¨ç”Ÿæˆæ›¿ä»£DNNçš„å¯¹æŠ—ç¤ºä¾‹æ—¶<strong>é‡‡ç”¨äº†FSGMå’ŒJSMA</strong>ã€‚</p><h3 id="GAN-like-Attack"><a href="#GAN-like-Attack" class="headerlink" title="GAN-like Attack"></a>GAN-like Attack</h3><p>å¦ä¸€ç§é»‘ç›’æ”»å‡»æ–¹æ³•åˆ©ç”¨äº†ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆGANï¼‰ã€‚</p><p>Zhaoç­‰äºº[157]é¦–å…ˆåœ¨è®­ç»ƒé›†Xä¸Šè®­ç»ƒäº†ç”Ÿæˆæ¨¡å‹WGANï¼ŒWGANå¯ä»¥ç”Ÿæˆä¸Xéµå¾ªç›¸åŒåˆ†å¸ƒçš„æ•°æ®ã€‚ç„¶ååˆ†åˆ«è®­ç»ƒäº†ä¸€ä¸ªé€†å˜å™¨ï¼ˆinverterï¼‰ï¼Œä»¥é€šè¿‡æœ€å¤§ç¨‹åº¦åœ°å‡å°‘é‡æ„è¯¯å·®ï¼ˆreconstruction errorï¼‰ï¼Œå°†æ•°æ®æ ·æœ¬xæ˜ å°„åˆ°éšå¯†é›†ç©ºé—´ï¼ˆlatent dense spaceï¼‰ä¸­ã€‚</p><p>ä»–ä»¬ä¸æ˜¯åœ¨æ‰°åŠ¨$x$ï¼Œè€Œæ˜¯å…ˆä»$x$åœ¨éšç©ºé—´ä¸­å¯¹åº”çš„å˜é‡$z$çš„é‚»è¿‘æ ·æœ¬ä¸­æœç´¢$z^<em>$ï¼Œç„¶åå°†$z^</em>$æ˜ å°„å›$x^<em>$ï¼Œå¹¶æ£€æŸ¥$x^</em>$æ˜¯å¦ä¼šæ”¹å˜é¢„æµ‹ã€‚</p><p>ä»–ä»¬ä»‹ç»äº†ä¸¤ç§æœç´¢ç®—æ³•ï¼šè¿­ä»£éšæœºæœç´¢å’Œæ··åˆæ”¶ç¼©æœç´¢ï¼ˆiterative stochastic search and hybrid shrinking searchï¼‰ã€‚</p><p>å‰è€…ä½¿ç”¨æ‰©å¤§ç­–ç•¥é€æ¸æ‰©å¤§æœç´¢ç©ºé—´ï¼Œè€Œåè€…åˆ™ä½¿ç”¨ç¼©å°ç­–ç•¥ï¼Œä»å¤§èŒƒå›´å¼€å§‹å¹¶é€’å½’åœ°ç¼©å°æœç´¢èŒƒå›´çš„ä¸Šé™ã€‚</p><h2 id="å›¾åƒæ”»å‡»ç®—æ³•å’Œæ–‡æœ¬æ”»å‡»ç®—æ³•çš„å¯¹æ¯”"><a href="#å›¾åƒæ”»å‡»ç®—æ³•å’Œæ–‡æœ¬æ”»å‡»ç®—æ³•çš„å¯¹æ¯”" class="headerlink" title="å›¾åƒæ”»å‡»ç®—æ³•å’Œæ–‡æœ¬æ”»å‡»ç®—æ³•çš„å¯¹æ¯”"></a>å›¾åƒæ”»å‡»ç®—æ³•å’Œæ–‡æœ¬æ”»å‡»ç®—æ³•çš„å¯¹æ¯”</h2><h3 id="ç¦»æ•£è¾“å…¥ä¸è¿ç»­è¾“å…¥"><a href="#ç¦»æ•£è¾“å…¥ä¸è¿ç»­è¾“å…¥" class="headerlink" title="ç¦»æ•£è¾“å…¥ä¸è¿ç»­è¾“å…¥"></a>ç¦»æ•£è¾“å…¥ä¸è¿ç»­è¾“å…¥</h3><p>å›¾åƒè¾“å…¥æ˜¯è¿ç»­çš„ï¼Œé€šå¸¸è¯¥æ–¹æ³•ä½¿ç”¨$L_p$èŒƒæ•°æ¥æµ‹é‡åŸå§‹æ•°æ®ç‚¹ä¸è¢«æ‰°åŠ¨æ•°æ®ç‚¹ä¹‹é—´çš„è·ç¦»ã€‚</p><p>ä½†æ˜¯ï¼Œæ–‡æœ¬æ•°æ®æ˜¯ç¦»æ•£çš„ã€‚é’ˆå¯¹æ–‡æœ¬æ‰°åŠ¨çš„å˜é‡æˆ–è·ç¦»æµ‹é‡æ–¹æ³•éš¾ä»¥æ„å»ºã€‚</p><p>ä¹Ÿå¯ä»¥å°†æ–‡æœ¬æ•°æ®æ˜ å°„åˆ°è¿ç»­æ•°æ®ï¼Œç„¶åé‡‡ç”¨è®¡ç®—æœºè§†è§‰çš„æ”»å‡»æ–¹æ³•ã€‚</p><h3 id="å¯æ„ŸçŸ¥ä¸ä¸å¯æ„ŸçŸ¥"><a href="#å¯æ„ŸçŸ¥ä¸ä¸å¯æ„ŸçŸ¥" class="headerlink" title="å¯æ„ŸçŸ¥ä¸ä¸å¯æ„ŸçŸ¥"></a>å¯æ„ŸçŸ¥ä¸ä¸å¯æ„ŸçŸ¥</h3><p>äººä»¬é€šå¸¸ä¸å®¹æ˜“å¯Ÿè§‰åˆ°å›¾åƒåƒç´ çš„å¾®å°å˜åŒ–ï¼Œå› æ­¤ï¼Œå¯¹æŠ—æ ·æœ¬ä¸ä¼šæ”¹å˜äººç±»çš„åˆ¤æ–­åŠ›ï¼Œè€Œåªä¼šä½¿DNNæ¨¡å‹è’™è”½ã€‚</p><p>ä½†æ˜¯ï¼Œäººç±»å¾ˆå®¹æ˜“å¯Ÿè§‰åˆ°æ–‡æœ¬ä¸Šçš„å°å˜åŒ–ï¼Œä¾‹å¦‚å­—ç¬¦æˆ–å•è¯çš„å˜åŒ–ï¼Œä»è€Œå¯¼è‡´æ”»å‡»å¤±è´¥ã€‚</p><p>å¯ä»¥åœ¨è¾“å…¥æ–‡æœ¬DNNæ¨¡å‹ä¹‹å‰é€šè¿‡æ‹¼å†™æ£€æŸ¥å’Œè¯­æ³•æ£€æŸ¥æ¥è¯†åˆ«æˆ–çº æ­£æ›´æ”¹ã€‚</p><h3 id="è¯­ä¹‰ä¸æ— è¯­ä¹‰"><a href="#è¯­ä¹‰ä¸æ— è¯­ä¹‰" class="headerlink" title="è¯­ä¹‰ä¸æ— è¯­ä¹‰"></a>è¯­ä¹‰ä¸æ— è¯­ä¹‰</h3><p>å°±å›¾åƒè€Œè¨€ï¼Œå¾®å°çš„å˜åŒ–é€šå¸¸ä¸ä¼šæ”¹å˜å›¾åƒçš„è¯­ä¹‰ï¼ˆSemanticï¼‰ï¼Œå› ä¸ºå®ƒä»¬æ˜¯å¾®ä¸è¶³é“ä¸”ä¸å¯æ„ŸçŸ¥çš„ã€‚</p><p>ä½†æ˜¯ï¼Œå¯¹æ–‡æœ¬çš„å¹²æ‰°ä¼šè½»æ˜“æ”¹å˜å•è¯å’Œå¥å­çš„è¯­ä¹‰ï¼Œå› æ­¤å¾ˆå®¹æ˜“è¢«æ£€æµ‹åˆ°å¹¶ä¸¥é‡å½±å“æ¨¡å‹çš„è¾“å‡ºã€‚</p><p>æ›´æ”¹è¾“å…¥çš„è¯­ä¹‰è¿åäº†å¯¹æŠ—æ”»å‡»çš„ç›®çš„ï¼Œå³åœ¨æ¬ºéª—ç›®æ ‡DNNæ—¶ä¿æŒæ­£ç¡®çš„æ ‡ç­¾ä¸å˜ã€‚</p><h2 id="æ–‡æœ¬å‘é‡åŒ–æ–¹æ³•"><a href="#æ–‡æœ¬å‘é‡åŒ–æ–¹æ³•" class="headerlink" title="æ–‡æœ¬å‘é‡åŒ–æ–¹æ³•"></a>æ–‡æœ¬å‘é‡åŒ–æ–¹æ³•</h2><p>DNNæ¨¡å‹éœ€è¦å‘é‡ä½œä¸ºè¾“å…¥ï¼Œå¯¹äºå›¾åƒä»»åŠ¡ï¼Œé€šå¸¸çš„æ–¹æ³•æ˜¯ä½¿ç”¨åƒç´ å€¼å°†å‘é‡/çŸ©é˜µä½œä¸ºDNNè¾“å…¥ã€‚</p><p>ä½†æ˜¯å¯¹äºæ–‡æœ¬æ¨¡å‹ï¼Œéœ€è¦ç‰¹æ®Šæ“ä½œæ‰èƒ½å°†æ–‡æœ¬è½¬æ¢ä¸ºçŸ¢é‡ã€‚</p><p>æ–¹æ³•ä¸»è¦æœ‰ä¸‰ç§ï¼šåŸºäºå•è¯è®¡æ•°çš„ç¼–ç ï¼Œone-hotç¼–ç å’Œå¯†é›†ç¼–ç ï¼ˆåˆç§°ä¸ºç‰¹å¾åµŒå…¥ï¼‰ï¼Œåä¸¤ç§ä¸»è¦ç”¨äºæ–‡æœ¬åº”ç”¨ç¨‹åºçš„DNNæ¨¡å‹ä¸­ã€‚</p><h3 id="åŸºäºå•è¯è®¡æ•°çš„ç¼–ç æ–¹æ³•"><a href="#åŸºäºå•è¯è®¡æ•°çš„ç¼–ç æ–¹æ³•" class="headerlink" title="åŸºäºå•è¯è®¡æ•°çš„ç¼–ç æ–¹æ³•"></a>åŸºäºå•è¯è®¡æ•°çš„ç¼–ç æ–¹æ³•</h3><p>è¯è¢‹æ¨¡å‹ï¼ˆBag-of-Word, BOWï¼‰ï¼ŒTF-IDFç¼–ç ã€‚</p><h3 id="One-Hotç¼–ç "><a href="#One-Hotç¼–ç " class="headerlink" title="One-Hotç¼–ç "></a>One-Hotç¼–ç </h3><p>ç•¥</p><h3 id="å¯†é›†ç¼–ç "><a href="#å¯†é›†ç¼–ç " class="headerlink" title="å¯†é›†ç¼–ç "></a>å¯†é›†ç¼–ç </h3><p>Word2Vec [90]ä½¿ç”¨è¿ç»­è¯è¢‹ï¼ˆCBOWï¼‰å’Œ Skip-gram æ¨¡å‹æ¥ç”Ÿæˆå•è¯çš„å¯†é›†è¡¨ç¤ºï¼Œå³å•è¯åµŒå…¥ã€‚è¯åµŒå…¥çš„åŸºæœ¬å‡è®¾æ˜¯å‡ºç°åœ¨ç›¸ä¼¼ä¸Šä¸‹æ–‡ä¸­çš„å•è¯å…·æœ‰ç›¸ä¼¼å«ä¹‰ã€‚è¯åµŒå…¥åœ¨æŸç§ç¨‹åº¦ä¸Šå‡è½»äº†å‘é‡åŒ–æ–‡æœ¬æ•°æ®çš„ç¦»æ•£æ€§å’Œæ•°æ®ç¨€ç–æ€§é—®é¢˜[36]ã€‚</p><p>é™¤è¯åµŒå…¥å¤–ï¼Œdoc2vecå’Œpara2vec [69]ç­‰è¯åµŒå…¥çš„æ‰©å±•èƒ½ç›´æ¥å°†å¥å­/æ®µè½ç¼–ç ä¸ºå¯†é›†å‘é‡ã€‚</p><h2 id="æ–‡æœ¬æ‰°åŠ¨æµ‹é‡"><a href="#æ–‡æœ¬æ‰°åŠ¨æµ‹é‡" class="headerlink" title="æ–‡æœ¬æ‰°åŠ¨æµ‹é‡"></a>æ–‡æœ¬æ‰°åŠ¨æµ‹é‡</h2><p>æ–‡æœ¬æ‰°åŠ¨çš„åº¦é‡ä¸å›¾åƒæ‰°åŠ¨å®Œå…¨ä¸åŒã€‚é€šå¸¸ï¼Œæ‰°åŠ¨çš„å¤§å°æ˜¯é€šè¿‡åŸå§‹æ•°æ®$x$ä¸å®ƒçš„å¯¹æŠ—æ ·æœ¬$xâ€™$ä¹‹é—´çš„è·ç¦»æµ‹é‡çš„ã€‚</p><p>ä½†æ˜¯åœ¨æ–‡æœ¬ä¸­ï¼Œè·ç¦»æµ‹é‡è¿˜éœ€è¦è€ƒè™‘è¯­æ³•æ­£ç¡®æ€§ï¼Œå¥æ³•æ­£ç¡®æ€§å’Œè¯­ä¹‰ä¿ç•™æ€§ (grammar correctness, syntax correctness and semantic-preservance)ã€‚</p><h3 id="åŸºäºèŒƒæ•°çš„åº¦é‡æ–¹æ³•"><a href="#åŸºäºèŒƒæ•°çš„åº¦é‡æ–¹æ³•" class="headerlink" title="åŸºäºèŒƒæ•°çš„åº¦é‡æ–¹æ³•"></a>åŸºäºèŒƒæ•°çš„åº¦é‡æ–¹æ³•</h3><p>ç›´æ¥ä½¿ç”¨èŒƒæ•°æ¥åº¦é‡è¯å‘é‡ã€è¯åµŒå…¥å‘é‡ä¹‹é—´çš„è·ç¦»ã€‚</p><h3 id="è¯­æ³•å’Œå¥æ³•ç›¸å…³çš„æŒ‡æ ‡"><a href="#è¯­æ³•å’Œå¥æ³•ç›¸å…³çš„æŒ‡æ ‡" class="headerlink" title="è¯­æ³•å’Œå¥æ³•ç›¸å…³çš„æŒ‡æ ‡"></a>è¯­æ³•å’Œå¥æ³•ç›¸å…³çš„æŒ‡æ ‡</h3><p><strong>è¯­æ³•æ£€æŸ¥</strong>å’Œ<strong>å¥æ³•æ£€æŸ¥</strong>å™¨å¯ä»¥ç”¨äºåº¦é‡è¯¥æŒ‡æ ‡ï¼Œç”¨æ¥ä¿è¯å¯¹æŠ—æ ·æœ¬ä¹Ÿç¬¦åˆæ­£ç¡®çš„è¯­æ³•å’Œå¥æ³•ã€‚</p><p><strong>å›°æƒ‘åº¦</strong>ï¼ˆPerplexityï¼‰é€šå¸¸ç”¨äºè¡¡é‡è¯­è¨€æ¨¡å‹çš„è´¨é‡ã€‚åœ¨ä¸€ç¯‡ç»¼è¿°æ–‡çŒ®[91]ä¸­ï¼Œä½œè€…ä½¿ç”¨å›°æƒ‘æ¥ç¡®ä¿ç”Ÿæˆçš„å¯¹æŠ—æ ·æœ¬ï¼ˆå¥å­ï¼‰æœ‰æ•ˆã€‚</p><p><strong>è½¬ä¹‰</strong>ï¼ˆParaphraseï¼‰å°†ä¸€æ®µæ–‡æœ¬è½¬æˆå¦å¤–ä¸€ä¸ªè¯­è¨€ï¼Œæœ¬èº«å¯è¢«è§†ä½œç”Ÿæˆå¯¹æŠ—æ ·æœ¬ã€‚è½¬ä¹‰çš„æœ‰æ•ˆæ€§å–å†³äºç”Ÿæˆæ¨¡å‹çš„æœ‰æ•ˆæ€§ã€‚</p><h3 id="è¯­ä¹‰ç›¸ä¼¼åº¦åº¦é‡"><a href="#è¯­ä¹‰ç›¸ä¼¼åº¦åº¦é‡" class="headerlink" title="è¯­ä¹‰ç›¸ä¼¼åº¦åº¦é‡"></a>è¯­ä¹‰ç›¸ä¼¼åº¦åº¦é‡</h3><p>ä¸€èˆ¬é‡‡ç”¨å‘é‡é—´è·ç¦»åº¦é‡æŒ‡æ ‡æ¥ä½œä¸ºè¯å‘é‡çš„è¯­ä¹‰ç›¸ä¼¼åº¦åº¦é‡æŒ‡æ ‡ã€‚ç»™å®šä¸¤ä¸ªnç»´çš„è¯å‘é‡$\mathbf{p}=(p_1,p_2,\dots,p_n)$å’Œ$\mathbf{q}=(q_1,q_2,\dots,q_n)$ï¼Œæœ‰å¦‚ä¸‹å®šä¹‰ï¼š</p><ul><li>æ¬§æ°è·ç¦»ï¼š  <script type="math/tex; mode=display">d(\mathbf{p}, \mathbf{q})=\sqrt{\left(p_{1}-q_{1}\right)^{2}+\left(p_{2}-q_{2}\right)^{2}+\cdots+\left(p_{n}-q_{n}\right)^{2}}</script>-ä½™å¼¦ç›¸ä¼¼åº¦<script type="math/tex; mode=display">\cos (\mathrm{p}, \mathrm{q})=\frac{\sum_{i=1}^{n} p_{i} \times q_{i}}{\sqrt{\sum_{i=1}^{n}\left(p_{i}\right)^{2}} \times \sqrt{\sum_{i=1}^{n}\left(q_{i}\right)^{2}}}</script></li></ul><h3 id="ç¼–è¾‘è·ç¦»"><a href="#ç¼–è¾‘è·ç¦»" class="headerlink" title="ç¼–è¾‘è·ç¦»"></a>ç¼–è¾‘è·ç¦»</h3><p>ç¼–è¾‘è·ç¦»æ˜¯ä¸€ç±»è¡¡é‡å­—ç¬¦ä¸²è½¬åŒ–æˆå¦ä¸€å­—ç¬¦ä¸²æ—¶ï¼Œéœ€è¦è¿›è¡Œçš„æœ€å°æ“ä½œæ•°ã€‚ä¸åŒçš„ç¼–è¾‘è·ç¦»ï¼ŒåŒºåˆ«åœ¨äºä¸åŒçš„å­—ç¬¦ä¸²æ“ä½œã€‚</p><ul><li>Levenshtein Distance ä½¿ç”¨æ’å…¥ï¼Œç§»é™¤å’Œæ›¿æ¢æ“ä½œ</li><li>Word Moverâ€™s Distance (WMD) [68] è®¡ç®—çš„æ˜¯ä¸¤è¯åµŒå…¥å‘é‡äº’ç›¸è½¬æ¢çš„ç¼–è¾‘è·ç¦»ï¼Œå®ƒæµ‹é‡ä¸€ä¸ªæ–‡æ¡£çš„å•è¯åœ¨è¯åµŒå…¥ç©ºé—´ä¸­å˜æˆå¦ä¸€æ–‡æ¡£çš„å•è¯æ‰€éœ€è¿›è¡Œçš„æœ€å°‘æ“ä½œ[38]ã€‚é€šè¿‡è®¡ç®—ä¸‹é¢è¿™ä¸ªæœ€ä¼˜åŒ–é—®é¢˜æ¥è®¡ç®—è·ç¦»ï¼š</li></ul><script type="math/tex; mode=display">\begin{array}{c}\min \sum_{i, j=1}^{n} \mathbf{T}_{i j} \mid \mathbf{e}_{\mathbf{i}}-\mathbf{e}_{\mathbf{j}} \|_{2} \\\text {s.t.}, \sum_{j=1}^{n} \mathbf{T}_{i j}=d_{i}, \forall i \in\{i, \ldots, n\}, \sum_{i=1}^{n} \mathbf{T}_{i j}=d_{i}^{\prime}, \forall j \in\{i, \ldots, n\}\end{array}</script><p>å…¶ä¸­$\mathbf{e}<em>i$å’Œ$\mathbf{e}_j$åˆ†åˆ«æ˜¯å•è¯$i$å’Œ$j$çš„è¯åµŒå…¥å‘é‡ï¼›$n$æ˜¯å•è¯æ€»æ•°ï¼›$\mathbf{d}$å’Œ$\mathbf{d}â€™$åˆ†åˆ«æ˜¯ä¸¤æ–‡æ¡£ç»è¿‡å½’ä¸€åŒ–çš„è¯è¢‹å‘é‡ï¼›$\mathrm{T} \in \mathcal{R}^{n \times n}$æ˜¯æµåŠ¨çŸ©é˜µï¼ˆFlow Matrixï¼Œæ‰€æœ‰å¯èƒ½çš„æºå’Œç›®çš„åœ°å¯¹ä¹‹é—´çš„æµé‡ï¼‰ï¼Œ$\mathrm{T}</em>{i j} \leq 0$ä»£è¡¨äº†$\mathbf{d}$ç©ºé—´çš„å•è¯$i$è½¬å˜æˆ$\mathbf{d}â€™$ç©ºé—´çš„å•è¯$j$æ—¶ï¼Œè¦æ”¹å˜çš„å•è¯æ•°ç›®ã€‚</p><h3 id="æ°å¡å¾·ç›¸ä¼¼åº¦ï¼ˆJaccard-similarity-coefficientï¼‰"><a href="#æ°å¡å¾·ç›¸ä¼¼åº¦ï¼ˆJaccard-similarity-coefficientï¼‰" class="headerlink" title="æ°å¡å¾·ç›¸ä¼¼åº¦ï¼ˆJaccard similarity coefficientï¼‰"></a>æ°å¡å¾·ç›¸ä¼¼åº¦ï¼ˆJaccard similarity coefficientï¼‰</h3><p>æ°å¡å¾·ç›¸ä¼¼åº¦è®¡ç®—çš„æ˜¯æœ‰é™æ ·æœ¬é›†åˆé—´å…ƒç´ çš„ç›¸ä¼¼ç¨‹åº¦ï¼Œè®¡ç®—æ–¹æ³•ä¸ºï¼š</p><script type="math/tex; mode=display">J(A, B)=\frac{|A \cap B|}{|A \cup B|}</script><p>$A$ã€$B$æ˜¯ä¸¤æ®µæ–‡æ¡£æˆ–è€…ä¸¤å¥è¯ï¼Œ$|A\cap B|$æ˜¯åŒæ—¶å‡ºç°åœ¨ä¸¤æ–‡æ¡£ä¸­çš„å•è¯æ•°ç›®ï¼Œ$|A\cup B|$æ˜¯ä¸¤æ–‡æ¡£çš„å•è¯æ€»æ•°ï¼Œé‡å¤å‡ºç°çš„å•è¯ä¸äºˆè®¡æ•°ã€‚</p><h1 id="å››ã€ATTACKING-NEURAL-MODELS-IN-NLP-THE-SOTA"><a href="#å››ã€ATTACKING-NEURAL-MODELS-IN-NLP-THE-SOTA" class="headerlink" title="å››ã€ATTACKING NEURAL MODELS IN NLP: THE SOTA"></a>å››ã€ATTACKING NEURAL MODELS IN NLP: THE SOTA</h1><h2 id="æ–‡æœ¬é¢†åŸŸçš„æ·±åº¦å­¦ä¹ ç³»ç»Ÿæ”»å‡»æ–¹æ³•ä¹‹åˆ†ç±»"><a href="#æ–‡æœ¬é¢†åŸŸçš„æ·±åº¦å­¦ä¹ ç³»ç»Ÿæ”»å‡»æ–¹æ³•ä¹‹åˆ†ç±»" class="headerlink" title="æ–‡æœ¬é¢†åŸŸçš„æ·±åº¦å­¦ä¹ ç³»ç»Ÿæ”»å‡»æ–¹æ³•ä¹‹åˆ†ç±»"></a>æ–‡æœ¬é¢†åŸŸçš„æ·±åº¦å­¦ä¹ ç³»ç»Ÿæ”»å‡»æ–¹æ³•ä¹‹åˆ†ç±»</h2><p><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Adversarial-Attacks-on-Deep-Learning-Models-in-Natural-Language-Processing-A-Survey/Categories_of_adv_attack_methods_on_textual_DL_models.png" alt></p><p>å¦‚<a href="#Threat_Model">åˆ†ç±»æ ‡å‡† Threat Model</a>æ‰€è¿°ï¼Œå¯ä»¥æŠŠæ”»å‡»æ–¹æ³•æŒ‰ä¸€ä¸‹åˆ†ç±»æ ‡å‡†åˆ†ç±»ï¼š</p><ul><li>æ¨¡å‹å†…éƒ¨ä¿¡æ¯</li><li>æ ¹æ®è¢«æ”»å‡»æ¨¡å‹çš„åº”ç”¨åœºæ™¯</li><li>æ ¹æ®æ˜¯å¦å¸¦ç›®æ ‡</li><li>æ ¹æ®æ‰°åŠ¨ç²’åº¦</li><li>æ ¹æ®<a href="#Models">è¢«æ”»å‡»æ¨¡å‹ç±»å‹</a></li></ul><h2 id="ç™½ç›’æ”»å‡»"><a href="#ç™½ç›’æ”»å‡»" class="headerlink" title="ç™½ç›’æ”»å‡»"></a>ç™½ç›’æ”»å‡»</h2><p>æ”»å‡»éœ€è¦è®¿é—®æ¨¡å‹çš„å®Œæ•´ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä½“ç³»ç»“æ„ï¼Œå‚æ•°ï¼ŒæŸå¤±å‡½æ•°ï¼Œæ¿€æ´»å‡½æ•°ï¼Œè¾“å…¥å’Œè¾“å‡ºæ•°æ®ã€‚ç™½ç›’æ”»å‡»é€šå¸¸ä¼šé’ˆå¯¹ç‰¹å®šæ¨¡å‹å°½å¯èƒ½ä¸¥é…·çš„æ”»å‡»ï¼ŒåŒ…æ‹¬æ·»åŠ æ‰°åŠ¨ã€‚ç™½ç›’æ”»å‡»é€šå¸¸éå¸¸æœ‰æ•ˆæœã€‚</p><h3 id="åŸºäºFGSMçš„æ”»å‡»"><a href="#åŸºäºFGSMçš„æ”»å‡»" class="headerlink" title="åŸºäºFGSMçš„æ”»å‡»"></a>åŸºäºFGSMçš„æ”»å‡»</h3><p>FGSMç®—æ³•æˆ‘ä»¬<a href="#FGSM">å·²æœ‰è®¨è®º</a>ã€‚å¾ˆå¤šæ–‡æœ¬æ¨¡å‹æ”»å‡»æ–¹æ³•éƒ½æ˜¯å—åˆ°FGSMå¯å‘.</p><p>TextFool [76]é‡‡ç”¨äº†FGSMçš„æ¦‚å¿µï¼Œé€šè¿‡ä½¿ç”¨åå‘ä¼ æ’­è®¡ç®—æŸå¤±æ¢¯åº¦$\nabla_x J$ï¼Œæ ¹æ®æŸå¤±æ¢¯åº¦çš„å¤§å°ä¼°è®¡æ–‡æœ¬é¡¹çš„è´¡çŒ®ï¼Œæ ‡è¯†å‡ºå¯¹æ–‡æœ¬åˆ†ç±»ä»»åŠ¡æœ‰é‡å¤§è´¡çŒ®çš„é¡¹ï¼Œè¿™äº›é¡¹è¢«ç§°ä¸ºHot Characterã€‚åŒ…å«è¶³å¤ŸHot Characterçš„çŸ­è¯­è¢«ç§°ä¸ºHTPã€‚é’ˆå¯¹HTPï¼Œé‡‡ç”¨ä¸‰ç§ç±»å‹çš„æ”»å‡»ï¼šæ’å…¥ï¼ˆå¦å¤–ç±»åˆ«çš„HTPï¼‰ï¼Œä¿®æ”¹ï¼ˆè¯¥æ ·æœ¬è‡ªå¸¦çš„HTPå­—ç¬¦æˆ–è§†è§‰ä¸Šç›¸è¿‘çš„å­—ç¬¦ï¼‰å’Œåˆ é™¤ï¼ˆè¯¥æ ·æœ¬è‡ªå¸¦çš„HTPå­—ç¬¦ï¼‰ã€‚æœ€ååœ¨CNNæ–‡æœ¬åˆ†ç±»å™¨ä¸Šè¯„ä¼°äº†è¿™ä¸‰ç§ç­–ç•¥åŠå…¶ç»„åˆ[156]ã€‚è¯¥å·¥ä½œçš„ç¼ºé™·åœ¨äºï¼Œè¿™äº›æ–¹æ³•æ˜¯æ‰‹åŠ¨è¿›è¡Œçš„ã€‚</p><blockquote><p>å…³äºæœ¬æ–‡çš„è®¨è®ºåœ¨<a href="https://superlova.github.io/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Deep-Text-Classification-Can-be-Fooled/">è¿™é‡Œ</a>ã€‚</p></blockquote><p>[117]ä¸­çš„å·¥ä½œé‡‡ç”¨äº†ä¸TextFoolç›¸åŒçš„æ€æƒ³ï¼Œä½†æ˜¯å®ƒæä¾›äº†ä¸€ä¸ªremove-addition-replacementç­–ç•¥ï¼Œè¯¥ç­–ç•¥é¦–å…ˆå°è¯•<strong>åˆ é™¤</strong>å¯¹æ–‡æœ¬åˆ†ç±»ä»»åŠ¡è´¡çŒ®æœ€å¤§ï¼ˆä½¿ç”¨æŸå¤±æ¢¯åº¦æ¥è¡¡é‡ï¼‰çš„å‰¯è¯ï¼ˆ$w_i$ï¼‰ã€‚å¦‚æœæ­¤æ­¥éª¤è¾“å‡ºå¥å­è¯­æ³•ä¸æ­£ç¡®ï¼Œåˆ™å–æ¶ˆåˆ é™¤ï¼Œè¯¥æ–¹æ³•å°†åœ¨$w_i$ä¹‹å‰<strong>æ’å…¥</strong>å•è¯$p_j$ã€‚ä»å€™é€‰åº“ä¸­é€‰æ‹©$p_j$ï¼Œå…¶ä¸­å€™é€‰è¯ï¼ˆcandidate wordsï¼‰æ˜¯åŒä¹‰è¯ã€é”™åˆ«å­—ï¼ˆtyposï¼‰å’Œç±»å‹ç‰¹å®šçš„å…³é”®å­—ï¼ˆgenre specific keywordsï¼‰ï¼ˆé€šè¿‡è¯é¢‘ï¼ˆterm frequencyï¼‰ç¡®å®šï¼‰ã€‚å¦‚æœæ’å…¥ç®—æ³•å°è¯•è¿‡çš„æ‰€æœ‰$p_j$éƒ½ä¸èƒ½ä»¤è¾“å‡ºçš„æˆæœ¬æ¢¯åº¦è¾¾åˆ°æœ€é«˜ï¼Œåˆ™æ”¾å¼ƒæ’å…¥ï¼Œè¯¥æ–¹æ³•å°†$w_i$<strong>æ›¿æ¢</strong>ä¸º$p_j$ã€‚</p><p>ç”±äºè¯¥æ–¹æ³•æŒ‰å•è¯çš„è´¡çŒ®ç­‰çº§å¯¹å•è¯è¿›è¡Œæ’åºï¼Œå¹¶æ ¹æ®é¡ºåºåˆ¶ä½œå¯¹æŠ—æ€§æ ·æœ¬ï¼Œå› æ­¤è¿™æ˜¯ä¸€ç§è´ªå©ªçš„æ–¹æ³•ï¼Œå§‹ç»ˆä¼šè·å¾—æœ€å°‘çš„æ“ä½œï¼Œç›´åˆ°è¾“å‡ºå˜åŒ–ä¸ºæ­¢ã€‚ä¸ºäº†é¿å…è¢«äººç±»æ„ŸçŸ¥ï¼Œä½œè€…é™åˆ¶äº†æ›¿æ¢/æ·»åŠ çš„å•è¯ï¼Œä»¥ä¸å½±å“åŸå§‹å•è¯çš„è¯­æ³•å’Œè¯æ€§ï¼ˆpart-of-Speech, POSï¼‰ã€‚</p><p>è™½ç„¶æ¶æ„è½¯ä»¶æ£€æµ‹ä¸æ˜¯å…¸å‹çš„æ–‡æœ¬åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬ä»å¯ä»¥å°†æ”»å‡»æ–‡æœ¬DNNçš„æ–¹æ³•åº”ç”¨äºæ”»å‡»æ¶æ„è½¯ä»¶æ£€æµ‹DNNã€‚åœ¨æ¶æ„è½¯ä»¶æ£€æµ‹ä¸­ï¼Œå¯ç§»æ¤å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆportable executable, PEï¼‰ç”¨äºŒå…ƒå‘é‡${x_1,\dots,x_m}$bè¡¨ç¤ºï¼Œå…¶ä¸­$x_i\in{0,1}$è¡¨ç¤ºPEæ˜¯å¦å­˜åœ¨ï¼Œ$m$æ˜¯PEä¸ªæ•°ã€‚</p><p>[3]çš„ä½œè€…ç ”ç©¶äº†ç”ŸæˆäºŒè¿›åˆ¶ç¼–ç çš„å¯¹æŠ—æ ·æœ¬çš„æ–¹æ³•ã€‚ä¸ºäº†ä¸æ”¹å˜å¯¹æŠ—æ ·æœ¬çš„åŠŸèƒ½ï¼Œä»–ä»¬ä½¿ç”¨äº†å››ç§é™åˆ¶æ–¹æ³•ï¼ˆbounding methodsï¼‰æ¥ç”Ÿæˆæ‰°åŠ¨ã€‚å‰ä¸¤ç§æ–¹æ³•ä¸ºFSGM$^k$ [67]ï¼Œå³FGSMçš„å¤šæ­¥æ”¹è¿›ç‰ˆï¼Œé€šè¿‡å¼•å…¥ç¡®å®šæ€§èˆå…¥ï¼ˆdFGSM$^k$ï¼‰å’Œéšæœºèˆå…¥ï¼ˆrFGSM$^k$ï¼‰æ¥é™åˆ¶äºŒè¿›åˆ¶åŸŸä¸­çš„æ‰°åŠ¨ï¼Œç±»ä¼¼äºå›¾åƒé¢†åŸŸçš„$L_{\infty}$çƒçº¦æŸ[40]ã€‚ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯å¤šæ­¥ä½æ¢¯åº¦ä¸Šå‡æ³•ï¼ˆmulti-step Bit Gradient Ascent, BGA$^k$ï¼‰ï¼Œå¦‚æœæŸå¤±å‡½æ•°çš„ç¬¬$j$åå¯¼æ•°å¤§äºæˆ–ç­‰äºæŸå¤±æ¢¯åº¦çš„$L_2$èŒƒæ•°é™¤ä»¥$\sqrt{m}$ï¼Œåˆ™è®¾ç½®å¯¹åº”ç¬¬$j$ä¸ªäºŒè¿›åˆ¶ä½ä¸º1ã€‚ç¬¬å››ç§æ–¹æ³•æ˜¯å¤šæ­¥ä½åæ ‡ä¸Šå‡æ³•ï¼ˆmulti-step Bit Coordinate Ascent, BCA$^k$ï¼‰ï¼Œé€šè¿‡è€ƒè™‘æŸå¤±å‡½æ•°çš„æœ€å¤§å¯¹åº”éƒ¨åˆ†å¯¼æ•°çš„ç‰¹å¾ï¼Œæ¯ä¸€æ­¥æ›´æ–°ä¸€ä¸ªä½ï¼ˆå¤ªéš¾ç¿»è¯‘äº†ï¼‰ã€‚è¯¥å·¥ä½œè¿˜æå‡ºäº†ä¸€ä¸ªå¯¹æŠ—å­¦ä¹ æ¡†æ¶ï¼Œæ—¨åœ¨å¢å¼ºæ¶æ„è½¯ä»¶æ£€æµ‹æ¨¡å‹çš„é²æ£’æ€§ã€‚</p><p>[114]æ”»å‡»æ¶æ„è½¯ä»¶æ£€æµ‹DNNï¼Œé€šè¿‡æ‰°åŠ¨äºŒè¿›åˆ¶åºåˆ—çš„åµŒå…¥è¡¨ç¤ºï¼Œå¹¶å°†æ‰°åŠ¨åçš„è¯åµŒå…¥åºåˆ—é‡å»ºä¸ºäºŒè¿›åˆ¶ã€‚å…·ä½“åœ°ï¼Œä»–ä»¬åœ¨åŸå§‹äºŒè¿›åˆ¶åºåˆ—åé™„åŠ äº†ä¸€ä¸ªç»Ÿä¸€çš„éšæœºå­—èŠ‚åºåˆ—ï¼ˆPayloadï¼‰ï¼Œå†å°†æ–°çš„äºŒè¿›åˆ¶é™„åŠ åˆ°åŸäºŒè¿›åˆ¶ç¨‹åºåµŒå…¥è¡¨ç¤ºä¸­ï¼Œå¹¶ä¸”æ‰§è¡ŒFGSMæ—¶åªæ›´æ–°Payloadéƒ¨åˆ†ã€‚åå¤æ‰§è¡Œæ‰°åŠ¨ï¼Œç›´åˆ°æ£€æµ‹å™¨è¾“å‡ºé”™è¯¯çš„é¢„æµ‹ä¸ºæ­¢ã€‚ç”±äºä»…å¯¹Payloadè€Œä¸æ˜¯å¯¹æ•´ä¸ªè¾“å…¥æ‰§è¡Œæ‰°åŠ¨ï¼Œå› æ­¤æ­¤æ–¹æ³•å°†ä¿ç•™æ¶æ„è½¯ä»¶çš„åŠŸèƒ½ã€‚æœ€åï¼Œä»–ä»¬é€šè¿‡å°†å¯¹æŠ—æ ·æœ¬çš„åµŒå…¥è¡¨ç¤ºåœ¨æœ‰æ•ˆåµŒå…¥ç©ºé—´ä¸­æ‰¾ä¸å…¶æœ€æ¥è¿‘çš„é‚»å±…ï¼Œå°†å…¶é‡æ„ä¸ºæœ‰æ•ˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p><p>AdvGen[23]æ˜¯ä¸€ç§åŸºäºæ¢¯åº¦çš„æ”»å‡»ç¥ç»æœºå™¨ç¿»è¯‘ï¼ˆNMTï¼‰æ¨¡å‹çš„æ–¹æ³•ã€‚é¦–å…ˆï¼Œå®ƒä¼šè€ƒè™‘æŸå¤±å‡½æ•°çš„æ¢¯åº¦ä»¥åŠä¸€ä¸ªå•è¯ä¸å…¶æ›¿æ¢å•è¯ï¼ˆå³å¯¹æŠ—æ€§å•è¯ï¼‰ä¹‹é—´çš„è·ç¦»ï¼Œä»è€Œç”Ÿæˆå¯¹æŠ—æ ·æœ¬ã€‚ç”¨è¯­è¨€æ¨¡å‹æ¥è¯†åˆ«ç»™å®šå•è¯çš„æœ€å¯èƒ½æ›¿æ¢å•è¯ï¼Œå› ä¸ºè¯­è¨€æ¨¡å‹å¯ä½¿å¯¹æŠ—æ ·æœ¬ä¿ç•™æ›´å¤šçš„è¯­ä¹‰ã€‚ç„¶åAdvGenå°†ç”Ÿæˆçš„å¯¹æŠ—æ ·æœ¬åˆå¹¶åˆ°NMTæ¨¡å‹çš„è§£ç å™¨ä¸­ä»¥é˜²å¾¡æ”»å‡»ã€‚</p><p>ä¸Šè¿°åŸºäºFGSMçš„ç®—æ³•éƒ½åˆ©ç”¨äº†æŸå¤±å‡½æ•°çš„æ¢¯åº¦ï¼Œä½†å¤§éƒ¨åˆ†ä½¿ç”¨æ¢¯åº¦æœ¬èº«è€Œä¸æ˜¯åƒFGSMé‚£æ ·ä½¿ç”¨æ¢¯åº¦çš„æ­£è´Ÿå·æˆ–é‡çº§ã€‚ä¹Ÿæœ‰è®¸å¤šç ”ç©¶ç›´æ¥é‡‡ç”¨FGSMè¿›è¡Œå¯¹æŠ—è®­ç»ƒï¼Œå³åœ¨è®­ç»ƒæ¨¡å‹æ—¶å°†å…¶ç”¨ä½œæ­£åˆ™åŒ–å·¥å…·ã€‚</p><h3 id="åŸºäºJSMAçš„æ”»å‡»"><a href="#åŸºäºJSMAçš„æ”»å‡»" class="headerlink" title="åŸºäºJSMAçš„æ”»å‡»"></a>åŸºäºJSMAçš„æ”»å‡»</h3><p>JSMAæˆ‘ä»¬<a href="#JSMA">å·²æœ‰è®¨è®º</a>ã€‚[103]ä½¿ç”¨æ­£å‘å¯¼æ•°ï¼ˆforward derivativeï¼‰ä½œä¸ºJSMAçŸ©é˜µæ¥æ‰¾åˆ°æœ€æœ‰åˆ©äºç”Ÿæˆå¯¹æŠ—æ ·æœ¬çš„æ–¹å‘ã€‚ç½‘ç»œçš„é›…å¯æ¯”è¡Œåˆ—å¼æ˜¯é€šè¿‡åˆ©ç”¨è®¡ç®—å›¾å±•å¼€æ¥è®¡ç®—çš„[96]ã€‚ä½œè€…é’ˆå¯¹ä¸¤ç§RNNæ¨¡å‹æ„å»ºäº†å¯¹æŠ—æ ·æœ¬ï¼Œè¢«æ”»å‡»çš„RNNæ¨¡å‹åˆ†åˆ«åº”ç”¨äºåˆ†ç±»ä»»åŠ¡å’Œåºåˆ—ç”Ÿæˆã€‚</p><p>å¯¹äºåˆ†ç±»RNNï¼Œè¾“å‡ºåˆ†é‡$j$å¯¹åº”çš„é›…å¯æ¯”çŸ©é˜µçš„ç¬¬$j$åˆ—ï¼Œå³$Jac_F[:,j]$ã€‚å¯¹äºæ¯ä¸ªå•è¯$i$ï¼Œæ‰°åŠ¨çš„æ–¹å‘å®šä¹‰ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{array}{l}\operatorname{sign}\left(\operatorname{Jac} b_{F}\left(x^{\prime}\right)\left[i, g\left(x^{\prime}\right)\right]\right), \\g\left(x^{\prime}\right)=\arg \max _{0,1}\left(p_{j}\right)\end{array}</script><p>$p_j$æ˜¯è¾“å‡ºå‘é‡ä¸­ç›®æ ‡ç±»çš„æ¦‚ç‡ï¼Œè¿™åœ¨JSMAä¸­æ˜¯logitè€Œä¸æ˜¯æ¦‚ç‡ã€‚ä½œè€…è¿˜å°†æ‰°åŠ¨åçš„æ ·æœ¬æŠ•å½±åˆ°åµŒå…¥ç©ºé—´ä¸­ï¼Œè·å¾—æœ€è¿‘çš„è¯åµŒå…¥å‘é‡</p><p>å¯¹äºåºåˆ—ç”ŸæˆRNNï¼Œè®¡ç®—å®Œé›…å¯æ¯”çŸ©é˜µåï¼Œå°†è¾“å…¥æ—¶é—´æ­¥$i$æ›´æ”¹ä¸ºé›…å¯æ¯”çŸ©é˜µä¸­çš„è¾ƒé«˜å€¼ï¼Œå°†è¾“å‡ºæ—¶é—´æ­¥$j$æ›´æ”¹ä¸ºé›…å¯æ¯”çŸ©é˜µä¸­çš„è¾ƒä½å€¼ã€‚</p><p>[43,44]æ˜¯é¦–é¡¹å¯¹æ¶æ„è½¯ä»¶æ£€æµ‹DNNè¿›è¡Œæ”»å‡»çš„å·¥ä½œã€‚ä½¿ç”¨äºŒè¿›åˆ¶æŒ‡ç¤ºå™¨ç‰¹å¾å‘é‡æ¥è¡¨ç¤ºåº”ç”¨ç¨‹åºï¼Œé€šè¿‡é‡‡ç”¨JSMAåœ¨è¾“å…¥ç‰¹å¾å‘é‡ä¸Šåˆ¶ä½œå¯¹æŠ—æ ·æœ¬ã€‚ä¸ºäº†ç¡®ä¿ç”±æ‰°åŠ¨å¼•èµ·çš„ä¿®æ”¹ä¸ä¼šå¯¹åº”ç”¨ç¨‹åºé€ æˆå¤ªå¤§å½±å“ï¼Œä»è€Œä½¿æ¶æ„è½¯ä»¶åº”ç”¨ç¨‹åºçš„åŠŸèƒ½ä¿æŒå®Œæ•´ï¼Œä½œè€…ä½¿ç”¨$L_1$èŒƒæ•°å°†åŠŸèƒ½æ€»æ•°é™åˆ¶ä¸º20ï¼Œæ›´æ”¹æ•°ç›®é™åˆ¶ä¸º20ã€‚</p><p>æ­¤å¤–ï¼Œä½œè€…æä¾›äº†ä¸‰ç§é˜²å¾¡æ”»å‡»çš„æ–¹æ³•ï¼Œå³ç‰¹å¾ç¼©å‡ï¼ˆfeature reductionï¼‰ï¼Œç²¾ç®€ï¼ˆdistillationï¼‰å’Œå¯¹æŠ—è®­ç»ƒï¼ˆadversarial trainingï¼‰ã€‚ä»–ä»¬å‘ç°å¯¹æŠ—è®­ç»ƒæ˜¯æœ€æœ‰æ•ˆçš„é˜²å¾¡æ–¹æ³•ã€‚</p><h3 id="åŸºäºC-amp-Wçš„æ”»å‡»æ–¹æ³•"><a href="#åŸºäºC-amp-Wçš„æ”»å‡»æ–¹æ³•" class="headerlink" title="åŸºäºC&amp;Wçš„æ”»å‡»æ–¹æ³•"></a>åŸºäºC&amp;Wçš„æ”»å‡»æ–¹æ³•</h3><p>C&amp;Wæˆ‘ä»¬<a href="#C_W">å·²æœ‰è®¨è®º</a>ã€‚</p><p>[130]ä¸­çš„å·¥ä½œé‡‡ç”¨Cï¼†Wæ–¹æ³•æ”»å‡»ç—…å†é¢„æµ‹æ¨¡å‹ï¼Œè¯¥æ¨¡å‹ç”¨äºæ£€æµ‹æ¯ä½æ‚£è€…çš„ç—…å†ä¸­çš„æ˜“æ„Ÿäº‹ä»¶å’Œæµ‹é‡ç»“æœï¼Œä¸ºä¸´åºŠä½¿ç”¨æä¾›æŒ‡å¯¼ã€‚è¯¥æ¨¡å‹ä½¿ç”¨LSTMã€‚</p><p>ç»™å®šç—…äººçš„ç—…å†æ•°æ®ä¸º$X^{i} \in \mathbf{R}^{d \times t_{i}}$ï¼Œå…¶ä¸­$d$æ˜¯æ¯æ¡æ•°æ®çš„ç‰¹å¾ä¸ªæ•°ï¼Œ$t_i$æ˜¯åŒ»ç–—æ£€æŸ¥çš„æ—¶é—´æŒ‡æ•°ã€‚å¯¹æŠ—æ ·æœ¬çš„ç”Ÿæˆå…¬å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\min _{\hat{X}} \max \left\{-\epsilon,\left[logit\left(\mathbf{x}^{\prime}\right)\right]_{y}-[logit(\mathbf{x})]_{y^{\prime}}\right\}+\lambda\left\|\mathbf{x}^{\prime}-\mathbf{x}\right\|_{1}</script><p>å…¶ä¸­$logit(\cdot)$è¡¨ç¤ºç½‘ç»œè¾“å‡ºçš„logitï¼Œ$\lambda$æ˜¯æ§åˆ¶æ­£åˆ™é¡¹å¤§å°çš„è¶…å‚æ•°ï¼Œ$y$å’Œ$yâ€™$åˆ†åˆ«æ˜¯åŸå§‹ç±»åˆ«å’Œçªå˜ç›®æ ‡ç±»åˆ«ã€‚ä½œè€…è¿˜ä»æ‰°åŠ¨å¹…åº¦å’Œæ”»å‡»çš„ç»“æ„ä¸¤ä¸ªè§’åº¦è¯„ä¼°äº†ç”Ÿæˆçš„å¯¹æŠ—æ ·æœ¬ã€‚æœ€åä½¿ç”¨å¯¹æŠ—æ ·æœ¬æ¥è®¡ç®—EHRçš„æ•æ„Ÿæ€§åˆ†æ•°ï¼ˆsusceptibility scoreï¼‰ä»¥åŠä¸åŒæµ‹é‡å€¼çš„ç´¯ç§¯æ•æ„Ÿæ€§åˆ†æ•°ï¼ˆcumulative susceptibility scoreï¼‰ã€‚</p><p>Seq2Sick [22]ä½¿ç”¨ä¸¤ç§å¸¦ç›®æ ‡æ”»å‡»æ–¹æ³•æ”»å‡»Seq2seqæ¨¡å‹ï¼šéé‡å æ”»å‡»ï¼ˆnon-overlapping attackï¼‰å’Œå…³é”®å­—æ”»å‡»ï¼ˆkeywords attackï¼‰ã€‚</p><p>éé‡å æ”»å‡»æ˜¯æŒ‡ç”Ÿæˆä¸åŸå§‹è¾“å‡ºå®Œå…¨ä¸åŒçš„å¯¹æŠ—åºåˆ—ã€‚ä½œè€…æå‡ºäº†ä¸€ç§ç±»ä¼¼äºé“°é“¾ï¼ˆhinge-likeï¼‰çš„æŸå¤±å‡½æ•°ï¼Œå¯ä»¥åœ¨ç¥ç»ç½‘ç»œçš„logitå±‚ä¸Šè¿›è¡Œä¼˜åŒ–ï¼š</p><script type="math/tex; mode=display">\sum_{i=1}^{|K|} \min _{t \in[M]}\left\{m_{t}\left(\max \left\{-\epsilon, \max _{y \neq k_{i}}\left\{z_{t}^{(y)}\right\}-z_{t}^{\left(k_{i}\right)}\right\}\right)\right\}</script><p>å…¶ä¸­$z_t$æ˜¯è¾“å…¥å¯¹æŠ—æ ·æœ¬åçš„æ¨¡å‹logitå±‚è¾“å‡ºã€‚</p><p>å…³é”®å­—æ”»å‡»æ˜¯æŒ‡æ”»å‡»æ¨¡å‹ï¼Œä½¿å¾—é¢„æœŸå…³é”®å­—å‡ºç°åœ¨è¾“å‡ºä¸­ã€‚ä½œè€…è¿˜æ˜¯å°†ä¼˜åŒ–æ”¾åœ¨äº†logitå±‚ä¸Šï¼Œå¹¶è¯•å›¾ç¡®ä¿ç›®æ ‡å…³é”®å­—çš„logitåœ¨æ‰€æœ‰å•è¯ä¸­æœ€å¤§ã€‚æ­¤å¤–ï¼Œä»–ä»¬å®šä¹‰äº†æ©ç å‡½æ•°mä»¥è§£å†³å…³é”®å­—å†²çªé—®é¢˜ã€‚æ·»åŠ æ©ç åçš„æŸå¤±å‡½æ•°ä¸ºï¼š</p><script type="math/tex; mode=display">L_{\text {keywords}}=\sum_{i=1}^{|K|} \min _{t \in[M]}\left\{m_{t}\left(\max \left\{-\epsilon, \max _{y \neq k_{i}}\left\{z_{t}^{(y)}\right\}-z_{t}^{\left(k_{i}\right)}\right\}\right)\right\}</script><p>å…¶ä¸­$k_i$è¡¨ç¤ºè¾“å‡ºå•è¯ä¸­çš„ç¬¬$i$ä¸ªå•è¯ã€‚ä¸ºäº†ç¡®ä¿ç”Ÿæˆçš„è¯åµŒå…¥å‘é‡æ˜¯æœ‰æ•ˆçš„ï¼Œä½œè€…è¿˜å¼•å…¥äº†ä¸¤ç§æ­£åˆ™åŒ–é¡¹ï¼šgroup lasso æ­£åˆ™åŒ–æ¥å¢å¼ºgroupç¨€ç–æ€§ï¼›group æ¢¯åº¦æ­£åˆ™åŒ–ä½¿å¯¹æŠ—æ ·æœ¬ä½äºæœ‰æ•ˆçš„åµŒå…¥ç©ºé—´èŒƒå›´å†…ã€‚</p><h3 id="åŸºäºæ–¹å‘ï¼ˆå¯¼æ•°ï¼‰çš„æ”»å‡»"><a href="#åŸºäºæ–¹å‘ï¼ˆå¯¼æ•°ï¼‰çš„æ”»å‡»" class="headerlink" title="åŸºäºæ–¹å‘ï¼ˆå¯¼æ•°ï¼‰çš„æ”»å‡»"></a>åŸºäºæ–¹å‘ï¼ˆå¯¼æ•°ï¼‰çš„æ”»å‡»</h3><p>HotFlip [30]æ‰§è¡ŒåŸå­ç¿»è½¬æ“ä½œä»¥ç”Ÿæˆå¯¹æŠ—æ ·æœ¬ã€‚HotFlipæ²¡æœ‰åˆ©ç”¨æŸå¤±å‡½æ•°çš„æ¢¯åº¦ï¼Œè€Œæ˜¯ä½¿ç”¨æ–¹å‘å¯¼æ•°ã€‚å…·ä½“è€Œè¨€ï¼ŒHotFlipå°†å­—ç¬¦çº§æ“ä½œï¼ˆå³äº¤æ¢ï¼Œæ’å…¥å’Œåˆ é™¤ï¼‰è¡¨ç¤ºä¸ºè¾“å…¥ç©ºé—´ä¸­çš„å‘é‡ï¼Œå¹¶é€šè¿‡é’ˆå¯¹è¿™äº›æ“ä½œå‘é‡çš„æ–¹å‘å¯¼æ•°æ¥ä¼°è®¡æŸå¤±çš„å˜åŒ–ã€‚å…·ä½“æ¥è¯´ï¼Œç»™å®šè¾“å…¥çš„One-Hotè¡¨ç¤ºï¼Œç¬¬iä¸ªå•è¯çš„ç¬¬jä¸ªå­—ç¬¦çš„å˜åŒ–ï¼ˆæ¯”å¦‚ä»aå˜åˆ°bï¼‰å¯ä»¥ç”±ä»¥ä¸‹å‘é‡è¡¨ç¤ºï¼š</p><script type="math/tex; mode=display">\vec{v}_{i j b}=\left(0, . . ;\left(0, . .(0, . .-1,0, . ., 1,0)_{j}, . .0\right)_{i} ; 0, . .\right),</script><p>å…¶ä¸­æœ€å†…å±‚å‘é‡$j$çš„å†…éƒ¨ï¼Œ-1çš„ä½ç½®åœ¨å­—æ¯è¡¨ä¸­ä¸ºaï¼Œ1çš„ä½ç½®åœ¨å­—æ¯è¡¨ä¸­ä¸ºbã€‚ç”¨è¿™ä¸ªå‘é‡æ¥æ¨¡æ‹Ÿæ“ä½œã€‚é‚£ä¹ˆå¯ä»¥é€šè¿‡æ²¿æ“ä½œçŸ¢é‡çš„æ–¹å‘å¯¼æ•°æœ€å¤§åŒ–æŸå¤±å˜åŒ–çš„ä¸€é˜¶è¿‘ä¼¼å€¼æ¥æ‰¾åˆ°æœ€ä½³çš„å­—ç¬¦äº¤æ¢ï¼š</p><script type="math/tex; mode=display">\max \nabla_{x} J(x, y)^{T} \cdot \vec{v}_{i j b}=\max _{i j v} \frac{\partial J^{(b)}}{\partial x_{i j}}-\frac{\partial J^{(a)}}{\partial x_{i j}}</script><p>å…¶ä¸­$J(x,y)$æ˜¯æ¨¡å‹çš„æŸå¤±å‡½æ•°ï¼Œè¾“å…¥ä¸º$x$ï¼ŒçœŸå®è¾“å‡ºä¸º$y$ã€‚è¿™ä¸ªæ–¹æ³•ä¸ä»…å¯ä»¥è¡¨ç¤ºå­—ç¬¦æ›¿æ¢ï¼Œè¿˜å¯ä»¥è¡¨ç¤ºæ’å…¥å’Œåˆ é™¤å­—ç¬¦ã€‚åœ¨ç¬¬iä¸ªå­—çš„ç¬¬jä¸ªä½ç½®æ’å…¥ä¹Ÿå¯ä»¥å½“ä½œä¸€ä¸ªå­—ç¬¦ç¿»è½¬ï¼Œç„¶åå†è¿›è¡Œæ›´å¤šçš„ç¿»è½¬ï¼Œå› ä¸ºå­—ç¬¦æ˜¯å‘å³ç§»ä½çš„ï¼Œç›´åˆ°å­—çš„æœ«å°¾ã€‚å­—ç¬¦åˆ é™¤åˆ™æ˜¯å¤šæ¬¡å­—ç¬¦ç¿»è½¬ï¼Œå› ä¸ºå­—ç¬¦æ˜¯å‘å·¦ç§»ä½çš„ã€‚åˆ©ç”¨é›†æŸæœç´¢ï¼ˆBeam Searchï¼‰ï¼ŒHotFlipå¯ä»¥æœ‰æ•ˆåœ°æ‰¾åˆ°å¤šæ¬¡ç¿»è½¬çš„æœ€ä½³æ–¹å‘ã€‚</p><p>[29]æ‰©å±•äº†HotFlipçš„åŠŸèƒ½ï¼Œä½¿å…¶å¯ä»¥è¿›è¡Œç›®æ ‡æ”»å‡»ã€‚é™¤äº†HotFlipä¸­æä¾›çš„äº¤æ¢ï¼Œæ’å…¥å’Œåˆ é™¤åŠŸèƒ½å¤–ï¼Œä½œè€…è¿˜æå‡ºäº†å—æ§æ”»å‡»ï¼ˆcontrolled attackï¼‰ï¼šä½¿è¾“å‡ºåºåˆ—ä¸­ç‰¹å®šå•è¯æ¶ˆå¤±çš„æ–¹æ³•ï¼Œä»¥åŠç›®æ ‡æ”»å‡»ï¼ˆtargeted attackï¼‰ï¼šä»¥é¢„è®¡çš„å•è¯æ›¿æ¢è¾“å‡ºåºåˆ—ä¸­çš„ç‰¹å®šå•è¯ã€‚ä¸ºäº†å®ç°è¿™äº›æ”»å‡»ï¼Œä»–ä»¬ä½¿æŸå¤±å‡½æ•°$J (x,y_t )$æœ€å¤§åŒ–ï¼Œå¹¶ä½¿$J (x,y^{â€²}_t )$æœ€å°åŒ–ï¼Œå…¶ä¸­$t$æ˜¯å—æ§æ”»å‡»çš„ç›®æ ‡è¯ï¼Œ$tâ€²$æ˜¯æ›¿æ¢$t$çš„è¯ã€‚</p><p>æ­¤å¤–ï¼Œä»–ä»¬è¿˜æå‡ºäº†ä¸‰ç§ç±»å‹çš„æ”»å‡»ï¼Œæä¾›å¤šç§æ–‡æœ¬ä¿®æ”¹æ–¹æ³•ã€‚åœ¨one-hotæ”»å‡»ä¸­ï¼Œä»–ä»¬å¯¹æ–‡æœ¬ä¸­çš„æ‰€æœ‰è¯è¿›è¡Œäº†æœ€ä¼˜æ“ä½œã€‚åœ¨Greedyæ”»å‡»ä¸­ï¼Œä»–ä»¬é™¤äº†ä»æ•´ä¸ªæ–‡æœ¬ä¸­æŒ‘é€‰å‡ºæœ€ä½³æ“ä½œå¤–ï¼Œè¿˜è¿›è¡Œäº†å¦ä¸€æ¬¡å‘å‰å’Œå‘åçš„ä¼ é€’ã€‚åœ¨æ³¢æŸæœç´¢æ”»å‡»ä¸­ï¼Œä»–ä»¬ç”¨æ³¢æŸæœç´¢ä»£æ›¿äº†greedyä¸­çš„æœç´¢æ–¹æ³•ã€‚åœ¨æœ¬ä½œæå‡ºçš„æ‰€æœ‰æ”»å‡»ä¸­ï¼Œä½œè€…éƒ½è®¾ç½®äº†æœ€å¤§ä¿®æ”¹æ¬¡æ•°çš„é˜ˆå€¼ï¼Œä¾‹å¦‚ï¼Œå…è®¸20%çš„å­—ç¬¦è¢«ä¿®æ”¹ã€‚</p><h3 id="åŸºäºæ³¨æ„åŠ›çš„æ”»å‡»"><a href="#åŸºäºæ³¨æ„åŠ›çš„æ”»å‡»" class="headerlink" title="åŸºäºæ³¨æ„åŠ›çš„æ”»å‡»"></a>åŸºäºæ³¨æ„åŠ›çš„æ”»å‡»</h3><p><span id="ref14" style.display="none"></span><br>[14]çš„ä½œè€…ä¸ºäº†æ¯”è¾ƒCNNä¸RNNçš„é²æ£’æ€§ï¼Œæå‡ºäº†ä¸¤ç§ç™½ç›’æ”»å‡»ã€‚ä»–ä»¬åˆ©ç”¨æ¨¡å‹çš„å†…éƒ¨æ³¨æ„åŠ›åˆ†å¸ƒæ¥å¯»æ‰¾å…³é”®å¥å­ï¼Œæ¨¡å‹èµ‹äºˆè¯¥å¥å­è¾ƒå¤§çš„æƒé‡ï¼Œä»è€Œå¾—å‡ºæ­£ç¡®ç­”æ¡ˆã€‚ç„¶åï¼Œä»–ä»¬å°†è·å¾—æ³¨æ„åŠ›æœ€é«˜çš„è¯ä¸å·²çŸ¥è¯æ±‡ä¸­éšæœºé€‰æ‹©çš„è¯è¿›è¡Œäº¤æ¢ã€‚ä»–ä»¬è¿˜è¿›è¡Œäº†å¦ä¸€ç§ç™½ç›’æ”»å‡»ï¼Œå°†è·å¾—æœ€é«˜æ³¨æ„åŠ›çš„æ•´å¥å»æ‰ã€‚è™½ç„¶ä»–ä»¬å…³æ³¨çš„æ˜¯åŸºäºæ³¨æ„åŠ›çš„æ¨¡å‹ï¼Œä½†ä»–ä»¬çš„æ”»å‡»å¹¶æ²¡æœ‰ç ”ç©¶æ³¨æ„åŠ›æœºåˆ¶æœ¬èº«ï¼Œè€Œæ˜¯ä»…ä»…åˆ©ç”¨äº†æ³¨æ„åŠ›éƒ¨åˆ†çš„è¾“å‡ºï¼ˆå³æ³¨æ„åŠ›å¾—åˆ†ï¼‰ã€‚</p><h3 id="åŸºäºé‡ç¼–ç¨‹çš„æ”»å‡»"><a href="#åŸºäºé‡ç¼–ç¨‹çš„æ”»å‡»" class="headerlink" title="åŸºäºé‡ç¼–ç¨‹çš„æ”»å‡»"></a>åŸºäºé‡ç¼–ç¨‹çš„æ”»å‡»</h3><p><span id="Reprogramming" style.display="none"></span><br>[97]é‡‡ç”¨å¯¹æŠ—é‡ç¼–ç¨‹ï¼ˆadversarial reprogramming, APï¼‰æ¥æ”»å‡»åºåˆ—ç¥ç»åˆ†ç±»å™¨ã€‚è®­ç»ƒä¸€ä¸ªå¯¹æŠ—é‡ç¼–ç¨‹å‡½æ•°$g<em>{\theta}$ï¼Œåœ¨ä¸ä¿®æ”¹DNNå‚æ•°çš„æƒ…å†µä¸‹ï¼Œå°†è¢«æ”»å‡»çš„DNNé‡æ–°ç”¨äºæ‰§è¡Œå¦ä¸€ä¸ªä»»åŠ¡ï¼ˆå¦‚é—®é¢˜åˆ†ç±»åˆ°åç§°åˆ†ç±»ï¼‰ã€‚APé‡‡ç”¨è¿ç§»å­¦ä¹ çš„æ€æƒ³ï¼Œä½†ä¿æŒå‚æ•°ä¸å˜ã€‚åœ¨ç™½ç›’æ”»å‡»ä¸­ï¼Œä½œè€…åº”ç”¨Gumbel-Softmaxæ¥è®­ç»ƒå¯ä»¥åœ¨ç¦»æ•£æ•°æ®ä¸Šå·¥ä½œçš„$g</em>{\theta}$ã€‚ä½œè€…åœ¨å„ç§æ–‡æœ¬åˆ†ç±»ä»»åŠ¡ä¸Šè¯„ä¼°äº†ä»–ä»¬çš„æ–¹æ³•ï¼Œå¹¶è¯å®äº†ä»–ä»¬æ–¹æ³•çš„æœ‰æ•ˆæ€§ã€‚</p><h3 id="æ··åˆæ–¹æ³•"><a href="#æ··åˆæ–¹æ³•" class="headerlink" title="æ··åˆæ–¹æ³•"></a>æ··åˆæ–¹æ³•</h3><p>[38]é’ˆå¯¹CNNæ¨¡å‹ï¼Œåº”ç”¨FGSMå’ŒDeepFoolå¯¹è¾“å…¥æ–‡æœ¬çš„è¯åµŒå…¥è¿›è¡Œæ‰°åŠ¨ã€‚ä½œè€…é€šè¿‡ä½¿ç”¨è¯ç§»åŠ¨è·ç¦»ï¼ˆWord Moverâ€™s Distanceï¼ŒWMDï¼‰ä½œä¸ºè·ç¦»æµ‹é‡ï¼Œå°†å¯¹æŠ—æ ·æœ¬èˆå…¥ï¼ˆRoundedï¼‰åˆ°æœ€è¿‘çš„æœ‰æ„ä¹‰çš„è¯å‘é‡ã€‚åœ¨æƒ…æ„Ÿåˆ†æå’Œæ–‡æœ¬åˆ†ç±»æ•°æ®é›†ä¸Šçš„è¯„ä¼°è¡¨æ˜ï¼ŒWMDæ˜¯æ§åˆ¶æ‰°åŠ¨çš„åˆæ ¼åº¦é‡ã€‚</p><h3 id="ç™½ç›’æ”»å‡»æ€»ç»“"><a href="#ç™½ç›’æ”»å‡»æ€»ç»“" class="headerlink" title="ç™½ç›’æ”»å‡»æ€»ç»“"></a><strong>ç™½ç›’æ”»å‡»æ€»ç»“</strong></h3><p><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Adversarial-Attacks-on-Deep-Learning-Models-in-Natural-Language-Processing-A-Survey/white_box_attack_methods_table.png" alt></p><h2 id="é»‘ç›’æ”»å‡»"><a href="#é»‘ç›’æ”»å‡»" class="headerlink" title="é»‘ç›’æ”»å‡»"></a>é»‘ç›’æ”»å‡»</h2><p>é»‘ç›’æ”»å‡»ä¸èƒ½è·å¾—ç¥ç»ç½‘ç»œå†…éƒ¨ä¿¡æ¯ï¼Œä½†æ˜¯å¯ä»¥è·å¾—è¾“å…¥å’Œè¾“å‡ºã€‚è¿™ç§æ”»å‡»æ–¹æ³•ç»å¸¸ä¾é å¯å‘å¼ç®—æ³•ç”Ÿæˆå¯¹æŠ—æ ·æœ¬ã€‚é‰´äºç°å®ç”Ÿæ´»ä¸­ä¸èƒ½è·å¾—æ¨¡å‹ä¿¡æ¯ï¼Œå› æ­¤é»‘ç›’æ”»å‡»å¾€å¾€æ›´åŠ å®ç”¨ã€‚æœ¬æ–‡å°†æ–‡æœ¬é¢†åŸŸçš„é»‘ç›’æ”»å‡»åˆ†æˆäº”ç±»ã€‚</p><h3 id="è¿è¯å¯¹æŠ—å™¨"><a href="#è¿è¯å¯¹æŠ—å™¨" class="headerlink" title="è¿è¯å¯¹æŠ—å™¨"></a>è¿è¯å¯¹æŠ—å™¨</h3><p>[54]æ˜¯ç¬¬ä¸€ä¸ªæ”»å‡»é˜…è¯»ç†è§£ç³»ç»Ÿçš„ç ”ç©¶ã€‚ä½œè€…æå‡ºäº†è¿è¯å¯¹æŠ—å™¨ï¼ˆconcatenation adversariesï¼‰ï¼Œå³åœ¨æ®µè½æœ«å°¾é™„åŠ ä¸€äº›æ— æ„ä¹‰çš„å¥å­ã€‚è¿™äº›åˆ†æ•£ç½‘ç»œç²¾åŠ›çš„å¥å­ä¸ä¼šæ”¹å˜æ®µè½çš„è¯­ä¹‰å’ŒGround Truthï¼Œä½†ä¼šæ¬ºéª—ç¥ç»æ¨¡å‹ã€‚åˆ†å¿ƒå¥å­è¦ä¹ˆæ˜¯ç²¾å¿ƒç”Ÿæˆçš„ä¿¡æ¯å¥å­ï¼Œè¦ä¹ˆæ˜¯ä»å¸¸ç”¨è¯æ± éšæœºå–20ä¸ªä»¥å¹¶ä»»æ„è¯åºæ„å»ºçš„å¥å­ã€‚</p><p>è¿™ä¸¤ç§æ‰°åŠ¨éƒ½æ˜¯é€šè¿‡è¿­ä»£æŸ¥è¯¢ç¥ç»ç½‘ç»œè·å¾—çš„ï¼Œç›´åˆ°è¾“å‡ºå‘ç”Ÿå˜åŒ–ã€‚</p><p>å›¾2è¯´æ˜äº†å‚è€ƒæ–‡çŒ®[54]ä¸­çš„ä¸€ä¸ªä¾‹å­ï¼ŒåŠ å…¥å¹²æ‰°å¥ï¼ˆè“è‰²ï¼‰åï¼Œç­”æ¡ˆä»æ­£ç¡®çš„ï¼ˆç»¿è‰²ï¼‰å˜ä¸ºä¸æ­£ç¡®çš„ï¼ˆçº¢è‰²ï¼‰ã€‚</p><p><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Adversarial-Attacks-on-Deep-Learning-Models-in-Natural-Language-Processing-A-Survey/fig_2.png" alt></p><p>[142]çš„ä½œè€…é€šè¿‡æ”¹å˜åˆ†å¿ƒå¥å­æ”¾ç½®çš„ä½ç½®ï¼Œä»¥åŠæ‰©å¤§ç”Ÿæˆåˆ†å¿ƒå¥å­çš„å‡ç­”æ¡ˆé›†ï¼Œæ”¹è¿›äº†è¿™é¡¹å·¥ä½œï¼Œå‘ˆç°äº†æ–°çš„å¯¹æŠ—æ ·æœ¬ï¼Œæœ‰åŠ©äºè®­ç»ƒæ›´å¥å£®çš„ç¥ç»æ¨¡å‹ã€‚</p><p>[14]åˆ©ç”¨åˆ†å¿ƒå¥å­æ¥è¯„ä¼°å…¶é˜…è¯»ç†è§£æ¨¡å‹çš„é²æ£’æ€§ã€‚ä»–ä»¬ä»å¸¸ç”¨è¯æ± ä¸­ä½¿ç”¨éšæœºçš„10ä¸ªè¯ï¼Œç»“åˆæ‰€æœ‰é—®é¢˜è¯å’Œæ‰€æœ‰é”™è¯¯ç­”æ¡ˆå€™é€‰çš„è¯æ¥ç”Ÿæˆåˆ†å¿ƒçš„å¥å­ã€‚ä½œè€…è¿˜é€šè¿‡åŒä¹‰è¯æ›¿æ¢æœ€å¸¸å‡ºç°çš„è¯ï¼Œè¿›è¡Œç®€å•çš„è¯çº§é»‘ç›’æ”»å‡»ã€‚ä½œè€…è¿˜æä¾›äº†ä¸¤ç§<a href="#ref14">ç™½ç›’ç­–ç•¥</a>ã€‚</p><p>å›¾3è¯´æ˜äº†è¿è¯æ”»å‡»çš„ä¸€èˆ¬å·¥ä½œæµç¨‹ã€‚</p><p><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Adversarial-Attacks-on-Deep-Learning-Models-in-Natural-Language-Processing-A-Survey/fig_3.png" alt></p><p>æ­£ç¡®çš„è¾“å‡º(å³MRCä»»åŠ¡ä¸­çš„ç­”æ¡ˆ)é€šå¸¸è¢«åˆ©ç”¨æ¥ç”Ÿæˆæ‰­æ›²çš„è¾“å‡ºï¼Œç¨åè¿™äº›è¾“å‡ºå°†è¢«ç”¨æ¥æ„å»ºåˆ†æ•£æ³¨æ„åŠ›çš„å†…å®¹ã€‚å°†åˆ†å¿ƒå†…å®¹é™„åŠ åˆ°åŸå§‹æ®µè½ä¸­ï¼Œå½¢æˆè¢«æ”»å‡»çš„DNNçš„å¯¹æŠ—æ€§è¾“å…¥ã€‚åˆ†å¿ƒçš„å†…å®¹ä¸ä¼šåˆ†æ•£äººç±»å’Œç†æƒ³DNNçš„æ³¨æ„åŠ›ï¼Œä½†ä¼šä½¿æ˜“å—æ”»å‡»çš„DNNäº§ç”Ÿé”™è¯¯çš„è¾“å‡ºã€‚</p><h3 id="ç¼–è¾‘å¯¹æŠ—å™¨"><a href="#ç¼–è¾‘å¯¹æŠ—å™¨" class="headerlink" title="ç¼–è¾‘å¯¹æŠ—å™¨"></a>ç¼–è¾‘å¯¹æŠ—å™¨</h3><p>[12]ä¸­çš„å·¥ä½œå¯¹ç¥ç»æœºå™¨ç¿»è¯‘åº”ç”¨çš„è¾“å…¥æ•°æ®è¿›è¡Œäº†ä¸¤ç§æ–¹å¼çš„æ‰°åŠ¨ã€‚<strong>åˆæˆ</strong>(Synthetic)ï¼Œå³è¿›è¡Œå­—ç¬¦é¡ºåºçš„æ”¹å˜ï¼Œå¦‚äº¤æ¢ã€ä¸­é—´éšæœºï¼ˆå³éšæœºæ”¹å˜é™¤é¦–å°¾å­—ç¬¦ä»¥å¤–çš„å­—ç¬¦é¡ºåºï¼‰ã€å®Œå…¨éšæœºï¼ˆå³éšæœºæ”¹å˜æ‰€æœ‰å­—ç¬¦çš„é¡ºåºï¼‰å’Œé”®ç›˜ç±»å‹ï¼ˆkeyboard typeï¼‰ã€‚ä»–ä»¬è¿˜æ”¶é›†äº†è‡ªç„¶ç”Ÿæˆçš„æ‹¼å†™é”™è¯¯ï¼ˆtyposï¼‰å’Œé”™åˆ«å­—ï¼ˆmisspellingsï¼‰ä½œä¸ºå¯¹æŠ—å•å…ƒï¼ˆadversariesï¼‰ã€‚</p><p>[98]çš„ä½œè€…è¿˜æ”»å‡»äº†ç”¨äºå¯¹è¯ç”Ÿæˆçš„ç¥ç»æ¨¡å‹ã€‚ä»–ä»¬åœ¨å¯¹è¯è¯­å¢ƒä¸­åº”ç”¨äº†å„ç§æ‰°åŠ¨ï¼Œå³Random Swapï¼ˆéšæœºè½¬ç½®ç›¸é‚»çš„æ ‡è®°ï¼‰å’ŒStopword Dropoutï¼ˆéšæœºåˆ é™¤åœé¡¿è¯ï¼‰ã€Paraphrasingï¼ˆç”¨å…¶è½¬è¿°æ›¿æ¢å•è¯ï¼‰ã€è¯­æ³•é”™è¯¯ï¼ˆå¦‚å°†åŠ¨è¯æ”¹æˆé”™è¯¯çš„æ—¶æ€ï¼‰ï¼Œä»¥åŠæ·»åŠ å¦å®šç­–ç•¥ï¼ˆå¦å®šæºè¾“å…¥çš„åŠ¨è¯æ ¹ï¼‰å’Œåä¹‰è¯ç­–ç•¥ï¼ˆå°†åŠ¨è¯ã€å½¢å®¹è¯æˆ–å‰¯è¯æ”¹æˆå…¶åä¹‰è¯ï¼‰ã€‚</p><p>DeepWordBug[34]ä½¿ç”¨å­—ç¬¦è½¬æ¢æ¥ç”Ÿæˆå¯¹æŠ—æ ·æœ¬ã€‚é¦–å…ˆç¡®å®šäº†é‡è¦çš„â€œæ ‡è®°ï¼ˆtokenï¼‰â€ï¼Œå³ç»™æ¨¡å‹è¾“å‡ºé€ æˆå¤§é‡å½±å“çš„é‚£äº›å•è¯æˆ–å­—ç¬¦ï¼Œå½±å“ç¨‹åº¦ä¾èµ–ä¸€ä¸ªè¯„ä»·å‡½æ•°ï¼Œè¾“å…¥æ¨¡å‹çš„è¾“å‡ºå‘é‡ï¼Œè¾“å‡ºè¯„åˆ†ã€‚ç„¶åä¿®æ”¹è¿™äº›tokenï¼ŒåŒ…æ‹¬æ›¿æ¢ã€åˆ é™¤ã€æ·»åŠ å’Œäº¤æ¢å››ç§ç­–ç•¥ã€‚ä½œè€…åœ¨å„ç§NLPä»»åŠ¡ä¸Šè¯„ä¼°äº†ä»–ä»¬çš„æ–¹æ³•ï¼Œä¾‹å¦‚ï¼Œæ–‡æœ¬åˆ†ç±»ã€æƒ…æ„Ÿåˆ†æå’Œåƒåœ¾é‚®ä»¶æ£€æµ‹ã€‚</p><p>[73]ä¸­çš„å·¥ä½œå®Œå–„äº†[34]ä¸­çš„è¯„åˆ†å‡½æ•°ã€‚æ­¤å¤–è¿™é¡¹å·¥ä½œè¿˜æœ‰é‡‡ç”¨äº†JSMAçš„ç™½ç›’æ”»å‡»ç‰ˆæœ¬ã€‚é€šè¿‡ä½¿ç”¨å››ç§æ–‡æœ¬ç›¸ä¼¼æ€§æµ‹é‡æ–¹æ³•è¿›è¡Œæ‰°åŠ¨é™åˆ¶ï¼šæ–‡æœ¬çš„ç¼–è¾‘è·ç¦»ï¼›Jaccardç›¸ä¼¼æ€§ç³»æ•°ï¼›è¯å‘é‡çš„æ¬§æ°è·ç¦»ï¼›è¯åµŒå…¥çš„ä½™å¼¦ç›¸ä¼¼æ€§ã€‚ä»–ä»¬çš„æ–¹æ³•åªåœ¨æƒ…æ„Ÿåˆ†æä»»åŠ¡ä¸Šè¿›è¡Œäº†è¯„ä¼°ã€‚å›¾4æ˜¯å‚è€ƒæ–‡çŒ®[73]ä¸­çš„ä¸€ä¸ªç¼–è¾‘å¯¹æŠ—çš„ä¾‹å­ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåªæœ‰å°‘æ•°çš„ç¼–è¾‘æ“ä½œä¼šè¯¯å¯¼åˆ†ç±»å™¨ç»™å‡ºé”™è¯¯çš„é¢„æµ‹ã€‚</p><p><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Adversarial-Attacks-on-Deep-Learning-Models-in-Natural-Language-Processing-A-Survey/fig_4.png" alt></p><p>[110]æ”»å‡»æ–‡æœ¬åˆ†ç±»æ¨¡å‹æä¾›äº†ä¸€ç§æ¦‚ç‡æ–¹æ³•æ¥é€‰æ‹©è¦æ›¿æ¢çš„è¯ã€‚é¦–å…ˆæ”¶é›†ç°æœ‰è¯­æ–™åº“ä¸­è¯¥è¯çš„æ‰€æœ‰åŒä¹‰è¯ï¼Œç„¶åé€šè¿‡æµ‹é‡å…¶å¯¹åˆ†ç±»æ¦‚ç‡çš„å½±å“ï¼Œä»åŒä¹‰è¯ä¸­é€‰æ‹©ä¸€ä¸ªæ‹Ÿæ›¿ä»£è¯ï¼ˆproposed substitute wordsï¼‰ã€‚å¯¼è‡´æ¨¡å‹åˆ†ç±»æ¦‚ç‡å‘ç”Ÿæœ€æ˜¾è‘—å˜åŒ–çš„è¯å°†è¢«é€‰ä¸­ã€‚ä½œè€…è¿˜ç»“åˆè¯çš„æ˜¾è‘—æ€§æ¥ç¡®å®šæ›¿æ¢é¡ºåºã€‚è¯æ˜¾è‘—æ€§ï¼ˆword saliencyï¼‰æ˜¯æŒ‡å¦‚æœå°†ä¸€ä¸ªè¯è®¾ç½®ä¸ºæœªçŸ¥ï¼Œè¾“å‡ºåˆ†ç±»æ¦‚ç‡çš„å˜åŒ–ç¨‹åº¦ã€‚</p><p>[91]çš„ä½œè€…æå‡ºäº†ä¸€ç§åœ¨è‡ªç„¶è¯­è¨€æ¨ç†ï¼ˆNLIï¼‰ä¸­è‡ªåŠ¨ç”Ÿæˆè¿åä¸€ç»„ç»™å®šä¸€é˜¶é€»è¾‘çº¦æŸçš„å¯¹æŠ—æ ·æœ¬çš„æ–¹æ³•ã€‚ä»–ä»¬æå‡ºäº†ä¸€ä¸ªä¸ä¸€è‡´æ€§æŸå¤±ï¼ˆinconsistency lossï¼‰æ¥è¡¡é‡ä¸€ç»„å¥å­å¯¼è‡´æ¨¡å‹è¿åè§„åˆ™çš„ç¨‹åº¦ã€‚å¯¹æŠ—æ ·æœ¬ç”Ÿæˆçš„è¿‡ç¨‹æ˜¯å¯»æ‰¾è§„åˆ™ä¸­å˜é‡ä¸å¥å­ä¹‹é—´çš„æ˜ å°„ï¼Œä½¿ä¸ä¸€è‡´æ€§æŸå¤±æœ€å¤§åŒ–çš„è¿‡ç¨‹ã€‚è¿™äº›å¥å­æ˜¯ç”±ä½å›°æƒ‘åº¦ï¼ˆç”±è¯­è¨€æ¨¡å‹å®šä¹‰ï¼‰çš„å¥å­ç»„æˆã€‚ä¸ºäº†ç”Ÿæˆä½å›°æƒ‘æ€§çš„å¯¹æŠ—å¥æ ·æœ¬ï¼Œä»–ä»¬ä½¿ç”¨äº†ä¸‰ç§ç¼–è¾‘æ‰°åŠ¨ã€‚(i)æ”¹å˜å…¶ä¸­ä¸€ä¸ªè¾“å…¥å¥ä¸­çš„ä¸€ä¸ªè¯ï¼›(ii)ä»å…¶ä¸­ä¸€ä¸ªè¾“å…¥å¥ä¸­åˆ é™¤ä¸€ä¸ªè§£æå­æ ‘ï¼ˆparse subtreeï¼‰ï¼›(iii)å°†è¯­æ–™åº“ä¸­ä¸€ä¸ªå¥å­çš„ä¸€ä¸ªè§£æå­æ ‘æ’å…¥åˆ°å¦ä¸€ä¸ªå¥å­çš„è§£ææ ‘ï¼ˆparse treeï¼‰ä¸­ã€‚</p><p>[5]ä¸­çš„å·¥ä½œé‡‡ç”¨é—ä¼ ç®—æ³•(GA)ç”Ÿæˆå¯¹æŠ—æ ·æœ¬ï¼Œèƒ½å¤Ÿä½¿å¾—åŸæ–‡ä¸­æœ€å°åŒ–å•è¯æ›¿æ¢çš„æ•°é‡åŒæ—¶å¯ä»¥è®©è¢«æ”»å‡»æ¨¡å‹çš„ç»“æœå‘ç”Ÿæ”¹å˜ã€‚ä½œè€…é‡‡ç”¨äº†GAä¸­çš„äº¤å‰å’Œçªå˜æ“ä½œæ¥äº§ç”Ÿæ‰°åŠ¨ã€‚ä»–ä»¬æµ‹é‡äº†å•è¯æ›¿æ¢çš„æœ‰æ•ˆæ€§ï¼Œä»¥è¡¡é‡å¯¹è¢«æ”»å‡»DNNsçš„å½±å“ã€‚ä»–ä»¬çš„æ”»å‡»ä¸»è¦é›†ä¸­åœ¨æƒ…æ„Ÿåˆ†æå’Œæ–‡æœ¬è•´å«ï¼ˆtextual entailmentï¼‰DNNsä¸Šã€‚</p><p>[19]æå‡ºäº†ä¸€ç§å¯¹å¯åˆ†åŒ–ç¥ç»è®¡ç®—æœºï¼ˆDifferentiable Neural Computer, DNCï¼‰è¿›è¡Œå¯¹æŠ—æ€§æ”»å‡»çš„æ¡†æ¶å·¥ä½œã€‚DNCæ˜¯ä¸€ç§ä»¥DNNä¸ºä¸­å¤®æ§åˆ¶å™¨çš„è®¡ç®—æœºï¼Œè¿è¡Œåœ¨å¤–éƒ¨å†…å­˜æ¨¡å—ä¸Šï¼Œæ‰§è¡Œæ•°æ®å¤„ç†æ“ä½œã€‚ä»–ä»¬ä½¿ç”¨ä¸¤ç§è‡ªåŠ¨åŒ–ä¸”å¯æ‰©å±•çš„ç­–ç•¥ï¼Œç”Ÿæˆè¯­æ³•æ­£ç¡®çš„å¯¹æŠ—æ ·æœ¬ï¼Œä¾›é—®ç­”é¢†åŸŸä½¿ç”¨ã€‚ä»–ä»¬è¿˜ä½¿ç”¨äº†èœ•å˜å˜æ¢ï¼ˆmetamorphic transformationï¼‰ã€‚ç¬¬ä¸€ä¸ªç­–ç•¥ï¼šPick-n-Plugï¼Œç”±ä¸€ä¸ªPickæ“ä½œç¬¦å’ŒPlugæ“ä½œç¬¦ç»„æˆï¼Œpickæ“ä½œç¬¦ä»æºä»»åŠ¡åŸŸä¸­é€‰æ‹©ä¸€å¥ä½œä¸ºå¯¹æŠ—æ€§æ’å…¥ï¼Œplugæ“ä½œç¬¦å°†è¿™äº›å¥å­æ³¨å…¥åˆ°å¦ä¸€ä¸ªç›®æ ‡ä»»åŠ¡ä¸­ï¼Œæ²¡æœ‰æ”¹å˜å¥å­çš„Ground Truthã€‚å¦ä¸€ä¸ªç­–ç•¥æ˜¯Pick-Permute-Plugï¼Œåœ¨ä»æºä»»åŠ¡ä¸­æŠ½å–å¥å­åå¢åŠ ä¸€ä¸ªpermuteæ“ä½œç¬¦ï¼Œæ‰©å±•äº†Pick-n-Plugç”Ÿæˆå¯¹æŠ—æ ·æœ¬çš„èƒ½åŠ›ã€‚Permuteæ“ä½œçš„å…·ä½“åšæ³•æ˜¯å°†ç‰¹å®šå¯¹æŠ—æ ·æœ¬ä¸­çš„å•è¯è¿›è¡Œå…¶åŒä¹‰è¯æ›¿æ¢ï¼Œä»¥äº§ç”Ÿæ›´å¤§èŒƒå›´çš„æ”»å‡»ã€‚</p><p>[155]æå‡ºäº†ä¸€ç§åŸºäºç¼–è¾‘çš„æ–¹æ³•MHAï¼ˆMetropolis-Hastings Attackï¼‰ï¼Œæ—¨åœ¨æä¾›æµç•…æœ‰æ•ˆçš„å¯¹æŠ—æ€§æ”»å‡»ã€‚MHAåŸºäºè¯­è¨€æ¨¡å‹å’ŒMetropolisHastingsï¼ˆM-Hï¼‰é‡‡æ ·ã€‚ä½œè€…ä½¿ç”¨M-Hé‡‡æ ·æ¥ç”Ÿæˆæ›¿æ¢æ—§è¯çš„è¯ï¼ˆç”¨äºæ›¿æ¢æ“ä½œï¼‰å’Œéšæœºè¯ï¼ˆç”¨äºæ’å…¥æ“ä½œï¼‰ã€‚è¯­è¨€æ¨¡å‹ç”¨äºä¿è¯æ›¿æ¢/æ’å…¥/åˆ é™¤æ“ä½œåçš„å¥å­çš„æµç•…æ€§ã€‚ä½œè€…æå‡ºäº†é»‘ç›’å’Œç™½ç›’ä¸¤ç§ç‰ˆæœ¬ã€‚ä¸¤è€…å”¯ä¸€çš„åŒºåˆ«æ˜¯åœ¨é€‰æ‹©æœ€å¯èƒ½æ“ä½œçš„è¯æ—¶ï¼Œå¯¹é¢„é€‰åŠŸèƒ½çš„å®šä¹‰ã€‚å›¾5å±•ç¤ºäº†ç¼–è¾‘å¯¹æŠ—æ ·æœ¬çš„ä¸€èˆ¬å·¥ä½œæµç¨‹ã€‚é€šè¿‡æ›¿æ¢ã€åˆ é™¤ã€æ’å…¥å’Œäº¤æ¢ç­‰ç¼–è¾‘ç­–ç•¥å¯¹å¥å­ã€å•è¯æˆ–å­—ç¬¦è¿›è¡Œæ‰°åŠ¨ã€‚</p><p><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Adversarial-Attacks-on-Deep-Learning-Models-in-Natural-Language-Processing-A-Survey/fig_5.png" alt></p><h3 id="åŸºäºé‡Šä¹‰çš„å¯¹æŠ—å™¨"><a href="#åŸºäºé‡Šä¹‰çš„å¯¹æŠ—å™¨" class="headerlink" title="åŸºäºé‡Šä¹‰çš„å¯¹æŠ—å™¨"></a>åŸºäºé‡Šä¹‰çš„å¯¹æŠ—å™¨</h3><p>SCPNs[53]é€šè¿‡å°†ç»™å®šå¥å­å’Œç›®æ ‡å¥æ³•å½¢å¼è¾“å…¥åˆ°encoder-decoderæ¶æ„ä¸­ï¼Œäº§ç”Ÿå…·æœ‰æœŸæœ›å¥æ³•çš„é‡Šä¹‰ã€‚è¯¥æ–¹æ³•é¦–å…ˆå¯¹åŸå¥è¿›è¡Œç¼–ç ï¼Œç„¶åå°†åè¯‘äº§ç”Ÿçš„é‡Šä¹‰å’Œç›®æ ‡å¥æ³•æ ‘è¾“å…¥åˆ°è§£ç å™¨ä¸­ï¼Œå…¶è¾“å‡ºæ˜¯åŸå¥çš„ç›®æ ‡é‡Šä¹‰ã€‚åˆ›æ–°ç‚¹åœ¨äºè§£ææ¨¡æ¿çš„é€‰æ‹©å’Œå¤„ç†ã€‚ä½œè€…ä»SCPNsä¸­åˆ†åˆ«è®­ç»ƒäº†ä¸€ä¸ªè§£æç”Ÿæˆå™¨ï¼ˆparse generatorï¼‰ï¼Œå¹¶åœ¨PARANMT-50Mæ•°æ®é›†ä¸­é€‰å–äº†20ä¸ªæœ€å¸¸è§çš„æ¨¡æ¿ã€‚</p><p>åœ¨ä½¿ç”¨é€‰å®šçš„è§£ææ¨¡æ¿ç”Ÿæˆè§£æåï¼Œä»–ä»¬é€šè¿‡æ£€æŸ¥n-gramé‡å ï¼ˆoverlap ï¼‰å’ŒåŸºäºè§£æçš„ç›¸ä¼¼æ€§ï¼ˆparaphrase-based similarityï¼‰ï¼Œè¿›ä¸€æ­¥ä¿®å‰ªäº†éå¯æ„Ÿå¥å­ï¼ˆnon-sensible sentencesï¼‰ã€‚è¢«æ”»å‡»çš„åˆ†ç±»å™¨å¯ä»¥æ­£ç¡®åœ°é¢„æµ‹åŸå§‹å¥å­çš„æ ‡ç­¾ï¼Œä½†åœ¨å…¶é‡Šä¹‰ä¸Šå´å¤±è´¥äº†ï¼Œè¿™è¢«è®¤ä¸ºæ˜¯å¯¹æŠ—æ€§çš„ä¾‹å­ã€‚</p><p>SCPNsåœ¨æƒ…æ„Ÿåˆ†æå’Œæ–‡æœ¬åŒ…æ¶µï¼ˆtextual entailmentï¼‰DNNsä¸Šè¿›è¡Œäº†è¯„ä¼°ï¼Œå¹¶æ˜¾ç¤ºå‡ºå¯¹è¢«æ”»å‡»æ¨¡å‹çš„æ˜¾è‘—å½±å“ã€‚è™½ç„¶è¿™ç§æ–¹æ³•ä½¿ç”¨ç›®æ ‡ç­–ç•¥æ¥ç”Ÿæˆå¯¹æŠ—æ ·æœ¬ï¼Œä½†å®ƒæ²¡æœ‰æŒ‡å®šç›®æ ‡è¾“å‡ºã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†å…¶å½’ä¸ºéç›®æ ‡æ”»å‡»ã€‚</p><p>[127]ä¸­çš„å·¥ä½œä½¿ç”¨äº†åˆ›å»ºè¯­ä¹‰ç­‰ä»·çš„å¯¹æŠ—æ ·æœ¬ï¼ˆsemantically equivalent adversaries, SEAï¼‰çš„é‡Šä¹‰ç”ŸæˆæŠ€æœ¯çš„æ€æƒ³ã€‚ä½œè€…ç”Ÿæˆäº†ä¸€ä¸ªè¾“å…¥å¥å­$x$çš„é‡Šä¹‰ï¼Œå¹¶ä»$f$ä¸­å¾—åˆ°é¢„æµ‹ï¼Œç›´åˆ°æ”¹å˜åŸå§‹é¢„æµ‹ã€‚åŒæ—¶ï¼Œä»–ä»¬è€ƒè™‘äº†ä¸$xâ€²$çš„è¯­ä¹‰ç­‰åŒï¼Œå³å¦‚æœ$x$ä¸$xâ€²$è¯­ä¹‰ç­‰åŒï¼Œåˆ™ä¸º1ï¼Œå¦åˆ™ä¸º0ï¼Œå¦‚ä¸‹å¼æ‰€ç¤ºã€‚</p><script type="math/tex; mode=display">\operatorname{SEA}\left(\mathbf{x}, \mathbf{x}^{\prime}\right)=\mathbf{1}\left[\operatorname{Sem} E q\left(x, x^{\prime}\right) \wedge f(\mathbf{x}) \neq f\left(\mathbf{x}^{\prime}\right)\right]</script><p>ä¹‹åï¼Œæœ¬å·¥ä½œæå‡ºäº†ä¸€ç§åŸºäºè¯­ä¹‰ç­‰ä»·è§„åˆ™çš„æ–¹æ³•ï¼Œå°†è¿™äº›ç”Ÿæˆçš„å¯¹æŠ—æ ·æœ¬æ³›åŒ–ä¸ºè¯­ä¹‰ç­‰ä»·è§„åˆ™ï¼Œä»¥ç†è§£å’Œä¿®å¤å½±å“æœ€å¤§çš„bugã€‚</p><p>å›¾6æè¿°äº†åŸºäºé‡Šä¹‰çš„å¯¹æŠ—æ ·æœ¬ç®—æ³•ç”ŸæˆåŸåˆ™ï¼Œæˆ‘ä»¬æŠŠæºæ–‡æœ¬çš„é‡Šä¹‰å½“ä½œå¯¹æŠ—æ ·æœ¬ã€‚ç”Ÿæˆé‡Šä¹‰æ—¶æ·»åŠ æ‰°åŠ¨ã€‚</p><p><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Adversarial-Attacks-on-Deep-Learning-Models-in-Natural-Language-Processing-A-Survey/fig_6.png" alt></p><h3 id="åŸºäºGANçš„å¯¹æŠ—æ ·æœ¬ç”Ÿæˆå™¨"><a href="#åŸºäºGANçš„å¯¹æŠ—æ ·æœ¬ç”Ÿæˆå™¨" class="headerlink" title="åŸºäºGANçš„å¯¹æŠ—æ ·æœ¬ç”Ÿæˆå™¨"></a>åŸºäºGANçš„å¯¹æŠ—æ ·æœ¬ç”Ÿæˆå™¨</h3><p>é‡‡ç”¨GANçš„ç›®çš„æ˜¯ä¸ºäº†ä½¿å¯¹æŠ—æ ·æœ¬æ›´åŠ è‡ªç„¶ã€‚</p><p>[157]æå‡ºçš„ç”Ÿæˆå¯¹æŠ—æ ·æœ¬çš„æ¨¡å‹ç”±ä¸¤ä¸ªå…³é”®ç»„ä»¶ç»„æˆï¼šä¸€ä¸ªGANï¼Œç”Ÿæˆè™šå‡çš„æ•°æ®æ ·æœ¬ï¼›ä¸€ä¸ªè½¬æ¢å™¨ï¼Œå°†è¾“å…¥$x$æ˜ å°„åˆ°å…¶æ½œä¼è¡¨ç¤º$zâ€²$ã€‚è¿™ä¸¤ä¸ªç»„ä»¶é€šè¿‡æœ€å°åŒ–åŸå§‹è¾“å…¥å’Œå¯¹æŠ—æ ·æœ¬ä¹‹é—´çš„é‡æ„è¯¯å·®æ¥å¯¹åŸå§‹è¾“å…¥è¿›è¡Œè®­ç»ƒã€‚é€šè¿‡è¯†åˆ«$zâ€²$é™„è¿‘çš„æ‰°åŠ¨æ ·æœ¬$\hat{z}$åœ¨æ½œå¯†ç©ºé—´ä¸­è¿›è¡Œæ‰°åŠ¨ã€‚ä½œè€…æå‡ºäº†ä¸¤ç§æœç´¢æ–¹æ³•ï¼Œå³è¿­ä»£éšæœºæœç´¢ï¼ˆiterative stochastic searchï¼‰å’Œæ··åˆæ”¶ç¼©æœç´¢ï¼ˆhybrid shrinking searchï¼‰æ¥è¯†åˆ«åˆé€‚çš„$\hat{z}$ã€‚è¯¥å·¥ä½œæ—¢é€‚ç”¨äºå›¾åƒæ•°æ®ï¼Œä¹Ÿé€‚ç”¨äºæ–‡æœ¬æ•°æ®ï¼Œå› ä¸ºå®ƒä»æœ¬è´¨ä¸Šæ¶ˆé™¤äº†æ–‡æœ¬æ•°æ®çš„ç¦»æ•£å±æ€§æ‰€å¸¦æ¥çš„é—®é¢˜ã€‚ä½œè€…å¯¹ä»–ä»¬çš„æ–¹æ³•åœ¨ä¸‰ä¸ªåº”ç”¨ä¸Šè¿›è¡Œäº†è¯„ä¼°ï¼Œå³ï¼šæ–‡æœ¬åŒ…å«ã€æœºå™¨ç¿»è¯‘å’Œå›¾åƒåˆ†ç±»ã€‚ç„¶è€Œï¼Œæ¯æ¬¡æ±‚è§£ä½¿æ¨¡å‹å‡ºé”™çš„$\hat{z}$éƒ½éœ€è¦é‡æ–°æŸ¥è¯¢æ”»å‡»æ¨¡å‹å¹¶è¿è¡Œç®—æ³•ï¼Œç›¸å½“è€—æ—¶ã€‚</p><h3 id="åŸºäºæ›¿æ¢çš„æ–¹æ³•"><a href="#åŸºäºæ›¿æ¢çš„æ–¹æ³•" class="headerlink" title="åŸºäºæ›¿æ¢çš„æ–¹æ³•"></a>åŸºäºæ›¿æ¢çš„æ–¹æ³•</h3><p>[52]ä¸­çš„å·¥ä½œæå‡ºäº†ä¸€ä¸ªæ”»å‡»RNNæ¨¡å‹çš„é»‘ç›’æ¡†æ¶ï¼Œç”¨äºæ¶æ„è½¯ä»¶æ£€æµ‹ã€‚è¯¥æ¡†æ¶åŒ…æ‹¬ä¸¤ä¸ªæ¨¡å‹ï¼šç”ŸæˆRNNå’Œæ›¿æ¢RNNã€‚ç”Ÿæˆå¼RNNåŸºäºseq2seqæ¨¡å‹[131]ï¼Œæ—¨åœ¨ä»æ¶æ„è½¯ä»¶çš„APIåºåˆ—ä¸­ç”Ÿæˆå¯¹æŠ—æ€§çš„APIåºåˆ—ã€‚å…·ä½“æ¥è¯´ï¼Œç”Ÿæˆä¸€å°æ®µAPIåºåˆ—ï¼Œå¹¶å°†è¯¥åºåˆ—æ’å…¥åˆ°è¾“å…¥åºåˆ—ä¹‹åã€‚æ›¿ä»£RNNæ˜¯ä¸€ç§å…·æœ‰æ³¨æ„åŠ›æœºåˆ¶çš„åŒå‘RNNï¼Œå®ƒè¦æ¨¡ä»¿è¢«æ”»å‡»RNNçš„è¡Œä¸ºã€‚å› æ­¤ï¼Œç”Ÿæˆå¯¹æŠ—æ ·æœ¬ä¸ä¼šæŸ¥è¯¢åŸæ¥çš„è¢«æ”»å‡»RNNï¼Œè€Œæ˜¯æŸ¥è¯¢å®ƒçš„æ›¿ä»£RNNã€‚æ›¿æ¢çš„RNNä¼šåœ¨æ¶æ„è½¯ä»¶å’Œè‰¯æ€§ç¨‹åºåºåˆ—æ•°æ®é›†ä¸Šè¿›è¡Œè®­ç»ƒï¼Œä»¥ç”ŸæˆRNNçš„Gumbel-Softmaxä¸ºè¾“å‡ºã€‚åœ¨è¿™é‡Œï¼Œç”±äºç”Ÿæˆæ€§RNNçš„åŸå§‹è¾“å‡ºæ˜¯ç¦»æ•£çš„ï¼Œæ‰€ä»¥ä½¿ç”¨Gumbel-softmaxæ¥å®ç°ä¸¤ä¸ªRNNæ¨¡å‹çš„è”åˆè®­ç»ƒã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒå¯ä»¥ä½¿æ¢¯åº¦ä»ç”Ÿæˆæ€§RNNåæ¨åˆ°æ›¿ä»£æ€§RNNã€‚è¯¥æ–¹æ³•å¯¹APIè¿›è¡Œæ”»å‡»ï¼ŒAPIè¡¨ç¤ºä¸ºä¸€ä¸ªOne-Hotå‘é‡ï¼Œå³ç»™å®š$M$ä¸ªAPIï¼Œç¬¬$i$ä¸ªAPIçš„å‘é‡æ˜¯ä¸€ä¸ª$M$ç»´çš„äºŒè¿›åˆ¶å‘é‡ï¼Œå³ç¬¬$i$ç»´ä¸º1ï¼Œå…¶ä»–ç»´åº¦ä¸º0ã€‚</p><h3 id="é‡ç¼–ç¨‹"><a href="#é‡ç¼–ç¨‹" class="headerlink" title="é‡ç¼–ç¨‹"></a>é‡ç¼–ç¨‹</h3><p><a href="#Reprogramming">å¦‚å‰æ‰€è¿°</a>ï¼Œ[97]æä¾›äº†é»‘ç›’å’Œç™½ç›’ä¸¤ç§æ”»å‡»ç‰ˆæœ¬ã€‚åœ¨é»‘ç›’æ”»å‡»ä¸­ï¼Œä½œè€…å°†åºåˆ—ç”Ÿæˆå»ºæ¨¡ä¸ºå¼ºåŒ–å­¦ä¹ ä»»åŠ¡ï¼Œå¯¹æŠ—é‡è®­ç»ƒå‡½æ•°$g<em>{\theta}$æ˜¯å¼ºåŒ–å­¦ä¹ ä¸­çš„policyç½‘ç»œã€‚ä½œè€…é‡‡ç”¨åŸºäºå¼ºåŒ–å­¦ä¹ çš„ä¼˜åŒ–ç®—æ³•è®­ç»ƒ$g</em>{\theta}$ã€‚</p><h3 id="é»‘ç›’æ”»å‡»æ€»ç»“"><a href="#é»‘ç›’æ”»å‡»æ€»ç»“" class="headerlink" title="é»‘ç›’æ”»å‡»æ€»ç»“"></a>é»‘ç›’æ”»å‡»æ€»ç»“</h3><p><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Adversarial-Attacks-on-Deep-Learning-Models-in-Natural-Language-Processing-A-Survey/black_box_attack_methods_table_part_1.png" alt><br><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Adversarial-Attacks-on-Deep-Learning-Models-in-Natural-Language-Processing-A-Survey/black_box_attack_methods_table_part_2.png" alt></p><h2 id="å¤šæ¨¡æ€ä»»åŠ¡æ”»å‡»"><a href="#å¤šæ¨¡æ€ä»»åŠ¡æ”»å‡»" class="headerlink" title="å¤šæ¨¡æ€ä»»åŠ¡æ”»å‡»"></a>å¤šæ¨¡æ€ä»»åŠ¡æ”»å‡»</h2><p>æœ‰äº›æ¨¡å‹æ‰§è¡Œè·¨æ¨¡æ€çš„ä»»åŠ¡ï¼Œæ¯”å¦‚ä¸€äº›ç¥ç»æ¨¡å‹åŒ…å«ä¸€ä¸ªå†…éƒ¨ç»„ä»¶ï¼Œæ‰§è¡Œå›¾åƒåˆ°æ–‡æœ¬æˆ–è¯­éŸ³åˆ°æ–‡æœ¬çš„è½¬æ¢ã€‚è™½ç„¶è¿™äº›æ”»å‡»å¹¶ä¸æ˜¯é’ˆå¯¹çº¯æ–‡æœ¬æ•°æ®çš„ï¼Œä½†ä¸ºäº†å…¨é¢å›é¡¾ï¼Œæˆ‘ä»¬ç®€å•ä»‹ç»ä¸€ä¸‹æœ‰ä»£è¡¨æ€§çš„æ”»å‡»ã€‚</p><h3 id="å›¾åƒåˆ°æ–‡æœ¬æ¨¡å‹çš„æ”»å‡»æ–¹æ³•"><a href="#å›¾åƒåˆ°æ–‡æœ¬æ¨¡å‹çš„æ”»å‡»æ–¹æ³•" class="headerlink" title="å›¾åƒåˆ°æ–‡æœ¬æ¨¡å‹çš„æ”»å‡»æ–¹æ³•"></a>å›¾åƒåˆ°æ–‡æœ¬æ¨¡å‹çš„æ”»å‡»æ–¹æ³•</h3><p>å›¾åƒåˆ°æ–‡æœ¬æ¨¡å‹æ˜¯ä¸€ç±»æ ¹æ®å›¾åƒçš„è¯­ä¹‰å†…å®¹ä¸ºå›¾åƒç”Ÿæˆæ–‡æœ¬æè¿°çš„æŠ€æœ¯ã€‚</p><h4 id="æ”»å‡»å…‰å­¦å­—ç¬¦è¯†åˆ«æ¨¡å‹"><a href="#æ”»å‡»å…‰å­¦å­—ç¬¦è¯†åˆ«æ¨¡å‹" class="headerlink" title="æ”»å‡»å…‰å­¦å­—ç¬¦è¯†åˆ«æ¨¡å‹"></a>æ”»å‡»å…‰å­¦å­—ç¬¦è¯†åˆ«æ¨¡å‹</h4><p>å…‰å­¦å­—ç¬¦è¯†åˆ«ï¼ˆOptical Character Recognition, OCRï¼‰æ˜¯å…¸å‹çš„å¤šæ¨¡æ€å­¦ä¹ ä»»åŠ¡ï¼Œå®ƒå°†å›¾åƒä½œä¸ºè¾“å…¥ï¼Œå¹¶è¾“å‡ºè¯†åˆ«çš„æ–‡æœ¬ã€‚[129]æå‡ºäº†å¯¹OCRçš„ç™½ç›’æ”»å‡»å’Œåç»­çš„NLPåº”ç”¨ã€‚é¦–å…ˆä½¿ç”¨åŸå§‹æ–‡æœ¬æ¥æ¸²æŸ“ä¸€ä¸ªå¹²å‡€çš„å›¾åƒï¼ˆè½¬æ¢DNNsï¼‰ï¼Œç„¶ååœ¨WordNetä¸­æ‰¾åˆ°æ»¡è¶³ç¼–è¾‘è·ç¦»é˜ˆå€¼çš„åä¹‰è¯ã€‚åªæœ‰é‚£äº›æœ‰æ•ˆï¼ˆvalidï¼‰ä¸”ä¿æŒè¯­ä¹‰ä¸ä¸€è‡´çš„åä¹‰è¯æ‰ä¼šè¢«ä¿ç•™ã€‚ä¹‹åï¼Œè¯¥æ–¹æ³•åœ¨å¹²å‡€çš„å›¾åƒä¸­æ‰¾åˆ°åŒ…å«ä¸Šè¿°å•è¯çš„è¡Œï¼Œå¯ä»¥ç”¨å®ƒä»¬æ‰€é€‰æ‹©çš„åä¹‰è¯æ¥æ›¿æ¢ã€‚ç„¶åï¼Œè¯¥æ–¹æ³•å°†ç›®æ ‡è¯è½¬åŒ–ä¸ºç›®æ ‡åºåˆ—ã€‚ç»™å®šè¾“å…¥/ç›®æ ‡å›¾åƒå’Œåºåˆ—ï¼Œä½œè€…å°†å¯¹æŠ—æ ·æœ¬ç”Ÿæˆé—®é¢˜å»ºæ¨¡ä¸ºä¸€ä¸ªä¼˜åŒ–é—®é¢˜ã€‚</p><script type="math/tex; mode=display">\begin{array}{c}\min _{\omega} c \cdot J_{C T C} f\left(\mathbf{x}^{\prime}, t^{\prime}\right)+\left\|\mathbf{x}-\mathbf{x}^{\prime}\right\|_{2}^{2} \\\mathbf{x}^{\prime}=(\alpha \cdot \tanh (\omega)+\beta) / 2 \\\alpha=\left(\mathbf{x}_{\max }-\mathbf{x}_{\min }\right) / 2, \beta=\left(\mathbf{x}_{\max }+\mathbf{x}_{\min }\right) / 2 \\J_{C T C}(f(\mathbf{x}, t))=-\log p(t \mid \mathbf{x})\end{array}</script><p>å…¶ä¸­$f(\mathbf{x})$ä»£è¡¨ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œ$J<em>{CTC}(\cdot)$ä»£è¡¨CTCï¼ˆConnectionist Temporal Classificationï¼‰æŸå¤±å‡½æ•°ï¼Œ$\mathbf{x}$æ˜¯æŸå¤±å›¾åƒï¼Œ$t$æ˜¯çœŸå®ï¼ˆGround Truthï¼‰åºåˆ—ï¼Œ$x^{â€˜}$æ˜¯å¯¹æŠ—æ ·æœ¬ï¼Œ$t^{â€˜}$æ˜¯ç›®æ ‡åºåˆ—ï¼Œ$\omega,\alpha,\beta$æ˜¯ç”Ÿæˆå¯¹æŠ—æ ·æœ¬æ—¶ä¸ºäº†æ»¡è¶³box-constraintæ¡ä»¶$\mathbf{x}^{\prime} \in\left[\mathbf{x}</em>{\min }, \mathbf{x}_{\max }\right]^{p}$çš„å‚æ•°ã€‚$p$æ˜¯ç¡®ä¿ç”Ÿæˆæœ‰æ•ˆå¯¹æŠ—æ ·æœ¬$x^{â€˜}$æ‰€éœ€çš„åƒç´ ä¸ªæ•°ã€‚åœ¨å¯¹æŠ—æ ·æœ¬ç”Ÿæˆå®Œæ¯•åï¼Œä»¥å¯¹æŠ—æ ·æœ¬æ›¿æ¢å›¾åƒä¸­ç›¸åº”è¡Œã€‚</p><p>ä½œè€…ä»ä¸‰ä¸ªæ–¹é¢å¯¹è¯¥æ–¹æ³•è¿›è¡Œäº†è¯„ä¼°ï¼šå•å­—è¯†åˆ«ã€æ•´ç¯‡æ–‡æ¡£è¯†åˆ«ä»¥åŠåŸºäºè¯†åˆ«æ–‡æœ¬çš„NLPåº”ç”¨ï¼ˆå…·ä½“ä¸ºæƒ…æ„Ÿåˆ†æå’Œæ–‡æ¡£åˆ†ç±»ï¼‰ã€‚ä»–ä»¬è¿˜å‘ç°ï¼Œæ‰€æå‡ºçš„æ–¹æ³•å­˜åœ¨ç€å¯è½¬ç§»æ€§ï¼ˆtransferabilityï¼‰ä½å’Œç‰©ç†å¯å®ç°æ€§ï¼ˆphysical realizabilityï¼‰ä½ç­‰å±€é™æ€§ã€‚</p><h4 id="æ”»å‡»åœºæ™¯æ–‡æœ¬è¯†åˆ«æ¨¡å‹"><a href="#æ”»å‡»åœºæ™¯æ–‡æœ¬è¯†åˆ«æ¨¡å‹" class="headerlink" title="æ”»å‡»åœºæ™¯æ–‡æœ¬è¯†åˆ«æ¨¡å‹"></a>æ”»å‡»åœºæ™¯æ–‡æœ¬è¯†åˆ«æ¨¡å‹</h4><p>åœºæ™¯æ–‡æœ¬è¯†åˆ«ï¼ˆScene Text Recognition, STRï¼‰æ˜¯ä¸€ç§å›¾åƒåˆ°æ–‡å­—çš„åº”ç”¨ï¼Œæ•´ä¸ªå›¾åƒç›´æ¥è¢«æ˜ å°„æˆå­—ä¸²ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒOCRä¸­çš„è¯†åˆ«æ˜¯ä¸€ä¸ªæµæ°´çº¿è¿‡ç¨‹ï¼šé¦–å…ˆå°†å•è¯åˆ†å‰²æˆå­—ç¬¦ï¼Œç„¶åå¯¹å•ä¸ªå­—ç¬¦è¿›è¡Œè¯†åˆ«ã€‚AdaptiveAttack[153]è¯„ä¼°äº†å¯¹åœºæ™¯æ–‡æœ¬è¯†åˆ«è¿›è¡Œå¯¹æŠ—æ€§æ”»å‡»çš„å¯èƒ½æ€§ã€‚ä½œè€…æå‡ºäº†ä¸¤ç§æ”»å‡»æ–¹å¼ï¼Œå³åŸºæœ¬æ”»å‡»å’Œè‡ªé€‚åº”æ”»å‡»ã€‚åŸºæœ¬æ”»å‡»ä¸å‚è€ƒæ–‡çŒ®[129]ä¸­çš„å·¥ä½œç±»ä¼¼ï¼Œå®ƒä¹Ÿå°†å¯¹æŠ—å¼å®ä¾‹ç”Ÿæˆè¡¨è¿°ä¸ºä¸€ä¸ªä¼˜åŒ–é—®é¢˜ã€‚</p><script type="math/tex; mode=display">\begin{array}{l}\min _{\omega} J_{C T C} f\left(\mathbf{x}^{\prime}, t^{\prime}\right)+\lambda \mathcal{D}\left(\mathbf{x}, \mathbf{x}^{\prime}\right), \\\mathbf{x}^{\prime}=\tanh (\omega)\end{array}</script><p>å…¶ä¸­$\mathcal{D}(\cdot)$æ˜¯æ¬§æ°è·ç¦»ã€‚</p><p>ä¸[129]çš„ä¸åŒä¹‹å¤„åœ¨äº$xâ€²$çš„å®šä¹‰ï¼Œä»¥åŠ$x$ã€$xâ€²$ä¹‹é—´çš„è·ç¦»æµ‹é‡($L_2$æ³•åˆ™ vs. æ¬§æ°è·ç¦»)ï¼Œä»¥åŠå‚æ•°$\lambda$ï¼Œå®ƒå¹³è¡¡äº†ä½œä¸ºå¯¹æŠ—æ ·æœ¬å’Œæ¥è¿‘åŸå§‹å›¾åƒçš„é‡è¦æ€§ã€‚ç”±äºå¯»æ‰¾åˆé€‚çš„$\lambda$ç›¸å½“è€—æ—¶ï¼Œä½œè€…æå‡ºäº†å¦ä¸€ç§æ–¹æ³•æ¥è‡ªé€‚åº”åœ°å¯»æ‰¾$\lambda$ã€‚ä»–ä»¬å°†è¿™ç§æ–¹æ³•å‘½åä¸ºAdaptive Attackï¼Œä»–ä»¬å°†é¡ºåºåˆ†ç±»ä»»åŠ¡çš„ä¼¼ç„¶ï¼ˆlikelihoodï¼‰å®šä¹‰ä¸ºéµå¾ªé«˜æ–¯åˆ†å¸ƒï¼Œå¹¶æ¨å¯¼å‡ºé¡ºåºå¯¹æŠ—æ ·æœ¬çš„è‡ªé€‚åº”ä¼˜åŒ–ä¸ºï¼š</p><script type="math/tex; mode=display">\min \frac{\left\|\mathrm{x}-\mathrm{x}^{\prime}\right\|_{2}^{2}}{\lambda_{1}^{2}}+\frac{J_{C T C} f\left(\mathrm{x}^{\prime}, t^{\prime}\right)}{\lambda_{2}^{2}}+\log \lambda_{1}^{2}+T \log \lambda_{2}^{2}+\frac{1}{\lambda_{2}^{2}}</script><p>å…¶ä¸­$\lambda_1,\lambda_2$æ˜¯ç”¨æ¥å¹³è¡¡æ‰°åŠ¨ä¸CTCæŸå¤±å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°ã€‚ä½œè€…åœ¨ä»¤è¾“å‡ºä¸­çš„æ’å…¥æ–‡æœ¬ã€åˆ é™¤æ–‡æœ¬å’Œæ›¿æ¢æ–‡æœ¬çš„ä»»åŠ¡ä¸Šè¯„ä¼°äº†ä»–ä»¬æå‡ºçš„æ–¹æ³•ã€‚ç»“æœè¡¨æ˜ï¼Œè‡ªé€‚åº”æ”»å‡»æ¯”åŸºæœ¬æ”»å‡»å¿«å¾—å¤šã€‚</p><h4 id="æ”»å‡»å›¾åƒå­—å¹•ç”Ÿæˆæ¨¡å‹"><a href="#æ”»å‡»å›¾åƒå­—å¹•ç”Ÿæˆæ¨¡å‹" class="headerlink" title="æ”»å‡»å›¾åƒå­—å¹•ç”Ÿæˆæ¨¡å‹"></a>æ”»å‡»å›¾åƒå­—å¹•ç”Ÿæˆæ¨¡å‹</h4><p>å›¾åƒå­—å¹•ï¼ˆImage Captioningï¼‰æ˜¯å¦ä¸€ä¸ªå¤šæ¨¡æ€å­¦ä¹ ä»»åŠ¡ï¼Œå®ƒå°†å›¾åƒä½œä¸ºè¾“å…¥ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæè¿°å…¶è§†è§‰å†…å®¹çš„æ–‡æœ¬å­—å¹•ã€‚Show-and-Fool[20]ç”Ÿæˆå¯¹æŠ—æ ·æœ¬æ¥æ”»å‡»åŸºäºCNN-RNNçš„å›¾åƒå­—å¹•æ¨¡å‹ã€‚è¢«æ”»å‡»çš„CNN-RNNæ¨¡å‹é‡‡ç”¨CNNä½œä¸ºç¼–ç å™¨è¿›è¡Œå›¾åƒç‰¹å¾æå–ï¼ŒRNNä½œä¸ºè§£ç å™¨è¿›è¡Œå­—å¹•ç”Ÿæˆã€‚Show-and-Foolæœ‰ä¸¤ç§æ”»å‡»ç­–ç•¥ï¼šé¢„æœŸç›®æ ‡å­—å¹•(targeted caption)ï¼ˆå³ç”Ÿæˆçš„å­—å¹•ä¸é¢„æœŸç›®æ ‡å­—å¹•ç›¸åŒ¹é…ï¼‰å’Œé¢„æœŸç›®æ ‡å…³é”®è¯ï¼ˆtargeted keywordsï¼‰ï¼ˆå³ç”Ÿæˆçš„å­—å¹•åŒ…å«ç›®æ ‡å…³é”®è¯ï¼‰ã€‚å½¢å¼åŒ–å®šä¹‰å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\begin{array}{c}\min _{\omega} c \cdot J\left(\mathbf{x}^{\prime}\right)+\left\|\mathbf{x}^{\prime}-\mathbf{x}\right\|_{2}^{2} \\\mathbf{x}^{\prime}=\mathbf{x}+\eta \\x=\tanh (y), \quad \mathbf{x}^{\prime}=\tanh (\omega+y)\end{array}</script><p>å…¶ä¸­$c&gt;0$æ˜¯é¢„å…ˆå®šä¹‰çš„æ­£åˆ™åŒ–å¸¸æ•°ï¼Œ$\eta$æ˜¯æ‰°åŠ¨ï¼Œ$\omega,y$æ˜¯æ§åˆ¶$\mathbf{x}^{\prime} \in[-1,1]^{n}$çš„å‚æ•°ã€‚ä¸¤ç§ç­–ç•¥çš„åŒºåˆ«åœ¨äºæŸå¤±å‡½æ•°$J(\cdot)$çš„å®šä¹‰ã€‚</p><p>targeted captionç­–ç•¥çš„targeted captionå®šä¹‰ä¸º$S=\left(S<em>{1}, S</em>{2}, \ldots S<em>{t}, \ldots S</em>{N}\right)$ï¼Œå…¶ä¸­$S_t$ä¸ºå•è¯è¡¨ä¸­ç¬¬$t$ä¸ªå•è¯çš„indexï¼Œ$N$æ˜¯captionçš„é•¿åº¦ã€‚æŸå¤±å‡½æ•°å®šä¹‰ä¸ºï¼š</p><script type="math/tex; mode=display">J_{S, l o g i t}\left(\mathbf{x}^{\prime}\right)=\sum_{t=2}^{N-1} \max \left\{-\epsilon, \max _{k \neq S_{t}}\left\{z_{t}^{(k)}\right\}-z_{t}^{\left(S_{t}\right)}\right\}</script><p>å…¶ä¸­$S_t$æ˜¯ç›®æ ‡å•è¯ï¼Œ$z_t^{(S_t)}$æ˜¯ç›®æ ‡å•è¯çš„logitã€‚è¿™ä¸ªæ–¹æ³•å®è´¨ä¸Šæ˜¯æœ€å°åŒ–äº†$S_t$çš„logitä¸é™¤$S_t$å¤–çš„æœ€å¤§logitçš„è·ç¦»ã€‚</p><p>targeted keywordsç­–ç•¥ã€‚ç»™å®štargeted keywords $\mathcal{K}:=K<em>{1}, \ldots, K</em>{M}$ï¼ŒæŸå¤±å‡½æ•°å®šä¹‰ä¸ºï¼š</p><script type="math/tex; mode=display">J_{K, \text {logit}}\left(\mathrm{x}^{\prime}\right)=\sum_{j=1}^{M} \min _{t \in[N]}\left\{\max \left\{-\epsilon, \max _{k \neq K_{j}}\left\{z_{t}^{(k)}\right\}-z_{t}^{\left(K_{j}\right)}\right\}\right\}</script><p>ä½œè€…å¯¹Show-and-Tell[137]è¿›è¡Œäº†å¤§é‡çš„å®éªŒï¼Œå¹¶æ”¹å˜äº†æ”»å‡»æŸå¤±ä¸­çš„å‚æ•°ã€‚ä»–ä»¬å‘ç°ï¼ŒShow-and-Foolä¸ä»…åœ¨æ”»å‡»åŸºäºCNN-RNNçš„å›¾åƒå­—å¹•æ¨¡å‹Showand-Tellä¸Šæœ‰æ•ˆï¼Œè€Œä¸”åœ¨å¦ä¸€ä¸ªæ¨¡å‹Show-Attend-and-Tell[147]ä¸Šä¹Ÿå…·æœ‰å¾ˆå¼ºçš„è½¬ç§»èƒ½åŠ›ï¼ˆtransferable ï¼‰ã€‚</p><h4 id="æ”»å‡»è§†è§‰é—®é¢˜å›ç­”æ¨¡å‹"><a href="#æ”»å‡»è§†è§‰é—®é¢˜å›ç­”æ¨¡å‹" class="headerlink" title="æ”»å‡»è§†è§‰é—®é¢˜å›ç­”æ¨¡å‹"></a>æ”»å‡»è§†è§‰é—®é¢˜å›ç­”æ¨¡å‹</h4><p>è§†è§‰é—®é¢˜å›ç­”ï¼ˆVisual Question Answering, VQAï¼‰æ˜¯æŒ‡ï¼Œç»™å®šä¸€å¼ å›¾åƒå’Œä¸€ä¸ªå…³äºå›¾åƒçš„è‡ªç„¶è¯­è¨€é—®é¢˜ï¼ŒVQAè¦ç”¨è‡ªç„¶è¯­è¨€æä¾›ä¸€ä¸ªå‡†ç¡®çš„ç­”æ¡ˆã€‚[148]ä¸­çš„å·¥ä½œæå‡ºäº†ä¸€ç§è¿­ä»£ä¼˜åŒ–æ–¹æ³•æ¥æ”»å‡»ä¸¤ç§VQAæ¨¡å‹ã€‚æå‡ºçš„ç›®æ ‡å‡½æ•°å¯ä»¥æœ€å¤§åŒ–ç›®æ ‡ç­”æ¡ˆçš„æ¦‚ç‡ï¼Œå¹¶åœ¨è¯¥è·ç¦»ä½äºé˜ˆå€¼æ—¶ï¼Œå¯¹ä¸åŸå§‹å›¾åƒè·ç¦»è¾ƒå°çš„å¯¹æŠ—æ ·æœ¬çš„åå¥½è¿›è¡Œå‡æƒã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œè¯¥ç›®æ ‡åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ã€‚ç¬¬ä¸€éƒ¨åˆ†ç±»ä¼¼äºSTRä»»åŠ¡ä¸­çš„å…¬å¼</p><script type="math/tex; mode=display">\begin{array}{l}\min _{\omega} J f\left(\mathbf{x}^{\prime}, t^{\prime}\right)+\lambda \mathcal{D}\left(\mathbf{x}, \mathbf{x}^{\prime}\right)\end{array}</script><p>ï¼Œå°†æŸå¤±å‡½æ•°æ›¿æ¢ä¸ºVQAæ¨¡å‹çš„æŸå¤±ï¼Œå¹¶ä½¿ç”¨$\left|\mathbf{x}-\mathbf{x}^{\prime}\right|_{2} / \sqrt{N}$ä½œä¸º$xâ€²$å’Œ$x$ä¹‹é—´çš„è·ç¦»ã€‚</p><p>ç¬¬äºŒéƒ¨åˆ†ä½¿softmaxè¾“å‡ºä¸é¢„æµ‹å€¼çš„å·®å€¼æœ€å¤§åŒ–ï¼Œå½“å…¶ä¸ç›®æ ‡ç­”æ¡ˆä¸åŒæ—¶ï¼Œå°±ä¼šä½¿å…¶å·®å€¼æœ€å¤§åŒ–ã€‚</p><p>ç¬¬ä¸‰éƒ¨åˆ†ç¡®ä¿$xâ€²$å’Œ$x$ä¹‹é—´çš„è·ç¦»åœ¨ä¸€ä¸ªé˜ˆå€¼ä¹‹ä¸‹ã€‚</p><p>é€šè¿‡æ£€æŸ¥æ˜¯å¦æ¯”ä¹‹å‰çš„æ”»å‡»è·å¾—æ›´å¥½çš„æˆåŠŸç‡ï¼Œä»¥åŠæ¨¡å‹é¢„æµ‹ç›®æ ‡ç­”æ¡ˆçš„ç½®ä¿¡åº¦å¾—åˆ†æ¥è¯„ä¼°æ”»å‡»ã€‚æ ¹æ®è¯„ä¼°ç»“æœï¼Œä½œè€…å¾—å‡ºç»“è®ºï¼šæ³¨æ„åŠ›ï¼ˆattentionï¼‰ã€è¾¹ç•Œç›’å®šä½ï¼ˆbounding box localizationï¼‰å’Œç»„æˆå¼å†…éƒ¨ç»“æ„ï¼ˆcompositional internal structuresï¼‰å®¹æ˜“å—åˆ°å¯¹æŠ—æ€§æ”»å‡»ã€‚è¿™é¡¹å·¥ä½œè¿˜æ”»å‡»äº†ä¸€ä¸ªå›¾åƒå­—å¹•ç¥ç»æ¨¡å‹ã€‚</p><h4 id="æ”»å‡»è§†è§‰è¯­ä¹‰åµŒå…¥æ¨¡å‹"><a href="#æ”»å‡»è§†è§‰è¯­ä¹‰åµŒå…¥æ¨¡å‹" class="headerlink" title="æ”»å‡»è§†è§‰è¯­ä¹‰åµŒå…¥æ¨¡å‹"></a>æ”»å‡»è§†è§‰è¯­ä¹‰åµŒå…¥æ¨¡å‹</h4><p>è§†è§‰è¯­ä¹‰åµŒå…¥ï¼ˆVisual-semantic Embeddings, VSEï¼‰ç›®çš„æ˜¯å°†è‡ªç„¶è¯­è¨€å’Œåº•å±‚è§†è§‰ä¸–ç•Œè¿æ¥èµ·æ¥ã€‚åœ¨VSEä¸­ï¼Œå›¾åƒå’Œæè¿°æ€§æ–‡æœ¬ï¼ˆæ ‡é¢˜ï¼‰çš„åµŒå…¥ç©ºé—´éƒ½è¢«è”åˆä¼˜åŒ–å’Œå¯¹é½ã€‚</p><p>[125]é€šè¿‡åœ¨æµ‹è¯•é›†ä¸­ç”Ÿæˆå¯¹æŠ—æ ·æœ¬ï¼Œå¯¹æœ€æ–°çš„VSEæ¨¡å‹è¿›è¡Œæ”»å‡»ï¼Œå¹¶è¯„ä¼°äº†VSEæ¨¡å‹çš„é²æ£’æ€§ã€‚é€šè¿‡å¼•å…¥ä¸‰ç§æ–¹æ³•å¯¹æ–‡æœ¬éƒ¨åˆ†è¿›è¡Œæ”»å‡»ã€‚(i)åˆ©ç”¨WordNetä¸­çš„è¶…ä¹‰è¯/åŒä¹‰è¯ï¼ˆhypernymy/hyponymyï¼‰å…³ç³»æ›¿æ¢å›¾åƒæ ‡é¢˜ä¸­çš„åè¯ï¼›(ii)å°†æ•°å­—æ”¹ä¸ºä¸åŒçš„æ•°å­—ï¼Œå¹¶åœ¨å¿…è¦æ—¶å°†ç›¸åº”çš„åè¯å•æ•°åŒ–æˆ–å¤æ•°åŒ–ï¼›(iii)æ£€æµ‹å…³ç³»ï¼Œå°†ä¸å¯äº’æ¢çš„åè¯çŸ­è¯­æ‰“ä¹±æˆ–æ›¿æ¢ä»‹è¯ã€‚</p><p>è¿™ç§æ–¹æ³•å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ç§é»‘ç›’æ”»å‡»ã€‚</p><h3 id="è¯­éŸ³è½¬æ–‡å­—æ¨¡å‹æ”»å‡»æ–¹æ³•"><a href="#è¯­éŸ³è½¬æ–‡å­—æ¨¡å‹æ”»å‡»æ–¹æ³•" class="headerlink" title="è¯­éŸ³è½¬æ–‡å­—æ¨¡å‹æ”»å‡»æ–¹æ³•"></a>è¯­éŸ³è½¬æ–‡å­—æ¨¡å‹æ”»å‡»æ–¹æ³•</h3><p>è¯­éŸ³è½¬æ–‡å­—ï¼ˆSpeech-to-textï¼‰ä¹Ÿç§°ä¸ºè¯­éŸ³è¯†åˆ«ï¼Œä»»åŠ¡æ˜¯è‡ªåŠ¨è¯†åˆ«å£è¯­å¹¶å°†å…¶ç¿»è¯‘æˆæ–‡æœ¬ã€‚[18]æ”»å‡»äº†åŸºäºLSTMçš„æœ€å…ˆè¿›çš„è¯­éŸ³è½¬æ–‡å­—ç¥ç»ç½‘ç»œDeep Speechã€‚ç»™å®šä¸€ä¸ªè‡ªç„¶æ³¢å½¢ï¼Œä½œè€…æ„é€ äº†ä¸€ä¸ªéŸ³é¢‘æ‰°åŠ¨ï¼Œè¿™ä¸ªæ‰°åŠ¨å‡ ä¹å¬ä¸åˆ°ï¼Œä½†å¯ä»¥é€šè¿‡æ·»åŠ åˆ°åŸå§‹æ³¢å½¢ä¸­è¿›è¡Œè¯†åˆ«ã€‚è¯¥æ‰°åŠ¨çš„æ„å»ºé‡‡ç”¨äº†C&amp;Wæ–¹æ³•çš„æ€æƒ³(å‚è€ƒ<a href="#C_W">è¿™é‡Œ</a>)ï¼Œå³é€šè¿‡æœ€å¤§çš„åƒç´ å˜åŒ–é‡æ¥æµ‹é‡å›¾åƒå¤±çœŸã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œä»–ä»¬é€šè¿‡è®¡ç®—éŸ³é¢‘çš„ç›¸å¯¹å“åº¦æ¥æµ‹é‡éŸ³é¢‘å¤±çœŸï¼Œå¹¶æå‡ºä½¿ç”¨CTCæŸå¤±æ¥å®Œæˆä¼˜åŒ–ä»»åŠ¡ã€‚ç„¶åä»–ä»¬ç”¨Adamä¼˜åŒ–å™¨è§£å†³äº†è¿™ä¸ªä»»åŠ¡[61]ã€‚</p><h3 id="å¤šæ¨¡æ€æ”»å‡»æŠ€æœ¯æ€»ç»“"><a href="#å¤šæ¨¡æ€æ”»å‡»æŠ€æœ¯æ€»ç»“" class="headerlink" title="å¤šæ¨¡æ€æ”»å‡»æŠ€æœ¯æ€»ç»“"></a>å¤šæ¨¡æ€æ”»å‡»æŠ€æœ¯æ€»ç»“</h3><p><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Adversarial-Attacks-on-Deep-Learning-Models-in-Natural-Language-Processing-A-Survey/cross_modal_attack_methods_table.png" alt></p><h2 id="æŒ‰åº”ç”¨åˆ’åˆ†çš„åŸºå‡†æ•°æ®é›†"><a href="#æŒ‰åº”ç”¨åˆ’åˆ†çš„åŸºå‡†æ•°æ®é›†" class="headerlink" title="æŒ‰åº”ç”¨åˆ’åˆ†çš„åŸºå‡†æ•°æ®é›†"></a>æŒ‰åº”ç”¨åˆ’åˆ†çš„åŸºå‡†æ•°æ®é›†</h2><p>è¿‘å¹´æ¥ï¼Œç¥ç»ç½‘ç»œåœ¨ä¸åŒçš„NLPé¢†åŸŸè·å¾—äº†æˆåŠŸï¼ŒåŒ…æ‹¬æ–‡æœ¬åˆ†ç±»ã€é˜…è¯»ç†è§£ã€æœºå™¨ç¿»è¯‘ã€æ–‡æœ¬æ‘˜è¦ã€é—®é¢˜å›ç­”ã€å¯¹è¯ç”Ÿæˆç­‰ç­‰ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»NLPåº”ç”¨çš„è§’åº¦å›é¡¾ç›®å‰å…³äºç¥ç»ç½‘ç»œç”Ÿæˆå¯¹æŠ—æ ·æœ¬çš„ä½œå“ã€‚è¡¨4æ ¹æ®å…¶åº”ç”¨é¢†åŸŸæ€»ç»“äº†æˆ‘ä»¬åœ¨æœ¬æ–‡ä¸­å›é¡¾çš„ä½œå“ã€‚</p><p><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Adversarial-Attacks-on-Deep-Learning-Models-in-Natural-Language-Processing-A-Survey/datasets_table.png" alt></p><p>æˆ‘ä»¬è¿˜åœ¨è¡¨ä¸­åˆ—å‡ºäº†è¿™äº›ä½œå“ä¸­ä½¿ç”¨çš„åŸºå‡†æ•°æ®é›†ä½œä¸ºè¾…åŠ©ä¿¡æ¯ã€‚å¦‚æœæƒ³äº†è§£æ›´å¤šï¼Œæˆ‘ä»¬æ¨èåˆ°æˆ‘ä»¬æ”¶é›†çš„é“¾æ¥/å‚è€ƒæ–‡çŒ®ä¸­è¿›ä¸€æ­¥è·å¾—æ•°æ®é›†çš„è¯¦ç»†æè¿°ã€‚è¯·æ³¨æ„ï¼Œå¸®åŠ©ç”Ÿæˆå¯¹æŠ—æ ·æœ¬çš„è¾…åŠ©æ•°æ®é›†å¹¶ä¸åŒ…æ‹¬åœ¨å†…ã€‚æˆ‘ä»¬åªä»‹ç»ç”¨äºè¯„ä¼°è¢«æ”»å‡»ç¥ç»ç½‘ç»œçš„æ•°æ®é›†ã€‚</p><h3 id="æ–‡æœ¬åˆ†ç±»"><a href="#æ–‡æœ¬åˆ†ç±»" class="headerlink" title="æ–‡æœ¬åˆ†ç±»"></a>æ–‡æœ¬åˆ†ç±»</h3><p>å¤§å¤šæ•°ç»¼è¿°ç±»æ–‡ç« éƒ½é›†ä¸­äºç¥ç»ç½‘ç»œåˆ†ç±»ä»»åŠ¡çš„æ”»å‡»ç®—æ³•ä¸Šã€‚æƒ…æ„Ÿåˆ†æä»»åŠ¡è¯•å›¾å°†æ–‡æœ¬æŒ‰ç…§æƒ…æ„Ÿå€¾å‘åˆ†æˆå‡ ç±»ï¼ˆç§¯æã€æ¶ˆæã€ä¸­ç«‹ï¼‰ï¼Œæ€§åˆ«è¯†åˆ«ã€è¯­æ³•é”™è¯¯æ£€æµ‹å’Œæ¶æ„è½¯ä»¶æ£€æµ‹å¯ä»¥è¢«æ¡†å®šä¸ºäºŒå…ƒåˆ†ç±»é—®é¢˜ã€‚å…³ç³»æå–å¯ä»¥è¡¨è¿°ä¸ºå•åˆ†ç±»æˆ–å¤šåˆ†ç±»é—®é¢˜ã€‚é¢„æµ‹åŒ»ç–—çŠ¶æ€æ˜¯ä¸€ä¸ªå¤šç±»é—®é¢˜ï¼Œç±»æ˜¯ç”±åŒ»å­¦ä¸“å®¶å®šä¹‰çš„ã€‚è¿™äº›ä½œå“é€šå¸¸ä½¿ç”¨å¤šä¸ªæ•°æ®é›†æ¥è¯„ä¼°å…¶æ”»å‡»ç­–ç•¥ï¼Œä»¥æ˜¾ç¤ºå…¶æ–¹æ³•çš„é€šç”¨æ€§å’Œé²æ£’æ€§ã€‚</p><p>[76]ä½¿ç”¨DBpediaæœ¬ä½“æ•°æ®é›†[71]å°†æ–‡æ¡£æ ·æœ¬åˆ†ç±»ä¸º14ä¸ªé«˜çº§ç±»ã€‚[38]ä½¿ç”¨IMDBç”µå½±è¯„è®º[83]è¿›è¡Œæƒ…æ„Ÿåˆ†æï¼Œä½¿ç”¨NLTKåŒ…æä¾›çš„Reuters-2å’ŒReuters-5æ–°é—»æ•°æ®é›†è¿›è¡Œåˆ†ç±»ã€‚[103]ä½¿ç”¨ä¸€ä¸ªæœªæŒ‡å®šçš„ç”µå½±è¯„è®ºæ•°æ®é›†è¿›è¡Œæƒ…æ„Ÿåˆ†æï¼Œå¹¶ä½¿ç”¨IMDBç”µå½±è¯„è®º[83]å’ŒNLTKåŒ…10æä¾›çš„Reuters-2å’ŒReuters-5æ–°é—»çº¿æ•°æ®é›†è¿›è¡Œåˆ†ç±»ã€‚[117]ä¹Ÿä½¿ç”¨IMDBç”µå½±è¯„è®ºæ•°æ®é›†è¿›è¡Œæƒ…æ„Ÿåˆ†æï¼Œè¿˜å¯¹å’ŒTwitteræ•°æ®é›†è¿›è¡Œäº†æ€§åˆ«åˆ†ç±»ã€‚[34]å¯¹Enronåƒåœ¾é‚®ä»¶æ•°æ®é›†[89]è¿›è¡Œåƒåœ¾é‚®ä»¶æ£€æµ‹ï¼Œå¹¶é‡‡ç”¨[156]ä¸­çš„6ä¸ªå¤§å‹æ•°æ®é›†ï¼Œå³AGâ€™sæ–°é—»ã€æœç‹—æ–°é—»[138]ã€DBPediaæœ¬ä½“æ•°æ®é›†ã€Yahooï¼Answersè¿›è¡Œæ–‡æœ¬åˆ†ç±»å’ŒYelpè¯„è®ºã€äºšé©¬é€Šè¯„è®º[88]è¿›è¡Œæƒ…æ„Ÿåˆ†æã€‚[30]ä¹Ÿä½¿ç”¨AGâ€™sæ–°é—»è¿›è¡Œæ–‡æœ¬åˆ†ç±»ï¼Œä½¿ç”¨æ–¯å¦ç¦æƒ…æ„Ÿæ ‘åº“ï¼ˆStanford Sentiment Treebankï¼ŒSSTï¼‰æ•°æ®é›†[128]è¿›è¡Œæƒ…æ„Ÿåˆ†æã€‚[118]å¯¹ä¸‰ä¸ªä»»åŠ¡è¿›è¡Œè¯„ä¼°ï¼šæƒ…æ„Ÿåˆ†æï¼ˆIMDBç”µå½±è¯„è®ºï¼ŒElec[55]ï¼ŒRotten Tomatoes[102]ï¼‰ï¼Œæ–‡æœ¬åˆ†ç±»ï¼ˆDBpedia Ontologyæ•°æ®é›†å’ŒRCV1[72]ï¼‰å’Œè¯­æ³•é”™è¯¯æ£€æµ‹ï¼ˆFCE-public[150]ï¼‰ã€‚[130]ç”¨çœŸå®ä¸–ç•Œçš„ç”µå­å¥åº·è®°å½•æ•°æ®ç”Ÿæˆäº†ç¥ç»åŒ»ç–—çŠ¶æ€é¢„æµ‹ç³»ç»Ÿçš„å¯¹æŠ—æ ·æœ¬ã€‚</p><p>è®¸å¤šä½œå“æ”»å‡»æ¶æ„è½¯ä»¶æ£€æµ‹æ¨¡å‹ã€‚[43ï¼Œ44]å¯¹ç¥ç»æ¶æ„è½¯ä»¶æ£€æµ‹ç³»ç»Ÿè¿›è¡Œæ”»å‡»ï¼Œä½¿ç”¨DREBINæ•°æ®é›†ï¼Œå…¶ä¸­åŒ…å«æ­£å¸¸å’Œæ¶æ„androidåº”ç”¨ç¨‹åº[7]ã€‚[114]æ”¶é›†æ­£å¸¸ windowsåº”ç”¨æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨å¾®è½¯æ¶æ„è½¯ä»¶åˆ†ç±»æŒ‘æˆ˜æ•°æ®é›†[113]ä½œä¸ºæ¶æ„éƒ¨åˆ†ã€‚[52]ä»æŸç½‘ç«™æŠ“å–180ä¸ªç¨‹åºåŠç›¸åº”çš„è¡Œä¸ºæŠ¥å‘Šè¿›è¡Œæ¶æ„è½¯ä»¶åˆ†æã€‚åœ¨æŠ“å–çš„ç¨‹åºä¸­ï¼Œæœ‰70%æ˜¯æ¶æ„è½¯ä»¶ã€‚[97]ä»¥æ–‡æœ¬åˆ†ç±»ç¥ç»æ¨¡å‹ä¸ºç›®æ ‡ï¼Œä½¿ç”¨å››ä¸ªæ•°æ®é›†æ¥è¯„ä¼°å…¶æ”»å‡»æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯å§“æ°åˆ†ç±»æ•°æ®é›†ã€é—®é¢˜åˆ†ç±»å®éªŒæ•°æ®[75]ã€é˜¿æ‹‰ä¼¯è¯­æ¨æ–‡æƒ…æ„Ÿåˆ†ç±»æ•°æ®é›†[1]å’ŒIMDBç”µå½±è¯„è®ºæ•°æ®é›†ã€‚[145]å°†å…³ç³»æå–å»ºæ¨¡ä¸ºä¸€ä¸ªåˆ†ç±»é—®é¢˜ï¼Œç›®æ ‡æ˜¯é¢„æµ‹ç»™å®šæ–‡æœ¬æåŠçš„å®ä½“å¯¹ä¹‹é—´å­˜åœ¨çš„å…³ç³»ã€‚ä»–ä»¬ä½¿ç”¨äº†ä¸¤ä¸ªå…³ç³»æ•°æ®é›†ï¼ŒNYTæ•°æ®é›†[111]å’ŒUWæ•°æ®é›†[78]ã€‚[10]çš„ç›®æ ‡æ˜¯æé«˜ç¥ç»ç½‘ç»œå¯¹è”åˆå®ä½“å’Œå…³ç³»æå–çš„åŠŸæ•ˆã€‚ä¸å‚è€ƒæ–‡çŒ®[145]ä¸­çš„æ–¹æ³•ä¸åŒï¼Œä½œè€…å°†å…³ç³»æå–ä»»åŠ¡å»ºæ¨¡ä¸ºä¸€ä¸ªå¤šæ ‡ç­¾å¤´é€‰æ‹©ï¼ˆmulti-label head selectionï¼‰é—®é¢˜ã€‚ä»–ä»¬çš„å·¥ä½œä¸­ä½¿ç”¨äº†å››ä¸ªæ•°æ®é›†ï¼ŒACE04æ•°æ®é›†[28]ã€CoNLL04 ECä»»åŠ¡[115]ã€è·å…°æˆ¿åœ°äº§åˆ†ç±»(DREC)æ•°æ®é›†[11]å’Œä¸è‰¯è¯ç‰©äº‹ä»¶(ADE)[45]ã€‚</p><h3 id="æœºå™¨ç¿»è¯‘"><a href="#æœºå™¨ç¿»è¯‘" class="headerlink" title="æœºå™¨ç¿»è¯‘"></a>æœºå™¨ç¿»è¯‘</h3><p>æœºå™¨ç¿»è¯‘å·¥ä½œåœ¨ä¸¤ä¸ªæ•°æ®é›†ä¸Šï¼Œå…¶ä¸­ä¸€ä¸ªä½¿ç”¨æºè¯­è¨€ï¼Œå¦ä¸€ä¸ªæ˜¯ç›®æ ‡è¯­è¨€ã€‚</p><p>[12]ä½¿ç”¨ä¸ºIWSLT 2016[87]å‡†å¤‡çš„TED talkså¹¶è¡Œè¯­æ–™æ¥æµ‹è¯•NMTç³»ç»Ÿã€‚å®ƒè¿˜æ”¶é›†äº†æ³•è¯­ã€å¾·è¯­å’Œæ·å…‹è¯­æ–™ç”¨äºç”Ÿæˆè‡ªç„¶å™ªå£°ï¼Œä»¥å»ºç«‹ä¸€ä¸ªæŸ¥æ‰¾è¡¨ï¼Œå…¶ä¸­åŒ…å«å¯èƒ½çš„è¯æ±‡æ›¿æ¢ã€‚è¿™äº›æ›¿æ¢è¯éšåè¢«ç”¨äºç”Ÿæˆå¯¹æŠ—æ ·æœ¬ã€‚[29]ä¹Ÿä½¿ç”¨äº†åŒæ ·çš„TED talksè¯­æ–™ï¼Œå¹¶ä½¿ç”¨äº†å¾·è¯­å¯¹è‹±è¯­ã€æ·å…‹è¯­å¯¹è‹±è¯­ã€æ³•è¯­å¯¹è‹±è¯­ã€‚</p><h3 id="æœºå™¨ç†è§£"><a href="#æœºå™¨ç†è§£" class="headerlink" title="æœºå™¨ç†è§£"></a>æœºå™¨ç†è§£</h3><p>æœºå™¨ç†è§£æ•°æ®é›†é€šå¸¸å‘æœºå™¨æä¾›ä¸Šä¸‹æ–‡æ–‡æ¡£æˆ–æ®µè½ã€‚åŸºäºå¯¹ä¸Šä¸‹æ–‡çš„ç†è§£ï¼Œæœºå™¨ç†è§£æ¨¡å‹å¯ä»¥å›ç­”ä¸€ä¸ªé—®é¢˜ã€‚</p><p>Jiaå’ŒLiangæ˜¯æœ€æ—©è€ƒè™‘æ–‡æœ¬å¯¹æŠ—çš„äººä¹‹ä¸€ï¼Œä»–ä»¬å°†ç¥ç»æœºå™¨ç†è§£æ¨¡å‹ä½œä¸ºç›®æ ‡[54]ã€‚ä»–ä»¬ä½¿ç”¨æ–¯å¦ç¦ç­”é¢˜æ•°æ®é›†ï¼ˆSQuADï¼‰æ¥è¯„ä¼°ä»–ä»¬çš„æ”»å‡»å¯¹ç¥ç»æœºå™¨ç†è§£æ¨¡å‹çš„å½±å“ã€‚SQuADæ˜¯ä¸€ä¸ªè¢«å¹¿æ³›è®¤å¯çš„æœºå™¨ç†è§£åŸºå‡†æ•°æ®é›†ã€‚[142]æ²¿ç”¨äº†å‰äººçš„å·¥ä½œï¼Œä¹Ÿåœ¨SQuADæ•°æ®é›†ä¸Šè¿›è¡Œäº†ç ”ç©¶ã€‚è™½ç„¶å‚è€ƒæ–‡çŒ®[14]çš„é‡ç‚¹æ˜¯å¼€å‘ä¸€ä¸ªå¥å£®çš„æœºå™¨ç†è§£æ¨¡å‹ï¼Œè€Œä¸æ˜¯æ”»å‡»MCæ¨¡å‹ï¼Œä½†ä½œè€…ä½¿ç”¨å¯¹æŠ—æ ·æœ¬æ¥è¯„ä¼°ä»–ä»¬æå‡ºçš„ç³»ç»Ÿã€‚ä»–ä»¬ä½¿ç”¨MovieQAå¤šé€‰é¢˜å›ç­”æ•°æ®é›†[134]è¿›è¡Œè¯„ä¼°ã€‚å‚è€ƒæ–‡çŒ®[19]é’ˆå¯¹å¯åˆ†åŒ–ç¥ç»è®¡ç®—æœº(DNC)çš„æ”»å‡»ï¼ŒDNCæ˜¯ä¸€ç§å…·æœ‰DNNçš„æ–°å‹è®¡ç®—æœºã€‚å®ƒåˆ©ç”¨bAbIä»»åŠ¡å¯¹é€»è¾‘é—®é¢˜å›ç­”çš„æ”»å‡»è¿›è¡Œäº†è¯„ä¼°ã€‚</p><h3 id="æ–‡æœ¬æ‘˜è¦"><a href="#æ–‡æœ¬æ‘˜è¦" class="headerlink" title="æ–‡æœ¬æ‘˜è¦"></a>æ–‡æœ¬æ‘˜è¦</h3><p>æ–‡æœ¬æ‘˜è¦çš„ç›®æ ‡æ˜¯ç”¨ç®€æ´çš„è¡¨è¾¾æ–¹å¼æ¥æ¦‚æ‹¬ç»™å®šæ–‡æ¡£æˆ–æ®µè½çš„æ ¸å¿ƒæ„æ€ã€‚å‚è€ƒæ–‡çŒ®[22]è¯„ä¼°äº†ä»–ä»¬å¯¹åŒ…æ‹¬æ–‡æœ¬æ‘˜è¦åœ¨å†…çš„å¤šç§åº”ç”¨çš„æ”»å‡»ï¼Œå®ƒä½¿ç”¨DUC2003,18 DUC2004,19å’ŒGigaword20æ¥è¯„ä¼°å¯¹æŠ—æ ·æœ¬çš„æœ‰æ•ˆæ€§ã€‚</p><h3 id="æ–‡æœ¬è•´æ¶µ"><a href="#æ–‡æœ¬è•´æ¶µ" class="headerlink" title="æ–‡æœ¬è•´æ¶µ"></a>æ–‡æœ¬è•´æ¶µ</h3><p>æ–‡æœ¬è•´æ¶µï¼ˆTextual entailmentï¼ŒTEï¼‰çš„åŸºæœ¬ä»»åŠ¡æ˜¯åˆ¤æ–­ä¸¤ä¸ªæ–‡æœ¬ç‰‡æ®µæœ‰æŒ‡å‘å…³ç³»ã€‚å½“è®¤ä¸ºä¸€ä¸ªæ–‡æœ¬ç‰‡æ®µçœŸå®æ—¶ï¼Œå¯ä»¥æ¨æ–­å‡ºå¦ä¸€ä¸ªæ–‡æœ¬ç‰‡æ–­çš„çœŸå®æ€§ã€‚ä¹Ÿå°±æ˜¯æŒ‡ï¼Œä¸€ä¸ªæ–‡æœ¬ç‰‡æ®µè•´æ¶µäº†å¦ä¸€ä¸ªæ–‡æœ¬ç‰‡æ®µçš„çŸ¥è¯†ã€‚å¯ä»¥åˆ†åˆ«ç§°è•´æ¶µçš„æ–‡æœ¬(entailing texts)ä¸ºæ–‡æœ¬(text)ï¼Œè¢«è•´æ¶µçš„æ–‡æœ¬(entailed texts)ä¸ºå‡è®¾(hypothesis)ã€‚æ–‡æœ¬è•´æ¶µå…³ç³»ä¸æ˜¯çº¯ç²¹çš„é€»è¾‘æ¨ç†ï¼Œå®ƒçš„æ¡ä»¶æ›´ä¸ºå®½æ¾ï¼Œå¯ä»¥è¿™æ ·å®šä¹‰ï¼šå¦‚æœä¸€ä¸ªäººè¯»äº†$t$èƒ½å¤Ÿæ¨è®º$h$<strong>éå¸¸å¯èƒ½</strong>æ˜¯çœŸå®çš„ï¼Œé‚£ä¹ˆ$t$è•´æ¶µ $h$ $(t\Rightarrow h)$ã€‚</p><p>[56]åœ¨ä¸¤ä¸ªentailmentæ•°æ®é›†ä¸Šè¯„ä¼°äº†å„ç§æ¨¡å‹ï¼ŒStanford Natural Lauguage Inferenceï¼ˆSNLIï¼‰[15]å’ŒSciTail[58]ã€‚[91]ä¹Ÿä½¿ç”¨äº†SNLIæ•°æ®é›†ï¼Œè¿˜ä½¿ç”¨äº†MultiNLI[144]æ•°æ®é›†ã€‚</p><h3 id="è¯æ€§æ ‡æ³¨"><a href="#è¯æ€§æ ‡æ³¨" class="headerlink" title="è¯æ€§æ ‡æ³¨"></a>è¯æ€§æ ‡æ³¨</h3><p>è¯æ€§æ ‡æ³¨ï¼ˆPart-of-Speech tagging æˆ– POS taggingï¼‰æ˜¯æŒ‡å¯¹äºå¥å­ä¸­çš„æ¯ä¸ªè¯éƒ½æŒ‡æ´¾ä¸€ä¸ªåˆé€‚çš„è¯æ€§ï¼Œä¹Ÿå°±æ˜¯è¦ç¡®å®šæ¯ä¸ªè¯æ˜¯åè¯ã€åŠ¨è¯ã€å½¢å®¹è¯æˆ–å…¶ä»–è¯æ€§çš„è¿‡ç¨‹ï¼Œåˆç§°è¯ç±»æ ‡æ³¨æˆ–è€…ç®€ç§°æ ‡æ³¨ã€‚è¯æ€§æ ‡æ³¨æ˜¯è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„ä¸€é¡¹åŸºç¡€ä»»åŠ¡ï¼Œåœ¨è¯­éŸ³è¯†åˆ«ã€ä¿¡æ¯æ£€ç´¢åŠè‡ªç„¶è¯­è¨€å¤„ç†çš„è®¸å¤šé¢†åŸŸéƒ½å‘æŒ¥ç€é‡è¦çš„ä½œç”¨ã€‚</p><p>[151]é‡‡ç”¨äº†å‚è€ƒæ–‡çŒ®[93]ä¸­çš„æ–¹æ³•ï¼Œé€šè¿‡å¼•å…¥å¯¹æŠ—æ€§è®­ç»ƒæ¥æ„å»ºä¸€ä¸ªæ›´å¥å£®çš„ç¥ç»ç½‘ç»œï¼Œä½†å®ƒå°†è¯¥ç­–ç•¥ï¼ˆç¨ä½œä¿®æ”¹ï¼‰åº”ç”¨äºPOSæ ‡è®°ã€‚é€šè¿‡å¯¹æ­£å¸¸å’Œå¯¹æŠ—æ ·æœ¬çš„æ··åˆè®­ç»ƒï¼Œä½œè€…å‘ç°å¯¹æŠ—æ ·æœ¬ä¸ä»…æœ‰åŠ©äºæé«˜æ ‡è®°ç²¾åº¦ï¼Œè€Œä¸”æœ‰åŠ©äºä¸‹æ¸¸çš„ä¾èµ–æ€§è§£æä»»åŠ¡ï¼Œåœ¨ä¸åŒçš„åºåˆ—æ ‡è®°ä»»åŠ¡ä¸­æ™®éæœ‰æ•ˆã€‚</p><p>ä»–ä»¬åœ¨è¯„ä¼°ä¸­ä½¿ç”¨çš„æ•°æ®é›†åŒ…æ‹¬ï¼šã€Šåå°”è¡—æ—¥æŠ¥ã€‹ï¼ˆWSJï¼‰éƒ¨åˆ†çš„Penn Treebankï¼ˆPTBï¼‰[85]å’ŒUniversal Dependenciesï¼ˆUDï¼‰v1.2[99]çš„æ ‘åº“ã€‚</p><h3 id="å¯¹è¯ç”Ÿæˆ"><a href="#å¯¹è¯ç”Ÿæˆ" class="headerlink" title="å¯¹è¯ç”Ÿæˆ"></a>å¯¹è¯ç”Ÿæˆ</h3><p>å¯¹è¯ç”Ÿæˆï¼ˆDialogue Generationï¼‰æ˜¯Siriå’ŒAlexaç­‰ç°å®ä¸–ç•Œè™šæ‹ŸåŠ©æ‰‹çš„åŸºæœ¬ç»„ä»¶ï¼Œå®ƒæ˜¯ä¸ºç”¨æˆ·ç»™å‡ºçš„å¸–å­è‡ªåŠ¨ç”Ÿæˆå“åº”çš„æ–‡æœ¬ç”Ÿæˆä»»åŠ¡ã€‚</p><p>[98]æ˜¯æœ€æ—©æ”»å‡»å¯¹è¯ç”Ÿæˆæ¨¡å‹çš„ä½œå“ä¹‹ä¸€ã€‚å®ƒä½¿ç”¨Ubuntuå¯¹è¯è¯­æ–™åº“[82]å’ŒåŠ¨æ€çŸ¥è¯†å›¾è°±ç½‘ç»œä¸åä½œé€šä¿¡ä»£ç†(CoCoA)æ•°æ®é›†[47]æ¥è¯„ä¼°å…¶ä¸¤ç§æ”»å‡»ç­–ç•¥ã€‚</p><h3 id="è·¨æ¨¡æ€åº”ç”¨"><a href="#è·¨æ¨¡æ€åº”ç”¨" class="headerlink" title="è·¨æ¨¡æ€åº”ç”¨"></a>è·¨æ¨¡æ€åº”ç”¨</h3><p>[129]ä½¿ç”¨å¸Œæ‹‰é‡Œ-å…‹æ—é¡¿çš„ç”µå­é‚®ä»¶ä»¥å›¾åƒçš„å½¢å¼å¯¹OCRç³»ç»Ÿè¿›è¡Œäº†å¯¹æŠ—æ€§å®ä¾‹çš„è¯„ä¼°ã€‚å®ƒè¿˜ä½¿ç”¨Rotten Tomatoeså’ŒIMDBè¯„è®ºæ•°æ®é›†å¯¹NLPåº”ç”¨è¿›è¡Œäº†æ”»å‡»ã€‚[153]ä¸­çš„å·¥ä½œæ”»å‡»äº†ä¸ºåœºæ™¯æ–‡æœ¬è¯†åˆ«è®¾è®¡çš„ç¥ç»ç½‘ç»œã€‚ä½œè€…åœ¨ä¸‰ä¸ªè£å‰ªå­—å›¾åƒè¯†åˆ«çš„æ ‡å‡†åŸºå‡†ä¸Šè¿›è¡Œäº†å®éªŒï¼Œå³è¡—æ™¯æ–‡æœ¬æ•°æ®é›†ï¼ˆSVTï¼‰[139]ICDAR 2013æ•°æ®é›†ï¼ˆIC13ï¼‰[57]å’ŒIIIT 5Kå­—æ•°æ®é›†ï¼ˆIIIT5Kï¼‰[92]ã€‚[20]å¯¹å›¾åƒå­—å¹•ç¥ç»æ¨¡å‹è¿›è¡Œæ”»å‡»ã€‚ä½¿ç”¨çš„æ•°æ®é›†æ˜¯å¾®è½¯COCOï¼ˆMSCOCOï¼‰æ•°æ®é›†[77]ã€‚[148]è‡´åŠ›äºæ”»å‡»å›¾åƒå­—å¹•å’Œè§†è§‰é—®é¢˜å›ç­”çš„ç¥ç»æ¨¡å‹çš„é—®é¢˜ã€‚å¯¹äºç¬¬ä¸€ä¸ªä»»åŠ¡ï¼Œå®ƒä½¿ç”¨Visual Genomeæ•°æ®é›†[64]ã€‚å¯¹äºç¬¬äºŒä¸ªä»»åŠ¡ï¼Œå®ƒä½¿ç”¨å‚è€ƒæ–‡çŒ®[6]ä¸­æ”¶é›†å’Œå¤„ç†çš„VQAæ•°æ®é›†ã€‚[125]è‡´åŠ›äºè§†è§‰-è¯­ä¹‰åµŒå…¥ï¼ˆVisual-Semantic Embeddingï¼‰åº”ç”¨ï¼Œå…¶ä¸­ä½¿ç”¨äº†MSCOCOæ•°æ®é›†ã€‚[18]é’ˆå¯¹è¯­éŸ³è¯†åˆ«é—®é¢˜ã€‚ä½¿ç”¨çš„æ•°æ®é›†æ˜¯Mozilla Common Voiceæ•°æ®é›†</p><h3 id="å¤šåº”ç”¨"><a href="#å¤šåº”ç”¨" class="headerlink" title="å¤šåº”ç”¨"></a>å¤šåº”ç”¨</h3><p>ä¸€äº›ä½œå“å°†ä»–ä»¬çš„æ”»å‡»æ–¹æ³•æ”¹ç¼–æˆä¸åŒçš„åº”ç”¨ï¼Œå³è¯„ä¼°ä»–ä»¬çš„æ–¹æ³•åœ¨ä¸åŒåº”ç”¨ä¸­çš„å¯è½¬ç§»æ€§ã€‚</p><p>[22]å¯¹åºåˆ—åˆ°åºåˆ—æ¨¡å‹è¿›è¡Œäº†æ”»å‡»ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒè¯„ä¼°äº†å¯¹ä¸¤ä¸ªåº”ç”¨çš„æ”»å‡»ï¼šæ–‡æœ¬æ‘˜è¦å’Œæœºå™¨ç¿»è¯‘ã€‚å¯¹äºæ–‡æœ¬æ‘˜è¦ï¼Œå¦‚å‰æ‰€è¿°ï¼Œå®ƒä½¿ç”¨äº†ä¸‰ä¸ªæ•°æ®é›†DUC2003ã€DUC2004å’ŒGigawordã€‚å¯¹äºæœºå™¨ç¿»è¯‘ï¼Œå®ƒé‡‡æ ·äº†ä¸€ä¸ªå­é›†å½¢å¼WMTâ€™16å¤šæ¨¡æ€ç¿»è¯‘æ•°æ®é›†ã€‚å‚è€ƒæ–‡çŒ®[53]æå‡ºäº†ç”Ÿæˆå¥æ³•å¯¹æŠ—æ€§çš„è¯‘æ–‡ï¼Œå¹¶å¯¹æƒ…æ„Ÿåˆ†æå’Œæ–‡æœ¬åŒ…å«åº”ç”¨çš„æ”»å‡»è¿›è¡Œäº†è¯„ä¼°ã€‚å®ƒä½¿ç”¨SSTè¿›è¡Œæƒ…æ„Ÿåˆ†æï¼Œä½¿ç”¨SICK[86]è¿›è¡Œæ–‡æœ¬ç¼©ç•¥ã€‚å‚è€ƒæ–‡çŒ®[157]æ˜¯ä¸€ç§åœ¨ç¥ç»æ¨¡å‹ä¸Šç”Ÿæˆå¯¹æŠ—æ ·æœ¬çš„é€šç”¨æ–¹æ³•ã€‚ç ”ç©¶çš„åº”ç”¨åŒ…æ‹¬å›¾åƒåˆ†ç±»(MINISTæ•°å­—å›¾åƒæ•°æ®é›†)ã€æ–‡æœ¬ç¼©ç•¥(SNLI)å’Œæœºå™¨ç¿»è¯‘ã€‚å‚è€ƒæ–‡çŒ®[93]è¯„ä¼°äº†å¯¹äº”ä¸ªæ•°æ®é›†çš„æ”»å‡»ï¼Œæ¶µç›–äº†æƒ…æ„Ÿåˆ†æï¼ˆIMDBç”µå½±è¯„è®ºã€Elecäº§å“è¯„è®ºã€Rotten Tomatoesç”µå½±è¯„è®ºï¼‰å’Œæ–‡æœ¬åˆ†ç±»ï¼ˆDBpediaæœ¬ä½“ã€RCV1æ–°é—»æ–‡ç« ï¼‰ã€‚å‚è€ƒæ–‡çŒ®[127]çš„ç›®æ ‡æ˜¯æƒ…æ„Ÿåˆ†æå’Œè§†è§‰é—®é¢˜å›ç­”ã€‚å¯¹äºæƒ…æ„Ÿåˆ†æï¼Œå®ƒä½¿ç”¨Rotten Tomatoç”µå½±è¯„è®ºå’ŒIMDBç”µå½±è¯„è®ºæ•°æ®é›†ã€‚å¯¹äºè§†è§‰é—®é¢˜å›ç­”ï¼Œå®ƒåœ¨Zhuç­‰äºº[158]æä¾›çš„æ•°æ®é›†ä¸Šè¿›è¡Œæµ‹è¯•ã€‚</p><h1 id="äº”ã€DEFENSE"><a href="#äº”ã€DEFENSE" class="headerlink" title="äº”ã€DEFENSE"></a>äº”ã€DEFENSE</h1><p>ä¸ºç¥ç»ç½‘ç»œç”Ÿæˆå¯¹æŠ—æ ·æœ¬çš„ä¸€ä¸ªé‡è¦ç›®çš„æ˜¯åˆ©ç”¨è¿™äº›å¯¹æŠ—æ ·æœ¬æ¥å¢å¼ºæ¨¡å‹çš„é²æ£’æ€§[40]ã€‚åœ¨æ–‡æœ¬DNNä¸­ï¼Œæœ‰ä¸¤ç§å¸¸è§çš„æ–¹å¼æ¥å®ç°è¿™ä¸€ç›®æ ‡ï¼šå¯¹æŠ—æ€§è®­ç»ƒå’ŒçŸ¥è¯†è’¸é¦ã€‚å¯¹æŠ—æ€§è®­ç»ƒåœ¨æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­åŠ å…¥å¯¹æŠ—æ ·æœ¬ã€‚çŸ¥è¯†è’¸é¦åˆ™æ˜¯å¯¹ç¥ç»ç½‘ç»œæ¨¡å‹è¿›è¡Œæ“ä½œï¼Œè®­ç»ƒä¸€ä¸ªæ–°çš„æ¨¡å‹ã€‚</p><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»ä¸€äº›å±äºè¿™ä¸¤ä¸ªæ–¹å‘çš„ä»£è¡¨æ€§ç ”ç©¶ã€‚å…³äºæœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ æ¨¡å‹åŠåº”ç”¨çš„æ›´å…¨é¢çš„é˜²å¾¡ç­–ç•¥ï¼Œè¯·å‚è€ƒå‚è€ƒæ–‡çŒ®[2ï¼Œ13]ã€‚</p><h2 id="å¯¹æŠ—æ€§è®­ç»ƒ"><a href="#å¯¹æŠ—æ€§è®­ç»ƒ" class="headerlink" title="å¯¹æŠ—æ€§è®­ç»ƒ"></a>å¯¹æŠ—æ€§è®­ç»ƒ</h2><h3 id="æ•°æ®å¢å¼º"><a href="#æ•°æ®å¢å¼º" class="headerlink" title="æ•°æ®å¢å¼º"></a>æ•°æ®å¢å¼º</h3><p>æ•°æ®å¢å¼ºå°†åŸå§‹æ•°æ®æ‰©å……ä»¥å¯¹æŠ—æ ·æœ¬ï¼Œè¯•å›¾åœ¨è®­ç»ƒé˜¶æ®µä»¤æ¨¡å‹æ¥æ”¶æ›´å¤šæ ·æœ¬çš„è®­ç»ƒã€‚åœ¨è¢«æ”»å‡»çš„DNNä¸Šç”¨å¯¹æŠ—æ ·æœ¬è¿›è¡Œé¢å¤–è®­ç»ƒï¼Œç”¨æ¥å¯¹æŠ—é»‘ç›’æ”»å‡»ã€‚</p><p>[54]çš„ä½œè€…è¯•å›¾é€šè¿‡åœ¨åŒ…å«å¯¹æŠ—æ ·æœ¬çš„å¢å¼ºæ•°æ®é›†ä¸Šè¿›è¡Œè®­ç»ƒæ¥å¢å¼ºé˜…è¯»ç†è§£æ¨¡å‹ã€‚å®éªŒè¡¨æ˜ï¼Œæ•°æ®å¢å¼ºå¯¹ä½¿ç”¨ç›¸åŒå¯¹æŠ—æ ·æœ¬çš„æ”»å‡»æ˜¯æœ‰æ•ˆçš„ã€ç¨³å¥çš„ã€‚ç„¶è€Œï¼Œä»–ä»¬çš„å·¥ä½œä¹Ÿè¯æ˜äº†è¿™ç§å¢å¼ºç­–ç•¥åœ¨é¢å¯¹å…¶ä»–ç±»å‹çš„å¯¹æŠ—æ ·æœ¬çš„æ”»å‡»æ—¶ä»ç„¶æ˜¯è„†å¼±çš„ã€‚[142]ä¹Ÿæœ‰ç±»ä¼¼çš„æƒ³æ³•æ¥å¢å¼ºè®­ç»ƒæ•°æ®é›†ï¼Œä½†é€‰æ‹©äº†ä¿¡æ¯é‡æ›´å¤§çš„å¯¹æŠ—æ ·æœ¬ã€‚[56]ä¸­çš„å·¥ä½œæ˜¯ç”¨å¯¹æŠ—æ ·æœ¬æ¥è®­ç»ƒtext entailmentç³»ç»Ÿï¼Œä½¿ç³»ç»Ÿæ›´åŠ å¥å£®ã€‚ä½œè€…æå‡ºäº†ä¸‰ç§æ–¹æ³•æ¥ç”Ÿæˆæ›´å¤šå…·æœ‰å¤šæ ·åŒ–ç‰¹å¾çš„æ•°æ®ã€‚(1)åŸºäºçŸ¥è¯†çš„ï¼Œç”¨å‡ ä¸ªç»™å®šçš„çŸ¥è¯†åº“ä¸­æä¾›çš„è¶…è¯/åŒä¹‰è¯ï¼ˆhypernym/hyponymï¼‰æ›¿æ¢å•è¯;(2)æ‰‹å·¥åˆ¶ä½œï¼Œåœ¨ç°æœ‰çš„entailmentä¸­å¢åŠ å¦å®šè¯;(3)åŸºäºç¥ç»æ¨¡å‹çš„ï¼Œåˆ©ç”¨seq2seqæ¨¡å‹ï¼Œé€šè¿‡å¼ºåˆ¶æ‰§è¡ŒæŸå¤±å‡½æ•°æ¥è¡¡é‡åŸå§‹å‡è¯´å’Œé¢„æµ‹å‡è¯´ä¹‹é—´çš„äº¤å‰ç†µæ¥ç”Ÿæˆentailmentå®ä¾‹ã€‚åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œä»–ä»¬é‡‡ç”¨äº†ç”Ÿæˆå¼å¯¹æŠ—ç½‘ç»œçš„æ€æƒ³ï¼Œè®­ç»ƒä¸€ä¸ªåˆ¤åˆ«å™¨å’Œä¸€ä¸ªç”Ÿæˆå™¨ï¼Œå¹¶åœ¨åˆ¤åˆ«å™¨çš„ä¼˜åŒ–æ­¥éª¤ä¸­åŠ å…¥å¯¹æŠ—å®ä¾‹ã€‚[12]ä¸­çš„å·¥ä½œæ¢ç´¢äº†å¦ä¸€ç§æ•°æ®å¢å¼ºçš„æ–¹å¼ã€‚å®ƒå°†å¹³å‡å­—ç¬¦åµŒå…¥ä½œä¸ºä¸€ä¸ªè¯çš„è¡¨ç¤ºï¼Œå¹¶å°†å…¶çº³å…¥åˆ°è¾“å…¥ä¸­ã€‚è¿™ç§æ–¹æ³•å¯¹å­—ç¬¦åŠ æ‰°å¦‚swapã€midå’ŒRandç­‰æœ¬è´¨ä¸Šä¸æ•æ„Ÿï¼Œå› æ­¤å¯ä»¥æŠµå¾¡å·¥ä½œä¸­æå‡ºçš„è¿™äº›åŠ æ‰°æ”»å‡»é€ æˆçš„å™ªå£°ã€‚ä½†æ˜¯ï¼Œè¿™ç§é˜²å¾¡å¯¹å…¶ä»–ä¸æ‰°ä¹±å­—ç¬¦å‘½ä»¤çš„æ”»å‡»æ— æ•ˆã€‚</p><p>è¡¨5ç»™å‡ºäº†å‚è€ƒæ–‡çŒ®[54]ä¸­å¯¹æŠ—æ€§è®­ç»ƒçš„æœ‰æ•ˆæ€§çš„ä¸€ä¸ªä¾‹å­ã€‚</p><p><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Adversarial-Attacks-on-Deep-Learning-Models-in-Natural-Language-Processing-A-Survey/adversarial_training_example_table.png" alt></p><p>ä½œè€…æŒ‡å‡ºï¼Œåœ¨å¯¹å¯¹æŠ—æ ·æœ¬è¿›è¡Œè®­ç»ƒæ—¶ï¼Œéœ€è¦ç²¾å¿ƒè®¾è®¡å¯¹æŠ—æ ·æœ¬ï¼Œä»¥æ”¹è¿›æ¨¡å‹ã€‚ä»è¡¨ä¸­ä¸¤ç§æ”»å‡»æ–¹æ³•çš„ç»“æœå¯ä»¥çœ‹å‡ºè¿™ä¸€ç‚¹ã€‚</p><h3 id="æ¨¡å‹æ­£åˆ™åŒ–"><a href="#æ¨¡å‹æ­£åˆ™åŒ–" class="headerlink" title="æ¨¡å‹æ­£åˆ™åŒ–"></a>æ¨¡å‹æ­£åˆ™åŒ–</h3><p>æ¨¡å‹æ­£åˆ™åŒ–ï¼ˆModel regularizationï¼‰å¼ºåˆ¶ä»¤å¯¹æŠ—æ ·æœ¬ä½œä¸ºæ­£åˆ™é¡¹ï¼Œåœ¨è®­ç»ƒç½‘ç»œæ—¶è¿›è¡Œè”åˆä¼˜åŒ–ã€‚</p><script type="math/tex; mode=display">\min \left(J(f(x), y)+\lambda J\left(f\left(x^{\prime}\right), y\right)\right)</script><p>å…¶ä¸­$\lambda$æ˜¯è¶…å‚æ•°ã€‚</p><p>å—[40]å¯å‘ï¼Œ[93]ä»¥çº¿æ€§è¿‘ä¼¼çš„æ–¹å¼æ„å»ºå¯¹æŠ—å¼è®­ç»ƒï¼Œ</p><script type="math/tex; mode=display">\begin{array}{c}-\log p\left(\left.y|x+-\epsilon g /||g|\right|_{2}, ; \theta\right) \\g=\partial_{x} \log p(y \mid x ; \hat{\theta})\end{array}</script><p>å…¶ä¸­$|g|_{2}$æ˜¯$L_2$èŒƒæ•°æ­£åˆ™é¡¹ï¼Œ$\theta$æ˜¯ç¥ç»ç½‘ç»œçš„å‚æ•°ï¼Œ$\hat{\theta}$æ˜¯$\theta$çš„ä¸€ä»½é™æ€æ‹·è´ã€‚</p><p>ä¸[40]ä¸åŒçš„æ˜¯ï¼Œä½œè€…ä»¥è¯åµŒå…¥çš„æ–¹å¼è¿›è¡Œäº†å¯¹æŠ—ç”Ÿæˆå’Œè®­ç»ƒã€‚æ­¤å¤–ï¼Œä»–ä»¬è¿˜æ‰©å±•äº†ä¹‹å‰å…³äºæ”»å‡»å›¾åƒæ·±åº¦ç¥ç»æ¨¡å‹çš„å·¥ä½œ[94]ï¼Œå…¶ä¸­å±€éƒ¨åˆ†å¸ƒå¹³æ»‘åº¦ï¼ˆlocal distribution smoothness, LDSï¼‰è¢«å®šä¹‰ä¸ºä¸¤ä¸ªåˆ†å¸ƒï¼ˆåŸå§‹æ•°æ®å’Œå¯¹æŠ—æ•°æ®ï¼‰çš„KLæ•£åº¦çš„è´Ÿå€¼ã€‚LDSè¡¡é‡äº†æ¨¡å‹å¯¹æœ¬åœ°å’Œ â€œè™šæ‹Ÿ â€œå¯¹æŠ—æ–¹å‘çš„æ‰°åŠ¨çš„é²æ£’æ€§ã€‚å¯¹æŠ—æ ·æœ¬è¢«è®¡ç®—ä¸ºæ¨¡å‹åˆ†å¸ƒå¯¹KLæ•£åº¦æœ€æ•æ„Ÿçš„æ–¹å‘ã€‚ä»–ä»¬è¿˜å°†è¿™ç§æ”»å‡»ç­–ç•¥åº”ç”¨åœ¨è¯åµŒå…¥ä¸Šï¼Œå¹¶é€šè¿‡æ·»åŠ å¯¹æŠ—ä¾‹ä½œä¸ºæ­£åˆ™å™¨è¿›è¡Œå¯¹æŠ—æ€§è®­ç»ƒã€‚</p><p>[118]ä¸­çš„å·¥ä½œæ²¿ç”¨äº†å‚è€ƒæ–‡çŒ®[93]çš„æ€æƒ³ï¼Œå¹¶åœ¨LSTMä¸Šæ‰©å±•äº†å¯¹æŠ—æ€§è®­ç»ƒã€‚ä½œè€…æ²¿ç”¨äº†FGSMï¼Œå°†å¯¹æŠ—æ€§è®­ç»ƒä½œä¸ºæ­£åˆ™å™¨åŠ å…¥å…¶ä¸­ã€‚ä½†ä¸ºäº†æå‡å¯¹æŠ—æ ·æœ¬çš„å¯è§£é‡Šæ€§ï¼Œå³å¯¹æŠ—ä¾‹çš„è¯åµŒå…¥åº”è¯¥æ˜¯è¯æ±‡ä¸­çš„æœ‰æ•ˆè¯åµŒå…¥ï¼Œä»–ä»¬å¼•å…¥äº†ä¸€ä¸ªæ–¹å‘å‘é‡ï¼Œå°†æ‰°åŠ¨åµŒå…¥ä¸æœ‰æ•ˆè¯åµŒå…¥å…³è”èµ·æ¥ã€‚</p><p>[145]ç®€å•åœ°é‡‡ç”¨äº†å‚è€ƒæ–‡çŒ®[93]ä¸­åˆ©ç”¨çš„æ­£åˆ™å™¨ï¼Œä½†å°†æ‰°åŠ¨åº”ç”¨äºé¢„å…ˆè®­ç»ƒå¥½çš„è¯åµŒå…¥ï¼Œå¹¶ä¸”åº”ç”¨äºä¸åŒçš„ä»»åŠ¡ï¼šå…³ç³»æå–ã€‚å…¶ä»–é‡‡ç”¨å‚è€ƒæ–‡çŒ®[93]çš„ç±»ä¼¼å·¥ä½œè¿˜æœ‰å‚è€ƒæ–‡çŒ®[10ï¼Œ118ï¼Œ145ï¼Œ151]ã€‚</p><h3 id="é²æ£’ä¼˜åŒ–"><a href="#é²æ£’ä¼˜åŒ–" class="headerlink" title="é²æ£’ä¼˜åŒ–"></a>é²æ£’ä¼˜åŒ–</h3><p>é²æ£’ä¼˜åŒ–ï¼ˆRobust Optimizationï¼‰æ˜¯æå‡æ·±åº¦å­¦ä¹ ç³»ç»Ÿé²æ£’æ€§çš„æ–¹æ³•ã€‚</p><p>Madryç­‰[84]å°†DNNæ¨¡å‹å­¦ä¹ æŠ•å‘min-max(éç‚¹)å…¬å¼çš„é²æ£’ä¼˜åŒ–ï¼Œå®ƒæ˜¯ç”±ä¸€ä¸ªå†…ä¾§éå‡¹æœ€å¤§åŒ–é—®é¢˜(æ”»å‡»)å’Œä¸€ä¸ªå¤–ä¾§éå‡¸æœ€å°åŒ–é—®é¢˜(é˜²å¾¡)ç»„æˆã€‚æ ¹æ®Danskinå®šç†ï¼Œå†…ä¾§æœ€å¤§åŒ–å™¨å¤„çš„æ¢¯åº¦ä¸min-maxé—®é¢˜çš„ä¸‹é™æ–¹å‘ç›¸å¯¹åº”ï¼Œå› æ­¤ä¼˜åŒ–ä»å¯åº”ç”¨åå‘ä¼ æ’­è¿›è¡Œã€‚è¯¥æ–¹æ³•é€šè¿‡æ™®éè®­ç»ƒå’Œå­¦ä¹ ï¼ŒæˆåŠŸåœ°è¯æ˜äº†DNNå¯¹å¯¹æŠ—æ€§å›¾åƒçš„é²æ£’æ€§ã€‚</p><p>å‚è€ƒæ–‡çŒ®[3]é‡‡ç”¨äº†è¯¥æ€æƒ³ï¼Œå¹¶åº”ç”¨åœ¨å¤„ç†ç¦»æ•£æ•°æ®çš„æ¶æ„è½¯ä»¶æ£€æµ‹DNNä¸Šã€‚å…¶å­¦ä¹ ç›®æ ‡æ‹Ÿå®šä¸º</p><script type="math/tex; mode=display">\theta^{*}=\arg \min _{\theta} \mathbb{E}_{(x, y) \sim D}\left[\max _{x^{\prime} \in S(x)} L\left(\theta, x^{\prime}, y\right)\right]</script><p>å…¶ä¸­ï¼Œ$S(x)$æ˜¯ä¸€ç»„äºŒå…ƒæŒ‡ç¤ºå‘é‡ï¼Œç”¨äºä¿å­˜æ¶æ„è½¯ä»¶$x$çš„åŠŸèƒ½ï¼Œ$L$ä¸ºåŸå§‹åˆ†ç±»æ¨¡å‹çš„æŸå¤±å‡½æ•°ï¼Œ$y$ä¸ºçœŸå®æ ‡ç­¾ï¼Œ$\theta$ä¸ºå¯å­¦ä¹ å‚æ•°ï¼Œ$D$è¡¨ç¤ºæ•°æ®æ ·æœ¬$x$çš„åˆ†å¸ƒã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæœ¬æ–‡æ‰€æå‡ºçš„é²æ£’ä¼˜åŒ–æ–¹æ³•æ˜¯ä¸€ä¸ªé€šç”¨çš„æ¡†æ¶ï¼Œåœ¨è¿™ä¸ªæ¡†æ¶ä¸‹ï¼Œå…¶ä»–çš„å¯¹æŠ—æ€§è®­ç»ƒç­–ç•¥éƒ½æœ‰è‡ªç„¶çš„è§£é‡Šã€‚</p><h2 id="æ¨¡å‹è’¸é¦"><a href="#æ¨¡å‹è’¸é¦" class="headerlink" title="æ¨¡å‹è’¸é¦"></a>æ¨¡å‹è’¸é¦</h2><p>Papernotç­‰äºº[106]æå‡ºäº†æ¨¡å‹è’¸é¦ï¼ˆdistillationï¼‰ä½œä¸ºå¦ä¸€ç§å¯èƒ½çš„å¯¹æŠ—æ€§ä¾‹å­çš„é˜²å¾¡æ–¹æ³•ã€‚å…¶åŸç†æ˜¯åˆ©ç”¨åŸDNNçš„softmaxè¾“å‡ºï¼ˆå¦‚classfication DNNä¸­çš„ç±»æ¦‚ç‡ï¼‰æ¥è®­ç»ƒç¬¬äºŒä¸ªDNNï¼Œè¯¥DNNä¸åŸDNNçš„ç»“æ„ç›¸åŒã€‚åŒæ—¶é€šè¿‡å¼•å…¥æ¸©åº¦å‚æ•°Tæ¥ä¿®æ”¹åŸDNNçš„softmaxè¾“å‡ºã€‚</p><script type="math/tex; mode=display">q_{i}=\frac{\exp \left(z_{i} / T\right)}{\sum_{k} \exp \left(z_{k} / T\right)}</script><p>å…¶ä¸­$z_i$æ˜¯softmaxå±‚çš„è¾“å…¥ï¼Œ$T$æ§åˆ¶ç€çŸ¥è¯†å‹ç¼©çš„ç¨‹åº¦ï¼Œ$T=1$æ—¶ä¸Šå¼é€€åŒ–æˆæ™®é€šsoftmaxå‡½æ•°ï¼Œ$T$å¾ˆå¤§æ—¶ï¼Œ$q_i$æ¥è¿‘å‡åŒ€åˆ†å¸ƒï¼›$T$å¾ˆå°æ—¶ï¼Œå‡½æ•°ä¼šå€¾å‘äºè¾“å‡ºæå€¼ã€‚</p><p>[44]å¯¹ç¦»æ•£æ•°æ®ä¸Šçš„DNNé‡‡ç”¨è’¸é¦é˜²å¾¡ï¼Œå¹¶åº”ç”¨é«˜æ¸©Tï¼Œå› ä¸ºé«˜æ¸©softmaxè¢«è¯æ˜å¯ä»¥é™ä½æ¨¡å‹å¯¹å°æ‰°åŠ¨çš„æ•æ„Ÿæ€§[106]ã€‚ä½œè€…ç”¨åŸå§‹æ•°æ®é›†çš„å¢å¼ºå’ŒåŸå§‹DNNçš„softmaxè¾“å‡ºè®­ç»ƒäº†ç¬¬äºŒä¸ªDNNã€‚ä»è¯„ä»·ä¸­ï¼Œä»–ä»¬å‘ç°å¯¹æŠ—å¼è®­ç»ƒæ¯”ä½¿ç”¨è’¸é¦æ³•æ›´æœ‰æ•ˆï¼ˆå•Šè¿™ï¼Ÿï¼‰ã€‚</p><h1 id="å…­ã€DISCUSSIONS-AND-OPEN-ISSUES"><a href="#å…­ã€DISCUSSIONS-AND-OPEN-ISSUES" class="headerlink" title="å…­ã€DISCUSSIONS AND OPEN ISSUES"></a>å…­ã€DISCUSSIONS AND OPEN ISSUES</h1><p>ä¸åœ¨DNNä¸Šç”Ÿæˆå›¾åƒå¯¹æŠ—æ€§ä¾‹å­ç›¸æ¯”ï¼Œç”Ÿæˆæ–‡æœ¬å¯¹æŠ—æ€§ä¾‹å­çš„å†å²ç›¸å¯¹è¾ƒçŸ­ï¼Œå› ä¸ºåœ¨ç¦»æ•£æ•°æ®ä¸Šè¿›è¡Œæ‰°åŠ¨ï¼ŒåŒæ—¶ä¿ç•™æœ‰æ•ˆçš„å¥æ³•ã€è¯­æ³•å’Œè¯­ä¹‰æ›´å…·æŒ‘æˆ˜æ€§ã€‚</p><p>æˆ‘ä»¬åœ¨æœ¬èŠ‚ä¸­è®¨è®ºäº†ä¸€äº›é—®é¢˜ï¼Œå¹¶å¯¹æœªæ¥çš„å‘å±•æ–¹å‘æå‡ºäº†å»ºè®®ã€‚</p><h2 id="å¯æ„ŸçŸ¥æ€§"><a href="#å¯æ„ŸçŸ¥æ€§" class="headerlink" title="å¯æ„ŸçŸ¥æ€§"></a>å¯æ„ŸçŸ¥æ€§</h2><p>å¯æ„ŸçŸ¥æ€§ï¼ˆPerceivabilityï¼‰</p><p>å›¾åƒåƒç´ çš„æ‰°åŠ¨é€šå¸¸å¾ˆéš¾è¢«æ„ŸçŸ¥ï¼Œå› æ­¤ä¸å½±å“äººç±»çš„åˆ¤æ–­ï¼Œä½†å´èƒ½éª—è¿‡æ·±åº¦ç¥ç»ç½‘ç»œã€‚ç„¶è€Œï¼Œå¯¹æ–‡æœ¬çš„æ‰°åŠ¨æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œæ— è®ºæ‰°åŠ¨æ˜¯ç¿»è½¬å­—ç¬¦è¿˜æ˜¯æ”¹å˜å•è¯ã€‚æ— æ•ˆè¯å’Œè¯­æ³•é”™è¯¯å¾ˆå®¹æ˜“è¢«äººç±»è¯†åˆ«ï¼Œä¹Ÿå¾ˆå®¹æ˜“è¢«è¯­æ³•æ£€æŸ¥è½¯ä»¶æ£€æµ‹å‡ºæ¥ï¼Œå› æ­¤è¿™ç§æ‰°åŠ¨å¾ˆéš¾æ”»å‡»çœŸæ­£çš„NLPç³»ç»Ÿã€‚</p><p>ç„¶è€Œï¼Œè®¸å¤šç ”ç©¶å·¥ä½œéƒ½ä¼šäº§ç”Ÿè¿™ç§ç±»å‹çš„å¯¹æŠ—æ€§ä¾‹å­ã€‚åªæœ‰åœ¨åˆ©ç”¨å¯¹æŠ—æ€§ä¾‹å­æ¥å¯¹è¢«æ”»å‡»çš„DNNæ¨¡å‹è¿›è¡Œå¥å£®åŒ–çš„æƒ…å†µä¸‹ï¼Œè¿™ç§æ–¹æ³•æ‰æ˜¯å¯ä»¥æ¥å—çš„ã€‚</p><p>ä»è¯­ä¹‰ä¿æŠ¤çš„è§’åº¦æ¥çœ‹ï¼Œæ”¹å˜ä¸€ä¸ªå¥å­ä¸­çš„ä¸€ä¸ªè¯æœ‰æ—¶ä¼šæå¤§åœ°æ”¹å˜å…¶è¯­ä¹‰ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“è¢«äººç±»å‘ç°ã€‚å¯¹äºNLPçš„åº”ç”¨ï¼Œå¦‚é˜…è¯»ç†è§£ã€æƒ…æ„Ÿåˆ†æç­‰ï¼Œä¸ºäº†ä¸æ”¹å˜åº”è¯¥çš„è¾“å‡ºï¼Œéœ€è¦ç²¾å¿ƒè®¾è®¡å¯¹æŠ—æ€§ä¾‹å­ã€‚å¦åˆ™ï¼Œæ­£ç¡®çš„è¾“å‡ºå’Œæ‰°åŠ¨çš„è¾“å‡ºéƒ½ä¼šæ”¹å˜ï¼Œè¿åäº†ç”Ÿæˆå¯¹æŠ—æ€§ä¾‹å­çš„ç›®çš„ã€‚</p><p>åªæœ‰å°‘æ•°ä½œå“è€ƒè™‘äº†è¿™ä¸ªçº¦æŸã€‚å› æ­¤ï¼Œå¯¹äºå®é™…çš„æ”»å‡»ï¼Œæˆ‘ä»¬éœ€è¦æå‡ºä¸€äº›æ–¹æ³•ï¼Œä½¿æ‰°åŠ¨ä¸ä»…æ— æ³•å¯Ÿè§‰ï¼Œè€Œä¸”è¿˜èƒ½ä¿ç•™æ­£ç¡®çš„è¯­æ³•å’Œè¯­ä¹‰ã€‚</p><h2 id="å¯è¿ç§»æ€§"><a href="#å¯è¿ç§»æ€§" class="headerlink" title="å¯è¿ç§»æ€§"></a>å¯è¿ç§»æ€§</h2><p>å¯è¿ç§»æ€§ï¼ˆTransferabilityï¼‰æ˜¯å¯¹æŠ—æ ·æœ¬çš„æ™®éæ€§è´¨ã€‚å®ƒåæ˜ äº†æ”»å‡»ç®—æ³•çš„æ³›åŒ–èƒ½åŠ›ï¼ˆé€šç”¨æ€§ï¼‰ã€‚å¯è¿ç§»æ€§çš„å«ä¹‰ä¸ºï¼Œç®—æ³•ä¸ºä¸€ä¸ªæ¨¡å‹ç”Ÿæˆçš„å¯¹æŠ—æ ·æœ¬ä¹Ÿèƒ½å½±å“å¦å¤–ä¸€ä¸ªæ¨¡å‹ï¼ˆå³è·¨æ¨¡å‹æ³›åŒ–ï¼‰æˆ–å½±å“å¦å¤–ä¸€ä¸ªæ•°æ®é›†ï¼ˆå³è·¨æ•°æ®æ³›åŒ–ï¼‰çš„èƒ½åŠ›ã€‚ç”±äºæ·±åº¦ç¥ç»ç½‘ç»œçš„ç»†èŠ‚å¯¹æ”»å‡»æ–¹æ³•å½±å“ä¸å¤§ï¼Œå› æ­¤è¿™ä¸€ç‰¹æ€§åœ¨é»‘ç›’æ”»å‡»ä¸­æ›´å¸¸è¢«åˆ©ç”¨ã€‚ä¹Ÿæœ‰ç ”ç©¶è¯æ˜[81]æ— ç›®æ ‡æ”»å‡»ç”Ÿæˆçš„å¯¹æŠ—æ ·æœ¬æ¯”ç›®æ ‡æ”»å‡»ç”Ÿæˆçš„æ ·æœ¬æ›´å…·å¯è¿ç§»æ€§ã€‚</p><p>å¯è¿ç§»æ€§å¯ä»¥ä»ä¸‰ä¸ªå±‚æ¬¡æ¥åº¦é‡ï¼š(i)ç›¸åŒæ¶æ„ï¼Œä¸åŒæ•°æ®ï¼›(ii)ä¸åŒæ¶æ„ï¼Œç›¸åŒåº”ç”¨ï¼›(iii)ä¸åŒæ¶æ„ï¼Œä¸åŒæ•°æ®[154]ã€‚è™½ç„¶ç›®å‰å…³äºæ–‡æœ¬æ”»å‡»çš„å·¥ä½œæ¶µç›–äº†è¿™ä¸‰ä¸ªå±‚æ¬¡ï¼Œä½†ä¸åŸæ¨¡å‹ç›¸æ¯”ï¼Œè½¬ç§»æ”»å‡»å¦ä¸€ä¸ªæ¨¡å‹è¡¨ç°çš„ç®—æ³•æ€§èƒ½ä»ç„¶å¤§å¹…ä¸‹é™ï¼Œå³æ³›åŒ–èƒ½åŠ›å·®ã€‚</p><h2 id="è‡ªåŠ¨åŒ–ç¨‹åº¦"><a href="#è‡ªåŠ¨åŒ–ç¨‹åº¦" class="headerlink" title="è‡ªåŠ¨åŒ–ç¨‹åº¦"></a>è‡ªåŠ¨åŒ–ç¨‹åº¦</h2><p>åœ¨ç™½ç›’æ”»å‡»ä¸­ï¼Œåˆ©ç”¨DNNçš„æŸå¤±å‡½æ•°å¯ä»¥è‡ªåŠ¨è¯†åˆ«æ–‡æœ¬ä¸­å—å½±å“æœ€å¤§çš„ç‚¹ï¼ˆå¦‚å­—ç¬¦ã€å•è¯ï¼‰ï¼Œç„¶åå¯¹è¿™äº›ç‚¹è¿›è¡Œæ”»å‡»ï¼Œè‡ªåŠ¨ä¿®æ”¹ç›¸åº”çš„æ–‡æœ¬ã€‚åœ¨é»‘ç›’æ”»å‡»ä¸­ï¼Œæœ‰äº›æ”»å‡»ï¼Œå¦‚ â€œæ›¿æ¢â€æ“ä½œä¼šè®­ç»ƒä¸€ä¸ªæ›¿æ¢çš„DNNï¼Œå¹¶å¯¹æ›¿æ¢çš„DNNåº”ç”¨ç™½ç›’æ”»å‡»ç­–ç•¥ã€‚ä»¥ä¸Šæ“ä½œéƒ½å¯ä»¥è‡ªåŠ¨å®ç°ã€‚</p><p>ç„¶è€Œï¼Œå¤§å¤šæ•°å…¶ä»–ä½œå“éƒ½æ˜¯ä»¥äººå·¥çš„æ–¹å¼åˆ¶ä½œå¯¹æŠ—æ€§ä¾‹å­ã€‚ä¾‹å¦‚[54]å°†äººå·¥é€‰æ‹©çš„æ— æ„ä¹‰æ®µè½è¿›è¡Œè¿æ¥ï¼Œä»¥æ„šå¼„é˜…è¯»ç†è§£ç³»ç»Ÿï¼Œå‘ç°è¢«æ”»å‡»çš„DNNçš„æ¼æ´ã€‚å¾ˆå¤šç ”ç©¶å·¥ä½œéƒ½æ•ˆä»¿[54]ï¼Œä¸ä»¥å®é™…æ”»å‡»ä¸ºç›®çš„ï¼Œæ›´å¤šçš„æ˜¯ç ”ç©¶ç›®æ ‡ç½‘ç»œçš„å¥å£®æ€§ã€‚<strong>è¿™äº›æ‰‹å·¥å·¥ä½œæ—¢è€—æ—¶åˆä¸å®ç”¨</strong>ã€‚</p><h2 id="æ–°æ¶æ„"><a href="#æ–°æ¶æ„" class="headerlink" title="æ–°æ¶æ„"></a>æ–°æ¶æ„</h2><p>è™½ç„¶å¤§å¤šæ•°å¸¸è§çš„æ–‡æœ¬DNNå·²ç»ä»å¯¹æŠ—æ€§æ”»å‡»çš„è§’åº¦å¾—åˆ°äº†å…³æ³¨ï¼Œä½†è®¸å¤šDNNè‡³ä»Šæ²¡æœ‰å—åˆ°æ”»å‡»ï¼Œä¾‹å¦‚ç”Ÿæˆå¼ç¥ç»æ¨¡å‹ï¼šç”Ÿæˆå¼å¯¹æŠ—ç½‘ç»œï¼ˆGANsï¼‰å’Œå˜å¼‚è‡ªåŠ¨ç¼–ç å™¨ï¼ˆVAEsï¼‰ã€‚åœ¨NLPä¸­ï¼Œå®ƒä»¬è¢«ç”¨æ¥ç”Ÿæˆæ–‡æœ¬ã€‚æ·±åº¦ç”Ÿæˆæ¨¡å‹éœ€è¦æ›´å¤æ‚çš„æŠ€èƒ½è¿›è¡Œæ¨¡å‹è®­ç»ƒã€‚è¿™å°†è§£é‡Šè¿™äº›æŠ€æœ¯åˆ°ç›®å‰ä¸ºæ­¢ä¸»è¦è¢«å¯¹æŠ—æ€§æ”»å‡»æ‰€å¿½è§†ã€‚æœªæ¥çš„å·¥ä½œå¯ä»¥è€ƒè™‘ä¸ºè¿™äº›ç”Ÿæˆå¼DNNç”Ÿæˆå¯¹æŠ—æ€§çš„ä¾‹å­ã€‚</p><p>å¦ä¸€ä¸ªä¾‹å­æ˜¯å¯åˆ†åŒ–ç¥ç»è®¡ç®—æœºï¼ˆDNCï¼‰ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œåªæœ‰ä¸€é¡¹å·¥ä½œå¯¹DNCè¿›è¡Œäº†æ”»å‡»[19]ã€‚</p><p>æ³¨æ„åŠ›æœºåˆ¶ä»¥æŸç§æ–¹å¼æˆä¸ºå¤§å¤šæ•°é¡ºåºæ¨¡å‹ä¸­çš„æ ‡å‡†ç»„ä»¶ã€‚ä½†ä¸€ç›´æ²¡æœ‰ç ”ç©¶è¯¥æœºåˆ¶æœ¬èº«çš„å·¥ä½œã€‚ç›¸åï¼Œä½œå“è¦ä¹ˆæ˜¯æ”»å‡»åŒ…å«æ³¨æ„åŠ›çš„æ•´ä½“ç³»ç»Ÿï¼Œè¦ä¹ˆæ˜¯åˆ©ç”¨æ³¨æ„åŠ›åˆ†æ•°æ¥è¯†åˆ«æ‰°åŠ¨çš„è¯[14]ã€‚</p><h2 id="è¿­ä»£ç”Ÿæˆ-vs-ä¸€æ¬¡ç”Ÿæˆ"><a href="#è¿­ä»£ç”Ÿæˆ-vs-ä¸€æ¬¡ç”Ÿæˆ" class="headerlink" title="è¿­ä»£ç”Ÿæˆ vs. ä¸€æ¬¡ç”Ÿæˆ"></a>è¿­ä»£ç”Ÿæˆ vs. ä¸€æ¬¡ç”Ÿæˆ</h2><p>è¿­ä»£æ”»å‡»æ ¹æ®è¢«æ”»å‡»çš„DNNæ¨¡å‹è¾“å‡ºçš„æ¢¯åº¦åå¤æœç´¢å’Œæ›´æ–°æ‰°åŠ¨ã€‚å› æ­¤ï¼Œå®ƒè¡¨ç°å‡ºè¾ƒé«˜çš„è´¨é‡å’Œæœ‰æ•ˆæ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰°åŠ¨å¯ä»¥è¶³å¤Ÿå°ï¼Œéš¾ä»¥é˜²å¾¡ã€‚</p><p>ç„¶è€Œï¼Œè¿™äº›æ–¹æ³•é€šå¸¸éœ€è¦å¾ˆé•¿çš„æ—¶é—´æ¥å¯»æ‰¾åˆé€‚çš„æ‰°åŠ¨ï¼Œä¸ºå®æ—¶æ”»å‡»å¸¦æ¥äº†éšœç¢ã€‚å› æ­¤ï¼Œæœ‰äººæå‡ºä¸€æ¬¡æ€§æ”»å‡»æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚FGSM[40]å°±æ˜¯ä¸€æ¬¡æ€§æ”»å‡»çš„ä¸€ä¸ªä¾‹å­ã€‚ç›´è§‚åœ°è®²ï¼Œä¸€æ¬¡æ€§æ”»å‡»æ¯”è¿­ä»£æ”»å‡»å¿«å¾—å¤šï¼Œä½†æ•ˆæœè¾ƒå·®ï¼Œè€Œä¸”å®¹æ˜“è¢«é˜²å¾¡[153]ã€‚å½“åœ¨å®é™…åº”ç”¨ä¸Šè®¾è®¡æ”»å‡»æ–¹æ³•æ—¶ï¼Œæ”»å‡»è€…éœ€è¦ä»”ç»†è€ƒè™‘æ”»å‡»çš„æ•ˆç‡å’Œæ•ˆæœä¹‹é—´çš„æƒè¡¡ã€‚</p><h1 id="ä¸ƒã€CONCLUSION"><a href="#ä¸ƒã€CONCLUSION" class="headerlink" title="ä¸ƒã€CONCLUSION"></a>ä¸ƒã€CONCLUSION</h1><p>æœ¬æ–‡é¦–æ¬¡åœ¨æ·±åº¦ç¥ç»ç½‘ç»œä¸Šç”Ÿæˆæ–‡æœ¬å¯¹æŠ—æ€§å®ä¾‹çš„æ–¹å‘ä¸Šè¿›è¡Œäº†å…¨é¢çš„è°ƒæŸ¥ã€‚</p><p>æˆ‘ä»¬å›é¡¾äº†æœ€è¿‘çš„ç ”ç©¶å·¥ä½œï¼Œå¹¶åˆ¶å®šåˆ†ç±»æ–¹æ¡ˆæ¥æ•´ç†ç°æœ‰çš„æ–‡çŒ®ã€‚</p><p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜ä»ä¸åŒæ–¹é¢å¯¹å…¶è¿›è¡Œäº†æ€»ç»“å’Œåˆ†æã€‚</p><p>æˆ‘ä»¬è¯•å›¾ä¸ºç ”ç©¶äººå‘˜æä¾›ä¸€ä¸ªå¾ˆå¥½çš„å‚è€ƒï¼Œä»¥æ·±å…¥äº†è§£è¯¥ç ”ç©¶è¯¾é¢˜ä¸­çš„æŒ‘æˆ˜ã€æ–¹æ³•å’Œé—®é¢˜ï¼Œå¹¶å¯¹æœªæ¥çš„å‘å±•æ–¹å‘æœ‰æ‰€å¯ç¤ºã€‚</p><p>æˆ‘ä»¬å¸Œæœ›åœ¨äº†è§£å¯¹æŠ—æ€§æ”»å‡»çš„åŸºç¡€ä¸Šï¼Œæå‡ºæ›´å¤šç¨³å¥çš„æ·±åº¦ç¥ç»æ¨¡å‹ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>paper</category>
      
    </categories>
    
    
    <tags>
      
      <tag>NLP</tag>
      
      <tag>Robustness</tag>
      
      <tag>Adversarial Attacks</tag>
      
      <tag>Deep Neural Networks</tag>
      
      <tag>survey</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€è®ºæ–‡é˜…è¯»ç¬”è®°ã€‘ Fuzz Testing based Data Augmentation to Improve Robustness of Deep Neural Networks</title>
    <link href="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzz-Testing-based-Data-Augmentation-to-Improve-Robustness-of-Deep-Neural-Networks/"/>
    <url>/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzz-Testing-based-Data-Augmentation-to-Improve-Robustness-of-Deep-Neural-Networks/</url>
    
    <content type="html"><![CDATA[<p>é€šè¿‡æ¨¡ç³Šæµ‹è¯•çš„æ–¹æ³•è¿›è¡Œæ•°æ®å¢å¼ºï¼Œæ•°æ®å¢å¼ºæ–°æ€è·¯ã€‚æ–°åŠ å¡å›½ç«‹å¤§å­¦ä½œå“ï¼Œè¢«ICSEâ€™2020æ¥æ”¶ã€‚<br><!--more---></p><h1 id="å†…å®¹æ¦‚è¦"><a href="#å†…å®¹æ¦‚è¦" class="headerlink" title="å†…å®¹æ¦‚è¦"></a>å†…å®¹æ¦‚è¦</h1><ul><li>å¢å¼ºDNNçš„è®­ç»ƒæ•°æ®ï¼Œä»è€Œå¢å¼ºå…¶é²æ£’æ€§</li><li>å°†DNNæ•°æ®æ‰©å……é—®é¢˜è§†ä¸ºä¼˜åŒ–é—®é¢˜</li><li>ä½¿ç”¨é—ä¼ æœç´¢æ¥ç”Ÿæˆæœ€åˆé€‚çš„è¾“å…¥æ•°æ®å˜ä½“ï¼Œç”¨äºè®­ç»ƒDNN</li><li>å­¦ä¹ è¯†åˆ«è·³è¿‡å¢å¼ºæ¥åŠ é€Ÿè®­ç»ƒ</li><li>improve the robust accuracy of the DNN</li><li>reduce the average DNN training time by 25%, while still improving robust accuracy</li></ul><h1 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h1><p>è¿‡æ‹Ÿåˆäº§ç”Ÿçš„é—®é¢˜ï¼š</p><ol><li>æ³›åŒ–æ€§é™ä½ï¼Œæµ‹è¯•é›†æ•ˆæœå·®ï¼›</li><li>é²æ£’æ€§ä¸è¶³ï¼Œä¸èƒ½æŠµå¾¡æ ·æœ¬å¾®å°æ‰°åŠ¨</li></ol><p>é²æ£’æ€§æœ‰ä¸¤ç§ï¼š</p><ol><li>å¯¹æŠ—é²æ£’æ€§ï¼Œåº”å¯¹çš„æ˜¯äººä¸ºæ„é€ çš„æ‰°åŠ¨ï¼›</li><li>è‡ªç„¶æ‰°åŠ¨é²æ£’æ€§ï¼Œåº”å¯¹è‡ªç„¶æ¡ä»¶çš„å˜åŒ–ã€‚</li></ol><p>æœ¬æ–‡å…³æ³¨çš„æ˜¯åä¸€ç§é²æ£’ï¼Œé‡‡ç”¨æ•°æ®å¢å¼ºæ‰‹æ®µæ¨¡æ‹Ÿä¸åŒè‡ªç„¶æ¡ä»¶ä¸‹çš„æ ·æœ¬å˜åŒ–</p><h2 id="æ•°æ®å¢å¼ºï¼šä¼ ç»Ÿè½¯ä»¶"><a href="#æ•°æ®å¢å¼ºï¼šä¼ ç»Ÿè½¯ä»¶" class="headerlink" title="æ•°æ®å¢å¼ºï¼šä¼ ç»Ÿè½¯ä»¶"></a>æ•°æ®å¢å¼ºï¼šä¼ ç»Ÿè½¯ä»¶</h2><p>improves the generalization of generated programs by augmenting existing test suites</p><p>æµ‹è¯•ç”¨ä¾‹ç”ŸæˆæŠ€æœ¯ï¼šéšæœºæµ‹è¯•ï¼ŒåŸºäºæœç´¢çš„è¿›åŒ–æµ‹è¯•ï¼Œç¬¦å·æ‰§è¡Œï¼Œç°ç®±æ¨¡ç³Šæµ‹è¯•ç­‰</p><p>AFLï¼šæ¶µç›–æ›´å¤šçš„ç¨‹åºè·¯å¾„ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ‰¾åˆ°ä»£è¡¨æ€§çš„æµ‹è¯•å¹¶æ¶µç›–æ›´å¤šçš„ç¨‹åºåŠŸèƒ½</p><h2 id="æ•°æ®å¢å¼ºï¼šæå‡æ¨¡å‹é²æ£’æ€§â€”â€”ç ”ç©¶ç°çŠ¶"><a href="#æ•°æ®å¢å¼ºï¼šæå‡æ¨¡å‹é²æ£’æ€§â€”â€”ç ”ç©¶ç°çŠ¶" class="headerlink" title="æ•°æ®å¢å¼ºï¼šæå‡æ¨¡å‹é²æ£’æ€§â€”â€”ç ”ç©¶ç°çŠ¶"></a>æ•°æ®å¢å¼ºï¼šæå‡æ¨¡å‹é²æ£’æ€§â€”â€”ç ”ç©¶ç°çŠ¶</h2><p>åŸºäºæ¢¯åº¦ä¸‹é™çš„é²æ£’ä¼˜åŒ–ï¼š</p><ul><li>å°è¯•æ ¹æ®æŸå¤±å‡½æ•°ç”Ÿæˆæœ€å·®çš„å˜ä½“ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°è®­ç»ƒé›†ä¸­ã€‚</li><li>åœ¨è‡ªç„¶ç¯å¢ƒå˜åŒ–ï¼ˆå¯¹äºè§†è§‰åº”ç”¨ï¼‰ä¸­çªå‡ºæ˜¾ç¤ºçš„ç©ºé—´å˜æ¢çš„è¾“å…¥ç©ºé—´æ˜¯é«˜åº¦éå‡¸çš„</li></ul><p><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzz-Testing-based-Data-Augmentation-to-Improve-Robustness-of-Deep-Neural-Networks/2020-06-27-01-10-37.png" alt></p><p>å‡ ä¹æ‰€æœ‰ç”¨äºæé«˜é²æ£’æ€§çš„æŠ€æœ¯éƒ½ä¼šé€šè¿‡åˆ†æè®­ç»ƒåçš„æ¨¡å‹å¹¶éšåç”Ÿæˆå¯¹æŠ—æ€§ç¤ºä¾‹åœ¨æ–°æ•°æ®ä¸Šé‡æ–°è®­ç»ƒæ¨¡å‹</p><h2 id="è´¡çŒ®"><a href="#è´¡çŒ®" class="headerlink" title="è´¡çŒ®"></a>è´¡çŒ®</h2><ul><li>å°†æ•°æ®æ‰©å……å½¢å¼åŒ–ä¸ºä¼˜åŒ–é—®é¢˜ï¼Œåˆ©ç”¨æ¨¡ç³Šæµ‹è¯•ï¼ˆé—ä¼ ç®—æ³•ï¼‰æ±‚è§£</li><li>æå‡ºé€‰æ‹©æ€§æ‰©å……ç­–ç•¥ï¼Œä»…é€‰æ‹©éƒ¨åˆ†æ•°æ®ç‚¹è¿›è¡Œæ‰©å……</li></ul><h1 id="èƒŒæ™¯çŸ¥è¯†"><a href="#èƒŒæ™¯çŸ¥è¯†" class="headerlink" title="èƒŒæ™¯çŸ¥è¯†"></a>èƒŒæ™¯çŸ¥è¯†</h1><h2 id="æ¨¡ç³Šæµ‹è¯•"><a href="#æ¨¡ç³Šæµ‹è¯•" class="headerlink" title="æ¨¡ç³Šæµ‹è¯•"></a>æ¨¡ç³Šæµ‹è¯•</h2><p><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzz-Testing-based-Data-Augmentation-to-Improve-Robustness-of-Deep-Neural-Networks/2020-06-27-01-11-29.png" alt></p><h2 id="Robustness-of-DNN"><a href="#Robustness-of-DNN" class="headerlink" title="Robustness of DNN"></a>Robustness of DNN</h2><p>DNNå¾ˆå®¹æ˜“é­å—å¾®å°æ‰°åŠ¨çš„å½±å“ï¼Œäº§ç”Ÿå®Œå…¨ä¸åŒçš„å†³ç­–ã€‚DNNæŠµå¾¡è¾“å…¥æ‰°åŠ¨çš„èƒ½åŠ›è¢«è®¤ä¸ºæ˜¯é²æ£’æ€§ã€‚</p><p>ç”±äºè¿™é¡¹å·¥ä½œèšç„¦äºè‡ªç„¶ç”Ÿæˆçš„è€Œä¸æ˜¯äººå·¥åˆæˆçš„æ‰°åŠ¨ï¼Œå› æ­¤åƒGANç­‰æŠ€æœ¯ä¸è¢«è€ƒè™‘åœ¨å†…ã€‚</p><h2 id="æ•°æ®å¢å¼º"><a href="#æ•°æ®å¢å¼º" class="headerlink" title="æ•°æ®å¢å¼º"></a>æ•°æ®å¢å¼º</h2><p>æ•°æ®å¢å¼ºæ˜¯ä¸€ç§æ‰©å……æ•°æ®é›†ã€é¿å…æ ·æœ¬å°‘å¯¼è‡´è¿‡æ‹Ÿåˆçš„æœ‰æ•ˆæ–¹æ³•ã€‚å¢å¼ºæ•ˆæœå—å¢å¼ºæ–¹æ³•å½±å“å¾ˆå¤§ã€‚ä¸€èˆ¬è®¤ä¸ºæ•°æ®å¢å¼ºåè®­ç»ƒçš„æ¨¡å‹é²æ£’æ€§èƒ½å¾—åˆ°ä¸€å®šç¨‹åº¦çš„æå‡ã€‚</p><h1 id="SENSEIå·¥å…·"><a href="#SENSEIå·¥å…·" class="headerlink" title="SENSEIå·¥å…·"></a>SENSEIå·¥å…·</h1><h2 id="é—®é¢˜å®šä¹‰"><a href="#é—®é¢˜å®šä¹‰" class="headerlink" title="é—®é¢˜å®šä¹‰"></a>é—®é¢˜å®šä¹‰</h2><p>ç”Ÿæˆå¢å¼ºæ ·æœ¬çš„è¿‡ç¨‹ï¼Œæ˜¯å¤šç›®æ ‡ä¼˜åŒ–è¿‡ç¨‹ã€‚</p><p>ä¸€æ–¹é¢æ±‚æ‰°åŠ¨Î´ï¼Œä½¿å¾—æŸå¤±å‡½æ•°Læœ€å¤§ï¼›å¦ä¸€æ–¹é¢æ±‚æ¨¡å‹å‚æ•°Î¸ï¼Œä½¿æŸå¤±å‡½æ•°Læœ€å°ï¼›æ±‚å¾—æ­¤æ—¶çš„Î´å’ŒÎ¸ã€‚æœ¬è´¨æ˜¯ä¸€ä¸ªäºŒå…ƒä¼˜åŒ–æ‰¾éç‚¹çš„é—®é¢˜ã€‚</p><p><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzz-Testing-based-Data-Augmentation-to-Improve-Robustness-of-Deep-Neural-Networks/2020-06-27-01-20-58.png" alt></p><p><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzz-Testing-based-Data-Augmentation-to-Improve-Robustness-of-Deep-Neural-Networks/2020-06-27-01-21-07.png" alt></p><h2 id="ä¼˜åŒ–æ€è·¯"><a href="#ä¼˜åŒ–æ€è·¯" class="headerlink" title="ä¼˜åŒ–æ€è·¯"></a>ä¼˜åŒ–æ€è·¯</h2><p>åŸºäºæ¨¡ç³Šæµ‹è¯•çš„æ–¹æ³•ï¼ˆå¦‚å¼•å¯¼æœç´¢ï¼‰èƒ½æ›´æœ‰æ•ˆåœ°æ‰¾åˆ°è¦è®­ç»ƒçš„æ•°æ®ç‚¹çš„æœ€ä½³Mutatorï¼Œä»è€Œæé«˜é²æ£’æ€§</p><p>å¹¶éè®­ç»ƒæ•°æ®é›†ä¸­çš„æ‰€æœ‰æ•°æ®ç‚¹éƒ½å¾ˆéš¾å­¦ä¹ ã€‚ä¸€äº›æ•°æ®ç‚¹ä»£è¡¨è®­ç»ƒé›†ä¸­çš„ç†æƒ³ç¤ºä¾‹ï¼Œè€Œå¦ä¸€äº›åˆ™ä»¤äººå›°æƒ‘ï¼›</p><p>å¯¹æ‰€æœ‰è¿™äº›ç‚¹è¿›è¡Œç›¸åŒçš„å¤„ç†å¯èƒ½ä¼šæµªè´¹å®è´µçš„è®­ç»ƒæ—¶é—´ã€‚å› æ­¤ä»…åœ¨å…·æœ‰æŒ‘æˆ˜æ€§çš„æ•°æ®ç‚¹ä¸ŠèŠ±è´¹æ‰©å……å·¥ä½œã€‚</p><h2 id="æ•´ä½“ç®—æ³•"><a href="#æ•´ä½“ç®—æ³•" class="headerlink" title="æ•´ä½“ç®—æ³•"></a>æ•´ä½“ç®—æ³•</h2><p><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzz-Testing-based-Data-Augmentation-to-Improve-Robustness-of-Deep-Neural-Networks/2020-06-27-01-21-37.png" alt></p><p><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzz-Testing-based-Data-Augmentation-to-Improve-Robustness-of-Deep-Neural-Networks/2020-06-27-01-21-43.png" alt></p><p>Optimal Augmentation Module<br>é€‰æ‹©æœ€éš¾çš„æ ·æœ¬ï¼ˆL13~16ï¼‰<br>Selective Augmentation Module<br>è·³è¿‡çªå˜ä¸å¤§çš„æ ·æœ¬ï¼ˆL10~12,17ï¼‰<br>æ•°æ®å¢å¼ºè¿‡ç¨‹æ˜¯åœ¨è®­ç»ƒæ—¶å³æ—¶å‘ç”Ÿçš„</p><h2 id="é—ä¼ ç®—æ³•éƒ¨åˆ†"><a href="#é—ä¼ ç®—æ³•éƒ¨åˆ†" class="headerlink" title="é—ä¼ ç®—æ³•éƒ¨åˆ†"></a>é—ä¼ ç®—æ³•éƒ¨åˆ†</h2><p>å°†æŸ“è‰²ä½“è¡¨ç¤ºä¸ºä¸€ç»„æ“ä½œï¼Œè¯¥æ“ä½œå°†åº”ç”¨äºç»™å®šè¾“å…¥ä»¥è·å¾—çœŸå®çš„å˜åŒ–</p><p>å°†xæ—‹è½¬1åº¦ï¼Œç„¶åå°†å…¶å¹³ç§»ä¸€ä¸ªåƒç´ ï¼Œæ¨¡æ‹Ÿç›¸æœºåœ¨ç°å®ç”Ÿæ´»ä¸­çš„è§’åº¦å’Œç§»åŠ¨ï¼Œæ¥å¾—å‡ºå›¾åƒï¼ˆxï¼‰çš„çœŸå®å˜åŒ–ï¼ˆxâ€™ï¼‰</p><p>ç§ç¾¤æ˜¯ä»£è¡¨å½“å‰è§£å†³æ–¹æ¡ˆå­é›†çš„ä¸€ç»„æŸ“è‰²ä½“</p><p>ç§ç¾¤ç”±ä¸¤ä¸ªé—ä¼ ç®—å­ç»„æˆï¼šçªå˜å’Œæ‚äº¤</p><p><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzz-Testing-based-Data-Augmentation-to-Improve-Robustness-of-Deep-Neural-Networks/2020-06-27-01-22-47.png" alt></p><p>é€šè¿‡åˆå¹¶ä¸¤ä¸ªéšæœºé€‰æ‹©çš„ç°æœ‰æŸ“è‰²ä½“æ¥å®Œæˆäº¤å‰ä»¥åˆ›å»ºæ–°æŸ“è‰²ä½“</p><ul><li>c1 = {æ—‹è½¬ï¼š1ï¼Œå¹³ç§»ï¼š2ï¼Œå‰ªåˆ‡ï¼š-0.15}å’Œ</li><li>c2 = {æ—‹è½¬ï¼š-1ï¼Œå¹³ç§»ï¼š-3ï¼Œå‰ªåˆ‡ï¼š0.1}</li><li>C = {æ—‹è½¬ï¼š1, å¹³ç§»ï¼š-3ï¼Œå‰ªåˆ‡ï¼š0.1}</li></ul><p>æ‚äº¤ç®—å­åœ¨1å’ŒæŸ“è‰²ä½“é•¿åº¦ï¼ˆlï¼‰ä¹‹é—´ç”Ÿæˆéšæœºæ•°rï¼Œå–c1çš„1åˆ°réƒ¨åˆ†ï¼Œä¸c2çš„r+1åˆ°léƒ¨åˆ†æ‹¼åˆæˆæ–°çš„æŸ“è‰²ä½“</p><p>çªå˜ç®—å­é€šè¿‡éšæœºæ”¹å˜æŸ“è‰²ä½“ä¸­çš„å•ä¸ªæ“ä½œï¼ˆæ”¹å˜å‚æ•°ï¼‰æ¥æ‰§è¡Œçªå˜ã€‚</p><p>å§‹ç»ˆå°†ç”Ÿæˆçš„è½¬æ¢å‘é‡ï¼ˆæŸ“è‰²ä½“ï¼‰åº”ç”¨äºåŸå§‹å›¾åƒï¼ˆè€Œä¸æ˜¯åº”ç”¨äºå·²è½¬æ¢çš„æ•°æ®ï¼‰ï¼Œä»¥é˜²æ­¢ç”Ÿæˆçš„æ•°æ®ä¸çœŸå®</p><p>ç”Ÿæˆæ–°ç§ç¾¤åï¼Œå°†å¯¹å…¶è¿›è¡Œè¯„ä¼°ï¼Œå¹¶ä¸”ä»…å°†æœ€ä½³é›†åˆä½œä¸ºå½“å‰ç§ç¾¤ä¼ é€’ç»™ä¸‹ä¸€ä»£ï¼ˆåŸç®—æ³•L17ï¼‰</p><p>é€‚åº”åº¦å‡½æ•°çš„è®¾è®¡åœ¨GAä¸­èµ·ç€é‡è¦ä½œç”¨ï¼Œä»¥æµ‹é‡ç»™å®šè§£å†³æ–¹æ¡ˆçš„è´¨é‡<br>æ ¹æ®DNNçš„ç»éªŒæŸå¤±å®šä¹‰é€‚åº”åº¦å‡½æ•°</p><script type="math/tex; mode=display">f_{\text {loss}}\left(x^{\prime}\right)=L\left(\theta, x^{\prime}, y\right)</script><p>åœ¨DNNçš„å¢å¼ºè®­ç»ƒä¸­åº”ä½¿ç”¨é­å—DNNæŸå¤±æ›´å¤§çš„å˜ä½“ï¼Œä»¥ä½¿DNNæ›´åŠ å¥å£®</p><h2 id="é€‰æ‹©æ€§å¢å¼º"><a href="#é€‰æ‹©æ€§å¢å¼º" class="headerlink" title="é€‰æ‹©æ€§å¢å¼º"></a>é€‰æ‹©æ€§å¢å¼º</h2><p>Sensei-SAä¼šè·³è¿‡å·²ç”±Mé²æ£’åˆ†ç±»çš„æ•°æ®ç‚¹<br>åŸºäºåˆ†ç±»çš„é²æ£’æ€§ï¼šæ¨¡å‹æ­£ç¡®åœ°åˆ†ç±»äº†xå’Œæ‰€æœ‰æœªæ”¹å˜ç±»åˆ«çš„Mutatorï¼ˆxâ€²ï¼‰<br>åŸºäºæŸå¤±çš„é²æ£’æ€§ï¼šxçš„é¢„æµ‹æŸå¤±æˆ–æœªæ”¹å˜ç±»åˆ«ï¼ˆxâ€™ï¼‰çš„ä»»ä½•é¢„æµ‹æŸå¤±ä¸å¤§äºæŸå¤±é˜ˆå€¼</p><p>å¦‚æœç§å­æ˜¯é²æ£’çš„ï¼Œåˆ™Sensei-SAä¸ä¼šå¯¹å…¶è¿›è¡Œæ•°æ®å¢å¼ºï¼›é™¤éåœ¨éšåçš„è®­ç»ƒä¸­å°†ç§å­é”™è¯¯åœ°åˆ†ç±»ï¼Œæˆ–é¢„æµ‹æŸå¤±å°äºé˜ˆå€¼</p><h2 id="å›¾åƒæ‰°åŠ¨"><a href="#å›¾åƒæ‰°åŠ¨" class="headerlink" title="å›¾åƒæ‰°åŠ¨"></a>å›¾åƒæ‰°åŠ¨</h2><p>ä»¿å°„å˜æ¢æ“ä½œã€åƒç´ æ“ä½œ<br>æ—‹è½¬ï¼ˆxï¼Œdï¼‰ï¼šåœ¨[-30ï¼Œ30]èŒƒå›´å†…å°†xæ—‹è½¬dåº¦ã€‚<br>å¹³ç§»ï¼ˆxï¼Œdï¼‰ï¼šåœ¨å›¾åƒå¤§å°çš„[-10ï¼…ï¼Œ10ï¼…]èŒƒå›´å†…æ°´å¹³æˆ–å‚ç›´å°†xæŒ‰dåƒç´ å¹³ç§»ã€‚<br>å‰ªåˆ‡ï¼ˆxï¼Œdï¼‰ï¼šæ°´å¹³å‰ªåˆ‡xï¼Œå‰ªåˆ‡å› å­dåœ¨[-0.1ï¼Œ0.1]èŒƒå›´å†…ã€‚<br>ç¼©æ”¾ï¼ˆxï¼Œdï¼‰ï¼šä»¥[0.9,1.1]çš„ç¼©æ”¾ç³»æ•°dæ”¾å¤§/ç¼©å°x<br>äº®åº¦ï¼ˆxï¼Œdï¼‰ï¼šåœ¨[-32ï¼Œ32]èŒƒå›´å†…ä¸ºxçš„æ¯ä¸ªåƒç´ ç»Ÿä¸€åŠ å‡ä¸€ä¸ªå€¼<br>å¯¹æ¯”åº¦ï¼ˆxï¼Œdï¼‰ï¼šå°†xçš„æ¯ä¸ªåƒç´ çš„RGBå€¼æŒ‰[0.8ï¼Œ1.2]èŒƒå›´å†…çš„å› å­dç¼©æ”¾ã€‚</p><h2 id="è¯„ä¼°æŒ‡æ ‡"><a href="#è¯„ä¼°æŒ‡æ ‡" class="headerlink" title="è¯„ä¼°æŒ‡æ ‡"></a>è¯„ä¼°æŒ‡æ ‡</h2><p>é²æ£’æ€§ç²¾åº¦ï¼ˆrobust accuracyï¼‰æ˜¯æŒ‡æµ‹è¯•é›†ä¸­DNNçš„é¢„æµ‹ä¸éšä»»ä½•å°çš„ç°å®æ‰°åŠ¨è€Œæ”¹å˜çš„å›¾åƒæ¯”ä¾‹</p><script type="math/tex; mode=display">\text {robust accuracy}=\frac{\text {nRobustInstances}}{\text {nInstances}}</script><h1 id="Evaluation"><a href="#Evaluation" class="headerlink" title="Evaluation"></a>Evaluation</h1><h2 id="1-Senseiæ˜¯å¦å¯ä»¥æœ‰æ•ˆè§£å†³éç‚¹é—®é¢˜ï¼Ÿ"><a href="#1-Senseiæ˜¯å¦å¯ä»¥æœ‰æ•ˆè§£å†³éç‚¹é—®é¢˜ï¼Ÿ" class="headerlink" title="1.Senseiæ˜¯å¦å¯ä»¥æœ‰æ•ˆè§£å†³éç‚¹é—®é¢˜ï¼Ÿ"></a>1.Senseiæ˜¯å¦å¯ä»¥æœ‰æ•ˆè§£å†³éç‚¹é—®é¢˜ï¼Ÿ</h2><p>å…³é”®æ˜¯æ£€æŸ¥Senseiæ˜¯å¦ç¡®å®æœ‰æ•ˆæ¯”æœ€å…ˆè¿›çš„æŠ€æœ¯æ›´æœ‰æ•ˆåœ°æ‰¾åˆ°æŸè€—æœ€å¤§çš„å˜ä½“<br>W-10åœ¨æ¯ä¸€æ­¥ä¸ºæ¯ä¸ªå›¾åƒéšæœºç”Ÿæˆåä¸ªæ‰°åŠ¨ï¼Œå¹¶ç”¨æ¨¡å‹è¡¨ç°æœ€å·®çš„å›¾åƒæ›¿æ¢åŸå§‹å›¾åƒ<br>ç»“æœè¡¨æ˜ï¼ŒSenseiæ›´æœ‰æ•ˆåœ°è§£å†³äº†å†…éƒ¨æœ€å¤§åŒ–é—®é¢˜<br><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzz-Testing-based-Data-Augmentation-to-Improve-Robustness-of-Deep-Neural-Networks/2020-06-27-01-26-16.png" alt></p><h2 id="2-Senseiæ˜¯å¦æ¯”åŸºäºå¯¹æŠ—æ ·æœ¬å†è®­ç»ƒæ–¹æ³•è¡¨ç°æ›´å¥½"><a href="#2-Senseiæ˜¯å¦æ¯”åŸºäºå¯¹æŠ—æ ·æœ¬å†è®­ç»ƒæ–¹æ³•è¡¨ç°æ›´å¥½" class="headerlink" title="2.Senseiæ˜¯å¦æ¯”åŸºäºå¯¹æŠ—æ ·æœ¬å†è®­ç»ƒæ–¹æ³•è¡¨ç°æ›´å¥½"></a>2.Senseiæ˜¯å¦æ¯”åŸºäºå¯¹æŠ—æ ·æœ¬å†è®­ç»ƒæ–¹æ³•è¡¨ç°æ›´å¥½</h2><p>å¯¹æŠ—æ ·æœ¬å†è®­ç»ƒæ–¹æ³•ï¼š<br>iï¼‰ä½¿ç”¨åŸå§‹è®­ç»ƒæ•°æ®è®­ç»ƒæ¨¡å‹ï¼›<br>iiï¼‰é€šè¿‡æˆ‘ä»¬çš„è½¬æ¢ï¼ˆå³ä½¿DNNè’™æ··çš„å˜ä½“ï¼‰ç”Ÿæˆå¯¹æŠ—æ€§ç¤ºä¾‹ï¼›<br>iiiï¼‰é€‰æ‹©æœ€ä½³å¯¹æŠ—æ€§ç¤ºä¾‹ï¼Œæ·»åŠ è®­ç»ƒæ•°æ®ï¼Œç„¶åé‡æ–°è®­ç»ƒ5ä¸ªæ¨¡å‹</p><p><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzz-Testing-based-Data-Augmentation-to-Improve-Robustness-of-Deep-Neural-Networks/2020-06-27-01-26-58.png" alt></p><h2 id="3-Senseièƒ½å¦æé«˜é²æ£’æ€§åŒæ—¶ä¿æŒç²¾åº¦"><a href="#3-Senseièƒ½å¦æé«˜é²æ£’æ€§åŒæ—¶ä¿æŒç²¾åº¦" class="headerlink" title="3.Senseièƒ½å¦æé«˜é²æ£’æ€§åŒæ—¶ä¿æŒç²¾åº¦"></a>3.Senseièƒ½å¦æé«˜é²æ£’æ€§åŒæ—¶ä¿æŒç²¾åº¦</h2><p>mixup æ˜¯ä¸€ç§æ•°æ®å¢å¼ºæ–¹æ³•ã€‚mixupå’ŒSenseiéƒ½æ€»ä½“ä¸Šæ”¹å–„äº†æ³›åŒ–æ€§èƒ½ã€‚å®é™…ä¸Šï¼Œåœ¨æ ‡å‡†æ³›åŒ–æ–¹é¢ï¼Œmixupæ¯”Senseiæ›´å¥½ï¼›ä½†æ˜¯ï¼Œåœ¨æ”¹å–„ç°å®ä¸–ç•Œä¸­è‡ªç„¶å‘ç”Ÿçš„Mutatorçš„é²æ£’æ€§æ–¹é¢ï¼Œmixupæ•ˆæœä¸ä½³ã€‚<br><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzz-Testing-based-Data-Augmentation-to-Improve-Robustness-of-Deep-Neural-Networks/2020-06-27-01-27-21.png" alt></p><h2 id="4-é€‰æ‹©æ€§æ•°æ®å¢å¼ºï¼ˆ-Sensei-SA-ï¼‰çš„æ•ˆæœå’Œæ•ˆç‡"><a href="#4-é€‰æ‹©æ€§æ•°æ®å¢å¼ºï¼ˆ-Sensei-SA-ï¼‰çš„æ•ˆæœå’Œæ•ˆç‡" class="headerlink" title="4.é€‰æ‹©æ€§æ•°æ®å¢å¼ºï¼ˆ Sensei-SA ï¼‰çš„æ•ˆæœå’Œæ•ˆç‡"></a>4.é€‰æ‹©æ€§æ•°æ®å¢å¼ºï¼ˆ Sensei-SA ï¼‰çš„æ•ˆæœå’Œæ•ˆç‡</h2><p>ä¸W-10ç›¸æ¯”ï¼ŒSensei-SAå‡å°‘äº†25ï¼…çš„è®­ç»ƒæ—¶é—´ï¼Œè€Œé²æ£’æ€§åˆ™æé«˜äº†3ï¼…ã€‚<br><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzz-Testing-based-Data-Augmentation-to-Improve-Robustness-of-Deep-Neural-Networks/2020-06-27-01-27-38.png" alt></p><h2 id="5-å¯¹è¶…å‚æ•°çš„æ•æ„Ÿç¨‹åº¦"><a href="#5-å¯¹è¶…å‚æ•°çš„æ•æ„Ÿç¨‹åº¦" class="headerlink" title="5.å¯¹è¶…å‚æ•°çš„æ•æ„Ÿç¨‹åº¦"></a>5.å¯¹è¶…å‚æ•°çš„æ•æ„Ÿç¨‹åº¦</h2><p>çªå˜ä½“é›†åˆè§„æ¨¡æœ€å¥½ä¸º10~15</p><p>ç¥ç»å…ƒè¦†ç›–ç‡åœ¨é²æ£’æ€§è¯„ä¼°æ–¹é¢è¡¨ç°å‡ºä¸æŸå¤±å‡½æ•°ç›¸ä¼¼çš„æ€§èƒ½</p><p>åŸºäºç¥ç»å…ƒè¦†ç›–çš„é€‚åº”åº¦å‡½æ•°æ¯”åŸºäºæŸå¤±çš„é€‚åº”åº¦å‡½æ•°å°†è®­ç»ƒæ—¶é—´å¢åŠ äº†50ï¼…ã€‚ åŸå› æ˜¯ç¥ç»å…ƒè¦†ç›–ç‡çš„è®¡ç®—æ¯”è®­ç»ƒæŸå¤±è¦æ˜‚è´µ<br><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzz-Testing-based-Data-Augmentation-to-Improve-Robustness-of-Deep-Neural-Networks/2020-06-27-01-27-55.png" alt><br><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzz-Testing-based-Data-Augmentation-to-Improve-Robustness-of-Deep-Neural-Networks/2020-06-27-01-28-00.png" alt></p><p>åœ¨åˆ¤æ–­æ ·æœ¬é²æ£’æ€§ä¸Šï¼ŒåŸºäºæŸå¤±çš„é€‰æ‹©å‡ä¼˜äºåŸºäºåˆ†ç±»çš„é€‰æ‹©ã€‚</p><p>åŸºäºæŸå¤±çš„é€‰æ‹©è¶³ä»¥è·³è¿‡è¶³å¤Ÿæ•°é‡çš„æ•°æ®ç‚¹ï¼Œä»è€Œå¹³å‡å‡å°‘25ï¼…çš„è®­ç»ƒæ—¶é—´ã€‚<br><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzz-Testing-based-Data-Augmentation-to-Improve-Robustness-of-Deep-Neural-Networks/2020-06-27-01-28-12.png" alt></p><p>Loss thresholdè¶Šå¤§ï¼Œè®­ç»ƒæ—¶é—´è¶ŠçŸ­ï¼Œç„¶è€Œé²æ£’å‡†ç¡®æ€§ä¹Ÿä¸‹é™</p><p>Cifar10æ•°æ®é›†æ¯”å…¶ä»–æ•°æ®é›†å¯¹loss thresholdæ›´ä¸ºæ•æ„Ÿ<br><img src="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzz-Testing-based-Data-Augmentation-to-Improve-Robustness-of-Deep-Neural-Networks/2020-06-27-01-28-22.png" alt></p><h1 id="Threads-to-Validity"><a href="#Threads-to-Validity" class="headerlink" title="Threads to Validity"></a>Threads to Validity</h1><p>our results may not generalize to other datasets, or models, or for other applications</p><h1 id="ç›¸å…³å·¥ä½œ"><a href="#ç›¸å…³å·¥ä½œ" class="headerlink" title="ç›¸å…³å·¥ä½œ"></a>ç›¸å…³å·¥ä½œ</h1><h2 id="æµ‹è¯•å……è¶³æ€§æŒ‡æ ‡"><a href="#æµ‹è¯•å……è¶³æ€§æŒ‡æ ‡" class="headerlink" title="æµ‹è¯•å……è¶³æ€§æŒ‡æ ‡"></a>æµ‹è¯•å……è¶³æ€§æŒ‡æ ‡</h2><ul><li>DeepXploreï¼ŒNeuron Coverage</li><li>DeepGaugeï¼Œkæˆªé¢ç¥ç»å…ƒè¦†ç›–ç‡å’Œç¥ç»å…ƒè¾¹ç•Œè¦†ç›–ç‡</li><li>æƒŠå¥‡åº¦ surprise adequacy</li><li>MODEï¼Œæ‰§è¡ŒçŠ¶æ€å·®åˆ†åˆ†æä»¥è¯†åˆ«æ¨¡å‹çš„é”™è¯¯ç‰¹å¾ï¼Œç„¶ååœ¨æ­¤åŸºç¡€ä¸Šæ‰§è¡Œè®­ç»ƒè¾“å…¥é€‰æ‹©</li></ul><h2 id="æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ"><a href="#æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ" class="headerlink" title="æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ"></a>æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ</h2><ul><li>å¯¹æŠ—æ€§æµ‹è¯•ï¼Œæœ‰é€‰æ‹©åœ°ä¿®æ”¹å‡ ä¸ªåƒç´ ï¼Œå°†å¯¹æŠ—æ€§å®ä¾‹çš„ç”Ÿæˆå»ºæ¨¡ä¸ºä¼˜åŒ–é—®é¢˜ï¼Œå¹¶ä½¿ç”¨ä¸€é˜¶ä¼˜åŒ–ç®—æ³•è§£å†³ä¼˜åŒ–é—®é¢˜ã€‚ç”Ÿæˆæœºå™¨å­¦ä¹ ä¹Ÿå¯ä»¥ç”¨æ¥ç”Ÿæˆå¯¹æŠ—æ€§è¾“å…¥</li><li>ä½†æ˜¯å¯¹äºè‡ªç„¶äº§ç”Ÿçš„å˜åŒ–ï¼ˆæ—‹è½¬å’Œå¹³ç§»ç­‰ï¼‰ï¼Œç”±äºå…¶å˜æ¢éå‡¸ï¼Œä¸åˆ©äºä¸€é˜¶ä¼˜åŒ–</li><li>TensorFuzzï¼Œä¸é€‚åˆæˆ‘ä»¬çš„æ•°æ®å¢å¼ºé©±åŠ¨çš„é²æ£’æ€§è®­ç»ƒç›®æ ‡</li><li>DeepTestå’ŒDeepRoadï¼Œé€šè¿‡metamorphic testingæ¥ç”Ÿæˆæš´éœ²DNN bugçš„æµ‹è¯•ç”¨ä¾‹</li></ul><h2 id="æµ‹è¯•åˆå¹¶ç­–ç•¥ï¼ŒTest-incorporation-strategy"><a href="#æµ‹è¯•åˆå¹¶ç­–ç•¥ï¼ŒTest-incorporation-strategy" class="headerlink" title="æµ‹è¯•åˆå¹¶ç­–ç•¥ï¼ŒTest incorporation strategy"></a>æµ‹è¯•åˆå¹¶ç­–ç•¥ï¼ŒTest incorporation strategy</h2><ul><li>ç»å¤§å¤šæ•°DNNæµ‹è¯•ç”¨ä¾‹ç”ŸæˆæŠ€æœ¯é¦–å…ˆä½¿ç”¨ç»è¿‡è®­ç»ƒçš„DNNç”Ÿæˆæµ‹è¯•ï¼ˆæˆ–å¯¹æŠ—å®ä¾‹ï¼‰ï¼Œç„¶åä½¿ç”¨å®ƒä»¬é‡æ–°è®­ç»ƒDNNï¼Œä»¥æé«˜å…¶å‡†ç¡®æ€§æˆ–å¥å£®æ€§ã€‚</li><li>AutoAugment ï¼Œä½¿ç”¨å¼ºåŒ–å­¦ä¹ åœ¨æœç´¢ç©ºé—´ä¸­æ‰¾åˆ°æœ€ä½³çš„æ‰©å¢ç­–ç•¥ï¼Œä»è€Œä½¿ç¥ç»ç½‘ç»œè¾¾åˆ°æœ€é«˜ç²¾åº¦</li><li>Mixupï¼Œæ˜¯æœ€è¿‘æå‡ºçš„æœ€å…ˆè¿›çš„æ•°æ®å¢å¼ºæŠ€æœ¯ï¼Œä½†æ˜¯åœ¨è‰¯æ€§å˜å¼‚ä¸­ï¼Œé²æ£’æ€§ä¸ä½³ã€‚</li><li>Engstromï¼Œé™¤äº†æ²¡ç”¨é—ä¼ ç®—æ³•ä¹‹å¤–éƒ½ä¸€æ ·</li></ul><h2 id="ç¨³å¥æ€§æ¨¡å‹ï¼ŒRobust-models"><a href="#ç¨³å¥æ€§æ¨¡å‹ï¼ŒRobust-models" class="headerlink" title="ç¨³å¥æ€§æ¨¡å‹ï¼ŒRobust models"></a>ç¨³å¥æ€§æ¨¡å‹ï¼ŒRobust models</h2><ul><li>åŸºäºæ­£åˆ™åŒ–çš„ç™½ç›’æ–¹æ³•ï¼Œé€šè¿‡ä¿®æ”¹DNNæŸå¤±å‡½æ•°ï¼Œå¹¶åœ¨æ ‡å‡†ç»éªŒæŸå¤±ä¸­åŠ å…¥ä¸€ä¸ªä¸å˜é‡æ¥æ­£åˆ™åŒ–ï¼Œæé«˜æ·±åº¦ç¥ç»ç½‘ç»œæ¨¡å‹çš„é²æ£’æ€§</li></ul>]]></content>
    
    
    <categories>
      
      <category>paper</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Data Augmentation</tag>
      
      <tag>Robustness</tag>
      
      <tag>Deep Neural Networks</tag>
      
      <tag>Fuzz Testing</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€è®ºæ–‡é˜…è¯»ç¬”è®°ã€‘EDA: Easy Data Augmentation Techniques for Boosting Performance on Text Classification Tasks</title>
    <link href="/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91EDA-Easy-Data-Augmentation-Techniques-for-Boosting-Performance-on-Text-Classification-Tasks/"/>
    <url>/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91EDA-Easy-Data-Augmentation-Techniques-for-Boosting-Performance-on-Text-Classification-Tasks/</url>
    
    <content type="html"><![CDATA[<p>è¿™ç¯‡è®ºæ–‡ä»‹ç»äº†ä¸€ä¸ªæ–‡æœ¬é¢†åŸŸçš„æ•°æ®å¢å¼ºå·¥å…·ï¼Œæå‡ºäº†ä¸€äº›æ•°æ®å¢å¼ºæ–¹æ³•ã€‚<br><!--more---></p>]]></content>
    
    
    <categories>
      
      <category>paper</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Data Augmentation</tag>
      
      <tag>NLP</tag>
      
      <tag>Deep Neural Networks</tag>
      
      <tag>Text Classification</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Datawhaleâ€”â€”SVHNâ€”â€”Task05ï¼šæ¨¡å‹é›†æˆ</title>
    <link href="/2020/06/02/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task05%EF%BC%9A%E6%A8%A1%E5%9E%8B%E9%9B%86%E6%88%90/"/>
    <url>/2020/06/02/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task05%EF%BC%9A%E6%A8%A1%E5%9E%8B%E9%9B%86%E6%88%90/</url>
    
    <content type="html"><![CDATA[<p>ä¸‰ä¸ªè‡­çš®åŒ ï¼Œé¡¶ä¸ªè¯¸è‘›äº®ã€‚<br><!--more---></p><h2 id="1-é›†æˆå­¦ä¹ "><a href="#1-é›†æˆå­¦ä¹ " class="headerlink" title="1. é›†æˆå­¦ä¹ "></a>1. é›†æˆå­¦ä¹ </h2><p>é›†æˆå­¦ä¹ çš„ä¸€èˆ¬ç»“æ„ï¼Œæ˜¯é¦–å…ˆäº§ç”Ÿä¸€ç»„â€œä¸ªä½“å­¦ä¹ å™¨â€ï¼Œå†ç”¨<strong>æŸç§ç­–ç•¥</strong>å°†å…¶ç»“åˆèµ·æ¥ã€‚ç±»ä¼¼äºâ€œä¸‰ä¸ªè‡­çš®åŒ ï¼Œé¡¶ä¸ªè¯¸è‘›äº®â€çš„æ€æƒ³ã€‚</p><p><img src="/2020/06/02/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task05%EF%BC%9A%E6%A8%A1%E5%9E%8B%E9%9B%86%E6%88%90/2020-06-02-22-32-43.png" alt></p><p>å¦‚æœè‡ªå·±çš„<strong>ä¸ªä½“å­¦ä¹ å™¨</strong>æ€§èƒ½ä¸æ˜¯å¾ˆä»¤äººæ»¡æ„ï¼Œä½¿ç”¨é›†æˆå­¦ä¹ å°†èƒ½å¤Ÿæå‡ä¸€å®šçš„æ€§èƒ½ï¼Œé›†æˆå­¦ä¹ å™¨ä¸€èˆ¬éƒ½èƒ½å¤Ÿè·å¾—æ¯”ä¸ªä½“å­¦ä¹ å™¨è¦å¥½çš„æ•ˆæœã€‚</p><p>é›†æˆå­¦ä¹ æ•ˆæœè¦æå‡ï¼Œè¦å°½å¯èƒ½æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š</p><ol><li>ä¸ªä½“å­¦ä¹ å™¨æ€§èƒ½ä¸å¤ªå·®ï¼›</li><li>ä¸ªä½“å­¦ä¹ å™¨ä¹‹é—´ä¸èƒ½å¤ªç›¸ä¼¼ï¼Œç»“æ„ã€æ‰€ç”¨æ•°æ®å·®å¼‚è¶Šå¤§è¶Šå¥½ã€‚</li></ol><p>å¯ä»¥è¯æ˜ï¼Œå¦‚æœä¸ªä½“å­¦ä¹ å™¨ä¹‹é—´çš„å†³ç­–è¯¯å·®ä¸å­˜åœ¨å…³è”ï¼Œå†³ç­–ç›¸äº’ç‹¬ç«‹ï¼Œé‚£ä¹ˆéšç€ä¸ªä½“å­¦ä¹ å™¨æ•°é‡çš„å¢å¤šï¼Œé›†æˆå­¦ä¹ å™¨çš„é”™è¯¯ç‡å°†æŒ‡æ•°ä¸‹é™ã€‚</p><p>æ ¹æ®ä¸ªä½“å­¦ä¹ å™¨çš„ç”Ÿæˆæ–¹å¼ï¼Œç›®å‰çš„é›†æˆå­¦ä¹ æ–¹æ³•åˆ†æˆä¸¤å¤§ç±»ï¼š</p><ol><li>ä¸ªä½“å­¦ä¹ å™¨ä¹‹é—´å­˜åœ¨å¼ºä¾èµ–å…³ç³»ã€å¿…é¡»ä¸²è¡Œç”Ÿæˆçš„åºåˆ—åŒ–æ–¹æ³•ï¼Œä»£è¡¨ä¸ºBoostingï¼›</li><li>å­¦ä¹ å™¨ä¹‹é—´ä¸å­˜åœ¨å¼ºä¾èµ–å…³ç³»ã€å¯ä»¥å¹¶è¡Œçš„æ–¹æ³•ï¼Œä»£è¡¨ä¸ºBaggingå’Œéšæœºæ£®æ—ã€‚</li></ol><p>é›†æˆå­¦ä¹ åªèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜ç²¾åº¦ï¼Œå¹¶éœ€è¦è€—è´¹è¾ƒå¤§çš„è®­ç»ƒæ—¶é—´ã€‚å…·ä½“çš„é›†æˆå­¦ä¹ æ–¹æ³•éœ€è¦ä¸éªŒè¯é›†åˆ’åˆ†æ–¹æ³•ç»“åˆã€‚</p><h3 id="1-1-Boosting"><a href="#1-1-Boosting" class="headerlink" title="1.1 Boosting"></a>1.1 Boosting</h3><p>Boostingç®—æ³•æ˜¯ä¸€ç±»èƒ½å°†å¼±å­¦ä¹ å™¨æå‡ä¸ºå¼ºå­¦ä¹ å™¨çš„ç®—æ³•ã€‚åŸºæœ¬æ€æƒ³æ˜¯ï¼šå…ˆåˆ©ç”¨åˆå§‹è®­ç»ƒé›†è®­ç»ƒä¸€ä¸ªåŸºæœ¬å­¦ä¹ å™¨ï¼Œå†åŸºäºåŸºæœ¬å­¦ä¹ å™¨çš„è¡¨ç°ï¼Œå¯¹è®­ç»ƒæ ·æœ¬åšå‡ºè°ƒæ•´ï¼Œæ”¹å˜æ ·æœ¬åˆ†å¸ƒï¼Œä½¿å¾—å…ˆå‰è¢«åˆ†ç±»é”™è¯¯çš„è®­ç»ƒæ ·æœ¬åœ¨éšåå—åˆ°æ›´å¤šå…³æ³¨ã€‚å¦‚æ­¤é‡å¤è®­ç»ƒï¼Œç›´åˆ°åŸºå­¦ä¹ å™¨çš„æ•°ç›®è¾¾åˆ°æŒ‡å®šçš„æ•°å€¼ã€‚æœ€ç»ˆå°†è¿™å‡ ä¸ªåŸºå­¦ä¹ å™¨è¿›è¡ŒåŠ æƒç»“åˆã€‚</p><h3 id="1-2-Bagging"><a href="#1-2-Bagging" class="headerlink" title="1.2 Bagging"></a>1.2 Bagging</h3><p>æ¬²å¾—åˆ°æ³›åŒ–æ€§èƒ½å¼ºçš„é›†æˆå­¦ä¹ æ¨¡å‹ï¼Œä¸ªä½“å­¦ä¹ å™¨ä¹‹é—´åº”å½“ç›¸äº’ç‹¬ç«‹ã€‚ä½†æ˜¯å®Œå…¨ç‹¬ç«‹æ˜¯åšä¸åˆ°çš„ï¼Œå³ä¾¿æ¨¡å‹æ¶æ„å®Œå…¨ä¸åŒã€è®­ç»ƒæ•°æ®å®Œå…¨ä¸ä¸€æ ·ï¼Œè¿™äº›ä¸ªä½“å­¦ä¹ å™¨ä¹Ÿæ˜¯ä¸ºäº†è§£å†³åŒä¸€ä¸ªä»»åŠ¡è€Œè®­ç»ƒçš„ï¼Œè®­ç»ƒæ•°æ®ä¹‹é—´è‚¯å®šå­˜åœ¨å…³ç³»ï¼Œä»è€Œå¯¼è‡´æ¨¡å‹çš„å†³ç­–å­˜åœ¨ç›¸å…³æ€§ã€‚å› æ­¤Baggingç®—æ³•å°±æ˜¯æƒ³è¦å°½å¯èƒ½æå‡ä¸ªä½“å­¦ä¹ å™¨ä¹‹é—´çš„å·®å¼‚æ€§ã€‚</p><p>ä¸€ç§å¯èƒ½çš„åšæ³•æ˜¯å¯¹è®­ç»ƒæ ·æœ¬è¿›è¡Œé‡‡æ ·ï¼Œäº§ç”Ÿè‹¥å¹²ä¸ªä¸åŒçš„å­é›†ï¼Œæ¯ä¸ªå­é›†éƒ½è®­ç»ƒä¸€ä¸ªä¸ªä½“å­¦ä¹ å™¨ã€‚ä½†æ˜¯è¿™æ ·å­¦ä¹ å¾—åˆ°çš„ä¸ªä½“å­¦ä¹ å™¨éƒ½æ²¡èƒ½è·å¾—è¶³å¤Ÿçš„è®­ç»ƒæ ·æœ¬ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è¿›è¡ŒæŠ˜ä¸­ï¼Œé‡‡ç”¨äº’ç›¸å­˜åœ¨äº¤é›†çš„åˆ†å‰²æ–¹æ³•åˆ†å‰²æ•°æ®é›†ï¼Œç„¶åè®­ç»ƒæ¨¡å‹ã€‚</p><p>éšæœºæ£®æ—æœ¬è´¨ä¸Šæ˜¯è®¸å¤šå†³ç­–æ ‘çš„é›†åˆï¼Œå…¶ä¸­æ¯æ£µæ ‘éƒ½å’Œå…¶ä»–æ ‘ç•¥æœ‰ä¸åŒã€‚éšæœºæ£®æ—èƒŒåçš„æ€æƒ³æ˜¯ï¼Œæ¯æ£µæ ‘çš„é¢„æµ‹å¯èƒ½éƒ½ç›¸å¯¹è¾ƒå¥½ï¼Œä½†å¯èƒ½å¯¹éƒ¨åˆ†æ•°æ®è¿‡æ‹Ÿåˆã€‚å¦‚æœæ„é€ å¾ˆå¤šæ ‘ï¼Œå¹¶ä¸”æ¯æ£µæ ‘çš„é¢„æµ‹éƒ½å¾ˆå¥½ï¼Œä½†éƒ½ä»¥ä¸åŒçš„æ–¹å¼è¿‡æ‹Ÿåˆï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¯¹è¿™äº›æ ‘çš„ç»“æœå–å¹³å‡å€¼æ¥é™ä½è¿‡æ‹Ÿåˆã€‚æ—¢èƒ½å‡å°‘è¿‡æ‹Ÿåˆåˆèƒ½ä¿æŒæ ‘çš„é¢„æµ‹èƒ½åŠ›ï¼Œè¿™å¯ä»¥åœ¨æ•°å­¦ä¸Šä¸¥æ ¼è¯æ˜ã€‚</p><h2 id="2-æ·±åº¦å­¦ä¹ ä¸­çš„é›†æˆæ–¹æ³•"><a href="#2-æ·±åº¦å­¦ä¹ ä¸­çš„é›†æˆæ–¹æ³•" class="headerlink" title="2. æ·±åº¦å­¦ä¹ ä¸­çš„é›†æˆæ–¹æ³•"></a>2. æ·±åº¦å­¦ä¹ ä¸­çš„é›†æˆæ–¹æ³•</h2><h3 id="2-1-Dropout"><a href="#2-1-Dropout" class="headerlink" title="2.1 Dropout"></a>2.1 Dropout</h3><p>æ¯ä¸ªè®­ç»ƒæ‰¹æ¬¡ä¸­ï¼Œåœ¨æ›´æ–°æƒé‡ä¹‹å‰ï¼Œéšæœºè®©ä¸€éƒ¨åˆ†çš„èŠ‚ç‚¹åœæ­¢å·¥ä½œï¼Œå¢åŠ æ¨¡å‹è®­ç»ƒæ—¶çš„ç²¾åº¦æå‡éš¾åº¦ã€‚</p><p><img src="/2020/06/02/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task05%EF%BC%9A%E6%A8%A1%E5%9E%8B%E9%9B%86%E6%88%90/2020-06-02-23-33-21.png" alt></p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè®­ç»ƒçš„æ—¶å€™åŠ dropoutï¼Œæµ‹è¯•çš„æ—¶å€™ä»¥åŠå®é™…ä½¿ç”¨æ—¶ï¼Œæ˜¯ä¸éœ€è¦dropoutçš„ã€‚è¿™å°±åƒå¹³æ—¶è®­ç»ƒçš„æ—¶å€™è…¿ä¸Šç»‘ä¸Šæ²™è¢‹ï¼Œæˆ˜æ—¶å°±èƒ½å¤Ÿè·å¾—æ›´å“è¶Šçš„æ•ˆæœã€‚æœ‰æ•ˆçš„ç¼“è§£æ¨¡å‹è¿‡æ‹Ÿåˆ</p><p><img src="/2020/06/02/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task05%EF%BC%9A%E6%A8%A1%E5%9E%8B%E9%9B%86%E6%88%90/2020-06-02-23-36-15.png" alt></p><p>ç›´è§‚æ¥è®²ï¼ŒDropoutæ³•ä½¿å¾—æ¯ä¸ªèŠ‚ç‚¹éƒ½æ— æ³•å•çº¯ä¾èµ–å…¶ä»–èŠ‚ç‚¹è€Œæ»¥ç«½å……æ•°ï¼Œå› ä¸ºéšæ—¶éšåœ°è‡ªå·±çš„åŒä¼´å°±å¯èƒ½è¢«dropoutã€‚è¿™æ ·è®­ç»ƒæ—¶ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šå­¦åˆ°æ›´å¤šçš„çŸ¥è¯†ã€‚ä»è€Œæå‡æ•´ä½“å­¦ä¹ å™¨çš„æ€§èƒ½ã€‚å› æ­¤è¿™ä¹Ÿç®—æ˜¯é›†æˆå­¦ä¹ ã€‚</p><h3 id="2-2-æµ‹è¯•é›†æ•°æ®æ‰©å¢"><a href="#2-2-æµ‹è¯•é›†æ•°æ®æ‰©å¢" class="headerlink" title="2.2 æµ‹è¯•é›†æ•°æ®æ‰©å¢"></a>2.2 æµ‹è¯•é›†æ•°æ®æ‰©å¢</h3><p>æµ‹è¯•é›†æ•°æ®æ‰©å¢ï¼ˆTest Time Augmentationï¼Œç®€ç§°TTAï¼‰ä¹Ÿæ˜¯å¸¸ç”¨çš„é›†æˆå­¦ä¹ æŠ€å·§ï¼Œæ•°æ®æ‰©å¢ä¸ä»…å¯ä»¥åœ¨è®­ç»ƒæ—¶å€™ç”¨ï¼Œè€Œä¸”å¯ä»¥åŒæ ·åœ¨é¢„æµ‹æ—¶å€™è¿›è¡Œæ•°æ®æ‰©å¢ï¼Œå¯¹åŒä¸€ä¸ªæ ·æœ¬é¢„æµ‹ä¸‰æ¬¡ï¼Œç„¶åå¯¹ä¸‰æ¬¡ç»“æœè¿›è¡Œå¹³å‡ã€‚</p><h2 id="3-ç»“æœåå¤„ç†"><a href="#3-ç»“æœåå¤„ç†" class="headerlink" title="3. ç»“æœåå¤„ç†"></a>3. ç»“æœåå¤„ç†</h2><ul><li>ç»Ÿè®¡å›¾ç‰‡ä¸­æ¯ä¸ªä½ç½®å­—ç¬¦å‡ºç°çš„é¢‘ç‡ï¼Œä½¿ç”¨è§„åˆ™ä¿®æ­£ç»“æœï¼›</li><li>å•ç‹¬è®­ç»ƒä¸€ä¸ªå­—ç¬¦é•¿åº¦é¢„æµ‹æ¨¡å‹ï¼Œç”¨æ¥é¢„æµ‹å›¾ç‰‡ä¸­å­—ç¬¦ä¸ªæ•°ï¼Œå¹¶ä¿®æ­£ç»“æœã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>datawhale</tag>
      
      <tag>Python</tag>
      
      <tag>Ensemble</tag>
      
      <tag>Boosting</tag>
      
      <tag>Bagging</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>numpyæ‹¼åˆæ•°ç»„æ–¹æ³•å¤§å…¨</title>
    <link href="/2020/06/01/numpy%E6%8B%BC%E5%90%88%E6%95%B0%E7%BB%84/"/>
    <url>/2020/06/01/numpy%E6%8B%BC%E5%90%88%E6%95%B0%E7%BB%84/</url>
    
    <content type="html"><![CDATA[<p>numpyçš„ä¸€å¤§ç‰¹è‰²å°±æ˜¯å…¶å†…éƒ¨çš„çŸ©é˜µå‘é‡è¿ç®—ã€‚çŸ©é˜µä¹‹é—´çš„æ‹¼æ¥æ–¹æ³•ï¼Œä½ æŒæ¡å¤šå°‘ï¼Ÿ<br><!--more---></p><h2 id="1-appendæ‹¼æ¥"><a href="#1-appendæ‹¼æ¥" class="headerlink" title="1. appendæ‹¼æ¥"></a>1. appendæ‹¼æ¥</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“å¯¹äºPythonåŸç”Ÿåˆ—è¡¨listæ¥è¯´ï¼Œappendæ˜¯æœ€æ–¹ä¾¿çš„æ·»åŠ å…ƒç´ çš„æ–¹æ³•ï¼Œä¸€å¥list.append(elem)å°±èƒ½åœ¨åˆ—è¡¨æœ€åæ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚</p><p>åœ¨numpyä¸­ï¼Œappendä¹Ÿæ˜¯ä¸€ä¸ªç›´è§‚ä¸”å¥½ç”¨çš„æ–¹æ³•ï¼Œnp.append(A,B)èƒ½å¤Ÿç›´æ¥æ‹¼åˆä¸¤ä¸ªndarrayæ•°ç»„ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬æ–°å»ºä¸¤ä¸ªä¸‰ç»´æ•°ç»„ï¼Œä¸€ä¸ªå…¨ä¸ºé›¶ï¼Œä¸€ä¸ªå…¨ä¸ºä¸€ã€‚</p><pre><code class="lang-python">C = np.zeros((2,2,2))D = np.ones((2,2,2))print(&quot;C: &quot;, C, C.shape)print(&quot;D: &quot;, D, D.shape)C:  [[[0. 0.]  [0. 0.]] [[0. 0.]  [0. 0.]]] shape=(2, 2, 2)D:  [[[1. 1.]  [1. 1.]] [[1. 1.]  [1. 1.]]] shape=(2, 2, 2)</code></pre><p>ç„¶åæˆ‘ä»¬é‡‡ç”¨ä¸åŒçš„æ–¹æ³•å°†å…¶æ‹¼åˆåœ¨ä¸€èµ·ã€‚</p><p>é¦–å…ˆæ˜¯append(C,D)è¿™ç§ç›´è§‚çš„æ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°Cå’ŒDéƒ½è¢«å±•å¼€æˆäº†ä¸€ç»´ã€‚</p><pre><code class="lang-python">np.append(C,D)array([0., 0., 0., 0., 0., 0., 0., 0., 1., 1., 1., 1., 1., 1., 1., 1.])</code></pre><p>åœ¨å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¸Œæœ›æ•°ç»„æ‹¼æ¥æ—¶èƒ½å¤Ÿä¿æŒåŸæœ‰çš„ç»´åº¦ï¼ŒæŒ‰ç…§è¡Œæ‹¼æ¥/åˆ—æ‹¼æ¥/å…¶ä»–ç»´åº¦æ‹¼æ¥ã€‚æ­¤æ—¶åªéœ€è¦æ”¹åŠ¨appendçš„å‚æ•°axiså³å¯ã€‚</p><pre><code class="lang-python">np.append(C,D,axis=0)array([[[0., 0.],        [0., 0.]],       [[0., 0.],        [0., 0.]],       [[1., 1.],        [1., 1.]],       [[1., 1.],        [1., 1.]]])np.append(C,D,axis=1)array([[[0., 0.],        [0., 0.],        [1., 1.],        [1., 1.]],       [[0., 0.],        [0., 0.],        [1., 1.],        [1., 1.]]])np.append(C,D,axis=2)array([[[0., 0., 1., 1.],        [0., 0., 1., 1.]],       [[0., 0., 1., 1.],        [0., 0., 1., 1.]]])</code></pre><p>å¯¹äºä¸‰ç»´æ•°ç»„ï¼Œaxis=0ä¸ºå±‚ï¼Œaxis=1ä¸ºè¡Œï¼Œaxis=2ä¸ºåˆ—ã€‚è¿™ä¸éš¾ç†è§£ï¼Œå› ä¸ºç¡®å®šå•ä½æ•°ç»„ä¸­å…ƒç´ ä½ç½®çš„åæ ‡å°±æ˜¯(å±‚ï¼Œè¡Œï¼Œåˆ—)</p><h2 id="2-concatenateæ‹¼æ¥"><a href="#2-concatenateæ‹¼æ¥" class="headerlink" title="2. concatenateæ‹¼æ¥"></a>2. concatenateæ‹¼æ¥</h2><p>concatenateä»å­—é¢æ„ä¹‰ä¸Šå°±è®©äººæ˜ç™½è¿™ä¸ªå‡½æ•°ä¸“é—¨è´Ÿè´£æ•°ç»„æ‹¼æ¥ã€‚ä¸ä»…ä»…æ˜¯ä¸¤ä¸ªï¼Œè¿˜å¯ä»¥è´Ÿè´£å¤šä¸ªæ•°ç»„ä¸€èµ·æ‹¼æ¥ã€‚ç†è®ºä¸Šæ¥è¯´concatenateçš„é€Ÿåº¦å’Œå†…å­˜æ¶ˆè€—éƒ½æ¯”appendè¦å°ï¼Œä½†æˆ‘å¹¶æ²¡æœ‰å®é™…åšå®éªŒéªŒè¯ã€‚</p><pre><code class="lang-python">np.concatenate((C,D)) # default axis=0array([[[0., 0.],        [0., 0.]],       [[0., 0.],        [0., 0.]],       [[1., 1.],        [1., 1.]],       [[1., 1.],        [1., 1.]]])np.concatenate((C,D), axis=1) # =np.append(C,D,axis=1)array([[[0., 0.],        [0., 0.],        [1., 1.],        [1., 1.]],       [[0., 0.],        [0., 0.],        [1., 1.],        [1., 1.]]])</code></pre><h2 id="3-stackç³»åˆ—"><a href="#3-stackç³»åˆ—" class="headerlink" title="3. stackç³»åˆ—"></a>3. stackç³»åˆ—</h2><p>stackç³»åˆ—å‡½æ•°åŒ…æ‹¬np.stack/hstack/vstack/dstack/column_stack/row_stackï¼Œé¡¾åæ€ä¹‰ï¼Œhstackæ˜¯æŒ‰ç…§æ¨ªå‘æ‹¼æ¥ï¼Œvstackç«–ç€æ‹¼æ¥ï¼Œdstackåˆ™æ˜¯å±‚å æ•°ç»„ã€‚å…¶å®æˆ‘æœ€çƒ¦è¿™ç§æŠ½è±¡æè¿°äº†ï¼Œå› ä¸ºäºŒç»´æ•°ç»„å’Œä¸‰ç»´æ•°ç»„/é«˜ç»´æ•°ç»„çš„æŠ½è±¡æè¿°æ ¹æœ¬ä¸ä¸€è‡´ï¼Œè¿˜æ˜¯axiså¥½ã€‚ä¸æ˜ç™½axisçš„åŒå­¦å¯ä»¥çœ‹<a href="https://superlova.github.io/2020/05/19/numpy%E4%B8%ADaxis%E7%9A%84%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3/">è¿™ç¯‡æ–‡ç« </a>ã€‚</p><pre><code class="lang-python">np.hstack((C,D)) # = np.append(C,D,axis=1) = np.column_stack()array([[[0., 0.],        [0., 0.],        [1., 1.],        [1., 1.]],       [[0., 0.],        [0., 0.],        [1., 1.],        [1., 1.]]])np.vstack((C,D)) # =np.append(C,D,axis=0) = np.row_stack()array([[[0., 0.],        [0., 0.]],       [[0., 0.],        [0., 0.]],       [[1., 1.],        [1., 1.]],       [[1., 1.],        [1., 1.]]])np.dstack((C,D)) # =np.append(C,D,aixs=2)array([[[0., 0., 1., 1.],        [0., 0., 1., 1.]],       [[0., 0., 1., 1.],        [0., 0., 1., 1.]]])</code></pre><h2 id="4-np-r"><a href="#4-np-r" class="headerlink" title="4. np.r_[]"></a>4. np.r_[]</h2><p>ç¥å¥‡çš„numpyæ€»èƒ½ç»™å‡ºç¥å¥‡çš„è§£æ³•ã€‚np.r<em>æ˜¯æ„å»ºæ•°ç»„/æ‹¼åˆæ•°ç»„çš„æœ€ç®€ä¾¿å†™æ³•ï¼Œä½†ä¸ä¸€å®šæ˜¯å¥½ç†è§£çš„ã€‚è¿™ç§å†™æ³•å’Œä¹‹å‰å†™çš„appendæ²¡ä»€ä¹ˆä¸åŒï¼Œä½†æ˜¯æ›´åŠ ç®€æ´ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨np.r</em>åšå‡ºæ›´åŠ å¤æ‚çš„åŠŸèƒ½ã€‚</p><p>ä¸€è¨€ä»¥è”½ä¹‹ï¼Œnp.r_[]è¡¨è¾¾å¼èƒ½å¤Ÿå¿«é€Ÿä½¿å¾—å¤šä¸ªåœ¨ä¸­æ‹¬å·é‡Œé¢çš„array/arrayåˆ‡ç‰‡ï¼ŒæŒ‰ç…§axis=0æ‹¼æ¥èµ·æ¥ã€‚</p><p>np.r_[]å­˜åœ¨ä¸¤ç§ä½¿ç”¨æƒ…å†µï¼š</p><ol><li>å¦‚æœä¸­æ‹¬å·å†…éƒ¨æ˜¯ç”±è‹¥å¹²é€—å·(comma,)åˆ†éš”çš„arrayï¼Œå°±å°†ä»–ä»¬æŒ‰ç…§axis=0æ‹¼æ¥èµ·æ¥ã€‚</li><li>å¦‚æœä¸­æ‹¬å·å†…éƒ¨åŒ…æ‹¬çŸ©é˜µåˆ‡ç‰‡(slices)æˆ–è€…æ ‡é‡(scalars)ï¼Œå°±å°†ä»–ä»¬å…¨éƒ¨å˜æˆä¸€ç»´æ•°ç»„é¦–å°¾ç›¸æ¥ã€‚</li></ol><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>ä¸­æ‹¬å·<code>[3:6:1]</code>å†…éƒ¨ä»£è¡¨çš„åˆ‡ç‰‡ï¼Œå…¶å«ä¹‰ç›¸å½“äº<code>np.arange(3,6,1)</code>ï¼Œå³åœ¨<code>[3,6)</code>èŒƒå›´å†…ï¼Œä»3å¼€å§‹èµ°ä¸€æ­¥å–ä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå°±æ˜¯<code>[3,4,5]</code>ã€‚</li><li>ä¸­æ‹¬å·<code>[0:5:3j]</code>åœ¨æœ€ååŠ äº†å­—æ¯<code>j</code>ï¼Œç›¸å½“äº<code>np.linspace(0,5,3,endpoint=True)</code>ï¼Œåœ¨<code>[0,5]</code>èŒƒå›´å†…ï¼Œå‡åŒ€åœ°å–ä¸‰ä¸ªå…ƒç´ ã€‚</li></ul><pre><code class="lang-python">np.r_[C,D] # =np.append(C,D,axis=0)array([[[0., 0.],        [0., 0.]],       [[0., 0.],        [0., 0.]],       [[1., 1.],        [1., 1.]],       [[1., 1.],        [1., 1.]]])np.r_[0:10:3, 0:5:4j]array([0.        , 3.        , 6.        , 9.        , 0.        ,       1.66666667, 3.33333333, 5.        ])</code></pre><p>åœ¨ä¸­æ‹¬å·å†…ï¼Œå¦‚æœæœ€å¼€å§‹æ˜¯ä¸€ä¸ª<strong>ç‰¹å®šçš„å­—ç¬¦ä¸²</strong>ï¼Œnp.r_ä¼šè¯•å›¾æ ¹æ®å­—ç¬¦ä¸²çš„å«ä¹‰ï¼Œæ”¹å˜å…¶è¾“å‡ºæ ¼å¼ã€‚</p><ul><li><code>np.r_[&#39;r&#39;, index_expression]</code>å’Œ<code>np.r_[&#39;c&#39;, index_expression]</code>å°†è¾“å‡ºä»arrayç±»å‹è½¬å˜æˆmatrixç±»å‹ã€‚<code>np.r_[&#39;c&#39;, index_expression]</code>ä¼šæŠŠä¸€ç»´index_expressionç»„è£…æˆN*1çš„åˆ—å‘é‡ã€‚</li></ul><pre><code class="lang-python">np.r_[&quot;r&quot;, 0:10:3, 0:5:4j]matrix([[0.        , 3.        , 6.        , 9.        , 0.        ,         1.66666667, 3.33333333, 5.        ]])np.r_[&quot;c&quot;, 0:10:3, 0:5:4j]matrix([[0.        ],        [3.        ],        [6.        ],        [9.        ],        [0.        ],        [1.66666667],        [3.33333333],        [5.        ]])</code></pre><ul><li><code>np.r_[&quot;n&quot;, index_expression]</code>å‰é¢å­—ç¬¦ä¸²æ˜¯æ•´æ•°ï¼Œåˆ™æ‹¼æ¥æ—¶å°†ä¼šæŒ‰ç…§axis=nè¿›è¡Œæ‹¼æ¥ã€‚</li></ul><pre><code class="lang-python">np.r_[&quot;-1&quot;,C,D]array([[[0., 0., 1., 1.],        [0., 0., 1., 1.]],       [[0., 0., 1., 1.],        [0., 0., 1., 1.]]])</code></pre><h2 id="5-np-c"><a href="#5-np-c" class="headerlink" title="5. np.c_"></a>5. np.c_</h2><p>åœ¨æ—¥å¸¸ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦æŒ‰ç…§æœ€åä¸€ä¸ªç»´åº¦æ‹¼åˆä¸¤ä¸ªæ•°ç»„ï¼Œä¹Ÿå°±æ˜¯np.r<em>[â€˜-1â€™,index_expression]ã€‚æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨`np.c</em>[]`</p><pre><code class="lang-python">np.c_[C,D] # =np.append(C,D,axis=2)array([[[0., 0., 1., 1.],        [0., 0., 1., 1.]],       [[0., 0., 1., 1.],        [0., 0., 1., 1.]]])np.c_[0:10:3, 0:5:4j]array([[0.        , 0.        ],       [3.        , 1.66666667],       [6.        , 3.33333333],       [9.        , 5.        ]])</code></pre><p>å…³äºnumpyä¸­çš„<code>np.c_</code>å’Œ<code>np.r_</code>ç›¸å…³çŸ¥è¯†ï¼Œå¯ä»¥å‚è€ƒ<a href="https://numpy.org/devdocs/reference/generated/numpy.r_.html#numpy.r_">å®˜æ–¹æ–‡æ¡£</a>ï¼Œé‡Œé¢æœ‰å…³äºä¸­æ‹¬å·å‰å‚æ•°çš„è¯¦ç»†è§£é‡Šã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>array</tag>
      
      <tag>numpy</tag>
      
      <tag>concatenate</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç§»åŠ¨ç¡¬ç›˜æ–‡ä»¶æˆ–ç›®å½•æŸåä¸”æ— æ³•è¯»å–è§£å†³æ–¹æ³•</title>
    <link href="/2020/05/31/%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E6%96%87%E4%BB%B6%E6%88%96%E7%9B%AE%E5%BD%95%E6%8D%9F%E5%9D%8F%E4%B8%94%E6%97%A0%E6%B3%95%E8%AF%BB%E5%8F%96%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"/>
    <url>/2020/05/31/%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E6%96%87%E4%BB%B6%E6%88%96%E7%9B%AE%E5%BD%95%E6%8D%9F%E5%9D%8F%E4%B8%94%E6%97%A0%E6%B3%95%E8%AF%BB%E5%8F%96%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜æè¿°ï¼š"><a href="#é—®é¢˜æè¿°ï¼š" class="headerlink" title="é—®é¢˜æè¿°ï¼š"></a>é—®é¢˜æè¿°ï¼š</h2><p>å®¶é‡Œçš„ç§»åŠ¨ç¡¬ç›˜å¯¿å‘½å·²æœ‰4å¹´ä¹‹ä¹…ï¼Œé‡Œé¢å­˜å‚¨äº†200å¤šGçš„å­¦ä¹ èµ„æ–™ï¼ˆå­—é¢æ„æ€ï¼‰ã€‚ä»Šå¤©æˆ‘å°†å…¶æ’åœ¨ç³»ç»Ÿä¸ºwin10çš„ç”µè„‘ä¸Šï¼Œå´å‡ºç°äº†ä»¥ä¸‹æƒ…å†µï¼š</p><ul><li>ç¡¬ç›˜é€šç”µæŒ‡ç¤ºç¯äº®ï¼›</li><li>å³ä¸‹è§’æ‰˜ç›˜åŒºåŸŸå‡ºç°usbæ’å…¥æç¤ºï¼Œå¹¶å¯ä»¥ç‚¹å‡»â€œå®‰å…¨åˆ é™¤ç¡¬ä»¶â€ï¼›</li><li>åœ¨â€œæˆ‘çš„ç”µè„‘â€ç•Œé¢ï¼Œæ˜¾ç¤ºâ€œæœ¬åœ°ç£ç›˜ D:â€ï¼Œä½†æ˜¯åŒå‡»ä¹‹åå‡ºç°é”™è¯¯â€œæ–‡ä»¶æˆ–ç›®å½•æŸåä¸”æ— æ³•è¯»å–â€ã€‚</li></ul><p>é‡å¯ç”µè„‘ã€é‡æ–°æ’æ‹”ã€æ›´æ¢å¦ä¸€å°win7ç³»ç»Ÿçš„ç”µè„‘ï¼Œéƒ½æ˜¯è¯¥çŠ¶å†µã€‚è‡³æ­¤åŸºæœ¬ç¡®å®šæ˜¯ç§»åŠ¨ç¡¬ç›˜æœ¬èº«çš„é—®é¢˜ã€‚</p><h2 id="ç¡¬ç›˜å‚æ•°ï¼š"><a href="#ç¡¬ç›˜å‚æ•°ï¼š" class="headerlink" title="ç¡¬ç›˜å‚æ•°ï¼š"></a>ç¡¬ç›˜å‚æ•°ï¼š</h2><ul><li>é»‘ç”²è™« 640G ç§»åŠ¨æœºæ¢°ç¡¬ç›˜</li><li>ç£ç›˜æ ¼å¼ä¸ºNTFS</li><li>ä½¿ç”¨4å¹´æœ‰ä½™</li><li>ä¹‹å‰å‡ºç°è¿‡æ•°æ®ä¸¢å¤±çš„çŠ¶å†µï¼Œè½¬ç§»æ•æ„Ÿæ•°æ®ä¹‹åï¼Œåœ¨è¯¥ç›˜ä¸­åªç•™æœ‰éæ•æ„Ÿçš„å­¦ä¹ èµ„æ–™ï¼Œçº¦280G</li></ul><p>æŸ¥é˜…èµ„æ–™å¯çŸ¥ï¼Œæˆ‘è¿™ç§é”™è¯¯å¤§æ¦‚ç‡æ˜¯ç”±äºæŸæ¬¡æœªæ–­ç”µæ’æ‹”ç¡¬ç›˜å¯¼è‡´çš„æ–‡ä»¶ç›®å½•é”™è¯¯ã€‚å¥½æ¶ˆæ¯æ˜¯ï¼Œè¿™ç§é”™è¯¯å¯ä»¥é€šè¿‡ä¸€å¥ç®€å•çš„æŒ‡ä»¤è§£å†³ã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆï¼š"><a href="#è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆï¼š"></a>è§£å†³æ–¹æ¡ˆï¼š</h2><ol><li>æ‰“å¼€cmd</li><li>è¾“å…¥ chkdsk D: /f è¯·æ³¨æ„ï¼Œæˆ‘çš„ç§»åŠ¨ç¡¬ç›˜ç›˜ç¬¦ä¸ºD:</li></ol><p>å‚è€ƒï¼š<a href="https://cloud.tencent.com/developer/article/1487000">https://cloud.tencent.com/developer/article/1487000</a></p><p>chkdsk å‚æ•°è¯´æ˜ï¼š</p><p>volume æŒ‡å®šé©±åŠ¨å™¨(åé¢è·Ÿä¸€ä¸ªå†’å·)ã€è£…å…¥ç‚¹æˆ–å·åã€‚<br>filename ä»…ç”¨äº FAT/FAT32: æŒ‡å®šè¦æ£€æŸ¥æ˜¯å¦æœ‰ç¢ç‰‡çš„æ–‡ä»¶<br>/F ä¿®å¤ç£ç›˜ä¸Šçš„é”™è¯¯ã€‚<br>/Vã€€ åœ¨ FAT/FAT32 ä¸Š: æ˜¾ç¤ºç£ç›˜ä¸Šæ¯ä¸ªæ–‡ä»¶çš„å®Œæ•´è·¯å¾„å’Œåç§°ã€‚åœ¨ NTFS ä¸Š: å¦‚æœæœ‰æ¸…é™¤æ¶ˆæ¯ï¼Œå°†å…¶æ˜¾ç¤ºã€‚<br>/R æŸ¥æ‰¾ä¸æ­£ç¡®çš„æ‰‡åŒºå¹¶æ¢å¤å¯è¯»ä¿¡æ¯(éšå« /F)ã€‚<br>/L:size ä»…ç”¨äº NTFS:? å°†æ—¥å¿—æ–‡ä»¶å¤§å°æ”¹æˆæŒ‡å®šçš„ KB æ•°ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šå¤§å°ï¼Œåˆ™æ˜¾ç¤ºå½“å‰çš„å¤§å°ã€‚<br>/X å¦‚æœå¿…è¦ï¼Œå¼ºåˆ¶å·å…ˆå¸ä¸‹ã€‚å·çš„æ‰€æœ‰æ‰“å¼€çš„å¥æŸ„å°±ä¼šæ— æ•ˆ(éšå« /F)<br>/I ä»…ç”¨äº NTFS: å¯¹ç´¢å¼•é¡¹è¿›è¡Œå¼ºåº¦è¾ƒå°çš„æ£€æŸ¥<br>/C ä»…ç”¨äº NTFS: è·³è¿‡æ–‡ä»¶å¤¹ç»“æ„çš„å¾ªç¯æ£€æŸ¥ã€‚<br>/I å’Œ /C å‘½ä»¤è¡Œå¼€å…³è·³è¿‡å·çš„æŸäº›æ£€æŸ¥ï¼Œå‡å°‘è¿è¡Œ Chkdsk æ‰€éœ€çš„æ—¶é—´</p><h2 id="åŸå› åˆ†æ"><a href="#åŸå› åˆ†æ" class="headerlink" title="åŸå› åˆ†æ"></a>åŸå› åˆ†æ</h2><p>è¿™ç§é”™è¯¯ä¸€èˆ¬äº§ç”Ÿäºå¤–ç½®ç§»åŠ¨ç¡¬ç›˜ä¸Šé¢ï¼Œæˆ–è€…å¤–ç½®Uç›˜ç­‰ç­‰ã€‚ä¹‹æ‰€ä»¥äº§ç”Ÿè¿™äº›é—®é¢˜ï¼Œä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š</p><ol><li>æ²¡æœ‰ç‚¹å‡»â€œå®‰å…¨åˆ é™¤ç¡¬ä»¶â€ç›´æ¥æ‹”USBæ¥å£å¯¼è‡´ç³»ç»Ÿæ²¡æœ‰å®Œæˆè¯»å†™æ“ä½œã€‚è¿™ä¼šä½¿å¾—æ–‡ä»¶ç›®å½•ä¸å®Œæ•´ï¼ŒæŸåæ–‡ä»¶ç›®å½•ç³»ç»Ÿã€‚</li><li>åŠ£è´¨äº§å“ï¼Œæˆ–è€…åŠ£è´¨ç¡¬ç›˜ç›’ã€‚ç¡¬ç›˜ç›’å†…éƒ¨çš„ç”µæºã€ç”µè·¯ä¾›ç”µä¸ç¨³å®šï¼Œä¹Ÿä¼šäº§ç”Ÿæ–‡ä»¶ç³»ç»Ÿé”™è¯¯çš„çŠ¶å†µã€‚</li><li>åœç”µäº†</li></ol><h2 id="æ¢å¤æ•ˆæœè´¨é‡"><a href="#æ¢å¤æ•ˆæœè´¨é‡" class="headerlink" title="æ¢å¤æ•ˆæœè´¨é‡"></a>æ¢å¤æ•ˆæœè´¨é‡</h2><p>å¦‚æœæ˜¯å¤§ç§»åŠ¨ç¡¬ç›˜å¹¶ä¸”æ˜¯NTFSåˆ†åŒºæ ¼å¼çš„ï¼Œæ¢å¤è´¨é‡ååˆ†ç†æƒ³ï¼ŒåŸºæœ¬éƒ½èƒ½æˆåŠŸæ¢å¤æ–‡ä»¶å’Œç›®å½•ç»“æ„ã€‚</p><p>å¦‚æœæ˜¯FATæˆ–FAT32æ ¼å¼ï¼Œæ ¹æ®æŸåç¨‹åº¦ä¸åŒï¼Œæ¢å¤è´¨é‡æ•ˆæœæ¯”NTFSæ ¼å¼ç»“æ„çš„åˆ†åŒºç¨å·®ä¸€äº›ï¼Œæ‰€ä»¥æ—¥å¸¸ä½¿ç”¨å»ºè®®ä½¿ç”¨NTFSæ ¼å¼åˆ†åŒºï¼Œå…¶æ•°æ®å®‰å…¨æ€§æ›´é«˜ä¸€äº›ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒCHKDSKå¯ä»¥æˆåŠŸä¿®å¤å‡ºé”™çš„åˆ†åŒºã€‚ä½†ä»æœ‰å¯èƒ½æ²¡æœ‰ååº”ã€‚æ­¤æ—¶å»ºè®®ä¸è¦æ‹”å‡ºè®¾å¤‡ï¼Œé‡å¯ç”µè„‘ï¼Œå†è§‚å¯Ÿæ˜¯å¦ä»ç„¶é”™è¯¯ã€‚ å¦‚æœæ•…éšœä¾ç„¶å­˜åœ¨ï¼Œå¯ä»¥å°è¯•ç”¨EasyRecoveryã€R-STUDIOç­‰è½¯ä»¶æ¢å¤åˆ†åŒºæ•°æ®ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hardware</tag>
      
      <tag>ç§»åŠ¨ç¡¬ç›˜</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>numpyä¸­deleteçš„ä½¿ç”¨æ–¹æ³•</title>
    <link href="/2020/05/31/np-delete%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    <url>/2020/05/31/np-delete%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡å°†ä»‹ç»np.deleteä¸­çš„å‚æ•°åŠä½¿ç”¨æ–¹æ³•<br><!--more---></p><h2 id="Pythonä¸­åˆ—è¡¨å…ƒç´ åˆ é™¤"><a href="#Pythonä¸­åˆ—è¡¨å…ƒç´ åˆ é™¤" class="headerlink" title="Pythonä¸­åˆ—è¡¨å…ƒç´ åˆ é™¤"></a>Pythonä¸­åˆ—è¡¨å…ƒç´ åˆ é™¤</h2><p>åœ¨åˆ—è¡¨ä¸­åˆ é™¤å…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š</p><pre><code class="lang-python">list_a = [1,2,3,4,5]list_a.pop(-1)print(list_a) # [1,2,3,4]del list_a[0]print(list_a) # [2,3,4]del list[1:]print(list_a) # [2]</code></pre><h2 id="åœ¨numpyçš„ndarrayä¸­åˆ é™¤å…ƒç´ "><a href="#åœ¨numpyçš„ndarrayä¸­åˆ é™¤å…ƒç´ " class="headerlink" title="åœ¨numpyçš„ndarrayä¸­åˆ é™¤å…ƒç´ "></a>åœ¨numpyçš„ndarrayä¸­åˆ é™¤å…ƒç´ </h2><p>numpyä¸­çš„æ•°ç»„ndarrayæ˜¯å®šé•¿æ•°ç»„ï¼Œå¯¹ndarrayçš„å¤„ç†ä¸åƒå¯¹pythonä¸­åˆ—è¡¨çš„å¤„ç†é‚£ä¹ˆæ–¹ä¾¿ã€‚æƒ³è¦åˆ é™¤ndarrayä¸­çš„å…ƒç´ ï¼Œæˆ‘ä»¬å¾€å¾€åªèƒ½é€€è€Œæ±‚å…¶æ¬¡ï¼Œè¿”å›ä¸€ä¸ªæ²¡æœ‰å¯¹åº”å…ƒç´ çš„å‰¯æœ¬ã€‚åœ¨numpyä¸­æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨deleteå‡½æ•°ã€‚æ­¤å¤–ï¼Œnumpyçš„deleteæ˜¯å¯ä»¥åˆ é™¤æ•°ç»„çš„æ•´è¡Œå’Œæ•´åˆ—çš„ã€‚</p><p>ç®€å•ä»‹ç»ä¸€ä¸‹<code>np.delete</code>ï¼š</p><pre><code class="lang-python">numpy.delete(arr, obj, axis=None)</code></pre><ul><li>arrï¼šè¾“å…¥æ•°ç»„</li><li>objï¼šåˆ‡ç‰‡ï¼Œæ•´æ•°ï¼Œè¡¨ç¤ºå“ªä¸ªå­æ•°ç»„è¦è¢«ç§»é™¤</li><li>axisï¼šåˆ é™¤å­æ•°ç»„çš„è½´</li><li>è¿”å›ï¼šä¸€ä¸ªæ–°çš„å­æ•°ç»„</li></ul><p>ä¸‹é¢æ˜¯ä½¿ç”¨ä¸¾ä¾‹ï¼š</p><pre><code class="lang-python">A = np.arange(15).reshape((3,5))print(A)[[ 0  1  2  3  4] [ 5  6  7  8  9] [10 11 12 13 14]]B = np.delete(A, 1) # å…ˆæŠŠAç»™ravelæˆä¸€ç»´æ•°ç»„ï¼Œå†åˆ é™¤ç¬¬1ä¸ªå…ƒç´ ã€‚C = np.delete(A, 1, axis=0) # axis=0ä»£è¡¨æŒ‰è¡Œæ“ä½œD = np.delete(A, 1, axis=1) # axis=1ä»£è¡¨æŒ‰åˆ—æ“ä½œprint(A) # å¹¶æ²¡æœ‰æ”¹å˜ï¼Œdeleteä¸ä¼šæ“ä½œåŸæ•°ç»„ã€‚[[ 0  1  2  3  4] [ 5  6  7  8  9] [10 11 12 13 14]]print(B) # å…ˆæŠŠAç»™ravelæˆä¸€ç»´æ•°ç»„ï¼Œå†åˆ é™¤ç¬¬1ä¸ªå…ƒç´ ã€‚[ 0  2  3  4  5  6  7  8  9 10 11 12 13 14]print(C) # axis=0ä»£è¡¨æŒ‰è¡Œæ“ä½œ[[ 0  1  2  3  4] [10 11 12 13 14]]print(D) # axis=1ä»£è¡¨æŒ‰åˆ—æ“ä½œ[[ 0  2  3  4] [ 5  7  8  9] [10 12 13 14]]</code></pre><p>ä¸äº†è§£axisçš„è¯»è€…å¯ä»¥çœ‹æˆ‘å†™çš„<a href="https://superlova.github.io/2020/05/19/numpy%E4%B8%ADaxis%E7%9A%84%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3/">è¿™ç¯‡æ–‡ç« </a>ã€‚</p><h2 id="åœ¨np-deleteçš„indexå‚æ•°ä¸­åº”ç”¨åˆ‡ç‰‡æ“ä½œ"><a href="#åœ¨np-deleteçš„indexå‚æ•°ä¸­åº”ç”¨åˆ‡ç‰‡æ“ä½œ" class="headerlink" title="åœ¨np.deleteçš„indexå‚æ•°ä¸­åº”ç”¨åˆ‡ç‰‡æ“ä½œ"></a>åœ¨np.deleteçš„indexå‚æ•°ä¸­åº”ç”¨åˆ‡ç‰‡æ“ä½œ</h2><p>indexå‚æ•°å¿…é¡»æ˜¯ä¸ªç”±æ•´æ•°å…ƒç´ ç»„æˆçš„åˆ—è¡¨ï¼Œå†…éƒ¨å­˜æ”¾ç€çš„æ•´æ•°ä»£è¡¨ç€ç›®æ ‡arrayçš„ä¸‹æ ‡ã€‚</p><p>å½“æˆ‘æƒ³å®ç°åˆ é™¤ä»ç¬¬5ä¸ªåˆ°ç¬¬100ä¸ªä¹‹é—´çš„æ‰€æœ‰å…ƒç´ æ—¶ï¼Œä¸èƒ½ä½¿ç”¨sliceï¼Œè¿™å°±æ¯”è¾ƒå°´å°¬äº†ã€‚</p><pre><code class="lang-python">In [5]: np.delete(x, [3:6])  File &quot;&lt;ipython-input-215-0a5bf5cc05ba&gt;&quot;, line 1    np.delete(x, [3:6])                   ^SyntaxError: invalid syntax</code></pre><p>æˆ‘ä»¬æ²¡åŠæ³•åœ¨å‡½æ•°å‚æ•°éƒ¨åˆ†è®©å…¶æ¥å—sliceã€‚æ€ä¹ˆè§£å†³å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æŠŠå‚æ•°ä»<code>[start:end]</code>æ¢æˆ<code>A[start:end]</code>å—ï¼Ÿ</p><pre><code class="lang-python">A = np.arange(10)*2print(A)[ 0  2  4  6  8 10 12 14 16 18]B = np.delete(A, A[1:4]) # æé”™äº†å§ï¼é¢„æœŸç»“æœï¼š0 8 10 12 14 16 18print(B)[ 0  2  6 10 14 16 18]</code></pre><p>æˆ‘ä»¬è¿™æ®µä»£ç èƒ½å¤Ÿæ‰§è¡Œï¼Œä½†æ˜¯ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚ä»€ä¹ˆåŸå› å‘¢ï¼Ÿæ˜¯å› ä¸ºnp.deleteçš„indexå‚æ•°æ¥å—çš„æ˜¯ä¸‹æ ‡æ•°ç»„ï¼Œè€ŒA[1:4]=[2,4,6]ï¼Œé‚£ä¹ˆnp.deleteå°±å¿ å®åœ°æ‰§è¡Œäº†åˆ é™¤ç¬¬2ã€4ã€6ä¸ªå…ƒç´ çš„ä»»åŠ¡ã€‚ä½†æˆ‘ä»¬çš„æœ¬æ„åªæ˜¯æƒ³åˆ é™¤ä¸‹æ ‡ä»1åˆ°4çš„å…ƒç´ è€Œå·²ã€‚</p><pre><code class="lang-python">D = np.delete(A, [1,2,3])print(D) # [ 0  8 10 12 14 16 18]</code></pre><p>è¦æƒ³ä½¿ç”¨sliceï¼Œå¯ä»¥é‡‡ç”¨ä¸‹åˆ—æ–¹å¼ï¼š1. <code>slice</code>å‡½æ•°æˆ–è€…<code>range</code>å‡½æ•°ï¼›2. <code>np.s_</code></p><pre><code class="lang-python">C = np.delete(A, slice(1,4))print(C) # [ 0  8 10 12 14 16 18]E = np.delete(A, np.s_[1:4])print(E) # [ 0  8 10 12 14 16 18]</code></pre><p>å…¶å®<code>np.s_[1:4]</code>åªä¸è¿‡æ˜¯å¾ˆæ–¹ä¾¿äº§ç”Ÿslice(1,4)çš„ä¸€ç§æ–¹å¼è€Œå·²ã€‚</p><h2 id="å…¶ä»–å®ç”¨çš„æ–¹æ³•"><a href="#å…¶ä»–å®ç”¨çš„æ–¹æ³•" class="headerlink" title="å…¶ä»–å®ç”¨çš„æ–¹æ³•"></a>å…¶ä»–å®ç”¨çš„æ–¹æ³•</h2><p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é‡‡ç”¨maskçš„æ–¹å¼é€‰æ‹©åŸæ•°ç»„ä¸­çš„å…ƒç´ ç»„æˆæ–°æ•°ç»„</p><pre><code class="lang-python">mask = np.ones((len(A),), dtype=bool)mask[[1,2,3]] = Falseprint(A[mask]) # [ 0  8 10 12 14 16 18]</code></pre><p>æˆ–è€…å¹²è„†é‡‡ç”¨æ•°ç»„æ‹¼åˆçš„æ–¹å¼</p><pre><code class="lang-python">G = np.empty(len(A)-len(A[1:4]), dtype=int)G[0:1] = A[0:1]G[1:len(G)] = A[4:]print(G) # [ 0  8 10 12 14 16 18]</code></pre><p>åä¸¤ç§æ–¹æ³•ä¸åƒæˆ‘ä»¬æƒ³è±¡çš„é‚£ä¹ˆæ²¡ç”¨ï¼Œåè€Œå¾ˆå¸¸è§ï¼Œå°¤å…¶æ˜¯maskæ–¹æ³•ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>numpy</tag>
      
      <tag>slice</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Datawhaleâ€”â€”SVHNâ€”â€”Task04ï¼šæ¨¡å‹è®­ç»ƒä¸éªŒè¯</title>
    <link href="/2020/05/30/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task04%EF%BC%9A%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E4%B8%8E%E9%AA%8C%E8%AF%81/"/>
    <url>/2020/05/30/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task04%EF%BC%9A%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E4%B8%8E%E9%AA%8C%E8%AF%81/</url>
    
    <content type="html"><![CDATA[<p>æ¨¡å‹çš„è®­ç»ƒå’ŒéªŒè¯è¿‡ç¨‹ï¼ŒåŸºæœ¬åˆ°äº†æœ€åå’¯ã€‚<br><!--more---></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>datawhale</tag>
      
      <tag>Python</tag>
      
      <tag>Validation</tag>
      
      <tag>Verification</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Datawhaleâ€”â€”SVHNâ€”â€”Task03ï¼šå­—ç¬¦è¯†åˆ«</title>
    <link href="/2020/05/27/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task03%EF%BC%9A%E5%AD%97%E7%AC%A6%E8%AF%86%E5%88%AB/"/>
    <url>/2020/05/27/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task03%EF%BC%9A%E5%AD%97%E7%AC%A6%E8%AF%86%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<p>ä»‹ç»å¸¸è§çš„å­—ç¬¦è¯†åˆ«æ¨¡å‹<br><!--more---></p><h2 id="ç”¨-tf-data-åŠ è½½å›¾ç‰‡"><a href="#ç”¨-tf-data-åŠ è½½å›¾ç‰‡" class="headerlink" title="ç”¨ tf.data åŠ è½½å›¾ç‰‡"></a>ç”¨ tf.data åŠ è½½å›¾ç‰‡</h2><h2 id="ç”¨CNNå»ºç«‹å­—ç¬¦è¯†åˆ«æ¨¡å‹"><a href="#ç”¨CNNå»ºç«‹å­—ç¬¦è¯†åˆ«æ¨¡å‹" class="headerlink" title="ç”¨CNNå»ºç«‹å­—ç¬¦è¯†åˆ«æ¨¡å‹"></a>ç”¨CNNå»ºç«‹å­—ç¬¦è¯†åˆ«æ¨¡å‹</h2>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>datawhale</tag>
      
      <tag>Python</tag>
      
      <tag>Digit Recognition</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Datawhaleâ€”â€”SVHNâ€”â€”Task02ï¼šæ•°æ®æ‰©å¢</title>
    <link href="/2020/05/23/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task02%EF%BC%9A%E6%95%B0%E6%8D%AE%E6%89%A9%E5%A2%9E/"/>
    <url>/2020/05/23/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task02%EF%BC%9A%E6%95%B0%E6%8D%AE%E6%89%A9%E5%A2%9E/</url>
    
    <content type="html"><![CDATA[<p>è®­ç»ƒæ¨¡å‹ç¬¬ä¸€æ­¥ã€æ•°æ®è¯»å–å’Œæ‰©å¢ï¼<br><!--more---></p><h2 id="æ•°æ®è¯»å–"><a href="#æ•°æ®è¯»å–" class="headerlink" title="æ•°æ®è¯»å–"></a>æ•°æ®è¯»å–</h2><p>å›¾åƒé¢†åŸŸçš„æ•°æ®è¯»å–æ–¹æ³•ï¼Œä½¿ç”¨Pillowæˆ–è€…OpenCVå†…ç½®çš„å‡½æ•°å³å¯ã€‚</p><h2 id="æ•°æ®æ‰©å¢"><a href="#æ•°æ®æ‰©å¢" class="headerlink" title="æ•°æ®æ‰©å¢"></a>æ•°æ®æ‰©å¢</h2><p>åœ¨è¯»å–å›¾åƒæ—¶ï¼Œè¿˜å¯ä»¥å¯¹åŸå§‹å›¾åƒæ·»åŠ æ‰°åŠ¨ç­‰ï¼Œè¿™å°±å¯å‘æˆ‘ä»¬ä¸€ä»¶äº‹ï¼šæ˜¯ä¸æ˜¯å¯¹åŸæ•°æ®å¢åŠ ä¸€äº›æ‰°åŠ¨ï¼Œå°±å¯ä»¥ä½¿å…¶å˜æˆæ–°çš„æ•°æ®å‘¢ï¼Ÿ</p><p>ä¸‹é¢ä»‹ç»åˆ©ç”¨è¯¥æ€æƒ³çš„æ•°æ®æ‰©å¢ç¯èŠ‚ã€‚</p><h3 id="1-æ•°æ®æ‰©å¢ä¸ºä»€ä¹ˆä¼šæœ‰ç”¨"><a href="#1-æ•°æ®æ‰©å¢ä¸ºä»€ä¹ˆä¼šæœ‰ç”¨" class="headerlink" title="1. æ•°æ®æ‰©å¢ä¸ºä»€ä¹ˆä¼šæœ‰ç”¨"></a>1. æ•°æ®æ‰©å¢ä¸ºä»€ä¹ˆä¼šæœ‰ç”¨</h3><p>æ•°æ®æ‰©å¢çš„æœ€å¸¸è§ä½œç”¨ï¼Œæ˜¯å¢åŠ æ•°æ®é›†ï¼Œç”¨ä»¥ç¼“è§£æ ·æœ¬é‡ä¸è¶³å¯¼è‡´çš„æ¨¡å‹è¿‡æ‹Ÿåˆç°è±¡ï¼Œä»è€Œæå‡æ¨¡å‹çš„æ³›åŒ–æ€§èƒ½ã€‚</p><p>ç©¶å…¶æœ¬è´¨ï¼Œè¿˜æ˜¯æ‰©å±•æ•°æ®é›†çš„å¤šæ ·æ€§ã€‚</p><p>è¯•æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¦‚æœæƒ³è¦è¯•å›¾è®­ç»ƒä¸€ä¸ªå®Œç¾æ¨¡å‹ï¼Œå¿…ç„¶è¦åˆ©ç”¨å®Œç¾çš„æ¶æ„+å®Œç¾çš„è®­ç»ƒé›†ï¼Œè¿™ä¸ªå®Œç¾çš„è®­ç»ƒé›†å¿…ç„¶è¦è¦†ç›–åˆ°æ ·æœ¬ç©ºé—´çš„æ–¹æ–¹é¢é¢ã€‚</p><p>æˆ‘ä»¬å½“ç„¶ä¸å¯èƒ½çœŸçš„æåˆ°æ— é™å¤šçš„æ ·æœ¬ã€‚æ‰€ä»¥ä¸ºäº†å°½å¯èƒ½è¶‹è¿‘äºè¿™ä¸ªç›®æ ‡ï¼Œå°±è¦è¯•å›¾ä»¥æœ‰é™çš„æ•°æ®é›†è¦†ç›–æ— é™çš„æ ·æœ¬ç©ºé—´ã€‚</p><p>æ¯ä¸ªæ ·æœ¬åœ¨æ ·æœ¬ç©ºé—´ä¸­å°±æ˜¯ä¸€ä¸ªåæ ‡ç‚¹ã€‚é€šè¿‡æ·»åŠ æ‰°åŠ¨ï¼Œå°±èƒ½ç”Ÿæˆè®¸å¤šä¸ªåœ¨è¯¥æ ·æœ¬ç‚¹é™„è¿‘çš„å¢å¼ºæ ·æœ¬ã€‚</p><p>ä¸Šä¸€ä¸ªåˆ©ç”¨æ ·æœ¬ç©ºé—´ä¸­æ·»åŠ æ‰°åŠ¨ã€ä»è€Œç”Ÿæˆä¸åŸæ ·æœ¬å¾ˆç›¸ä¼¼çš„åº”ç”¨ï¼Œå«åš<strong>ç”Ÿæˆå¯¹æŠ—æ ·æœ¬</strong>ã€‚</p><p>æ•°æ®å¢å¼ºå’Œå¯¹æŠ—æ ·æœ¬ç”Ÿæˆä¹‹é—´çš„åŒºåˆ«åœ¨äºï¼Œæ•°æ®å¢å¼ºè¦ä¿è¯æ‰°åŠ¨ä¹‹åæ ·æœ¬ä¸èƒ½å’ŒåŸæ ·æœ¬æœ‰åŒºåˆ«ï¼›ç„¶è€Œå¯¹æŠ—æ ·æœ¬ç”Ÿæˆåˆ™ä¿è¯<strong>å¿…é¡»</strong>ä¸åŸæ ·æœ¬æœ‰åŒºåˆ«ã€‚</p><p>æœ‰ä¸€äº›å­¦è€…ä¹Ÿé€šè¿‡å°†å¯¹æŠ—æ ·æœ¬æ·»åŠ è‡³æ¨¡å‹é‡è®­ç»ƒçš„æ–¹æ³•ï¼Œä½¿æ¨¡å‹çš„æ³›åŒ–æ€§èƒ½å¾—åˆ°äº†æé«˜ã€‚è¿™è¯´æ˜æ•°æ®å¢å¼ºå’Œå¯¹æŠ—æ ·æœ¬çš„ç”Ÿæ•ˆåŸç†æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯é€šè¿‡æ‰©å¤§æ ·æœ¬è¦†ç›–çš„æ ·æœ¬ç©ºé—´çš„ç¨‹åº¦ï¼Œé€šä¿—æ¥è®²å°±æ˜¯æ¨¡å‹è§å¤šè¯†å¹¿äº†ï¼Œå†ç¢°åˆ°æ–°çš„é—®é¢˜ä¹Ÿä¸æ€•äº†ã€‚</p><p>å¯ä»¥å‚è€ƒè¿™ç¯‡è®ºæ–‡ï¼š<a href="https://arxiv.org/abs/2003.08773">Do CNNs Encode Data Augmentations?</a></p><h3 id="2-å¸¸è§çš„æ•°æ®æ‰©å¢"><a href="#2-å¸¸è§çš„æ•°æ®æ‰©å¢" class="headerlink" title="2. å¸¸è§çš„æ•°æ®æ‰©å¢"></a>2. å¸¸è§çš„æ•°æ®æ‰©å¢</h3><h4 id="2-1-å›¾åƒæ•°æ®æ‰©å¢"><a href="#2-1-å›¾åƒæ•°æ®æ‰©å¢" class="headerlink" title="2.1 å›¾åƒæ•°æ®æ‰©å¢"></a>2.1 å›¾åƒæ•°æ®æ‰©å¢</h4><ul><li><p>è‰²å½©æŠ–åŠ¨ï¼ˆColor Jitteringï¼‰<br>è°ƒæ•´å›¾ç‰‡çš„äº®åº¦ã€é¥±å’Œåº¦ã€å¯¹æ¯”åº¦ï¼Œé’ˆå¯¹å›¾åƒçš„é¢œè‰²è¿›è¡Œçš„æ•°æ®å¢å¼ºã€‚<br>å¯¹æ¯”åº¦å—é™è‡ªé€‚åº”ç›´æ–¹å›¾å‡è¡¡åŒ–ç®—æ³•ï¼ˆClaheï¼‰ï¼Œé”åŒ–ï¼ˆSharpenï¼‰ï¼Œå‡¸ç‚¹ï¼ˆEmbossï¼‰</p></li><li><p>ä¸»æˆåˆ†å™ªå£°ï¼ˆPCA  Jitteringï¼‰<br>é¦–å…ˆæŒ‰ç…§RGBä¸‰ä¸ªé¢œè‰²é€šé“è®¡ç®—å‡å€¼å’Œæ ‡å‡†å·®ï¼Œå¯¹ç½‘ç»œçš„è¾“å…¥æ•°æ®è¿›è¡Œè§„èŒƒåŒ–ï¼›å†åœ¨æ•´ä¸ªè®­ç»ƒé›†ä¸Šè®¡ç®—åæ–¹å·®çŸ©é˜µï¼Œè¿›è¡Œç‰¹å¾åˆ†è§£ï¼Œå¾—åˆ°ç‰¹å¾å‘é‡å’Œç‰¹å¾å€¼ï¼Œæœ€ååšPCA Jitteringï¼›æœ€åå¯¹RGBç©ºé—´åšPCAï¼Œç„¶åå¯¹ä¸»æˆåˆ†åšä¸€ä¸ª(0, 0.1)çš„é«˜æ–¯æ‰°åŠ¨ã€‚</p></li><li><p>å¼¹æ€§å˜æ¢ï¼ˆElastic Transformï¼‰</p></li></ul><p>ç®—æ³•ä¸€å¼€å§‹æ˜¯ç”±Patriceç­‰äººåœ¨2003å¹´çš„ICDARä¸Šå‘è¡¨çš„ã€ŠBest Practices for Convolutional Neural Networks Applied to Visual Document Analysisã€‹æå‡ºçš„ï¼Œæœ€å¼€å§‹åº”ç”¨åœ¨mnistæ‰‹å†™ä½“æ•°å­—è¯†åˆ«æ•°æ®é›†ä¸­ã€‚å½“å‰ä¹Ÿæœ‰å¾ˆå¤šäººæŠŠè¯¥æ–¹æ³•åº”ç”¨åˆ°æ‰‹å†™ä½“æ±‰å­—çš„è¯†åˆ«é—®é¢˜ä¸­ã€‚</p><p>é¦–å…ˆå¯¹äºå›¾åƒä¸­çš„æ¯ä¸ªåƒç´ ç‚¹ï¼Œäº§ç”Ÿå¯¹åº”çš„éšæœºæ•°å¯¹$(\Delta x, \Delta y)$ï¼Œå¤§å°ä»‹äº-1~1ä¹‹é—´ï¼Œåˆ†åˆ«è¡¨ç¤ºè¯¥åƒç´ ç‚¹çš„xæ–¹å‘å’Œyæ–¹å‘çš„ç§»åŠ¨è·ç¦»ï¼›<br>ç„¶åç”Ÿæˆä¸€ä¸ªä»¥0ä¸ºå‡å€¼ï¼Œä»¥Ïƒä¸ºæ ‡å‡†å·®çš„é«˜æ–¯æ ¸$k_{nn}$ï¼Œå¹¶ç”¨å‰é¢çš„éšæœºæ•°ä¸ä¹‹åšå·ç§¯ï¼Œå¹¶å°†ç»“æœä½œç”¨äºåŸå›¾åƒã€‚</p><p><img src="https://www.kaggleusercontent.com/kf/1181488/eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..JOqe3f7Joxv4qWUFbLMQew.CgYzaNwIIFF7jVY1bX0NSs1-ti8NMrPcp61few_93xUuYBRF6ug3wh2awESp_gDWx1BvlZAI45TF3uJ5vNqVLNPS4sIjHMM1oX721fmldeIQAnh84dOKzvTaIK-J0HFhapl_dyBAcV7yOQY_GQYR2MJi3SrPLxvekt-t1hEL0pSdWIl3wbeghVLpgUBg1VmFUFvkti7XL0GltuXOPuQMylsbdbz4GpKX-4gIWyVr301jLLOH-woNbaJuPN0DI4346ok8sJIoG2k7ZdBLq9xRunhHHe4UvmWx2Dj0OK9g8vjKZGA2pRQcxd6_-vWj1KLYyFEWzBWK67rMSFLsQ3zi287T1NK8VJ9C0fLm6FdrQSA4v3BrgbHMwWijkcvG0MdMIdRdZxWbhmxYQ_eKLGntll-2k_1UMFID03h4qjFU-1p2HWv8VktUcpHhvUtu-N26j0vOuWXI484Ttwm2kBkiPZxD0jAfIUVIpSP6pVOTd-E6drxGbr_bqcycOJP2BSzOb5fMqCuP7f_c0B3fnVgVU7-SCb5ngcW6M4ayyy9SNfpobLc2pYj47aTlMmz0iXRrofaEcXiVzhlKz_r8EUUXAkPw5F_X5heFp2S_0hJpKpQJPsssty6FG_PwzN7b5BoSa2mxcNpqiX4ADy-J1dwXzgQesePXPj3rVyQAjxcQmQfXNKVKCo6ASCMBkJsnSQb3.npeRt-2aWHuMiEMkWLKuxA/__results___files/__results___5_1.png" alt></p><p>å‚è€ƒï¼š<br><a href="https://www.kaggle.com/jiqiujia/elastic-transform-for-data-augmentation">https://www.kaggle.com/jiqiujia/elastic-transform-for-data-augmentation</a><br><a href="https://blog.csdn.net/lhanchao/article/details/54234490">https://blog.csdn.net/lhanchao/article/details/54234490</a></p><p>è¿˜æœ‰è¯¸å¦‚é€è§†å˜æ¢ï¼ˆPerspective Transformï¼‰ã€åˆ†æ®µä»¿å°„å˜æ¢ï¼ˆPiecewise Affine transformsï¼‰ã€æ•å½¢ç•¸å˜ï¼ˆPincushion Distortionï¼‰ç­‰ä¸åŒçš„å›¾åƒå˜æ¢æ“ä½œã€‚</p><p>æ ¹æ®Datawhaleå¤§ä½¬åˆ†äº«ï¼Œå¯¹äºæœ¬æ¬¡é¢˜ç›®ï¼ˆSVHNè¡—é“å½©è‰²æ•°å­—è¯†åˆ«ï¼‰ï¼Œæœ€å¸¸è§çš„ã€æœ€æœ‰æ•ˆçš„æ•°æ®æ‰©å¢æ–¹æ³•æ˜¯ï¼š</p><ul><li>éšæœºæ”¹å˜å¤§å°ï¼ˆresizeï¼‰</li><li>éšæœºåˆ‡å‰²ï¼ˆrandomcropï¼‰ï¼Œå³ä»åŸå§‹å›¾åƒä¸­ï¼Œéšæœºçš„cropå‡ºä¸€äº›å›¾åƒã€‚</li></ul><p>é‰´äºæœ¬æ¬¡æ•°æ®é›†ä¸­çš„å›¾ç‰‡å¤§å°ä¸ä¸€ï¼Œä¸€èˆ¬ä¸€å¼€å§‹æˆ‘ä»¬éƒ½éœ€è¦resizeåˆ°æŒ‡å®šå¤§å°ã€‚ä½†ä¹Ÿæœ‰çš„æ–‡ç« ä¸­æåˆ°äº†ï¼Œå…ˆå¯¹å›¾ç‰‡resizeä¼šä½¿å¾—å›¾ç‰‡é•¿å®½æ¯”å‘ç”Ÿå˜åŒ–ï¼Œé€ æˆå¤±çœŸã€‚æ‰€ä»¥æˆ‘ä»¬è¦å…·ä½“é—®é¢˜å…·ä½“åˆ†æã€‚</p><p>æˆ‘åœ¨åšå®¢ä¸­ä¹Ÿæœ‰åˆ†äº«è¿‡ä¸€ç¯‡è®²è¿°å›¾åƒæ•°æ®å¢å¼ºçš„<a href>ç›¸å…³è®ºæ–‡</a>ï¼Œå¤§å®¶å¯ä»¥çœ‹ä¸€ä¸‹ã€‚</p><h4 id="2-2-æ–‡æœ¬æ•°æ®å¢å¼º"><a href="#2-2-æ–‡æœ¬æ•°æ®å¢å¼º" class="headerlink" title="2.2 æ–‡æœ¬æ•°æ®å¢å¼º"></a>2.2 æ–‡æœ¬æ•°æ®å¢å¼º</h4><p>æ­¤éƒ¨åˆ†å‚è€ƒæˆ‘çš„<a href>æ–‡æœ¬æ•°æ®å¢å¼º</a>ï¼Œè€Œä¸”ç”±äºæœ¬æ¬¡èµ›é¢˜å¹¶ä¸å¿…è¿›è¡Œæ–‡æœ¬æ•°æ®å¢å¼ºï¼Œå› æ­¤å°±ä¸åœ¨è¿™é‡Œèµ˜è¿°äº†ã€‚</p><h3 id="3-æ•°æ®æ‰©å¢å®æˆ˜â€”â€”ä½¿ç”¨tensorflow"><a href="#3-æ•°æ®æ‰©å¢å®æˆ˜â€”â€”ä½¿ç”¨tensorflow" class="headerlink" title="3.. æ•°æ®æ‰©å¢å®æˆ˜â€”â€”ä½¿ç”¨tensorflow"></a>3.. æ•°æ®æ‰©å¢å®æˆ˜â€”â€”ä½¿ç”¨tensorflow</h3><p>å¤§å®¶éƒ½ç”¨çš„Pytorchå—ï¼Ÿä¸ä¼šåªæœ‰æˆ‘è‡ªå·±ç”¨tensorflowå§ã€‚æˆ‘æ¥ç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹tensorflowæ˜¯æ€ä¹ˆåšæ•°æ®æ‰©å¢çš„ã€‚</p><p>å‚è€ƒï¼š<a href="https://www.tensorflow.org/tutorials/images/data_augmentation">TensorFlow Core</a></p><h4 id="1-å‡†å¤‡"><a href="#1-å‡†å¤‡" class="headerlink" title="1. å‡†å¤‡"></a>1. å‡†å¤‡</h4><pre><code class="lang-python"># é¦–å…ˆå®‰è£…ä¸€ä¸ªtensorflow_docsçš„åº“!pip install git+https://github.com/tensorflow/docsimport urllib # è´Ÿè´£ä¸‹è½½ç½‘ä¸Šçš„å›¾ç‰‡import tensorflow as tffrom tensorflow.keras.datasets import mnistfrom tensorflow.keras import layersAUTOTUNE = tf.data.experimental.AUTOTUNEimport tensorflow_docs as tfdocsimport tensorflow_docs.plotsimport tensorflow_datasets as tfdsimport PIL.Image # å¤§åé¼é¼PILimport matplotlib.pyplot as pltimport matplotlib as mplmpl.rcParams[&#39;figure.figsize&#39;] = (12, 5)import numpy as np</code></pre><p>ä¸‹è½½ä¸€å¼ ç¤ºä¾‹å›¾ç‰‡ï¼š</p><pre><code class="lang-python">image_path = tf.keras.utils.get_file(&quot;cat.jpg&quot;, &quot;https://storage.googleapis.com/download.tensorflow.org/example_images/320px-Felis_catus-cat_on_snow.jpg&quot;)PIL.Image.open(image_path)</code></pre><p><img src="/2020/05/23/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task02%EF%BC%9A%E6%95%B0%E6%8D%AE%E6%89%A9%E5%A2%9E/2020-05-23-22-29-50.png" alt></p><p>å°†è¯¥å›¾ç‰‡è§£ææˆtensor</p><pre><code class="lang-python">image_string=tf.io.read_file(image_path)image=tf.image.decode_jpeg(image_string,channels=3)</code></pre><p>å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå¯è§†åŒ–å›¾åƒã€‚</p><pre><code class="lang-python">def visualize(original, augmented):  fig = plt.figure()  plt.subplot(1,2,1)  plt.title(&#39;Original image&#39;)  plt.imshow(original)  plt.subplot(1,2,2)  plt.title(&#39;Augmented image&#39;)  plt.imshow(augmented)</code></pre><h4 id="2-æ‰§è¡Œæ•°æ®æ‰©å¢"><a href="#2-æ‰§è¡Œæ•°æ®æ‰©å¢" class="headerlink" title="2. æ‰§è¡Œæ•°æ®æ‰©å¢"></a>2. æ‰§è¡Œæ•°æ®æ‰©å¢</h4><p><strong>ç¿»è½¬å›¾åƒ</strong></p><pre><code class="lang-python">flipped = tf.image.flip_left_right(image)visualize(image, flipped)</code></pre><p><img src="/2020/05/23/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task02%EF%BC%9A%E6%95%B0%E6%8D%AE%E6%89%A9%E5%A2%9E/2020-05-23-22-32-30.png" alt></p><p><strong>ç°åº¦å¤„ç†</strong></p><pre><code class="lang-python">grayscaled = tf.image.rgb_to_grayscale(image)visualize(image, tf.squeeze(grayscaled))plt.colorbar()</code></pre><p><img src="/2020/05/23/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task02%EF%BC%9A%E6%95%B0%E6%8D%AE%E6%89%A9%E5%A2%9E/2020-05-23-22-33-51.png" alt></p><p><strong>æ”¹å˜å›¾åƒé¥±å’Œåº¦</strong></p><pre><code class="lang-python">saturated = tf.image.adjust_saturation(image, 3)visualize(image, saturated)</code></pre><p><img src="/2020/05/23/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task02%EF%BC%9A%E6%95%B0%E6%8D%AE%E6%89%A9%E5%A2%9E/2020-05-23-22-35-05.png" alt></p><p><strong>æ”¹å˜å›¾åƒäº®åº¦</strong></p><pre><code class="lang-python">bright = tf.image.adjust_brightness(image, 0.4)visualize(image, bright)</code></pre><p><img src="/2020/05/23/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task02%EF%BC%9A%E6%95%B0%E6%8D%AE%E6%89%A9%E5%A2%9E/2020-05-23-22-35-39.png" alt></p><p><strong>æ—‹è½¬å›¾åƒ</strong></p><pre><code class="lang-python">rotated = tf.image.rot90(image)visualize(image, rotated)</code></pre><p><img src="/2020/05/23/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task02%EF%BC%9A%E6%95%B0%E6%8D%AE%E6%89%A9%E5%A2%9E/2020-05-23-22-36-11.png" alt></p><p><strong>ä¸­å¿ƒæ”¾å¤§å¹¶è£å‰ªå›¾åƒ</strong></p><pre><code class="lang-python">cropped = tf.image.central_crop(image, central_fraction=0.5)visualize(image,cropped)</code></pre><p><img src="/2020/05/23/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task02%EF%BC%9A%E6%95%B0%E6%8D%AE%E6%89%A9%E5%A2%9E/2020-05-23-22-36-51.png" alt></p><p>ç­‰ç­‰æ­¤ç±»æ“ä½œï¼Œä¸ä¸€è€Œè¶³ã€‚å¤§å®¶æ„Ÿå…´è¶£çš„å¯ä»¥æŸ¥é˜…tensorflowçš„<code>tf.image</code>æ–‡æ¡£ã€‚</p><h4 id="3-ä½¿ç”¨æ‰©å¢æ•°æ®é›†è®­ç»ƒ"><a href="#3-ä½¿ç”¨æ‰©å¢æ•°æ®é›†è®­ç»ƒ" class="headerlink" title="3. ä½¿ç”¨æ‰©å¢æ•°æ®é›†è®­ç»ƒ"></a>3. ä½¿ç”¨æ‰©å¢æ•°æ®é›†è®­ç»ƒ</h4><p>æˆ‘ä»¬æ„é€ ä¸€ä¸ªæ¨¡å‹ï¼Œè¯¥æ¨¡å‹æ¶æ„ä¸ºçº¯å…¨è¿æ¥ç½‘ç»œï¼Œæ•°æ®é›†ä¸ºMNISTæ‰‹å†™æ•°å­—è¯†åˆ«æ•°æ®é›†ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨tensorflow_datasetsè¿™ä¸ªåº“ä¸­ä½¿ç”¨è¿™ä¸ªæ•°æ®é›†ã€‚</p><pre><code class="lang-python">dataset, info =  tfds.load(&#39;mnist&#39;, as_supervised=True, with_info=True)train_dataset, test_dataset = dataset[&#39;train&#39;], dataset[&#39;test&#39;]num_train_examples= info.splits[&#39;train&#39;].num_examples</code></pre><p>ç¼–å†™å‡½æ•°æ‰§è¡Œå¯¹åŸæ¥æ•°æ®é›†çš„æ‰©å¢æ“ä½œã€‚</p><pre><code class="lang-python">def convert(image, label):  image = tf.image.convert_image_dtype(image, tf.float32) # Cast and normalize the image to [0,1]  return image, labeldef augment(image,label):  image,label = convert(image, label)  image = tf.image.convert_image_dtype(image, tf.float32) # Cast and normalize the image to [0,1]  image = tf.image.resize_with_crop_or_pad(image, 34, 34) # Add 6 pixels of padding  image = tf.image.random_crop(image, size=[28, 28, 1]) # Random crop back to 28x28  image = tf.image.random_brightness(image, max_delta=0.5) # Random brightness  return image,label</code></pre><pre><code class="lang-python">BATCH_SIZE = 64# Only use a subset of the data so it&#39;s easier to overfit, for this tutorialNUM_EXAMPLES = 2048</code></pre><p>åˆ›å»ºæ‰©å¢åçš„æ•°æ®é›†</p><pre><code class="lang-python">augmented_train_batches = (    train_dataset    # Only train on a subset, so you can quickly see the effect.    .take(NUM_EXAMPLES)    .cache()    .shuffle(num_train_examples//4)    # The augmentation is added here.    .map(augment, num_parallel_calls=AUTOTUNE)    .batch(BATCH_SIZE)    .prefetch(AUTOTUNE))</code></pre><p>ä¸ºäº†å¯¹ç…§ï¼Œæˆ‘ä»¬åˆ›å»ºæ²¡æœ‰æ‰©å¢çš„æ•°æ®é›†ã€‚</p><pre><code class="lang-python">non_augmented_train_batches = (    train_dataset    # Only train on a subset, so you can quickly see the effect.    .take(NUM_EXAMPLES)    .cache()    .shuffle(num_train_examples//4)    # No augmentation.    .map(convert, num_parallel_calls=AUTOTUNE)    .batch(BATCH_SIZE)    .prefetch(AUTOTUNE))</code></pre><p>è®¾ç½®éªŒè¯é›†ã€‚éªŒè¯é›†ä¸æ•°æ®å¢ä¸å¢å¼ºæ— å…³ï¼Œåæ­£æˆ‘ä»¬ä¸ä½¿ç”¨éªŒè¯æœºè®­ç»ƒï¼Œåªç”¨äºæœ€åçš„æ‰“åˆ†ã€‚</p><pre><code class="lang-python">validation_batches = (    test_dataset    .map(convert, num_parallel_calls=AUTOTUNE)    .batch(2*BATCH_SIZE))</code></pre><p>å»ºç«‹æ¨¡å‹ã€‚æ³¨æ„è¿™ä¸ªæ¨¡å‹çº¯ç²¹æ˜¯ä¸ºäº†ä½“ç°æ•°æ®æ‰©å¢çš„æ•ˆæœè€Œä¸“é—¨æ„å»ºçš„ï¼Œå› ä¸ºå·ç§¯ç½‘ç»œCNNå³ä¾¿æ˜¯ä¸ç”¨æ•°æ®æ‰©å¢ä¹Ÿèƒ½å¾ˆå¥½åœ°è§£å†³MNISTæ‰‹å†™æ•°å­—è¯†åˆ«é—®é¢˜ï¼Œè¿™æ ·æ¯”è¾ƒèµ·æ¥æ•ˆæœå°±ä¸æ˜æ˜¾äº†ã€‚ä¸¤å±‚4096ä¸ªç¥ç»å…ƒçš„å…¨è¿æ¥ç½‘ç»œï¼Œæ¿€æ´»å‡½æ•°ä¸ºRELUã€‚æœ€åæ˜¯ä¸€ä¸ªsoftmaxå±‚åˆ†ç±»ã€‚</p><pre><code class="lang-python">def make_model():  model = tf.keras.Sequential([      layers.Flatten(input_shape=(28, 28, 1)),      layers.Dense(4096, activation=&#39;relu&#39;),      layers.Dense(4096, activation=&#39;relu&#39;),      layers.Dense(10)  ])  model.compile(optimizer = &#39;adam&#39;,                loss=tf.losses.SparseCategoricalCrossentropy(from_logits=True),                metrics=[&#39;accuracy&#39;])  return model</code></pre><p>å…ˆä½¿ç”¨<strong>æ²¡æœ‰ç»è¿‡æ•°æ®æ‰©å¢</strong>çš„æ•°æ®è®­ç»ƒæ¨¡å‹ï¼Œå¹¶è®°å½•å…¶ç²¾åº¦å˜åŒ–å’Œlosså˜åŒ–ï¼š</p><pre><code class="lang-python">model_without_aug = make_model()no_aug_history = model_without_aug.fit(non_augmented_train_batches, epochs=50, validation_data=validation_batches)</code></pre><p>å†ä½¿ç”¨<strong>ç»è¿‡æ‰©å¢çš„æ•°æ®</strong>è®­ç»ƒæ¨¡å‹ï¼Œå¹¶è®°å½•ã€‚</p><pre><code class="lang-python">model_with_aug = make_model()aug_history = model_with_aug.fit(augmented_train_batches, epochs=50, validation_data=validation_batches)</code></pre><p>æœ€åç»˜åˆ¶å›¾æ ‡ï¼Œçœ‹ä¸€ä¸‹è¡¨ç°ã€‚</p><p>é¦–å…ˆæ˜¯ç²¾åº¦éšç€è®­ç»ƒè½®æ¬¡çš„å˜åŒ–æ›²çº¿ï¼š</p><pre><code class="lang-python">plotter = tfdocs.plots.HistoryPlotter()plotter.plot(&#123;&quot;Augmented&quot;: aug_history, &quot;Non-Augmented&quot;: no_aug_history&#125;, metric = &quot;accuracy&quot;)plt.title(&quot;Accuracy&quot;)plt.ylim([0.75,1])</code></pre><p><img src="/2020/05/23/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task02%EF%BC%9A%E6%95%B0%E6%8D%AE%E6%89%A9%E5%A2%9E/2020-05-23-22-49-01.png" alt></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œæ©™è‰²çº¿ï¼ˆæ²¡æœ‰æ•°æ®å¢å¼ºçš„æ¨¡å‹ï¼‰åœ¨è®­ç»ƒçš„æ—¶å€™å¾ˆå®¹æ˜“è¿‡æ‹Ÿåˆï¼Œä½†æ˜¯åœ¨éªŒè¯é›†ä¸Šçš„ç²¾åº¦ä¸åŠè“è‰²çº¿ï¼ˆæ•°æ®å¢å¼ºçš„æ¨¡å‹ï¼‰ã€‚</p><p>å†æ¥çœ‹losså˜åŒ–ã€‚</p><pre><code class="lang-python">plotter = tfdocs.plots.HistoryPlotter()plotter.plot(&#123;&quot;Augmented&quot;: aug_history, &quot;Non-Augmented&quot;: no_aug_history&#125;, metric = &quot;loss&quot;)plt.title(&quot;Loss&quot;)plt.ylim([0,1])</code></pre><p><img src="/2020/05/23/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task02%EF%BC%9A%E6%95%B0%E6%8D%AE%E6%89%A9%E5%A2%9E/2020-05-23-22-51-30.png" alt></p><p>è¿™é‡Œçœ‹çš„å°±æ›´æ˜æ˜¾äº†ï¼Œæ©™è‰²çº¿åœ¨è®­ç»ƒæ—¶çš„losså¾ˆå¿«å°±ä¸‹é™åˆ°è¶‹è¿‘0ï¼Œè¿™è¯´æ˜æ¨¡å‹å·²ç»å¾ˆéš¾ä»æœªç»å¢å¼ºçš„æ•°æ®ä¸­å­¦åˆ°ä¸œè¥¿äº†ï¼Œäº§ç”Ÿäº†ä¸¥é‡çš„è¿‡æ‹Ÿåˆã€‚</p><p>è€Œè“è‰²çº¿ç›´åˆ°æœ€åä¹Ÿåœ¨é€æ­¥åœ°å­¦ä¹ ä¹‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼Œæ•°æ®å¢å¼ºçš„ç¡®æœ‰åŠ©äºé¿å…è¿‡æ‹Ÿåˆã€å¢å¼ºæ¨¡å‹çš„æ³›åŒ–æ€§èƒ½ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>datawhale</tag>
      
      <tag>Python</tag>
      
      <tag>Data Augmentation</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¦‚ä½•è¯„ä»·æ¨èç³»ç»Ÿä»¥åŠå…¶ä»–æ™ºèƒ½ç³»ç»Ÿ</title>
    <link href="/2020/05/20/%E5%A6%82%E4%BD%95%E8%AF%84%E4%BB%B7%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E6%99%BA%E8%83%BD%E7%B3%BB%E7%BB%9F/"/>
    <url>/2020/05/20/%E5%A6%82%E4%BD%95%E8%AF%84%E4%BB%B7%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E6%99%BA%E8%83%BD%E7%B3%BB%E7%BB%9F/</url>
    
    <content type="html"><![CDATA[<p>çœ‹åˆ°ä¸€ç¯‡ä»‹ç»æ¨èç³»ç»Ÿçš„è¯„ä»·æ–¹æ³•ä¸æŒ‡æ ‡çš„æ–‡ç« ï¼Œåˆšå¥½æœ¬è¯¾é¢˜ç»„ä¹Ÿæœ‰ä¸ªåŒå­¦åœ¨åšæ¨èç³»ç»Ÿç›¸å…³çš„è¯¾é¢˜ï¼Œå¹¶ä¸”è¯¥æ–‡ç« çš„è¯„ä»·æŒ‡æ ‡éƒ¨åˆ†å¯¹æˆ‘ç›®å‰çš„è¯¾é¢˜æœ‰å¯å‘ä½œç”¨ï¼Œå› æ­¤è½¬è½½ã€‚<br><!--more---></p><h1 id="å¦‚ä½•è¯„ä»·æ¨èç³»ç»Ÿä»¥åŠå…¶ä»–æ™ºèƒ½ç³»ç»Ÿ"><a href="#å¦‚ä½•è¯„ä»·æ¨èç³»ç»Ÿä»¥åŠå…¶ä»–æ™ºèƒ½ç³»ç»Ÿ" class="headerlink" title="å¦‚ä½•è¯„ä»·æ¨èç³»ç»Ÿä»¥åŠå…¶ä»–æ™ºèƒ½ç³»ç»Ÿ"></a>å¦‚ä½•è¯„ä»·æ¨èç³»ç»Ÿä»¥åŠå…¶ä»–æ™ºèƒ½ç³»ç»Ÿ</h1><h2 id="1-è¯„ä»·æ¨èç³»ç»Ÿ"><a href="#1-è¯„ä»·æ¨èç³»ç»Ÿ" class="headerlink" title="1. è¯„ä»·æ¨èç³»ç»Ÿ"></a>1. <a href="https://www.jianshu.com/p/9d7c228eee59">è¯„ä»·æ¨èç³»ç»Ÿ</a></h2><p>è¯„æµ‹ä¸€ä¸ªæ¨èç³»ç»Ÿæ—¶ï¼Œéœ€è¦è€ƒè™‘ç”¨æˆ·ã€ç‰©å“æä¾›å•†ã€æ¨èç³»ç»Ÿæä¾›ç½‘ç«™çš„åˆ©ç›Šï¼Œä¸€ä¸ªå¥½çš„æ¨èç³»ç»Ÿæ˜¯èƒ½å¤Ÿä»¤ä¸‰æ–¹å…±èµ¢çš„ç³»ç»Ÿã€‚æ¯”å¦‚å¼¹çª—å¹¿å‘Šå°±ä¸æ˜¯ä¸€ä¸ªå¥½çš„æ¨èç³»ç»Ÿã€‚</p><h3 id="1-1-è¯„æµ‹å®éªŒæ–¹æ³•"><a href="#1-1-è¯„æµ‹å®éªŒæ–¹æ³•" class="headerlink" title="1.1 è¯„æµ‹å®éªŒæ–¹æ³•"></a>1.1 è¯„æµ‹å®éªŒæ–¹æ³•</h3><h4 id="1-1-1-ç¦»çº¿å®éªŒï¼ˆoffline-experimentï¼‰"><a href="#1-1-1-ç¦»çº¿å®éªŒï¼ˆoffline-experimentï¼‰" class="headerlink" title="1.1.1 ç¦»çº¿å®éªŒï¼ˆoffline experimentï¼‰"></a>1.1.1 ç¦»çº¿å®éªŒï¼ˆoffline experimentï¼‰</h4><p>ç¦»çº¿å®éªŒçš„æ–¹æ³•çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>aï¼‰é€šè¿‡æ—¥å¿—ç³»ç»Ÿè·å¾—ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œå¹¶æŒ‰ç…§ä¸€å®šæ ¼å¼ç”Ÿæˆä¸€ä¸ªæ ‡å‡†çš„æ•°æ®é›†ï¼›<br>bï¼‰å°†æ•°æ®é›†æŒ‰ç…§ä¸€å®šçš„è§„åˆ™åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼›<br>cï¼‰åœ¨è®­ç»ƒé›†ä¸Šè®­ç»ƒç”¨æˆ·å…´è¶£æ¨¡å‹ï¼Œåœ¨æµ‹è¯•é›†ä¸Šè¿›è¡Œé¢„æµ‹ï¼›<br>dï¼‰é€šè¿‡äº‹å…ˆå®šä¹‰çš„ç¦»çº¿æŒ‡æ ‡ï¼Œè¯„æµ‹ç®—æ³•åœ¨æµ‹è¯•é›†ä¸Šçš„é¢„æµ‹ç»“æœã€‚</p><p>ä»ä»¥ä¸Šæ­¥éª¤çœ‹å‡ºï¼Œç¦»çº¿å®éªŒçš„éƒ½æ˜¯åœ¨æ•°æ®é›†ä¸Šå®Œæˆçš„ã€‚æ„å‘³ç€ï¼Œå®ƒä¸éœ€è¦ä¸€ä¸ªå®é™…çš„ç³»ç»Ÿä½œä¸ºæ”¯æ’‘ï¼Œåªéœ€è¦æœ‰ä¸€ä¸ªä»æ—¥å¿—ä¸­æå–çš„æ•°æ®é›†å³å¯ã€‚</p><p>ç¦»çº¿å®éªŒçš„ä¼˜ç‚¹æ˜¯ï¼š</p><ul><li>ä¸éœ€è¦æœ‰å¯¹å®é™…ç³»ç»Ÿçš„æ§åˆ¶æƒï¼›</li><li>ä¸éœ€è¦ç”¨æˆ·å‚ä¸å®è·µï¼›</li><li>é€Ÿåº¦å¿«ï¼Œå¯ä»¥æµ‹è¯•å¤§é‡ç®—æ³•ï¼›</li></ul><p>ç¼ºç‚¹æ˜¯ï¼š</p><ul><li>æ•°æ®é›†çš„ç¨€ç–æ€§é™åˆ¶äº†é€‚ç”¨èŒƒå›´ï¼Œä¾‹å¦‚ä¸€ä¸ªæ•°æ®é›†ä¸­æ²¡æœ‰åŒ…å«æŸç”¨æˆ·çš„å†å²è¡Œä¸ºï¼Œåˆ™æ— æ³•è¯„ä»·å¯¹è¯¥ç”¨æˆ·çš„æ¨èç»“æœï¼›</li><li>è¯„ä»·ç»“æœçš„å®¢è§‚æ€§ï¼Œæ— æ³•å¾—åˆ°ç”¨æˆ·ä¸»è§‚æ€§çš„è¯„ä»·ï¼›</li><li>éš¾ä»¥æ‰¾åˆ°ç¦»çº¿è¯„ä»·æŒ‡æ ‡å’Œåœ¨çº¿çœŸå®åé¦ˆ(å¦‚ ç‚¹å‡»ç‡ã€è½¬åŒ–ç‡ã€ç‚¹å‡»æ·±åº¦ã€è´­ä¹°å®¢å•ä»·ã€è´­ä¹°å•† å“ç±»åˆ«ç­‰)ä¹‹é—´çš„å…³è”å…³ç³»ï¼›</li></ul><h4 id="1-1-2-ç”¨æˆ·è°ƒæŸ¥ï¼ˆuser-studyï¼‰"><a href="#1-1-2-ç”¨æˆ·è°ƒæŸ¥ï¼ˆuser-studyï¼‰" class="headerlink" title="1.1.2 ç”¨æˆ·è°ƒæŸ¥ï¼ˆuser studyï¼‰"></a>1.1.2 ç”¨æˆ·è°ƒæŸ¥ï¼ˆuser studyï¼‰</h4><p>ç”¨æˆ·è°ƒæŸ¥éœ€è¦ä¸€äº›çœŸå®çš„ç”¨æˆ·ï¼Œè®©ä»–ä»¬åœ¨éœ€è¦æµ‹è¯•çš„æ¨èç³»ç»Ÿä¸Šå®Œæˆä¸€äº›ä»»åŠ¡ã€‚åœ¨ä»–ä»¬å®Œæˆä»»åŠ¡æ—¶ï¼Œéœ€è¦è§‚å¯Ÿå’Œè®°å½•ç”¨æˆ·çš„è¡Œä¸ºï¼Œå¹¶è®©ä»–ä»¬å›ç­”ä¸€äº›é—®é¢˜ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬é€šè¿‡åˆ†æä»–ä»¬çš„è¡Œä¸ºå’Œç­”æ¡ˆï¼Œäº†è§£æµ‹è¯•ç³»ç»Ÿçš„æ€§èƒ½ã€‚</p><p>ç”¨æˆ·è°ƒæŸ¥çš„ä¼˜ç‚¹æ˜¯ï¼š</p><ul><li>å¯ä»¥è·å¾—ç”¨æˆ·ä¸»è§‚æ„Ÿå—çš„æŒ‡æ ‡ï¼Œå‡ºé”™åå®¹æ˜“å¼¥è¡¥ï¼›</li></ul><p>ç¼ºç‚¹æ˜¯ï¼š</p><ul><li>æ‹›å‹Ÿæµ‹è¯•ç”¨æˆ·ä»£ä»·è¾ƒå¤§ï¼›</li><li>æ— æ³•ç»„ç»‡å¤§è§„æ¨¡çš„æµ‹è¯•ç”¨æˆ·ï¼Œç»Ÿè®¡æ„ä¹‰ä¸è¶³ï¼›</li></ul><h4 id="1-1-3-åœ¨çº¿å®éªŒï¼ˆonline-experimentï¼‰"><a href="#1-1-3-åœ¨çº¿å®éªŒï¼ˆonline-experimentï¼‰" class="headerlink" title="1.1.3 åœ¨çº¿å®éªŒï¼ˆonline experimentï¼‰"></a>1.1.3 åœ¨çº¿å®éªŒï¼ˆonline experimentï¼‰</h4><p>åœ¨å®Œæˆç¦»çº¿å®éªŒå’Œç”¨æˆ·è°ƒæŸ¥ä¹‹åï¼Œå¯ä»¥å°†ç³»ç»Ÿä¸Šçº¿åšABæµ‹è¯•ï¼Œå°†å®ƒå’Œæ—§ç®—æ³•è¿›è¡Œæ¯”è¾ƒã€‚</p><p>åœ¨çº¿å®éªŒæœ€å¸¸ç”¨çš„è¯„æµ‹ç®—æ³•æ˜¯ã€A/Bæµ‹è¯•ã€‘ï¼Œå®ƒé€šè¿‡ä¸€å®šçš„è§„åˆ™å°†ç”¨æˆ·éšæœºåˆ†æˆå‡ ç»„ï¼Œå¯¹ä¸åŒç»„çš„ç”¨æˆ·é‡‡ç”¨ä¸åŒçš„ç®—æ³•ï¼Œç„¶åé€šè¿‡ç»Ÿè®¡ä¸åŒç»„çš„è¯„æµ‹æŒ‡æ ‡ï¼Œæ¯”è¾ƒä¸åŒç®—æ³•çš„å¥½åã€‚</p><p>å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯:</p><p>a) å¤šä¸ªæ–¹æ¡ˆå¹¶è¡Œæµ‹è¯•;<br>b) æ¯ä¸ªæ–¹æ¡ˆåªæœ‰ä¸€ä¸ªå˜é‡ä¸åŒ;<br>c) ä»¥æŸç§è§„åˆ™ä¼˜èƒœåŠ£æ±°ã€‚</p><p>å…¶ä¸­ç¬¬2ç‚¹æš—ç¤ºäº†A/B æµ‹è¯•çš„åº”ç”¨èŒƒå›´ï¼šA/Bæµ‹è¯•å¿…é¡»æ˜¯å•å˜é‡ã€‚</p><p>å¯¹äºæ¨èç³»ç»Ÿçš„è¯„ä»·ä¸­ï¼Œå”¯ä¸€å˜é‡å°±æ˜¯â€”æ¨èç®—æ³•ã€‚</p><p>æœ‰ä¸ª<a href="http://www.abtests.com">å¾ˆæ£’çš„ç½‘ç«™</a>ï¼Œé‡Œé¢æœ‰å¾ˆå¤šé€šè¿‡å®é™…ABæµ‹è¯•æé«˜ç½‘ç«™ç”¨æˆ·æ»¡æ„åº¦çš„ä¾‹å­ã€‚</p><p>ABæµ‹è¯•çš„ä¼˜ç‚¹æ˜¯ï¼š</p><ul><li>å¯ä»¥å…¬å¹³è·å¾—ä¸åŒç®—æ³•å®é™…åœ¨çº¿æ—¶çš„æ€§èƒ½æŒ‡æ ‡ï¼ŒåŒ…æ‹¬å•†ä¸šä¸Šå…³æ³¨çš„æŒ‡æ ‡ï¼›</li></ul><p>ç¼ºç‚¹æ˜¯ï¼š</p><ul><li>å‘¨æœŸè¾ƒé•¿ï¼Œå¿…é¡»è¿›è¡Œé•¿æœŸçš„å®éªŒæ‰èƒ½å¾—åˆ°å¯é çš„ç»“æœï¼›</li></ul><h4 id="1-1-4-æ€»ç»“"><a href="#1-1-4-æ€»ç»“" class="headerlink" title="1.1.4 æ€»ç»“"></a>1.1.4 æ€»ç»“</h4><p>ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªæ–°çš„æ¨èç®—æ³•æœ€ç»ˆä¸Šçº¿ï¼Œéœ€è¦å®Œæˆä¸Šè¿°çš„3ä¸ªå®éªŒã€‚</p><ul><li>é¦–å…ˆï¼Œé€šè¿‡<strong>ç¦»çº¿å®éªŒ</strong>è¯æ˜å®ƒåœ¨å¾ˆå¤šç¦»çº¿æŒ‡æ ‡ä¸Šä¼˜äºç°æœ‰çš„ç®—æ³•ï¼›</li><li>å…¶æ¬¡ï¼Œé€šè¿‡<strong>ç”¨æˆ·è°ƒæŸ¥</strong>ç¡®å®šç”¨æˆ·æ»¡æ„åº¦ä¸ä½äºç°æœ‰çš„ç®—æ³•ï¼›</li><li>æœ€åï¼Œé€šè¿‡<strong>åœ¨çº¿ABæµ‹è¯•</strong>ç¡®å®šå®ƒåœ¨æˆ‘ä»¬å…³å¿ƒçš„æŒ‡æ ‡ä¸Šä¼˜äºç°æœ‰çš„ç®—æ³•ï¼›</li></ul><h3 id="1-2-è¯„æµ‹æŒ‡æ ‡"><a href="#1-2-è¯„æµ‹æŒ‡æ ‡" class="headerlink" title="1.2 è¯„æµ‹æŒ‡æ ‡"></a>1.2 è¯„æµ‹æŒ‡æ ‡</h3><p>è¯„æµ‹æŒ‡æ ‡ç”¨äºè¯„æµ‹æ¨èç³»ç»Ÿçš„æ€§èƒ½ï¼Œæœ‰äº›å¯ä»¥å®šé‡è®¡ç®—ï¼Œæœ‰äº›åªèƒ½å®šæ€§æè¿°ã€‚</p><h4 id="1ï¼‰ç”¨æˆ·æ»¡æ„åº¦"><a href="#1ï¼‰ç”¨æˆ·æ»¡æ„åº¦" class="headerlink" title="1ï¼‰ç”¨æˆ·æ»¡æ„åº¦"></a>1ï¼‰ç”¨æˆ·æ»¡æ„åº¦</h4><p>ç”¨æˆ·æ»¡æ„åº¦æ˜¯è¯„æµ‹æ¨èç³»ç»Ÿçš„é‡è¦æŒ‡æ ‡ï¼Œæ— æ³•ç¦»çº¿è®¡ç®—ï¼Œåªèƒ½é€šè¿‡ç”¨æˆ·è°ƒæŸ¥æˆ–è€…åœ¨çº¿å®éªŒè·å¾—ã€‚</p><p>è°ƒæŸ¥é—®å·ï¼Œéœ€è¦è€ƒè™‘åˆ°ç”¨æˆ·å„æ–¹é¢çš„æ„Ÿå—ï¼Œç”¨æˆ·æ‰èƒ½é’ˆå¯¹é—®é¢˜ç»™å‡ºå‡†ç¡®çš„å›ç­”ã€‚</p><p>åœ¨çº¿ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·æ»¡æ„åº¦é€šè¿‡ç»Ÿè®¡ç”¨æˆ·è¡Œä¸ºå¾—åˆ°ã€‚æ¯”å¦‚ç”¨æˆ·å¦‚æœè´­ä¹°äº†æ¨èçš„å•†å“ï¼Œå°±è¡¨ç¤ºä»–ä»¬åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ»¡æ„ï¼Œå¯ä»¥ç”¨è´­ä¹°ç‡åº¦é‡ç”¨æˆ·æ»¡æ„åº¦ã€‚</p><p>ä¸€èˆ¬æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ç”¨æˆ·ç‚¹å‡»ç‡ã€åœç•™æ—¶é—´ã€è½¬åŒ–ç‡ç­‰æŒ‡æ ‡åº¦é‡ç”¨æˆ·çš„æ»¡æ„åº¦ã€‚</p><h4 id="2ï¼‰é¢„æµ‹å‡†ç¡®åº¦"><a href="#2ï¼‰é¢„æµ‹å‡†ç¡®åº¦" class="headerlink" title="2ï¼‰é¢„æµ‹å‡†ç¡®åº¦"></a>2ï¼‰é¢„æµ‹å‡†ç¡®åº¦</h4><p>é¢„æµ‹å‡†ç¡®åº¦ï¼Œåº¦é‡çš„æ˜¯æ¨èç³»ç»Ÿé¢„æµ‹ç”¨æˆ·è¡Œä¸ºçš„èƒ½åŠ›ã€‚ æ˜¯æ¨èç³»ç»Ÿæœ€é‡è¦çš„ç¦»çº¿è¯„æµ‹æŒ‡æ ‡ã€‚</p><p>å¤§éƒ¨åˆ†çš„å…³äºæ¨èç³»ç»Ÿè¯„æµ‹æŒ‡æ ‡çš„ç ”ç©¶ï¼Œéƒ½æ˜¯é’ˆå¯¹é¢„æµ‹å‡†ç¡®åº¦çš„ã€‚å› ä¸ºè¯¥æŒ‡æ ‡å¯ä»¥é€šè¿‡ç¦»çº¿å®éªŒè®¡ç®—ï¼Œæ–¹ä¾¿äº†å­¦æœ¯ç•Œçš„ç ”ç©¶äººå‘˜ã€‚</p><p>ç”±äºç¦»çº¿çš„æ¨èç®—æ³•æœ‰ä¸åŒçš„ç ”ç©¶æ–¹å‘ï¼Œå‡†ç¡®åº¦æŒ‡æ ‡ä¹Ÿä¸åŒï¼Œæ ¹æ®ç ”ç©¶æ–¹å‘ï¼Œå¯åˆ†ä¸ºï¼šé¢„æµ‹è¯„åˆ†å‡†ç¡®åº¦å’ŒTopNæ¨èã€‚</p><h5 id="aï¼‰é¢„æµ‹è¯„åˆ†å‡†ç¡®åº¦"><a href="#aï¼‰é¢„æµ‹è¯„åˆ†å‡†ç¡®åº¦" class="headerlink" title="aï¼‰é¢„æµ‹è¯„åˆ†å‡†ç¡®åº¦"></a>aï¼‰é¢„æµ‹è¯„åˆ†å‡†ç¡®åº¦</h5><p>é¢„æµ‹è¯„åˆ†çš„å‡†ç¡®åº¦ï¼Œè¡¡é‡çš„æ˜¯ç®—æ³•é¢„æµ‹çš„è¯„åˆ†ä¸ç”¨æˆ·çš„å®é™…è¯„åˆ†çš„è´´è¿‘ç¨‹åº¦ã€‚</p><p>è¿™é’ˆå¯¹äºä¸€äº›éœ€è¦ç”¨æˆ·ç»™ç‰©å“è¯„åˆ†çš„ç½‘ç«™ã€‚</p><p>é¢„æµ‹è¯„åˆ†çš„å‡†ç¡®åº¦æŒ‡æ ‡ï¼Œä¸€èˆ¬é€šè¿‡ä»¥ä¸‹æŒ‡æ ‡è®¡ç®—ï¼š</p><p><strong>å¹³å‡ç»å¯¹è¯¯å·®ï¼ˆMAEï¼‰</strong></p><p><img src="/2020/05/20/%E5%A6%82%E4%BD%95%E8%AF%84%E4%BB%B7%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E6%99%BA%E8%83%BD%E7%B3%BB%E7%BB%9F/2020-05-20-21-51-32.png" alt></p><p>MAEå› å…¶è®¡ç®—ç®€å•ã€é€šä¿—æ˜“æ‡‚å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ã€‚ä½†MAEæŒ‡æ ‡ä¹Ÿæœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œå› ä¸ºå¯¹MAEæŒ‡æ ‡è´¡çŒ®æ¯”è¾ƒå¤§çš„å¾€å¾€æ˜¯é‚£ç§å¾ˆéš¾é¢„æµ‹å‡†ç¡®çš„ä½åˆ†å•†å“ã€‚</p><p>æ‰€ä»¥å³ä¾¿æ¨èç³»ç»ŸAçš„MAEå€¼ä½äºç³»ç»ŸBï¼Œå¾ˆå¯èƒ½åªæ˜¯ç”±äºç³»ç»ŸAæ›´æ“…é•¿é¢„æµ‹è¿™éƒ¨åˆ†ä½åˆ†å•†å“çš„è¯„åˆ†ï¼Œå³ç³»ç»ŸAæ¯”ç³»ç»ŸBèƒ½æ›´å¥½çš„åŒºåˆ†ç”¨æˆ·éå¸¸è®¨åŒå’Œä¸€èˆ¬è®¨åŒçš„å•†å“ï¼Œæ˜¾ç„¶è¿™æ ·åŒºåˆ†çš„æ„ä¹‰ä¸å¤§ã€‚</p><p><strong>å‡æ–¹æ ¹è¯¯å·®ï¼ˆRMSEï¼‰</strong></p><p><img src="/2020/05/20/%E5%A6%82%E4%BD%95%E8%AF%84%E4%BB%B7%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E6%99%BA%E8%83%BD%E7%B3%BB%E7%BB%9F/2020-05-20-21-51-51.png" alt></p><p>Netflixè®¤ä¸ºRMSEåŠ å¤§äº†å¯¹é¢„æµ‹ä¸å‡†çš„ç”¨æˆ·ç‰©å“è¯„åˆ†çš„æƒ©ç½šï¼ˆå¹³æ–¹é¡¹çš„æƒ©ç½šï¼‰ï¼Œå› è€Œå¯¹ç³»ç»Ÿçš„è¯„æµ‹æ›´åŠ è‹›åˆ»ã€‚</p><p>ç ”ç©¶è¡¨æ˜ï¼Œå¦‚æœè¯„åˆ†ç³»ç»Ÿæ˜¯åŸºäºæ•´æ•°å»ºç«‹çš„ï¼ˆå³ç”¨æˆ·ç»™çš„è¯„åˆ†éƒ½æ˜¯æ•´æ•°ï¼‰ï¼Œé‚£ä¹ˆå¯¹é¢„æµ‹ç»“æœå–æ•´æ•°ä¼šé™ä½MAEçš„è¯¯å·®ã€‚</p><h5 id="bï¼‰TopNæ¨è"><a href="#bï¼‰TopNæ¨è" class="headerlink" title="bï¼‰TopNæ¨è"></a>bï¼‰TopNæ¨è</h5><p>ç½‘ç«™æä¾›æ¨èæœåŠ¡æ—¶ï¼Œä¸€èˆ¬æ˜¯ç»™ç”¨æˆ·ä¸€ä¸ªä¸ªæ€§åŒ–çš„æ¨èåˆ—è¡¨ï¼Œè¿™ç§æ¨èå«åšTopNæ¨èã€‚</p><p>TopNæ¨èçš„é¢„æµ‹å‡†ç¡®ç‡ï¼Œä¸€èˆ¬é€šè¿‡2ä¸ªæŒ‡æ ‡åº¦é‡ï¼š</p><p><strong>å‡†ç¡®ç‡ï¼ˆprecisionï¼‰</strong></p><p><img src="/2020/05/20/%E5%A6%82%E4%BD%95%E8%AF%84%E4%BB%B7%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E6%99%BA%E8%83%BD%E7%B3%BB%E7%BB%9F/2020-05-20-21-52-10.png" alt></p><p><strong>å¬å›ç‡ï¼ˆrecallï¼‰</strong></p><p><img src="/2020/05/20/%E5%A6%82%E4%BD%95%E8%AF%84%E4%BB%B7%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E6%99%BA%E8%83%BD%E7%B3%BB%E7%BB%9F/2020-05-20-21-52-18.png" alt></p><p>R(u)æ˜¯æ ¹æ®ç”¨æˆ·åœ¨è®­ç»ƒé›†ä¸Šçš„è¡Œä¸ºç»™ç”¨æˆ·åšå‡ºçš„æ¨èåˆ—è¡¨ï¼ŒT(u)æ˜¯ç”¨æˆ·åœ¨æµ‹è¯•é›†ä¸Šçš„è¡Œä¸ºåˆ—è¡¨ã€‚</p><p>TopNæ¨èæ›´ç¬¦åˆå®é™…çš„åº”ç”¨éœ€æ±‚ï¼Œæ¯”å¦‚é¢„æµ‹ç”¨æˆ·æ˜¯å¦ä¼šçœ‹ä¸€éƒ¨ç”µå½±ï¼Œæ¯”é¢„æµ‹ç”¨æˆ·çœ‹äº†ç”µå½±ä¹‹åä¼šç»™å®ƒä»€ä¹ˆè¯„åˆ†æ›´é‡è¦ã€‚</p><p><strong>ROCæ›²çº¿ã€AUCæ›²çº¿ã€Få€¼</strong></p><p>åˆ†ç±»ä»»åŠ¡ä¸€èˆ¬éƒ½æœ‰è¿™ä¸‰å…„å¼Ÿã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰Hit Rate (HR)ç­‰ã€‚</p><h4 id="3ï¼‰è¦†ç›–ç‡"><a href="#3ï¼‰è¦†ç›–ç‡" class="headerlink" title="3ï¼‰è¦†ç›–ç‡"></a>3ï¼‰è¦†ç›–ç‡</h4><p><img src="/2020/05/20/%E5%A6%82%E4%BD%95%E8%AF%84%E4%BB%B7%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E6%99%BA%E8%83%BD%E7%B3%BB%E7%BB%9F/2020-05-20-21-52-29.png" alt></p><p>è¦†ç›–ç‡ï¼ˆcoverageï¼‰æ˜¯æè¿°ä¸€ä¸ªæ¨èç³»ç»Ÿå¯¹ç‰©å“é•¿å°¾çš„å‘æ˜èƒ½åŠ›ã€‚</p><p>æœ€ç®€å•çš„å®šä¹‰æ˜¯ï¼Œæ¨èç³»ç»Ÿæ¨èå‡ºæ¥çš„ç‰©å“å æ€»ç‰©å“çš„æ¯”ä¾‹ã€‚</p><p>å‡è®¾ç³»ç»Ÿçš„ç”¨æˆ·é›†åˆä¸ºUï¼Œæ¨èç³»ç»Ÿç»™æ¯ä¸ªç”¨æˆ·æ¨èä¸€ä¸ªé•¿åº¦ä¸ºNçš„ç‰©å“åˆ—è¡¨R(u)ï¼Œè¦†ç›–ç‡å…¬å¼ä¸ºï¼š</p><p>è¦†ç›–ç‡æ˜¯å†…å®¹æä¾›è€…å…³å¿ƒçš„æŒ‡æ ‡ï¼Œè¦†ç›–ç‡ä¸º100%çš„æ¨èç³»ç»Ÿå¯ä»¥å°†æ¯ä¸ªç‰©å“éƒ½æ¨èç»™è‡³å°‘ä¸€ä¸ªç”¨æˆ·ã€‚</p><p>é™¤äº†æ¨èç‰©å“çš„å æ¯”ï¼Œè¿˜å¯ä»¥é€šè¿‡ç ”ç©¶ç‰©å“åœ¨æ¨èåˆ—è¡¨ä¸­å‡ºç°çš„æ¬¡æ•°åˆ†å¸ƒï¼Œæ›´å¥½çš„æè¿°æ¨èç³»ç»Ÿçš„æŒ–æ˜é•¿å°¾çš„èƒ½åŠ›ã€‚</p><p>å¦‚æœåˆ†å¸ƒæ¯”è¾ƒå¹³ï¼Œè¯´æ˜æ¨èç³»ç»Ÿçš„è¦†ç›–ç‡å¾ˆé«˜ï¼›å¦‚æœåˆ†å¸ƒé™¡å³­ï¼Œè¯´æ˜åˆ†å¸ƒç³»ç»Ÿçš„è¦†ç›–ç‡è¾ƒä½ã€‚</p><p>ä¿¡æ¯è®ºå’Œç»æµå­¦ä¸­æœ‰ä¸¤ä¸ªè‘—åæŒ‡æ ‡ï¼Œå¯ä»¥å®šä¹‰è¦†ç›–ç‡ï¼š</p><p><strong>ä¿¡æ¯ç†µ</strong></p><p><img src="/2020/05/20/%E5%A6%82%E4%BD%95%E8%AF%84%E4%BB%B7%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E6%99%BA%E8%83%BD%E7%B3%BB%E7%BB%9F/2020-05-20-21-52-40.png" alt></p><p>p(i)æ˜¯ç‰©å“içš„æµè¡Œåº¦é™¤ä»¥æ‰€æœ‰ç‰©å“æµè¡Œåº¦ä¹‹å’Œã€‚</p><p><strong>åŸºå°¼ç³»æ•°ï¼ˆGini Indexï¼‰</strong></p><p><img src="/2020/05/20/%E5%A6%82%E4%BD%95%E8%AF%84%E4%BB%B7%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E6%99%BA%E8%83%BD%E7%B3%BB%E7%BB%9F/2020-05-20-21-52-57.png" alt></p><p>p(ij)æ˜¯æŒ‰ç…§ç‰©å“æµè¡Œåº¦p()ä»å°åˆ°å¤§æ’åºçš„ç‰©å“åˆ—è¡¨ä¸­ç¬¬jä¸ªç‰©å“ã€‚</p><p><img src="/2020/05/20/%E5%A6%82%E4%BD%95%E8%AF%84%E4%BB%B7%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E6%99%BA%E8%83%BD%E7%B3%BB%E7%BB%9F/2020-05-20-21-53-09.png" alt></p><p><strong>è¯„æµ‹é©¬å¤ªæ•ˆåº”</strong></p><p>é©¬å¤ªæ•ˆåº”ï¼Œæ˜¯æŒ‡å¼ºè€…è¶Šå¼ºï¼Œå¼±è€…è¶Šå¼±çš„æ•ˆåº”ã€‚æ¨èç³»ç»Ÿçš„åˆè¡·æ˜¯å¸Œæœ›æ¶ˆé™¤é©¬å¤ªæ•ˆåº”ï¼Œä½¿å¾—å„ç‰©å“éƒ½èƒ½è¢«å±•ç¤ºç»™å¯¹å®ƒä»¬æ„Ÿå…´è¶£çš„äººç¾¤ã€‚</p><p>ä½†æ˜¯ï¼Œå¾ˆå¤šç ”ç©¶è¡¨æ˜ï¼Œç°åœ¨çš„ä¸»æµæ¨èç®—æ³•ï¼ˆååŒè¿‡æ»¤ï¼‰æ˜¯å…·æœ‰é©¬å¤ªæ•ˆåº”çš„ã€‚è¯„æµ‹æ¨èç³»ç»Ÿæ˜¯å¦å…·æœ‰é©¬å¤ªæ•ˆåº”å¯ä»¥ä½¿ç”¨åŸºå°¼ç³»æ•°ã€‚</p><p>å¦‚ï¼ŒG1æ˜¯ä»åˆå§‹ç”¨æˆ·è¡Œä¸ºä¸­è®¡ç®—å‡ºçš„ç‰©å“æµè¡Œåº¦çš„åŸºå°¼ç³»æ•°ï¼ŒG2æ˜¯ä»æ¨èåˆ—è¡¨ä¸­è®¡ç®—å‡ºçš„ç‰©å“æµè¡Œåº¦çš„åŸºå°¼ç³»æ•°ï¼Œé‚£ä¹ˆå¦‚æœG1&gt;G2ï¼Œå°±è¯´æ˜æ¨èç®—æ³•å…·æœ‰é©¬å¤ªæ•ˆåº”ã€‚</p><h4 id="4ï¼‰å¤šæ ·æ€§"><a href="#4ï¼‰å¤šæ ·æ€§" class="headerlink" title="4ï¼‰å¤šæ ·æ€§"></a>4ï¼‰å¤šæ ·æ€§</h4><p>ä¸ºäº†æ»¡è¶³ç”¨æˆ·å¹¿æ³›çš„å…´è¶£ï¼Œæ¨èåˆ—è¡¨éœ€è¦èƒ½å¤Ÿè¦†ç›–ç”¨æˆ·ä¸åŒå…´è¶£çš„é¢†åŸŸï¼Œå³éœ€è¦å…·æœ‰å¤šæ ·æ€§ã€‚</p><p>å¤šæ ·æ€§æè¿°äº†æ¨èåˆ—è¡¨ä¸­ç‰©å“ä¸¤ä¸¤ä¹‹é—´çš„ä¸ç›¸ä¼¼æ€§ã€‚å‡è®¾s(i,j)åœ¨[0,1]åŒºé—´å®šä¹‰äº†ç‰©å“iå’Œjä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œé‚£ä¹ˆç”¨æˆ·uçš„æ¨èåˆ—è¡¨R(u)çš„å¤šæ ·æ€§å®šä¹‰å¦‚ä¸‹ï¼š</p><p><img src="/2020/05/20/%E5%A6%82%E4%BD%95%E8%AF%84%E4%BB%B7%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E6%99%BA%E8%83%BD%E7%B3%BB%E7%BB%9F/2020-05-20-21-53-44.png" alt></p><p>æ¨èç³»ç»Ÿæ•´ä½“å¤šæ ·æ€§å¯ä»¥å®šä¹‰ä¸ºæ‰€æœ‰ç”¨æˆ·æ¨èåˆ—è¡¨å¤šæ ·æ€§çš„å¹³å‡å€¼ï¼š</p><p><img src="/2020/05/20/%E5%A6%82%E4%BD%95%E8%AF%84%E4%BB%B7%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E6%99%BA%E8%83%BD%E7%B3%BB%E7%BB%9F/2020-05-20-21-53-51.png" alt></p><h4 id="5ï¼‰æ–°é¢–æ€§"><a href="#5ï¼‰æ–°é¢–æ€§" class="headerlink" title="5ï¼‰æ–°é¢–æ€§"></a>5ï¼‰æ–°é¢–æ€§</h4><p>æ–°é¢–æ€§ä¹Ÿæ˜¯å½±å“ç”¨æˆ·ä½“éªŒçš„é‡è¦æŒ‡æ ‡ä¹‹ä¸€ã€‚å®ƒæŒ‡çš„æ˜¯å‘ç”¨æˆ·æ¨èéçƒ­é—¨éæµè¡Œç‰©å“çš„èƒ½åŠ›ã€‚</p><p>è¯„æµ‹æ–°é¢–åº¦æœ€ç®€å•çš„æ–¹æ³•ï¼Œæ˜¯åˆ©ç”¨æ¨èç»“æœçš„å¹³å‡æµè¡Œåº¦ï¼Œå› ä¸ºè¶Šä¸çƒ­é—¨çš„ç‰©å“ï¼Œè¶Šå¯èƒ½è®©ç”¨æˆ·è§‰å¾—æ–°é¢–ã€‚</p><p>æ­¤è®¡ç®—æ¯”è¾ƒç²—ç³™ï¼Œéœ€è¦é…åˆç”¨æˆ·è°ƒæŸ¥å‡†ç¡®ç»Ÿè®¡æ–°é¢–åº¦ã€‚</p><h4 id="6ï¼‰æƒŠå–œåº¦"><a href="#6ï¼‰æƒŠå–œåº¦" class="headerlink" title="6ï¼‰æƒŠå–œåº¦"></a>6ï¼‰æƒŠå–œåº¦</h4><p>æ¨èç»“æœå’Œç”¨æˆ·çš„å†å²å…´è¶£ä¸ç›¸ä¼¼ï¼Œä½†å´è®©ç”¨æˆ·æ»¡æ„ï¼Œè¿™æ ·å°±æ˜¯æƒŠå–œåº¦å¾ˆé«˜ã€‚</p><p>ç›®å‰æƒŠå–œåº¦è¿˜æ²¡æœ‰å…¬è®¤çš„æŒ‡æ ‡å®šä¹‰æ–¹å¼ï¼Œæœ€è¿‘å‡ å¹´ç ”ç©¶çš„äººå¾ˆå¤šï¼Œæ·±å…¥ç ”ç©¶å¯ä»¥å‚è€ƒä¸€äº›è®ºæ–‡ã€‚</p><h4 id="7ï¼‰ä¿¡ä»»åº¦"><a href="#7ï¼‰ä¿¡ä»»åº¦" class="headerlink" title="7ï¼‰ä¿¡ä»»åº¦"></a>7ï¼‰ä¿¡ä»»åº¦</h4><p>å¦‚æœç”¨æˆ·ä¿¡ä»»æ¨èç³»ç»Ÿï¼Œå°±ä¼šå¢åŠ ç”¨æˆ·å’Œæ¨èç³»ç»Ÿçš„äº¤äº’ã€‚</p><p>æé«˜ä¿¡ä»»åº¦çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š</p><ul><li>å¢åŠ ç³»ç»Ÿé€æ˜åº¦ï¼šæä¾›æ¨èè§£é‡Šï¼Œè®©ç”¨æˆ·äº†è§£æ¨èç³»ç»Ÿçš„è¿è¡Œæœºåˆ¶ã€‚</li><li>åˆ©ç”¨ç¤¾äº¤ç½‘ç»œï¼Œé€šè¿‡å¥½å‹ä¿¡æ¯ç»™ç”¨æˆ·åšæ¨è</li></ul><p>åº¦é‡ä¿¡ä»»åº¦çš„æ–¹å¼ï¼Œåªèƒ½é€šè¿‡é—®å·è°ƒæŸ¥ã€‚</p><h4 id="8ï¼‰å®æ—¶æ€§"><a href="#8ï¼‰å®æ—¶æ€§" class="headerlink" title="8ï¼‰å®æ—¶æ€§"></a>8ï¼‰å®æ—¶æ€§</h4><p>æ¨èç³»ç»Ÿçš„å®æ—¶æ€§ï¼ŒåŒ…æ‹¬ä¸¤æ–¹é¢ï¼š</p><ul><li>å®æ—¶æ›´æ–°æ¨èåˆ—è¡¨æ»¡è¶³ç”¨æˆ·æ–°çš„è¡Œä¸ºå˜åŒ–ï¼›</li><li>å°†æ–°åŠ å…¥ç³»ç»Ÿçš„ç‰©å“æ¨èç»™ç”¨æˆ·ï¼›</li></ul><h4 id="9ï¼‰å¥å£®æ€§"><a href="#9ï¼‰å¥å£®æ€§" class="headerlink" title="9ï¼‰å¥å£®æ€§"></a>9ï¼‰å¥å£®æ€§</h4><p>ä»»ä½•èƒ½å¸¦æ¥åˆ©ç›Šçš„ç®—æ³•ç³»ç»Ÿéƒ½ä¼šè¢«æ”»å‡»ï¼Œæœ€å…¸å‹çš„æ¡ˆä¾‹å°±æ˜¯æœç´¢å¼•æ“çš„ä½œå¼Šä¸åä½œå¼Šæ–—äº‰ã€‚</p><p>å¥å£®æ€§ï¼ˆrobustï¼Œé²æ£’æ€§ï¼‰è¡¡é‡äº†æ¨èç³»ç»ŸæŠ—å‡»ä½œå¼Šçš„èƒ½åŠ›ã€‚</p><p>2011å¹´çš„æ¨èç³»ç»Ÿå¤§ä¼šä¸“é—¨æœ‰ä¸€ä¸ªæ¨èç³»ç»Ÿå¥å£®æ€§çš„æ•™ç¨‹ï¼Œä½œè€…æ€»ç»“äº†å¾ˆå¤šä½œå¼Šæ–¹æ³•ï¼Œæœ€è‘—åçš„æ˜¯è¡Œä¸ºæ³¨å…¥æ”»å‡»ï¼ˆprofile injection attackï¼‰ã€‚</p><p>å°±æ˜¯æ³¨å†Œå¾ˆå¤šè´¦å·ï¼Œç”¨è¿™äº›è´¦å·åŒæ—¶è´­ä¹°Aå’Œè‡ªå·±çš„å•†å“ã€‚æ­¤æ–¹æ³•é’ˆå¯¹äºšé©¬é€Šçš„ä¸€ç§æ¨èæ–¹æ³•ï¼Œâ€œè´­ä¹°å•†å“Açš„ç”¨æˆ·ä¹Ÿç»å¸¸è´­ä¹°çš„å…¶ä»–å•†å“â€ã€‚</p><p>è¯„æµ‹ç®—æ³•çš„å¥å£®æ€§ï¼Œä¸»è¦åˆ©ç”¨æ¨¡æ‹Ÿæ”»å‡»ï¼š</p><ul><li>aï¼‰ç»™å®šä¸€ä¸ªæ•°æ®é›†å’Œç®—æ³•ï¼Œç”¨ç®—æ³•ç»™æ•°æ®é›†ä¸­çš„ç”¨æˆ·ç”Ÿæˆæ¨èåˆ—è¡¨ï¼›</li><li>bï¼‰ç”¨å¸¸ç”¨çš„æ”»å‡»æ–¹æ³•å‘æ•°æ®é›†ä¸­æ³¨å…¥å™ªå£°æ•°æ®ï¼›</li><li>cï¼‰åˆ©ç”¨ç®—æ³•åœ¨æœ‰å™ªå£°çš„æ•°æ®é›†ä¸Šå†æ¬¡ç”Ÿæˆæ¨èåˆ—è¡¨ï¼›</li><li>dï¼‰é€šè¿‡æ¯”è¾ƒæ”»å‡»å‰åæ¨èåˆ—è¡¨çš„ç›¸ä¼¼åº¦è¯„æµ‹ç®—æ³•çš„å¥å£®æ€§ã€‚</li></ul><p>æé«˜ç³»ç»Ÿå¥å£®æ€§çš„æ–¹æ³•ï¼š</p><ul><li>é€‰æ‹©å¥å£®æ€§é«˜çš„ç®—æ³•ï¼›</li><li>é€‰æ‹©ä»£ä»·è¾ƒé«˜çš„ç”¨æˆ·è¡Œä¸ºï¼Œå¦‚è´­ä¹°è¡Œä¸ºæ¯”æµè§ˆè¡Œä¸ºä»£ä»·é«˜ï¼›</li><li>åœ¨ä½¿ç”¨æ•°æ®å‰ï¼Œè¿›è¡Œæ”»å‡»æ£€æµ‹ï¼Œä»è€Œå¯¹æ•°æ®è¿›è¡Œæ¸…ç†ã€‚</li></ul><h4 id="10ï¼‰å•†ä¸šç›®æ ‡"><a href="#10ï¼‰å•†ä¸šç›®æ ‡" class="headerlink" title="10ï¼‰å•†ä¸šç›®æ ‡"></a>10ï¼‰å•†ä¸šç›®æ ‡</h4><p>è®¾è®¡æ¨èç³»ç»Ÿæ—¶ï¼Œéœ€è¦è€ƒè™‘æœ€ç»ˆçš„å•†ä¸šç›®æ ‡ã€‚ä¸åŒç½‘ç«™å…·æœ‰ä¸åŒçš„å•†ä¸šç›®æ ‡ï¼Œå®ƒä¸ç½‘ç«™çš„ç›ˆåˆ©æ¨¡å¼æ¯æ¯ç›¸å…³ã€‚</p><p>æ€»ç»“ï¼š</p><p><img src="/2020/05/20/%E5%A6%82%E4%BD%95%E8%AF%84%E4%BB%B7%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E6%99%BA%E8%83%BD%E7%B3%BB%E7%BB%9F/2020-05-20-21-54-09.png" alt></p><p>ä½œè€…è®¤ä¸ºï¼Œå¯¹äºå¯ä»¥ç¦»çº¿ä¼˜åŒ–çš„æŒ‡æ ‡ï¼Œåœ¨ç»™å®šè¦†ç›–ç‡ã€å¤šæ ·æ€§ã€æ–°é¢–æ€§ç­‰é™åˆ¶æ¡ä»¶ä¸‹ï¼Œåº”å°½é‡ä¼˜åŒ–é¢„æµ‹å‡†ç¡®åº¦ã€‚</p><h3 id="1-3-è¯„æµ‹ç»´åº¦"><a href="#1-3-è¯„æµ‹ç»´åº¦" class="headerlink" title="1.3 è¯„æµ‹ç»´åº¦"></a>1.3 è¯„æµ‹ç»´åº¦</h3><p>å¦‚æœæ¨èç³»ç»Ÿçš„è¯„æµ‹æŠ¥å‘Šä¸­ï¼ŒåŒ…å«äº†ä¸åŒç»´åº¦ä¸‹çš„ç³»ç»Ÿè¯„æµ‹æŒ‡æ ‡ï¼Œå°±èƒ½å¸®æˆ‘ä»¬å…¨é¢äº†è§£ç³»ç»Ÿæ€§èƒ½ã€‚ä¸€èˆ¬è¯„æµ‹ç»´åº¦åˆ†3ç§ï¼š</p><p>ç”¨æˆ·ç»´åº¦ï¼Œä¸»è¦åŒ…æ‹¬ç”¨æˆ·çš„äººå£ç»Ÿè®¡å­¦ä¿¡æ¯ã€æ´»è·ƒåº¦ä»¥åŠæ˜¯ä¸æ˜¯æ–°ç”¨æˆ·ç­‰ï¼›<br>ç‰©å“ç»´åº¦ï¼ŒåŒ…æ‹¬ç‰©å“çš„å±æ€§ä¿¡æ¯ã€æµè¡Œåº¦ã€å¹³å‡åˆ†ä»¥åŠæ˜¯ä¸æ˜¯æ–°åŠ å…¥çš„ç‰©å“ç­‰ï¼›<br>æ—¶é—´ç»´åº¦ï¼ŒåŒ…æ‹¬å­£èŠ‚ï¼Œæ˜¯å·¥ä½œæ—¥è¿˜æ˜¯å‘¨æœ«ï¼Œç™½å¤©è¿˜æ˜¯æ™šä¸Šç­‰ï¼›</p><h2 id="2-è¯„ä»·æ™ºèƒ½ç³»ç»Ÿ"><a href="#2-è¯„ä»·æ™ºèƒ½ç³»ç»Ÿ" class="headerlink" title="2. è¯„ä»·æ™ºèƒ½ç³»ç»Ÿ"></a>2. è¯„ä»·æ™ºèƒ½ç³»ç»Ÿ</h2><p>ã€æœªå®Œæˆã€‘</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>testing</tag>
      
      <tag>Recommendation System</tag>
      
      <tag>Metrics</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Datawhaleâ€”â€”SVHNâ€”â€”Task01ï¼šèµ›é¢˜ç†è§£</title>
    <link href="/2020/05/20/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task01%EF%BC%9A%E8%B5%9B%E9%A2%98%E7%90%86%E8%A7%A3/"/>
    <url>/2020/05/20/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task01%EF%BC%9A%E8%B5%9B%E9%A2%98%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ¬¡æ–°äººèµ›æ˜¯Datawhaleä¸å¤©æ± è”åˆå‘èµ·çš„0åŸºç¡€å…¥é—¨ç³»åˆ—èµ›äº‹ç¬¬äºŒåœº â€”â€” é›¶åŸºç¡€å…¥é—¨CVä¹‹è¡—æ™¯å­—ç¬¦è¯†åˆ«æ¯”èµ›ã€‚<br><!--more---></p><h1 id="Datawhaleå°ç»„å­¦ä¹ ä¹‹è¡—æ™¯å­—ç¬¦ç¼–ç è¯†åˆ«ä»»åŠ¡â€”â€”Task01ï¼šèµ›é¢˜ç†è§£"><a href="#Datawhaleå°ç»„å­¦ä¹ ä¹‹è¡—æ™¯å­—ç¬¦ç¼–ç è¯†åˆ«ä»»åŠ¡â€”â€”Task01ï¼šèµ›é¢˜ç†è§£" class="headerlink" title="Datawhaleå°ç»„å­¦ä¹ ä¹‹è¡—æ™¯å­—ç¬¦ç¼–ç è¯†åˆ«ä»»åŠ¡â€”â€”Task01ï¼šèµ›é¢˜ç†è§£"></a>Datawhaleå°ç»„å­¦ä¹ ä¹‹è¡—æ™¯å­—ç¬¦ç¼–ç è¯†åˆ«ä»»åŠ¡â€”â€”Task01ï¼šèµ›é¢˜ç†è§£</h1><h2 id="1-å¤§èµ›ç®€ä»‹"><a href="#1-å¤§èµ›ç®€ä»‹" class="headerlink" title="1. å¤§èµ›ç®€ä»‹"></a>1. å¤§èµ›ç®€ä»‹</h2><p>æœ¬æ¬¡æ–°äººèµ›æ˜¯Datawhaleä¸å¤©æ± è”åˆå‘èµ·çš„0åŸºç¡€å…¥é—¨ç³»åˆ—èµ›äº‹ç¬¬äºŒåœº â€”â€” é›¶åŸºç¡€å…¥é—¨CVä¹‹è¡—æ™¯å­—ç¬¦è¯†åˆ«æ¯”èµ›ã€‚</p><h3 id="1-1-èµ›é¢˜æ•°æ®ä»‹ç»"><a href="#1-1-èµ›é¢˜æ•°æ®ä»‹ç»" class="headerlink" title="1.1 èµ›é¢˜æ•°æ®ä»‹ç»"></a>1.1 èµ›é¢˜æ•°æ®ä»‹ç»</h3><p>èµ›é¢˜æ¥æºè‡ªGoogleè¡—æ™¯å›¾åƒä¸­çš„é—¨ç‰Œå·æ•°æ®é›†ï¼ˆThe Street View House Numbers Dataset, SVHNï¼‰ï¼Œè¯¥æ•°æ®æ¥è‡ªçœŸå®åœºæ™¯çš„é—¨ç‰Œå·ã€‚</p><p>è®­ç»ƒé›†æ•°æ®åŒ…æ‹¬3Wå¼ ç…§ç‰‡ï¼ŒéªŒè¯é›†æ•°æ®åŒ…æ‹¬1Wå¼ ç…§ç‰‡ï¼Œæ¯å¼ ç…§ç‰‡åŒ…æ‹¬é¢œè‰²å›¾åƒå’Œå¯¹åº”çš„ç¼–ç ç±»åˆ«å’Œå…·ä½“ä½ç½®</p><h3 id="1-2-å‚èµ›è§„åˆ™"><a href="#1-2-å‚èµ›è§„åˆ™" class="headerlink" title="1.2 å‚èµ›è§„åˆ™"></a>1.2 å‚èµ›è§„åˆ™</h3><ul><li>æ¯”èµ›å…è®¸ä½¿ç”¨CIFAR-10å’ŒImageNetæ•°æ®é›†çš„é¢„è®­ç»ƒæ¨¡å‹ï¼Œä¸å…è®¸ä½¿ç”¨å…¶ä»–ä»»ä½•é¢„è®­ç»ƒæ¨¡å‹å’Œä»»ä½•å¤–éƒ¨æ•°æ®ï¼›</li><li>æŠ¥åæˆåŠŸåï¼Œé€‰æ‰‹ä¸‹è½½æ•°æ®ï¼Œåœ¨æœ¬åœ°è°ƒè¯•ç®—æ³•ï¼Œæäº¤ç»“æœï¼›</li><li>æäº¤åå°†è¿›è¡Œå®æ—¶è¯„æµ‹ï¼›æ¯å¤©æ’è¡Œæ¦œæ›´æ–°æ—¶é—´ä¸º12:00å’Œ20:00ï¼ŒæŒ‰ç…§è¯„æµ‹æŒ‡æ ‡å¾—åˆ†ä»é«˜åˆ°ä½æ’åºï¼›æ’è¡Œæ¦œå°†é€‰æ‹©å†å²æœ€ä¼˜æˆç»©è¿›è¡Œå±•ç¤ºã€‚</li></ul><h3 id="1-3-æ•°æ®é›†ç®€ä»‹"><a href="#1-3-æ•°æ®é›†ç®€ä»‹" class="headerlink" title="1.3 æ•°æ®é›†ç®€ä»‹"></a>1.3 æ•°æ®é›†ç®€ä»‹</h3><p>æ‰€æœ‰çš„æ•°æ®ï¼ˆè®­ç»ƒé›†ã€éªŒè¯é›†å’Œæµ‹è¯•é›†ï¼‰çš„æ ‡æ³¨ä½¿ç”¨JSONæ ¼å¼ï¼Œå¹¶ä½¿ç”¨æ–‡ä»¶åè¿›è¡Œç´¢å¼•ã€‚</p><div class="table-container"><table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody><tr><td>top</td><td>å·¦ä¸Šè§’åæ ‡X</td></tr><tr><td>height</td><td>å­—ç¬¦é«˜åº¦</td></tr><tr><td>left</td><td>å·¦ä¸Šè§’æœ€è¡¨Y</td></tr><tr><td>width</td><td>å­—ç¬¦å®½åº¦</td></tr><tr><td>label</td><td>å­—ç¬¦ç¼–ç </td></tr></tbody></table></div><p>å­—ç¬¦çš„åæ ‡å…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š<br><img src="/2020/05/20/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task01%EF%BC%9A%E8%B5%9B%E9%A2%98%E7%90%86%E8%A7%A3/å­—ç¬¦åæ ‡.png" alt="åæ ‡">  </p><p>åœ¨æ¯”èµ›æ•°æ®ï¼ˆè®­ç»ƒé›†å’ŒéªŒè¯é›†ï¼‰ä¸­ï¼ŒåŒä¸€å¼ å›¾ç‰‡ä¸­å¯èƒ½åŒ…æ‹¬ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­—ç¬¦ï¼Œå› æ­¤åœ¨æ¯”èµ›æ•°æ®çš„JSONæ ‡æ³¨ä¸­ï¼Œä¼šæœ‰ä¸¤ä¸ªå­—ç¬¦çš„è¾¹æ¡†ä¿¡æ¯ï¼š<br>|åŸå§‹å›¾ç‰‡|å›¾ç‰‡JSONæ ‡æ³¨|<br>|â€”â€”|â€”â€”-|<br><img src="/2020/05/20/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task01%EF%BC%9A%E8%B5%9B%E9%A2%98%E7%90%86%E8%A7%A3/åŸå§‹å›¾ç‰‡.png" alt="19">    | <img src="/2020/05/20/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task01%EF%BC%9A%E8%B5%9B%E9%A2%98%E7%90%86%E8%A7%A3/åŸå§‹å›¾ç‰‡æ ‡æ³¨.png" alt="æ ‡æ³¨">  |</p><p>åœ¨<a href="http://ufldl.stanford.edu/housenumbers/">SVHNå®˜ç½‘</a>ä¸Šä¸‹è½½æ•°æ®é›†çš„è¯ï¼Œæœ‰ä¸¤ç§æ ¼å¼å¯ä¾›é€‰æ‹©ï¼š</p><h4 id="ç¬¬ä¸€ç§æ ¼å¼"><a href="#ç¬¬ä¸€ç§æ ¼å¼" class="headerlink" title="ç¬¬ä¸€ç§æ ¼å¼"></a>ç¬¬ä¸€ç§æ ¼å¼</h4><p>ç¬¬ä¸€ç§æ ¼å¼çš„æ•°æ®é›†ï¼Œé™¤äº†åŸå§‹å›¾åƒä¹‹å¤–è¿˜åŒ…æ‹¬è¾¹ç•Œæ¡†ä¿¡æ¯ã€‚æ¯ä¸ªtar.gzæ–‡ä»¶éƒ½åŒ…å«pngæ ¼å¼çš„åŸå§‹å›¾åƒï¼Œä»¥åŠä¸€ä¸ªdigitStruct.matæ–‡ä»¶ã€‚è¾¹ç•Œæ¡†ä¿¡æ¯å­˜å‚¨åœ¨digitStruct.matæ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯ç›´æ¥ç»˜åˆ¶åœ¨æ•°æ®é›†ä¸­çš„å›¾åƒä¸Šã€‚ä»¥<code>.mat</code>ç»“å°¾çš„æ–‡ä»¶æ˜¯matlabä¸“ç”¨æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨pythonçš„scipyåº“æ‰“å¼€ï¼Œå†…éƒ¨è£…çš„æ˜¯ç±»ä¼¼jsonçš„å­—å…¸ã€‚</p><p>digitStructä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æœ‰ä»¥ä¸‹å­—æ®µï¼š</p><ul><li>nameæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå…¶ä¸­åŒ…å«ç›¸åº”å›¾åƒçš„æ–‡ä»¶åã€‚</li><li>bboxæ˜¯ä¸€ä¸ªç»“æ„æ•°ç»„ï¼ŒåŒ…å«å›¾åƒä¸­æ¯ä¸ªæ•°å­—è¾¹ç•Œæ¡†çš„ä½ç½®ï¼Œå¤§å°å’Œæ ‡ç­¾ã€‚</li></ul><p>ä¾‹å¦‚ï¼šdigitStructï¼ˆ300ï¼‰.bboxï¼ˆ2ï¼‰.heightåˆ™æ˜¯ç¬¬300å¼ å›¾ç‰‡ä¸­ç¬¬äºŒä¸ªæ•°å­—è¾¹ç•Œæ¡†çš„é«˜åº¦ã€‚</p><h4 id="ç¬¬äºŒç§æ ¼å¼"><a href="#ç¬¬äºŒç§æ ¼å¼" class="headerlink" title="ç¬¬äºŒç§æ ¼å¼"></a>ç¬¬äºŒç§æ ¼å¼</h4><p>ä¸ºäº†é™ä½éš¾åº¦ï¼Œå°†ä¸Šè¿°ç¬¬ä¸€ç§æ ¼å¼çš„å›¾ç‰‡éƒ½è¢«å‰ªåˆ‡åˆ°åªå‰©ä¸‹æœ‰æ•ˆå­—ç¬¦ï¼Œå¹¶è¢«ç¼©æ”¾è‡³32*32åƒç´ çš„æ ‡å‡†å¤§å°ï¼Œä»¥æ–¹ä¾¿è¯†åˆ«ã€‚å›¾ç‰‡çš„è¾¹ç•Œæ¡†ç»è¿‡é€‚å½“çš„é€‰æ‹©ï¼Œé¿å…å‡ºç°æ‰­æ›²ç­‰çŠ¶å†µã€‚å°½ç®¡å¦‚æ­¤ï¼Œè¿™ç§å¤„ç†è¿˜æ˜¯å¯èƒ½å¯¼è‡´å¼•å…¥ä¸€äº›é”™è¯¯ä¿¡æ¯ã€‚</p><p>train_32x32.matå’Œtest_32x32.matï¼Œ<code>.mat</code>æ–‡ä»¶ä¸­åŒ…å«ä¸¤ä¸ªå˜é‡,Xæ˜¯ä¸€ä¸ª4Dçš„çŸ©é˜µï¼Œç»´åº¦æ˜¯(32,32,3,n),næ˜¯æ•°æ®ä¸ªæ•°,yæ˜¯labelå˜é‡ã€‚çœ‹ä¸€ä¸‹å‰åå¼ å›¾ï¼š</p><pre><code class="lang-python">import scipy.io as sioimport matplotlib.pyplot as pltprint (&#39;Loading Matlab data.&#39;)mat = sio.loadmat(&#39;train_32x32.mat&#39;)data = mat[&#39;X&#39;]label = mat[&#39;y&#39;]for i in range(10):    plt.subplot(2,5,i+1)    plt.title(label[i][0])    plt.imshow(data[...,i])    plt.axis(&#39;off&#39;)plt.show()</code></pre><p><img src="/2020/05/20/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task01%EF%BC%9A%E8%B5%9B%E9%A2%98%E7%90%86%E8%A7%A3/2020-05-30-22-17-20.png" alt></p><h3 id="1-4-æˆç»©è¯„å®šæ–¹å¼"><a href="#1-4-æˆç»©è¯„å®šæ–¹å¼" class="headerlink" title="1.4 æˆç»©è¯„å®šæ–¹å¼"></a>1.4 æˆç»©è¯„å®šæ–¹å¼</h3><p>è¯„ä»·æ ‡å‡†ä¸ºå‡†ç¡®ç‡ã€‚<br>é€‰æ‰‹æäº¤ç»“æœä¸å®é™…å›¾ç‰‡çš„ç¼–ç è¿›è¡Œå¯¹æ¯”ï¼Œä»¥ç¼–ç æ•´ä½“è¯†åˆ«å‡†ç¡®ç‡ä¸ºè¯„ä»·æŒ‡æ ‡ï¼Œç»“æœè¶Šå¤§è¶Šå¥½ï¼Œå…·ä½“è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p><p> Score=ç¼–ç è¯†åˆ«æ­£ç¡®çš„æ•°é‡/æµ‹è¯•é›†å›¾ç‰‡æ•°é‡   </p><h3 id="1-5-ç»“æœæäº¤æ ¼å¼"><a href="#1-5-ç»“æœæäº¤æ ¼å¼" class="headerlink" title="1.5 ç»“æœæäº¤æ ¼å¼"></a>1.5 ç»“æœæäº¤æ ¼å¼</h3><p>æäº¤å‰è¯·ç¡®ä¿é¢„æµ‹ç»“æœçš„æ ¼å¼ä¸sample_submit.csvä¸­çš„æ ¼å¼ä¸€è‡´ï¼Œä»¥åŠæäº¤æ–‡ä»¶åç¼€åä¸ºcsvã€‚<br>å½¢å¼å¦‚ä¸‹ï¼š<br>file_name, file_code<br>0010000.jpg,451<br>0010001.jpg,232<br>0010002.jpg,45<br>0010003.jpg,67<br>0010004.jpg,191<br>0010005.jpg,892 </p><h2 id="2-æ•°æ®è¯»å–"><a href="#2-æ•°æ®è¯»å–" class="headerlink" title="2. æ•°æ®è¯»å–"></a>2. æ•°æ®è¯»å–</h2><p>JSONä¸­æ ‡ç­¾çš„è¯»å–æ–¹å¼ï¼š  </p><pre><code class="lang-python">import jsontrain_json = json.load(open(&#39;../input/train.json&#39;))# æ•°æ®æ ‡æ³¨å¤„ç†def parse_json(d):    arr = np.array([        d[&#39;top&#39;], d[&#39;height&#39;], d[&#39;left&#39;],  d[&#39;width&#39;], d[&#39;label&#39;]    ])    arr = arr.astype(int)    return arrimg = cv2.imread(&#39;../input/train/000000.png&#39;)arr = parse_json(train_json[&#39;000000.png&#39;])plt.figure(figsize=(10, 10))plt.subplot(1, arr.shape[1]+1, 1)plt.imshow(img)plt.xticks([]); plt.yticks([])for idx in range(arr.shape[1]):    plt.subplot(1, arr.shape[1]+1, idx+2)    plt.imshow(img[arr[0, idx]:arr[0, idx]+arr[1, idx],arr[2, idx]:arr[2, idx]+arr[3, idx]])    plt.title(arr[4, idx])    plt.xticks([]); plt.yticks([])</code></pre><p><img src="/2020/05/20/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task01%EF%BC%9A%E8%B5%9B%E9%A2%98%E7%90%86%E8%A7%A3/19.png" alt="19"></p><h2 id="3-è§£é¢˜æ€è·¯"><a href="#3-è§£é¢˜æ€è·¯" class="headerlink" title="3. è§£é¢˜æ€è·¯"></a>3. è§£é¢˜æ€è·¯</h2><p>èµ›é¢˜æ€è·¯åˆ†æï¼šèµ›é¢˜æœ¬è´¨æ˜¯åˆ†ç±»é—®é¢˜ï¼Œéœ€è¦å¯¹å›¾ç‰‡çš„å­—ç¬¦è¿›è¡Œè¯†åˆ«ã€‚ä½†èµ›é¢˜ç»™å®šçš„æ•°æ®å›¾ç‰‡ä¸­ä¸åŒå›¾ç‰‡ä¸­åŒ…å«çš„å­—ç¬¦æ•°é‡ä¸ç­‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚æœ‰çš„å›¾ç‰‡çš„å­—ç¬¦ä¸ªæ•°ä¸º2ï¼Œæœ‰çš„å›¾ç‰‡å­—ç¬¦ä¸ªæ•°ä¸º3ï¼Œæœ‰çš„å›¾ç‰‡å­—ç¬¦ä¸ªæ•°ä¸º4ã€‚ </p><div class="table-container"><table><thead><tr><th>å­—ç¬¦å±æ€§</th><th>å›¾ç‰‡</th></tr></thead><tbody><tr><td>å­—ç¬¦ï¼š42   å­—ç¬¦ä¸ªæ•°ï¼š2</td><td><img src="/2020/05/20/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task01%EF%BC%9A%E8%B5%9B%E9%A2%98%E7%90%86%E8%A7%A3/42.png" alt="æ ‡æ³¨"></td></tr><tr><td>å­—ç¬¦ï¼š241   å­—ç¬¦ä¸ªæ•°ï¼š3</td><td><img src="/2020/05/20/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task01%EF%BC%9A%E8%B5%9B%E9%A2%98%E7%90%86%E8%A7%A3/2411.png" alt="æ ‡æ³¨"></td></tr><tr><td>å­—ç¬¦ï¼š7358   å­—ç¬¦ä¸ªæ•°ï¼š4</td><td><img src="/2020/05/20/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task01%EF%BC%9A%E8%B5%9B%E9%A2%98%E7%90%86%E8%A7%A3/7358.png" alt="æ ‡æ³¨"></td></tr></tbody></table></div><p>å› æ­¤æœ¬æ¬¡èµ›é¢˜çš„éš¾ç‚¹æ˜¯éœ€è¦å¯¹ä¸å®šé•¿çš„å­—ç¬¦è¿›è¡Œè¯†åˆ«ï¼Œä¸ä¼ ç»Ÿçš„å›¾åƒåˆ†ç±»ä»»åŠ¡æœ‰æ‰€ä¸åŒã€‚ä¸ºäº†é™ä½å‚èµ›éš¾åº¦ï¼Œæˆ‘ä»¬æä¾›äº†ä¸€äº›è§£é¢˜æ€è·¯ä¾›å¤§å®¶å‚è€ƒï¼š</p><ul><li>ç®€å•å…¥é—¨æ€è·¯ï¼šå®šé•¿å­—ç¬¦è¯†åˆ«    </li></ul><p>å¯ä»¥å°†èµ›é¢˜æŠ½è±¡ä¸ºä¸€ä¸ªå®šé•¿å­—ç¬¦è¯†åˆ«é—®é¢˜ï¼Œåœ¨èµ›é¢˜æ•°æ®é›†ä¸­å¤§éƒ¨åˆ†å›¾åƒä¸­å­—ç¬¦ä¸ªæ•°ä¸º2-4ä¸ªï¼Œæœ€å¤šçš„å­—ç¬¦    ä¸ªæ•°ä¸º6ä¸ªã€‚<br>å› æ­¤å¯ä»¥å¯¹äºæ‰€æœ‰çš„å›¾åƒéƒ½æŠ½è±¡ä¸º6ä¸ªå­—ç¬¦çš„è¯†åˆ«é—®é¢˜ï¼Œå­—ç¬¦23å¡«å……ä¸º23XXXXï¼Œå­—ç¬¦231å¡«å……ä¸º231XXXã€‚<br><img src="/2020/05/20/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task01%EF%BC%9A%E8%B5%9B%E9%A2%98%E7%90%86%E8%A7%A3/23xxxxxx.png" alt="æ ‡æ³¨">   </p><p>ç»è¿‡å¡«å……ä¹‹åï¼ŒåŸå§‹çš„èµ›é¢˜å¯ä»¥ç®€åŒ–äº†6ä¸ªå­—ç¬¦çš„åˆ†ç±»é—®é¢˜ã€‚åœ¨æ¯ä¸ªå­—ç¬¦çš„åˆ†ç±»ä¸­ä¼šè¿›è¡Œ11ä¸ªç±»åˆ«çš„åˆ†ç±»ï¼Œå‡å¦‚åˆ†ç±»ä¸ºå¡«å……å­—ç¬¦ï¼Œåˆ™è¡¨æ˜è¯¥å­—ç¬¦ä¸ºç©ºã€‚    </p><ul><li>ä¸“ä¸šå­—ç¬¦è¯†åˆ«æ€è·¯ï¼šä¸å®šé•¿å­—ç¬¦è¯†åˆ« </li></ul><p><img src="/2020/05/20/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task01%EF%BC%9A%E8%B5%9B%E9%A2%98%E7%90%86%E8%A7%A3/ä¸å®šé•¿å­—ç¬¦è¯†åˆ«.png" alt="æ ‡æ³¨"> </p><p>åœ¨å­—ç¬¦è¯†åˆ«ç ”ç©¶ä¸­ï¼Œæœ‰ç‰¹å®šçš„æ–¹æ³•æ¥è§£å†³æ­¤ç§ä¸å®šé•¿çš„å­—ç¬¦è¯†åˆ«é—®é¢˜ï¼Œæ¯”è¾ƒå…¸å‹çš„æœ‰CRNNå­—ç¬¦è¯†åˆ«æ¨¡å‹ã€‚<br>åœ¨æœ¬æ¬¡èµ›é¢˜ä¸­ç»™å®šçš„å›¾åƒæ•°æ®éƒ½æ¯”è¾ƒè§„æ•´ï¼Œå¯ä»¥è§†ä¸ºä¸€ä¸ªå•è¯æˆ–è€…ä¸€ä¸ªå¥å­ã€‚   </p><ul><li>ä¸“ä¸šåˆ†ç±»æ€è·¯ï¼šæ£€æµ‹å†è¯†åˆ«</li></ul><p>åœ¨èµ›é¢˜æ•°æ®ä¸­å·²ç»ç»™å‡ºäº†è®­ç»ƒé›†ã€éªŒè¯é›†ä¸­æ‰€æœ‰å›¾ç‰‡ä¸­å­—ç¬¦çš„ä½ç½®ï¼Œå› æ­¤å¯ä»¥é¦–å…ˆå°†å­—ç¬¦çš„ä½ç½®è¿›è¡Œè¯†åˆ«ï¼Œåˆ©ç”¨ç‰©ä½“æ£€æµ‹çš„æ€è·¯å®Œæˆã€‚   </p><p><img src="/2020/05/20/Datawhale%E2%80%94%E2%80%94SVHN%E2%80%94%E2%80%94Task01%EF%BC%9A%E8%B5%9B%E9%A2%98%E7%90%86%E8%A7%A3/æ£€æµ‹.png" alt="IMG"> </p><p>æ­¤ç§æ€è·¯éœ€è¦å‚èµ›é€‰æ‰‹æ„å»ºå­—ç¬¦æ£€æµ‹æ¨¡å‹ï¼Œå¯¹æµ‹è¯•é›†ä¸­çš„å­—ç¬¦è¿›è¡Œè¯†åˆ«ã€‚é€‰æ‰‹å¯ä»¥å‚è€ƒç‰©ä½“æ£€æµ‹æ¨¡å‹SSDæˆ–è€…YOLOæ¥å®Œæˆã€‚    </p><h2 id="4-Baselineæ€è·¯ï¼šå°†ä¸å®šé•¿å­—ç¬¦è½¬æ¢ä¸ºå®šé•¿å­—ç¬¦çš„è¯†åˆ«é—®é¢˜ï¼Œå¹¶ä½¿ç”¨CNNå®Œæˆè®­ç»ƒå’ŒéªŒè¯"><a href="#4-Baselineæ€è·¯ï¼šå°†ä¸å®šé•¿å­—ç¬¦è½¬æ¢ä¸ºå®šé•¿å­—ç¬¦çš„è¯†åˆ«é—®é¢˜ï¼Œå¹¶ä½¿ç”¨CNNå®Œæˆè®­ç»ƒå’ŒéªŒè¯" class="headerlink" title="4. Baselineæ€è·¯ï¼šå°†ä¸å®šé•¿å­—ç¬¦è½¬æ¢ä¸ºå®šé•¿å­—ç¬¦çš„è¯†åˆ«é—®é¢˜ï¼Œå¹¶ä½¿ç”¨CNNå®Œæˆè®­ç»ƒå’ŒéªŒè¯"></a>4. Baselineæ€è·¯ï¼šå°†ä¸å®šé•¿å­—ç¬¦è½¬æ¢ä¸ºå®šé•¿å­—ç¬¦çš„è¯†åˆ«é—®é¢˜ï¼Œå¹¶ä½¿ç”¨CNNå®Œæˆè®­ç»ƒå’ŒéªŒè¯</h2><h3 id="4-1-è¿è¡Œç¯å¢ƒåŠå®‰è£…ç¤ºä¾‹"><a href="#4-1-è¿è¡Œç¯å¢ƒåŠå®‰è£…ç¤ºä¾‹" class="headerlink" title="4.1 è¿è¡Œç¯å¢ƒåŠå®‰è£…ç¤ºä¾‹"></a>4.1 è¿è¡Œç¯å¢ƒåŠå®‰è£…ç¤ºä¾‹</h3><ul><li>è¿è¡Œç¯å¢ƒè¦æ±‚ï¼šPython2/3ï¼ŒPytorch1.xï¼Œå†…å­˜4Gï¼Œæœ‰æ— GPUéƒ½å¯ä»¥ã€‚         </li></ul><p>ä¸‹é¢ç»™å‡ºpython3.7+ torch1.3.1gpuç‰ˆæœ¬çš„ç¯å¢ƒå®‰è£…ç¤ºä¾‹ï¼š      </p><ul><li><p>é¦–å…ˆåœ¨Anacondaä¸­åˆ›å»ºä¸€ä¸ªä¸“é—¨ç”¨äºæœ¬æ¬¡å¤©æ± ç»ƒä¹ èµ›çš„è™šæ‹Ÿç¯å¢ƒã€‚          </p><blockquote><p>$conda create -n py37_torch131 python=3.7      </p></blockquote></li><li><p>æ¿€æ´»ç¯å¢ƒï¼Œå¹¶å®‰è£…pytorch1.3.1                                     </p><blockquote><p>$source activate py37_torch131<br>$conda install pytorch=1.3.1 torchvision cudatoolkit=10.0                     </p></blockquote></li><li><p>é€šè¿‡ä¸‹é¢çš„å‘½ä»¤ä¸€é”®å®‰è£…æ‰€éœ€å…¶å®ƒä¾èµ–åº“     </p><blockquote><p>$pip install jupyter tqdm opencv-python matplotlib pandas                                  </p></blockquote></li><li><p>å¯åŠ¨notebookï¼Œå³å¯å¼€å§‹baselineä»£ç çš„å­¦ä¹                   </p><blockquote><p>$jupyter-notebook   </p></blockquote></li><li><p>å‡è®¾æ‰€æœ‰çš„èµ›é¢˜è¾“å…¥æ–‡ä»¶æ”¾åœ¨../input/ç›®å½•ä¸‹ï¼Œé¦–å…ˆå¯¼å…¥å¸¸ç”¨çš„åŒ…ï¼š</p></li></ul><pre><code class="lang-python">import os, sys, glob, shutil, jsonos.environ[&quot;CUDA_VISIBLE_DEVICES&quot;] = &#39;0&#39;import cv2from PIL import Imageimport numpy as npfrom tqdm import tqdm, tqdm_notebookimport torchtorch.manual_seed(0)torch.backends.cudnn.deterministic = Falsetorch.backends.cudnn.benchmark = Trueimport torchvision.models as modelsimport torchvision.transforms as transformsimport torchvision.datasets as datasetsimport torch.nn as nnimport torch.nn.functional as Fimport torch.optim as optimfrom torch.autograd import Variablefrom torch.utils.data.dataset import Dataset</code></pre><h3 id="4-2-æ­¥éª¤"><a href="#4-2-æ­¥éª¤" class="headerlink" title="4.2 æ­¥éª¤"></a>4.2 æ­¥éª¤</h3><ul><li>èµ›é¢˜æ•°æ®è¯»å–ï¼ˆå°è£…ä¸ºPytorchçš„Datasetå’ŒDataLoderï¼‰</li><li>æ„å»ºCNNæ¨¡å‹ï¼ˆä½¿ç”¨Pytorchæ­å»ºï¼‰</li><li>æ¨¡å‹è®­ç»ƒä¸éªŒè¯</li><li>æ¨¡å‹ç»“æœé¢„æµ‹</li></ul><h4 id="æ­¥éª¤1ï¼šå®šä¹‰å¥½è¯»å–å›¾åƒçš„Dataset"><a href="#æ­¥éª¤1ï¼šå®šä¹‰å¥½è¯»å–å›¾åƒçš„Dataset" class="headerlink" title="æ­¥éª¤1ï¼šå®šä¹‰å¥½è¯»å–å›¾åƒçš„Dataset"></a>æ­¥éª¤1ï¼šå®šä¹‰å¥½è¯»å–å›¾åƒçš„Dataset</h4><pre><code class="lang-python">class SVHNDataset(Dataset):    def __init__(self, img_path, img_label, transform=None):        self.img_path = img_path        self.img_label = img_label         if transform is not None:            self.transform = transform        else:            self.transform = None    def __getitem__(self, index):        img = Image.open(self.img_path[index]).convert(&#39;RGB&#39;)        if self.transform is not None:            img = self.transform(img)        # è®¾ç½®æœ€é•¿çš„å­—ç¬¦é•¿åº¦ä¸º5ä¸ª        lbl = np.array(self.img_label[index], dtype=np.int)        lbl = list(lbl)  + (5 - len(lbl)) * [10]        return img, torch.from_numpy(np.array(lbl[:5]))    def __len__(self):        return len(self.img_path)</code></pre><h4 id="æ­¥éª¤2ï¼šå®šä¹‰å¥½è®­ç»ƒæ•°æ®å’ŒéªŒè¯æ•°æ®çš„Dataset"><a href="#æ­¥éª¤2ï¼šå®šä¹‰å¥½è®­ç»ƒæ•°æ®å’ŒéªŒè¯æ•°æ®çš„Dataset" class="headerlink" title="æ­¥éª¤2ï¼šå®šä¹‰å¥½è®­ç»ƒæ•°æ®å’ŒéªŒè¯æ•°æ®çš„Dataset"></a>æ­¥éª¤2ï¼šå®šä¹‰å¥½è®­ç»ƒæ•°æ®å’ŒéªŒè¯æ•°æ®çš„Dataset</h4><pre><code class="lang-python">train_path = glob.glob(&#39;../input/train/*.png&#39;)train_path.sort()train_json = json.load(open(&#39;../input/train.json&#39;))train_label = [train_json[x][&#39;label&#39;] for x in train_json]print(len(train_path), len(train_label))train_loader = torch.utils.data.DataLoader(    SVHNDataset(train_path, train_label,                transforms.Compose([                    transforms.Resize((64, 128)),                    transforms.RandomCrop((60, 120)),                    transforms.ColorJitter(0.3, 0.3, 0.2),                    transforms.RandomRotation(5),                    transforms.ToTensor(),                    transforms.Normalize([0.485, 0.456, 0.406], [0.229, 0.224, 0.225])    ])),     batch_size=40,     shuffle=True,     num_workers=10,)val_path = glob.glob(&#39;../input/val/*.png&#39;)val_path.sort()val_json = json.load(open(&#39;../input/val.json&#39;))val_label = [val_json[x][&#39;label&#39;] for x in val_json]print(len(val_path), len(val_label))val_loader = torch.utils.data.DataLoader(    SVHNDataset(val_path, val_label,                transforms.Compose([                    transforms.Resize((60, 120)),                    # transforms.ColorJitter(0.3, 0.3, 0.2),                    # transforms.RandomRotation(5),                    transforms.ToTensor(),                    transforms.Normalize([0.485, 0.456, 0.406], [0.229, 0.224, 0.225])    ])),     batch_size=40,     shuffle=False,     num_workers=10,)</code></pre><h4 id="æ­¥éª¤3ï¼šå®šä¹‰å¥½å­—ç¬¦åˆ†ç±»æ¨¡å‹ï¼Œä½¿ç”¨renset18çš„æ¨¡å‹ä½œä¸ºç‰¹å¾æå–æ¨¡å—"><a href="#æ­¥éª¤3ï¼šå®šä¹‰å¥½å­—ç¬¦åˆ†ç±»æ¨¡å‹ï¼Œä½¿ç”¨renset18çš„æ¨¡å‹ä½œä¸ºç‰¹å¾æå–æ¨¡å—" class="headerlink" title="æ­¥éª¤3ï¼šå®šä¹‰å¥½å­—ç¬¦åˆ†ç±»æ¨¡å‹ï¼Œä½¿ç”¨renset18çš„æ¨¡å‹ä½œä¸ºç‰¹å¾æå–æ¨¡å—"></a>æ­¥éª¤3ï¼šå®šä¹‰å¥½å­—ç¬¦åˆ†ç±»æ¨¡å‹ï¼Œä½¿ç”¨renset18çš„æ¨¡å‹ä½œä¸ºç‰¹å¾æå–æ¨¡å—</h4><pre><code class="lang-python">class SVHN_Model1(nn.Module):    def __init__(self):        super(SVHN_Model1, self).__init__()        model_conv = models.resnet18(pretrained=True)        model_conv.avgpool = nn.AdaptiveAvgPool2d(1)        model_conv = nn.Sequential(*list(model_conv.children())[:-1])        self.cnn = model_conv        self.fc1 = nn.Linear(512, 11)        self.fc2 = nn.Linear(512, 11)        self.fc3 = nn.Linear(512, 11)        self.fc4 = nn.Linear(512, 11)        self.fc5 = nn.Linear(512, 11)    def forward(self, img):                feat = self.cnn(img)        # print(feat.shape)        feat = feat.view(feat.shape[0], -1)        c1 = self.fc1(feat)        c2 = self.fc2(feat)        c3 = self.fc3(feat)        c4 = self.fc4(feat)        c5 = self.fc5(feat)        return c1, c2, c3, c4, c5</code></pre><h4 id="æ­¥éª¤4ï¼šå®šä¹‰å¥½è®­ç»ƒã€éªŒè¯å’Œé¢„æµ‹æ¨¡å—"><a href="#æ­¥éª¤4ï¼šå®šä¹‰å¥½è®­ç»ƒã€éªŒè¯å’Œé¢„æµ‹æ¨¡å—" class="headerlink" title="æ­¥éª¤4ï¼šå®šä¹‰å¥½è®­ç»ƒã€éªŒè¯å’Œé¢„æµ‹æ¨¡å—"></a>æ­¥éª¤4ï¼šå®šä¹‰å¥½è®­ç»ƒã€éªŒè¯å’Œé¢„æµ‹æ¨¡å—</h4><pre><code class="lang-python">def train(train_loader, model, criterion, optimizer):    # åˆ‡æ¢æ¨¡å‹ä¸ºè®­ç»ƒæ¨¡å¼    model.train()    train_loss = []    for i, (input, target) in enumerate(train_loader):        if use_cuda:            input = input.cuda()            target = target.cuda()        c0, c1, c2, c3, c4 = model(input)        loss = criterion(c0, target[:, 0]) + \                criterion(c1, target[:, 1]) + \                criterion(c2, target[:, 2]) + \                criterion(c3, target[:, 3]) + \                criterion(c4, target[:, 4])        # loss /= 6        optimizer.zero_grad()        loss.backward()        optimizer.step()        if i % 100 == 0:            print(loss.item())        train_loss.append(loss.item())    return np.mean(train_loss)def validate(val_loader, model, criterion):    # åˆ‡æ¢æ¨¡å‹ä¸ºé¢„æµ‹æ¨¡å‹    model.eval()    val_loss = []    # ä¸è®°å½•æ¨¡å‹æ¢¯åº¦ä¿¡æ¯    with torch.no_grad():        for i, (input, target) in enumerate(val_loader):            if use_cuda:                input = input.cuda()                target = target.cuda()            c0, c1, c2, c3, c4 = model(input)            loss = criterion(c0, target[:, 0]) + \                    criterion(c1, target[:, 1]) + \                    criterion(c2, target[:, 2]) + \                    criterion(c3, target[:, 3]) + \                    criterion(c4, target[:, 4])            # loss /= 6            val_loss.append(loss.item())    return np.mean(val_loss)def predict(test_loader, model, tta=10):    model.eval()    test_pred_tta = None    # TTA æ¬¡æ•°    for _ in range(tta):        test_pred = []        with torch.no_grad():            for i, (input, target) in enumerate(test_loader):                if use_cuda:                    input = input.cuda()                c0, c1, c2, c3, c4 = model(input)                output = np.concatenate([                    c0.data.numpy(),                     c1.data.numpy(),                    c2.data.numpy(),                     c3.data.numpy(),                    c4.data.numpy()], axis=1)                test_pred.append(output)        test_pred = np.vstack(test_pred)        if test_pred_tta is None:            test_pred_tta = test_pred        else:            test_pred_tta += test_pred    return test_pred_tta</code></pre><h4 id="æ­¥éª¤5ï¼šè¿­ä»£è®­ç»ƒå’ŒéªŒè¯æ¨¡å‹"><a href="#æ­¥éª¤5ï¼šè¿­ä»£è®­ç»ƒå’ŒéªŒè¯æ¨¡å‹" class="headerlink" title="æ­¥éª¤5ï¼šè¿­ä»£è®­ç»ƒå’ŒéªŒè¯æ¨¡å‹"></a>æ­¥éª¤5ï¼šè¿­ä»£è®­ç»ƒå’ŒéªŒè¯æ¨¡å‹</h4><pre><code class="lang-python">model = SVHN_Model1()criterion = nn.CrossEntropyLoss()optimizer = torch.optim.Adam(model.parameters(), 0.001)best_loss = 1000.0use_cuda = Falseif use_cuda:    model = model.cuda()for epoch in range(2):    train_loss = train(train_loader, model, criterion, optimizer, epoch)    val_loss = validate(val_loader, model, criterion)    val_label = [&#39;&#39;.join(map(str, x)) for x in val_loader.dataset.img_label]    val_predict_label = predict(val_loader, model, 1)    val_predict_label = np.vstack([        val_predict_label[:, :11].argmax(1),        val_predict_label[:, 11:22].argmax(1),        val_predict_label[:, 22:33].argmax(1),        val_predict_label[:, 33:44].argmax(1),        val_predict_label[:, 44:55].argmax(1),    ]).T    val_label_pred = []    for x in val_predict_label:        val_label_pred.append(&#39;&#39;.join(map(str, x[x!=10])))    val_char_acc = np.mean(np.array(val_label_pred) == np.array(val_label))    print(&#39;Epoch: &#123;0&#125;, Train loss: &#123;1&#125; \t Val loss: &#123;2&#125;&#39;.format(epoch, train_loss, val_loss))    print(val_char_acc)    # è®°å½•ä¸‹éªŒè¯é›†ç²¾åº¦    if val_loss &lt; best_loss:        best_loss = val_loss        torch.save(model.state_dict(), &#39;./model.pt&#39;)</code></pre><p>è®­ç»ƒä¸¤ä¸ª2 Epochåï¼Œè¾“å‡ºçš„è®­ç»ƒæ—¥å¿—ä¸ºï¼š</p><p>Epoch: 0, Train loss: 3.1      Val loss: 3.4 éªŒè¯é›†ç²¾åº¦ï¼š0.3439<br>Epoch: 1, Train loss: 2.1      Val loss: 2.9 éªŒè¯é›†ç²¾åº¦ï¼š0.4346     </p><h4 id="æ­¥éª¤6ï¼šå¯¹æµ‹è¯•é›†æ ·æœ¬è¿›è¡Œé¢„æµ‹ï¼Œç”Ÿæˆæäº¤æ–‡ä»¶"><a href="#æ­¥éª¤6ï¼šå¯¹æµ‹è¯•é›†æ ·æœ¬è¿›è¡Œé¢„æµ‹ï¼Œç”Ÿæˆæäº¤æ–‡ä»¶" class="headerlink" title="æ­¥éª¤6ï¼šå¯¹æµ‹è¯•é›†æ ·æœ¬è¿›è¡Œé¢„æµ‹ï¼Œç”Ÿæˆæäº¤æ–‡ä»¶"></a>æ­¥éª¤6ï¼šå¯¹æµ‹è¯•é›†æ ·æœ¬è¿›è¡Œé¢„æµ‹ï¼Œç”Ÿæˆæäº¤æ–‡ä»¶</h4><pre><code class="lang-python">test_path = glob.glob(&#39;../input/test_a/*.png&#39;)test_path.sort()test_label = [[1]] * len(test_path)print(len(val_path), len(val_label))test_loader = torch.utils.data.DataLoader(    SVHNDataset(test_path, test_label,                transforms.Compose([                    transforms.Resize((64, 128)),                    transforms.RandomCrop((60, 120)),                    # transforms.ColorJitter(0.3, 0.3, 0.2),                    # transforms.RandomRotation(5),                    transforms.ToTensor(),                    transforms.Normalize([0.485, 0.456, 0.406], [0.229, 0.224, 0.225])    ])),     batch_size=40,     shuffle=False,     num_workers=10,)test_predict_label = predict(test_loader, model, 1)test_label = [&#39;&#39;.join(map(str, x)) for x in test_loader.dataset.img_label]test_predict_label = np.vstack([    test_predict_label[:, :11].argmax(1),    test_predict_label[:, 11:22].argmax(1),    test_predict_label[:, 22:33].argmax(1),    test_predict_label[:, 33:44].argmax(1),    test_predict_label[:, 44:55].argmax(1),]).Ttest_label_pred = []for x in test_predict_label:    test_label_pred.append(&#39;&#39;.join(map(str, x[x!=10])))import pandas as pddf_submit = pd.read_csv(&#39;../input/test_A_sample_submit.csv&#39;)df_submit[&#39;file_code&#39;] = test_label_preddf_submit.to_csv(&#39;renset18.csv&#39;, index=None)</code></pre><p><strong>åœ¨è®­ç»ƒå®Œæˆ2ä¸ªEpochåï¼Œæ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šçš„æˆç»©åº”è¯¥åœ¨0.33å·¦å³ã€‚</strong>    </p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>datawhale</tag>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>numpyä¸­çš„einsumä½¿ç”¨æ–¹æ³•</title>
    <link href="/2020/05/19/numpy%E4%B8%AD%E7%9A%84einsum%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    <url>/2020/05/19/numpy%E4%B8%AD%E7%9A%84einsum%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡å°†ä»‹ç»çˆ±å› æ–¯å¦æ±‚å’Œçº¦å®šï¼Œä»¥åŠåœ¨numpyä¸­çš„ä½¿ç”¨<br><!--more---></p><p>numpyé‡Œé¢æœ‰å¾ˆå¤šå¥‡æŠ€æ·«å·§ï¼Œçˆ±å› æ–¯å¦æ±‚å’Œçº¦å®šå°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚</p><p>çˆ±å› æ–¯å¦æ±‚å’Œçº¦å®šèƒ½å¤Ÿå¾ˆæ–¹ä¾¿å’Œç®€ä»‹åœ°è¡¨ç¤ºç‚¹ç§¯ã€å¤–ç§¯ã€è½¬ç½®ã€çŸ©é˜µ-å‘é‡ä¹˜æ³•ã€çŸ©é˜µ-çŸ©é˜µä¹˜æ³•ç­‰ï¼Œè¿™åœ¨æ·±åº¦å­¦ä¹ å…¬å¼æ¨å¯¼ä¸­çš„ç”¨å¤„å¾ˆå¤§ã€‚</p><p>å…¶å®æˆ‘ä¸è®¤ä¸ºeinsumåœ¨numpyä¸­ç”¨å¤„å¾ˆå¤§ï¼Œæˆ‘è®¤ä¸ºå…¶é¡¶å¤šå°±æ˜¯ä¸€ç§ç»Ÿä¸€çš„çŸ©é˜µè¿ç®—å†™æ³•ç½¢äº†ã€‚è¿™ç§æŠ€å·§ï¼Œæ˜¯åœ¨ç‰ºç‰²å¯è¯»æ€§åŸºç¡€ä¸Šï¼Œå¯¹ä»£ç çš„ç®€åŒ–ã€‚è€Œä¸”ç”±äºnumpyå¯¹å…¶ä»–è¿ç®—ä¹Ÿæœ‰è¿›è¡Œä¼˜åŒ–ï¼Œæ‰€ä»¥ä»…å‡­å€Ÿçˆ±å› æ–¯å¦ä¹˜æ•°æ³•è¿˜ä¸ä¸€å®šèƒ½æå‡ä»£ç æ‰§è¡Œæ•ˆç‡ã€‚</p><p>å¯èƒ½æ˜¯æˆ‘è¿˜æ²¡æœ‰ä½“ä¼šåˆ°é«˜ç»´å¼ é‡ç›¸äº’è®¡ç®—æ—¶çš„ç—›è‹¦å§ã€‚</p><p>å…ˆçœ‹ä¸€ä¸‹einsumçš„apiï¼š</p><pre><code class="lang-python">np.einsum(equation, *arr)</code></pre><p>æœ€å¼€å§‹éœ€è¦ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”¨ä»¥æè¿°æƒ³è¦å®Œæˆçš„è®¡ç®—ã€‚åé¢æ˜¯è®¡ç®—éœ€è¦çš„æ“ä½œæ•°ï¼Œä¹Ÿå°±æ˜¯ä½ çš„çŸ©é˜µç­‰ã€‚</p><p>æ¥çœ‹å…·ä½“çš„ä¾‹å­ï¼š</p><h3 id="å¯¹äºå‘é‡"><a href="#å¯¹äºå‘é‡" class="headerlink" title="å¯¹äºå‘é‡"></a>å¯¹äºå‘é‡</h3><pre><code class="lang-python">arr1 = np.arange(5) # 0,1,2,3,4arr2 = np.arange(5) # 0,1,2,3,4</code></pre><ol><li>è®¡ç®—å‘é‡æ‰€æœ‰åˆ†é‡çš„å’Œï¼Œå³<code>np.sum(arr)</code>ã€‚å¦‚ä½•åˆ©ç”¨einsumå®Œæˆï¼Ÿ</li></ol><pre><code class="lang-python">np.einsum(&quot;i-&gt;&quot;, arr) # 10</code></pre><p>åœ¨æ•°å­¦ä¸Šç›¸å½“äºï¼š</p><script type="math/tex; mode=display">c = \sum_{i} a_i,\quad i = 1, 2, \dots</script><ol><li>è®¡ç®—ä¸¤å‘é‡å†…ç§¯ï¼Œå³<code>np.dot(arr1, arr2)</code>æˆ–<code>np.inner(arr1, arr2)</code></li></ol><pre><code class="lang-python"># 0*0 + 1*1 + 2*2 + 3*3 + 4*4np.einsum(&quot;i,i-&gt;&quot;, arr1, arr2) # 30</code></pre><p>åœ¨æ•°å­¦ä¸Šç›¸å½“äºï¼š</p><script type="math/tex; mode=display">c = \sum_{i} a_i \times b_i,\quad i = 1, 2, \dots</script><ol><li>è®¡ç®—ä¸¤å‘é‡é€å…ƒç´ ä¹˜ç§¯ï¼Œå³<code>arr1 * arr2</code></li></ol><pre><code class="lang-python">np.einsum(&quot;i,i-&gt;i&quot;, arr1, arr2) # 0,1,4,9,16</code></pre><p>åœ¨æ•°å­¦ä¸Šç›¸å½“äºï¼š</p><script type="math/tex; mode=display">c_i = a_i \times b_i,\quad i = 1, 2, \dots</script><ol><li>è®¡ç®—ä¸¤å‘é‡å¤–ç§¯ï¼Œå³<code>np.outer(arr1, arr2)</code></li></ol><pre><code class="lang-python">[[ 0  0  0  0  0] [ 0  1  2  3  4] [ 0  2  4  6  8] [ 0  3  6  9 12] [ 0  4  8 12 16]]np.einsum(&quot;i,j-&gt;ij&quot;, arr1, arr2)</code></pre><p>åœ¨æ•°å­¦ä¸Šç›¸å½“äºï¼š</p><script type="math/tex; mode=display">c_{i,j} = a_i \times b_j,\quad i,j = 1, 2, \dots</script><h3 id="å¯¹äºçŸ©é˜µ"><a href="#å¯¹äºçŸ©é˜µ" class="headerlink" title="å¯¹äºçŸ©é˜µ"></a>å¯¹äºçŸ©é˜µ</h3><pre><code class="lang-python">A = np.arange(4).reshape(2,2)B = np.arange(4,8).reshape(2,2)[[0 1] [2 3]][[4 5] [6 7]]</code></pre><ol><li>è®¡ç®—çŸ©é˜µè½¬ç½®ï¼Œå³<code>A.T</code></li></ol><pre><code class="lang-python">[[0 2] [1 3]]print(np.einsum(&quot;ij-&gt;ji&quot;, A))</code></pre><p>åœ¨æ•°å­¦ä¸Šç›¸å½“äºï¼š</p><script type="math/tex; mode=display">c_{i,j} = a_{j,i},\quad i,j = 1, 2, \dots</script><ol><li>è®¡ç®—çŸ©é˜µå„å…ƒç´ æ±‚å’Œï¼Œå³<code>np.sum(A)</code></li></ol><pre><code class="lang-python">6print(np.einsum(&quot;ij-&gt;&quot;, A))</code></pre><p>åœ¨æ•°å­¦ä¸Šç›¸å½“äºï¼š</p><script type="math/tex; mode=display">c = \sum_{i}\sum_{j}a_{i,j},\quad i,j = 1, 2, \dots</script><ol><li>è®¡ç®—çŸ©é˜µæŒ‰åˆ—æ±‚å’Œï¼Œå³<code>np.sum(A, axis=0)</code></li></ol><pre><code class="lang-python">[2 4]print(np.einsum(&quot;ij-&gt;j&quot;, A))</code></pre><p>åœ¨æ•°å­¦ä¸Šç›¸å½“äºï¼š</p><script type="math/tex; mode=display">c_{j} = \sum_{i}a_{i,j},\quad i,j = 1, 2, \dots</script><ol><li>è®¡ç®—çŸ©é˜µæŒ‰è¡Œæ±‚å’Œï¼Œå³<code>np.sum(A, axis=1)</code></li></ol><pre><code class="lang-python">[1 5]print(np.einsum(&quot;ij-&gt;i&quot;, A))</code></pre><p>åœ¨æ•°å­¦ä¸Šç›¸å½“äºï¼š</p><script type="math/tex; mode=display">c_{i} = \sum_{j}a_{i,j},\quad i,j = 1, 2, \dots</script><ol><li>æ±‚çŸ©é˜µå¯¹è§’çº¿å…ƒç´ ï¼Œå³<code>np.diag(A)</code></li></ol><pre><code class="lang-python">[0 3]print(np.einsum(&quot;ii-&gt;i&quot;, A))</code></pre><p>åœ¨æ•°å­¦ä¸Šç›¸å½“äºï¼š</p><script type="math/tex; mode=display">c_{i} = a_{i,i},\quad i = 1, 2, \dots</script><ol><li>è®¡ç®—çŸ©é˜µçš„è¿¹ï¼Œå³å¯¹è§’çº¿å…ƒç´ å’Œï¼Œå³<code>np.trace(A)</code></li></ol><pre><code class="lang-python">3print(np.einsum(&quot;ii-&gt;&quot;, A))</code></pre><p>åœ¨æ•°å­¦ä¸Šç›¸å½“äºï¼š</p><script type="math/tex; mode=display">c = \sum_{i}a_{i,i},\quad i = 1, 2, \dots</script><ol><li>è®¡ç®—ä¸¤çŸ©é€å…ƒç´ ä¹˜ç§¯ï¼Œå³<code>A*B</code></li></ol><pre><code class="lang-python">[[ 0  5] [12 21]] print(np.einsum(&quot;ij,ij-&gt;ij&quot;, A, B))</code></pre><p>åœ¨æ•°å­¦ä¸Šç›¸å½“äºï¼š</p><script type="math/tex; mode=display">c_{i,j} = a_{i,j} \times b_{i,j}, i,j = 1, 2, \dots</script><ol><li>è®¡ç®—<code>A*B.T</code></li></ol><pre><code class="lang-python">[[ 0  6] [10 21]]print(np.einsum(&quot;ij,ji-&gt;ij&quot;, A, B))</code></pre><p>åœ¨æ•°å­¦ä¸Šç›¸å½“äºï¼š</p><script type="math/tex; mode=display">c_{i,j} = a_{i,j} \times b_{j,i}, i,j = 1, 2, \dots</script><ol><li>è®¡ç®—ä¸¤çŸ©é˜µä¹˜ç§¯<code>np.dot(A, B)</code></li></ol><pre><code class="lang-python">[[ 6  7] [26 31]]print(np.einsum(&quot;ij,jk-&gt;ik&quot;, A, B))</code></pre><p>åœ¨æ•°å­¦ä¸Šç›¸å½“äºï¼š</p><script type="math/tex; mode=display">c_{i,k} = a_{i,j} \times b_{j,k}, i,j = 1, 2, \dots</script><p>åœä¸€ä¸‹ï¼Œåœä¸€ä¸‹ã€‚</p><p><img src="/2020/05/19/numpy%E4%B8%AD%E7%9A%84einsum%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/2020-05-20-09-45-48.png" alt></p><p>ä½ ä»¬æ‡‚äº†å—ï¼Ÿåæ­£æˆ‘æ²¡æœ‰ã€‚ç½‘ä¸Šçš„æ–‡ç« æŒ‡æœ›ç€æˆ‘ä»¬å…‰çœ‹ä¾‹å­å°±èƒ½å­¦ä¼šï¼Œè¿™æ˜¯æŠŠæˆ‘ä»¬éƒ½å½“æˆæ¨¡å‹è®­ç»ƒäº†å—ï¼Ÿ</p><p>ä»”ç»†çœ‹ä¸€ä¸‹ä¸Šé¢çš„ä¸¤ä¸ªä¾‹å­ï¼Œå…¶å®æ¯ä¸ªequationéƒ½æ‹¥æœ‰ä¸€ä¸ªç®­å¤´<code>-&gt;</code>ã€‚å¯¹åº”æ•°å­¦å…¬å¼ä¸éš¾å¾—å‡ºï¼Œç®­å¤´å·¦è¾¹å¯¹åº”æ•°å­¦å…¬å¼å³è¾¹ï¼Œç®­å¤´å³è¾¹å¯¹åº”æ•°å­¦å…¬å¼å·¦è¾¹ã€‚</p><p>æ¯”å¦‚è¿™ä¸ªå¼å­ï¼š</p><pre><code class="lang-python">np.einsum(&quot;ij,ji-&gt;i&quot;, A, B)</code></pre><p><code>&quot;ij,ji-&gt;i&quot;</code>è§£é‡Šæˆè‡ªç„¶è¯­è¨€ï¼šå°†Aä¸­ç¬¬<code>&#123;i,j&#125;</code>ä¸ªå…ƒç´ ä¸Bä¸­ç¬¬<code>&#123;j,i&#125;</code>ä¸ªå…ƒç´ ç›¸ä¹˜ï¼ˆé€—å·ç†è§£æˆç›¸ä¹˜ï¼‰ï¼Œç»“æœä¸­æ²¡æœ‰jåˆ†é‡ï¼Œåªæœ‰iåˆ†é‡ï¼Œæ‰€ä»¥æ‰€æœ‰jåˆ†é‡æ±‚å’Œã€‚</p><p>å°±æ˜¯å¯¹åº”è¿™ä¸ªæ•°å­¦å…¬å¼ï¼š</p><script type="math/tex; mode=display">c_i = \sum_{j}a_{i,j}\times b_{j,i}</script><p>å®é™…å«ä¹‰ä»£è¡¨ï¼š<code>np.sum(A*B.T, axis=1)</code></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>numpy</tag>
      
      <tag>einsum</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>numpyä¸­axisçš„ç®€å•ç†è§£</title>
    <link href="/2020/05/19/numpy%E4%B8%ADaxis%E7%9A%84%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3/"/>
    <url>/2020/05/19/numpy%E4%B8%ADaxis%E7%9A%84%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡å°†ä»‹ç»numpyä¸­çš„axis<br><!--more---></p><p>æˆ‘å¯¹äºnumpyä¸­çš„axisçš„ç†è§£ï¼Œä¸€ç›´å¤„äºä¼¼æ‡‚éæ‡‚ã€ä¼¼æ˜¯è€Œéçš„çŠ¶æ€ã€‚çœ‹åˆ°ç½‘ä¸Šå¤§ç¥çš„æ–‡ç« ï¼Œä¹Ÿåªèƒ½ç‚¹ä¸ªèµä¹‹åï¼Œè¯¥ä¸ä¼šè¿˜æ˜¯ä¸ä¼šã€‚æ¯æ¬¡çœ‹å®Œåšå®¢ï¼Œéƒ½ä¼šè§‰å¾—è‡ªå·±æ‡‚äº†ï¼›ä½†æ˜¯æ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™ï¼Œåˆè¦æƒ³è€åŠå¤©æ‰è¡Œã€‚å› æ­¤ä»Šå¤©æˆ‘æƒ³å€Ÿæ­¤æœºä¼šï¼Œå½»åº•æ‰«æ¸…ä½¿ç”¨numpyæ—¶ï¼Œaxisçš„éšœç¢ã€‚</p><p>åœ¨numpyä¸­ï¼Œæ•°æ®çš„åŸºæœ¬ç±»å‹æ˜¯arrayã€‚arrayæœ‰ä¸ªåŸºæœ¬çš„æ•°æ®å±æ€§ï¼Œæ˜¯å®ƒçš„ç»´åº¦ã€‚</p><p>æ¯”å¦‚ä¸‹é¢çš„è¿™ä¸ªarrayï¼Œåœ¨é€»è¾‘ä¸Šæ¥çœ‹è¿™å°±æ˜¯ä¸ª2ç»´çš„æ•°æ®ï¼Œæ˜¯ä¸€ä¸ªçŸ©é˜µã€‚</p><pre><code class="lang-python">A = np.random.randint(0, 19, 9).reshape(3, 3)print(A)[[12 15  0] [ 3  3  7] [ 9 18  4]]</code></pre><p>æ¥ä¸‹æ¥æˆ‘è¦å¯¹å…¶ä¸­çš„å…ƒç´ è¿›è¡Œæ±‚å’Œã€‚</p><pre><code class="lang-python">print(np.sum(A))print(np.sum(A, axis=0))print(np.sum(A, axis=1))71[24 36 11][27 13 31]</code></pre><p>æ˜¾ç„¶ï¼Œç¬¬ä¸€ä¸ªsumæ˜¯å¯¹æ‰€æœ‰å…ƒç´ ç´¯åŠ ã€‚ç¬¬äºŒä¸ªå‚æ•°ä¸ºaxis=0çš„æ±‚å’Œï¼Œåˆ™æ˜¯è¿™æ ·è®¡ç®—çš„ï¼š</p><p><code>A[0][X] + A[1][X] + A[2][X]</code><br><code>--|---------|---------|----</code></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œaxis=0æ„å‘³ç€åœ¨æ±‚å’Œçš„è¿‡ç¨‹ä¸­ï¼Œåªæœ‰Açš„ç¬¬0ä¸ªåˆ†é‡ä¼šå˜åŒ–ï¼Œå°†ç¬¬0ä¸ªåˆ†é‡çš„æ‰€æœ‰æƒ…å†µç©·ä¸¾å‡ºæ¥ï¼Œå†ä½œä¸ºè¢«æ“ä½œå…ƒç´ ï¼Œæ±‚å’Œä¹‹ã€‚</p><p>ç¬¬0ä¸ªåˆ†é‡çš„å…ƒç´ è®¡ç®—å®Œæ¯•ã€å¾—åˆ°ä¸€ä¸ªç»“æœæ—¶ï¼Œè®¡ç®—å¹¶æ²¡æœ‰ç»“æŸï¼Œå› ä¸ºæˆ‘ä»¬çš„Xè¿˜æœ‰å¾ˆå¤šç§å¯èƒ½ã€‚</p><p>åŒç†ï¼Œaxis=1æ—¶ï¼Œå˜åŒ–çš„åªæœ‰Açš„ç¬¬1ä¸ªï¼ˆä»é€»è¾‘ä¸Šè®²æ˜¯ç¬¬äºŒä¸ªï¼‰åˆ†é‡æœ‰å˜åŒ–ï¼š</p><p><code>A[X][0] + A[X][1] + A[X][2]</code><br><code>-----|---------|---------|-</code></p><p>æŠŠè¯¥ç»“è®ºæ¨å¹¿åˆ°æ›´é«˜ç»´åº¦çš„æ•°æ®ä¹Ÿä¸ä¼šæœ‰é—®é¢˜ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸ª4ç»´çš„å¼ é‡æ˜¯å¦‚ä½•æŒ‡å®šaxisæ±‚å’Œçš„ï¼š</p><pre><code class="lang-python">np.random.seed(0)A = np.random.randint(0, 9, 16).reshape(2, 2, 2, 2)print(&quot;orignal A&quot;, A)orignal A [[[[5 0]   [3 3]]  [[7 3]   [5 2]]] [[[4 7]   [6 8]]  [[8 1]   [6 7]]]]</code></pre><pre><code class="lang-python">print(np.sum(A))75</code></pre><pre><code class="lang-python">print(np.sum(A, axis=0))# ç›¸å½“äºprint(A[0,:,:,:]+A[1,:,:,:])[[[ 9  7]  [ 9 11]] [[15  4]  [11  9]]]</code></pre><pre><code class="lang-python">print(np.sum(A, axis=1))# ç›¸å½“äºprint(A[:,0,:,:] + A[:,1,:,:])[[[12  3]  [ 8  5]] [[12  8]  [12 15]]]</code></pre><pre><code class="lang-python">print(np.sum(A, axis=2))# ç›¸å½“äºprint(A[:,:,0,:] + A[:,:,1,:])[[[ 8  3]  [12  5]] [[10 15]  [14  8]]]</code></pre><pre><code class="lang-python">print(np.sum(A, axis=3))# ç›¸å½“äºprint(A[:,:,:,0]+A[:,:,:,1])[[[ 5  6]  [10  7]] [[11 14]  [ 9 13]]]</code></pre>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>numpy</tag>
      
      <tag>axis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é—­åŒ…çš„è¿·æ€</title>
    <link href="/2020/05/19/%E9%97%AD%E5%8C%85%E7%9A%84%E8%BF%B7%E6%80%9D/"/>
    <url>/2020/05/19/%E9%97%AD%E5%8C%85%E7%9A%84%E8%BF%B7%E6%80%9D/</url>
    
    <content type="html"><![CDATA[<p>é—­åŒ…æ˜¯ä»€ä¹ˆï¼Ÿå¦‚æœä½ ä¸æˆ‘æœ‰åŒæ ·çš„ç–‘é—®ï¼Œæ•¬è¯·é˜…è¯»ã€‚<br><!--more---></p><h2 id="ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ"></a><a href="https://www.ibm.com/developerworks/cn/linux/l-cn-closure/#note_1">ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ</a></h2><p>è¿™ä¸ªé—®é¢˜å›°æ‰°äº†æˆ‘å¾ˆé•¿æ—¶é—´ã€‚</p><p>ç¬¬ä¸€æ¬¡æ¥è§¦é—­åŒ…è¿™ä¸ªæ¦‚å¿µï¼Œæ˜¯åœ¨â€œå½¢å¼è¯­è¨€â€è¿™é—¨è¯¾ä¸Šã€‚å¥½åƒâ€œç¦»æ•£æ•°å­¦â€è¿™é—¨è¯¾ä¸Šä¹Ÿæ•™è¿‡é—­åŒ…ï¼Œä½†æ˜¯è¿™éƒ½ä¸é‡è¦ï¼Œå› ä¸ºæˆ‘ä»¬è¿™é‡Œè®¨è®ºçš„é—­åŒ…ä¸æ•°å­¦ä¸Šçš„é—­åŒ…æ²¡ä»€ä¹ˆå…³ç³»ã€‚æœ¬æ–‡è®¨è®ºçš„é—­åŒ…ï¼Œæ˜¯ç¨‹åºè®¾è®¡è¯­è¨€ä¸­çš„é—­åŒ…ã€‚</p><h3 id="ä¸“ä¸šæ¦‚å¿µï¼š"><a href="#ä¸“ä¸šæ¦‚å¿µï¼š" class="headerlink" title="ä¸“ä¸šæ¦‚å¿µï¼š"></a>ä¸“ä¸šæ¦‚å¿µï¼š</h3><p><img src="/2020/05/19/%E9%97%AD%E5%8C%85%E7%9A%84%E8%BF%B7%E6%80%9D/2020-05-19-15-20-04.png" alt></p><p>é—­åŒ…æ˜¯åœ¨å…¶è¯æ³•ä¸Šä¸‹æ–‡ä¸­å¼•ç”¨äº†è‡ªç”±å˜é‡çš„<strong>å‡½æ•°</strong>ï¼Œè‡ªç”±å˜é‡æ˜¯æŒ‡é™¤å±€éƒ¨å˜é‡ä»¥å¤–çš„å˜é‡ã€‚</p><p>åˆæœ‰ä¸€ç§è¯´æ³•æ˜¯é—­åŒ…<strong>ä¸æ˜¯å‡½æ•°</strong>ï¼Œè€Œæ˜¯ç”±å‡½æ•°å’Œä¸å…¶ç›¸å…³çš„å¼•ç”¨ç¯å¢ƒç»„åˆè€Œæˆçš„å®ä½“ã€‚</p><p><a href="https://zh.wikipedia.org/wiki/%E9%97%AD%E5%8C%85_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6">ç»´åŸºç™¾ç§‘</a>)çš„è§£é‡Šï¼šé—­åŒ…åœ¨å®ç°ä¸Šæ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œå®ƒå­˜å‚¨äº†ä¸€ä¸ªå‡½æ•°ï¼ˆé€šå¸¸æ˜¯å…¶å…¥å£åœ°å€ï¼‰å’Œä¸€ä¸ªå…³è”çš„ç¯å¢ƒï¼ˆç›¸å½“äºä¸€ä¸ªç¬¦å·æŸ¥æ‰¾è¡¨ï¼‰ã€‚</p><p>çœ‹åˆ°è¿™é‡Œæˆ‘å½»åº•æ‡µé€¼äº†ã€‚æ˜¯æ˜¯æ˜¯ï¼Œä½ ä»¬è¯´çš„éƒ½å¯¹ï¼<br><img src="/2020/05/19/%E9%97%AD%E5%8C%85%E7%9A%84%E8%BF%B7%E6%80%9D/2020-05-18-14-59-42.png" alt></p><p>èº«ä¸ºæ–°æ‰‹å°ç™½ï¼Œæˆ‘éœ€è¦é€šè¿‡åˆ¤æ–­é—­åŒ…æ˜¯åšä»€ä¹ˆçš„ï¼Œä¹‹åå†è®¨è®ºä¸ºä»€ä¹ˆå«åšé—­åŒ…ã€‚</p><h2 id="é—­åŒ…æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#é—­åŒ…æœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="é—­åŒ…æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>é—­åŒ…æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h2><p>å¦‚æœä½ æ˜¯ä»C++æ¥çš„ï¼Œé‚£ä¹ˆé˜…è¯»ä¸‹é¢æ²¡æœ‰ä»€ä¹ˆéšœç¢ã€‚å¦‚æœä¸æ˜¯ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œåæ­£å„ç§è¯­è¨€çš„è®¾è®¡åŸç†éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œåªè¦ä½ æŒæ¡çš„è¯­è¨€æœ‰<strong>åŒ¿åå‡½æ•°</strong>çš„åŠŸèƒ½å³å¯ã€‚</p><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒC++11æ ‡å‡†å¼•å…¥äº†lambdaè¡¨è¾¾å¼ï¼Œå°±æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°é•¿æˆè¿™æ ·ï¼š</p><pre><code class="lang-cpp">[](const string&amp;a, const string&amp;b) &#123;    return a.size() &lt; b.size();&#125;;</code></pre><p>ä¸Šé¢çš„è¿™ä¸ªåŒ¿åå‡½æ•°è´Ÿè´£æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¤§å°ã€‚åŒ¿åå‡½æ•°çš„å¥½å¤„å°±æ˜¯èŠ‚çœä»£ç ã€‚</p><p>æ¯”å¦‚æˆ‘ç°åœ¨æƒ³è¦å®ç°è‡ªå®šä¹‰å­—ç¬¦ä¸²æ’åºå‡½æ•°ï¼ŒæŒ‰ç…§å­—ç¬¦ä¸²é•¿åº¦ä»å°åˆ°å¤§æ’åºï¼Œè€Œä¸æ˜¯æŒ‰ç…§å­—å…¸æ’åºã€‚è¿™ä¸ªæ’åºå‡½æ•°å°±å¯ä»¥ç”¨lambdaè¡¨è¾¾å¼å®šä¹‰ã€‚</p><pre><code class="lang-cpp">stable_sort(words.begin(), words.end(),             [](const string&amp;a, const string&amp;b) &#123;                return a.size() &lt; b.size();&#125;;)</code></pre><p>lambdaå‰é¢çš„ä¸­æ‹¬å·æ˜¯å¹²å•¥çš„ï¼Ÿæ˜¯ç”¨æ¥æ•è·å¤–éƒ¨å˜é‡çš„ã€‚æ¯”å¦‚æˆ‘æƒ³åˆ¤æ–­å­—ç¬¦ä¸²é•¿åº¦æœ‰æ²¡æœ‰å¤§äºé˜ˆå€¼thresholdï¼Œè¿™ä¸ªthresholdæ˜¯åœ¨å‡½æ•°å¤–é¢å®šä¹‰çš„ã€‚æŒ‰ç…§C++çš„è¯­æ³•ï¼Œä¸€èˆ¬çš„å‡½æ•°ä¸èƒ½è®¿é—®å‡½æ•°å¤–éƒ¨çš„å˜é‡ã€‚ä½†æ˜¯lambdaå¯ä»¥æŠŠå¤–éƒ¨çš„å˜é‡â€œæ•è·â€ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š</p><pre><code class="lang-cpp">int threshold = 10;[threshold](const string&amp; a) &#123;    return a.size() &gt; threshold;&#125;;</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªlambdaä¸ä½†ä½¿ç”¨äº†lambdaå†…éƒ¨çš„å˜é‡å’Œå‚æ•°ï¼Œè€Œä¸”è¿˜â€œå·å–â€äº†ä¸å±äºå®ƒçš„å…¨å±€å˜é‡thresholdã€‚<strong>æˆ‘ä»¬æŠŠlambdaè¡¨è¾¾å¼å®šä¹‰çš„è¿™ç§å‡½æ•°å«åšé—­åŒ…ã€‚</strong></p><h2 id="ä¸ºä»€ä¹ˆå«åšé—­åŒ…ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå«åšé—­åŒ…ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå«åšé—­åŒ…ï¼Ÿ"></a>ä¸ºä»€ä¹ˆå«åšé—­åŒ…ï¼Ÿ</h2><p>æœ‰äººè¯´è¿™ä¸æ˜¯è„‘å­æœ‰å‘å—ï¼Œé—­åŒ…å“ªé‡Œâ€œé—­â€äº†ï¼Ÿè¿™æ˜æ˜æ¯”æ™®é€šå‡½æ•°æ›´â€œå¼€æ”¾â€å¥½å§ï¼Ÿæ˜¯ä¸æ˜¯åå­—èµ·é”™äº†ï¼Ÿ</p><p>å…¶å®ä¸ç„¶ã€‚é—­åŒ…å¹¶ä¸æ˜¯å¯¹å†…éƒ¨å°é—­ï¼Œè€Œæ˜¯ç»™å½“å‰å¤–éƒ¨ç¯å¢ƒå–äº†ä¸ªå¿«ç…§ï¼Œç›¸å½“äºå°é—­äº†å¤–éƒ¨çŠ¶æ€ã€‚ä¸‹é¢æ˜¯è‘—åè¥å…»å¿«çº¿ç»é”€å•†vczhçš„å›ç­”ï¼š</p><p><img src="/2020/05/19/%E9%97%AD%E5%8C%85%E7%9A%84%E8%BF%B7%E6%80%9D/2020-05-19-15-40-47.png" alt></p><h2 id="Pythonä¸­çš„é—­åŒ…"><a href="#Pythonä¸­çš„é—­åŒ…" class="headerlink" title="Pythonä¸­çš„é—­åŒ…"></a>Pythonä¸­çš„é—­åŒ…</h2><p>Pythonä¸­å†™é—­åŒ…å°±è¦æ–¹ä¾¿å¤šäº†ï¼Œæ¯•ç«ŸPythonçš„è®¾è®¡å“²å­¦å°±æ˜¯â€œä¸€åˆ‡çš†å¯¹è±¡â€ï¼Œå‡½æ•°éƒ½æ˜¯å¯¹è±¡ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šåˆ©ç”¨é—­åŒ…å’Œç”Ÿæˆå™¨è¿”å›ä¸€ä¸ªè®¡æ•°å™¨å‡½æ•°ï¼Œæ¯æ¬¡è°ƒç”¨å®ƒè¿”å›é€’å¢æ•´æ•°ã€‚</p><pre><code class="lang-python"># åˆ©ç”¨é—­åŒ…å’Œç”Ÿæˆå™¨è¿”å›ä¸€ä¸ªè®¡æ•°å™¨å‡½æ•°ï¼Œæ¯æ¬¡è°ƒç”¨å®ƒè¿”å›é€’å¢æ•´æ•°ã€‚def createCounter():        [...]# æ£€éªŒéƒ¨åˆ†counterA = createCounter()print(counterA(), counterA(), counterA(), counterA(), counterA()) # 1 2 3 4 5counterB = createCounter()if [counterB(), counterB(), counterB(), counterB()] == [1, 2, 3, 4]:    print(&#39;æµ‹è¯•é€šè¿‡!&#39;)else:    print(&#39;æµ‹è¯•å¤±è´¥!&#39;)</code></pre><p>ä½ æƒ³æ€ä¹ˆå†™ï¼Ÿæˆ‘èƒ½æƒ³åˆ°çš„ï¼Œå°±æ˜¯åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œæ¯æ¬¡è°ƒç”¨ç”Ÿæˆä¸€ä¸ªæ•´æ•°ï¼›ç„¶ååˆ©ç”¨nextå‡½æ•°æ„é€ ä¸€ä¸ªè¿­ä»£å™¨ï¼Œæ¯æ¬¡è°ƒç”¨è®©è¿™ä¸ªæ•´æ•°+1ï¼Œæœ€åè¿”å›è¿™ä¸ªè¿­ä»£å™¨ã€‚</p><pre><code class="lang-python">def createCounter():        def counter():        &#39;&#39;&#39;å®šä¹‰ä¸€ä¸ªç”Ÿæˆå™¨        &#39;&#39;&#39;        n = 0        while 1:            n += 1            yield n    g = counter() # å–ç”Ÿæˆå™¨    def g_fn():        &#39;&#39;&#39;å®šä¹‰ä¸€ä¸ªè¿­ä»£å™¨ï¼Œåˆ©ç”¨nextè¿­ä»£ç”Ÿæˆå™¨g        &#39;&#39;&#39;        return next(g)    return g_fn # è¿”å›è¿™ä¸ªè¿­ä»£å™¨</code></pre><p>æˆ‘ä»¬çœ‹ä¸€ä¸‹ä¸Šé¢è¿™ä¸ªå‡½æ•°ï¼Œå‡½æ•°å†…éƒ¨å®šä¹‰çš„<code>g_fn</code>å‡½æ•°ï¼Œå®ƒä½¿ç”¨äº†å¤–éƒ¨å˜é‡<code>g</code>ï¼Œä¹Ÿå°±æ˜¯è¯´<code>g_fn</code>æ˜¯ä¸ªé—­åŒ…ã€‚</p><h2 id="æ€»ç»“ä¸€ä¸‹ï¼š"><a href="#æ€»ç»“ä¸€ä¸‹ï¼š" class="headerlink" title="æ€»ç»“ä¸€ä¸‹ï¼š"></a>æ€»ç»“ä¸€ä¸‹ï¼š</h2><p><strong>å¼•ç”¨äº†è‡ªç”±å˜é‡çš„å‡½æ•°ï¼Œå°±æ˜¯é—­åŒ…ã€‚</strong></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>Python</tag>
      
      <tag>closure</tag>
      
      <tag>lambda</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonè£…é¥°å™¨ä¸ºä»€ä¹ˆè¿™ä¹ˆéš¾ä»¥ç†è§£</title>
    <link href="/2020/05/18/Python%E8%A3%85%E9%A5%B0%E5%99%A8%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%99%E4%B9%88%E9%9A%BE%E4%BB%A5%E7%90%86%E8%A7%A3/"/>
    <url>/2020/05/18/Python%E8%A3%85%E9%A5%B0%E5%99%A8%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%99%E4%B9%88%E9%9A%BE%E4%BB%A5%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡å°†ä»‹ç»Pythonä¸­çš„è£…é¥°å™¨ï¼Œä»¥åŠè®¾è®¡æ¨¡å¼ä¸­çš„è£…é¥°æ¨¡å¼ã€‚<br><!--more---></p><p>ä»C/C++æˆ–Javaè¿ç§»æ¥çš„æ–°Pythonç¨‹åºå‘˜ä¸€å®šä¼šå¯¹Pythonçš„è£…é¥°å™¨åŠŸèƒ½æ„Ÿåˆ°é™Œç”Ÿï¼Œå°¤å…¶æ˜¯åœ¨å‡½æ•°å®šä¹‰å‰åŠ <code>@func</code>è¿™ä¸€åŠŸèƒ½æ„Ÿåˆ°å›°æƒ‘ã€‚è£…é¥°å™¨åˆ°åº•æ˜¯ä»€ä¹ˆï¼ŸPythonèƒŒååšäº†ä»€ä¹ˆï¼Ÿåœ¨ä»”ç»†ç ”ç©¶ç½‘ä¸Šçš„èµ„æ–™ä¹‹åï¼Œæˆ‘æ€»ç»“äº†æ­¤æ–‡ï¼Œä¸å¤§å®¶åˆ†äº«ã€‚</p><p><a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017451662295584">å‚è€ƒæ–‡ç« </a></p><h2 id="1-æå‡ºéœ€æ±‚"><a href="#1-æå‡ºéœ€æ±‚" class="headerlink" title="1. æå‡ºéœ€æ±‚"></a>1. æå‡ºéœ€æ±‚</h2><p>æˆ‘ä»¬æƒ³åœ¨å‡½æ•°å¢åŠ ä¸€ç‚¹åŠŸèƒ½ï¼Œæ¯”å¦‚æ¯æ¬¡å‡½æ•°æ‰§è¡Œä¹‹å‰æ‰“å°ä¸€æ®µè¯ï¼Œä½†æ˜¯åˆä¸æƒ³æ›´æ”¹å‡½æ•°çš„å®šä¹‰ã€‚</p><p>è¿™ç§æƒ³è¦ç»™åŸæ¥å‡½æ•°å¢åŠ éœ€æ±‚çš„åŒæ—¶ï¼Œä¸ä¿®æ”¹åŸæ¥ä»£ç çš„è¡Œä¸ºï¼Œéå¸¸æœ‰â€œé¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³â€å†…å‘³å„¿ï¼Œå› ä¸ºå®ƒç¬¦åˆâ€œå¼€æ”¾å°é—­åŸåˆ™â€ã€‚</p><p>ç°åœ¨å°±æœ‰è¯·å¤§åé¼é¼çš„è®¾è®¡æ¨¡å¼ä¹‹â€”â€”è£…é¥°å™¨æ¨¡å¼ç™»åœºï¼</p><blockquote><p>è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰å…è®¸å‘ä¸€ä¸ªç°æœ‰çš„å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼Œå®ƒæ˜¯ä½œä¸ºç°æœ‰çš„ç±»çš„ä¸€ä¸ªåŒ…è£…ã€‚</p></blockquote><p><img src="/2020/05/18/Python%E8%A3%85%E9%A5%B0%E5%99%A8%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%99%E4%B9%88%E9%9A%BE%E4%BB%A5%E7%90%86%E8%A7%A3/2020-05-19-17-27-00.png" alt></p><h2 id="2-Pythonä¸­çš„è£…é¥°å™¨æ¨¡å¼"><a href="#2-Pythonä¸­çš„è£…é¥°å™¨æ¨¡å¼" class="headerlink" title="2. Pythonä¸­çš„è£…é¥°å™¨æ¨¡å¼"></a>2. Pythonä¸­çš„è£…é¥°å™¨æ¨¡å¼</h2><p>åœ¨Pythonä¸­å®ç°è£…é¥°å™¨æ¨¡å¼å¾ˆæ–¹ä¾¿ã€‚åœ¨Pythonä¸­ï¼Œæœ‰ä¸ªåŠŸèƒ½æ¨¡å—ç›´æ¥å°±å«è£…é¥°å™¨ã€‚åœ¨Pythonä¸­çš„è£…é¥°å™¨æ˜¯æŒ‡ä¸€ä¸ªè¿”å›å…¶ä»–å‡½æ•°çš„å‡½æ•°ã€‚å¤–éƒ¨çš„é«˜é˜¶å‡½æ•°åœ¨æ‰§è¡Œå†…éƒ¨çš„åŸå‡½æ•°çš„å‰åï¼Œå†ç§è—ä¸€ç‚¹å¹²è´§ï¼Œç„¶åæŠŠä¿®æ”¹åçš„å‡½æ•°å¯¹è±¡èµ‹å€¼ç»™åŸæ¥çš„å‡½æ•°å˜é‡ã€‚è¿™æ ·å°±èƒ½åœ¨ä¸ä¿®æ”¹åŸå‡½æ•°çš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸€äº›åŠŸèƒ½ã€‚</p><p>æ€»ç»“ä¸‹æ¥ï¼Œå®ç°è£…é¥°å™¨ä¸‰æ­¥èµ°ï¼š</p><ol><li>å®šä¹‰åŸå‡½æ•°</li><li>å®šä¹‰é«˜é˜¶å‡½æ•°ï¼Œåœ¨é‡Œé¢é™¤äº†æ‰§è¡ŒåŸå‡½æ•°ä¹‹å¤–ï¼Œå†æ·»åŠ ä¸€äº›åŠŸèƒ½</li><li>å°†é«˜é˜¶å‡½æ•°å¯¹è±¡èµ‹å€¼ä¸ºåŸå‡½æ•°å˜é‡ï¼Œä»¥åè°ƒç”¨åŸå‡½æ•°çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œé«˜é˜¶å‡½æ•°äº†</li></ol><pre><code class="lang-python">def log(func):    def wrapper(*args, **kw):        print(&#39;call %s():&#39; % func.__name__)        return func(*args, **kw)    return wrapper</code></pre><p>ä¸Šé¢çš„å‡½æ•°ï¼Œè¾“å…¥å‚æ•°ä¸ºåŸå‡½æ•°å˜é‡ï¼Œåœ¨å†…éƒ¨æ„é€ äº†ä¸€ä¸ªé«˜é˜¶å‡½æ•°å¯¹è±¡wrapperï¼Œwrapperé‡Œé¢è´Ÿè´£æ‰§è¡Œä¸€ä¸ªprintè¯­å¥ã€‚æœ€åè¿”å›æ„é€ å¥½çš„wrapperã€‚</p><p>ä»¥åæˆ‘ä»¬ä½¿ç”¨<code>func</code>çš„æ—¶å€™ï¼Œåªè¦ä½¿ç”¨<code>log(func)</code>å°±å¯ä»¥åœ¨æ‰§è¡Œ<code>func</code>çš„åŒæ—¶ï¼Œæ‰“å°ä¸€æ®µè¯äº†ã€‚</p><p>çœ‹èµ·æ¥ä¸å’‹åœ°å•Šï¼Œæ¯•ç«Ÿæˆ‘ä»¬è¿˜æ˜¯ä¿®æ”¹äº†ä»£ç ï¼ŒæŠŠ<code>func</code>å…¨éƒ½æ›¿æ¢æˆ<code>log(func)</code>æ‰èƒ½æ‰§è¡Œã€‚</p><p>æˆ–è€…æˆ‘ä»¬æ¥è¿™æ ·ä¸€å¥ï¼š</p><pre><code class="lang-python">func = log(func)</code></pre><p>è¿™ä¸ªlogå‡½æ•°å°±æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œå®ƒç°åœ¨è£…é¥°çš„æ˜¯funcå‡½æ•°ã€‚</p><h2 id="3-Pythonçš„è¯­æ³•ç³–"><a href="#3-Pythonçš„è¯­æ³•ç³–" class="headerlink" title="3. Pythonçš„è¯­æ³•ç³–"></a>3. Pythonçš„è¯­æ³•ç³–</h2><p>å€ŸåŠ©Pythonçš„@è¯­æ³•ï¼ŒæŠŠdecoratorç½®äºå‡½æ•°çš„å®šä¹‰å¤„ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å®Œæˆ<code>func = log(func)</code>çš„æ“ä½œã€‚</p><pre><code class="lang-python">@logdef basic_fun():    print(&quot;basic_func&quot;)</code></pre><p>ä»¥åä½¿ç”¨basic_funcå°±ä¼šé»˜è®¤æ‰§è¡Œlog(basic_func)äº†ã€‚</p><h2 id="4-æ”¹å‡½æ•°å"><a href="#4-æ”¹å‡½æ•°å" class="headerlink" title="4. æ”¹å‡½æ•°å"></a>4. æ”¹å‡½æ•°å</h2><p>Pythonçš„è®¾è®¡æ€æƒ³å°±æ˜¯â€œä¸€åˆ‡çš†å¯¹è±¡â€ï¼Œå°±è¿å‡½æ•°ä¹Ÿä¸ä¾‹å¤–ã€‚æ—¢ç„¶æ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆå¯¹è±¡å¯ä»¥èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚é€šè¿‡å˜é‡ä¹Ÿå¯ä»¥è°ƒç”¨è¯¥å‡½æ•°å¯¹è±¡ã€‚</p><pre><code class="lang-python">def f():    return 0f_obj = f # æ³¨æ„ï¼Œè¿™é‡Œfä¸ºå‡½æ•°åï¼Œä¸åŠ æ‹¬å·åˆ™ä¸ºå°†å‡½æ•°å¯¹è±¡èµ‹å€¼ä¸ºå˜é‡f_res = f() # fåé¢è·Ÿäº†æ‹¬å·ï¼Œåˆ™æ­¤æ—¶æ‰§è¡Œå‡½æ•°ï¼Œå¹¶æŠŠè¿”å›å€¼èµ‹å€¼ç»™å˜é‡</code></pre><p>Pythonæœ‰ä¸ªç‰¹åˆ«æ–¹ä¾¿çš„åŠŸèƒ½ï¼Œé‚£å°±æ˜¯å‡½æ•°å¯¹è±¡å¯ä»¥åœ¨è¿è¡Œæ—¶æ‰“å°è‡ªå·±çš„åå­—ã€‚æ¥ä¸Šé¢çš„ä»£ç ï¼š</p><pre><code class="lang-python">print(f.__name__) # fprint(f_obj.__name__) # æœ¬è´¨ä¸Šè¿˜æ˜¯è°ƒç”¨ä¸Šé¢çš„å‡½æ•°å¯¹è±¡ï¼Œç»“æœä»ä¸ºf</code></pre><p>å‰é¢æˆ‘ä»¬åšäº†èµ‹å€¼æ“ä½œ<code>func = log(func)</code>ï¼Œä½†æ˜¯å…¶å˜é‡ä»£è¡¨çš„å‡½æ•°åç§°å‘ç”Ÿäº†å˜åŒ–ã€‚</p><pre><code class="lang-python">print(func.__name__) # funcfunc = log(func)print(func.__name__) # wrapper</code></pre><p>æˆ‘ä»¬å¸Œæœ›è£…é¥°å™¨å®Œå…¨åŒ…è£¹åŸå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ä»¤å¤–ç•Œç¯å¢ƒæ„Ÿè§‰ä¸åˆ°å†…éƒ¨é€»è¾‘çš„å˜åŒ–ã€‚é‚£ä¹ˆå°±éœ€è¦æˆ‘ä»¬æŠŠå‡½æ•°åå­—ä¹Ÿç»™ä¿æŒä½ã€‚è¿™ä¸ªåŠŸèƒ½ä¸éš¾ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>functools</code>åº“ä¸­è‡ªå¸¦çš„è£…é¥°å™¨<code>wraps</code>å°±å¯ä»¥ä¿æŒå‡½æ•°åç§°äº†ã€‚</p><pre><code class="lang-python">import functoolsdef log(func):    @functools.wraps(func) # å°†è¢«è£…é¥°å‡½æ•°åå˜æˆå‚æ•°ä¸­å‡½æ•°å    def wrapper(*args, **kw):        print(&#39;call %s():&#39; % func.__name__)        return func(*args, **kw)    return wrapper</code></pre><h2 id="5-å¸¦å‚æ•°çš„è£…é¥°å™¨"><a href="#5-å¸¦å‚æ•°çš„è£…é¥°å™¨" class="headerlink" title="5. å¸¦å‚æ•°çš„è£…é¥°å™¨"></a>5. å¸¦å‚æ•°çš„è£…é¥°å™¨</h2><p>åœ¨ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè£…é¥°å™¨ä¹Ÿæ˜¯å¯ä»¥å¸¦å‚æ•°çš„ã€‚è¿™æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿ</p><p>å…¶å®æˆ‘ä»¬ä¸éš¾æƒ³åˆ°ï¼Œåªéœ€è£…é¥°ä¸€ä¸ªè£…é¥°å™¨å³å¯ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªé—®é¢˜ï¼š</p><p><strong>å®ç°log(str)ï¼šåœ¨å‡½æ•°æ¯æ¬¡æ‰§è¡Œå‰æ‰“å°strå’Œå‡½æ•°å</strong></p><pre><code class="lang-python">@log(&#39;end&#39;)def now():    print(np.datetime64(&#39;today&#39;, &#39;D&#39;))&gt;&gt;&gt; now()end now():2019-10-13</code></pre><p>è§£æ³•å¦‚ä¸‹ï¼š</p><pre><code class="lang-python">import functoolsdef log(text):    def decorator(func):        @functools.wraps(func)        def wrapper(*args, **kw):            print(&#39;%s %s():&#39; % (text, func.__name__))            return func(*args, **kw)        return wrapper    return decorator</code></pre><p>ç›¸å½“äº<code>fun = log(&#39;text&#39;)(fun)</code>ï¼Œå®é™…ä¸Šå‡½æ•°å˜æˆäº†<code>wrapper</code><br>ä½†æ˜¯ç”±äº<code>@functools.wraps(func)</code>ï¼Œå‡½æ•°çš„<code>__name__</code>ä¸å˜</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>decorator</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ·±åº¦å­¦ä¹ å·¥ä½œç«™è°ƒç ”--ç»“åˆæ”¿åºœé‡‡è´­ç½‘ä¿¡æ¯</title>
    <link href="/2020/05/11/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B7%A5%E4%BD%9C%E7%AB%99%E8%B0%83%E7%A0%94-%E7%BB%93%E5%90%88%E6%94%BF%E5%BA%9C%E9%87%87%E8%B4%AD%E7%BD%91%E4%BF%A1%E6%81%AF/"/>
    <url>/2020/05/11/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B7%A5%E4%BD%9C%E7%AB%99%E8%B0%83%E7%A0%94-%E7%BB%93%E5%90%88%E6%94%BF%E5%BA%9C%E9%87%87%E8%B4%AD%E7%BD%91%E4%BF%A1%E6%81%AF/</url>
    
    <content type="html"><![CDATA[<h1 id="æœåŠ¡å™¨è°ƒç ”-2020å¹´5æœˆ10æ—¥"><a href="#æœåŠ¡å™¨è°ƒç ”-2020å¹´5æœˆ10æ—¥" class="headerlink" title="æœåŠ¡å™¨è°ƒç ” 2020å¹´5æœˆ10æ—¥"></a>æœåŠ¡å™¨è°ƒç ” 2020å¹´5æœˆ10æ—¥</h1><p><strong>è°ƒç ”ç›®æ ‡ï¼š</strong></p><ul><li>ç›®å‰å…¸å‹çš„è®¡ç®—æœºï¼ŒåŒ…æ‹¬å•†ç”¨å°å¼æœºã€å·¥ä½œç«™ã€æœåŠ¡å™¨</li><li>æ­é…ç›®å‰å…¸å‹çš„GPUå¡</li><li>GPUé€‚é…è®¡ç®—æœºï¼Œéœ€è¦å‚å®¶ç½‘ç«™å…¬å¼€çš„åˆ—è¡¨ï¼Œç‰¹åˆ«æ˜¯å¯¹äºæœåŠ¡å™¨ã€‚å¦‚æœå‚å®¶æ²¡æœ‰ï¼Œéœ€è¦è‡´ç”µå‚å•†ï¼ˆéé”€å”®å•†ï¼‰çš„æŠ€æœ¯æ”¯æŒã€‚</li></ul><h2 id="1-åˆ¶çº¦æ€§èƒ½çš„å…¸å‹é¡¹ç›®"><a href="#1-åˆ¶çº¦æ€§èƒ½çš„å…¸å‹é¡¹ç›®" class="headerlink" title="1. åˆ¶çº¦æ€§èƒ½çš„å…¸å‹é¡¹ç›®"></a>1. åˆ¶çº¦æ€§èƒ½çš„å…¸å‹é¡¹ç›®</h2><h3 id="1-1-ä¸»æ¿"><a href="#1-1-ä¸»æ¿" class="headerlink" title="1.1 ä¸»æ¿"></a>1.1 ä¸»æ¿</h3><p>Inteléƒ¨åˆ†èŠ¯ç‰‡ç»„ä¸æ”¯æŒPCIe 3.0æ¥å£ï¼Œæ— æ³•å‘æŒ¥æ˜¾å¡çš„æœ€ä½³é€Ÿåº¦ã€‚</p><h4 id="åè¯è§£é‡Šï¼š"><a href="#åè¯è§£é‡Šï¼š" class="headerlink" title="åè¯è§£é‡Šï¼š"></a>åè¯è§£é‡Šï¼š</h4><p><img src="/2020/05/11/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B7%A5%E4%BD%9C%E7%AB%99%E8%B0%83%E7%A0%94-%E7%BB%93%E5%90%88%E6%94%BF%E5%BA%9C%E9%87%87%E8%B4%AD%E7%BD%91%E4%BF%A1%E6%81%AF/2020-05-10-21-33-30.png" alt><br><strong>PCI Express / PCI-e</strong><br>PCI-Eçš„å…¨åå«PCI Expressï¼Œç®€ç§°PCI-Eï¼Œå®˜æ–¹ç®€ç§°PCIeï¼Œä»–æ˜¯è®¡ç®—æœºå†…éƒ¨çš„ä¸€ç§é«˜é€Ÿæ€»çº¿ã€‚PCI-Eæ—¢æ˜¯é€šé“ï¼Œä¹Ÿæ˜¯æ¥å£ï¼Œå½“ä»–ä»¥æ¥å£å½¢å¼å­˜åœ¨çš„æ—¶å€™ï¼Œå°±æ˜¯æˆ‘ä»¬ä¸»æ¿ä¸Šé‚£é•¿é•¿çš„æ§½ã€‚PCI-Eæ¥å£ç›®å‰æœ€å¤§çš„ä½œç”¨å°±æ˜¯æ’æ˜¾å¡<br><img src="/2020/05/11/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B7%A5%E4%BD%9C%E7%AB%99%E8%B0%83%E7%A0%94-%E7%BB%93%E5%90%88%E6%94%BF%E5%BA%9C%E9%87%87%E8%B4%AD%E7%BD%91%E4%BF%A1%E6%81%AF/2020-05-10-21-32-30.png" alt></p><p><strong>PCI Express ä¿®è®¢ç‰ˆ / PCIeç‰ˆæœ¬</strong><br>PCIeæ‰€èƒ½æ‰¿å—çš„å¸¦å®½ä¸€èˆ¬ä»¥ç‰ˆæœ¬å’Œé•¿åº¦æ¥åŒºåˆ†ï¼Œç›®å‰æœ€æµè¡Œçš„PCIeç‰ˆæœ¬æ˜¯3.0ï¼Œæœ€æ–°çš„ç‰ˆæœ¬æ˜¯4.0ï¼Œç›®å‰åªæœ‰é«˜ç«¯ä¸»æ¿æ”¯æŒ4.0ï¼Œåªæœ‰æ¯”2080tiè¿˜è¦é«˜ç«¯çš„æ˜¾å¡æ‰éœ€è¦4.0ã€‚</p><p><strong>PCI Express é…ç½®</strong><br>é€šä¿—çš„è¯´å°±æ˜¯æ’æ§½é•¿åº¦ã€‚X1é•¿åº¦æ˜¯æœ€çŸ­çš„ï¼Œæ‰€èƒ½æ‰¿å—çš„å¸¦å®½å¤§çº¦æ˜¯986MB/Sã€‚X2é•¿åº¦å°±æ˜¯2GB/Sï¼ŒX4é•¿åº¦å°±æ˜¯4GB/Sï¼Œé‚£X16é•¿åº¦å°±æ˜¯16GB/Sã€‚å½“å‰ä¸»æµæ˜¾å¡ï¼Œå‡é‡‡ç”¨PCIEÃ—16æ’æ§½ç»“æ„ã€‚åªè¦å…·æœ‰PCIEÃ—16æ’æ§½çš„ä¸»æ¿ï¼Œéƒ½æ˜¯å¯ä»¥å®‰è£…ç‹¬ç«‹æ˜¾å¡çš„ã€‚<br>è‹±ç‰¹å°”å®˜ç½‘çš„æ„ä¹‰æ²¡å¤§çœ‹æ‡‚ï¼ŒçœŸæ­£æœ‰æ„ä¹‰çš„æ˜¯â€œæ”¯æŒçš„å¤„ç†å™¨ PCI Express ç«¯å£é…ç½®â€è¿™ä¸€é¡¹ã€‚</p><p><strong>æ”¯æŒçš„å¤„ç†å™¨ PCI Express ç«¯å£é…ç½®</strong><br>ä»¥Z390ä¸»æ¿ä¸ºä¾‹ï¼Œè¯¥ä¸»æ¿1x16 or 2x8 or 1x8+2x4ï¼Œæ„æ€å°±æ˜¯å¯ä»¥æ’1ä¸ªé•¿åº¦ä¸º16Xçš„æ˜¾å¡ï¼Œä¹Ÿå¯ä»¥æ’ä¸¤ä¸ªé•¿åº¦ä¸º8Xçš„å›ºæ€ç¡¬ç›˜ä¹‹ç±»çš„ï¼Œä½†æ˜¯å¦‚æœåŒæ—¶æ’ä¸Šæ˜¾å¡å’Œå›ºæ€ç¡¬ç›˜ï¼Œå°±ä¼šå‡ºç°æŠ¢é€šé“çš„ç°è±¡ï¼šæ˜¾å¡å ç”¨16ä¸ªé€šé“ï¼Œä¸¤ä¸ªå›ºæ€å ç”¨16ä¸ªé€šé“ï¼Œç„¶è€Œ<strong>PCI Express é€šé“æ•°çš„æœ€å¤§å€¼</strong>å°±åªæœ‰24ä¸ªï¼Œé€šé“ä¸å¤Ÿç”¨å°±ä¼šå¯¼è‡´é™é€Ÿï¼Œç”šè‡³æ— æ³•æ­£å¸¸è¿è½¬ã€‚</p><p><img src="/2020/05/11/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B7%A5%E4%BD%9C%E7%AB%99%E8%B0%83%E7%A0%94-%E7%BB%93%E5%90%88%E6%94%BF%E5%BA%9C%E9%87%87%E8%B4%AD%E7%BD%91%E4%BF%A1%E6%81%AF/2020-05-10-22-13-34.png" alt><br><img src="/2020/05/11/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B7%A5%E4%BD%9C%E7%AB%99%E8%B0%83%E7%A0%94-%E7%BB%93%E5%90%88%E6%94%BF%E5%BA%9C%E9%87%87%E8%B4%AD%E7%BD%91%E4%BF%A1%E6%81%AF/2020-05-10-22-13-57.png" alt><br><img src="/2020/05/11/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B7%A5%E4%BD%9C%E7%AB%99%E8%B0%83%E7%A0%94-%E7%BB%93%E5%90%88%E6%94%BF%E5%BA%9C%E9%87%87%E8%B4%AD%E7%BD%91%E4%BF%A1%E6%81%AF/2020-05-10-22-14-07.png" alt><br><img src="/2020/05/11/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B7%A5%E4%BD%9C%E7%AB%99%E8%B0%83%E7%A0%94-%E7%BB%93%E5%90%88%E6%94%BF%E5%BA%9C%E9%87%87%E8%B4%AD%E7%BD%91%E4%BF%A1%E6%81%AF/2020-05-10-22-14-15.png" alt></p><p>ä»¥ä¸Šæ˜¯å½“å‰åœ¨å”®å¤„ç†å™¨æ­é…ä¸»æ¿ï¼ˆèŠ¯ç‰‡ç»„ï¼‰çš„ç‰¹æ€§æ”¯æŒæƒ…å†µï¼Œä»…ä¾›å‚è€ƒï¼Œå¹¶ä¸æ˜¯è¯´æŸå—ä¸»æ¿ç”¨äº†ä¸Šè¿°æŸä¸ªèŠ¯ç‰‡ç»„èŠ¯ç‰‡å°±ä¼šå…·å¤‡è¿™ä¹ˆå¤šçš„æ‰©å±•æ¥å£åŠèƒ½åŠ›ï¼Œå…·ä½“è¿˜è¦çœ‹ä¸»æ¿å‚å•†é’ˆå¯¹è¿™ä¸ªç‰ˆå‹ä½œå‡ºä»€ä¹ˆæ ·çš„â€œé˜‰å‰²â€è°ƒæ•´ã€‚</p><h3 id="1-2-ç”µæº"><a href="#1-2-ç”µæº" class="headerlink" title="1.2 ç”µæº"></a>1.2 ç”µæº</h3><p><img src="/2020/05/11/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B7%A5%E4%BD%9C%E7%AB%99%E8%B0%83%E7%A0%94-%E7%BB%93%E5%90%88%E6%94%BF%E5%BA%9C%E9%87%87%E8%B4%AD%E7%BD%91%E4%BF%A1%E6%81%AF/2020-05-10-22-11-24.png" alt="é¡¶çº§æ¸¸æˆæ˜¾å¡åŠéœ€è¦çš„ç”µæºåŠŸç‡å¤§å°"></p><h2 id="2-ç›®å‰å…¸å‹è®¡ç®—æœº"><a href="#2-ç›®å‰å…¸å‹è®¡ç®—æœº" class="headerlink" title="2. ç›®å‰å…¸å‹è®¡ç®—æœº"></a>2. ç›®å‰å…¸å‹è®¡ç®—æœº</h2><p>æœåŠ¡å™¨å¯¹æ˜¾å¡çš„æ”¯æŒä¸å¦‚å·¥ä½œç«™ï¼Œå°å¼æœºçš„æ€§èƒ½è¿‡ä½ï¼Œå› æ­¤æœ¬è°ƒæŸ¥æ±‡èšäºå·¥ä½œç«™æŸ¥è¯¢ã€‚</p><h3 id="2-1-æœåŠ¡å™¨"><a href="#2-1-æœåŠ¡å™¨" class="headerlink" title="2.1 æœåŠ¡å™¨"></a>2.1 æœåŠ¡å™¨</h3><p>æœåŠ¡å™¨æŒ‰å¤–å½¢åˆ’åˆ†å¯ä»¥åˆ’åˆ†ä¸ºï¼šå¡”å¼æœåŠ¡å™¨ã€æœºæ¶å¼æœåŠ¡å™¨ã€åˆ€ç‰‡å¼æœåŠ¡å™¨ã€‚<br>æœåŠ¡å™¨é™¤äº†ä¸€äº›ä½ç«¯çš„å¡”å¼æœºèƒ½ç”¨æ˜¾å¡ä»¥å¤–ï¼Œå…¶ä»–çš„éƒ½ä¸æ”¯æŒæ˜¾åº¦å¡ï¼Œå½“ç„¶æœºæ¶å¼æœåŠ¡å™¨å¾ˆè–„æ ¹æœ¬å°±æ²¡æœ‰æ˜¾å¡çš„ç©ºé—´ã€‚<br>å¦‚æœè´­ä¹°æœåŠ¡å™¨ï¼Œå®˜æ–¹å”®åå°†ä¸ä¼šä¸»åŠ¨ä¸ºä½ å®‰è£…ä¸ªäººå®¶ç”¨ç³»åˆ—æ˜¾å¡ï¼Œè½¬è€Œæ¨é”€å•†ä¸šè®¡ç®—å¡ã€‚<br><img src="/2020/05/11/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B7%A5%E4%BD%9C%E7%AB%99%E8%B0%83%E7%A0%94-%E7%BB%93%E5%90%88%E6%94%BF%E5%BA%9C%E9%87%87%E8%B4%AD%E7%BD%91%E4%BF%A1%E6%81%AF/2020-05-10-15-26-49.png" alt></p><p>æˆªè‡³2020å¹´5æœˆï¼ŒæœåŠ¡å™¨çƒ­é”€å“ç‰ŒTop-10ï¼ˆå–è‡ª<a href="http://top.zol.com.cn/compositor/server.html">ZOLç½‘</a>ï¼‰ï¼š<br>Dellã€åä¸ºã€æµªæ½®ã€è”æƒ³ã€æƒ æ™®ã€H3Cã€ThinkServerã€ä¸­ç§‘æ›™å…‰ã€å®å¾·ã€IBMã€‚</p><h3 id="2-2-å·¥ä½œç«™"><a href="#2-2-å·¥ä½œç«™" class="headerlink" title="2.2 å·¥ä½œç«™"></a>2.2 å·¥ä½œç«™</h3><p>å·¥ä½œç«™çš„æœºç®±ä¸»è¦ä»¥å¡”å¼ä¸ºä¸»ï¼Œå’Œä¸€èˆ¬å®¶ç”¨ä¸»æœºæœºç®±å·®è·ä¸å¤§ã€‚<br>å·¥ä½œç«™å¯¹æ˜¾å¡çš„æ”¯æŒæ¯”æœåŠ¡å™¨å¼ºå¾ˆå¤šï¼Œå…·ä½“æ¥è¯´ï¼Œå·¥ä½œç«™çš„ä¸»æ¿å¯¹PCI-Eçš„æ¥å£æ”¯æŒæ›´å¥½ã€‚</p><p>ä»¥ä¸‹ä»·æ ¼å’Œèµ„æ–™å…¨éƒ¨å–è‡ªäºåŒ—äº¬å¸‚æ”¿åºœé‡‡è´­ç½‘ã€‚</p><p><strong>ç¥èˆŸ</strong><br>HFMPB2O8å‹å·æ”¯æŒåŒè·¯2080tiæˆ–TITAN<br><a href="http://114.255.53.119:81/bgpc_office_manage/produce/parmsInfo.htm?topPk=1r6e15444412038777n5&amp;tiitPk=BG_002X&amp;tioPk=">HFMPB2O8</a>    78,016.00 è‡ªå¸¦2080ti<br><a href="http://114.255.53.119:81/bgpc_office_manage/produce/parmsInfo.htm?topPk=2g0v15681729710791z0&amp;tiitPk=BG_002X&amp;tioPk=">HFMPB99K</a>  55,691.28   è‡ªå¸¦2080ti<br><a href="http://114.255.53.119:81/bgpc_office_manage/produce/parmsInfo.htm?topPk=6u7m15621197126648s6&amp;tiitPk=BG_002X&amp;tioPk=">HFMPB3IR</a>  32,870.00   C422å¯æ›´æ¢æ›´é«˜çº§æ˜¾å¡<br><a href="http://114.255.53.119:81/bgpc_office_manage/produce/parmsInfo.htm?topPk=8n5x15444417182251i6&amp;tiitPk=BG_002X&amp;tioPk=">HFMPB3J9</a>  29,980.00   è‡ªå¸¦2080</p><p><strong>è”æƒ³</strong><br><a href="http://114.255.53.119:81/bgpc_office_manage/produce/parmsInfo.htm?topPk=6h7y15571256822209c5&amp;tiitPk=BG_002X&amp;tioPk=">Think Station P520</a>   46,920.00    C422å¯æ›´æ¢æ›´é«˜çº§æ˜¾å¡<br><a href="http://114.255.53.119:81/bgpc_office_manage/produce/parmsInfo.htm?topPk=1s8z15571265520623u2&amp;tiitPk=BG_002X&amp;tioPk=">ThinkStation P720</a> 35,000.00   C622å¯æ›´æ¢æ›´é«˜çº§ </p><p><strong>å®ç¢</strong><br><a href="http://114.255.53.119:81/bgpc_office_manage/produce/parmsInfo.htm?topPk=7w0g15281019011939v9&amp;tiitPk=BG_002X&amp;tioPk=">AP150 F4</a> 38,500.00    C622å¯æ›´æ¢æ›´é«˜çº§ </p><p><strong>æµªæ½®</strong><br>æµªæ½®æ˜¯è‡ªç ”ä¸»æ¿ï¼Œä¸è¿‡å…¶ä¸»æ¿æ”¯æŒPCIe 16xï¼Œç†è®ºä¸Šåªè¦ä¾›ç”µè¶³å¤Ÿå³å¯å®‰è£…åŒ…æ‹¬2080Tiåœ¨å†…çš„æ˜¾å¡<br><a href="http://114.255.53.119:81/bgpc_office_manage/produce/parmsInfo.htm?topPk=3f4m15287143876139q2&amp;tiitPk=BG_002X&amp;tioPk=">P8000</a>    37,260.00</p><p><strong>æƒ æ™®</strong><br><a href="http://114.255.53.119:81/bgpc_office_manage/produce/parmsInfo.htm?topPk=4g2q15281081290990x3&amp;tiitPk=BG_002X&amp;tioPk=">HP Z4 G4</a>  15,900.00   C622å¯æ›´æ¢æ›´é«˜çº§<br><a href="http://114.255.53.119:81/bgpc_office_manage/produce/parmsInfo.htm?topPk=4v9p15281082398434h6&amp;tiitPk=BG_002X&amp;tioPk=">HP Z6 G4</a>  23,500.00   C622å¯æ›´æ¢æ›´é«˜çº§<br><a href="http://114.255.53.119:81/bgpc_office_manage/produce/parmsInfo.htm?topPk=0z0m15314586871347z2&amp;tiitPk=BG_002X&amp;tioPk=">HP Z8 G4</a>  35,800.00   C622å¯æ›´æ¢æ›´é«˜çº§ </p><p><strong>è‹¹æœ</strong><br>è‹¹æœçš„ä¸»æ¿ä»…æ”¯æŒAMDçš„æ˜¾å¡ï¼ŒAå¡ä¸èƒ½ç”¨ä½œæ·±åº¦å­¦ä¹ ã€‚</p><h3 id="2-3-å•†ç”¨å°å¼æœº"><a href="#2-3-å•†ç”¨å°å¼æœº" class="headerlink" title="2.3 å•†ç”¨å°å¼æœº"></a>2.3 å•†ç”¨å°å¼æœº</h3><p>å³æ™®é€šå°å¼æœºã€‚æ™®é€šå°å¼æœºéš¾ä»¥æ”¯æ’‘æ·±åº¦å­¦ä¹ ä»»åŠ¡ã€‚</p><h2 id="3-æ˜¾å¡ä»‹ç»"><a href="#3-æ˜¾å¡ä»‹ç»" class="headerlink" title="3. æ˜¾å¡ä»‹ç»"></a>3. æ˜¾å¡ä»‹ç»</h2><p>æ˜¾å¡åˆ†ä¸ºNvidiaæ˜¾å¡å’ŒAMDæ˜¾å¡ï¼Œå…¶ä¸­Nvidiaæ˜¾å¡å¯ä»¥ç”¨æ¥æ·±åº¦å­¦ä¹ è®­ç»ƒå’Œæ¨ç†ã€‚</p><p>æ¯”è¾ƒæ˜¾å¡æ€§èƒ½ï¼Œå¯ä»¥å»<a href="https://versus.com/cn">è¿™ä¸ªç½‘ç«™</a></p><h3 id="3-1-Nvidiaæ˜¾å¡ç®€ä»‹"><a href="#3-1-Nvidiaæ˜¾å¡ç®€ä»‹" class="headerlink" title="3.1 Nvidiaæ˜¾å¡ç®€ä»‹"></a>3.1 Nvidiaæ˜¾å¡ç®€ä»‹</h3><p><a href="https://www.bybusa.com/gpu-rank">2020å¹´æ˜¾å¡å¤©æ¢¯å›¾</a></p><p><img src="/2020/05/11/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B7%A5%E4%BD%9C%E7%AB%99%E8%B0%83%E7%A0%94-%E7%BB%93%E5%90%88%E6%94%BF%E5%BA%9C%E9%87%87%E8%B4%AD%E7%BD%91%E4%BF%A1%E6%81%AF/2020-05-10-22-23-18.png" alt="2020å¹´æ˜¾å¡å¤©æ¢¯å›¾"></p><p>ç›®å‰æœ€å¼ºçš„æ˜¾å¡æ˜¯2080tiã€‚é¢„è®¡åœ¨2020å¹´åº•çš„3080tiå‘å¸ƒä¹‹å‰ï¼Œ2080tiè¿˜ä¼šæŒç»­ç§°éœ¸æ˜¾å¡æ±Ÿæ¹–ã€‚</p><h3 id="3-2-æ¸¸æˆæ˜¾å¡"><a href="#3-2-æ¸¸æˆæ˜¾å¡" class="headerlink" title="3.2 æ¸¸æˆæ˜¾å¡"></a>3.2 æ¸¸æˆæ˜¾å¡</h3><p>å¯¹æ¸¸æˆæ˜¾å¡çš„è°ƒç ”ï¼Œå‚è€ƒ<a href="https://post.smzdm.com/p/a6lrwk3e/">â€œä»€ä¹ˆå€¼å¾—ä¹°â€ä¸Šçš„è°ƒç ”</a>ä»¥åŠ<a href="https://www.cnblogs.com/xiaozhi_5638/p/10923351.html">è¿™ä¸ªç½‘å€</a>ã€‚</p><p><img src="/2020/05/11/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B7%A5%E4%BD%9C%E7%AB%99%E8%B0%83%E7%A0%94-%E7%BB%93%E5%90%88%E6%94%BF%E5%BA%9C%E9%87%87%E8%B4%AD%E7%BD%91%E4%BF%A1%E6%81%AF/2020-05-10-22-09-38.png" alt="æ¸¸æˆæ˜¾å¡ä¸€è§ˆ"></p><p><strong>Geforceç³»åˆ—</strong></p><p>è¿™ä¸ªç³»åˆ—æ˜¯é”€é‡æœ€å¤šã€å¤§ä¼—æœ€ä¸ºç†Ÿæ‚‰çš„æ˜¾å¡ï¼Œä¸€èˆ¬ç”¨æ¥æ‰“æ¸¸æˆã€‚ä»·æ ¼ä¾¿å®œï¼Œæœ€æ–°å‡ºæ¥çš„æ——èˆ°å¡RTX 2080Tiäº¬ä¸œå”®ä»·å¤§æ¦‚1wå·¦å³ï¼Œæ ¹æ®ä¸åŒçš„å“ç‰Œï¼Œä»·æ ¼æœ‰æ‰€æ³¢åŠ¨ã€‚ä½é…ç½®çš„ä¾¿å®œçš„ä¸€åƒå°±èƒ½ä¹°åˆ°ã€‚å®˜æ–¹å®šä½æ˜¯æ¶ˆè´¹çº§ï¼Œä½†æ˜¯å®ƒåœ¨æ·±åº¦å­¦ä¹ ä¸Šçš„è¡¨ç°ä¹Ÿéå¸¸ä¸é”™ï¼Œå¾ˆå¤šäººç”¨æ¥åšæ¨ç†ã€è®­ç»ƒï¼Œå•å¼ å¡çš„æ€§èƒ½è·Ÿæ·±åº¦å­¦ä¹ ä¸“ä¸šå¡Teslaç³»åˆ—æ¯”èµ·æ¥å…¶å®å·®ä¸å¤ªå¤šï¼Œä½†æ˜¯æ€§ä»·æ¯”å´é«˜å¾ˆå¤šã€‚æ¯”å¦‚å·²ç»åœäº§çš„GTX 1080æ˜¾å¡çš„å‚æ•°åŸºæœ¬å’Œæ·±åº¦å­¦ä¹ å…¥é—¨çº§æ˜¾å¡Tesla P4ä¸€æ ·ï¼Œç”¨æ¥åšè®­ç»ƒå’Œæ¨ç†çš„æ•ˆæœæ¯”Tesla P4è¿˜è¦å¥½ï¼Œå¯æ˜¯GTX 1080ä¸€å¼ å¡æ‰å–5000~6000å·¦å³ï¼Œè€ŒTesla P4è¦å–åˆ°1.4wã€‚</p><p>ç©¶å…¶åŸå› ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šåœ¨äºè‹±ä¼Ÿè¾¾å®˜æ–¹ç¦æ­¢ä½¿ç”¨GTXã€RTXç³»åˆ—æ˜¾å¡ç”¨äºæ·±åº¦å­¦ä¹ ç­‰ç”¨é€”ï¼Œä¸€ç»ä½¿ç”¨ï¼Œè‡ªåŠ¨è¿‡ä¿ã€‚é™¤äº†å•†ä¸šè€ƒè™‘å¤–ï¼Œè¿˜åŒ…æ‹¬ï¼šTeslaå¤šå—æ˜¾å¡åˆèµ·æ¥çš„æ€§èƒ½ä¸ä¼šå—å¾ˆå¤§å½±å“ï¼Œä¸”Teslaç³»åˆ—æ˜¾å¡åŠŸè€—ä¼˜åŒ–éå¸¸æ˜æ˜¾ï¼ŒåŸºæœ¬éƒ½æ˜¯è¢«åŠ¨æ•£çƒ­ï¼Œä¸æä¾›é£æ‰‡ï¼Œæ›´é€‚åˆæ•°æ®ä¸­å¿ƒæœºæˆ¿å·¥ä½œç¯å¢ƒç­‰ã€‚</p><h3 id="3-3-è®¡ç®—æ˜¾å¡"><a href="#3-3-è®¡ç®—æ˜¾å¡" class="headerlink" title="3.3 è®¡ç®—æ˜¾å¡"></a>3.3 è®¡ç®—æ˜¾å¡</h3><p>ä¸“ä¸šçº§æ˜¾å¡çš„ä»‹ç»å‚è€ƒ<a href="https://product.pconline.com.cn/itbk/diy/graphics/1802/10846244.html">â€œä»€ä¹ˆå€¼å¾—ä¹°â€ä¸Šçš„è°ƒç ”</a>ä»¥åŠ<a href="https://www.cnblogs.com/xiaozhi_5638/p/10923351.html">è¿™ä¸ªç½‘å€</a>ã€‚</p><p><strong>Quadroç³»åˆ—</strong><br>Quadroç³»åˆ—æ˜¾å¡ä¸€èˆ¬ç”¨äºç‰¹å®šè¡Œä¸šï¼Œæ¯”å¦‚è®¾è®¡ã€å»ºç­‘ç­‰ï¼Œå›¾åƒå¤„ç†ä¸“ä¸šæ˜¾å¡ï¼Œæ¯”å¦‚CADã€Mayaç­‰è½¯ä»¶ï¼Œä¸€èˆ¬äººå¾ˆå°‘ç”¨åˆ°ï¼Œä»·æ ¼ç›¸å¯¹æ¥è®²ä¹Ÿç¨å¾®è´µä¸€äº›ï¼Œæœ€æ–°çš„åŒ…æ‹¬RTX 3000/4000/6000/8000å‹å·ã€‚</p><p><strong>Teslaç³»åˆ—</strong><br>Teslaç³»åˆ—æ˜¾å¡å®šä½å¹¶è¡Œè®¡ç®—ï¼Œä¸€èˆ¬ç”¨äºæ•°æ®ä¸­å¿ƒï¼Œå…·ä½“ç‚¹ï¼Œæ¯”å¦‚ç”¨äºæ·±åº¦å­¦ä¹ ï¼Œåšè®­ç»ƒã€æ¨ç†ç­‰ã€‚é˜¿é‡Œäº‘ã€Amazonäº‘æœ‰éå¸¸å¤šçš„GPUæœåŠ¡å™¨ï¼ŒåŸºæœ¬éƒ½é‡‡ç”¨Teslaç³»åˆ—æ˜¾å¡ã€‚è¿™ä¸ªç³»åˆ—æ˜¾å¡æœ‰ä¸ªç‰¹åˆ«æ˜æ˜¾çš„ç‰¹å¾ï¼Œé‚£å°±æ˜¯è´µã€‚Teslaç³»åˆ—å…¥é—¨çº§æ˜¾å¡ Tesla P4ï¼Œå‰é¢æåˆ°è¿‡ï¼Œç”¨æ¥åšæ·±åº¦å­¦ä¹ çš„æ•ˆæœæ¯”GTX 1080è¿˜å·®ï¼Œä½†æ˜¯ä»·æ ¼æ˜¯åè€…çš„3å€å¤šã€‚åƒå…¶ä»–æ›´é«˜çº§åˆ«çš„Tesla V100ã€Tesla P100 ä»·æ ¼é«˜è¾¾8wã€4wï¼Œè¿™ç§ä»·ä½çš„æ˜¾å¡è™½ç„¶æ€§èƒ½å¼ºåŠ²ï¼Œä½†æ˜¯ä¸€èˆ¬äººæ˜¯ä¹°ä¸èµ·çš„ï¼Œåªæœ‰ä¼ä¸šæ•°æ®ä¸­å¿ƒæ‰ä¼šéƒ¨ç½²è¿™ç§æ˜¾å¡ã€‚</p><h3 id="3-4-æ˜¾å¡æ€§èƒ½æŒ‡æ ‡"><a href="#3-4-æ˜¾å¡æ€§èƒ½æŒ‡æ ‡" class="headerlink" title="3.4 æ˜¾å¡æ€§èƒ½æŒ‡æ ‡"></a>3.4 æ˜¾å¡æ€§èƒ½æŒ‡æ ‡</h3><p>æœ¬éƒ¨åˆ†è¯·å‚è€ƒ<a href="https://www.cnblogs.com/xiaozhi_5638/p/10923351.html">è¿™é‡Œ</a>ã€‚</p><h3 id="3-4-æ˜¾å¡ç½—åˆ—"><a href="#3-4-æ˜¾å¡ç½—åˆ—" class="headerlink" title="3.4 æ˜¾å¡ç½—åˆ—"></a>3.4 æ˜¾å¡ç½—åˆ—</h3><p>æ”¿åºœé‡‡è´­ç½‘ä¸Šï¼Œå€¼å¾—é‡‡è´­çš„æ˜¾å¡å¦‚ä¸‹</p><div class="table-container"><table><thead><tr><th>å‹å·</th><th>ä»·æ ¼</th></tr></thead><tbody><tr><td>p5000</td><td>27000</td></tr><tr><td>p6000</td><td>43500</td></tr><tr><td>2080</td><td>13500</td></tr><tr><td>k4000</td><td>42450</td></tr><tr><td>p4000</td><td>6800</td></tr><tr><td>2070s</td><td>8000</td></tr><tr><td>8000</td><td>93350</td></tr><tr><td>2080ti</td><td>16000</td></tr><tr><td>1080ti</td><td>8620</td></tr><tr><td>p4</td><td>28000</td></tr><tr><td>2080</td><td>10290</td></tr><tr><td>2060</td><td>5000</td></tr><tr><td>titan rtx</td><td>30000</td></tr><tr><td>p1000</td><td>3500</td></tr><tr><td>2070</td><td>7500</td></tr><tr><td>m2000</td><td>2982</td></tr><tr><td>titan v</td><td>37500</td></tr></tbody></table></div>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
    <tags>
      
      <tag>PCIe</tag>
      
      <tag>æ˜¾å¡</tag>
      
      <tag>å·¥ä½œç«™</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>chromeå‡çº§ç‰ˆæœ¬å¤±è´¥è§£å†³åŠæ³•</title>
    <link href="/2020/05/11/chrome%E5%8D%87%E7%BA%A7%E7%89%88%E6%9C%AC%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/"/>
    <url>/2020/05/11/chrome%E5%8D%87%E7%BA%A7%E7%89%88%E6%9C%AC%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h2 id="é”™è¯¯æè¿°ï¼š"><a href="#é”™è¯¯æè¿°ï¼š" class="headerlink" title="é”™è¯¯æè¿°ï¼š"></a>é”™è¯¯æè¿°ï¼š</h2><p>åœ¨Win7ç”µè„‘ä¸Šè¯•å›¾å°†Chromeä»32ä½çš„72ç‰ˆæœ¬å‡çº§åˆ°64ä½çš„80ç‰ˆæœ¬æ—¶å‘ç”Ÿé—®é¢˜ï¼Œå‡çº§è¿›åº¦åˆ°62%æŠ¥é”™ï¼š<br>Chromeå®‰è£… æœªçŸ¥é”™è¯¯å¯¼è‡´å®‰è£…å¤±è´¥  â€œ0x80040902â€</p><p>ä»chromeå®˜ç½‘ä¸‹è½½â€œchromesetup.exeâ€ï¼Œæ‰“å¼€æ¢¯å­ä¹‹åä¸‹è½½æˆåŠŸï¼Œåœ¨å®‰è£…è¿‡ç¨‹ä¸­ä¹Ÿå‡ºç°æœªçŸ¥é”™è¯¯ã€‚<br>ä»Chromeå®˜ç½‘ä¸‹è½½â€œChromestandalonesetup64.exeâ€ï¼Œå³ç¦»çº¿å®‰è£…åŒ…ï¼Œæœ€åä¹Ÿå‡ºç°åŒæ ·çš„é”™è¯¯ã€‚<br>é‡æ–°å¯åŠ¨ã€è¿›å…¥å®‰å…¨æ¨¡å¼ã€è¯•å›¾ç»“æŸæ‰€æœ‰æœ‰å…³googleçš„è¿›ç¨‹çš„æ–¹æ³•å¯¹æˆ‘éƒ½æ²¡ç”¨ã€‚</p><h2 id="æœ€åæœ‰æ•ˆçš„æ–¹æ³•ï¼š"><a href="#æœ€åæœ‰æ•ˆçš„æ–¹æ³•ï¼š" class="headerlink" title="æœ€åæœ‰æ•ˆçš„æ–¹æ³•ï¼š"></a>æœ€åæœ‰æ•ˆçš„æ–¹æ³•ï¼š</h2><p>æŠŠåŸæ¥çš„Chromeä»æ§åˆ¶é¢æ¿çš„â€œæ·»åŠ åˆ é™¤ç¨‹åºâ€ä¸­å¸è½½ï¼›</p><p>æŒ‰ä½windows+Rï¼Œåœ¨â€œå¼€å§‹â€è¿è¡Œä¸­è¾“å…¥â€œregeditâ€ï¼Œæ‰“å¼€æ³¨å†Œè¡¨ç¼–è¾‘å™¨ï¼Œä¾æ¬¡è¿›å…¥HKEY_CURRENT_USER\Software\Google\Chromeï¼›</p><p>æŠŠChromeè¿™ä¸€é¡¹åˆ é™¤ï¼Œç„¶åé‡å¯ã€‚å†å®‰è£…å°±ä¸ä¼šå­˜åœ¨é—®é¢˜äº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
    <tags>
      
      <tag>chrome</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€è®ºæ–‡é˜…è¯»ç¬”è®°ã€‘Coverage Guided Testing for Recurrent Neural Networks</title>
    <link href="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Coverage-Guided-Testing-for-Recurrent-Neural-Networks/"/>
    <url>/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Coverage-Guided-Testing-for-Recurrent-Neural-Networks/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ç±»æ¯”è½¯ä»¶æµ‹è¯•ä¸­è¦†ç›–ç‡çš„æ¦‚å¿µï¼Œæå‡ºLSTMç½‘ç»œçš„è¦†ç›–ç‡ï¼Œå¹¶ä¸ºå¸¦æœ‰LSTMç½‘ç»œç»“æ„çš„æ·±åº¦å­¦ä¹ æ¨¡å‹å¼€å‘äº†ä¸€ç§è¦†ç›–ç‡å¼•å¯¼çš„æ¨¡ç³Šæµ‹è¯•æ–¹æ³•ï¼Œå¹¶æ•´åˆæˆæµ‹è¯•å·¥å…·testRNNã€‚è¯¥æµ‹è¯•ä¸»è¦æ˜¯ä¸ºäº†è¡¡é‡ç½‘ç»œçš„é²æ£’æ€§ã€‚<br><!--more---></p><h1 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h1><p>æœ¬æ–‡ç±»æ¯”è½¯ä»¶æµ‹è¯•ä¸­è¦†ç›–ç‡çš„æ¦‚å¿µï¼Œæå‡ºLSTMç½‘ç»œçš„è¦†ç›–ç‡ï¼Œä¸ºå¸¦æœ‰LSTMç½‘ç»œç»“æ„çš„æ·±åº¦å­¦ä¹ æ¨¡å‹å¼€å‘äº†ä¸€ç§è¦†ç›–ç‡å¼•å¯¼çš„æ¨¡ç³Šæµ‹è¯•æ–¹æ³•ï¼Œå¹¶æ•´åˆæˆæµ‹è¯•å·¥å…·testRNNã€‚</p><p>å¦å¤–ï¼Œæœ¬ç ”ç©¶è¿˜å‘ç°å¯¹æŠ—æ ·æœ¬ç”Ÿæˆç‡å’Œè¦†ç›–ç‡æœ‰ç›¸å…³æ€§ï¼Œè¿™è¯æ˜è¦†ç›–ç‡æ˜¯è¯„ä¼°å¸¦LSTMç»“æ„çš„ç¥ç»ç½‘ç»œçš„é²æ£’æ€§çš„è‰¯å¥½æŒ‡æ ‡ï¼Œä¹Ÿè¯´æ˜äº†testRNNèƒ½å¤Ÿæ•è·RNNçš„é”™è¯¯ã€‚</p><p>ç»å®éªŒè¯„ä¼°è¯æ˜ï¼Œè¯¥æµ‹è¯•æ–¹æ³•èƒ½æœ‰æ•ˆç”Ÿæˆä½¿æ¨¡å‹å‡ºé”™çš„å˜å¼‚æ ·æœ¬ï¼Œä¾¿äºæµ‹è¯•äººå‘˜åŠæ—©å‘ç°ç¥ç»ç½‘ç»œæ¨¡å‹çš„é—®é¢˜ã€‚</p><p>æœ¬æ–‡æœ€åè§£é‡Šäº†ä¸Šé¢è¦†ç›–ç‡å’Œé²æ£’æ€§æ­£ç›¸å…³çš„åŸå› ï¼Œè®¤ä¸ºè¦†ç›–ç‡å¯æé«˜ç½‘ç»œçš„å¯è§£é‡Šæ€§ã€‚</p><h1 id="ä¸€ã€å¼•è¨€"><a href="#ä¸€ã€å¼•è¨€" class="headerlink" title="ä¸€ã€å¼•è¨€"></a>ä¸€ã€å¼•è¨€</h1><h2 id="å›é¡¾RNNã€LSTM"><a href="#å›é¡¾RNNã€LSTM" class="headerlink" title="å›é¡¾RNNã€LSTM"></a>å›é¡¾RNNã€LSTM</h2><p>è¿™ä¸€éƒ¨åˆ†å¯ä»¥çœ‹<a href="https://superlova.github.io/2020/06/20/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91LSTM%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84%E7%AE%80%E4%BB%8B%E4%B8%8E%E5%AF%B9%E5%BA%94%E7%9A%84keras%E5%AE%9E%E7%8E%B0/">è¿™é‡Œ</a>ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯æ¨¡ç³Šæµ‹è¯•"><a href="#ä»€ä¹ˆæ˜¯æ¨¡ç³Šæµ‹è¯•" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¨¡ç³Šæµ‹è¯•"></a>ä»€ä¹ˆæ˜¯æ¨¡ç³Šæµ‹è¯•</h2><p>è¿™ä¸€éƒ¨åˆ†å¯ä»¥çœ‹<a href="https://superlova.github.io/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Fuzzing-A-Survey/">è¿™é‡Œ</a>ã€‚</p><p>ç”¨è¦†ç›–ç‡å¼•å¯¼æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆã€‚ä¸€æ—¦éç›®æ ‡éšæœºåŒ–éš¾ä»¥æé«˜è¦†ç›–ç‡ï¼Œå°±ä»¥æ»¡è¶³æœªè¾¾æ ‡æµ‹è¯•æ¡ä»¶çš„è·ç¦»ä¸ºç›®æ ‡è¿›è¡Œçªå˜ï¼Œä»¥ç”Ÿæˆcorneræµ‹è¯•æ¡ˆä¾‹ã€‚</p><h2 id="å…³äºè¦†ç›–ç‡"><a href="#å…³äºè¦†ç›–ç‡" class="headerlink" title="å…³äºè¦†ç›–ç‡"></a>å…³äºè¦†ç›–ç‡</h2><p>åœ¨è½¯ä»¶æµ‹è¯•ä¸­ï¼Œè¦†ç›–ç‡æ˜¯ç”¨æ¥åº¦é‡æµ‹è¯•å®Œæ•´æ€§çš„ä¸€ä¸ªæ‰‹æ®µï¼ŒåŒæ—¶ä¹Ÿæ˜¯æµ‹è¯•æŠ€æœ¯æœ‰æ•ˆæ€§çš„ä¸€ä¸ªåº¦é‡ã€‚</p><p>åœ¨è½¯ä»¶æµ‹è¯•ä¸­ï¼Œè¦†ç›–ç‡æ˜¯åŸºäºç¨‹åºçš„æ‰§è¡Œæƒ…å†µæ¥è®¡ç®—çš„ã€‚å¦‚æœè¦è®¡ç®—è¯­å¥è¦†ç›–ç‡ï¼Œè¦†ç›–ç‡=ï¼ˆè‡³å°‘è¢«æ‰§è¡Œä¸€æ¬¡çš„ç¨‹åºè¯­å¥æ•°ï¼‰/ç¨‹åºä¸­è¯­å¥çš„æ€»æ•°ï¼›å¦‚æœè¦è®¡ç®—åˆ¤å®šè¦†ç›–ç‡ï¼Œåˆ¤å®šè¦†ç›–ç‡=ï¼ˆåˆ¤å®šç»“æœè¢«è¯„ä»·çš„æ¬¡æ•°ï¼‰/ï¼ˆåˆ¤å®šç»“æœçš„æ€»æ•°ï¼‰ï¼Œè¯¸å¦‚æ­¤ç±»ã€‚</p><p>é€šè¿‡è¦†ç›–ç‡æ•°æ®ï¼Œå¯ä»¥æ£€æµ‹æˆ‘ä»¬çš„æµ‹è¯•æ˜¯å¦å……åˆ†ï¼Œåˆ†æå‡ºæµ‹è¯•æ–¹æ¡ˆçš„å¼±ç‚¹åœ¨å“ªæ–¹é¢ï¼›ä¹Ÿå¯ä»¥æŒ‡å¯¼æˆ‘ä»¬è®¾è®¡èƒ½å¤Ÿå¢åŠ è¦†ç›–ç‡çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæœ‰æ•ˆæé«˜æµ‹è¯•è´¨é‡ã€‚</p><p>ä½†æ˜¯ï¼Œæµ‹è¯•æˆæœ¬éšè¦†ç›–ç‡çš„å¢åŠ è€Œå¢åŠ ï¼Œå› æ­¤ä¸èƒ½ä¸€å‘³è¿½æ±‚æ„å»ºé«˜è¦†ç›–ç‡çš„æµ‹è¯•ç”¨ä¾‹ã€‚</p><p>è½¯ä»¶è¦†ç›–ç‡çš„æ¦‚å¿µå¾ˆæ—©å°±æœ‰äººæå‡ºæ¥äº†ã€‚ä½†æ˜¯å°†å…¶åº”ç”¨åˆ°æ·±åº¦å­¦ä¹ ç³»ç»Ÿä¸­æ¥ï¼Œè¿˜æ˜¯æœ€è¿‘å‡ å¹´çš„äº‹æƒ…ã€‚æœ€æ—©æå‡ºæ·±åº¦å­¦ä¹ ç³»ç»Ÿè¦†ç›–ç‡çš„è®ºæ–‡æ˜¯<a href="https://superlova.github.io/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91DeepXplore-Automated-Whitebox-Testing-of-Deep-Learning-Systems/">è¿™ç¯‡</a>ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹æˆ‘çš„é˜…è¯»ç¬”è®°ã€‚</p><p>éšååˆæœ‰äººå®šä¹‰äº†äº”èŠ±å…«é—¨çš„è¦†ç›–ç‡ï¼Œå¯ä»¥çœ‹æˆ‘çš„<a href="https://superlova.github.io/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Deep-Gauge-Multi-Granularity-Testing-Criteria-for-Deep-Learning-Systems/">è¿™ç¯‡</a>è®ºæ–‡ã€<a href="https://superlova.github.io/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91DeepTest-Automated-Testing-of-Deep-Neural-Network-driven-Autonomous-Cars/">è¿™ç¯‡</a>è®ºæ–‡å’Œ<a href="https://superlova.github.io/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91DeepCT-Tomographic-Combinatorial-Testing-for-Deep-Learning-Systems/">è¿™ç¯‡</a>è®ºæ–‡çš„é˜…è¯»ç¬”è®°ã€‚</p><p>å…³äºRNNçš„è¦†ç›–ç‡ï¼Œå½“å‰ç ”ç©¶çš„ä¸å¤šï¼Œæœ¬æ–‡å°±ç®—ä¸€ä¸ªã€‚</p><h2 id="æœ¬æ–‡ä¸»è¦è´¡çŒ®"><a href="#æœ¬æ–‡ä¸»è¦è´¡çŒ®" class="headerlink" title="æœ¬æ–‡ä¸»è¦è´¡çŒ®"></a>æœ¬æ–‡ä¸»è¦è´¡çŒ®</h2><ul><li><p>æå‡ºä¸‰ä¸ªLSTMçš„ç»“æ„è¦†ç›–ç‡æŒ‡æ ‡ã€‚</p></li><li><p>å‘ç°è¦†ç›–ç‡è¶Šé«˜çš„æ ·æœ¬è¶Šå®¹æ˜“ä»¤æ¨¡å‹å‡ºé”™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé”™è¯¯æ ·æœ¬ç”Ÿæˆç‡å’Œæœ¬æ–‡å®šä¹‰çš„è¦†ç›–ç‡ä¹‹é—´å‘ˆæ­£ç›¸å…³ã€‚</p></li><li><p>æå‡ºçš„ä¸‰ä¸ªè¦†ç›–ç‡æŒ‡æ ‡ä¸ä»…éƒ½èƒ½æœ‰æ•ˆåœ°æ•æ‰LSTMçš„é”™è¯¯ï¼ˆäº§ç”Ÿä»¤æ¨¡å‹å‡ºé”™çš„æ ·æœ¬ï¼‰ï¼Œä¸”ä¸‰ä¸ªè¦†ç›–ç‡çš„æµ‹è¯•ç›®æ ‡æœ‰æ‰€ä¸åŒã€‚ä¸‰è€…ç›¸äº’è¡¥å……ï¼Œæ‰©å±•äº†æµ‹è¯•çš„å¤šæ ·æ€§ã€‚</p></li><li><p>åˆ©ç”¨testRNNå·¥å…·ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹èƒ½åœ¨ç›®æ ‡RNNæ¨¡å‹ä¸Šè¾¾åˆ°é«˜è¦†ç›–ç‡ã€‚</p></li><li><p>è§£é‡Šäº†æµ‹è¯•æŒ‡æ ‡èƒŒåçš„è¯­ä¹‰å«ä¹‰ï¼ˆsemantic metricsï¼‰ï¼Œèƒ½å¸®åŠ©ç†è§£LSTMã€‚</p></li></ul><h1 id="äºŒã€LSTMç»“æ„æ€§è¦†ç›–ç‡æŒ‡æ ‡"><a href="#äºŒã€LSTMç»“æ„æ€§è¦†ç›–ç‡æŒ‡æ ‡" class="headerlink" title="äºŒã€LSTMç»“æ„æ€§è¦†ç›–ç‡æŒ‡æ ‡"></a>äºŒã€LSTMç»“æ„æ€§è¦†ç›–ç‡æŒ‡æ ‡</h1><h3 id="LSTMç»“æ„ä¿¡æ¯"><a href="#LSTMç»“æ„ä¿¡æ¯" class="headerlink" title="LSTMç»“æ„ä¿¡æ¯"></a>LSTMç»“æ„ä¿¡æ¯</h3><p>LSTMä¸­æœ‰å“ªäº›ä¿¡æ¯å€¼å¾—å…³æ³¨ï¼Ÿ</p><p>éšçŠ¶æ€$\boldsymbol{h}$å¯ä»¥ä»£è¡¨LSTMçš„çŸ­æœŸè®°å¿†ï¼ŒéšçŠ¶æ€$\boldsymbol{c}$åˆ™ä»£è¡¨ç›¸å¯¹é•¿æœŸçš„è®°å¿†ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œ$\boldsymbol{f}$ã€$\boldsymbol{i}$ã€$\boldsymbol{o}$ä¸‰ä¸ªé—¨çš„ä¿¡æ¯ä¹Ÿå€¼å¾—å…³æ³¨ã€‚</p><ul><li>é—å¿˜é—¨$\boldsymbol{f}<em>{t}$æ§åˆ¶ä¸Šä¸€ä¸ªæ—¶åˆ»çš„å†…éƒ¨çŠ¶æ€ $\boldsymbol{c}</em>{t-1}$ éœ€è¦é—å¿˜å¤šå°‘ä¿¡æ¯ï¼›</li><li>è¾“å…¥é—¨$\boldsymbol{i}<em>{t}$æ§åˆ¶å½“å‰æ—¶åˆ»çš„å€™é€‰çŠ¶æ€ Ìƒ$\tilde{\boldsymbol{c}}</em>{t}$ æœ‰å¤šå°‘ä¿¡æ¯éœ€è¦ä¿å­˜ã€‚</li><li>è¾“å‡ºé—¨ $\boldsymbol{o}<em>{t}$ æ§åˆ¶å½“å‰æ—¶åˆ»çš„å†…éƒ¨çŠ¶æ€ $\boldsymbol{c}</em>{t}$ æœ‰å¤šå°‘ä¿¡æ¯éœ€è¦è¾“å‡ºç»™å¤–éƒ¨çŠ¶æ€ $\boldsymbol{h}_{t}$</li></ul><p>$\boldsymbol{i}<em>{t}$è¶Šå¤§ã€$\boldsymbol{f}</em>{t}$è¶Šå°ï¼Œä»£è¡¨æ­¤æ—¶çš„è¾“å…¥å¯¹é•¿æœŸè®°å¿†å½±å“è¶Šå¤§ï¼Œæ¨¡å‹æ•´ä½“ä¸Šå€¾å‘äºé—å¿˜è¿‡å»è®°ä½çš„é•¿æœŸè®°å¿†$\boldsymbol{c}<em>{t-1}$ï¼Œè€Œä»£æ›¿ä»¥æœ€æ–°å­¦åˆ°çš„çŸ­æœŸè®°å¿†$\tilde{\boldsymbol{c}}</em>{t}$ã€‚</p><p>å¦‚æœ$\boldsymbol{i}<em>{t}$æ‰€æœ‰åˆ†é‡éƒ½ä¸º1ï¼Œ$\boldsymbol{f}</em>{t}$éƒ½ä¸º0ï¼Œåˆ™ä»£è¡¨åœ¨è¯¥æ—¶åˆ»$t$çš„è¾“å…¥å¯¹æ¨¡å‹è®°å¿†å½±å“å¾ˆå¤§ï¼Œæ¨¡å‹é€‰æ‹©å¿˜è®°é•¿æœŸè®°å¿†è€Œå…¨ç›˜æ¥å—æ­¤æ—¶å­¦åˆ°çš„çŸ­æœŸè®°å¿†ã€‚è®°å¿†å•å…ƒå°†å†å²ä¿¡æ¯æ¸…ç©ºï¼Œå¹¶å°†å€™é€‰çŠ¶æ€å‘é‡$\tilde{\boldsymbol{c}}_{t}$å†™å…¥ã€‚</p><p>å½“$\boldsymbol{f}<em>{t}=\mathbf{1}, \boldsymbol{i}</em>{t}=\mathbf{0}$æ—¶ï¼Œè®°å¿†å•å…ƒå°†å¤åˆ¶ä¸Šä¸€æ—¶åˆ»çš„å†…å®¹ï¼Œä¸å†™å…¥æ–°çš„ä¿¡æ¯ã€‚</p><p>ä¸ºäº†é‡åŒ–ä»LSTMå•å…ƒçš„ç»“æ„ä¸­æŠ½è±¡å‡ºæ¥çš„ä¿¡æ¯å€¼ï¼Œå®šä¹‰ç»“æ„ä¿¡æ¯è¡¨ç¤ºç¬¦å·ï¼š</p><ul><li>å®šä¹‰$\mathcal{S}={f, i, o, c, h}$ä¸ºäº”ç§ä¸åŒçš„ç»“æ„ä¿¡æ¯é›†åˆï¼Œä»£è¡¨äº”ä¸ªå¯å­¦ä¹ çš„ç½‘ç»œå‚æ•°ï¼›</li><li>$s$ä»£è¡¨$\mathcal{S}$ä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œè¡¨æ˜æµ‹è¯•ç›®æ ‡ï¼›</li><li>å®šä¹‰$\mathcal{A}={+,-, \mathrm{avg}}$ä¸ºå–æ­£ã€å–è´Ÿå’Œå–å¹³å‡ä¸‰ç§è®¡ç®—æ–¹æ³•æ„æˆçš„é›†åˆï¼›</li><li>$a$ä»£è¡¨$\mathcal{A}$ä¸­çš„ä»»æ„ä¸€ä¸ªæŠ½è±¡å‡½æ•°ï¼›</li><li>$t$ä»£è¡¨æ—¶é—´æ­¥ï¼›</li><li>$x$ä»£è¡¨è¾“å…¥çš„æµ‹è¯•ç”¨ä¾‹ã€‚</li></ul><p>æ ¹æ®æµ‹è¯•ç›®æ ‡ä¸åŒã€è®¡ç®—æ–¹æ³•ä¸åŒï¼Œæ„å»ºç»“æ„ä¿¡æ¯è¡¨ç¤ºç¬¦å·å¦‚ä¸‹ï¼š</p><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Coverage-Guided-Testing-for-Recurrent-Neural-Networks/2020-06-20-17-15-06.png" alt></p><p>è¯¥ç¬¦å·è¡¨ç¤ºï¼Œæ¨¡å‹è¾“å…¥$x$ï¼Œåœ¨$t$æ—¶é—´æ­¥ï¼Œè¢«æµ‹å‚æ•°$s$ç»è¿‡$a$çš„è®¡ç®—æ–¹æ³•å–å¾—çš„ç»“æœã€‚</p><p><strong>ä¾‹å­1ï¼š</strong><br>$\xi<em>{t}^{h,+}$ä»£è¡¨$t$æ—¶é—´æ­¥æ—¶ï¼ŒéšçŠ¶æ€$h$çš„åˆ†é‡ä¸­æ‰€æœ‰æ­£åˆ†é‡çš„å’Œï¼›$\xi</em>{t}^{h,-}$ä»£è¡¨$t$æ—¶é—´æ­¥æ—¶ï¼ŒéšçŠ¶æ€$h$çš„åˆ†é‡ä¸­æ‰€æœ‰è´Ÿåˆ†é‡çš„å’Œã€‚</p><script type="math/tex; mode=display">\begin{array}{l}\xi_{t}^{h,+}=\sum\left\{h_{t}(i)\left|i \in\left\{1, \ldots,\left|h_{t}\right|\right\}, h_{t}(i)>0\right\}\right. \\\xi_{t}^{h,-}=\sum\left\{h_{t}(i)\left|i \in\left\{1, \ldots,\left|h_{t}\right|\right\}, h_{t}(i)<0\right\}\right.\end{array}</script><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Coverage-Guided-Testing-for-Recurrent-Neural-Networks/2020-06-20-20-27-56.png" alt></p><p><strong>ä¾‹å­2ï¼š</strong><br>$\xi_{t}^{f, \mathrm{avg}}$åˆ™ä»£è¡¨$t$æ—¶é—´æ­¥æ—¶ï¼Œé—å¿˜é—¨$f$çš„æ‰€æœ‰åˆ†é‡çš„å¹³å‡å€¼ã€‚</p><script type="math/tex; mode=display">\xi_{t}^{f, a v g}=\frac{1}{\left|f_{t}\right|} \sum_{i=1}^{\left|f_{t}\right|} f_{t}(i)</script><p><strong>ä¾‹å­3ï¼š</strong><br>ä»¥è¾“å…¥é—¨$\boldsymbol{i}$ä¸¾ä¾‹æ¥è¯´ï¼Œ$\xi_{x,t}^{i, \mathrm{avg}}&gt;0.9$å°±æ˜¯æŒ‡è¾“å…¥æµ‹è¯•ç”¨ä¾‹$x$åˆ°æ¨¡å‹ï¼Œåœ¨$t$æ—¶é—´æ­¥æ—¶ï¼Œå°†æ­¤æ—¶$\boldsymbol{i}$å‘é‡çš„æ‰€æœ‰åˆ†é‡å–å¹³å‡ï¼Œå¾—åˆ°å¹³å‡å€¼å¤§äº0.9çš„é‚£äº›æ—¶é—´æ­¥å¯¹åº”çš„å‘é‡ã€‚å³ï¼š</p><script type="math/tex; mode=display">\{ \boldsymbol{i}_{t} | \frac{1}{\boldsymbol{D}}\sum_{k=1}^{D}\boldsymbol{i}_{t,k} > 0.9, t=1,\dots,|x|\}</script><p>å«ä¹‰ä¸º{$\xi$ | $t$æ—¶åˆ»$\boldsymbol{i}$çš„åˆ†é‡å¹³å‡å€¼å¤§å°$&gt;0.9$}</p><p>ç”±æ­¤æˆ‘ä»¬å¾—åˆ°äº†ä¸‰ä¸ªè¦†ç›–ç‡çš„å®šä¹‰ï¼š</p><h3 id="Boundary-Coverage-BC"><a href="#Boundary-Coverage-BC" class="headerlink" title="Boundary Coverage (BC)"></a>Boundary Coverage (BC)</h3><p>Boundary Coverageè¡¡é‡ç»“æ„ä¿¡æ¯$\xi^{s,a}_{x,t}$ä¸­æç«¯æƒ…å†µçš„å‡ºç°é¢‘åº¦ã€‚</p><script type="math/tex; mode=display">\mathrm{BC}=\frac{|\left\{\xi_{t}^{s, a} \geq v_{\max }, \quad \xi_{t}^{s, a} \leq v_{\min } | t \in\{1,\dots,n\}\right\}|}{|\left\{\xi^{s,a}_{t} | t \in\{1,\dots,n\} \right\}|}</script><p>å¼ä¸­ï¼Œ$v<em>{max}$å’Œ$v</em>{min}$æ˜¯é˜ˆå€¼ï¼Œå¯ä»¥å–è®­ç»ƒæ—¶äº§ç”Ÿçš„æœ€å¤§å’Œæœ€å°å€¼ã€‚å½“ç„¶è¿™åªæ˜¯å…¶ä¸­ä¸€ç§å–æ³•ï¼Œå®Œå…¨å¯ä»¥è‡ªå·±é€‰æ‹©æœ€å¤§é˜ˆå€¼å’Œæœ€å°é˜ˆå€¼ã€‚</p><h3 id="Step-wise-Coverage-SC"><a href="#Step-wise-Coverage-SC" class="headerlink" title="Step-wise Coverage (SC)"></a>Step-wise Coverage (SC)</h3><p>é‡åŒ–å•æ­¥æ—¶é—´è¯­ä¹‰ï¼Œå³ç ”ç©¶ä¸€æ®µæ—¶é—´çš„æ”¹å˜ã€‚é¦–å…ˆå®šä¹‰</p><script type="math/tex; mode=display">\Delta \xi_{t}^{s}=\left|\xi_{t}^{s,+}-\xi_{t-1}^{s,+}\right|+\left|\xi_{t}^{s,-}-\xi_{t-1}^{s,-}\right|</script><p>åˆ†åˆ«è®¡ç®—å‰åæ—¶é—´æ­¥çš„æ­£$\xi$ä¹‹å·®ä¸è´Ÿ$\xi$ä¹‹å·®ï¼Œä¹Ÿå°±æ˜¯è¡¡é‡çŸ­æœŸè®°å¿†çš„æ”¹å˜ç¨‹åº¦ã€‚è¯¥å€¼è¶Šå¤§ä»£è¡¨è¯¥æ—¶é—´æ­¥æ—¶çŸ­æœŸè®°å¿†å˜åŒ–è¿‡å¤§ã€‚ç”±æ­¤å®šä¹‰SCï¼š</p><script type="math/tex; mode=display">\mathrm{SC}=\frac{|\left\{\Delta \xi_{t}^{s} \geq v_{\mathrm{SC}} | t \in\{1,\dots,n\}\right\}|}{|\left\{\xi^{s}_{t} | t \in\{1,\dots,n\} \right\}|}</script><p>å¼ä¸­ï¼Œ$v_{\mathrm{sc}}$ä¹Ÿæ˜¯å¯ä»¥è‡ªå®šä¹‰çš„é˜ˆå€¼ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé€‰å–è®­ç»ƒè¿‡ç¨‹ä¸­èƒ½è¾¾åˆ°çš„æœ€å¤§å€¼ï¼Œå½“åšæµ‹è¯•æ—¶çš„é˜ˆå€¼ã€‚</p><h3 id="Temporal-Coverage-TC"><a href="#Temporal-Coverage-TC" class="headerlink" title="Temporal Coverage (TC)"></a>Temporal Coverage (TC)</h3><p>é‡åŒ–æ•´ä½“æ—¶é—´è¯­ä¹‰ã€‚é¦–å…ˆå®šä¹‰æ‰€æœ‰æ—¶é—´æ­¥çš„$\xi$ç»„æˆçš„å‘é‡é›†åˆä¸ºï¼š</p><script type="math/tex; mode=display">\xi^{s, a}=\left\{\xi_{t}^{s, a}\right\}_{t=1}^{n}</script><script type="math/tex; mode=display">\xi^{s, a}\in \mathbb{R}^{|x|\times \boldsymbol{D}}</script><p>ç„¶åé€šè¿‡ç»Ÿè®¡è®­ç»ƒæ—¶æ¨¡å‹çš„$\xi^{s, a}$å€¼ï¼Œå°†æ•°æ®ä»å®æ•°åŸŸå‹ç¼©æˆnåˆ†ç±»æ•°æ®ï¼š</p><script type="math/tex; mode=display">\xi^{s, a}\in [1,2,\dots,n]^{|x|\times \boldsymbol{D}}</script><p>åœ¨æœ¬æ–‡ä¸­ç”¨åˆ°çš„å‹ç¼©æ‰‹æ®µæ˜¯é€šè¿‡æ‹Ÿåˆè®­ç»ƒé›†å¾—åˆ°çš„åˆ†å¸ƒï¼Œç„¶åå°†æ‹Ÿåˆçš„æ­£æ€åˆ†å¸ƒåˆ‡æˆä¸‰ä¸ªåŒºé—´ã€‚å½“è¾“å…¥æµ‹è¯•é›†æ—¶ï¼Œå¾—åˆ°çš„$\xi$ä¸­çš„å„ä¸ªåˆ†é‡è½åˆ°å“ªä¸ªåŒºé—´å°±å˜æˆé‚£ä¸ªå€¼ã€‚</p><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Coverage-Guided-Testing-for-Recurrent-Neural-Networks/2020-06-20-20-27-17.png" alt></p><p>è¿™æ ·åšçš„ç›®çš„æ˜¯ç®€åŒ–æ•°æ®è®¡ç®—ï¼Œæ–¹ä¾¿åˆ†ææ—¶é—´æ­¥æé•¿çš„æ—¶åºæ•°æ®ã€‚</p><p>TCå³ä¸ºè½åˆ°å¯¹åº”åŒºé—´çš„å‘é‡å æ€»æ—¶é—´æ­¥çš„æ¯”ä¾‹ã€‚</p><h2 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h2><h3 id="ä¸»ä½“ç®—æ³•"><a href="#ä¸»ä½“ç®—æ³•" class="headerlink" title="ä¸»ä½“ç®—æ³•"></a>ä¸»ä½“ç®—æ³•</h3><p>ç®—æ³•æ•´ä½“æ¶æ„ï¼š</p><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Coverage-Guided-Testing-for-Recurrent-Neural-Networks/2020-06-20-20-24-03.png" alt></p><p>ä¼ªä»£ç ï¼š</p><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Coverage-Guided-Testing-for-Recurrent-Neural-Networks/2020-06-20-20-19-35.png" alt></p><p>ç®—æ³•1çš„ä¸»ä½“æ˜¯ä¸€ä¸ªè¿­ä»£å¾ªç¯ï¼ˆç¬¬5-10è¡Œï¼‰ï¼Œåªè¦æ²¡æœ‰è¾¾åˆ°ç›®æ ‡è¦†ç›–æ°´å¹³ï¼ˆç¬¬4è¡Œï¼‰ï¼Œè¯¥å¾ªç¯å°±ä¼šç»§ç»­ã€‚</p><p>åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œä»è¾“å…¥é˜Ÿåˆ—ï¼ˆç¬¬5è¡Œï¼‰ä¸­é€‰æ‹©ä¸€ä¸ªæµ‹è¯•è¾“å…¥xï¼Œå¹¶æŒ‰ç…§é¢„å®šä¹‰çš„å˜å¼‚å‡½æ•°mï¼ˆç¬¬6è¡Œï¼‰å¯¹å…¶è¿›è¡Œå˜å¼‚ã€‚ </p><p>æ–°ç”Ÿæˆçš„æµ‹è¯•è¾“å…¥å°†æ·»åŠ åˆ°è¾“å…¥è¯­æ–™åº“Tï¼ˆç¬¬7è¡Œï¼‰ä¸­ï¼Œåœ¨æ­¤å¤„è¿›ä¸€æ­¥é€‰æ‹©å®ƒä»¬å¹¶å°†å®ƒä»¬æ’åºä»¥è¿›è¡Œä¸‹ä¸€æ¬¡è¿­ä»£ã€‚</p><p>æ­¤åï¼Œå°†è°ƒç”¨Test Oracleæ¥ç¡®å®šç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹æ˜¯å¦ä»£è¡¨ç½‘ç»œé”™è¯¯ï¼ˆç¬¬9-10è¡Œï¼‰ã€‚</p><h3 id="Step-1-Selection-policies-and-queuing"><a href="#Step-1-Selection-policies-and-queuing" class="headerlink" title="Step 1: Selection policies and queuing"></a>Step 1: Selection policies and queuing</h3><p>æ‰€æœ‰è¾“å…¥æ ·æœ¬çš„é‡è¦æ€§å¹¶ä¸ç›¸åŒï¼Œæœ‰äº›æ ·æœ¬æ›´å®¹æ˜“çªå˜äº§ç”Ÿè¦†ç›–ç‡é«˜çš„å˜å¼‚æ ·æœ¬ã€‚å› æ­¤è¦ç»™è¾“å…¥æ ·æœ¬é›†åˆæ’åºã€‚</p><p>testRNNä¼˜å…ˆè€ƒè™‘çªå˜ç”Ÿæˆä»¥ä¸‹ä¸¤ç§æµ‹è¯•è¾“å…¥ï¼š</p><ul><li>æ»¡è¶³æ›´å¤šæµ‹è¯•æ¡ä»¶ï¼ˆtest conditionsï¼‰çš„æ ·æœ¬ï¼ˆå³ï¼Œä½¿å¾—è¦†ç›–ç‡ä¸Šå‡çš„æµ‹è¯•æ ·æœ¬ï¼‰</li><li>æ›´å¯èƒ½å¯¼è‡´æ¨¡å‹å‡ºé”™çš„æ ·æœ¬ï¼Œæ¯”å¦‚å¯¹æŠ—æ ·æœ¬</li></ul><p>æœ¬æ–‡é‡‡ç”¨çš„çªå˜ç®—æ³•ï¼Œä½¿ç”¨çš„æ˜¯å…¶ä»–çš„ç”Ÿæˆå¯¹æŠ—æ ·æœ¬çš„ç®—æ³•ã€‚</p><h3 id="Step-2-Mutation"><a href="#Step-2-Mutation" class="headerlink" title="Step 2: Mutation"></a>Step 2: Mutation</h3><p>TESTRNNæµ‹è¯•ç”¨ä¾‹ç”Ÿæˆçš„æ ¸å¿ƒæ˜¯å…¶Mutatorå¼•æ“ã€‚</p><p>éšæœºå˜å¼‚å’Œæ ¹æ®RNNå†…éƒ¨ä¿¡æ¯è€Œç‰¹å®šè®¾è®¡çš„å˜å¼‚ç­–ç•¥å‡å·²é€šè¿‡ç®—æ³•1ä¸­çš„å˜å¼‚å‡½æ•°må®ç°ã€‚åœ¨ä¸‹æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è¯¦ç»†è®¨è®ºTESTRNNä¸­çš„å˜å¼‚ç­–ç•¥ã€‚</p><h4 id="Random-Mutation"><a href="#Random-Mutation" class="headerlink" title="Random Mutation"></a>Random Mutation</h4><p>å¯¹äºè¿ç»­è¾“å…¥çš„é—®é¢˜ï¼Œä¾‹å¦‚MNISTæ‰‹å†™å›¾åƒè¯†åˆ«ï¼Œæˆ‘ä»¬å‘è¾“å…¥ä¸­æ·»åŠ äº†å…·æœ‰å›ºå®šå‡å€¼å’Œæ–¹å·®çš„é«˜æ–¯å™ªå£°ï¼Œå¹¶æœŸæœ›å˜å¼‚åçš„è¾“å…¥ä¿æŒå…¶åŸå§‹åˆ†ç±»ã€‚</p><p>ç„¶è€Œï¼Œå¯¹äºç¦»æ•£è¾“å…¥çš„é—®é¢˜ï¼Œä¾‹å¦‚å¯¹IMDBç”µå½±è¯„è®ºçš„æƒ…æ„Ÿåˆ†æï¼ŒIMDBæ¨¡å‹çš„è¾“å…¥æ˜¯å•è¯åºåˆ—ï¼Œå…¶ä¸Šçš„éšæœºå˜åŒ–å¯èƒ½å¯¼è‡´æ— æ³•è¯†åˆ«ï¼ˆä¸”æ— æ•ˆï¼‰çš„æ–‡æœ¬æ®µè½ã€‚ </p><p>ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ä»<a href="https://superlova.github.io/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91EDA-Easy-Data-Augmentation-Techniques-for-Boosting-Performance-on-Text-Classification-Tasks/">EDAå·¥å…·åŒ…</a>ä¸­é€‰å–äº†ä¸€ç»„çªå˜ä½“ï¼Œè¯¥çªå˜ä½“æœ€åˆæ—¨åœ¨å¢åŠ è®­ç»ƒæ•°æ®ä»¥æ”¹è¿›æ–‡æœ¬åˆ†ç±»ä»»åŠ¡ã€‚ è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œæˆ‘ä»¬å§‹ç»ˆå¯ä»¥ç¡®ä¿å˜å¼‚çš„æ–‡æœ¬æ®µè½æœ‰æ•ˆã€‚ </p><p>åœ¨æˆ‘ä»¬çš„å®éªŒä¸­ï¼Œæˆ‘ä»¬è€ƒè™‘äº†å››ä¸ªçªå˜æ“ä½œï¼Œå³MåŒ…æ‹¬ï¼ˆ1ï¼‰åŒä¹‰è¯æ›¿æ¢ï¼Œï¼ˆ2ï¼‰éšæœºæ’å…¥ï¼Œï¼ˆ3ï¼‰éšæœºäº¤æ¢ï¼Œï¼ˆ4ï¼‰éšæœºåˆ é™¤ã€‚ æ–‡æœ¬å«ä¹‰åœ¨æ‰€æœ‰çªå˜ä¸­å‡ä¿ç•™ã€‚</p><p>æˆ‘ä»¬å®šä¹‰äº†ä¸€ç»„çªå˜å‡½æ•°ã€‚åœ¨æ–°è¿­ä»£çš„å¼€å§‹ï¼ˆç®—æ³•1ä¸­çš„5-10è¡Œï¼‰ï¼Œmç”±Mä¸­çš„ä¸€ä¸ªå‡½æ•°éšæœºå®ä¾‹åŒ–ã€‚</p><h4 id="Targeted-Mutation"><a href="#Targeted-Mutation" class="headerlink" title="Targeted Mutation"></a>Targeted Mutation</h4><p>å½“éšæœºçªå˜éš¾ä»¥æé«˜è¦†ç›–ç‡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç›®æ ‡çªå˜ï¼Œä»…å½“æ–°æµ‹è¯•ç”¨ä¾‹åœ¨æŸäº›é¢„å®šä¹‰çš„è¦†ç›–æŸå¤±å‡½æ•°ä¸Šä¼˜äºç°æœ‰æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œæ‰é€‰æ‹©æ–°çš„æµ‹è¯•ç”¨ä¾‹ã€‚ </p><p>å¯¹äºå…³äºæŸäº›$s\in\mathcal{S}$å’Œ$a\in\mathcal{A}$çš„ä¸‰ç±»æµ‹è¯•æ¡ä»¶ï¼ˆBCï¼ŒSCï¼ŒTCï¼‰ï¼Œæˆ‘ä»¬å°†è¦†ç›–æŸå¤±å‡½æ•°å®šä¹‰ä¸ºåˆ°å®ƒä»¬å„è‡ªç›®æ ‡çš„è·ç¦»ï¼Œä¾‹å¦‚</p><script type="math/tex; mode=display">\begin{array}{l}J_{B C}(x)=\xi_{x, t}^{s, a}-v_{\max } \\J_{S C}(x)=\Delta \xi_{x, t}^{s}-v_{\mathrm{SC}} \\J_{T C}(x)=\left\|u_{x}^{\left[t_{1}, t_{2}\right]}-u_{\text {target}}\right\|_{0}\end{array}</script><p>ï¼Œå…¶ä¸­$t$ï¼Œ$t<em>1$ï¼Œ$t_2$ä¸º å¯ä»¥ä»ä¸Šä¸‹æ–‡ä¸­æ¨æ–­å‡ºçš„æ—¶é—´æ­¥é•¿ï¼Œ$u</em>{x}^{[t1ï¼Œt2]}$è¡¨ç¤ºè¾“å…¥ä¸º$x$æ—¶ï¼Œåœ¨æ—¶é—´æ®µ[t1ï¼Œt2]å†…æ‰€æœ‰$\xi^{s,a}$çš„ç¬¦å·è¡¨ç¤ºï¼Œè€Œ$u_{\text{target}}$æ˜¯ç›®æ ‡ç¬¦å·è¡¨ç¤ºã€‚ $\left|u_1âˆ’u_2\right|_0$æ˜¯æ±‰æ˜è·ç¦»ï¼Œè®¡ç®—ä¸¤ä¸ªç¬¦å·è¡¨ç¤ºå½¢å¼$u_1$å’Œ$u_2$ä¹‹é—´ä¸åŒå…ƒç´ çš„æ•°é‡ã€‚ </p><p>ç›´è§‰ä¸Šï¼Œè¦†ç›–æŸå¤±$J(x)$ç”¨æ¥ä¼°è®¡è¾¾åˆ°æœªæ»¡è¶³æµ‹è¯•æ¡ä»¶çš„è·ç¦»ã€‚ </p><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Coverage-Guided-Testing-for-Recurrent-Neural-Networks/2020-06-22-20-01-26.png" alt></p><p>é€šè¿‡ç”Ÿæˆæ—¨åœ¨é€æ­¥å‡å°‘æŸå¤±çš„æµ‹è¯•ç”¨ä¾‹ï¼Œç›®æ ‡çªå˜æ˜¯ä¸€ç§è´ªå©ªçš„æœç´¢ç®—æ³•ã€‚</p><h3 id="Step-3-Test-Oracle"><a href="#Step-3-Test-Oracle" class="headerlink" title="Step 3: Test Oracle"></a>Step 3: Test Oracle</h3><p>oracleçš„ä¸­æ–‡æœ¯è¯­ä¸ºâ€œç»“æœå‚ç…§ç‰©â€ï¼Œåœ¨è½¯ä»¶æµ‹è¯•ä¸­ä¹Ÿå°±æ˜¯ç¨‹åºé¢„æœŸè¾“å‡ºã€‚</p><p>é€šå¸¸ä½¿ç”¨æµ‹è¯•é¢„è¨€ (Test Oracle) æ¥ç¡®å®šæµ‹è¯•ç”¨ä¾‹æ˜¯å¦é€šè¿‡ã€‚ç»™å®šä¸€ä¸ªç³»ç»Ÿçš„è¾“å…¥ï¼Œå¦‚ä½•åŒºåˆ†ç›¸åº”çš„æœŸæœ›çš„ã€æ­£ç¡®çš„è¡Œä¸ºå’Œæ½œåœ¨çš„ä¸æ­£ç¡®è¡Œä¸ºï¼Œè¢«ç§°ä¸º â€œTest Oracle Problemâ€ï¼ˆæµ‹è¯•é¢„è¨€é—®é¢˜ï¼‰ã€‚ä¹‹æ‰€ä»¥æµ‹è¯•é¢„è¨€åœ¨è½¯ä»¶æµ‹è¯•ä¸­æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œä¸»è¦è¿˜æ˜¯å…¶éš¾ä»¥è‡ªåŠ¨åŒ–ï¼Œå¯¼è‡´è½¯ä»¶æµ‹è¯•äººå‘˜é‡‡ç”¨è‚‰çœ¼äººå·¥æµ‹è¯•ï¼Œæ•ˆç‡æä½ã€‚</p><p>å¯¹äºtestRNNï¼Œæµ‹è¯•é¢„è¨€åŒ…å«ä¸¤ä¸ªæ¡ä»¶ï¼š</p><p>(1) ä¸xâ€™åŸæµ‹è¯•ç”¨ä¾‹xç›¸å·®å°äºæŒ‡å®šè·ç¦»ï¼Œå³$\left|x-xâ€™\right|<em>p\leq\alpha</em>{oracle}$;<br>(2) æ¨¡å‹ç»™å‡ºçš„åˆ†ç±»ä¸åŸé˜¿æ¥ä¸åŒï¼Œå³$\phi(x)\neq\phi(xâ€™)$;</p><p>æˆ‘ä»¬å°±æŠŠ$xâ€™$è¿™ç§æ²¡èƒ½é€šè¿‡æµ‹è¯•é¢„è¨€çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæˆä¸º<strong>å¯¹æŠ—æ ·æœ¬</strong>ã€‚</p><p>æ¡ä»¶(1)ä½¿ç”¨ä¸€ä¸ªé™å®šæ¡ä»¶(constraint)æ¥ç¡®å®šç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹ä¸ä¼šè¢«äººç±»å¯Ÿè§‰ï¼Œæ¡ä»¶(2)åˆ™ç¡®ä¿ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹èƒ½å¤Ÿä»¤æ¨¡å‹å‡ºé”™ã€‚</p><blockquote><p>ï¼ï¼æ³¨æ„ï¼Œè¿™é‡Œå…¶å®é»˜è®¤äº†ä¸€ä»¶äº‹ï¼Œé‚£å°±æ˜¯å¯¹æ·±åº¦å­¦ä¹ æ¨¡å‹çš„æµ‹è¯•è¿‡ç¨‹ï¼Œå°±æ˜¯æ‰¾å¯¹æŠ—æ ·æœ¬çš„è¿‡ç¨‹ã€‚ä½†æˆ‘ä¸ªäººå¯¹è¿™ç§ç›®çš„å­˜ç–‘ã€‚</p></blockquote><p>ç»™å®šä¸€ä¸ªLSTMç½‘ç»œå’Œä¸€ä¸ªç‰¹å®šçš„æµ‹è¯•æŒ‡æ ‡ï¼Œä¸€æ—¦ç”Ÿæˆäº†æµ‹è¯•ç”¨ä¾‹ï¼Œé‚£ä¹ˆ<strong>æ”»å‡»ç‡</strong>å°±æ˜¯æœªé€šè¿‡é¢„è¨€çš„æµ‹è¯•ç”¨ä¾‹çš„ç™¾åˆ†æ¯”ã€‚</p><p><strong>adversary rate:</strong><br>ç”Ÿæˆæµ‹è¯•æ ·ä¾‹ä¸­å¯¹æŠ—æ ·æœ¬æ‰€å æ¯”ä¾‹ã€‚</p><p><strong>coverage rate:</strong><br>ç”Ÿæˆæµ‹è¯•æ ·ä¾‹ä¸­æ»¡è¶³è¦†ç›–ç‡è¦æ±‚çš„æ ·ä¾‹æ‰€å æ¯”ä¾‹ã€‚</p><h1 id="ä¸‰ã€è¯„ä¼°-Evaluate-Research-Questions"><a href="#ä¸‰ã€è¯„ä¼°-Evaluate-Research-Questions" class="headerlink" title="ä¸‰ã€è¯„ä¼° Evaluate: Research Questions"></a>ä¸‰ã€è¯„ä¼° Evaluate: Research Questions</h1><p>RQ1. ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦æ–°çš„è¦†ç›–ç‡æŒ‡æ ‡ï¼šNCä¸è¡Œ<br>RQ2. è¦†ç›–ç‡å’Œå¯¹æŠ—æ ·æœ¬çš„å…³ç³»<br>RQ3. è¦†ç›–ç‡èƒ½å¤Ÿå‘ç°ä¸åŒçš„RNNé”™è¯¯å—ï¼Ÿ<br>RQ4. æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆç®—æ³•èƒ½è¾¾åˆ°é«˜è¦†ç›–ç‡å—<br>RQ5. å˜å¼‚åŠå¾„å’Œå¯¹æŠ—æ ·æœ¬ç”Ÿæˆç‡çš„å…³ç³»<br>RQ6. è¿™äº›æµ‹è¯•æŒ‡æ ‡å’Œæµ‹è¯•ç»“æœèƒ½å¸®åŠ©è§£é‡ŠLSTMå†…éƒ¨å†³ç­–é€»è¾‘å—ï¼Ÿ</p><h2 id="å®éªŒè®¾ç½®"><a href="#å®éªŒè®¾ç½®" class="headerlink" title="å®éªŒè®¾ç½®"></a>å®éªŒè®¾ç½®</h2><h3 id="å¾…æµ‹æ¨¡å‹"><a href="#å¾…æµ‹æ¨¡å‹" class="headerlink" title="å¾…æµ‹æ¨¡å‹"></a>å¾…æµ‹æ¨¡å‹</h3><p>ä½œè€…è®­ç»ƒäº†å››ç§ä¸åŒçš„æ¨¡å‹ï¼Œåˆ†åˆ«å¯¹åº”æ‰‹å†™æ•°å­—è¯†åˆ«ä»»åŠ¡ã€æƒ…æ„Ÿåˆ†ç±»ä»»åŠ¡ã€åŒ–å­¦åˆ†å­å¼äº²æ²¹æ€§é¢„æµ‹ä»»åŠ¡ã€äººä½“å§¿åŠ¿è¯†åˆ«ä»»åŠ¡ã€‚ä¸åŒä»»åŠ¡ä¸‹ï¼Œæ¨¡å‹æœ‰äº›è®¸ä¸åŒï¼Œä½†éƒ½ä½¿ç”¨äº†LSTMå±‚ã€‚</p><h3 id="æµ‹è¯•æŒ‡æ ‡"><a href="#æµ‹è¯•æŒ‡æ ‡" class="headerlink" title="æµ‹è¯•æŒ‡æ ‡"></a>æµ‹è¯•æŒ‡æ ‡</h3><ul><li>BC ($\xi^{f, avg}_{t}$)</li><li>SC ($\Delta\xi^{h}_{t}$)</li><li>TC+ ($\xi^{h,+}_{t}$)</li><li>TC- ($\xi^{h,-}_{t}$)</li></ul><h3 id="å˜å¼‚æ–¹æ³•"><a href="#å˜å¼‚æ–¹æ³•" class="headerlink" title="å˜å¼‚æ–¹æ³•"></a>å˜å¼‚æ–¹æ³•</h3><ul><li>æ‰‹å†™æ•°å­—è¯†åˆ«ä»»åŠ¡ï¼Œåœ¨è¾“å…¥å›¾åƒä¸­éšæœºåŠ å…¥é«˜æ–¯å™ªå£°ã€‚</li><li>æƒ…æ„Ÿåˆ†ç±»ä»»åŠ¡ï¼Œä½¿ç”¨<a href="https://superlova.github.io/2020/06/02/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91EDA-Easy-Data-Augmentation-Techniques-for-Boosting-Performance-on-Text-Classification-Tasks/">EDAå·¥å…·åŒ…</a>å¯¹æ–‡æœ¬è¿›è¡Œå˜å¼‚ã€‚</li><li>åŒ–å­¦åˆ†å­å¼äº²æ²¹æ€§é¢„æµ‹ä»»åŠ¡ï¼Œé‡‡ç”¨PythonåŒ–å­¦ä¿¡æ¯å­¦åŒ…RDkitå¯¹åŒ–å­¦å¼è¿›è¡Œå˜å¼‚ã€‚</li><li>äººä½“å§¿åŠ¿è¯†åˆ«ä»»åŠ¡ï¼Œåœ¨åŸå§‹è§†é¢‘å¸§ä¸­æ·»åŠ é«˜æ–¯å™ªå£°ã€‚</li></ul><h3 id="å˜å¼‚è·ç¦»é™åˆ¶"><a href="#å˜å¼‚è·ç¦»é™åˆ¶" class="headerlink" title="å˜å¼‚è·ç¦»é™åˆ¶"></a>å˜å¼‚è·ç¦»é™åˆ¶</h3><p>ä¸ºäº†é˜²æ­¢ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹å½»åº•æ”¹å˜è¯­ä¹‰ï¼Œæˆ–è€…æ˜¯ä¸ºäº†é™ä½å˜åŠ¨è¢«äººç±»å¯Ÿè§‰çš„å¯èƒ½æ€§ï¼Œæˆ‘ä»¬å¿…é¡»å¯¹å˜å¼‚æœ¬èº«åŠ ä»¥é™åˆ¶ã€‚</p><p>$\alpha_{oracle}$è¶Šå¤§ï¼Œå¯¹å˜å¼‚çš„é™åˆ¶è¶Šå®½ï¼Œç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹ä¸åŸæµ‹è¯•ç”¨ä¾‹å·®åˆ«ä¹Ÿå°±è¶Šå¤§ã€‚</p><ul><li>æ‰‹å†™æ•°å­—è¯†åˆ«ä»»åŠ¡ï¼Œæ¬§æ°è·ç¦»é™åˆ¶$\alpha_{oracle} = 0.005$</li><li>æƒ…æ„Ÿåˆ†ç±»ä»»åŠ¡ï¼Œ$\alpha_{oracle} = 0.05$</li><li>åŒ–å­¦åˆ†å­å¼äº²æ²¹æ€§é¢„æµ‹ä»»åŠ¡ï¼Œ$\alpha_{oracle} = \infty$ï¼Œå¯¹å˜å¼‚ä¸åŠ é™åˆ¶ï¼Œèƒ½å¦é€šè¿‡Oracleå®Œå…¨å–å†³äºåˆ†ç±»ç»“æœã€‚</li><li>äººä½“å§¿åŠ¿è¯†åˆ«ä»»åŠ¡ï¼Œ$\alpha_{oracle} = 0.1$</li></ul><h2 id="RQ1-ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦æ–°çš„è¦†ç›–ç‡æŒ‡æ ‡"><a href="#RQ1-ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦æ–°çš„è¦†ç›–ç‡æŒ‡æ ‡" class="headerlink" title="RQ1. ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦æ–°çš„è¦†ç›–ç‡æŒ‡æ ‡"></a>RQ1. ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦æ–°çš„è¦†ç›–ç‡æŒ‡æ ‡</h2><p>ç­”ï¼šå› ä¸ºä¼ ç»Ÿçš„NCä¸è¡Œã€‚</p><p>é¦–å…ˆè¦ä»‹ç»ä¸€ä¸‹NCæ˜¯ä»€ä¹ˆã€‚</p><p>NCæ˜¯<a href="https://superlova.github.io/2020/06/20/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91DeepXplore-Automated-Whitebox-Testing-of-Deep-Learning-Systems/">DeepXploreè®ºæ–‡</a>ä¸­æå‡ºçš„ä¸€ç§æœ´ç´ åœ°è®¡ç®—ç¥ç»ç½‘ç»œè¦†ç›–ç‡çš„æ–¹æ³•ï¼Œé€‚ç”¨äºå‰é¦ˆç¥ç»ç½‘ç»œçš„å…¨è¿æ¥å±‚ã€‚</p><p>è¾“å…¥æµ‹è¯•ç”¨ä¾‹xï¼ŒæŸä¸€å±‚ç¥ç»ç½‘ç»œçš„ç¥ç»å…ƒè¦†ç›–ç‡ä¸ºï¼š</p><script type="math/tex; mode=display">\text{Neuron Coverage}=\frac{\text{Activated Neurons}}{\text{All Neurons}}</script><p>å¦‚æœè¾“å…¥ä¸€æ‰¹æµ‹è¯•ç”¨ä¾‹ï¼Œæ­¤æ—¶åªè¦æ¿€æ´»è¿‡ä¸€æ¬¡çš„ç¥ç»å…ƒéƒ½ç®—ä½œActivated Neuronsã€‚å› æ­¤éšç€æµ‹è¯•ç”¨ä¾‹å˜å¤šï¼ŒNCè¦†ç›–ç‡ä¼šå…ˆå‡é«˜ã€åè¶‹è¿‘äº100%ã€‚</p><p>åœ¨å¾ªç¯ç¥ç»ç½‘ç»œä¸­å¦‚ä½•è®¡ç®—è¦†ç›–ç‡ï¼Ÿå¦‚æœæˆ‘ä»¬å°†ä¸€ä¸ªLSTMç½‘ç»œç»“æ„æŠ½è±¡ä¸ºä¸€å±‚ï¼Œé‚£ä¹ˆè¯¥å±‚çš„è¾“å‡ºå‘é‡å°±æ˜¯æœ€åçš„éšå˜é‡$h$ã€‚</p><p>è¦†ç›–ç‡çš„è®¡ç®—æ–¹æ³•å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\text{Neuron Coverage}=\frac{\left|\{ i | h(i) > \text{threshold} \}\right|}{\left|\{ i | h(i) \}\right|}</script><p>ä¸‹é¢åˆ†åˆ«æ˜¯ä¸‰ç§ä¸åŒä»»åŠ¡ä¸‹ï¼Œéšç€è¾“å…¥æµ‹è¯•ç”¨ä¾‹å˜å¤šï¼Œè¦†ç›–ç‡çš„å˜åŒ–æ›²çº¿ã€‚</p><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Coverage-Guided-Testing-for-Recurrent-Neural-Networks/2020-06-22-20-21-51.png" alt></p><p>å¯ä»¥çœ‹åˆ°è¦†ç›–ç‡æ›²çº¿ä¸è®ºåœ¨å“ªä¸ªä»»åŠ¡ï¼Œéƒ½å¾ˆå¿«å°±ä¸Šå‡åˆ°100%ã€‚è¿™ç§è¦†ç›–ç‡æ²¡æœ‰åŒºåˆ†åº¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæµ‹è¯•ç”¨ä¾‹å¥½ä¸åæ— æ³•å‡­å€Ÿè¦†ç›–ç‡åŒºåˆ†å¼€ã€‚æ‰€ä»¥è¿™ç§è¦†ç›–ç‡æ— æ³•æ»¡è¶³æˆ‘ä»¬å¼•å¯¼æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆçš„éœ€è¦ã€‚</p><h2 id="RQ2-è¦†ç›–ç‡å’Œå¯¹æŠ—æ ·æœ¬çš„å…³ç³»"><a href="#RQ2-è¦†ç›–ç‡å’Œå¯¹æŠ—æ ·æœ¬çš„å…³ç³»" class="headerlink" title="RQ2. è¦†ç›–ç‡å’Œå¯¹æŠ—æ ·æœ¬çš„å…³ç³»"></a>RQ2. è¦†ç›–ç‡å’Œå¯¹æŠ—æ ·æœ¬çš„å…³ç³»</h2><blockquote><p>æ­¤å¤„æˆ‘åˆæœ‰ç–‘é—®ï¼Œç”Ÿæˆäº†å¯¹æŠ—æ ·æœ¬å°±ä¸€å®šä»£è¡¨æ¨¡å‹æœ‰ç¼ºé™·å—ï¼Ÿç”Ÿæˆå¯¹æŠ—æ ·æœ¬çš„éš¾åº¦ä¸æ¨¡å‹çš„å¥½åæœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿè¿™ç¯‡è®ºæ–‡å¹¶æ²¡æœ‰å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œè€Œæ˜¯é»˜è®¤äº†â€œå¯¹æŠ—æ ·æœ¬ç”Ÿæˆå°±ä»£è¡¨æ¨¡å‹çš„é”™è¯¯â€ï¼Œå¹¶æ ¹æ®è¿™ä¸ªå‘½é¢˜èµ°ä¸‹å»äº†ã€‚</p></blockquote><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Coverage-Guided-Testing-for-Recurrent-Neural-Networks/2020-06-22-20-40-25.png" alt></p><p>ä¸Šè¡¨ä¸­ï¼Œåˆ†åˆ«ä»¥ä¸‰ä¸ªæ¨¡å‹çš„æµ‹è¯•ä»»åŠ¡ï¼Œè¯´æ˜äº†å¯¹æŠ—æ ·æœ¬çš„ç¡®èƒ½å¤Ÿä½¿å¾—è¦†ç›–ç‡ä¸Šå‡ã€‚</p><ul><li>200(O)ä»£è¡¨Originalï¼ŒæœªåŠ æ‰°åŠ¨çš„åŸå§‹æ ·æœ¬</li><li>200(N)ä»£è¡¨Normalï¼ŒåŠ äº†æ‰°åŠ¨ï¼Œä½†æ˜¯æ²¡æœ‰æ”¹å˜æ ‡ç­¾çš„è‰¯æ€§å˜å¼‚æ ·æœ¬</li><li>200(A)ä»£è¡¨Adversarialï¼ŒåŠ äº†æ‰°åŠ¨å¹¶ä¸”ä»¤æ¨¡å‹é”™è¯¯çš„å¯¹æŠ—æ ·æœ¬</li></ul><p>SC/BC/TC+/TC-åˆ†åˆ«æ˜¯ä¹‹å‰å®šä¹‰çš„å››ç§ä¸åŒçš„è¦†ç›–ç‡ã€‚</p><p>åœ¨è¡¨æ ¼ä¸­ï¼Œè‰¯æ€§å˜å¼‚æ ·æœ¬çš„è¦†ç›–ç‡æ¯”æœªåŠ æ‰°åŠ¨çš„è¦†ç›–ç‡é«˜ï¼Œå¯¹æŠ—æ ·æœ¬çš„è¦†ç›–ç‡æ¯”è‰¯æ€§å˜å¼‚æ ·æœ¬çš„è¦†ç›–ç‡åˆé«˜ã€‚å› æ­¤å¯ä»¥è¯´æ˜ï¼Œå¯¹æŠ—æ ·æœ¬çš„ç¡®èƒ½ä½¿å¾—è¦†ç›–ç‡ä¸Šå‡ã€‚</p><blockquote><p>å…¶å®ç›¸å…³æ€§ä¹Ÿä¸æ˜¯ç‰¹åˆ«æ˜¾è‘—ã€‚ã€‚ã€‚</p></blockquote><h2 id="RQ3-è¦†ç›–ç‡èƒ½å¤Ÿå‘ç°ä¸åŒçš„RNNé”™è¯¯å—ï¼Ÿ"><a href="#RQ3-è¦†ç›–ç‡èƒ½å¤Ÿå‘ç°ä¸åŒçš„RNNé”™è¯¯å—ï¼Ÿ" class="headerlink" title="RQ3. è¦†ç›–ç‡èƒ½å¤Ÿå‘ç°ä¸åŒçš„RNNé”™è¯¯å—ï¼Ÿ"></a>RQ3. è¦†ç›–ç‡èƒ½å¤Ÿå‘ç°ä¸åŒçš„RNNé”™è¯¯å—ï¼Ÿ</h2><p>è¿™ä¸ªé—®é¢˜æ˜¯æƒ³é—®ï¼Œä¸åŒçš„è¦†ç›–ç‡çš„æµ‹è¯•ç›®æ ‡æ˜¯å¦æœ‰å·®åˆ«ï¼Ÿæ¯•ç«Ÿå¦‚æœåªæ˜¯é’ˆå¯¹åŒä¸€ç›®æ ‡è¿›è¡Œæµ‹è¯•ï¼Œé‚£ä¹ˆä¸åŒçš„è¦†ç›–ç‡åªæ˜¯æ•°å­¦æ¸¸æˆç½¢äº†ã€‚</p><p>è®¾è®¡å®éªŒï¼Œåˆ†åˆ«ä»¥SC/BC/TC+/TC-ä¸ºæŒ‡æ ‡ï¼ŒåŠ›å›¾åœ¨ä¿è¯é«˜è¦†ç›–ç‡çš„åŒæ—¶ï¼Œæœ€å°åŒ–æµ‹è¯•ç”¨ä¾‹æ•°ç›®ã€‚</p><p>é‚£ä¹ˆå¦‚æœä»¥SCä¸ºç›®æ ‡æœ€å°åŒ–çš„æµ‹è¯•ç”¨ä¾‹é›†åˆï¼Œä¸èƒ½ä½¿å¾—å…¶ä»–è¦†ç›–ç‡å‡é«˜ï¼Œå°±èƒ½åœ¨æŸç§ç¨‹åº¦ä¸Šè¯´æ˜ï¼ŒSCçš„æµ‹è¯•ç›®æ ‡ä¸å…¶ä»–ä¸‰ç§è¦†ç›–ç‡æœ‰æ‰€ä¸åŒã€‚</p><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Coverage-Guided-Testing-for-Recurrent-Neural-Networks/2020-06-22-21-02-39.png" alt></p><blockquote><p>è¿™ä¸ªå®éªŒè®¾è®¡è¿˜æ˜¯æ¯”è¾ƒç²¾å¦™çš„ï¼Œå€¼å¾—å€Ÿé‰´å…¶æ€è·¯</p></blockquote><p>ä»è¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œä»¥å„è‡ªè¦†ç›–ç‡ä¸ºä¼˜åŒ–ç›®æ ‡çš„æœ€å°æµ‹è¯•é›†åˆï¼Œéƒ½ä¸èƒ½ä½¿å¾—å…¶ä»–è¦†ç›–ç‡å¾—åˆ°å¾ˆå¤§æå‡ã€‚ä»è€Œå¯ä»¥ä»ä¾§é¢ä½è¯ä½œè€…çš„æƒ³æ³•ã€‚</p><p>å®é™…ä¸Šï¼ŒBCè€ƒè™‘çš„æ˜¯æŠ½è±¡ä¿¡æ¯çš„å€¼ï¼ŒSCè€ƒè™‘çš„æ˜¯å€¼çš„å•æ­¥å˜åŒ–ï¼ŒTCè€ƒè™‘çš„æ˜¯å€¼çš„å¤šæ­¥å˜åŒ–ã€‚</p><p>å®ƒä»¬çš„è®¾è®¡æ¶µç›–äº†RNNçš„æ—¶é—´è¯­ä¹‰çš„ä¸åŒæ–¹é¢ã€‚</p><h2 id="RQ4-æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆç®—æ³•èƒ½è¾¾åˆ°é«˜è¦†ç›–ç‡çš„åŒæ—¶ç”Ÿæˆå¯¹æŠ—æ ·æœ¬å—"><a href="#RQ4-æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆç®—æ³•èƒ½è¾¾åˆ°é«˜è¦†ç›–ç‡çš„åŒæ—¶ç”Ÿæˆå¯¹æŠ—æ ·æœ¬å—" class="headerlink" title="RQ4. æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆç®—æ³•èƒ½è¾¾åˆ°é«˜è¦†ç›–ç‡çš„åŒæ—¶ç”Ÿæˆå¯¹æŠ—æ ·æœ¬å—"></a>RQ4. æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆç®—æ³•èƒ½è¾¾åˆ°é«˜è¦†ç›–ç‡çš„åŒæ—¶ç”Ÿæˆå¯¹æŠ—æ ·æœ¬å—</h2><p>è¿™ä¸ªé—®é¢˜æ˜¯æƒ³é—®è¯¥æ–¹æ³•çš„æœ‰æ•ˆæ€§ã€‚ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢è¯æ˜æµ‹è¯•æ¡ˆä¾‹ç”Ÿæˆçš„æœ‰æ•ˆæ€§ï¼š(1) å®ç°é«˜è¦†ç›–ç‡å¹¶éæ˜“äº‹ï¼ˆè¯æ˜å…¶ä»–æ–¹æ³•çš„æ— æ•ˆæ€§ï¼‰; (2) åœ¨ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹ä¸­æœ‰ç›¸å½“æ•°é‡çš„å¯¹æŠ—æ ·æœ¬ã€‚</p><p>éšæœºçªå˜ä¸èƒ½æå‡æµ‹è¯•ç”¨ä¾‹çš„è¦†ç›–ç‡ï¼Œéœ€è¦æœ‰é’ˆå¯¹æ€§çš„çªå˜ï¼ˆå³é€šè¿‡è¦†ç›–çŸ¥è¯†å¢å¼ºçš„éšæœºçªå˜ï¼‰æ¥æé«˜è¦†ç›–ç‡</p><p>è€ƒè™‘äº†ä¸‰ç§æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆæ–¹æ³•ï¼š</p><ul><li>ï¼ˆSIï¼‰å¯¹æ¥è‡ªè®­ç»ƒæ•°æ®é›†çš„500ä¸ªç§å­è¾“å…¥è¿›è¡Œé‡‡æ ·ï¼›</li><li>ï¼ˆRMï¼‰é€šè¿‡ä½¿ç”¨éšæœºçªå˜ (random mutation) ä»500ä¸ªç§å­ä¸­ç”Ÿæˆ2000ä¸ªæµ‹è¯•æ¡ˆä¾‹ï¼›</li><li>ï¼ˆTMï¼‰é€šè¿‡ä½¿ç”¨é’ˆå¯¹æ€§çªå˜ (target mutation) ä»500ä¸ªç§å­ä¸­ç”Ÿæˆ2000ä¸ªæµ‹è¯•æ¡ˆä¾‹ã€‚</li></ul><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Coverage-Guided-Testing-for-Recurrent-Neural-Networks/2020-06-22-21-14-17.png" alt></p><p>è¡¨æ ¼ä¸­è¡¨æ˜åªæœ‰target mutationå¾—åˆ°çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæ‰èƒ½å¤Ÿä½¿å¾—è¦†ç›–ç‡è¾¾åˆ°æœ€é«˜å€¼ã€‚</p><p>å¦å¤–ä»è¡¨æ ¼å¯ä»¥çœ‹åˆ°ï¼Œtarget mutationæ¯”å…¶ä»–æ–¹æ³•æ›´é«˜æ•ˆåœ°ç”Ÿæˆäº†å¯¹æŠ—æ ·æœ¬ã€‚</p><h2 id="RQ5-å˜å¼‚åŠå¾„å’Œå¯¹æŠ—æ ·æœ¬ç”Ÿæˆç‡çš„å…³ç³»"><a href="#RQ5-å˜å¼‚åŠå¾„å’Œå¯¹æŠ—æ ·æœ¬ç”Ÿæˆç‡çš„å…³ç³»" class="headerlink" title="RQ5. å˜å¼‚åŠå¾„å’Œå¯¹æŠ—æ ·æœ¬ç”Ÿæˆç‡çš„å…³ç³»"></a>RQ5. å˜å¼‚åŠå¾„å’Œå¯¹æŠ—æ ·æœ¬ç”Ÿæˆç‡çš„å…³ç³»</h2><p>å¦‚æœå°†æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹å½“ä½œæŸä¸ªé«˜ç»´ç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹ï¼Œé‚£ä¹ˆä»¥åŸæµ‹è¯•ç”¨ä¾‹ä¸ºåœ†å¿ƒã€ä»¥å˜å¼‚è·ç¦»$\alpha_{oracle}$ä¸ºåŠå¾„ç”»ä¸€ä¸ªçƒï¼Œè¿™ä¸ªçƒçš„å†…éƒ¨å°±æ˜¯æˆ‘ä»¬èƒ½å¿å—çš„å˜å¼‚æ ·æœ¬çš„ç”ŸæˆåŒºåŸŸã€‚</p><p>ç›´è§‚ä¸Šï¼Œå¯¹æŠ—æ ·æœ¬ç”Ÿæˆç‡éšå˜å¼‚åŠå¾„å•è°ƒå¢åŠ ã€‚å®éªŒç»“æœä¹Ÿè¯æ˜è¿™ä¸€ç‚¹ã€‚</p><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Coverage-Guided-Testing-for-Recurrent-Neural-Networks/2020-06-22-21-21-33.png" alt></p><p>æ ¹æ®å˜å¼‚è·ç¦»ä¸å¯¹æŠ—æ ·æœ¬ç”Ÿæˆç‡çš„å˜åŒ–æ›²çº¿ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°æœ‰ç”¨çš„ç»“è®ºï¼š</p><p>æ›²çº¿çš„æ–œç‡ã€é¢ç§¯ç­‰å¯ç”¨äºè¡¡é‡æ¨¡å‹é²æ£’æ€§ã€‚é™¡å³­æ›²çº¿è¯´æ˜é²æ£’æ€§å·®ï¼Œå¤§é¢ç§¯è¯´æ˜é²æ£’æ€§å·®ã€‚</p><h2 id="RQ6-è¿™äº›æµ‹è¯•æŒ‡æ ‡å’Œæµ‹è¯•ç»“æœèƒ½å¸®åŠ©è§£é‡ŠLSTMå†…éƒ¨å†³ç­–é€»è¾‘å—ï¼Ÿ"><a href="#RQ6-è¿™äº›æµ‹è¯•æŒ‡æ ‡å’Œæµ‹è¯•ç»“æœèƒ½å¸®åŠ©è§£é‡ŠLSTMå†…éƒ¨å†³ç­–é€»è¾‘å—ï¼Ÿ" class="headerlink" title="RQ6. è¿™äº›æµ‹è¯•æŒ‡æ ‡å’Œæµ‹è¯•ç»“æœèƒ½å¸®åŠ©è§£é‡ŠLSTMå†…éƒ¨å†³ç­–é€»è¾‘å—ï¼Ÿ"></a>RQ6. è¿™äº›æµ‹è¯•æŒ‡æ ‡å’Œæµ‹è¯•ç»“æœèƒ½å¸®åŠ©è§£é‡ŠLSTMå†…éƒ¨å†³ç­–é€»è¾‘å—ï¼Ÿ</h2><h3 id="MNISTæ‰‹å†™æ•°å­—è¯†åˆ«æ¨¡å‹çš„è¦†ç›–ç‡åˆ†æ"><a href="#MNISTæ‰‹å†™æ•°å­—è¯†åˆ«æ¨¡å‹çš„è¦†ç›–ç‡åˆ†æ" class="headerlink" title="MNISTæ‰‹å†™æ•°å­—è¯†åˆ«æ¨¡å‹çš„è¦†ç›–ç‡åˆ†æ"></a>MNISTæ‰‹å†™æ•°å­—è¯†åˆ«æ¨¡å‹çš„è¦†ç›–ç‡åˆ†æ</h3><p>ä¸‹å›¾æ˜¯MNISTæ‰‹å†™æ•°å­—è¯†åˆ«ä»»åŠ¡åˆ©ç”¨LSTMæ¨¡å‹å®ç°ï¼Œæ¨ªåæ ‡æ˜¯28ä¸ªInput Featureï¼ˆå…¶å®æ˜¯æ¯å¼ ç…§ç‰‡å¯¹åº”28è¡Œåƒç´ å‘é‡ï¼‰ï¼ŒLSTMå±‚å°†æ¯ä¸ªInput Featureä¾æ¬¡è¯»å…¥ï¼Œæ¯”å¦‚æ—¶é—´æ­¥t=1çš„æ—¶å€™è¯»å…¥ç¬¬ä¸€è¡Œï¼Œt=2è¯»å…¥ç¬¬äºŒè¡Œï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p>çºµåæ ‡åˆ™æ˜¯è¦†ç›–æ¬¡æ•°ã€‚Step-wise Coverageçš„è®¡ç®—æ–¹æ³•è¿˜è®°å¾—å—ï¼Ÿ</p><script type="math/tex; mode=display">\mathrm{SC}=\left\{\Delta \xi_{t}^{s} \geq v_{\mathrm{SC}} | t \in\{1,\dots,n\}\right\}</script><p>å½“æˆ‘ä»¬è¾“å…¥ä¸€å¼ å›¾ç‰‡ï¼Œè¿™28ä¸ªInput Featureå°±ä¼šåˆ†æˆ28ä¸ªæ—¶é—´æ­¥ï¼Œæ¯ä¸ªæ—¶é—´æ­¥éƒ½ä¼šè®¡ç®—æ˜¯å¦æ»¡è¶³SCã€‚å½“æˆ‘ä»¬ç»§ç»­è¾“å…¥æ•´ä¸ªæµ‹è¯•é›†ï¼Œæ¯ä¸ªæ—¶é—´æ­¥çš„æ»¡è¶³æ¬¡æ•°ç´¯åŠ èµ·æ¥ï¼Œå°±æ˜¯çºµåæ ‡ã€‚</p><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Coverage-Guided-Testing-for-Recurrent-Neural-Networks/2020-06-22-21-22-22.png" alt></p><p>åŒç†ï¼ŒBoundary Coverageä¹Ÿæ˜¯å¦‚æ­¤è®¡ç®—Coverage Timesã€‚</p><p>æˆ‘ä»¬å¯ä»¥åˆ†æå·¦å›¾SCçš„å˜åŒ–ï¼š</p><ul><li>å¼€å§‹å’Œç»“å°¾çš„Featureä»£è¡¨å›¾åƒè¾¹ç¼˜ï¼ŒSCè¦†ç›–ç‡ä½ä»£è¡¨æ¨¡å‹ä¸å­¦ä¹ ï¼›</li><li>ç¬¬4å’Œç¬¬7ä¸ªFeatureå¾€å¾€å®¹æ˜“å‡ºç°æ•æ„Ÿåƒç´ ï¼›</li><li>æ¨¡å‹åœ¨æœ€åå‡ ä¸ªæ—¶é—´æ­¥æ‹’ç»å­¦ä¹ æ–°çŸ¥è¯†ï¼ˆåªç”¨è€çŸ¥è¯†å°±åˆ¤æ–­è¿™å¼ å›¾æ˜¯ä»€ä¹ˆæ•°å­—ï¼‰ã€‚</li></ul><p>å³å›¾æ˜¯BCçš„å˜åŒ–ï¼ˆ$v_{\max}$æ•…æ„é€‰æ‹©æ¯”è¾ƒé«˜çš„0.85ï¼‰ï¼š</p><ul><li>å¼€å§‹æ—¶å­¦æ–°çš„ã€å¿˜æ—§çš„ï¼›</li><li>é•¿æœŸè®°å¿†$c_t$å¾€å¾€åœ¨æ—¶é—´åºåˆ—ç»“æŸæ—¶æ‡’æ•£åœ°æ›´æ–°</li></ul><p>è¿™ä¹Ÿä¸BCååº”é•¿æœŸè®°å¿†ã€SCååº”çŸ­æœŸè®°å¿†ç›¸å»åˆã€‚</p><h3 id="IMDbæƒ…æ„Ÿåˆ†ææ¨¡å‹çš„è¦†ç›–ç‡åˆ†æ"><a href="#IMDbæƒ…æ„Ÿåˆ†ææ¨¡å‹çš„è¦†ç›–ç‡åˆ†æ" class="headerlink" title="IMDbæƒ…æ„Ÿåˆ†ææ¨¡å‹çš„è¦†ç›–ç‡åˆ†æ"></a>IMDbæƒ…æ„Ÿåˆ†ææ¨¡å‹çš„è¦†ç›–ç‡åˆ†æ</h3><p>ä¸‹å›¾æ˜¯IMDbæƒ…æ„Ÿåˆ†ææ¨¡å‹çš„è¦†ç›–ç‡å›¾ï¼š</p><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91Coverage-Guided-Testing-for-Recurrent-Neural-Networks/2020-06-22-21-40-00.png" alt></p><p>IMDbæƒ…æ„Ÿåˆ†ææ¨¡å‹çš„è¾“å…¥æ˜¯é•¿åº¦ä¸º500çš„æ•´å‹æ•°ç»„ï¼Œæ¯ä¸ªæ•´æ•°ä»£è¡¨ä¸€ä¸ªå•è¯æ¯ä¸ªå•è¯ä¸ºä¸€ä¸ªfeatureï¼Œä¸Šé¢ä¸¤ä¸ªæ˜¯æœ€å50ä¸ªfeatureçš„å›¾ï¼Œåº•ä¸‹ä¸¤å¼ å›¾æ˜¯æ‰€æœ‰500ä¸ªfeatureçš„å›¾ã€‚</p><p>å…³äº<a href="https://superlova.github.io/2020/06/09/%E3%80%90%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB%E3%80%91IMDb%E6%95%B0%E6%8D%AE%E9%9B%86%E7%9A%84%E9%A2%84%E5%A4%84%E7%90%86/">IMDbå½±è¯„æƒ…æ„Ÿåˆ†ç±»ä»»åŠ¡çš„LSTMæ¨¡å‹è§£å†³æ–¹æ¡ˆ</a>ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„è¿™ç¯‡åšå®¢æ–‡ç« ã€‚</p><p>æ¯”è¾ƒMNISTä»»åŠ¡å¯çŸ¥ï¼ŒIMDbä»»åŠ¡æ¨¡å‹ä¸åƒMNISTä»»åŠ¡æ¨¡å‹é‚£æ ·æœ‰å›ºå®šçš„å·¥ä½œæ¨¡å¼ï¼Œæ–‡æœ¬ä¸­çš„æ•æ„Ÿè¯å¯èƒ½ä¼šå‡ºç°åœ¨æ–‡æœ¬çš„ä»»ä½•åœ°æ–¹</p><h1 id="å››ã€æ€»ç»“"><a href="#å››ã€æ€»ç»“" class="headerlink" title="å››ã€æ€»ç»“"></a>å››ã€æ€»ç»“</h1><p>è¿™ç¯‡æ–‡çŒ®é˜…è¯»æŠ¥å‘Šæˆ‘é¸½äº†å¥½ä¹…ï¼Œä»3æœˆ25å·å†³å®šå†™ï¼Œåˆ°ç°åœ¨6æœˆ22å·åˆæ­¥å†™å®Œã€‚å…¶å®è¿™ç¯‡è®ºæ–‡æˆ‘åœ¨å»å¹´çš„æ—¶å€™å°±å·²ç»æ‰“å°å‡ºæ¥ï¼Œç²—ç•¥åœ°è¯»è¿‡ä¸€éï¼›å»å¹´å¹´åº•è¦å¼€é¢˜çš„æ—¶å€™åˆä»”ç»†åœ°è¯»äº†ä¸€éï¼Œä½†æ˜¯é‚£æ¬¡å¹¶æ²¡æœ‰åƒè¿™æ¬¡ä¸€æ ·ï¼Œè¯»æ‡‚å†…éƒ¨çš„æ‰€æœ‰ç»†èŠ‚ã€‚</p><p>é€šè¿‡è¿™æ¬¡ç¼–å†™æ–‡çŒ®é˜…è¯»æŠ¥å‘Šçš„è¿‡ç¨‹ï¼Œæˆ‘èƒ½æ„Ÿè§‰åˆ°è‡ªå·±å¯¹è¿™ç¯‡è®ºæ–‡çš„ç†è§£æ›´æ·±å…¥äº†ï¼Œä¸€ä¸ªé‡è¦çš„æ ‡å¿—å°±æ˜¯æˆ‘èƒ½å¤Ÿä½“ä¼šè¿™ç¯‡è®ºæ–‡å†…éƒ¨çš„ç¼ºé™·å’Œæ¼æ´ï¼Œä»¥åŠç¡®å®šäº†å€¼å¾—æ·±æŒ–çš„æ–¹å‘ã€‚</p><p>æ˜¾ç„¶ä¸å¯èƒ½æ¯ç¯‡è®ºæ–‡éƒ½å¦‚æ­¤é˜…è¯»ï¼Œé‰´äºè¿™ç¯‡è®ºæ–‡å¯¹æˆ‘çš„å·¥ä½œæœ‰æŒ‡å¯¼æ„ä¹‰ï¼Œæ‰€ä»¥ä¹‹å‰çš„å·¥ä½œä¸ä¼šç™½è´¹ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>paper</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RNN</tag>
      
      <tag>testing</tag>
      
      <tag>testRNN</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€è®ºæ–‡é˜…è¯»ç¬”è®°ã€‘RNN-Test Adversarial Testing Framework for Recurrent Neural Network Systems</title>
    <link href="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91RNN-Test-Adversarial-Testing-Framework-for-Recurrent-Neural-Network-Systems/"/>
    <url>/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91RNN-Test-Adversarial-Testing-Framework-for-Recurrent-Neural-Network-Systems/</url>
    
    <content type="html"><![CDATA[<p>æ¸…åå¤§å­¦å’ŒåŒ—é‚®ä½œè€…å…±è‘—çš„å¤§ä½œï¼Œæ€æƒ³æŒºæ–°é¢–ä½†æ˜¯è‡³ä»Šä¸ºæ­¢éƒ½æ˜¯æŒ‚åœ¨arxivä¸Šã€‚è¯»å®Œä¹‹åç»™äººæ„Ÿè§‰åƒæ˜¯è‰ç¨¿ï¼Œæœºç¿»è‰²å½©ä¸¥é‡â€¦â€¦<br><!--more---></p><h1 id="1-å¼•è¨€"><a href="#1-å¼•è¨€" class="headerlink" title="1. å¼•è¨€"></a>1. å¼•è¨€</h1><p>è¿‘å¹´æ¥å¯¹äºå¯¹æŠ—æ ·æœ¬çš„ç ”ç©¶ä¸»è¦é›†ä¸­äºå›¾åƒé¢†åŸŸï¼Œå°‘éƒ¨åˆ†é›†ä¸­åœ¨éŸ³é¢‘é¢†åŸŸã€‚è€Œè¿™ä¸¤ç§é¢†åŸŸçš„çªå˜æ”»å‡»ï¼Œéƒ½å±€é™äºDNNæ¨¡å‹ï¼ŒRNNæ¨¡å‹çš„å¯¹æŠ—æ ·æœ¬ç”Ÿæˆåˆ™é²œæœ‰ç ”ç©¶ï¼ˆå½“æ—¶ï¼‰ã€‚</p><p>RNNçš„å¯¹æŠ—æµ‹è¯•é¢ä¸´æŸäº›æŒ‘æˆ˜ï¼Œæ¦‚æ‹¬ä¸ºä¸‰æ–¹é¢ï¼š</p><ul><li>é¦–å…ˆï¼Œæ²¡æœ‰æ˜æ˜¾çš„ç±»åˆ«æ ‡ç­¾ï¼Œå°±æ²¡æœ‰è§„åˆ™æ¥è¯†åˆ«å¯¹æŠ—æ ·æœ¬ã€‚å› æ­¤ä¼ ç»Ÿçš„å¯¹æŠ—æ€§æµ‹è¯•å¯¹äºæ–‡æœ¬ç”Ÿæˆæ¨¡å‹ç­‰æ— èƒ½ä¸ºåŠ›ã€‚</li><li>å…¶æ¬¡ï¼Œäººç±»èƒ½å¤Ÿå¯Ÿè§‰åœ¨æ–‡æœ¬ä¸Šçš„å¾®å°ä¿®æ”¹ï¼Œä¸”æ–‡æœ¬æ‰°åŠ¨å¾ˆéš¾ä¿è¯è¯­ä¹‰ä¸å‘ç”Ÿå˜åŒ–ã€‚</li><li>ç¬¬ä¸‰ï¼Œç°æœ‰çš„åŸºäºCNNçš„åŸºäºç¥ç»å…ƒçš„è¦†ç›–åº¦é‡æœªèƒ½è€ƒè™‘RNNç»“æ„çš„ç‰¹å¾ï¼Œå› æ­¤æ— æ³•ç›´æ¥å€Ÿé‰´ã€‚</li></ul><p>æœ¬æ–‡è´¡çŒ®ä¸»è¦æœ‰ä»¥ä¸‹å››ç‚¹ï¼š</p><ul><li>é’ˆå¯¹RNNçš„ç‰¹å®šè®¡ç®—é€»è¾‘ï¼Œå®šä¹‰ä¸‰ä¸ªè¦†ç›–ç‡æŒ‡æ ‡ï¼›</li><li>é‡‡ç”¨è¦†ç›–ç‡æŒ‡å—æ¥è·å–æ‰°åŠ¨ï¼Œæå‡ºstate inconsistency orientationä½œä¸ºå¼•å¯¼å¯¹æŠ—æ ·æœ¬ç”Ÿæˆçš„æ–¹å‘ï¼Œç”Ÿæˆå¯¹æŠ—æ ·æœ¬ï¼›</li><li>æå‡ºäº†ä¸€ç§é’ˆå¯¹RNNçš„é€šç”¨å¯¹æŠ—æµ‹è¯•æ¡†æ¶RNN-Testï¼›</li><li>åˆ©ç”¨RNN-Testæµ‹è¯•å¹¶ä¼˜åŒ–äº†PTBè¯­è¨€æ¨¡å‹å’Œæ‹¼å†™æ£€æŸ¥å™¨æ¨¡å‹ã€‚</li></ul><p>æœ¬æ–‡æå‡ºçš„æ–°é¢–æ€æƒ³æœ‰ï¼š</p><ul><li>åœ¨æ•´ä¸ªè¾“å…¥ä¸­ï¼Œæˆ‘ä»¬ä»…ä¿ç•™ä¸€ä¸ªå•è¯/å­—ç¬¦çš„æ‰°åŠ¨å³å¯è¿›è¡Œä¿®æ”¹ï¼Œä»è€Œç¡®ä¿äº†å¾®å°çš„ä¿®æ”¹ã€‚</li><li>é€šè¿‡åˆ©ç”¨æµ‹è¯•æ¨¡å‹çš„æ€§èƒ½æŒ‡æ ‡æ¥è¯„ä¼°å¯¹æŠ—æ€§è¾“å…¥çš„è´¨é‡</li><li>å®éªŒå‘ç°ï¼Œè¦†ç›–ç‡å€¼ä¸å¯¹æŠ—æ€§è¾“å…¥çš„è´¨é‡ä¹‹é—´æ²¡æœ‰çº¿æ€§å…³ç³»ï¼Œå› æ­¤åº”è¯¥ä»˜å‡ºæ›´å¤šçš„åŠªåŠ›æ¥æé«˜è¾“å…¥è´¨é‡ï¼Œè€Œä¸æ˜¯è¦†ç›–ç‡çš„å€¼</li></ul><h1 id="2-RNN-Test"><a href="#2-RNN-Test" class="headerlink" title="2. RNN-Test"></a>2. RNN-Test</h1><h2 id="2-1-æ¨¡å—ç®€ä»‹"><a href="#2-1-æ¨¡å—ç®€ä»‹" class="headerlink" title="2.1 æ¨¡å—ç®€ä»‹"></a>2.1 æ¨¡å—ç®€ä»‹</h2><p>RNN-Testå·¥ä½œæµç¨‹å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91RNN-Test-Adversarial-Testing-Framework-for-Recurrent-Neural-Network-Systems/2020-06-23-23-50-28.png" alt></p><p>RNN-Testä¸‰ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼š</p><ul><li>RNN wrapper</li><li>adversary orientation maximizing</li><li>coverage boosting.</li></ul><p><strong>RNN Wrapperæ¨¡å—</strong>è´Ÿè´£æå–RNNæ¨¡å‹ä¸­çš„hidden stateså’Œcell statesã€‚</p><p><strong>adversary orientation maximizingæ¨¡å—</strong>å°†ä¸‰ä¸ªorientationæ–¹æ³•æ•´åˆï¼Œè¿™ä¸‰ä¸ªorientationæ–¹æ³•åˆ†åˆ«æ˜¯</p><ul><li>æœ¬æ–‡æå‡ºçš„state inconsistency orientationæ–¹æ³•ï¼Œ</li><li>FGSMæåˆ°çš„ä¼˜åŒ–æ–¹æ³•ï¼Œ</li><li>DLFuzzæåˆ°çš„ä¼˜åŒ–æ–¹æ³•ã€‚</li></ul><p><strong>coverage boostingæ¨¡å—</strong>åˆ™é€šè¿‡æå‡è¦†ç›–ç‡ï¼Œä»¥å›¾åœ¨RNNçš„æœªå‘ç°ç©ºé—´ä¸­æœç´¢å¯¹æŠ—æ ·æœ¬</p><p>adversary orientation maximizingæ¨¡å—å’Œcoverage boostingæ¨¡å—çš„ç»“æœå°†é›†æˆèµ·æ¥ï¼Œäº§ç”Ÿä¸€ä¸ªè”åˆç›®æ ‡ã€‚å¯¹è¿™ä¸ªç›®æ ‡è¿›è¡Œæ¢¯åº¦ä¸Šå‡è”åˆä¼˜åŒ–æ±‚æœ€ä¼˜è§£ã€‚</p><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªæ˜¯ä»æ•´ä¸ªé¡ºåºè¾“å…¥ä¸­éšæœºä¿®æ”¹ä¸€ä¸ªå•è¯æˆ–å­—ç¬¦ï¼Œä»¥ç¡®ä¿æ‰€åšçš„ä¿®æ”¹ä¸è¶³ä»¥ä¿æŒåŸå§‹è¯­ä¹‰ã€‚</p><p>å•è¯åœ¨è¯åµŒå…¥ç©ºé—´ä¸­ï¼Œå› æ­¤æˆ‘ä»¬ä»¥è¯åµŒå…¥ç©ºé—´ä¸­ä¸¤ç‚¹çš„è·ç¦»ä½œä¸ºè¾…åŠ©åˆ¤æ–­ï¼Œé€‰å–çªå˜è·ç¦»æœ€å°çš„è¾“å…¥ä½œä¸ºå¯¹æŠ—æ ·æœ¬ã€‚</p><p>RNN-Testä¸ä»…å¯ä»¥ç”¨äºåˆ†ç±»æ¨¡å‹ï¼Œè€Œä¸”å¯ä»¥åº”ç”¨äºåºåˆ—æ¨¡å‹ã€‚</p><h1 id="3-è¦†ç›–ç‡"><a href="#3-è¦†ç›–ç‡" class="headerlink" title="3. è¦†ç›–ç‡"></a>3. è¦†ç›–ç‡</h1><p>ä¸ºäº†æ–¹ä¾¿åé¢è§£é‡Šï¼Œæœ‰å¦‚ä¸‹å®šä¹‰ï¼š</p><ul><li>S: æ—¶é—´æ­¥ä¸ªæ•°</li><li>L: å±‚æ•°</li><li>B: æ‰¹æ•°</li><li>E: éšçŠ¶æ€é›†åˆå¤§å°</li><li>h: éšçŠ¶æ€é›†åˆï¼Œ|h|=E</li><li>c: cellé›†åˆ</li><li>g: gateé›†åˆ</li><li>e: ä¸€ä¸ªéšçŠ¶æ€ï¼Œeâˆˆh</li></ul><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91RNN-Test-Adversarial-Testing-Framework-for-Recurrent-Neural-Network-Systems/LSTMç®€ä»‹å›¾.png" alt></p><h2 id="3-1-çŠ¶æ€è¦†ç›–ç‡çš„æ„ä¹‰"><a href="#3-1-çŠ¶æ€è¦†ç›–ç‡çš„æ„ä¹‰" class="headerlink" title="3.1 çŠ¶æ€è¦†ç›–ç‡çš„æ„ä¹‰"></a>3.1 çŠ¶æ€è¦†ç›–ç‡çš„æ„ä¹‰</h2><p>æ¯ä¸ªRNNå•å…ƒåœ¨æ¯ä¸ªæ—¶é—´æ­¥$t$çš„è¾“å‡ºéƒ½æ˜¯éšè—çŠ¶æ€å‘é‡$h<em>t$ã€‚å½“è¾“å…¥$x$åˆ°äº†æœ€åä¸€ä¸ªå•è¯ï¼Œå³æ‰§è¡Œåˆ°æœ€åä¸€ä¸ªæ—¶é—´æ­¥$tp$çš„æ—¶å€™ï¼Œè¾“å‡ºçš„è¿˜æ˜¯éšçŠ¶æ€$h</em>{tp}$ï¼Œåªä¸è¿‡æ­¤æ—¶çš„$h_{tp}$èƒ½å¤ŸçœŸæ­£ä»£è¡¨æ•´ä¸ªåºåˆ—$x$çš„æ‰€æœ‰ä¿¡æ¯äº†ã€‚ä¹‹å‰çš„$h_t$æ˜¯åœ¨æ²¡èƒ½è¯»å®Œ$x$çš„æƒ…å†µä¸‹åšå‡ºçš„è‰ç‡åˆ¤æ–­ã€‚</p><p>å¯¹äºLSTMå•å…ƒï¼Œè¾“å‡ºè¿˜åŒ…å«è¡¨ç¤ºä¸º$c$çš„å•å…ƒçŠ¶æ€å‘é‡ï¼Œé•¿åº¦ä¸$h$ç›¸åŒã€‚å¦‚æœè¯´$h$ä»£è¡¨çŸ­æœŸè®°å¿†ï¼Œé‚£ä¹ˆ$c$å°±ä»£è¡¨é•¿æœŸè®°å¿†ã€‚</p><p>å¯¹äºä¸€ä¸ªè¾“å…¥$x$ï¼Œå¦‚æœç‰¹å®šçš„éšè—çŠ¶æ€å…·æœ‰RNNå•å…ƒè¾“å‡ºçš„æœ€å¤§å€¼ï¼Œåˆ™å…¶æ˜ å°„éƒ¨åˆ†åœ¨é¢„æµ‹ç»“æœä¸­çš„æ¦‚ç‡ä¹Ÿå°†æ›´é«˜ã€‚</p><blockquote><p>å…¶å®è¿™å¥è¯æˆ‘æ²¡çœ‹æ‡‚ï¼ŒåŸæ–‡å¦‚ä¸‹ï¼š<br>For one input, if a <strong><em>specific hidden state</em></strong> has <strong><em>the maximum value of the RNN cell outputs</em></strong>, the probabilities of <strong><em>its mapping part of the prediction result</em></strong> tend to be higher as well.<br>As covering the permutations of each hidden state of the RNN cell is extremely time-consuming, covering all <strong>the maximum hidden states</strong> is a feasible solution.</p></blockquote><p>çŒœæƒ³ä½œè€…åº”è¯¥æ˜¯æƒ³è¦åœ¨æ‰€æœ‰æ—¶é—´æ­¥çš„$h<em>t$ä¸­é€‰æ‹©ä¸€ä¸ªæœ€å¤§çš„$h</em>{tâ€™}$ï¼Œè®¡ç®—è¦†ç›–ç‡æ—¶åªè¦è¦†ç›–è¯¥$h_{tâ€™}$çš„å°±ç®—æ˜¯è¦†ç›–äº†ã€‚</p><p>$h$å’Œ$c$çš„æ‰€æœ‰åˆ†é‡å¤§å°åœ¨[-1,1]å†…ï¼Œéƒ½æ˜¯é€šè¿‡tanhå‡½æ•°è®¡ç®—å¾—åˆ°çš„ã€‚æœ¬æ–‡å°†è¿™ä¸ªå€¼åŸŸåˆ†å‰²æˆç­‰è·ç¦»çš„äº”ä¸ªéƒ¨åˆ†ï¼Œ[-1ï¼Œ-0.8ï¼Œ-0.2ã€0.2ã€0.8ã€1]ã€‚é€šè¿‡å°†å€¼èŒƒå›´åˆ’åˆ†ä¸ºå¤šä¸ªéƒ¨åˆ†ï¼Œç„¶åè®°å½•æ¯ä¸ªéƒ¨åˆ†çš„è¦†ç›–èŒƒå›´ã€‚</p><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91RNN-Test-Adversarial-Testing-Framework-for-Recurrent-Neural-Network-Systems/2020-06-24-21-53-12.png" alt></p><h2 id="3-2-é—¨è¦†ç›–ç‡çš„æ„ä¹‰"><a href="#3-2-é—¨è¦†ç›–ç‡çš„æ„ä¹‰" class="headerlink" title="3.2 é—¨è¦†ç›–ç‡çš„æ„ä¹‰"></a>3.2 é—¨è¦†ç›–ç‡çš„æ„ä¹‰</h2><p>é‡‡ç”¨ä¸çŠ¶æ€è¦†ç›–ç›¸åŒçš„æœºåˆ¶æ¥è®¡ç®—é—¨çš„è¦†ç›–èŒƒå›´ã€‚ç”±äºé—¨çš„å€¼åŸŸåœ¨[0,1]ï¼Œå› æ­¤åˆ’åˆ†åŒºé—´[0ã€0.1ã€0.4ã€0.6 ï¼Œ0.9ï¼Œ1]ã€‚</p><h2 id="3-3-è¦†ç›–ç‡å®šä¹‰"><a href="#3-3-è¦†ç›–ç‡å®šä¹‰" class="headerlink" title="3.3  è¦†ç›–ç‡å®šä¹‰"></a>3.3  è¦†ç›–ç‡å®šä¹‰</h2><h3 id="Hidden-state-coverage"><a href="#Hidden-state-coverage" class="headerlink" title="Hidden state coverage"></a><strong>Hidden state coverage</strong></h3><p>RNNä¸­çš„æ‰€æœ‰Hidden Stateé›†åˆè¡¨ç¤ºæˆHï¼ŒHçš„å½¢çŠ¶ä¸º[S, L, B, E]ã€‚Sä¸ºæ—¶é—´æ­¥ä¸ªæ•°ï¼ŒLä¸ºå±‚æ•°ï¼ŒBä¸ºbatchæ•°ï¼ŒEæ˜¯æ¯ä¸ªçŠ¶æ€å‘é‡çš„é•¿åº¦ã€‚</p><p>å¯¹äºä¸€ä¸ªå…·ä½“åœ°éšçŠ¶æ€hå‘é‡ï¼Œå½¢çŠ¶ä¸º(s,l,b)ï¼Œå…¶ä¸­$s\in{1,2,\dots,S}$ï¼Œ$l\in{1,2,\dots,L}$ï¼Œ$b\in{1,2,\dots,B}$ï¼Œ$E=|h|$ã€‚</p><p>å¦‚æœä¸€ä¸ªçŠ¶æ€åˆ†é‡$e\in h$ä¸”$e=\max{(h)}$ï¼Œä¹Ÿå°±æ˜¯è¯´$e$æ˜¯è¯¥çŠ¶æ€åˆ†é‡ä¸­çš„æœ€å¤§å€¼ï¼Œé‚£ä¹ˆå¯ä»¥è¯´è¯¥çŠ¶æ€$e$è¢«è¦†ç›–äº†ã€‚è¦†ç›–ç‡è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\text{HS\_C}=\frac{|\{e\in h|e=\max{(h)}\}|}{S\times L\times B\times E}</script><h3 id="Cell-state-coverage"><a href="#Cell-state-coverage" class="headerlink" title="Cell state coverage"></a><strong>Cell state coverage</strong></h3><p>RNNä¸­çš„æ‰€æœ‰Cell Stateé›†åˆè¡¨ç¤ºæˆCï¼ŒCçš„å½¢çŠ¶ä¹Ÿä¸º[S,L,B,E]ã€‚cell stateçš„å€¼åŸŸ[-1,1]è¢«åˆ†å‰²æˆSecå—ï¼Œåˆ†åˆ«æ˜¯$sec<em>1, sec_2, \dots, sec</em>{Sec}$ã€‚æ¯ä¸ªsecå¯ä»¥è¡¨ç¤ºæˆ$sec<em>i=[v</em>{i-1}, v_i],-1\leq v_i\leq 1$ã€‚</p><p>å¦‚æœä¸€ä¸ªcellçŠ¶æ€åˆ†é‡$e\in c$è€Œä¸”$\tanh(e)\in sec_i, i\in{1,2,\dots, Sec}$ï¼Œå°±è¯´çŠ¶æ€åˆ†é‡$e$åœ¨$sec_i$ä¸­è¢«è¦†ç›–äº†ï¼ˆ$e$ is covered in $sec_i$ï¼‰ã€‚è¦†ç›–ç‡å…¬å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\text{CS\_C}=\frac{|\{e\in c|\tanh(e)\in sec_i\}|}{S\times L\times B\times E}</script><h3 id="Gate-coverage"><a href="#Gate-coverage" class="headerlink" title="Gate coverage"></a><strong>Gate coverage</strong></h3><p>ç”¨$g$æ¥ä»£è¡¨é—¨ï¼Œ$g\in {i,o,f}$ã€‚ç”¨æ¥è®¡ç®—è¿™äº›gateçš„çŠ¶æ€å®šä¹‰ä¸º$G_g$ï¼Œ$G_g$çš„å½¢çŠ¶æ˜¯[S, L, B, $E_g$]ï¼Œ$E_g$æ˜¯çŠ¶æ€å¤§å°ã€‚</p><p>å¦‚æœä¸€ä¸ªçŠ¶æ€$e\in g$å¹¶ä¸”$\text{activation}(e)\in sec_i$ï¼Œ$\text{activation}$ä»£è¡¨è®¡ç®—è¯¥gateæ‰€éœ€çš„æ¿€æ´»å‡½æ•°ï¼Œé‚£ä¹ˆå°±ç§°çŠ¶æ€$e$åœ¨$sec_i$ä¸­è¢«è¦†ç›–äº†ã€‚é—¨è¦†ç›–ç‡çš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">G_g\_C_{sec_i}=\frac{|\{e\in g|\text{activation}(e)\in sec_i\}|}{S\times L\times B\times E_g}</script><h3 id="DX-coverage"><a href="#DX-coverage" class="headerlink" title="DX coverage"></a><strong>DX coverage</strong></h3><p>è¿™ä¸ªè¦†ç›–ç‡æ˜¯ä»¿ç…§DeepXploreåœ¨DNNä¸Šå®šä¹‰çš„è¦†ç›–ç‡ï¼Œå°†å…¶è¿ç§»åˆ°RNNä¸Šçš„ç»“æœã€‚</p><p>å¯¹äºCNNï¼ŒDeepXploreå°†æ¯ä¸ªç‰¹å¾å›¾ï¼ˆå·ç§¯å±‚çš„è¾“å‡ºï¼Œæ•°ç™¾ä¸ªå€¼çš„çŸ©é˜µï¼‰è§†ä¸ºç¥ç»å…ƒï¼Œå¹¶å°†å¹³å‡å€¼ä½œä¸ºè¾“å‡ºã€‚</p><p>å¦‚æœæˆ‘ä»¬å°†æ¯ä¸ªå•å…ƒæ ¼çš„éšè—çŠ¶æ€å‘é‡$h$è§†ä¸ºç¥ç»å…ƒï¼Œæ­¤æ—¶åƒPTBæ¨¡å‹è¿™æ ·çš„æ™®é€šRNNå°†ä»…ç”±ä¸€å±‚å°‘äº100ä¸ªç¥ç»å…ƒç»„æˆã€‚è¿™æ ·åªéœ€å‡ æ¬¡è¾“å…¥ï¼Œè¦†ç›–ç‡å€¼ä¾¿å¯è¾¾åˆ°100%ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†æ¯ä¸ªéšè—çŠ¶æ€å‘é‡åˆ†é‡$e$è§†ä¸ºç¥ç»å…ƒã€‚</p><p>å¯¹äºæ‰€æœ‰çš„éšçŠ¶æ€é›†åˆ$H$ï¼Œæœ‰çŠ¶æ€$e\in H$ã€‚å¦‚æœè¾“å‡ºå€¼åœ¨ç»è¿‡max-min normalizationä¹‹å$\text{out}(e)&gt;t$ï¼Œtæ˜¯æŸä¸ªé˜ˆå€¼ï¼Œæ­¤æ—¶å°±ç§°çŠ¶æ€$e$è¢«è¦†ç›–ã€‚è®¡ç®—å…¬å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><script type="math/tex; mode=display">DX\_C=\frac{|\{e|\text{out}(e)>t\}|}{S\times L\times B\times E}</script><h1 id="4-å¯¹æŠ—å®šå‘ä¼˜åŒ–æ–¹æ³•"><a href="#4-å¯¹æŠ—å®šå‘ä¼˜åŒ–æ–¹æ³•" class="headerlink" title="4 å¯¹æŠ—å®šå‘ä¼˜åŒ–æ–¹æ³•"></a>4 å¯¹æŠ—å®šå‘ä¼˜åŒ–æ–¹æ³•</h1><p>ä¸è®­ç»ƒè¿‡ç¨‹ç›¸åï¼Œè¯¥è¿‡ç¨‹é€šè¿‡ä½¿å¾—è¾“å…¥å˜å¼‚ï¼Œè¯•å›¾å‡é«˜é¢„å…ˆå®šä¹‰çš„orientationï¼Œæ¥å¼•å¯¼å˜å¼‚è¿‡ç¨‹ï¼Œæœ€ç»ˆä½¿å¾—æ¨¡å‹åˆ¤æ–­é”™è¯¯ã€‚</p><p>å¯ä»¥é€‰æ‹©çš„orientationæœ‰ä»¥ä¸‹ä¸‰ä¸ªï¼š</p><h2 id="1-state-inconsistency-orientation"><a href="#1-state-inconsistency-orientation" class="headerlink" title="1) state inconsistency orientation"></a>1) state inconsistency orientation</h2><script type="math/tex; mode=display">\text {obj\_orient}=h_{t-1}^{l}+c_{t}^{l}-h_{t}^{l}</script><p>tæ—¶åˆ»çš„orientationï¼Œä¸t-1æ—¶åˆ»çš„hidden stateæ­£ç›¸å…³ï¼Œä¸tæ—¶åˆ»çš„cell stateæ­£ç›¸å…³ï¼Œä¸tæ—¶åˆ»çš„hidden stateè´Ÿç›¸å…³ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´å¦‚æœæƒ³ä¼˜åŒ–state inconsistency orientationï¼Œå°±å¿…é¡»æ‰¾åˆ°ä¸€ä¸ª$x<em>t$ï¼Œä»¤$h</em>{t-1}$å’Œ$c_t$è¶Šå¤§è¶Šå¥½ï¼Œ$h_t$è¶Šå°è¶Šå¥½ã€‚</p><script type="math/tex; mode=display">\left[\begin{array}{c}\tilde{\boldsymbol{c}}_{t} \\\boldsymbol{o}_{t} \\\boldsymbol{i}_{t} \\\boldsymbol{f}_{t}\end{array}\right]=\left[\begin{array}{c}\tanh \\\sigma \\\sigma \\\sigma\end{array}\right]\left(\boldsymbol{W}\left[\begin{array}{c}\boldsymbol{x}_{t} \\\boldsymbol{h}_{t-1}\end{array}\right]+\boldsymbol{b}\right)</script><script type="math/tex; mode=display">\boldsymbol{c}_{t}=\boldsymbol{f}_{t} \odot \boldsymbol{c}_{t-1}+\boldsymbol{i}_{t} \odot \tilde{\boldsymbol{c}}_{t}</script><script type="math/tex; mode=display">\boldsymbol{h}_{t}=\boldsymbol{o}_{t} \odot \tanh \left(\boldsymbol{c}_{t}\right)</script><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91RNN-Test-Adversarial-Testing-Framework-for-Recurrent-Neural-Network-Systems/2020-06-26-21-20-16.png" alt></p><p>åŸºäºLSTMçš„è®¾è®¡ç†å¿µï¼Œcä»£è¡¨è¾ƒé•¿çš„è®°å¿†ï¼Œhä»£è¡¨çŸ­æœŸè®°å¿†ã€‚</p><p>æŒ‰å…¬å¼å¯çœ‹å‡º$c<em>t$ã€$h_t$ã€$h</em>{t-1}$åº”è¯¥æ˜¯åŒå¢åŒå‡ã€çŠ¶æ€ä¸€è‡´ã€‚å› æ­¤ä½¿$c<em>t$ã€$h</em>{t-1}$å’Œ$h_t$åˆ†å¼€ï¼Œå°±æ˜¯ä½¿çŠ¶æ€ä¸ä¸€è‡´ç¨‹åº¦ä¸Šå‡ã€‚</p><h2 id="2-Cost-orientation"><a href="#2-Cost-orientation" class="headerlink" title="2) Cost orientation"></a>2) Cost orientation</h2><p>FGSMè®ºæ–‡ä¸­æåˆ°çš„æ–¹æ³•ã€‚å…¨ç§°ä¸ºFast Gradient Sign Methodã€‚è¯¥æ–¹æ³•çš„ä¼˜åŒ–ç›®æ ‡æ˜¯æ¨¡å‹è®­ç»ƒæ—¶ä½¿ç”¨çš„losså‡½æ•°ï¼Œç„¶ååˆ©ç”¨ä¸€éä¼˜åŒ–ï¼Œè®¡ç®—å¯¹æŠ—æ ·æœ¬ã€‚</p><p>ä¸€ä¸ªå¯¹æŠ—æ ·æœ¬æ”»å‡»è¿‡ç¨‹ï¼Œä¸è®­ç»ƒè¿‡ç¨‹å¯ä»¥å¯¹æ¯”å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">L_{t r a i n}(\theta)=C\left(y^{0}, y^{t r u e}\right)</script><p>è®­ç»ƒæ—¶losså‡½æ•°ä½œç”¨æ˜¯ï¼Œåœ¨è¾“å…¥xå›ºå®šçš„æ¡ä»¶ä¸‹ï¼Œé€šè¿‡æ”¹å˜æ¨¡å‹å‚æ•°$\theta$æ¥ä¼˜åŒ–lossä½¿ä¹‹æœ€å°åŒ–ã€‚</p><p>å¯¹æŠ—æ ·æœ¬æ”»å‡»åˆ™æ˜¯åœ¨å‚æ•°$\theta$å›ºå®šçš„æ¡ä»¶ä¸‹ï¼Œé€šè¿‡æ”¹å˜è¾“å…¥xï¼Œæ¥ä¼˜åŒ–lossä½¿ä¹‹æœ€å¤§åŒ–ã€‚</p><p>å¦‚æœåªæ˜¯æƒ³è¦è®©æ¨¡å‹å‡ºé”™ï¼Œè¿™ç§æ”»å‡»æ‰‹æ®µæˆä¸ºæ— ç›®æ ‡æ”»å‡» (Non-target Attack)</p><script type="math/tex; mode=display">L\left(x^{\prime}\right)=-C\left(y^{\prime}, y^{t r u e}\right)</script><p>å¦‚æœæŒ‡å®šäº†ç›®æ ‡ï¼Œè¯•å›¾è®©xå‘ç€æŒ‡å®šçš„ç±»åˆ«çªå˜ï¼Œè¿™ç§æ”»å‡»å°±è¢«ç§°ä¸º (Target Attack)ã€‚</p><script type="math/tex; mode=display">L\left(x^{\prime}\right)=-C\left(y^{\prime}, y^{t r u e}\right)+C\left(y^{\prime}, y^{f a l s e}\right)</script><p>ä½†æ˜¯çªå˜ç¨‹åº¦æœ‰ä¸€å®šé™åˆ¶ï¼Œè¦æ±‚çªå˜å‰åå›¾ç‰‡å˜åŒ–å°äºä¸€ä¸ªé˜ˆå€¼ï¼Œæ„æ€æ˜¯ä¸è¦è¢«å‘ç°ã€‚</p><script type="math/tex; mode=display">d\left(x^{0}, x^{\prime}\right) \leq \varepsilon</script><p>æ€»çš„æ¥è¯´ï¼Œä¸€ä¸ªçªå˜ç®—æ³•å¯ä»¥é€‰æ‹©ä¸åŒçš„ä¼˜åŒ–æ–¹æ³•ï¼Œä¹Ÿè®¸è¦é€‰æ‹©ä¸åŒçš„é™åˆ¶æ–¹æ³•ã€‚<br><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91RNN-Test-Adversarial-Testing-Framework-for-Recurrent-Neural-Network-Systems/2020-06-26-21-38-26.png" alt></p><p>è€ŒFGSMç®—æ³•é€‰å–çš„æ”»å‡»æ‰‹æ®µæ˜¯â€œä¸€æ¬¡æ±‚å¯¼â€ï¼Œé€šè¿‡ä¾æ¬¡è®¡ç®—æŸå¤±å‡½æ•°å¯¹è¾“å…¥xçš„æ¯ä¸ªåˆ†é‡çš„åå¯¼ï¼Œå¦‚æœä¸ºæ­£æ•°åˆ™å€¼=1ï¼Œè´Ÿæ•°åˆ™=-1ï¼Œæ— è®ºå…¶å¤§å°ã€‚</p><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91RNN-Test-Adversarial-Testing-Framework-for-Recurrent-Neural-Network-Systems/2020-06-26-21-41-53.png" alt></p><p>æ•ˆæœå°±æ˜¯æ¯ä¸ªåƒç´ ç‚¹è¦ä¸å°±+$\epsilon$ï¼Œè¦ä¸å°±-$\epsilon$ã€‚</p><h2 id="3-Decision-boundary-orientation"><a href="#3-Decision-boundary-orientation" class="headerlink" title="3) Decision boundary orientation"></a>3) Decision boundary orientation</h2><p>å†³ç­–è¾¹ç•Œå®šå‘æ—¨åœ¨é™ä½åŸå§‹é¢„æµ‹æ ‡ç­¾çš„æ¦‚ç‡ï¼Œå¹¶å¢åŠ å…¶ä»–å‰kä¸ªæ ‡ç­¾åœ¨é¢„æµ‹ä¸­çš„æ¦‚ç‡ã€‚</p><script type="math/tex; mode=display">\text {obj\_orient}=(\sum^{k}_{i=0}\hat{y}_{t_i})-\hat{y}_{t}</script><p>$\hat{y}_{t}$æ˜¯softmaxå±‚çš„è¾“å‡ºå‘é‡ã€‚</p><h1 id="5-å¯¹æŠ—æ ·æœ¬æœç´¢çš„è¿‡ç¨‹"><a href="#5-å¯¹æŠ—æ ·æœ¬æœç´¢çš„è¿‡ç¨‹" class="headerlink" title="5. å¯¹æŠ—æ ·æœ¬æœç´¢çš„è¿‡ç¨‹"></a>5. å¯¹æŠ—æ ·æœ¬æœç´¢çš„è¿‡ç¨‹</h1><h2 id="5-1-RNN-Testæ•´ä½“ç®—æ³•"><a href="#5-1-RNN-Testæ•´ä½“ç®—æ³•" class="headerlink" title="5.1 RNN-Testæ•´ä½“ç®—æ³•"></a>5.1 RNN-Testæ•´ä½“ç®—æ³•</h2><p>åœ¨kerasçš„Sequenceæ¨¡å‹ä¸­ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹å‚æ•°è®¾ç½®ï¼Œä½¿æ¨¡å‹è¾“å‡ºæ‰€æœ‰æ—¶é—´æ­¥çš„hidden stateå’Œcell stateã€‚</p><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91RNN-Test-Adversarial-Testing-Framework-for-Recurrent-Neural-Network-Systems/Alg1_1.png" alt></p><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91RNN-Test-Adversarial-Testing-Framework-for-Recurrent-Neural-Network-Systems/Alg1_2.png" alt></p><p>åœ¨1~8è¡Œï¼Œé€šè¿‡<code>retrieve_state</code>è·å¾—æ¨¡å‹æ­¤æ—¶çš„stateä¿¡æ¯ã€‚å…¶å®æˆ‘æ¯”è¾ƒæ„Ÿå…´è¶£<code>retrieve_state</code>æ–¹æ³•æ˜¯å¦‚ä½•å®ç°çš„</p><p>é¦–å…ˆè·å¾—æ¨¡å‹å†…éƒ¨ä¿¡æ¯ï¼Œæ ¹æ®ä¼˜åŒ–ç›®æ ‡è®¡ç®—èƒ½å¤Ÿæœ€å¤§åŒ–æå‡è¯¥ç›®æ ‡çš„æ¢¯åº¦æ–¹å‘ã€‚</p><p>ç„¶åç¬¬9~10è¡Œï¼Œæ ¹æ®æ¢¯åº¦ä¸Šå‡æ³•ï¼Œä¼˜åŒ–å¹¶ç”Ÿæˆæ–°çš„å˜å¼‚ä½“xã€‚</p><p>11~13è¡Œï¼Œåˆ¤æ–­æ˜¯å¦çœŸçš„ç”Ÿæˆäº†èƒ½å¤Ÿä½¿æ¨¡å‹å‡ºé”™çš„å¯¹æŠ—æ ·æœ¬ã€‚</p><p>åœ¨15è¡Œï¼Œè¡¡é‡æ­¤æ—¶æ¨¡å‹çš„æ€§èƒ½ï¼Œå¦‚æœæ˜¯åˆ†ç±»æ¨¡å‹å°±çœ‹losså¤§å°ï¼Œå¦‚æœæ˜¯ç”Ÿæˆæ–‡æœ¬æ¨¡å‹å°±çœ‹perplexityã€‚</p><p>åœ¨ç¬¬22~27è¡Œï¼Œç”Ÿæˆå¯¹æŠ—æ ·æœ¬çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹ä¸€æ®µæ–‡æœ¬çš„å˜å¼‚æ–¹æ³•ï¼Œæ˜¯é€šè¿‡åœ¨è¯åµŒå…¥ç©ºé—´ä¸­æœç´¢æœ€è¿‘çš„å•è¯/å­—ç¬¦ï¼Œæ›¿æ¢è¯¥æ—¶é—´æ­¥tå¯¹åº”çš„å­—ç¬¦ã€‚</p><h2 id="5-2-è¦†ç›–ç‡æå‡æ–¹æ³•"><a href="#5-2-è¦†ç›–ç‡æå‡æ–¹æ³•" class="headerlink" title="5.2 è¦†ç›–ç‡æå‡æ–¹æ³•"></a>5.2 è¦†ç›–ç‡æå‡æ–¹æ³•</h2><p>é€‰æ‹©nä¸ªæ²¡è¢«è¦†ç›–åˆ°çš„stateï¼ŒRNN-Testä¼šå°½å¯èƒ½æå‡ä»–ä»¬çš„å€¼ã€‚</p><script type="math/tex; mode=display">o b j_{-} c o v=\sum_{i=0}^{n} e, e \in\{h, c\}</script><p>RNN-Testè¿˜ä¼šæŒ‘é€‰åœ¨è¾¹ç•Œæˆ–è€…ç«¯ç‚¹çš„stateï¼Œå°†å®ƒä»¬çš„å€¼è®¾æˆè¾¹ç•Œå€¼ã€‚</p><p><img src="/2020/03/25/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91RNN-Test-Adversarial-Testing-Framework-for-Recurrent-Neural-Network-Systems/Alg2.png" alt></p><blockquote><p>è¿™ä¸€å—æˆ‘çœ‹çš„å¾ˆä¹±ï¼Œå¯èƒ½ä¸æ˜¯æˆ‘çš„é—®é¢˜è€Œæ˜¯ä½œè€…å†™ä½œçš„é—®é¢˜ã€‚</p></blockquote><h1 id="6-æ€»ç»“"><a href="#6-æ€»ç»“" class="headerlink" title="6.æ€»ç»“"></a>6.æ€»ç»“</h1><ol><li>æœ¬æ–‡è‚¯å®šä¸æ˜¯ä½œè€…çš„ç»ˆç¨¿ï¼Œè¿˜æœ‰å¾ˆå¤šæ²¡è¯´æ˜ç™½çš„åœ°æ–¹ï¼Œé£è¯é€ å¥ä¹Ÿæœ‰ä¸€è‚¡ä¸­å¼è‹±è¯­çš„é£å‘³ã€‚</li><li>æ–°é¢–çš„åœ°æ–¹åŒ…æ‹¬è¦†ç›–ç‡ï¼Œä½†æ˜¯è¿™ä¸€å—æ²¡çœ‹æ‡‚ï¼Œä½œè€…ä¹Ÿæ²¡æŠŠå…¬å¼å®šä¹‰æ˜ç™½ã€‚</li><li>å…¶äºŒæ˜¯é‡‡ç”¨çŠ¶æ€ä¸ä¸€è‡´ç¨‹åº¦æ¥è¡¡é‡æ¨¡å‹ä¸ç¨³å®šæ€§ï¼Œå¹¶ä»¥æ­¤å¼•å¯¼ç”Ÿæˆå¯¹æŠ—æ ·æœ¬ï¼Œæœ¬æ¥æ€æƒ³å¾ˆæ–°é¢–ï¼Œä½†æ˜¯çªå˜æ ·æœ¬çš„æ–¹æ³•å°±æ˜¯æœ€ç®€å•çš„æ–‡æœ¬æ›¿æ¢ï¼Œåœ¨è¯åµŒå…¥ç©ºé—´ä¸­æœä¸€ä¸ªæœ€è¿‘çš„å•è¯å‘é‡ã€‚æ€é¸¡ç„‰ç”¨ç‰›åˆ€ï¼Ÿ</li></ol>]]></content>
    
    
    <categories>
      
      <category>paper</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RNN</tag>
      
      <tag>testing</tag>
      
      <tag>RNN-Test</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>lintcode-138 å­æ•°ç»„æ±‚å’Œé—®é¢˜</title>
    <link href="/2020/03/24/lintcode-138-%E5%AD%90%E6%95%B0%E7%BB%84%E4%B9%8B%E5%92%8C/"/>
    <url>/2020/03/24/lintcode-138-%E5%AD%90%E6%95%B0%E7%BB%84%E4%B9%8B%E5%92%8C/</url>
    
    <content type="html"><![CDATA[<ul><li>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œæ‰¾åˆ°å’Œä¸ºé›¶çš„å­æ•°ç»„ã€‚</li><li>ä½ çš„ä»£ç åº”è¯¥è¿”å›æ»¡è¶³è¦æ±‚çš„å­æ•°ç»„çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®<span id="more"></span><h1 id="lintcode-138ï¼šå­æ•°ç»„ä¹‹å’Œ"><a href="#lintcode-138ï¼šå­æ•°ç»„ä¹‹å’Œ" class="headerlink" title="lintcode 138ï¼šå­æ•°ç»„ä¹‹å’Œ"></a>lintcode 138ï¼šå­æ•°ç»„ä¹‹å’Œ</h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2></li></ul><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œæ‰¾åˆ°å’Œä¸ºé›¶çš„å­æ•°ç»„ã€‚ä½ çš„ä»£ç åº”è¯¥è¿”å›æ»¡è¶³è¦æ±‚çš„å­æ•°ç»„çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®<br><strong>æ ·ä¾‹ 1:</strong><br>è¾“å…¥: [-3, 1, 2, -3, 4]<br>è¾“å‡º: [0,2] æˆ– [1,3]<br>æ ·ä¾‹è§£é‡Šï¼š è¿”å›ä»»æ„ä¸€æ®µå’Œä¸º0çš„åŒºé—´å³å¯ã€‚<br><strong>æ ·ä¾‹ 2:</strong><br>è¾“å…¥: [-3, 1, -4, 2, -3, 4]<br>è¾“å‡º: [1,5]<br><strong>æ³¨æ„äº‹é¡¹</strong><br>è‡³å°‘æœ‰ä¸€ä¸ªå­æ•°ç»„çš„å’Œä¸º 0</p><h2 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h2><p>å­æ•°ç»„ä¹‹å’Œé—®é¢˜ã€‚çœ‹çœ‹å“ªä¸ªåŒºé—´æ®µï¼Œæ®µå†…æ‰€æœ‰å…ƒç´ åŠ èµ·æ¥åˆšå¥½ç­‰äº0ï¼ˆæˆ–è€…æŸä¸ªå€¼ï¼‰ã€‚ç±»ä¼¼è¿™ç§æ±‚åŒºé—´æ®µï¼Œæ®µå†…å…ƒç´ æ»¡è¶³ä»€ä¹ˆæ¡ä»¶çš„é—®é¢˜ã€‚</p><p>å…³é”®æ˜¯ä¸‹é¢è¿™ä¸ªç»“è®ºï¼š</p><p>å‡†å¤‡ä¸€ä¸ªæ•°ç»„arrayï¼Œå…¶ä¸­ç¬¬iä¸ªå…ƒç´ ä¿å­˜num[0]~num[i]ä¹‹å’Œã€‚é‚£ä¹ˆindex_valueä¸­ä¸€æ—¦å‡ºç°ä¸¤ä¸ªå…ƒç´ å…¶å€¼ç›¸åŒï¼Œå°±è¯´æ˜è¿™ä¸¤ä¸ªä¸‹æ ‡ä¹‹é—´æ‰€æœ‰å…ƒç´ åŠ èµ·æ¥ç­‰äº0ã€‚</p><script type="math/tex; mode=display">\begin{aligned}& if & \sum_{i=0}^{\operatorname{index_1}}nums(i) = \sum_{i=0}^{\operatorname{index_2}}nums(i) \\ & then\quad & return \left[ \operatorname{index_1}+1, \operatorname{index_2} \right] \end{aligned}</script><p>ä¸¾ä¸ªä¾‹å­ï¼šå¯¹äºæ•°ç»„<code>num = [-3, 1, 2, -3, 4]</code>ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºarrayæ•°ç»„å¦‚ä¸‹ï¼š</p><div class="table-container"><table><thead><tr><th>index</th><th>nums[index]</th><th>$\sum_{i=0}^{index}nums(i)$</th></tr></thead><tbody><tr><td>0</td><td>-3</td><td>-3</td></tr><tr><td>1</td><td>1</td><td>-2</td></tr><tr><td>2</td><td>2</td><td>0</td></tr><tr><td>3</td><td>-3</td><td>-3</td></tr><tr><td>4</td><td>4</td><td>1</td></tr></tbody></table></div><p>è¿”å› [0, 2] æˆ– [1, 3]</p><p>åœ¨ä»£ç å®ç°ä¸­ï¼Œå½“æˆ‘ä»¬é‡‡ç”¨æ•°ç»„å®ç°arrayæ—¶ï¼Œä¼šå—é™äºæŸ¥è¯¢arrayå†…å…ƒç´ çš„çº¿å‹æ—¶é—´å¤æ‚åº¦ï¼Œä¸ºäº†æ‰¾æŸä¸ªå€¼å¯¹åº”çš„ä¸‹æ ‡ï¼Œéå†arrayæ•°ç»„çš„è¿‡ç¨‹ï¼Œå¯èƒ½è€—è´¹çº¿æ€§å¤æ‚åº¦çš„æ—¶é—´ï¼Œå¯¼è‡´ä»£ç TLEè¶…æ—¶ã€‚</p><p>å› æ­¤æˆ‘ä»¬é‡‡ç”¨æ•£åˆ—ï¼Œå°†æ•£åˆ—çš„keyè®¾ç½®ä¸ºå‰iä¸ªå…ƒç´ çš„å’Œå€¼ï¼Œvalueä¸ºè¯¥å€¼å¯¹åº”çš„ä¸‹æ ‡ä½ç½®ã€‚</p><p>åœ¨Pythonä¸­æŸ¥æ‰¾å…ƒç´ ï¼Œç”¨<strong>å­—å…¸</strong>å¯ä»¥å¤§å¤§åŠ å¿«æŸ¥æ‰¾é€Ÿåº¦ã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre><code class="lang-python">class Solution:    &quot;&quot;&quot;    @param nums: A list of integers    @return: A list of integers includes the index of the first number and the index of the last number    &quot;&quot;&quot;    def subarraySum(self, nums):        index_value = &#123;&#125;        accumulator = 0        for i in range(len(nums)):            accumulator += nums[i]            if accumulator in index_value:                return [index_value[accumulator] + 1, i]            else:                index_value[accumulator] = i        else:            if accumulator == 0:                return [0, i]        return [0, 0]</code></pre><h2 id="å˜ç§ï¼šå­æ•°ç»„å…ƒç´ ä¹‹å’Œç­‰äºk"><a href="#å˜ç§ï¼šå­æ•°ç»„å…ƒç´ ä¹‹å’Œç­‰äºk" class="headerlink" title="å˜ç§ï¼šå­æ•°ç»„å…ƒç´ ä¹‹å’Œç­‰äºk"></a>å˜ç§ï¼šå­æ•°ç»„å…ƒç´ ä¹‹å’Œç­‰äºk</h2><script type="math/tex; mode=display">\begin{aligned}& if & \sum_{i=0}^{\operatorname{index_1}}nums(i) - \bold{k} = \sum_{i=0}^{\operatorname{index_2}}nums(i) \\ & then\quad & return \left[ \operatorname{index_1}+1, \operatorname{index_2} \right] \end{aligned}</script><pre><code class="lang-python">class Solution:    &quot;&quot;&quot;    @param nums: A list of integers    @return: A list of integers includes the index of the first number and the index of the last number    &quot;&quot;&quot;    def subarraySum(self, nums, obj_num):        index_value = &#123;&#125;        accumulator = 0        for i in range(len(nums)):            accumulator += nums[i]            if accumulator - obj_num in index_value:                return [index_value[accumulator - obj_num] + 1, i]            else:                index_value[accumulator] = i        else:            if accumulator == 0:                return [0, i]        return [0, 0]</code></pre>]]></content>
    
    
    <categories>
      
      <category>code_exercises</category>
      
    </categories>
    
    
    <tags>
      
      <tag>algorithm</tag>
      
      <tag>lintcode</tag>
      
      <tag>array</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘C++å­—ç¬¦ä¸²é«˜çº§æ“ä½œæ€»ç»“</title>
    <link href="/2020/03/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91C-%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E6%80%BB%E7%BB%93/"/>
    <url>/2020/03/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91C-%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<p>C++çš„å­—ç¬¦ä¸²æ“ä½œéå¸¸å¤šï¼ŒåŠŸèƒ½ä¹Ÿéå¸¸å¤šæ ·åŒ–ï¼Œç†Ÿç»ƒä½¿ç”¨æ ‡å‡†åº“æä¾›çš„å­—ç¬¦ä¸²æ“ä½œå‡½æ•°èƒ½å¤Ÿé«˜æ•ˆæå‡æˆ‘ä»¬ç¼–å†™ä»£ç çš„æ•ˆç‡å’Œå¯è¯»æ€§ã€‚é™¤äº†å¸¸ç”¨çš„<string>åº“ä¸­åŒ…å«çš„å‡ é¡¹åŸºæœ¬æ“ä½œä¹‹å¤–ï¼Œæœ¬æ–‡æ€»ç»“äº†å‡ é¡¹ç‰¹åˆ«å¥½ç”¨è€Œåˆä¸ä¸ºäººæ‰€çŸ¥çš„é«˜çº§æ“ä½œï¼ŒåŒ…æ‹¬\<regex\>ã€string_viewç­‰ã€‚<br><span id="more"></span></regex\></string></p><h2 id="ä¸€ã€å¸¸è§çš„åŸºæœ¬æ“ä½œå›é¡¾"><a href="#ä¸€ã€å¸¸è§çš„åŸºæœ¬æ“ä½œå›é¡¾" class="headerlink" title="ä¸€ã€å¸¸è§çš„åŸºæœ¬æ“ä½œå›é¡¾"></a>ä¸€ã€å¸¸è§çš„åŸºæœ¬æ“ä½œå›é¡¾</h2><p>å¿…é¡»æŒ‡æ˜ï¼Œ<string>ä¸­å­—ç¬¦ä¸²æ–¹æ³•å¯ä»¥æŒ‰ç…§è¾“å…¥å‚æ•°çš„ç±»å‹ä¸åŒè°ƒç”¨ä¸åŒçš„é‡è½½æ–¹æ³•ï¼Œè¿™äº›å‡½æ•°åç›¸åŒï¼Œä½†æ˜¯å‚æ•°ç±»å‹å’Œé¡ºåºå®Œå…¨ä¸åŒï¼Œè¿”å›å€¼ä¹Ÿç•¥æœ‰å·®åˆ«ã€‚</string></p><p>éƒ¨åˆ†å‡½æ•°ï¼ŒåŒ…æ‹¬insertå’Œeraseç­‰å‡½æ•°å¯åˆ†ä¸ºä¸¤ç±»ï¼Œå¦‚æœè¾“å…¥çš„ä½ç½®å‚æ•°<code>pos</code>ä¸ºæ•´æ•°<code>int</code>ï¼Œæ­¤æ—¶è¿”å›å€¼ä¸º<strong>è¢«æ’å…¥å­—ç¬¦ä¸²</strong>çš„å¼•ç”¨ï¼›è€Œè¾“å…¥çš„ä½ç½®å‚æ•°ç±»å‹ä¸ºè¿­ä»£å™¨<code>iterator</code>ï¼Œåˆ™ä¼šè°ƒç”¨è¿”å›è¿­ä»£å™¨çš„å‡½æ•°ï¼Œè¯¥è¿­ä»£å™¨<strong>æŒ‡å‘è¢«æ’å…¥éƒ¨åˆ†çš„å¤´éƒ¨</strong>ã€‚</p><p>è€Œä¸”<string>éƒ¨åˆ†å‡½æ•°ä¸ºäº†å…¼å®¹CåŸç”Ÿå­—ç¬¦ä¸²ï¼Œæä¾›äº†ä¸€æ‰¹é€‚ç”¨äºC Stringæ„é€ æ¥å£ï¼Œè¿™åˆäº§ç”Ÿäº†ä¸€å¤§æ‰¹åªæœ‰å‚æ•°é¡ºåºä¸åŒçš„åŒåå‡½æ•°ã€‚æ¯”å¦‚å¯¹äºstringæ„é€ æ–¹æ³•ä¸Šï¼Œè¾“å…¥åŸç”Ÿstringå’Œè¾“å…¥C Stringçš„å‚æ•°å«ä¹‰å®Œå…¨ä¸åŒã€‚</string></p><p>è¿™äº›åŒåã€åŠŸèƒ½ç›¸ä¼¼ä½†ä¸åŒå‚æ•°çš„å‡½æ•°ä½¿å¾—C++æ–°äººå­¦ä¹ æ ‡å‡†åº“æ—¶å®¹æ˜“äº§ç”Ÿæå¤§çš„å›°æ‰°ã€‚</p><h3 id="1-æ„é€ string"><a href="#1-æ„é€ string" class="headerlink" title="1. æ„é€ string"></a>1. æ„é€ string</h3><pre><code class="lang-cpp">const char * cp = &quot;Hello World!!!&quot;;char noNull[] = &#123;&#39;H&#39;, &#39;i&#39;&#125;;</code></pre><p>è¾“å…¥ä¸€ä¸ªcharç±»å‹çš„æŒ‡é’ˆï¼Œä»¥åŠåç§»é‡ã€‚è½¬æ¢ä»æŒ‡é’ˆå¼€å§‹çš„åç§»é‡ä¸ªå­—ç¬¦ã€‚<br>å¦‚æœæœªæŒ‡å®šåç§»é‡ï¼Œåˆ™é»˜è®¤è½¬åŒ–åˆ°ç¢°åˆ°â€™\0â€™ä¸ºæ­¢ã€‚<br>æ²¡æœ‰â€™\0â€™ç»“å°¾åˆ™è¯¥è¡Œä¸ºæœªå®šä¹‰ã€‚  </p><pre><code class="lang-cpp">string s1(cp); // ä»Cé£æ ¼å­—ç¬¦ä¸²è½¬åŒ–string s2(noNull, 2); // æŒ‡å®šè½¬åŒ–çš„å­—ç¬¦ä¸ªæ•°string s3(noNull); // æœªå®šä¹‰ï¼Œå› ä¸ºnoNullä¸æ˜¯ä»¥ç©ºå­—ç¬¦ç»“å°¾string s4(cp + 6, 5);</code></pre><p>æ‹·è´æ„é€ å‡½æ•°ï¼Œä»å…¶ä»–stringæ‹·è´<br>æŒ‡å®šæ‹·è´ä½ç½®å’Œæ‹·è´å­—ç¬¦ä¸ªæ•°<br>ä¸æŒ‡å®šposåˆ™é»˜è®¤ä»å¤´æ‹·è´<br>ä¸æŒ‡å®šlenåˆ™é»˜è®¤ä»poså¼€å§‹å…¨æ‹·è´<br>posè¶Šç•Œåˆ™æŠ›å‡ºå¼‚å¸¸<br>lenè¶Šç•Œæ²¡é—®é¢˜ï¼Œåªåˆ°â€™\0â€™  </p><pre><code class="lang-cpp">string s5(s1, 6, 5);string s6(s1, 6);string s7(s1, 6, 20);string s8(s1, 16);</code></pre><p>substrå‡½æ•°ï¼Œè¾“å…¥poså’Œlen<br>è¿”å›ç”±è¯¥å­—ç¬¦ä¸²çš„ç¬¬posä½ç½®æ‹·è´lenä¸ªå­—ç¬¦ç»„æˆçš„æ–°å­ä¸²  </p><pre><code class="lang-cpp">string s9 = s1.substr(0, 5);</code></pre><h3 id="2-æ”¹å˜string"><a href="#2-æ”¹å˜string" class="headerlink" title="2. æ”¹å˜string"></a>2. æ”¹å˜string</h3><p>ä»¥insertä¸ºä¾‹ï¼Œç®€å•ä»‹ç»ä¸åŒå‚æ•°é‡è½½çš„ä¸åŒinsertã€‚</p><p>inserté™¤äº†æ¥å—è¿­ä»£å™¨çš„ç‰ˆæœ¬ä¹‹å¤–ï¼Œè¿˜æœ‰ç›´æ¥æ¥å—ä¸‹æ ‡çš„ç‰ˆæœ¬ã€‚è¿”å›å€¼ä¸ºè¢«æ’å…¥å­—ç¬¦ä¸²çš„å¼•ç”¨ã€‚<br>s.insert(pos, count, char)<br>s.insert(pos, char_ptr, len)<br>s.insert(pos, string, pos, len)</p><p>ç¬¬ä¸€ä¸ªä½ç½®æ€»ä¼šæ˜¯posï¼Œè¡¨ç¤ºè¢«æ’å…¥ä½ç½®ï¼›</p><p>ç¬¬äºŒä¸ªå‚æ•°å¦‚æœæ˜¯ä¸ªæ•°ï¼Œé‚£ä¹ˆä½ è°ƒç”¨çš„æ˜¯ç¬¬ä¸€ä¸ªinsertå‡½æ•°ï¼Œå…¶å«ä¹‰ä¸ºé‡å¤æ’å…¥ç¬¬ä¸‰ä¸ªå‚æ•°charæ‰€åˆ¶å®šçš„å†…å®¹ï¼›</p><p>ç¬¬äºŒä¸ªå‚æ•°å¦‚æœæ˜¯Cé£æ ¼å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆç¬¬ä¸‰ä¸ªå‚æ•°å¯ä»¥æŒ‡å‡ºæ’å…¥é•¿åº¦ï¼Œä¸æŒ‡åå°±é»˜è®¤æŠŠè¯¥Cé£æ ¼å­—ç¬¦ä¸²å…¨æ’åˆ°posçš„ä½ç½®ï¼›</p><p>ç¬¬äºŒä¸ªå‚æ•°å¦‚æœæ˜¯stringï¼Œé‚£ä¹ˆä½ è¿˜éœ€åœ¨stringå‚æ•°åæŒ‡å®šä»å“ªä¸ªposå¼€å§‹æ’ï¼Œå¹¶ä¸”æŒ‡å®šlenè¡¨ç¤ºæ’å…¥å¤šå°‘ä¸ªã€‚ç›¸å¯¹äºæ’å…¥Cé£æ ¼å­—ç¬¦ä¸²çš„insertæ¥è¯´ï¼Œæ’å…¥stringæ›´çµæ´»ã€‚</p><p>å…¶ä»–å‡½æ•°åŠå…¶è¯´æ˜è§ä¸‹è¡¨ã€‚</p><p><img src="/2020/03/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91C-%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E6%80%BB%E7%BB%93/2020-03-24-20-38-14.png" alt><br><img src="/2020/03/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91C-%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E6%80%BB%E7%BB%93/2020-03-25-08-58-36.png" alt></p><h2 id="äºŒã€æœç´¢å­—ç¬¦ä¸²"><a href="#äºŒã€æœç´¢å­—ç¬¦ä¸²" class="headerlink" title="äºŒã€æœç´¢å­—ç¬¦ä¸²"></a>äºŒã€æœç´¢å­—ç¬¦ä¸²</h2><p><string>å®šä¹‰äº†å…­ç§ä¸åŒçš„æœç´¢æ–¹æ³•ï¼Œæ¯ç§æ–¹æ³•æ‹¥æœ‰å››ä¸ªé‡è½½ç‰ˆæœ¬ã€‚</string></p><p><img src="/2020/03/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91C-%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E6%80%BB%E7%BB%93/2020-03-25-09-00-50.png" alt><br><img src="/2020/03/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91C-%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E6%80%BB%E7%BB%93/2020-03-25-09-02-09.png" alt></p><p>éœ€è¦æ³¨æ„çš„æœ‰ä¸¤ç‚¹ï¼š</p><ol><li>æœç´¢å‡½æ•°è¿”å›ç±»å‹ä¸ºstring::size_typeï¼Œä¸ºæ— ç¬¦å·æ•´æ•°ç±»å‹ã€‚</li><li>æœç´¢å¤±è´¥æ—¶ï¼Œè¿”å›string::nposï¼Œè¯¥å€¼ä¸º-1ï¼Œä¹Ÿå°±æ˜¯æ— ç¬¦å·æ•´æ•°æœ€å¤§çš„å€¼ã€‚</li></ol><h2 id="ä¸‰ã€æ­£åˆ™è¡¨è¾¾å¼åº“"><a href="#ä¸‰ã€æ­£åˆ™è¡¨è¾¾å¼åº“" class="headerlink" title="ä¸‰ã€æ­£åˆ™è¡¨è¾¾å¼åº“"></a>ä¸‰ã€æ­£åˆ™è¡¨è¾¾å¼åº“</h2><p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯å­—ç¬¦ä¸²åŒ¹é…çš„æœ‰åŠ›å·¥å…·ã€‚C++11åŠ å…¥äº†å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„æ”¯æŒï¼Œå…·ä½“å®šä¹‰ä½äº<regex>å¤´æ–‡ä»¶ä¸­ã€‚</regex></p><p>åœ¨C++ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼å¯ä»¥åšçš„å·¥ä½œæœ‰ï¼š</p><ul><li>Match å°†æ•´ä¸ªè¾“å…¥æ‹¿æ¥æ¯”å¯¹ï¼ˆåŒ¹é…ï¼‰æŸä¸ªæ­£åˆ™è¡¨è¾¾å¼</li><li>Search æŸ¥æ‰¾ä¸æ­£åˆ™è¡¨è¾¾å¼å»åˆçš„å­ä¸²</li><li>Tokenize æ ¹æ®æ­£åˆ™è¡¨è¾¾å¼åˆ‡åˆ†å­—ç¬¦ä¸²</li><li>Replace æ ¹æ®æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢å­—ç¬¦ä¸²</li></ul><h3 id="ç¬¬ä¸€ç§åº”ç”¨ï¼šMatchå’ŒSearch"><a href="#ç¬¬ä¸€ç§åº”ç”¨ï¼šMatchå’ŒSearch" class="headerlink" title="ç¬¬ä¸€ç§åº”ç”¨ï¼šMatchå’ŒSearch"></a>ç¬¬ä¸€ç§åº”ç”¨ï¼šMatchå’ŒSearch</h3><p>å…·ä½“æµç¨‹å¯æ¦‚æ‹¬ä¸ºï¼šå®šä¹‰ã€åŒ¹é…ã€åˆ¤æ–­</p><pre><code class="lang-cpp">regex reg(&quot;&lt;.*&gt;.*&lt;/.*&gt;&quot;); // å®šä¹‰regex reg_num(R&quot;(\d)&quot;); // ä»¥ R&quot;(...)&quot; çš„æ–¹å¼å®šä¹‰ï¼Œç›¸å½“äº Python ä¸­çš„ r&quot;...&quot; ï¼Œç‰¹ç‚¹æ˜¯å†…éƒ¨åæ–œæ ä¸éœ€è¦å†™ä¸¤éregex reg(R&quot;(\S+)&quot;, regex::icase); // icase è¡¨ç¤ºå¿½ç•¥å¤§å°å†™bool isExist = regex_match(string, reg); // åŒ¹é…æ•´ä½“ï¼Œå…¨éƒ¨åŒ¹é…åˆ™è¿”å› trueï¼Œæ³¨æ„å‚æ•°é¡ºåº//orbool isExist = regex_search(string, reg); // åŒ¹é…éƒ¨åˆ†ï¼Œå­˜åœ¨å­ä¸²åŒ¹é…åˆ™è¿”å› trueã€‚æ³¨æ„å‚æ•°é¡ºåºcout &lt;&lt; boolalpha &lt;&lt; isExist &lt;&lt; endl; // åˆ¤æ–­ï¼Œboolalpha ä¸º cout çš„å‚æ•°ï¼Œè¡¨ç¤ºå°† bool å˜é‡æŒ‰ç…§ true/false è¾“å‡ºè€Œä¸æ˜¯è¾“å‡º 0 å’Œ 1</code></pre><p>ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ï¼Œregex_matchå’Œregex_searchè¿”å›çš„ä»…ä»…æ˜¯ä¸€ä¸ªboolå€¼ï¼Œè¡¨æ˜æ˜¯å¦åŒ¹é…ã€‚æˆ‘ä»¬è¿˜éœ€è¦åŒ¹é…çš„ä½ç½®ã€‚æ­¤æ—¶æˆ‘ä»¬éœ€è¦ä¸€ä¸ª<code>match</code>å¯¹è±¡æ¥ä¿å­˜ç»“æœã€‚</p><p>éœ€è¦æå–ç»“æœçš„åœºåˆï¼Œæˆ‘ä»¬ä½¿ç”¨<code>regex_search()</code>å’Œ<code>regex_match()</code>çš„å¦ä¸€ä¸ªç‰ˆæœ¬ï¼Œå‚æ•°å¤šäº†ä¸€ä¸ª matchï¼Œè¿è¡Œå®Œæ¯•å match ä¼šä¿å­˜æœ‰ç»“æœã€‚</p><p><code>match</code>å¯¹è±¡çš„æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre><code class="lang-cpp">smatch m;bool isExist = regex_search(string, m, reg); // ç»“æœä¿å­˜åœ¨mä¸­m.empty()m.size() // è¿”å›åŒ¹é…ä¸ªæ•°m.str(i) // ç±»ä¼¼äºpythonä¸­groupï¼Œè¿”å›ç¬¬iä¸ªåŒ¹é…ä½ç½®çš„å­—ç¬¦ä¸²ã€‚i=0åˆ™è¿”å›å…¨éƒ¨m.length(i) // åŒä¸Šï¼Œè¿”å›ç¬¬iä¸ªåŒ¹é…å­—ç¬¦ä¸²çš„é•¿åº¦m.position(i) // åŒä¸Šï¼Œè¿”å›ç¬¬iä¸ªåŒ¹é…å­—ç¬¦ä¸²çš„ä½ç½®m.prefix().str() // å·²åŒ¹é…ä½ç½®ä¹‹å‰çš„å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²å‰ç¼€m.suffix().str() // å·²åŒ¹é…ä½ç½®ä¹‹åçš„å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²åç¼€for (auto pos = m.begin(); pos != m.end(); ++pos) &#123;    cout &lt;&lt; *pos &lt;&lt; endl;&#125;ä»£ç ä¸­çš„å‚æ•°iï¼Œä»£è¡¨äº†æ­£åˆ™è¡¨è¾¾å¼ä¸­å­˜åœ¨åˆ†ç»„ï¼Œiä¸ºæå–åˆ†ç»„içš„è¢«åŒ¹é…å†…å®¹ã€‚ç±»ä¼¼pythonä¸­çš„groupã€‚åˆ†ç»„æ“ä½œæ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„è¯­æ³•ï¼Œæœ¬æ–‡ä¸å†èµ˜è¿°ã€‚</code></pre><p><code>match</code>å¯¹è±¡æ ¹æ®ä¿å­˜å†…å®¹ç±»å‹ä¸åŒåˆ†æˆ</p><ul><li><code>smatch</code> åŒ¹é…string</li><li><code>cmatch</code> åŒ¹é…Cé£æ ¼å­—ç¬¦ä¸²</li><li><code>wsmatch</code> åŒ¹é…wstring</li><li><code>wcmatch</code> åŒ¹é…const wchar_t*</li></ul><h3 id="ç¬¬äºŒç§åº”ç”¨ï¼šRegex-Iterator"><a href="#ç¬¬äºŒç§åº”ç”¨ï¼šRegex-Iterator" class="headerlink" title="ç¬¬äºŒç§åº”ç”¨ï¼šRegex Iterator"></a>ç¬¬äºŒç§åº”ç”¨ï¼šRegex Iterator</h3><p>dataå¯èƒ½å¾ˆé•¿ï¼Œregå¯èƒ½ä¼šå¤šæ¬¡åŒ¹é…ã€‚ä¸ºäº†è¿­ä»£æ‰€æœ‰çš„åŒ¹é…å­ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>regex_iterator</code>ã€‚</p><p>æ ¹æ®ç±»å‹ä¸åŒï¼Œåˆ†åˆ«æ˜¯</p><ul><li><code>sregex_iterator</code></li><li><code>cregex_iterator</code></li><li><code>wsregex_iterator</code></li><li><code>wcregex_iterator</code></li></ul><pre><code class="lang-cpp">regex reg(&quot;...&quot;);sregex_iterator pos(data.cbegin(), data.cend(), reg);sregex_iterator end; // ç©ºè¿­ä»£å™¨å³å¯è¡¨ç¤º endfor (; pos != end; ++pos) &#123;    cout &lt;&lt; pos-&gt;str() &lt;&lt; endl;&#125;</code></pre><p>å¦‚ä½•ç»Ÿè®¡åŒ¹é…ä¸ªæ•°ï¼Ÿå¯ä»¥å€ŸåŠ©<iterator> ä¸­çš„<code>distance()</code>æ¥è®¡ç®—ä¸¤ä¸ªè¿­ä»£å™¨ä¹‹é—´çš„è·ç¦»ã€‚</iterator></p><p>æ¯”å¦‚è¦ç»Ÿè®¡ä¸€å¥è¯ä¸­å•è¯çš„ä¸ªæ•°ï¼š</p><pre><code class="lang-cpp">regex reg(R&quot;(\S+)&quot;);string text = &quot;The cat sat on the mat&quot;;sregex_iterator begin&#123;text.cbegin(), text.cend(), reg&#125;;sregex_iterator end;#include &lt;iterator&gt;auto count = std::distance(begin, end); // ä¸“é—¨è®¡ç®—è¿­ä»£å™¨ä¹‹é—´çš„è·ç¦»cout &lt;&lt; count &lt;&lt; endl;  // output: 6</code></pre><h3 id="ç¬¬ä¸‰ç§åº”ç”¨ï¼šRegex-Token-Iterator"><a href="#ç¬¬ä¸‰ç§åº”ç”¨ï¼šRegex-Token-Iterator" class="headerlink" title="ç¬¬ä¸‰ç§åº”ç”¨ï¼šRegex Token Iterator"></a>ç¬¬ä¸‰ç§åº”ç”¨ï¼šRegex Token Iterator</h3><p>ä½ å¯èƒ½å…³æ³¨çš„ä¸æ˜¯è¢«åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯å…¶ä½™çš„å­—ç¬¦ä¸²ã€‚æ­¤æ—¶æ­£åˆ™è¡¨è¾¾å¼ä¸²å°±åƒæ˜¯åˆ‡å‰²åˆ€ä¸€æ ·ï¼Œå°†dataåˆ†å‰²æˆä¸å«è¢«åŒ¹é…ä¸²çš„å‡ éƒ¨åˆ†ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ­¤åŠŸèƒ½å®ç°C++ä¸­ä¸€ç›´æ²¡èƒ½å®ç°çš„å­—ç¬¦ä¸²åˆ†å‰²å‡½æ•°splitã€‚</p><pre><code class="lang-cpp">string data = &quot;qqq www    eee rrr&quot;;regex r(&quot;\\s+&quot;);sregex_token_iterator pos(data.cbegin(), data.cend(), r, -1); // -1ä»£è¡¨ä½ å¯¹æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å†…å®¹ä¸æ„Ÿå…´è¶£sregex_token_iterator end;for (; pos != end; ++pos) &#123;    cout &lt;&lt; *pos &lt;&lt; endl;&#125;</code></pre><h3 id="ç¬¬å››ç§åº”ç”¨ï¼šæ›¿æ¢"><a href="#ç¬¬å››ç§åº”ç”¨ï¼šæ›¿æ¢" class="headerlink" title="ç¬¬å››ç§åº”ç”¨ï¼šæ›¿æ¢"></a>ç¬¬å››ç§åº”ç”¨ï¼šæ›¿æ¢</h3><p>ä¸‹é¢çš„ä»£ç å°†</p><pre><code class="lang-html">&lt;person&gt;&lt;first&gt;Nico&lt;/first&gt;&lt;/person&gt;</code></pre><p>æ›¿æ¢æˆ</p><pre><code class="lang-html">&lt;person&gt;&lt;first value=&quot;Nico&quot;/&gt;&lt;/person&gt;</code></pre><pre><code class="lang-cpp">string data = &quot;&lt;person&gt;&lt;first&gt;Nico&lt;/first&gt;&lt;/person&gt;&quot;regex reg(&quot;&lt;(.*)&gt;(.*)&lt;/(\\1)&gt;&quot;);string replace_pattern = &quot;&lt;$1 value=\&quot;$2\&quot;/&gt;&quot;;cout &lt;&lt; regex_replace(data, reg, replace_pattern) &lt;&lt; endl;</code></pre><p>æ¨¡å¼æ›¿æ¢ä¸²ç”¨$næŒ‡å®šç¬¬å‡ ä¸ªåŒ¹é…éƒ¨åˆ†group(n)<br>$1 value=$2 å«ä¹‰å³ä¸ºåŸæ¥æ˜¯group(1)çš„éƒ¨åˆ†æ›¿æ¢æˆgroup(2)çš„å†…å®¹ã€‚</p><p><img src="/2020/03/23/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91C-%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E6%80%BB%E7%BB%93/2020-03-25-10-21-38.png" alt></p><h2 id="å››ã€string-view"><a href="#å››ã€string-view" class="headerlink" title="å››ã€string_view"></a>å››ã€string_view</h2><p>C++17åŠ å…¥äº†string_viewå¯¹è±¡ï¼Œèƒ½å¤Ÿé¿å…stringç±»å‹çš„å¤åˆ¶ä¸´æ—¶å¯¹è±¡æ“ä½œã€‚</p><ul><li>string_viewå¯¹è±¡ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯<strong>æ•°æ®çš„èµ·å§‹æŒ‡é’ˆ</strong>å’Œ<strong>æ•°æ®çš„é•¿åº¦</strong>ã€‚æœ‰ç‚¹ç±»ä¼¼äºå¸¦å…¶ä»–è¯­è¨€è¡¨ç¤ºå­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œä¸ä¾èµ–<code>&#39;\0&#39;</code>åœ¨ç»“å°¾ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªå˜é‡è®°å¿†é•¿åº¦ã€‚</li><li>string_viewåªè¯»ï¼Œä¸èƒ½ä¿®æ”¹ã€‚å¯ä»¥å¾ˆå¥½åœ°ä½œä¸ºå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼</li></ul><pre><code class="lang-cpp">//ä½¿ç”¨stringçš„æ‹·è´æ“ä½œstring s(1000, &#39;0&#39;);string sub_s = s.substr(100, 200); // O(n)//ä½¿ç”¨viewåˆ™ä¸éœ€è¦æ‹·è´string_view sv(s); // no copystring_view sv2 = sv.substr(100, 200); // O(1)</code></pre>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>STL</tag>
      
      <tag>string</tag>
      
      <tag>regex</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C++å…³è”å®¹å™¨å­¦ä¹ ç¬”è®°</title>
    <link href="/2020/03/20/C-%E5%85%B3%E8%81%94%E5%AE%B9%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <url>/2020/03/20/C-%E5%85%B3%E8%81%94%E5%AE%B9%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="1-å…³è”å®¹å™¨ç‰¹ç‚¹ç®€ä»‹"><a href="#1-å…³è”å®¹å™¨ç‰¹ç‚¹ç®€ä»‹" class="headerlink" title="1. å…³è”å®¹å™¨ç‰¹ç‚¹ç®€ä»‹"></a>1. å…³è”å®¹å™¨ç‰¹ç‚¹ç®€ä»‹</h2><p>å…³è”å®¹å™¨å’Œé¡ºåºå®¹å™¨æ˜¯ä¸¤ç§é€‚ç”¨èŒƒå›´ä¸åŒçš„å®¹å™¨ã€‚è®¸å¤šC++ç¨‹åºå‘˜åªç”¨è¿‡é¡ºåºå®¹å™¨è¯¸å¦‚vectorå’Œstringï¼Œä½†ä»–ä»¬ä»æœªä½¿ç”¨è¿‡setå’Œmapç­‰å…³è”æ•°æ®ç»“æ„ã€‚</p><p><img src="/2020/03/20/C-%E5%85%B3%E8%81%94%E5%AE%B9%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/2020-03-20-09-47-21.png" alt></p><p><code>set</code>æ˜¯å…ƒç´ çš„ç®€å•é›†åˆï¼Œç”¨æ¥ä¿å­˜ç±»å‹ç›¸åŒçš„ä¸€ç»„å…ƒç´ ã€‚å½“ä½ åªæ˜¯æƒ³çŸ¥é“ä¸€ä¸ªå€¼<strong>æ˜¯å¦å­˜åœ¨</strong>æ—¶ï¼Œ<code>set</code>æ˜¯æœ€æœ‰ç”¨çš„ã€‚</p><ul><li><code>set</code><strong>ä¸ä¼šå‡ºç°é‡å¤å…ƒç´ </strong></li><li>å†…éƒ¨å…ƒç´ æ°¸è¿œ<strong>æœ‰åº</strong></li><li><code>set</code>ä¸­çš„å…ƒç´ ä¸€ç»æ·»åŠ å°±<strong>ä¸èƒ½ä¿®æ”¹</strong>ã€‚</li></ul><p><code>map</code>å¯ä»¥çœ‹åšç‰¹æ®Šçš„<code>vector</code>ï¼Œå…¶ç‰¹æ®Šä¹‹å¤„åœ¨äºæ­¤<code>map</code>ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½ç”±ä¸¤éƒ¨åˆ† <code>(key, value)</code> æ„æˆï¼ŒC++å°†æ¯ä¸ªè¿™æ ·çš„ <code>(key, value)</code> å°è£…æˆä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ç±»åˆ«ä¸º<code>pair</code>ã€‚<code>map</code>å†…éƒ¨å…ƒç´ éƒ½ä¸º<code>pair</code>ç±»å‹ã€‚</p><ul><li><code>map</code><strong>ä¸ä¼šå‡ºç°é‡å¤<code>key</code></strong></li><li>å†…éƒ¨å…ƒç´ æ°¸è¿œæœ‰åºï¼ŒæŒ‰ç…§<code>pair</code>ç±»å‹å…ƒç´ çš„keyå­—æ®µæ’åºï¼ˆkeyå­—æ®µå¿…é¡»èƒ½å¤Ÿè¢«æ’åºï¼‰ã€‚</li><li><code>map</code>ä¸­çš„keyä¸€ç»æ·»åŠ å°±<strong>ä¸èƒ½ä¿®æ”¹</strong>ã€‚</li></ul><h2 id="2-æœ‰åºå®¹å™¨åŸºæœ¬æ“ä½œ"><a href="#2-æœ‰åºå®¹å™¨åŸºæœ¬æ“ä½œ" class="headerlink" title="2. æœ‰åºå®¹å™¨åŸºæœ¬æ“ä½œ"></a>2. æœ‰åºå®¹å™¨åŸºæœ¬æ“ä½œ</h2><p>ä»¥ä¸‹æ‰€æœ‰æ“ä½œéœ€è¦æ·»åŠ å¤´æ–‡ä»¶ï¼š</p><pre><code class="lang-cpp">#include &lt;map&gt;#include &lt;set&gt;</code></pre><h3 id="2-1-åˆå§‹åŒ–"><a href="#2-1-åˆå§‹åŒ–" class="headerlink" title="2.1 åˆå§‹åŒ–"></a>2.1 åˆå§‹åŒ–</h3><h4 id="2-1-1-map"><a href="#2-1-1-map" class="headerlink" title="2.1.1 map"></a>2.1.1 map</h4><pre><code class="lang-cpp">map&lt;int, int&gt; m; // é»˜è®¤åˆå§‹åŒ–map&lt;int, int&gt; m&#123;&#123;1, 2&#125;, &#123;2, 4&#125;&#125;; // åˆå§‹åŒ–åˆ—è¡¨map&lt;int, int&gt; m2(m); // æ‹·è´æ„é€ å‡½æ•°map&lt;int, int&gt; m = &#123;&#123;1, 2&#125;, &#123;2, 4&#125;&#125;; // åˆå§‹åŒ–åˆ—è¡¨ + æ‹·è´æ„é€ å‡½æ•°// pairå’Œmake_pair()åœ¨#include&lt;utility&gt;ä¸­map&lt;int, int&gt; m3 = &#123;    std::pair&lt;int, int&gt;(1, 2), std::pair&lt;int, int&gt;(2, 4)&#125;; // åˆå§‹åŒ–åˆ—è¡¨çš„æ–¹æ³•å±•å¼€æ¥è¯´å°±æ˜¯è¿™æ ·map&lt;int, int&gt; m4&#123;    std::make_pair(1, 2), std::make_pair(2, 4)&#125;; // æˆ–è€…ä½¿ç”¨make_pairå‡½æ•°ï¼Œå…å¾—è¾“å…¥å‚æ•°ç±»å‹ï¼Œæ•ˆæœç­‰ä»·ã€‚// std::begin()å’Œend()åœ¨#include &lt;iterator&gt; ä¸­map&lt;int, int&gt; m5 = &#123;std::begin(m), std::end(m)&#125;; // è¿­ä»£å™¨ï¼Œå‰ææ˜¯è¢«è¿­ä»£çš„å¯¹è±¡å†…éƒ¨å…ƒç´ ç±»å‹æ˜¯pair</code></pre><h4 id="2-1-2-set"><a href="#2-1-2-set" class="headerlink" title="2.1.2 set"></a>2.1.2 set</h4><pre><code class="lang-cpp">set&lt;int&gt; s; // é»˜è®¤åˆå§‹åŒ–set&lt;int&gt; s&#123;1, 2, 3, 6, 9, 10&#125;; // åˆå§‹åŒ–åˆ—è¡¨set&lt;int&gt; s2(s); // æ‹·è´æ„é€ å‡½æ•°set&lt;int&gt; s = &#123;1, 2, 3, 6, 9, 10&#125;; // åˆå§‹åŒ–åˆ—è¡¨ + æ‹·è´æ„é€ å‡½æ•°// std::begin()å’Œend()åœ¨#include &lt;iterator&gt; ä¸­int arr[] = &#123;1, 2, 5, 8, 9&#125;;set&lt;int&gt; s2&#123;std::begin(arr), std::end(arr)&#125;; // è¿­ä»£å™¨</code></pre><h4 id="2-1-3-å®šä¹‰æ’åºæ–¹æ³•"><a href="#2-1-3-å®šä¹‰æ’åºæ–¹æ³•" class="headerlink" title="2.1.3 å®šä¹‰æ’åºæ–¹æ³•"></a>2.1.3 å®šä¹‰æ’åºæ–¹æ³•</h4><p>å¯ä»¥ç»™mapæˆ–setåˆå§‹åŒ–æ—¶è¾“å…¥ä¸€ä¸ªæ¯”è¾ƒå™¨ï¼Œç”¨ä»¥æ›¿ä»£åŸæœ‰çš„æ¯”è¾ƒkeyå¤§å°çš„æ–¹æ³•ï¼ˆåŸæ¥ä¸€èˆ¬æ˜¯å°äºå·ï¼‰ã€‚è¿™ä¸ªæ¯”è¾ƒå™¨å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå½“åšå‡½æ•°ç”¨çš„å‡½æ•°å¯¹è±¡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ã€‚</p><pre><code class="lang-cpp">struct comp &#123;    template&lt;typename T&gt;    bool operator() (const T&amp; l, const T&amp; r) const &#123;        return l &gt; r;    &#125;&#125;;int main() &#123;    map&lt;int, int, comp&gt; m = &#123;        &#123;1, 5&#125;, &#123;2, 3&#125;, &#123;7, 6&#125;    &#125;;    for (auto&amp;&amp; [key, val] : m) &#123;        cout &lt;&lt; key &lt;&lt; &quot; &quot; &lt;&lt; val &lt;&lt; endl;    &#125;&#125;output&gt;&gt; 7 6&gt;&gt; 2 3&gt;&gt; 1 5</code></pre><p>å®ç°è‡ªå·±å†™çš„æ¯”è¾ƒå™¨ï¼Œç®€å•æ¥è¯´å°±æ˜¯å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„â€œ&lt;â€å°äºå·ã€‚<br>åŸæœ‰çš„æ¯”è¾ƒå™¨<code>bool compare(object&amp; left, object&amp; right)</code>ä½œç”¨å¦‚ä¸‹ï¼š</p><ol><li>compareè¾“å‡ºtrueï¼Œmap è®¤ä¸º left å°äº right ï¼ŒæŠŠleftæ”¾åœ¨rightå‰é¢ã€‚</li><li>compareè¾“å‡ºfalseï¼Œmap è®¤ä¸º left å¤§äºç­‰äº rightã€‚</li><li>å¦‚æœcompare(left, right)ä¸ºfalseï¼Œcompare(right, left)ä¹Ÿä¸ºfalseï¼Œå°±è®¤ä¸ºleft==rightã€‚å¦åˆ™leftæ”¾åœ¨rightåé¢ã€‚</li></ol><blockquote><p>è‡ªå·±å®ç°çš„æ¯”è¾ƒå™¨ï¼Œå¿…é¡»è®©å…³é”®å­—é›†åˆæ»¡è¶³ä»¥ä¸‹æ€§è´¨ï¼š</p><ul><li>å…³é”®å­—è‡ªå·±ä¸èƒ½å°äºè‡ªå·±</li><li>ä¸¤ä¸ªå…³é”®å­—ä¸èƒ½äº’ç›¸å°äºå¯¹æ–¹</li><li>å¦‚æœæŒ‰ç…§æ¯”è¾ƒå™¨ï¼Œkey1å°äºkey2ï¼Œkey2å°äºkey3ï¼Œåˆ™key1å°äºkey3</li></ul><p>å­¦è¿‡ç¦»æ•£æ•°å­¦çš„åŒå­¦åº”è¯¥çŸ¥é“ï¼Œä¸Šé¢æè¿°çš„è¿™ç§äºŒå…ƒå…³ç³»æ»¡è¶³åè‡ªåæ€§ã€åå¯¹ç§°æ€§å’Œä¼ é€’æ€§ã€‚æ»¡è¶³è¿™ä¸‰ä¸ªæ€§è´¨çš„å…³ç³»ç§°ä¹‹ä¸ºâ€œä¸¥æ ¼ååºå…³ç³»â€ã€‚æˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­è§åˆ°çš„æ•°å­—æ¯”è¾ƒçš„å°äºå·ã€é›†åˆä¸­â€œçœŸåŒ…å«äºâ€éƒ½æ˜¯è¿™ç§å…³ç³»ã€‚</p></blockquote><h3 id="2-2-æ·»åŠ å…ƒç´ "><a href="#2-2-æ·»åŠ å…ƒç´ " class="headerlink" title="2.2 æ·»åŠ å…ƒç´ "></a>2.2 æ·»åŠ å…ƒç´ </h3><h4 id="2-2-1-insert"><a href="#2-2-1-insert" class="headerlink" title="2.2.1 insert"></a>2.2.1 insert</h4><p>å¯¹äºmap</p><pre><code class="lang-cpp">map&lt;string, int&gt; m;m.insert(&#123;&quot;str&quot;, 1&#125;);m.insert(make_pair(&quot;ser&quot;, 1));m.insert(pair&lt;string, int&gt;(&quot;ssr&quot;, 1));m.insert(map&lt;string, int&gt;::value_type(&quot;sdr&quot;, 1));</code></pre><p>å¯¹äºset</p><pre><code class="lang-cpp">vector&lt;int&gt; ivec = &#123;2, 4, 6, 8&#125;;set&lt;int&gt; set2;set2.insert(1);set2.insert(&#123;2, 4, 6, 8&#125;);set2.insert(ivec.cbegin(), ivec.cend());</code></pre><p>insertå‡½æ•°å’Œemplaceå‡½æ•°è¿”å›pairå¯¹è±¡ï¼Œpair.firstä¸ºè¿­ä»£å™¨ï¼ŒæŒ‡å‘åˆšæ’å…¥çš„å…ƒç´ ï¼Œpair.secondä¸ºboolï¼Œè¡¨ç¤ºæ’å…¥æ˜¯å¦æˆåŠŸã€‚å¦‚æœç”±äºå­˜åœ¨é‡å¤å¯¼è‡´æ’å…¥å¤±è´¥ï¼Œåˆ™é™¤äº†secondä¸ºfalseä¹‹å¤–ï¼ŒfirstæŒ‡å‘é‚£ä¸ªé‡å¤å…ƒç´ ã€‚</p><pre><code class="lang-cpp">set&lt;int&gt; s;const auto [iter, success] = s.insert(x); // è¿”å›å€¼æ‹†æˆä¸¤ä¸ª</code></pre><h4 id="2-2-2-å¯¹mapä½¿ç”¨ä¸‹æ ‡-æ“ä½œ"><a href="#2-2-2-å¯¹mapä½¿ç”¨ä¸‹æ ‡-æ“ä½œ" class="headerlink" title="2.2.2 å¯¹mapä½¿ç”¨ä¸‹æ ‡[]æ“ä½œ"></a>2.2.2 å¯¹mapä½¿ç”¨ä¸‹æ ‡[]æ“ä½œ</h4><p>mapä½¿ç”¨ä¸‹æ ‡æ“ä½œé¦–å…ˆä¼šæŸ¥æ‰¾è¯¥keyçš„å…ƒç´ ï¼Œæ‰¾ä¸åˆ°å°±æ–°å»ºä¸€ä¸ªkeyçš„pairï¼Œå°†å…¶åˆå§‹åŒ–ã€‚æœ€åæ‰§è¡Œèµ‹å€¼æ“ä½œã€‚</p><pre><code class="lang-cpp">map&lt;char, int&gt; mp;mp[&#39;a&#39;] = 5;mp[&#39;b&#39;] = 4;mp[&#39;c&#39;] = 3;</code></pre><h3 id="2-3-è®¿é—®å’ŒæŸ¥æ‰¾å…ƒç´ "><a href="#2-3-è®¿é—®å’ŒæŸ¥æ‰¾å…ƒç´ " class="headerlink" title="2.3 è®¿é—®å’ŒæŸ¥æ‰¾å…ƒç´ "></a>2.3 è®¿é—®å’ŒæŸ¥æ‰¾å…ƒç´ </h3><p>mapé™¤äº†ä½¿ç”¨ä¸‹æ ‡æ“ä½œè®¿é—®å…ƒç´ ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ç”¨<code>at()</code>å‡½æ•°ã€‚</p><pre><code class="lang-cpp">map&lt;char, int&gt; mp;mp.at(k) // æŸ¥æ‰¾å…³é”®å­—ä¸ºkçš„å…ƒç´ ï¼Œæ‰¾ä¸åˆ°å°±æŠ›å‡ºå¼‚å¸¸</code></pre><p>å…³è”å®¹å™¨å†…ç½®çš„<code>find</code>å‡½æ•°å’Œ<code>count</code>å‡½æ•°å¯ä»¥æ‰§è¡ŒæŸ¥æ‰¾æ“ä½œ</p><pre><code class="lang-cpp">//cä¸ºä¸€ä¸ªmapå®¹å™¨c.find(k) // è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘å…³é”®å­—ä¸ºkçš„å…ƒç´ ã€‚è‹¥kä¸åœ¨å®¹å™¨ä¸­ï¼Œåˆ™è¿”å›å°¾åè¿­ä»£å™¨c.count(k) // è¿”å›å…³é”®å­—ç­‰äºkçš„å…ƒç´ æ•°é‡ã€‚å¯¹äºmapå’Œsetè€Œè¨€ï¼Œè¿”å›å€¼æ°¸è¿œæ˜¯0æˆ–1ã€‚</code></pre><p>å½“æˆ‘ä»¬è¦åœ¨mapå®¹å™¨ä¸­æŸ¥æ‰¾ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨findå‡½æ•°æŸ¥æ‰¾ã€‚</p><pre><code class="lang-cpp">auto it = word_count.find(&quot;foobar&quot;);if(it==word_count.end())   cout&lt;&lt;&quot;foobar is not in the map&quot;&lt;&lt;endl;else   cout&lt;&lt;it-&gt;first&lt;&lt;&quot; &quot;&lt;&lt;it-&gt;second&lt;&lt;endl;</code></pre><p>åœ¨æœ‰åºå®¹å™¨ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ‰¾åˆ°å…³é”®å­—ké™„è¿‘çš„å…ƒç´ ã€‚</p><pre><code class="lang-cpp">s.lower_bound(k); // è¿”å›è¿­ä»£å™¨ï¼ŒæŒ‡å‘ç¬¬ä¸€ä¸ªå…³é”®å­—**ä¸å°äº**kçš„å…ƒç´ s.upper_bound(k); // è¿”å›è¿­ä»£å™¨ï¼ŒæŒ‡å‘ç¬¬ä¸€ä¸ªå…³é”®å­—**å¤§äº**kçš„å…ƒç´ s.equal_range(k); // è¿”å›pair&lt;iter, iter&gt;ï¼Œè¡¨ç¤ºå…³é”®å­—ä¸ºkçš„å…ƒç´ èŒƒå›´ã€‚é€‚ç”¨äºmultiset/multimapã€‚è‹¥æ˜¯æ²¡æœ‰kï¼Œåˆ™è¿”å›ä¸¤ä¸ªend()</code></pre><p>åœ¨å¯¹äºå…è®¸é‡å¤å…³é”®å­—çš„å®¹å™¨æ¥è¯´ï¼ŒæŸ¥æ‰¾å…ƒç´ çš„è¿‡ç¨‹ç¨å¾®å¤æ‚äº›ï¼Œå› ä¸ºä¸€ä¸ªå…³é”®å­—å¯èƒ½å¯¹åº”å¤šä¸ªå€¼ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¿™ä¹ˆå¯¹åº”çš„å€¼éƒ½æ‰¾å‡ºæ¥ã€‚<br>å¦‚æœmultimapä¸­æœ‰å¤šä¸ªå…ƒç´ å…·æœ‰ç›¸åŒçš„å…³é”®å­—ï¼Œåˆ™è¿™äº›å…³é”®å­—åœ¨å®¹å™¨ä¸­ä¼šç›¸é‚»å­˜å‚¨ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸€ç‰¹æ€§ï¼Œå°†ä¸€ä¸ªå…³é”®å­—å¯¹åº”çš„å¤šä¸ªå€¼å…¨éƒ¨æ‰¾å‡ºæ¥ã€‚</p><pre><code class="lang-cpp">//ã€ŠC++ Primerã€‹ç¤ºä¾‹ï¼ŒæŸ¥æ‰¾æŸä½œè€…å¯¹åº”çš„æ‰€æœ‰ä¹¦ç±//authorsæ˜¯ä¸€ä¸ªmultimapå®¹å™¨string search_item(&quot;Alain&quot;);int numbers=authors.count(search_item);auto it=authors.find(search_item);while(numbers)&#123;   cout&lt;&lt;iter-&gt;second&lt;&lt;endl;   ++it;   numbers--;&#125;// æˆ–è€…é‡‡ç”¨ä¸€ç§å…¶ä»–æ–¹å¼for (auto beg = authors.lower_bound(search_item),          end = authors.upper_bound(search_item);     beg != end; ++beg) &#123;    cout &lt;&lt; beg-&gt;second &lt;&lt; endl; &#125;// æˆ–è€…é‡‡ç”¨ä¸€ç§æ›´åŠ ç›´æ¥çš„æ–¹å¼for (auto pos = authors.equal_range(search_item);     pos.first != pos.second; ++pos.first)&#123;    cout &lt;&lt; pos.first-&gt;second &lt;&lt; endl; // æ‰“å°æ¯æœ¬ä¹¦&#125;</code></pre><h3 id="2-4-åˆ é™¤å…ƒç´ "><a href="#2-4-åˆ é™¤å…ƒç´ " class="headerlink" title="2.4 åˆ é™¤å…ƒç´ "></a>2.4 åˆ é™¤å…ƒç´ </h3><p>ä½¿ç”¨erase</p><pre><code class="lang-cpp">// sä¸ºå…³è”å®¹å™¨ï¼Œå¯èƒ½ä¸ºset/map/multiset/multimaps.erase(k); // åˆ é™¤æŒ‡å®šå…³é”®å­—çš„å…ƒç´ ï¼Œè¿”å›åˆ é™¤çš„ä¸ªæ•°ã€‚s.erase(iter); // iterå¿…é¡»æŒ‡å‘sä¸­çš„ä¸€ä¸ªçœŸå®å…ƒç´ ï¼Œè¿”å›æŒ‡å‘åˆ é™¤å…ƒç´ ä¹‹åçš„å…ƒç´ çš„è¿­ä»£å™¨ã€‚s.erase(iter1, iter2); // åˆ é™¤è¿­ä»£å™¨[iter1, iter2)ï¼Œå…¶ä¸­å¿…é¡»æ˜¯çœŸæ˜¯çš„å…ƒç´ ã€‚iter2æŒ‡å‘çš„å…ƒç´ ä¸åˆ é™¤ã€‚è¿”å›iter2</code></pre><h2 id="3-æ— åºå®¹å™¨ç‰¹æœ‰æ“ä½œ"><a href="#3-æ— åºå®¹å™¨ç‰¹æœ‰æ“ä½œ" class="headerlink" title="3. æ— åºå®¹å™¨ç‰¹æœ‰æ“ä½œ"></a>3. æ— åºå®¹å™¨ç‰¹æœ‰æ“ä½œ</h2><h3 id="3-1-æ— åºå®¹å™¨ç‰¹ç‚¹"><a href="#3-1-æ— åºå®¹å™¨ç‰¹ç‚¹" class="headerlink" title="3.1 æ— åºå®¹å™¨ç‰¹ç‚¹"></a>3.1 æ— åºå®¹å™¨ç‰¹ç‚¹</h3><p>å¦‚æœæˆ‘ä»¬ä¸å…³å¿ƒå®¹å™¨ä¸­å…ƒç´ çš„æ¬¡åºï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ— åºå®¹å™¨ã€‚åœ¨æ— åºå®¹å™¨ä¸­ï¼Œå…ƒç´ æ²¡æœ‰æ˜ç¡®çš„æ’åˆ—æ¬¡åºï¼Œå½“ä½ è¿­ä»£å®¹å™¨å†…çš„æ‰€æœ‰å…ƒç´ æ—¶ï¼Œä¼šå‘ç°ä»–ä»¬çš„æ¬¡åºä¸ªæœ‰å¯èƒ½ã€‚æˆ‘ä»¬å”¯ä¸€å…³å¿ƒçš„æ˜¯æŸä¸ªå…ƒç´ ç‰¹å®šå…ƒç´ æ˜¯å¦ä½äºå®¹å™¨å†…ã€‚</p><p>æ— éœ€å®¹å™¨ï¼Œå¸¸å¸¸ä»¥Hash tableå®ç°å‡ºæ¥ï¼Œå†…éƒ¨ç»“æ„æ˜¯ä¸€ä¸ªç±»ä¼¼äº<code>vector&lt;list&gt;</code>çš„åˆ—è¡¨ï¼Œåˆ—è¡¨çš„å…ƒç´ æ˜¯é“¾è¡¨<code>linked list</code>ã€‚é€šè¿‡æŸä¸ªhashå‡½æ•°çš„è¿ç®—ï¼Œç¡®å®šå…ƒç´ è½äºè¿™ä¸ªåˆ—è¡¨çš„ä½ç½®ã€‚</p><p>Hashå‡½æ•°çš„è¿ç®—ç›®æ ‡æ˜¯è®©æ¯ä¸ªå…ƒç´ çš„è½ç‚¹ï¼ˆä½ç½®ï¼‰æœ‰åŠ©äºç”¨æˆ·å¿«é€Ÿè®¿é—®ä»»ä½•ä¸€ä¸ªå…ƒç´ ï¼ˆå‰æåˆ™æ˜¯å“ˆå¸Œå‡½æ•°æœ¬èº«ä¹Ÿå¿…é¡»å¤Ÿå¿«ï¼‰ã€‚</p><p>ç”±äºè¿™æ ·ä¸€ä¸ªå¿«é€Ÿè€Œå®Œç¾çš„å“ˆå¸Œå‡½æ•°ä¸ä¸€å®šå­˜åœ¨ã€‚æŠ‘æˆ–ç”±äºé€ æˆarrayè€—è´¹å·¨é¢å†…å­˜è€Œæ˜¾å¾—ä¸åˆ‡å®é™…ï¼Œå› æ­¤é€€è€Œæ±‚å…¶æ¬¡çš„å“ˆå¸Œå‡½æ•°æœ‰å¯èƒ½è®©å¤šä¸ªå…ƒç´ è½äºåŒä¸€ä½ç½®ä¸Šï¼Œæ‰€ä»¥è®¾è®¡ä¸Šå°±è®©vectorçš„å…ƒç´ å†è¢«æ”¾è¿›ä¸€ä¸ªlinked listä¸­ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œvectorçš„æ¯ä¸ªä½ç½®å°±å¾—ä»¥å­˜æ”¾ä¸€ä¸ªä»¥ä¸Šçš„å…ƒç´ ã€‚</p><p><img src="/2020/03/20/C-%E5%85%B3%E8%81%94%E5%AE%B9%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/2020-03-20-18-01-59.png" alt></p><p>æ— åºå®¹å™¨çš„ä¸»è¦ä¼˜ç‚¹æ˜¯ï¼Œå½“ä½ æ‰“ç®—æŸ¥æ‰¾ä¸€ä¸ªç‰¹å®šå€¼çš„å…ƒç´ ï¼Œå…¶é€Ÿåº¦ç”šè‡³å¯èƒ½å¿«è¿‡æœ‰åºå…³è”å¼å®¹å™¨ï¼ˆæ—¶é—´å¤æ‚åº¦O(1)ï¼‰ã€‚å‰ææ˜¯ä½ æœ‰ä¸€ä¸ªè‰¯å¥½çš„å“ˆå¸Œå‡½æ•°ã€‚ç„¶è€Œè¿™æ ·çš„å“ˆå¸Œå‡½æ•°å¯èƒ½éœ€è¦è®¸å¤šå†…å­˜ã€‚</p><p>ä»¥ä¸‹æ‰€æœ‰æ“ä½œéœ€è¦æ·»åŠ å¤´æ–‡ä»¶ï¼š</p><pre><code class="lang-cpp">#include &lt;unordered_map&gt;#include &lt;unordered_set&gt;</code></pre><p><code>unordered_map</code>/<code>unordered_multimap</code>/<code>unordered_set</code>/<code>unordered_multiset</code>çš„åˆå§‹åŒ–ã€æ’å…¥ã€æŸ¥æ‰¾å’Œåˆ é™¤çš„æ–¹æ³•ä¸æ™®é€šçš„<code>map</code>/<code>multimap</code>/<code>set</code>/<code>multiset</code>æ²¡æœ‰å¤§çš„åŒºåˆ«ã€‚æ³¨æ„ä»¥ä¸‹ä¸»è¦åŒºåˆ«è¦ç‚¹ï¼š</p><ol><li>æ— åºå®¹å™¨å†…éƒ¨ä¸å«æ¯”è¾ƒå™¨ï¼Œå› æ­¤ä½ ä¹Ÿä¸èƒ½æä¾›è‡ªå®šä¹‰æ¯”è¾ƒå™¨ã€‚</li><li>æ¯æ¬¡å¯¹æ— åºå®¹å™¨çš„æ·»åŠ æ“ä½œå¯èƒ½ä¼šå¼•èµ·æ— åºå®¹å™¨æ¬¡åºçš„æ”¹å˜ã€‚å³ä¾¿æ˜¯ç›¸åŒå…ƒç´ ï¼Œåœ¨ä¸åŒçš„ç”µè„‘ä¸Šä¹Ÿå¯èƒ½å¾—åˆ°ä¸åŒçš„æ¬¡åºã€‚</li><li>åˆ é™¤å…ƒç´ è™½ç„¶ä¸ä¼šå¼•èµ·æ— åºå®¹å™¨æ¬¡åºæ”¹å˜ï¼Œä½†æ˜¯åˆ é™¤ä¹‹åçš„ç¬¬ä¸€æ¬¡æ’å…¥å¿…ç„¶ä¼šå¼•å‘æ¬¡åºæ”¹å˜ã€‚</li></ol><p>æ¬¡åºç©¶ç«Ÿä¼šä¸ä¼šå˜åŒ–ã€æ€æ ·å˜åŒ–å–å†³äºä½¿ç”¨çš„rehashingç­–ç•¥ï¼Œè¯¥ç­–ç•¥å¯ç”±ç¨‹åºå‘˜è‡ªå®šä¹‰ï¼Œå°±åƒåœ¨æœ‰åºå…³è”å®¹å™¨é‡Œå®šä¹‰æ’åºå‡½æ•°é‚£æ ·ã€‚</p><h3 id="3-2-ç®¡ç†æ¡¶"><a href="#3-2-ç®¡ç†æ¡¶" class="headerlink" title="3.2 ç®¡ç†æ¡¶"></a>3.2 ç®¡ç†æ¡¶</h3><p>1.æ¡¶æ¥å£</p><pre><code class="lang-cpp">m.bucket_count()        æ­£åœ¨ä½¿ç”¨çš„æ¡¶çš„æ•°ç›®m.max_bucket_count()    å®¹å™¨èƒ½å®¹çº³çš„æœ€å¤šçš„æ¡¶çš„æ•°é‡m.bucket_size(n)        ç¬¬nä¸ªæ¡¶ä¸­æœ‰å¤šå°‘ä¸ªå…ƒç´ m.bucket(k)             å…³é”®å­—ä¸ºkçš„å…ƒç´ åœ¨å“ªä¸ªæ¡¶</code></pre><p>2.æ¡¶è¿­ä»£</p><pre><code class="lang-cpp">local_iterator            å¯ä»¥ç”¨æ¥è®¿é—®æ¡¶ä¸­å…ƒç´ çš„è¿­ä»£å™¨ç±»å‹const_local_iterator      æ¡¶è¿­ä»£å™¨çš„constç‰ˆæœ¬m.begin(n)ã€m.end(n)      æ¡¶nçš„é¦–å…ƒç´ è¿­ä»£å™¨å’Œå°¾åè¿­ä»£å™¨ï¼ˆnæ˜¯ä»€ä¹ˆç±»å‹ï¼Ÿï¼‰m.cbegin(n)ã€m.cend(n)    ä¸å‰ä¸¤ä¸ªå‡½æ•°ç±»ä¼¼ï¼Œä½†è¿”å›const_local_iterator</code></pre><p>3.å“ˆå¸Œç­–ç•¥</p><pre><code class="lang-cpp">//æ¯ä¸ªæ¡¶çš„å¹³å‡å…ƒç´ æ•°é‡ï¼Œè¿”å›floatå€¼m.load_factor() //mè¯•å›¾ç»´æŠ¤çš„å¹³å‡æ¡¶å¤§å°ï¼Œè¿”å›floatå€¼ï¼Œè¦æ±‚åˆ›å»ºçš„æ–°æ¡¶çš„load_factor&lt;=max_load_factor         m.max_load_factor() //é‡æ–°å­˜å‚¨ï¼Œä½¿å¾—bucket_count&gt;=nï¼Œä¸”bucket_count&gt;size/max_load_factor         m.rehash(n)  //é‡æ–°å­˜å‚¨ï¼Œä½¿å¾—må¯ä»¥ä¿å­˜nä¸ªå…ƒç´ ä¸”ä¸å¿…rehash m.reserve(n)</code></pre><h3 id="3-3-è‡ªå®šä¹‰å“ˆå¸Œå‡½æ•°å’Œæ¯”è¾ƒå‡½æ•°"><a href="#3-3-è‡ªå®šä¹‰å“ˆå¸Œå‡½æ•°å’Œæ¯”è¾ƒå‡½æ•°" class="headerlink" title="3.3 è‡ªå®šä¹‰å“ˆå¸Œå‡½æ•°å’Œæ¯”è¾ƒå‡½æ•°"></a>3.3 è‡ªå®šä¹‰å“ˆå¸Œå‡½æ•°å’Œæ¯”è¾ƒå‡½æ•°</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ— åºå®¹å™¨ä½¿ç”¨<code>==</code>æ¥åˆ¤æ–­ä¸¤keyæ˜¯å¦ç›¸ç­‰ï¼Œå¹¶ä½¿ç”¨ç³»ç»Ÿå†…ç½®çš„å“ˆå¸Œå‡½æ•°ç”Ÿæˆå“ˆå¸Œå€¼ã€‚ä¸åŒç±»å‹çš„keyä¼šåº”ç”¨åˆ°ä¸åŒçš„å“ˆå¸Œå‡½æ•°ï¼Œå¦‚ä¸‹éƒ½æ˜¯STLå†…ç½®çš„å“ˆå¸Œå‡½æ•°å¯¹è±¡ï¼š</p><pre><code class="lang-cpp">struct hash&lt;char*&gt;struct hash&lt;const char*&gt;struct hash&lt;char&gt; struct hash&lt;unsigned char&gt; struct hash&lt;signed char&gt;struct hash&lt;short&gt;struct hash&lt;unsigned short&gt; struct hash&lt;int&gt; struct hash&lt;unsigned int&gt;struct hash&lt;long&gt; struct hash&lt;unsigned long&gt;</code></pre><p>å¦‚æœkeyä½¿ç”¨çš„æ˜¯ä»¥ä¸Šç±»å‹ä¸­çš„ä¸€ç§ï¼Œå¯ä»¥ä½¿ç”¨ç¼ºçœçš„hashå‡½æ•°ã€‚å½“ç„¶ä½ ç¨‹åºå‘˜å¯ä»¥å®šä¹‰è‡ªå·±çš„hashå‡½æ•°ã€‚å¯¹äºè‡ªå®šä¹‰å¯¹è±¡ï¼Œåªèƒ½è‡ªå®šä¹‰hashå‡½æ•°ã€‚</p><p>ä¸‹é¢æ˜¯ã€ŠC++ Primerã€‹çš„ä¸€ä¸ªè‡ªå®šä¹‰å“ˆå¸Œå‡½æ•°çš„ä¸€ä¸ªä¾‹å­ï¼š</p><pre><code class="lang-cpp">/* å®šä¹‰å“ˆå¸Œå‡½æ•°å’Œåˆ¤ç­‰å™¨ */size_t hasher(const Sales_data &amp;sd)&#123;    // å¯¹ä¹¦ç±å¯¹è±¡çš„å“ˆå¸Œ    return hash&lt;string&gt;() (sd.isbn()); // è¿”å›å…¶isbnç¼–å·çš„å“ˆå¸Œï¼Œè°ƒç”¨å†…ç½®çš„stringå“ˆå¸Œå‡½æ•°&#125;bool eqOp(const Sales_data &amp;lhs, const Sales_data &amp;rhs)&#123;    // å¦‚ä½•åˆ¤æ–­ä¸¤æœ¬ä¹¦æ˜¯å¦ç›¸ç­‰ï¼Ÿ    return lhs.isbn() == rhs.isbn(); // åˆ¤æ–­ä¸¤ä¹¦çš„isbnç¼–å·æ˜¯å¦ç›¸ç­‰&#125;/* ä½¿ç”¨å“ˆå¸Œå‡½æ•°å’Œåˆ¤ç­‰å™¨ */using SD_multiset = unordered_multiset&lt;Sales_data, decltype(hasher)*, decltype(eqOp)*&gt;; // ç±»å‹åå¤ªé•¿äº†ï¼Œå°†ç±»å‹åä¿å­˜æˆåˆ«çš„å˜é‡åSD_multiset bookstore(42, hasher, eqOp);</code></pre><h2 id="4-å°ç»“"><a href="#4-å°ç»“" class="headerlink" title="4. å°ç»“"></a>4. å°ç»“</h2><p>å¯¹C++ å…³è”å®¹å™¨çš„æ€»ç»“åˆ°æ­¤å‘Šä¸€æ®µè½ã€‚æœ¬ç¯‡æ–‡ç« ä»å¼€å§‹ç€æ‰‹å†™ä½œåˆ°å®Œæˆï¼Œä¸é—´æ–­åœ°å·¥ä½œäº†å…«ä¸ªå°æ—¶ï¼ŒæœŸé—´ä¸æ–­é‡æ¸©å·²ç»é—å¿˜çš„çŸ¥è¯†ï¼ŒæŸ¥é˜…èµ„æ–™ï¼Œå…¶ä¸­å¾ˆå¤šè¿˜æ˜¯è‡ªå·±æ›¾ç»æ”¶è—è¿‡çš„èµ„æ–™ã€‚</p><p>å†™ä½œæ—¶ï¼Œæˆ‘å¤šæ¬¡é—®è‡ªå·±ï¼šå†™ä¸€ç¯‡ä¸ä¼šæœ‰äººçœ‹çš„æ–‡ç« å€¼å¾—å—ï¼Ÿæˆ‘ä¹Ÿå¤šæ¬¡æƒ³è¦åƒæˆ‘ä»¥å‰å¾ˆå¤šæ–‡ç« ã€åƒCSDNå¤§å¤šæ•°çš„æ–‡ç« é‚£æ ·ï¼Œéšä¾¿æ°´æ°´ï¼Œè®°å½•ä¸€ä¸‹ï¼Œåæ­£åªæœ‰è‡ªå·±çœ‹ã€‚</p><p>ä½†æ˜¯è¿™æ¬¡æˆ‘è§‰å¾—ï¼Œæˆ‘è¦ä¸ºè‡ªå·±è´Ÿè´£ï¼Œè¦ä¸ºå·²ç»ä»˜å‡ºçš„ç²¾åŠ›å’Œæ—¶é—´è´Ÿè´£ã€‚æˆ‘ç›¸ä¿¡å¤§å®¶éƒ½ä¼šæœ‰è¿™ç§è¿·èŒ«çš„æ—¶å€™ï¼Œæ€€ç–‘è‡ªå·±æ‰‹å¤´ä¸Šçš„å·¥ä½œæœ‰æ²¡æœ‰æ„ä¹‰ï¼Œç”šè‡³æƒ³æ”¾å¼ƒã€‚</p><p>ä¸è¦è½»è¨€æ”¾å¼ƒï¼Œå°¤å…¶æ˜¯å½“ä½ æ€€ç–‘å®ƒçš„æ„ä¹‰çš„æ—¶å€™ã€‚å› ä¸ºè¿™ä¸ªæ—¶å€™ä½ å¯èƒ½æ˜¯åœ¨ä¸ºè‡ªå·±çš„æ‡’æƒ°æ‰¾å€Ÿå£ã€‚å°†ä¸€ä»¶äº‹æƒ…çš„æ„ä¹‰è´¬ä½ï¼Œè¿™ç§æƒ³æ³•å‡ºç°çš„å¤ªå®¹æ˜“ï¼Œåˆå¤ªèƒ½è®©è‡ªå·±è§£è„±äº†ã€‚è¿™æ˜¯ä¸€ç§è®©äººæ²¡æœ‰è´Ÿç½ªæ„Ÿçš„æ”¾å¼ƒæ–¹å¼ã€‚ä½†æ˜¯å›å¤´çœ‹ï¼Œå¾ˆå¤šå¥½æƒ³æ³•ï¼Œæ˜æ˜åªè¦åšæŒä¸€ä¸‹å°±å¯ä»¥å®ç°ã€‚å› ä¸ºå¯¹æ„ä¹‰çš„è¯„ä»·ï¼Œè¿‘ä¹äºé¢„æµ‹æœªæ¥ï¼Œæˆ‘ä»¬å¤§å¤šæ•°å¹³å‡¡äººæ˜¯æ²¡æœ‰è¿™ç§æœ¬äº‹çš„ã€‚</p><p>Be a better man, æ¯å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹ã€‚å¤§å®¶å…±å‹‰ï¼</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>map</tag>
      
      <tag>set</tag>
      
      <tag>STL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€è®ºæ–‡é˜…è¯»ç¬”è®°ã€‘DeepStellar Model-Based Quantitative Analysis of Stateful Deep Learning Systems</title>
    <link href="/2020/03/19/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91DeepStellar%20Model-Based%20Quantitative%20Analysis%20of%20Stateful%20Deep%20Learning%20Systems/"/>
    <url>/2020/03/19/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91DeepStellar%20Model-Based%20Quantitative%20Analysis%20of%20Stateful%20Deep%20Learning%20Systems/</url>
    
    <content type="html"><![CDATA[<p>DeepStellar æ˜¯å°‘æœ‰çš„é’ˆå¯¹RNNè¿›è¡Œæµ‹è¯•çš„å·¥å…·ï¼Œå®ƒæå‡ºäº†RNNæµ‹è¯•çš„æ–°æ€è·¯ã€‚<br>å°é¢ä¸Šçš„å¤§ç¥å°±æ˜¯è°¢è‚–é£åšå£«ï¼Œä»–æ˜¯DeepStellarä¸€é—®çš„ä½œè€…ã€‚<br><!--more---></p>]]></content>
    
    
    <categories>
      
      <category>paper</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RNN</tag>
      
      <tag>testing</tag>
      
      <tag>DeepStellar</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¾ªç¯ç¥ç»ç½‘ç»œæ¨¡å‹çš„è¦†ç›–ç‡è°ƒç ”</title>
    <link href="/2020/03/19/%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%A6%86%E7%9B%96%E7%8E%87%E8%B0%83%E7%A0%94/"/>
    <url>/2020/03/19/%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%A6%86%E7%9B%96%E7%8E%87%E8%B0%83%E7%A0%94/</url>
    
    <content type="html"><![CDATA[<h1 id="å¾ªç¯ç¥ç»ç½‘ç»œæ¨¡å‹çš„è¦†ç›–ç‡è°ƒç ”"><a href="#å¾ªç¯ç¥ç»ç½‘ç»œæ¨¡å‹çš„è¦†ç›–ç‡è°ƒç ”" class="headerlink" title="å¾ªç¯ç¥ç»ç½‘ç»œæ¨¡å‹çš„è¦†ç›–ç‡è°ƒç ”"></a>å¾ªç¯ç¥ç»ç½‘ç»œæ¨¡å‹çš„è¦†ç›–ç‡è°ƒç ”</h1><h2 id="1-èƒŒæ™¯"><a href="#1-èƒŒæ™¯" class="headerlink" title="1. èƒŒæ™¯"></a>1. èƒŒæ™¯</h2><h3 id="1-1-å¾ªç¯ç¥ç»ç½‘ç»œ"><a href="#1-1-å¾ªç¯ç¥ç»ç½‘ç»œ" class="headerlink" title="1.1 å¾ªç¯ç¥ç»ç½‘ç»œ"></a>1.1 å¾ªç¯ç¥ç»ç½‘ç»œ</h3><p>å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRecurrent neural networkï¼šRNNï¼‰æ˜¯ç¥ç»ç½‘ç»œçš„ä¸€ç§ã€‚</p><p>å•çº¯çš„RNNå› ä¸ºæ— æ³•å¤„ç†éšç€é€’å½’ï¼Œæƒé‡æŒ‡æ•°çº§çˆ†ç‚¸æˆ–æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼Œéš¾ä»¥æ•æ‰é•¿æœŸæ—¶é—´å…³è”ï¼›è€Œç»“åˆä¸åŒçš„LSTMå¯ä»¥å¾ˆå¥½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¾ªç¯ç¥ç»ç½‘ç»œå¯ä»¥æè¿°åŠ¨æ€æ—¶é—´è¡Œä¸ºã€‚å’Œå‰é¦ˆç¥ç»ç½‘ç»œï¼ˆfeedforward neural networkï¼‰æ¥å—è¾ƒç‰¹å®šç»“æ„çš„è¾“å…¥ä¸åŒï¼ŒRNNå°†çŠ¶æ€åœ¨è‡ªèº«ç½‘ç»œä¸­å¾ªç¯ä¼ é€’ï¼Œå› æ­¤å¯ä»¥æ¥å—æ›´å¹¿æ³›çš„æ—¶é—´åºåˆ—ç»“æ„è¾“å…¥ã€‚æ‰‹å†™è¯†åˆ«æ˜¯æœ€æ—©æˆåŠŸåˆ©ç”¨RNNçš„ç ”ç©¶ç»“æœã€‚</p><p>ä¸ºäº†æ›´å¥½åœ°ç†è§£å¾ªç¯ç¥ç»ç½‘ç»œï¼Œé¦–å…ˆéœ€è¦ä»‹ç»å‰é¦ˆç¥ç»ç½‘ç»œã€‚</p><h4 id="1-å‰é¦ˆç¥ç»ç½‘ç»œ"><a href="#1-å‰é¦ˆç¥ç»ç½‘ç»œ" class="headerlink" title="1) å‰é¦ˆç¥ç»ç½‘ç»œ"></a>1) å‰é¦ˆç¥ç»ç½‘ç»œ</h4><p>å‰é¦ˆç½‘ç»œé€šè¿‡åœ¨ç½‘ç»œçš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šåšå‡ºçš„ä¸€ç³»åˆ—æ“ä½œä¼ é€’ä¿¡æ¯ã€‚å‰é¦ˆç½‘ç»œæ¯æ¬¡é€šè¿‡æ¯ä¸ªå±‚ç›´æ¥å‘åä¼ é€’ä¿¡æ¯ã€‚è¿™ä¸å¾ªç¯ç¥ç»ç½‘ç»œä¸åŒã€‚ä¸€èˆ¬è€Œè¨€ï¼Œå‰é¦ˆç½‘ç»œæ¥å—ä¸€ä¸ªè¾“å…¥å¹¶æ®æ­¤äº§ç”Ÿè¾“å‡ºï¼Œè¿™ä¹Ÿæ˜¯å¤§å¤šæ•°ç›‘ç£å­¦ä¹ çš„æ­¥éª¤ï¼Œè¾“å‡ºç»“æœå¯èƒ½æ˜¯ä¸€ä¸ªåˆ†ç±»ç»“æœã€‚è¾“å‡ºå¯ä»¥æ˜¯ä»¥çŒ«ç‹—ç­‰ä½œä¸ºæ ‡ç­¾çš„ç±»åˆ«ã€‚æˆ‘ä»¬å¸¸è§çš„å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰å°±æ˜¯ä¸€ç±»ç»å…¸çš„å‰é¦ˆç½‘ç»œã€‚</p><p>å‰é¦ˆç½‘ç»œæ˜¯åŸºäºä¸€ç³»åˆ—é¢„å…ˆæ ‡æ³¨è¿‡çš„æ•°æ®è®­ç»ƒçš„ã€‚è®­ç»ƒé˜¶æ®µçš„ç›®çš„æ˜¯å‡å°‘å‰é¦ˆç½‘ç»œçŒœç±»åˆ«æ—¶çš„è¯¯å·®ã€‚ä¸€æ—¦è®­ç»ƒå®Œæˆï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨è®­ç»ƒåçš„æƒé‡å¯¹æ–°æ‰¹æ¬¡çš„æ•°æ®è¿›è¡Œåˆ†ç±»ã€‚</p><p><img src="/2020/03/19/%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%A6%86%E7%9B%96%E7%8E%87%E8%B0%83%E7%A0%94/2020-03-18-22-02-26.png" alt="img1"></p><p>åœ¨å‰é¦ˆç½‘ç»œä¸­ï¼Œåœ¨<strong>æµ‹è¯•é˜¶æ®µ</strong>æ— è®ºå±•ç¤ºç»™åˆ†ç±»å™¨çš„å›¾åƒæ˜¯ä»€ä¹ˆï¼Œéƒ½ä¸ä¼šæ”¹å˜æƒé‡ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šå½±å“ç¬¬äºŒä¸ªå†³ç­–ã€‚è¿™æ˜¯å‰é¦ˆç½‘ç»œå’Œå¾ªç¯ç½‘ç»œä¹‹é—´ä¸€ä¸ªéå¸¸å¤§çš„ä¸åŒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‰é¦ˆç½‘ç»œ<strong>åœ¨æµ‹è¯•æ—¶</strong>ä¸ä¼šè®°å¾—ä¹‹å‰çš„è¾“å…¥æ•°æ®ã€‚å®ƒä»¬åªä¼š<strong>åœ¨è®­ç»ƒé˜¶æ®µ</strong>è®°å¾—å†å²è¾“å…¥æ•°æ®ã€‚</p><p>ä¸å‰é¦ˆç¥ç»ç½‘ç»œä¸åŒï¼Œå¾ªç¯ç½‘ç»œä¸ä»…å°†å½“å‰çš„è¾“å…¥æ ·ä¾‹ä½œä¸ºç½‘ç»œè¾“å…¥ï¼Œè¿˜å°†å®ƒä»¬ä¹‹å‰æ„ŸçŸ¥åˆ°çš„ä¸€å¹¶ä½œä¸ºè¾“å…¥ã€‚</p><h4 id="2-å‰é¦ˆç½‘ç»œåˆ°å¾ªç¯ç½‘ç»œçš„è½¬å˜"><a href="#2-å‰é¦ˆç½‘ç»œåˆ°å¾ªç¯ç½‘ç»œçš„è½¬å˜" class="headerlink" title="2) å‰é¦ˆç½‘ç»œåˆ°å¾ªç¯ç½‘ç»œçš„è½¬å˜"></a>2) å‰é¦ˆç½‘ç»œåˆ°å¾ªç¯ç½‘ç»œçš„è½¬å˜</h4><p>ä¸‹å›¾æ˜¯ä¸€ä¸ªå¤šå±‚æ„ŸçŸ¥æœºç¤ºæ„å›¾ï¼Œè¯¥å›¾æ‰€ç¤ºçš„æ¨¡å‹åªæ‹¥æœ‰ä¸€ä¸ªéšè—å±‚ï¼ˆHidden Layerï¼‰ï¼Œå…¶æ¥å—æ¥è‡ªè¾“å…¥å±‚ç»è¿‡ReLUå¤„ç†åçš„ä¿¡å·ï¼Œè¾“å‡ºçš„ä¿¡å·å†ç»è¿‡Softmaxå±‚ï¼Œä»è€Œäº§ç”Ÿä¸€ä¸ªåˆ†ç±»ç»“æœã€‚</p><p><img src="/2020/03/19/%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%A6%86%E7%9B%96%E7%8E%87%E8%B0%83%E7%A0%94/2020-03-18-22-06-04.png" alt="img2"></p><p>å¦‚æœåœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­çš„å±‚æ•°å¢åŠ äº†ï¼Œå¹¶ä¸”æˆ‘ä»¬ä»¤éšè—å±‚ä¹Ÿæ¥æ”¶è¾“å…¥ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªéšè—å±‚å°†æ¿€æ´»ä¼ é€’åˆ°ç¬¬äºŒä¸ªéšè—å±‚ä¸Šï¼Œä»¥æ­¤ç±»æ¨ï¼Œæœ€ååˆ°è¾¾è¾“å‡ºå±‚ï¼Œæ¯ä¸€å±‚éƒ½æœ‰è‡ªå·±çš„æƒé‡ï¼ˆWï¼‰ã€åç½®é¡¹ï¼ˆBï¼‰å’Œæ¿€æ´»å‡½æ•°ï¼ˆFï¼‰ã€‚</p><p><img src="/2020/03/19/%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%A6%86%E7%9B%96%E7%8E%87%E8%B0%83%E7%A0%94/2020-03-18-22-09-56.png" alt="img3"></p><p>æˆ‘ä»¬ä»¤æ‰€æœ‰éšè—å±‚çš„æƒé‡å’Œåç½®é¡¹æ›¿æ¢æˆç›¸åŒçš„å€¼ï¼Œä»è€Œèƒ½ä½¿å¾—éšè—å±‚åœ¨æŸç§æ„ä¹‰ä¸Šâ€œåˆå¹¶â€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆæ³¨æ„å›¾ä¸­æ–¹æ¡†å†…éƒ¨éšè—å±‚çš„å‚æ•°ï¼‰ï¼š</p><p><img src="/2020/03/19/%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%A6%86%E7%9B%96%E7%8E%87%E8%B0%83%E7%A0%94/2020-03-18-22-12-56.png" alt="img4"></p><p>ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥å°†æ‰€æœ‰å±‚åˆå¹¶åœ¨ä¸€èµ·äº†ã€‚æ‰€æœ‰çš„éšè—å±‚éƒ½å¯ä»¥ç»“åˆåœ¨ä¸€ä¸ªå¾ªç¯å±‚ä¸­ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="/2020/03/19/%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%A6%86%E7%9B%96%E7%8E%87%E8%B0%83%E7%A0%94/2020-03-18-22-13-27.png" alt="img5"></p><p>æˆ‘ä»¬åœ¨æ¯ä¸€æ­¥éƒ½ä¼šå‘éšè—å±‚æä¾›è¾“å…¥ã€‚ç°åœ¨ä¸€ä¸ªå¾ªç¯ç¥ç»å…ƒå­˜å‚¨äº†æ‰€æœ‰ä¹‹å‰æ­¥çš„è¾“å…¥ï¼Œå¹¶å°†è¿™äº›ä¿¡æ¯å’Œå½“å‰æ­¥çš„è¾“å…¥åˆå¹¶ã€‚å› æ­¤ï¼Œå®ƒè¿˜æ•è·åˆ°ä¸€äº›å½“å‰æ•°æ®æ­¥å’Œä¹‹å‰æ­¥çš„ç›¸å…³æ€§ä¿¡æ¯ã€‚t-1 æ­¥çš„å†³ç­–å½±å“åˆ°ç¬¬ t æ­¥åšçš„å†³ç­–ã€‚</p><p>å¦‚æœæˆ‘ä»¬åœ¨å‘ç½‘ç»œè¾“å…¥ 7 ä¸ªå­—æ¯åè¯•ç€æ‰¾å‡ºç¬¬ 8 ä¸ªå­—æ¯ï¼Œéšè—å±‚ä¼šç»å† 8 æ¬¡è¿­ä»£ã€‚å¦‚æœå±•å¼€ç½‘ç»œçš„è¯å°±æ˜¯ä¸€ä¸ª 8 å±‚çš„ç½‘ç»œï¼Œæ¯ä¸€å±‚å¯¹åº”ä¸€ä¸ªå­—æ¯ã€‚æ‰€ä»¥ä¸€ä¸ªæ™®é€šçš„ç¥ç»ç½‘ç»œè¢«é‡å¤äº†å¤šæ¬¡ã€‚å±•å¼€çš„æ¬¡æ•°ä¸å®ƒè®°å¾—å¤šä¹…ä¹‹å‰çš„æ•°æ®æ˜¯ç›´æ¥ç›¸å…³çš„ã€‚</p><h4 id="3-å¾ªç¯ç¥ç»ç½‘ç»œåŸºæœ¬ç»“æ„"><a href="#3-å¾ªç¯ç¥ç»ç½‘ç»œåŸºæœ¬ç»“æ„" class="headerlink" title="3) å¾ªç¯ç¥ç»ç½‘ç»œåŸºæœ¬ç»“æ„"></a>3) å¾ªç¯ç¥ç»ç½‘ç»œåŸºæœ¬ç»“æ„</h4><p>ä¸‹å›¾æ˜¯ä¸€ä¸ªç®€å•çš„å¾ªç¯ç¥ç»ç½‘ç»œå¦‚ï¼Œå®ƒç”±è¾“å…¥å±‚ã€ä¸€ä¸ªéšè—å±‚å’Œä¸€ä¸ªè¾“å‡ºå±‚ç»„æˆï¼š<br><img src="/2020/03/19/%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%A6%86%E7%9B%96%E7%8E%87%E8%B0%83%E7%A0%94/2020-03-18-23-31-00.png" alt></p><ul><li>xæ˜¯ä¸€ä¸ªå‘é‡ï¼Œå®ƒè¡¨ç¤ºè¾“å…¥å±‚çš„å€¼ï¼›<br>sæ˜¯ä¸€ä¸ªå‘é‡ï¼Œå®ƒè¡¨ç¤ºéšè—å±‚çš„å€¼ï¼ˆä½ ä¹Ÿå¯ä»¥æƒ³è±¡è¿™ä¸€å±‚å…¶å®æ˜¯å¤šä¸ªèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹æ•°ä¸å‘é‡sçš„ç»´åº¦ç›¸åŒï¼‰ï¼›<br>Uæ˜¯è¾“å…¥å±‚åˆ°éšè—å±‚çš„æƒé‡çŸ©é˜µï¼›<br>oä¹Ÿæ˜¯ä¸€ä¸ªå‘é‡ï¼Œå®ƒè¡¨ç¤ºè¾“å‡ºå±‚çš„å€¼ï¼›<br>Væ˜¯éšè—å±‚åˆ°è¾“å‡ºå±‚çš„æƒé‡çŸ©é˜µï¼›<br>Wæ˜¯éšè—å±‚ä¸Šä¸€æ¬¡çš„å€¼ä½œä¸ºè¿™ä¸€æ¬¡çš„è¾“å…¥çš„æƒé‡ã€‚</li></ul><p>æŠŠä¸Šé¢çš„å›¾å±•å¼€ï¼Œå¾ªç¯ç¥ç»ç½‘ç»œä¹Ÿå¯ä»¥ç”»æˆä¸‹é¢è¿™ä¸ªæ ·å­ï¼š<br><img src="/2020/03/19/%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%A6%86%E7%9B%96%E7%8E%87%E8%B0%83%E7%A0%94/2020-03-18-23-33-05.png" alt></p><p>ç½‘ç»œåœ¨tæ—¶åˆ»æ¥æ”¶åˆ°è¾“å…¥$x<em>t$ä¹‹åï¼Œéšè—å±‚çš„å€¼æ˜¯$s_t$ï¼Œè¾“å‡ºå€¼æ˜¯$o_t$ã€‚å…³é”®ä¸€ç‚¹æ˜¯ï¼Œ$s_t$çš„å€¼ä¸ä»…ä»…å–å†³äº$x_t$ï¼Œè¿˜å–å†³äº$s</em>{t-1}$ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„å…¬å¼æ¥è¡¨ç¤ºå¾ªç¯ç¥ç»ç½‘ç»œçš„è®¡ç®—æ–¹æ³•ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\mathbf{o}_{t} &=g\left(V \mathbf{s}_{t}\right) \tag{1}\end{aligned}</script><script type="math/tex; mode=display">\begin{aligned}\mathbf{s}_{t} &=f\left(U \mathbf{x}_{t}+W \mathbf{s}_{t-1}\right) \tag{2}\end{aligned}</script><p>(1)æ˜¯è¾“å‡ºå±‚çš„è®¡ç®—å…¬å¼ï¼Œè¾“å‡ºå±‚æ˜¯ä¸€ä¸ªå…¨è¿æ¥å±‚ï¼Œå®ƒçš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å’Œéšè—å±‚çš„å„ä¸ªèŠ‚ç‚¹ç›¸è¿ã€‚Væ˜¯è¾“å‡ºå±‚çš„æƒé‡çŸ©é˜µï¼Œgæ˜¯æ¿€æ´»å‡½æ•°ã€‚(2)æ˜¯éšè—å±‚çš„è®¡ç®—å…¬å¼ï¼Œå®ƒæ˜¯å¾ªç¯å±‚ã€‚Uæ˜¯è¾“å…¥xçš„æƒé‡çŸ©é˜µï¼ŒWæ˜¯ä¸Šä¸€æ¬¡çš„å€¼ä½œä¸ºè¿™ä¸€æ¬¡çš„è¾“å…¥çš„æƒé‡çŸ©é˜µï¼Œfæ˜¯æ¿€æ´»å‡½æ•°ã€‚</p><p>ä»ä¸Šé¢çš„å…¬å¼æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå¾ªç¯å±‚å’Œå…¨è¿æ¥å±‚çš„åŒºåˆ«å°±æ˜¯å¾ªç¯å±‚å¤šäº†ä¸€ä¸ªæƒé‡çŸ©é˜µ Wã€‚</p><h4 id="4-é•¿çŸ­æœŸè®°å¿†ç½‘ç»œ"><a href="#4-é•¿çŸ­æœŸè®°å¿†ç½‘ç»œ" class="headerlink" title="4) é•¿çŸ­æœŸè®°å¿†ç½‘ç»œ"></a>4) é•¿çŸ­æœŸè®°å¿†ç½‘ç»œ</h4><p>é•¿çŸ­æœŸè®°å¿†ï¼ˆè‹±è¯­ï¼šLong Short-Term Memoryï¼ŒLSTMï¼‰æ˜¯ä¸€ç§æ—¶é—´å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRNNï¼‰ï¼Œè®ºæ–‡é¦–æ¬¡å‘è¡¨äº1997å¹´ã€‚ç”±äºç‹¬ç‰¹çš„è®¾è®¡ç»“æ„ï¼ŒLSTMé€‚åˆäºå¤„ç†å’Œé¢„æµ‹æ—¶é—´åºåˆ—ä¸­é—´éš”å’Œå»¶è¿Ÿéå¸¸é•¿çš„é‡è¦äº‹ä»¶ã€‚</p><p>LSTMæ˜¯ä¸€ç§å«æœ‰LSTMåŒºå—ï¼ˆblocksï¼‰æˆ–å…¶ä»–çš„ä¸€ç§ç±»ç¥ç»ç½‘ç»œï¼Œæ–‡çŒ®æˆ–å…¶ä»–èµ„æ–™ä¸­LSTMåŒºå—å¯èƒ½è¢«æè¿°æˆæ™ºèƒ½ç½‘ç»œå•å…ƒï¼Œå› ä¸ºå®ƒå¯ä»¥è®°å¿†ä¸å®šæ—¶é—´é•¿åº¦çš„æ•°å€¼ï¼ŒåŒºå—ä¸­æœ‰ä¸€ä¸ªgateèƒ½å¤Ÿå†³å®šinputæ˜¯å¦é‡è¦åˆ°èƒ½è¢«è®°ä½åŠèƒ½ä¸èƒ½è¢«è¾“å‡ºoutputã€‚</p><p>ä¸‹å›¾ä¸­ï¼Œåº•ä¸‹æ˜¯å››ä¸ªSå‡½æ•°å•å…ƒï¼Œæœ€å·¦è¾¹çš„å•å…ƒä¸ºinputï¼Œå³è¾¹ä¸‰ä¸ªgateå†³å®šinputæ˜¯å¦èƒ½ä¼ å…¥ä¸‹ä¸ªï¼›å·¦è¾¹ç¬¬äºŒä¸ªä¸ºinput gateï¼Œå¦‚æœè¿™é‡Œgateè¿‘ä¼¼äºé›¶ï¼Œå°†æŠŠè¿™é‡Œçš„å€¼æŒ¡ä½ï¼Œä¸ä¼šè¿›åˆ°ä¸‹ä¸€å±‚ã€‚å·¦æ•°ç¬¬ä¸‰ä¸ªæ˜¯forget gateï¼Œå½“è¿™äº§ç”Ÿå€¼è¿‘ä¼¼äºé›¶ï¼Œå°†æŠŠè¿‡å»è®°ä½çš„å€¼å¿˜æ‰ã€‚ç¬¬å››ä¸ªä¹Ÿå°±æ˜¯æœ€å³è¾¹çš„inputä¸ºoutput gateï¼Œä»–å¯ä»¥å†³å®šåœ¨åŒºå—è®°å¿†ä¸­çš„inputæ˜¯å¦èƒ½è¾“å‡º ã€‚</p><p><img src="/2020/03/19/%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%A6%86%E7%9B%96%E7%8E%87%E8%B0%83%E7%A0%94/2020-03-18-23-51-41.png" alt></p><p>LSTMæœ‰å¾ˆå¤šä¸ªç‰ˆæœ¬ï¼Œå…¶ä¸­ä¸€ä¸ªé‡è¦çš„ç‰ˆæœ¬æ˜¯GRUï¼ˆGated Recurrent Unitï¼‰ï¼Œæ ¹æ®è°·æ­Œçš„æµ‹è¯•è¡¨æ˜ï¼ŒLSTMä¸­æœ€é‡è¦çš„æ˜¯Forget gateï¼Œå…¶æ¬¡æ˜¯Input gateï¼Œæœ€æ¬¡æ˜¯Output gateã€‚</p><h3 id="1-2-å¾ªç¯ç¥ç»ç½‘ç»œæµ‹è¯•çš„æœºé‡å’ŒæŒ‘æˆ˜"><a href="#1-2-å¾ªç¯ç¥ç»ç½‘ç»œæµ‹è¯•çš„æœºé‡å’ŒæŒ‘æˆ˜" class="headerlink" title="1.2 å¾ªç¯ç¥ç»ç½‘ç»œæµ‹è¯•çš„æœºé‡å’ŒæŒ‘æˆ˜"></a>1.2 å¾ªç¯ç¥ç»ç½‘ç»œæµ‹è¯•çš„æœºé‡å’ŒæŒ‘æˆ˜</h3><p>å½“å‰ç ”ç©¶å¤§å¤šé›†ä¸­äºé’ˆå¯¹å‰é¦ˆç¥ç»ç½‘ç»œçš„æµ‹è¯•ï¼Œè¯¸å¦‚DeepXploreã€DeepGaugeé’ˆå¯¹CNNçš„æµ‹è¯•ç­‰ï¼Œè€Œå¯¹RNNé²œæœ‰ç ”ç©¶ã€‚ç”±äºRNNçš„å¾ªç¯ç‰¹æ€§ï¼Œé€‚ç”¨äºCNNçš„åˆ†ææ–¹æ³•ä¸èƒ½ç®€å•åœ°è¿ç§»åˆ°RNNä¸Šã€‚ç›®å‰å­¦è€…å¤§å¤šé‡‡ç”¨æ¨¡ç³Šæµ‹è¯•çš„æ–¹æ³•ï¼Œé€šè¿‡éšæœºå¹²æ‰°æ•°æ®é›†äº§ç”Ÿå¯¹æŠ—æ€§æ ·æœ¬ï¼Œè€Œååˆ†æRNNå†…éƒ¨çŠ¶æ€ä¿¡æ¯ï¼Œå¼•å¯¼æ•°æ®é›†çš„æ‰°åŠ¨æ–¹å‘çš„æ–¹æ³•ï¼Œå¿«é€Ÿç”Ÿæˆèƒ½ä½¿å¾—RNNæ¨¡å‹åˆ¤æ–­é”™è¯¯çš„å¯¹æŠ—æµ‹è¯•ç”¨ä¾‹é›†åˆï¼Œè¾¾åˆ°æ¨¡å‹æµ‹è¯•çš„ç›®çš„ã€‚</p><p>æ ¹æ®æ­¤æ€è·¯ï¼Œä¸€æ–¹é¢å¯ä»¥é’ˆå¯¹æ•°æ®é›†æ·»åŠ å¹²æ‰°çš„æ–¹å¼è¿›è¡Œä¼˜åŒ–ï¼Œé‡‡ç”¨å¯å‘å¼æœç´¢æ”¹å–„å¯¹æµ‹è¯•æ ·æœ¬çš„Mutationè¿‡ç¨‹ï¼›å¦ä¸€æ–¹é¢åˆ™æ˜¯é’ˆå¯¹RNNå†…éƒ¨çŠ¶æ€ä¿¡æ¯çš„åˆ†æï¼Œå¼•å¯¼ç®—æ³•å¿«é€Ÿæ‰¾åˆ°æœ‰æ•ˆçš„ã€éš¾ä»¥å¯Ÿè§‰å˜åŒ–çš„å¯¹æŠ—æ ·æœ¬ï¼Œè¿™ä¸ªæ€è·¯ç±»ä¼¼äºæ¨¡å‹æ”»å‡»ã€‚</p><p>ç›®å‰RNNçš„å¯¹æŠ—æ€§æµ‹è¯•ä¸»è¦é¢ä¸´ä¸‰æ–¹é¢çš„æŒ‘æˆ˜ï¼š</p><ol><li>å¯¹äºéåˆ†ç±»æ¨¡å‹è€Œè¨€ï¼Œæ²¡æœ‰è¾ƒå¥½çš„æ ‡å‡†è¯†åˆ«å¯¹æŠ—æ ·æœ¬èƒ½ä¸èƒ½è®©æ¨¡å‹å‘ç”Ÿé”™è¯¯ã€‚</li></ol><blockquote><p>For the sequential outputs not then applied to classification, there is no standard to decide the outputs as wrong outputs with respect to the changing degree.</p></blockquote><ol><li>å¯¹äºåºåˆ—è¾“å…¥çš„Mutationæ¥è¯´ï¼Œå¾ˆéš¾ä¿è¯æ·»åŠ çš„æ‰°åŠ¨æ˜¯æœ€å°çš„</li></ol><blockquote><p>Applying the perturbations to words in a discrete space always cannot obtain a legal input and the explicit modification is distinguishable for humans.</p></blockquote><ol><li>ç°æœ‰åº”ç”¨äºCNNç­‰çš„è¦†ç›–ç‡æŒ‡æ ‡æ²¡æœ‰è€ƒè™‘åˆ°RNNå†…éƒ¨ç»“æ„ç‰¹æ€§ï¼Œå› æ­¤ä¸èƒ½ç›´æ¥åº”ç”¨åˆ°RNNä¸Šã€‚</li></ol><h2 id="2-è¦†ç›–æŒ‡æ ‡è°ƒç ”"><a href="#2-è¦†ç›–æŒ‡æ ‡è°ƒç ”" class="headerlink" title="2. è¦†ç›–æŒ‡æ ‡è°ƒç ”"></a>2. è¦†ç›–æŒ‡æ ‡è°ƒç ”</h2><p>ç›®å‰é’ˆå¯¹å¾ªç¯ç¥ç»ç½‘ç»œçš„æµ‹è¯• (testing) å’ŒéªŒè¯ (verification) ç­‰å·¥ä½œçš„ç ”ç©¶è¿˜ååˆ†æœ‰é™ï¼Œæ ¹æ®ç›®å‰è°ƒç ”å–å¾—çš„ç»“æœï¼Œç°æœ‰å­¦è€…çš„ç ”ç©¶æ€è·¯å¤§ä½“åˆ†æˆä¸¤ç±»ï¼šæŠ½è±¡æ›¿ä»£æ¨¡å‹æ³•å’Œé—¨è¦†ç›–ç‡æ³•ã€‚ä¸‹æ–‡åˆ†åˆ«å¯¹è¿™ä¸¤ä¸ªæ¨¡å‹è¿›è¡Œç®€è¿°ã€‚</p><h3 id="2-1-æŠ½è±¡æ›¿ä»£æ¨¡å‹æ³•"><a href="#2-1-æŠ½è±¡æ›¿ä»£æ¨¡å‹æ³•" class="headerlink" title="2.1 æŠ½è±¡æ›¿ä»£æ¨¡å‹æ³•"></a>2.1 æŠ½è±¡æ›¿ä»£æ¨¡å‹æ³•</h3><h4 id="2-1-1-ä»£è¡¨è®ºæ–‡ï¼š"><a href="#2-1-1-ä»£è¡¨è®ºæ–‡ï¼š" class="headerlink" title="2.1.1 ä»£è¡¨è®ºæ–‡ï¼š"></a>2.1.1 ä»£è¡¨è®ºæ–‡ï¼š</h4><blockquote><p>Du, X., Xie, X., Li, Y., Ma, L., Liu, Y., &amp; Zhao, J. (2019, August). <strong>Deepstellar: model-based quantitative analysis of stateful deep learning systems.</strong> In Proceedings of the 2019 27th ACM Joint Meeting on European Software Engineering Conference and Symposium on the Foundations of Software Engineering (pp. 477-487).</p><p>Du, X., Xie, X., Li, Y., Ma, L., Liu, Y., &amp; Zhao, J. (2019, November). <strong>A Quantitative Analysis Framework for Recurrent Neural Network.</strong> In 2019 34th IEEE/ACM International Conference on Automated Software Engineering (ASE) (pp. 1062-1065). IEEE.</p></blockquote><h4 id="2-1-2-å…³é”®æ–¹æ³•"><a href="#2-1-2-å…³é”®æ–¹æ³•" class="headerlink" title="2.1.2 å…³é”®æ–¹æ³•"></a>2.1.2 å…³é”®æ–¹æ³•</h4><p>ç”±äºç›´æ¥åˆ†æRNNå†…éƒ¨ç»“æ„å…·æœ‰çŠ¶æ€è½¬ç§»çš„ç‰¹æ€§ï¼Œå› æ­¤DeepStellarä¸€æ–‡æå‡º<strong>å°†RNNå»ºæ¨¡æˆé©¬å°”ç§‘å¤«é“¾</strong>ï¼Œæ¥æ¨¡æ‹Ÿå…¶å†…éƒ¨çŠ¶æ€å’ŒåŠ¨æ€è¡Œä¸ºç‰¹æ€§ã€‚åŸºäºé©¬å°”ç§‘å¤«é“¾çš„æŠ½è±¡ï¼Œè¯¥æ–‡è®¾è®¡äº†ä¸¤ä¸ªç›¸ä¼¼åº¦æŒ‡æ ‡å’Œäº”ä¸ªè¦†ç›–ç‡æ ‡å‡†ï¼Œæ¥è¡¡é‡è¾“å…¥æµ‹è¯•ç”¨ä¾‹å·®å¼‚å’Œæµ‹è¯•ç”¨ä¾‹çš„æµ‹è¯•å……åˆ†æ€§ã€‚</p><p><img src="/2020/03/19/%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%A6%86%E7%9B%96%E7%8E%87%E8%B0%83%E7%A0%94/2020-03-19-02-00-02.png" alt></p><ul><li><p>æŠ½è±¡æ¨¡å‹ç»“æ„æ¨¡å—ï¼šè¾“å…¥è®­ç»ƒå¥½çš„RNNï¼Œé€šè¿‡Profilingï¼Œåˆ†æå…¶å†…éƒ¨è¡Œä¸ºã€‚ä¸€ç³»åˆ—çš„RNNçŠ¶æ€å‘é‡å«åštraceã€‚æ¯ä¸ªè¾“å…¥åºåˆ—ä¼šé€šè¿‡Profilingåˆ†æå¾—åˆ°ä¸€ä¸ªtraceã€‚profilingç»“æŸä¹‹åå°±å¯ä»¥å¾—åˆ°ä¸€ç³»åˆ—çš„traceï¼Œè®°è½½ç€RNNè®­ç»ƒè¿‡ç¨‹è®¿é—®è¿‡çš„å’Œç»è¿‡çš„çŠ¶æ€ã€‚</p></li><li><p>åˆ†æå†…éƒ¨çŠ¶æ€ç©ºé—´å’Œè¢«è®­ç»ƒé›†æ¿€æ´»çš„traceçš„è¿‡ç¨‹è®¡ç®—é‡å¾ˆå¤§ï¼Œå› æ­¤è¿›ä¸€æ­¥æŠ½è±¡æ¨¡å‹æ¥ç®€åŒ–çŠ¶æ€å’Œtraceã€‚é¦–å…ˆå¯¹çŠ¶æ€å‘é‡é‡‡ç”¨ä¸»æˆåˆ†åˆ†æï¼Œä»¥ä¿ç•™å…¶å‰kä¸ªä¸»æˆåˆ†ï¼Œå¹¶å°†è¿™kä¸ªä¸»æˆåˆ†ç­‰åˆ†æˆméƒ¨åˆ†ã€‚åœ¨çŠ¶æ€è½¬æ¢æ–¹é¢ï¼Œæ ¹æ®æŠ½è±¡çŠ¶æ€å°†å…·ä½“çš„è½¬æ¢æ¦‚æ‹¬æˆä¸ºæŠ½è±¡çš„è½¬æ¢ã€‚å¹¶ä¸”æ ¹æ®æ¯ä¸ªçŠ¶æ€å‘ä¸åŒæ–¹å‘è½¬æ¢çš„é¢‘ç‡ï¼Œå¯¼å‡ºäº†è®­ç»ƒRNNçš„ç¦»æ•£æ—¶é—´Markové“¾ï¼ˆDTMCï¼‰æ¨¡å‹ã€‚</p></li><li><p>è®¾è®¡äº†ä¸¤ä¸ªç›¸ä¼¼åº¦æŒ‡æ ‡ï¼Œç”¨äºè¡¡é‡ä¸åŒè¾“å…¥ä¸‹æ¿€æ´»çš„ä¸¤ä¸ªtraceçš„ç›¸ä¼¼åº¦ã€‚åˆ†åˆ«æ˜¯state-based trace similarityå’Œtransition-based trace similarityï¼Œç®€å†™ä¸ºSBTSIMå’ŒTBTSIMã€‚</p></li><li><p>äº”ä¸ªè¦†ç›–ç‡åŒ…æ‹¬basic state coverage/n-step state boundary coverage, weighted state coverage/ basic transition coverage/weighted transition coverageï¼Œç®€å†™ä¸ºBSCov/n-SBCov/WSCov/BTCov/WTCovã€‚</p></li><li><p>å°†ä¸¤ä¸ªæŒ‡æ ‡å’Œäº”ä¸ªæ ‡å‡†åº”ç”¨äºå¯¹æŠ—æ ·æœ¬æ£€æµ‹å’Œè¦†ç›–å¼•å¯¼çš„æµ‹è¯•ä¸Šï¼Œæ¥ç¼“è§£æ¥è‡ªå¯¹æŠ—æ ·æœ¬çš„å¨èƒã€‚è¿ç”¨ä¸¤ä¸ªç›¸ä¼¼åº¦ï¼Œå³å¯åœ¨è¿è¡Œæ—¶æ£€æµ‹å¯¹æŠ—æ ·æœ¬ï¼ˆ<strong>Monitor</strong>ï¼‰ï¼›è¿ç”¨äº”ä¸ªè¦†ç›–ç‡ï¼Œæˆ‘ä»¬å°†å…¶ç”¨äºæŒ‡å¯¼æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆä¸Šï¼Œç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹ä»¥æå‡è¦†ç›–ç‡å’Œæ‰¾åˆ°æ›´å¤šçš„æœªè¢«å‘ç°çš„defectsä¸ºç›®æ ‡ã€‚è¿™ä¸¤ä¸ªåº”ç”¨äº’ç›¸è¡¥å……ã€‚</p></li></ul><h4 id="2-1-3-å®éªŒæ•ˆæœåŠè¯„ä»·"><a href="#2-1-3-å®éªŒæ•ˆæœåŠè¯„ä»·" class="headerlink" title="2.1.3 å®éªŒæ•ˆæœåŠè¯„ä»·"></a>2.1.3 å®éªŒæ•ˆæœåŠè¯„ä»·</h4><p>DeepStellaråœ¨ç²¾å¿ƒçš„è°ƒå‚ä¸‹ï¼Œé€šè¿‡traceç›¸ä¼¼åº¦æ£€æµ‹ç®—æ³•èƒ½å¤Ÿå¾ˆå¥½åœ°æ£€æµ‹å‡ºå½“å‰è¾“å…¥æ ·æœ¬æ˜¯å¦ä¸ºå¯¹æŠ—æ ·æœ¬ï¼ˆéŸ³é¢‘ï¼‰ï¼Œå‡†ç¡®åº¦è¾¾åˆ°äº†89%ã€‚</p><p>DeepStellaræå‡ºçš„æµ‹è¯•æ–¹æ³•æœ¬è´¨ä¸Šæ˜¯å¯¹ä¸€ä¸ªç­‰ä»·æ¨¡å‹è¿›è¡Œåˆ†æçš„æ–¹æ³•ï¼ŒæŠ½è±¡æ‰äº†RNNæ¨¡å‹çš„å¾ˆå¤šç»†èŠ‚ï¼Œåªä¿ç•™äº†ä¸»å¹²éƒ¨åˆ†ã€‚æ€è·¯å€¼å¾—å€Ÿé‰´ã€‚</p><p>DeepStellarçš„ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå…¶é«˜è¯†åˆ«ç‡çš„èƒŒåæ˜¯ç²¾å¿ƒçš„è°ƒå‚ï¼Œå¹¶ä¸”ä½œè€…ä¹Ÿæåˆ°ï¼Œé¢å¯¹æ›´å¤æ‚çš„æ¨¡å‹ï¼Œç»“æœæœªå¿…ä¼šè¿™ä¹ˆå¥½ã€‚</p><blockquote><p>With finer-grained model, the result is not necessarily better.</p></blockquote><h3 id="2-2-é—¨è¦†ç›–ç‡æ³•"><a href="#2-2-é—¨è¦†ç›–ç‡æ³•" class="headerlink" title="2.2 é—¨è¦†ç›–ç‡æ³•"></a>2.2 é—¨è¦†ç›–ç‡æ³•</h3><h4 id="2-2-1-ä»£è¡¨è®ºæ–‡ï¼š"><a href="#2-2-1-ä»£è¡¨è®ºæ–‡ï¼š" class="headerlink" title="2.2.1 ä»£è¡¨è®ºæ–‡ï¼š"></a>2.2.1 ä»£è¡¨è®ºæ–‡ï¼š</h4><blockquote><p>Huang, W., Sun, Y., Huang, X., &amp; Sharp, J. (2019). <strong>testRNN: Coverage-guided Testing on Recurrent Neural Networks.</strong> arXiv preprint arXiv:1906.08557.</p></blockquote><h4 id="2-2-2-å…³é”®æ–¹æ³•"><a href="#2-2-2-å…³é”®æ–¹æ³•" class="headerlink" title="2.2.2 å…³é”®æ–¹æ³•"></a>2.2.2 å…³é”®æ–¹æ³•</h4><p>testRNNå…³æ³¨LSTMå’Œå…¶é²æ£’æ€§ï¼Œé²æ£’æ€§æŒ‡å¯¹è¾“å…¥æ·»åŠ å°çš„æ‰°åŠ¨å¹¶ä¸å½±å“LSTMçš„åˆ¤æ–­ç»“æœçš„ç‰¹æ€§ã€‚æ³¨æ„ï¼Œè¯¥å·¥å…·åªé’ˆå¯¹LSTMåŠç›¸ä¼¼çš„ç½‘ç»œç»“æ„è¿›è¡Œåˆ†æï¼ŒåŸå› åœ¨äºå…¶ç®—æ³•ä¾èµ–äºå†…éƒ¨é—¨ç»“æ„çš„å®ç°ï¼Œè€Œè¿™ç§é—¨ç»“æ„åªå­˜åœ¨äºLSTMç±»å‹çš„ç½‘ç»œä¸­ã€‚</p><p>testRNNçš„ç‰¹è‰²åœ¨äºï¼Œå…¶ç›´æ¥åˆ†æRNNå†…éƒ¨ç»“æ„å¹¶åŠ ä»¥åˆ†æçš„æ€è·¯éå¸¸ç±»ä¼¼äºå…¶å‰è¾ˆDeepXploreåˆ†æå‰é¦ˆç¥ç»ç½‘ç»œçš„æ€è·¯ã€‚ä½†ç”±äºRNNç½‘ç»œå†…éƒ¨å…³äºâ€œå±‚â€å’Œâ€œèŠ‚ç‚¹â€çš„æ¦‚å¿µä¸åŒäºCNNï¼Œå› æ­¤å¯¹å¦‚ä½•å®ç°CNNä¸­è¦†ç›–ç‡è¿ç§»åˆ°RNNçš„åº”ç”¨ä¸­ï¼ŒtestRNNæå‡ºäº†è‡ªå·±çš„æ–¹æ³•ã€‚</p><ul><li><p>Cellè¦†ç›–ç‡ã€‚Cellï¼ˆåæ–‡ç§°ä¹‹ä¸º<strong>å•å…ƒ</strong>ï¼‰è¦†ç›–æ—¨åœ¨è¦†ç›–æ¯ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€å‘ç”Ÿçš„æ˜¾è‘—å˜åŒ–$\Delta\xi_t$ã€‚å½“å•å…ƒå€¼$\Delta\xi_t$å¤§äºç”¨æˆ·å®šä¹‰çš„é˜ˆå€¼å‚æ•°$\alpha_h$æ—¶ï¼Œè¯¥å•å…ƒå°†è¢«æ¿€æ´»å¹¶è¢«æµ‹è¯•ç”¨ä¾‹è¦†ç›–ã€‚ç„¶åä½¿ç”¨è¦†ç›–ç‡æ¥è¡¡é‡ç”±ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹æ¿€æ´»è‡³å°‘ä¸€æ¬¡çš„å•å…ƒçš„ç™¾åˆ†æ¯”ã€‚ï¼ˆå•å…ƒçš„éšè—çŠ¶æ€å˜åŒ–å¤§äº†ï¼Œè¶…è¿‡äº†ç”¨æˆ·å®šä¹‰çš„æŸä¸ªé˜ˆå€¼ï¼Œå°±ç®—æ¿€æ´»ï¼Œæµ‹è¯•ç”¨ä¾‹æ¿€æ´»çš„å•å…ƒä¸ªæ•°å æ€»ä¸ªæ•°çš„æ¯”ä¾‹å°±æ˜¯è¯¥æµ‹è¯•ç”¨ä¾‹çš„è¦†ç›–ç‡ï¼‰</p></li><li><p>Gateè¦†ç›–ç‡ã€‚é—¨çš„è¦†ç›–ç‡ç±»ä¼¼äºå•å…ƒè¦†ç›–ç‡ï¼Œä½†æ˜¯ä¿¡æ¯æ˜¯ä»LSTMå•å…ƒçš„é—¨ä¸­ç­›é€‰çš„ã€‚ä¸Šæ–‡æåˆ°ï¼ŒGoogleçš„ç ”ç©¶å›¢é˜Ÿå‘ç°ï¼ŒLSTMçš„å››ç§é—¨ä¸­æœ€é‡è¦çš„é—¨æ˜¯å¿˜è®°é—¨ï¼ˆforget gateï¼‰ï¼Œå› æ­¤testRNNä¸“æ³¨äºç»Ÿè®¡å¿˜è®°é—¨çš„è¦†ç›–ç‡ã€‚å¿˜è®°é—¨çš„å€¼$Rt(fï¼Œx)$è¡¨ç¤ºå¯ä»¥ä»æœ€åä¸€ä¸ªå•å…ƒç»§æ‰¿å¤šå°‘ä¿¡æ¯ã€‚ç”±äºLSTMä»¥å…¶é•¿æœŸçš„å­˜å‚¨èƒ½åŠ›è€Œé—»åï¼Œå› æ­¤æ£€æŸ¥ä¸€ä¸ªå•å…ƒæ ¼æ˜¯å¦ä¸¢å¼ƒäº†ä»å…ˆå‰è¾“å…¥ä¸­å­¦ä¹ åˆ°çš„é€‚å½“æ•°é‡çš„ä¿¡æ¯éå¸¸æœ‰æ„ä¹‰ã€‚ï¼ˆå¿˜è®°ä»¬å¿˜è®°çš„ä¿¡æ¯é‡ç”¨Rtå‡½æ•°è¡¨ç¤ºï¼Œåˆ™Rtå¤ªå¤§äº†å°±æ¿€æ´»ï¼Ÿï¼‰</p></li></ul><p>ä¸‹å›¾æ˜¯testRNNçš„å…·ä½“å¤„ç†æµç¨‹ã€‚</p><p><img src="/2020/03/19/%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%A6%86%E7%9B%96%E7%8E%87%E8%B0%83%E7%A0%94/2020-03-19-02-43-32.png" alt></p><h4 id="2-2-3-å®éªŒæ•ˆæœ"><a href="#2-2-3-å®éªŒæ•ˆæœ" class="headerlink" title="2.2.3 å®éªŒæ•ˆæœ"></a>2.2.3 å®éªŒæ•ˆæœ</h4><p>testRNNç€çœ¼äºé—¨è¦†ç›–ç‡ï¼ŒæˆåŠŸå°†åˆ†æCNNçš„é‚£ä¸€å¥—è¿ç§»äº†è¿‡æ¥ã€‚ä½†æ˜¯testRNNçš„å®éªŒç»“æœä»…é™äºå°æ•°æ®é›†è®­ç»ƒä¸‹çš„å°ç½‘ç»œï¼Œè¯¸å¦‚MNISTåˆ†ç±»æ•°æ®é›†è®­ç»ƒçš„åŒå±‚LSTMç½‘ç»œç­‰ã€‚å› æ­¤èƒ½å¦å°†æ­¤æ–¹æ³•æ¨å¹¿åˆ°æ›´åŠ å¤æ‚çš„å¤§å‹ç½‘ç»œä¸­ï¼Œè¿˜æœ‰å¾…æ¢ç©¶ã€‚</p><h3 id="2-3-ä¼˜åŒ–å¼•å¯¼æ³•"><a href="#2-3-ä¼˜åŒ–å¼•å¯¼æ³•" class="headerlink" title="2.3 ä¼˜åŒ–å¼•å¯¼æ³•"></a>2.3 ä¼˜åŒ–å¼•å¯¼æ³•</h3><h4 id="2-3-1-ä»£è¡¨è®ºæ–‡ï¼š"><a href="#2-3-1-ä»£è¡¨è®ºæ–‡ï¼š" class="headerlink" title="2.3.1 ä»£è¡¨è®ºæ–‡ï¼š"></a>2.3.1 ä»£è¡¨è®ºæ–‡ï¼š</h4><blockquote><p>Guo, J., Zhao, Y., Han, X., Jiang, Y., &amp; Sun, J. (2019). <strong>RNN-Test: Adversarial Testing Framework for Recurrent Neural Network Systems.</strong> arXiv preprint arXiv:1911.06155.</p></blockquote><h4 id="2-3-2-å…³é”®æ–¹æ³•"><a href="#2-3-2-å…³é”®æ–¹æ³•" class="headerlink" title="2.3.2 å…³é”®æ–¹æ³•"></a>2.3.2 å…³é”®æ–¹æ³•</h4><p>RNN-Testä¸€æ–¹é¢é‡‡ç”¨äº†å’ŒtestRNNç±»ä¼¼çš„â€œé—¨è¦†ç›–ç‡â€æ–¹æ³•æ¥å¼•å¯¼æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆï¼Œå¦ä¸€æ–¹é¢é‡‡ç”¨äº†ä¸€ç§å…¨æ–°çš„ä¼˜åŒ–å‡½æ•°æ€æƒ³ï¼Œè®¡ç®—èƒ½åŒæ—¶ä½¿å¾—æ‰°åŠ¨æ·»åŠ æœ€å°å¹¶ä¸”æœ€æœ‰å¯èƒ½ä»¤æ¨¡å‹å‘ç”Ÿåˆ¤æ–­é”™è¯¯çš„æ‰°åŠ¨æ–¹å‘ã€‚RNN-Testå°†äºŒè€…ç»“åˆèµ·æ¥ï¼Œä½†æ­£æ˜¯å› ä¸ºè¯¥æ–‡ä»…ä»…æ˜¯å°†è¿™ä¸¤ç§æ–¹æ³•æ±‚å¾—çš„åç§»æ–¹å‘ç®€å•çš„åŠ å’Œï¼Œè®©äººä¸ç¦æ€€ç–‘å…¶å·¥ä½œæ˜¯å¦æ²¡æœ‰è¿›è¡Œå®Œå…¨ã€‚</p><ul><li><p>çŠ¶æ€ä¸è¿ç»­æ–¹å‘ï¼ˆState inconsistency orientationï¼‰ï¼š</p><script type="math/tex; mode=display">obj_{orient} = h_{t-1}^l + c_t^l - h_t^l</script><p>è¯¥ä¼˜åŒ–å‡½æ•°çš„è®¾è®¡æ€æƒ³æ˜¯ï¼Œè‹¥ä¸€ä¸ªæ ·æœ¬èƒ½ä½¿å¾—ä»éšçŠ¶æ€t-1æ—¶åˆ»è¾“å…¥çš„ä¿¡æ¯å°½é‡å¤§ï¼Œè€Œè¾“å‡ºå°½é‡å°ï¼Œé‚£ä¹ˆè¿™ç§æ ·æœ¬æ›´å®¹æ˜“å‡ºç°é—®é¢˜ã€‚è¿™æ˜¯å› ä¸ºtæ—¶åˆ»$h<em>t^l$çš„å€¼å®Œå…¨å–å†³äº$h</em>{t-1}^l $å’Œ$ c_t^l$ï¼Œè®©è¿™ä¸¤éƒ¨åˆ†äº§ç”Ÿå¤§å°å·®å¼‚æ›´å®¹æ˜“å¼•å‘ä¸ç¡®å®šè¡Œä¸ºã€‚</p></li><li><p>æŸå¤±å‡½æ•°ä¼˜åŒ–æ–¹å‘ï¼ˆCost orientationï¼‰:</p><script type="math/tex; mode=display">obj_{orient} = L_{seq}(y, \hat{y})</script><p>è¿™ä¸€éƒ¨åˆ†å¼•ç”¨è‡ªFGSMçš„ä¼˜åŒ–ç®—æ³•ï¼Œè¯¥è®ºæ–‡æ˜¯å¯¹æŠ—æ ·æœ¬ç”Ÿæˆé¢†åŸŸçš„å¼€å±±ä¹‹ä½œã€‚è®²çš„æ˜¯å¦‚ä½•é€šè¿‡æ¢¯åº¦ä¸Šå‡ç®—æ³•æ±‚å¾—æ·»åŠ æ‰°åŠ¨çš„æ–¹å‘ï¼Œä»è€Œä½¿å¾—æ‰°åŠ¨æœ€å°çš„åŒæ—¶æ¨¡å‹çš„å˜åŒ–æœ€å¤§ã€‚</p></li><li><p>å†³ç­–è¾¹ç•Œæ–¹å‘ï¼ˆDecision boundary orientationï¼‰ï¼š</p><script type="math/tex; mode=display">obj_{orient} = (\sum_{i=0}^{k}\hat{y_{t_i}}) - \hat{y_t}</script><p>è¿™ä¸€éƒ¨åˆ†çš„çµæ„Ÿæ¥è‡ªäºRNNå†…éƒ¨ç»“æ„ï¼Œç”±äºæ¯ä¸ªæ—¶é—´æ­¥çš„éšçŠ¶æ€äº‹å®ä¸Šéƒ½ä¼šäº§ç”Ÿä¸­é—´è¾“å‡º$y=o_t^l$ï¼Œä½†ä¸€èˆ¬æˆ‘ä»¬è®¤ä¸ºåªæœ‰æœ€åé˜¶æ®µçš„è¾“å‡ºå‘é‡æ‰æ˜¯æœ‰æ„ä¹‰çš„ã€‚è¯¥ä¼˜åŒ–å‡½æ•°å°†é™¤äº†åŸæ¥é¢„æµ‹çš„æœ€å¤§å€¼yä¹‹å¤–å‰kä¸ªæœ€å¤§çš„yåŠ èµ·æ¥ï¼Œå¹¶å‡å»åŸæ¥çš„yã€‚</p></li></ul><h4 id="2-3-3-å®éªŒæ•ˆæœ"><a href="#2-3-3-å®éªŒæ•ˆæœ" class="headerlink" title="2.3.3 å®éªŒæ•ˆæœ"></a>2.3.3 å®éªŒæ•ˆæœ</h4><p>è¯¥æ–‡ç« ä½¿ç”¨è‡ªå·±ç”Ÿæˆçš„å¯¹æŠ—æ ·æœ¬é›†åˆï¼Œå¯¹æ¨¡å‹è¿›è¡Œé‡æ–°è®­ç»ƒï¼Œæ¨¡å‹çš„å¤æ‚åº¦ï¼ˆPerplexityï¼‰æœ‰å¤§çº¦1.159%çš„é™ä½ã€‚è¿™è¯´æ˜æ¨¡å‹æ›´ç¨³å®šäº†ã€‚</p><p>ç„¶è€Œæå‡ä¸å¤§ï¼Œè¿è¡Œæ•ˆç‡å´å¾ˆä½ï¼Œè®¡ç®—ä»£ä»·è¾ƒå¤§ã€‚å¹¶ä¸”åŸæ–‡ä¸ºäº†æå‡ç®—æ³•è¿è¡Œæ€§èƒ½ï¼ŒMutationè¿‡ç¨‹é‡‡ç”¨äº†ä¸€éMutationï¼Œè‹¥ä¸æˆåŠŸç›´æ¥æ”¾å¼ƒçš„åšæ³•ï¼ŒåŸæ¥çš„æµ‹è¯•ç”¨ä¾‹åˆ©ç”¨ç‡è¾ƒä½ã€ä¸ºäº†è¾¾åˆ°è¾ƒé«˜çš„çªå˜åˆ©ç”¨ç‡ï¼Œç®—æ³•ä¸å¾—ä¸æ”¾å®½æ·»åŠ å¹²æ‰°åŠ›åº¦ï¼Œè¿™å°±å¯¼è‡´ç”Ÿæˆå¤ªå¤šæ— ç”¨çš„å‡æµ‹è¯•ç”¨ä¾‹ã€‚ç®—æ³•æœ¬èº«å¯ä»¥è¢«ä¼˜åŒ–ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>paper</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RNN</tag>
      
      <tag>testing</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¦‚ä½•ä½¿ç”¨VS Codeç¼–å†™github pagesåšå®¢</title>
    <link href="/2020/01/11/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8VS-Code%E7%BC%96%E5%86%99github-pages%E5%8D%9A%E5%AE%A2/"/>
    <url>/2020/01/11/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8VS-Code%E7%BC%96%E5%86%99github-pages%E5%8D%9A%E5%AE%A2/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨VS Codeå†™åšå®¢ï¼Œéœ€è¦ä½ æŒ‰ç…§æˆ‘ä¹‹å‰å†™çš„ä¸¤ç¯‡åšå®¢ï¼Œå°†github pageså¹³å°æ­å»ºèµ·æ¥ã€‚</p><p><a href="https://superlova.github.io/2019/04/14/%E9%85%8D%E7%BD%AEhexo+GitHub%20Pages%E7%BA%AA%E5%AE%9E/">é…ç½®hexo+GitHub Pagesçºªå®</a><br><a href="https://superlova.github.io/2019/04/25/hexo%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">hexoå›¾ç‰‡åŠ è½½å¤±è´¥è§£å†³æ–¹æ¡ˆ</a></p><p>ä¹‹åæˆ‘ä»¬å®‰è£…VSCodeã€‚æ¥ä¸‹æ¥ä»‹ç»æˆ‘ä¸€ç›´ä½¿ç”¨çš„å‡ ä¸ªæ’ä»¶ï¼Œå’Œå®ƒä»¬çš„é…ç½®å°æŠ€å·§ã€‚</p><p>ç¬¬ä¸€ä¸ªæ˜¯<strong>Markdown Preview Enhanced</strong>ï¼Œæœ‰äº†è¯¥æ’ä»¶ï¼Œå°±å¯ä»¥æå‰é¢„è§ˆmarkdownæ–‡ä»¶çš„æ¸²æŸ“æ•ˆæœã€‚æ–¹æ³•æ˜¯ä½¿ç”¨VSCodeæ‰“å¼€ä»¥mdåç¼€åç»“å°¾çš„æ–‡ä»¶ï¼Œå³é”®ç‚¹å‡»<strong>Markdown Preview Enhancedï¼š Open Preview To The Side</strong>ï¼Œå³å¯åœ¨ä¾§è¾¹æ ç”Ÿæˆå³æ—¶æ¸²æŸ“çš„mdæ•ˆæœæ–‡ä»¶ã€‚</p><p>ç¬¬äºŒä¸ªæ˜¯<strong>Markdown PDF</strong>ï¼Œè¯¥æ’ä»¶å¯ä»¥ä»¤å†™å¥½çš„mdæ–‡ä»¶æ‰“å°æˆpdfæ ¼å¼ã€‚è¯¥æ’ä»¶éœ€è¦å®‰è£…chromiumå†…æ ¸ã€‚</p><p>ç¬¬ä¸‰ä¸ªæ˜¯<strong><strong>Paste Image</strong></strong>æ’ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°åœ¨mdæ–‡ç« ä¸­ç²˜è´´ä½äºå‰ªåˆ‡æ¿çš„å›¾ç‰‡ã€‚</p><p>ç²˜è´´çš„å¿«æ·é”®æ˜¯Ctrl+Alt+Vã€‚</p><p>åœ¨Paste Imageæ’ä»¶çš„Pathè®¾ç½®éƒ¨åˆ†ï¼Œæ”¹æˆå¦‚ä¸‹æ‰€ç¤ºï¼š<br><img src="/2020/01/11/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8VS-Code%E7%BC%96%E5%86%99github-pages%E5%8D%9A%E5%AE%A2/2020-01-11-23-28-36.png" alt><br>è¿™æ ·å›¾ç‰‡ç²˜è´´çš„ä½ç½®å°±å˜æˆäº†<strong>å½“å‰æ–‡ç« ç›®å½•ä¸‹ï¼Œä¸è¯¥æ–‡ç« åŒåçš„æ–‡ä»¶å¤¹å†…</strong>ï¼Œæ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œè¿›ä¸€æ­¥æ•´ç†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
    <tags>
      
      <tag>github pages</tag>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ€»ç»“è®ºæ–‡ä¸­å¸¸ç”¨çš„Matplotlibå’ŒSeabornç»˜å›¾æŠ€æœ¯</title>
    <link href="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/"/>
    <url>/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸€ã€ä½¿ç”¨matplotlibç»˜åˆ¶å›¾åƒ"><a href="#ä¸€ã€ä½¿ç”¨matplotlibç»˜åˆ¶å›¾åƒ" class="headerlink" title="ä¸€ã€ä½¿ç”¨matplotlibç»˜åˆ¶å›¾åƒ"></a>ä¸€ã€ä½¿ç”¨matplotlibç»˜åˆ¶å›¾åƒ</h1><p>matplotlibæ˜¯ä¸€ä¸ªPythonçš„æ•°æ®å¯è§†åŒ–2Då›¾å½¢åº“ã€‚matplotlibçš„ç‰¹ç‚¹æ˜¯å¯ä»¥é‡‡ç”¨é¢å‘å¯¹è±¡çš„æ–¹æ³•ï¼Œæ¨¡ä»¿MATLABä¸­çš„å›¾å½¢å‘½ä»¤ã€‚matplotlibç»å¸¸ä¸numpyã€pandasç­‰åº“ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚<br>matplotlibå¯ä»¥é‡‡ç”¨MATLABçš„å‘½ä»¤é£æ ¼ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨é¢å‘å¯¹è±¡çš„é£æ ¼ä½¿ç”¨ã€‚</p><h2 id="matplotlibçš„å›¾åƒä¸­å„ç»„ä»¶åç§°"><a href="#matplotlibçš„å›¾åƒä¸­å„ç»„ä»¶åç§°" class="headerlink" title="matplotlibçš„å›¾åƒä¸­å„ç»„ä»¶åç§°"></a>matplotlibçš„å›¾åƒä¸­å„ç»„ä»¶åç§°</h2><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-11-23-42-39.png" alt></p><h2 id="æ–°å»ºå›¾åƒ"><a href="#æ–°å»ºå›¾åƒ" class="headerlink" title="æ–°å»ºå›¾åƒ"></a>æ–°å»ºå›¾åƒ</h2><pre><code class="lang-python">fig, axes = plt.subplots(2,1,figsize=(5,10)) #ä¸¤è¡Œä¸€åˆ—ç»„æˆä¸€å¼ å›¾ï¼Œå›¾åƒå¤§å°å®½5é«˜10</code></pre><p>ä¸Šé¢çš„è¯­å¥åˆ›å»ºäº†ä¸€ä¸ªfigureï¼Œç”±ä¸¤ä¸ªaxç»„æˆã€‚æŠŠå®ƒæƒ³è±¡æˆä¸€å¼ ç”»å¸ƒä¸Šé¢çš„ä¸¤ä¸ªè´´ç”»ï¼Œä¼šæ¯”è¾ƒå®¹æ˜“ç†è§£ã€‚</p><p>plt.figure()å‡½æ•°çš„å‰ä¸¤ä¸ªå‚æ•°æ˜¯è®¾ç½®figureæ˜¯ç”±å‡ è¡Œå‡ åˆ—çš„axç»„æˆã€‚figure(2,1)è¯´æ˜figureæ˜¯ç”±ä¸¤è¡Œä¸€åˆ—çš„axä¸€å…±ä¸¤ä¸ªaxç»„æˆã€‚</p><p>åé¢çš„figsizeå‚æ•°è®¾ç½®ç”»å¸ƒçš„å®½å’Œé«˜ï¼Œå•ä½ä¸ºè‹±å¯¸ã€‚</p><h1 id="äºŒã€ä½¿ç”¨Seabornç»˜åˆ¶å›¾åƒ"><a href="#äºŒã€ä½¿ç”¨Seabornç»˜åˆ¶å›¾åƒ" class="headerlink" title="äºŒã€ä½¿ç”¨Seabornç»˜åˆ¶å›¾åƒ"></a>äºŒã€ä½¿ç”¨Seabornç»˜åˆ¶å›¾åƒ</h1><p>é¦–å…ˆç¡®å®šæˆ‘ä»¬éœ€è¦å¯è§†åŒ–çš„æ•°æ®çš„ç»“æ„ã€‚ä»¥irisé¸¢å°¾èŠ±æ•°æ®é›†ä¸ºä¾‹ï¼Œ</p><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-12-16-07-35.png" alt></p><p>æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªæ•°æ®å¯¹è±¡ï¼Œæ¯ä¸€åˆ—ä»£è¡¨æ•°æ®å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚ä½†æ˜¯ç°å®ç”Ÿæ´»çš„æ•°æ®å¾ˆå¤šä¸é•¿è¿™æ ·ï¼Œåªä¸è¿‡ç»„ç»‡æˆä¸€ä¸ªè¡¨æ ¼çš„å½¢å¼ï¼Œå†…å®¹å¤§ç›¸å¾„åº­ã€‚å› æ­¤åœ¨è¿›è¡Œæ•°æ®å¯è§†åŒ–æ—¶ä¸€å®šè¦ä¿è¯ä½ çš„æ•°æ®ä¹Ÿæ˜¯<strong>ç”¨è¡Œä»£è¡¨æ•°æ®å¯¹è±¡ï¼Œç”¨åˆ—è¡¨ç¤ºæ•°æ®çš„å±æ€§</strong>ã€‚</p><h2 id="2-1-å…³è”å›¾"><a href="#2-1-å…³è”å›¾" class="headerlink" title="2.1 å…³è”å›¾"></a>2.1 å…³è”å›¾</h2><p>æˆ‘ä»¬æ˜¯ç”¨ <code>relplot</code>å‡½æ•°è¿›è¡Œè¿›ä¸€æ­¥ç»˜åˆ¶ã€‚å®é™…ä¸Šï¼Œ<code>relplot</code> å¯ä»¥çœ‹ä½œæ˜¯ <code>scatterplot</code> å’Œ <code>lineplot</code> çš„ç»“åˆç‰ˆæœ¬ã€‚ä½†æ˜¯relplotåŒ…è£…å±‚çº§æ›´åŠ é«˜ï¼Œè¿™æ„å‘³ç€å®ƒæ›´é€‚åˆå¿«é€Ÿåº”ç”¨ï¼Œä¸é€‚åˆè‡ªå®šä¹‰ã€‚å¦‚æœä½ å¯¹å®ƒçš„æ•ˆæœä¸æ»¡æ„ï¼Œææ€•è¿˜æ˜¯å¾—è¯‰è¯¸<code>scatterplot</code> å’Œ <code>lineplot</code>ç­‰ä¸matplotlibç»“åˆæ›´ç´§å¯†çš„apiï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨matplotlibã€‚</p><pre><code class="lang-python">sns.relplot(x=&quot;sepal_length&quot;, y=&quot;sepal_width&quot;, data=iris)</code></pre><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-12-16-10-26.png" alt></p><p>xä¸ºèŠ±è¼é•¿åº¦ï¼Œyä¸ºèŠ±è¼å®½åº¦ã€‚è¿™æ ·åˆ†xï¼Œyå…¶å®æœ‰ä¸€å®šé“ç†ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯èƒ½å¤ŸæŠŠä¸åŒç±»å‹çš„æ•°æ®å¯¹è±¡åœ¨å›¾ä¸ŠåŒºåˆ†å¼€ã€‚å› ä¸ºåŒç±»èŠ±æœµä¸€èˆ¬ä¸ªå¤´å·®ä¸å¤šï¼ŒèŠ±è¼çš„é•¿åº¦å’Œå®½åº¦èšé›†åœ¨å›¾çš„ä¸€éƒ¨åˆ†åŒºåŸŸã€‚ä½†æ˜¯åœ¨ä¸Šå›¾æˆ‘ä»¬æ˜¯çœ‹ä¸å‡ºæ¥çš„ã€‚æˆ‘ä»¬å¸Œæœ›ç»™ä¸åŒç±»åˆ«æ·»åŠ ä¸åŒé¢œè‰²ã€‚</p><pre><code class="lang-python">sns.relplot(x=&quot;sepal_length&quot;, y=&quot;sepal_width&quot;, hue=&quot;species&quot;, data=iris)</code></pre><p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ·»åŠ äº†<code>hue</code>å­—æ®µï¼Œå¹¶è¦æ±‚æŒ‰ç…§<code>species</code>è¿›è¡Œè¿›ä¸€æ­¥åˆ†ç±»ã€‚<code>hue</code>å­—æ®µå°±æ˜¯è¿›è¡ŒäºŒæ¬¡åˆ†ç±»çš„å‚æ•°ã€‚</p><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-12-16-15-48.png" alt></p><p>å¦‚æœæ˜¯è®ºæ–‡ï¼Œåˆ™æˆ‘ä»¬è¦ä½¿å¾—è¯»è€…åœ¨é»‘ç™½æ‰“å°çš„æ¡ä»¶ä¸‹ä¹Ÿèƒ½å‘ç°åŒºåˆ«ã€‚æ·»åŠ <code>stype</code>å‚æ•°ä¸º<code>species</code>æˆ–è®¸ä¼šæœ‰å¸®åŠ©ã€‚</p><pre><code class="lang-python">sns.relplot(x=&quot;sepal_length&quot;, y=&quot;sepal_width&quot;,            hue=&quot;species&quot;, style=&quot;species&quot;, data=iris)</code></pre><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-12-16-18-31.png" alt></p><p>ä¸åªæ˜¯æ•£ç‚¹å›¾ï¼Œè¯¥æ–¹æ³•è¿˜æ”¯æŒçº¿å½¢å›¾ï¼Œåªéœ€è¦æŒ‡å®š <code>kind=&quot;line&quot;</code> å‚æ•°å³å¯ã€‚</p><pre><code class="lang-python">sns.relplot(x=&quot;sepal_length&quot;, y=&quot;sepal_width&quot;,            hue=&quot;species&quot;, style=&quot;species&quot;, kind=&quot;line&quot;, data=iris)</code></pre><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-12-16-20-55.png" alt></p><p>ä¸Šå›¾å…¶å®å°±æ˜¯æŠ˜çº¿å›¾ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªä¸matplotlibç»“åˆæ›´ç´§å¯†çš„apiæ¥æ¢ç©¶èŠ±è¼é•¿åº¦å’ŒèŠ±ç“£é•¿åº¦ä¹‹é—´çš„å…³ç³»ã€‚</p><pre><code class="lang-python">sns.lineplot(x=&quot;sepal_length&quot;, y=&quot;petal_length&quot;,             hue=&quot;species&quot;, style=&quot;species&quot;, data=iris)</code></pre><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-12-16-26-06.png" alt></p><h2 id="2-2-ç±»åˆ«å›¾"><a href="#2-2-ç±»åˆ«å›¾" class="headerlink" title="2.2 ç±»åˆ«å›¾"></a>2.2 ç±»åˆ«å›¾</h2><p>æ‡’äººå‡½æ•°æ˜¯<code>catplot</code>ï¼Œ<code>catplot</code>æ˜¯ä¸‹é¢å‡ ä¸ªåº•å±‚å‡½æ•°çš„å°è£…ï¼š</p><ul><li><p>åˆ†ç±»æ•£ç‚¹å›¾:</p><ul><li><a href="https://seaborn.pydata.org/generated/seaborn.stripplot.html"><code>stripplot()</code></a> (<code>kind=&quot;strip&quot;</code>)</li><li><a href="https://seaborn.pydata.org/generated/seaborn.swarmplot.html"><code>swarmplot()</code></a> (<code>kind=&quot;swarm&quot;</code>)</li></ul></li><li><p>åˆ†ç±»åˆ†å¸ƒå›¾:</p><ul><li><a href="https://seaborn.pydata.org/generated/seaborn.boxplot.html"><code>boxplot()</code></a> (<code>kind=&quot;box&quot;</code>)</li><li><a href="https://seaborn.pydata.org/generated/seaborn.violinplot.html"><code>violinplot()</code></a> (<code>kind=&quot;violin&quot;</code>)</li><li><a href="https://seaborn.pydata.org/generated/seaborn.boxenplot.html"><code>boxenplot()</code></a> (<code>kind=&quot;boxen&quot;</code>)</li></ul></li><li><p>åˆ†ç±»ä¼°è®¡å›¾:</p><ul><li><a href="https://seaborn.pydata.org/generated/seaborn.pointplot.html"><code>pointplot()</code></a> (<code>kind=&quot;point&quot;</code>)</li><li><a href="https://seaborn.pydata.org/generated/seaborn.barplot.html"><code>barplot()</code></a> (<code>kind=&quot;bar&quot;</code>)</li><li><a href="https://seaborn.pydata.org/generated/seaborn.countplot.html"><code>countplot()</code></a> (<code>kind=&quot;count&quot;</code>)</li></ul></li></ul><p>æˆ‘ä»¬æƒ³çŸ¥é“ä¸åŒç±»åˆ«ä¸‹èŠ±è¼é•¿åº¦çš„æ•£ç‚¹å›¾ã€‚</p><pre><code class="lang-python">sns.catplot(x=&quot;sepal_length&quot;, y=&quot;species&quot;, kind=&#39;strip&#39;,data=iris)</code></pre><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-12-16-36-33.png" alt></p><p><code>kind=&quot;swarm&quot;</code> å¯ä»¥è®©æ•£ç‚¹æŒ‰ç…§ beeswarm çš„æ–¹å¼é˜²æ­¢é‡å ï¼Œå¯ä»¥æ›´å¥½åœ°è§‚æµ‹æ•°æ®åˆ†å¸ƒã€‚</p><pre><code class="lang-python">sns.catplot(x=&quot;sepal_length&quot;, y=&quot;species&quot;, kind=&quot;swarm&quot;, data=iris)</code></pre><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-12-16-38-46.png" alt></p><p>ç®±çº¿å›¾</p><pre><code class="lang-python">sns.catplot(x=&quot;sepal_length&quot;, y=&quot;species&quot;, kind=&quot;box&quot;, data=iris)</code></pre><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-12-16-41-06.png" alt><br>å˜ç§ç®±çº¿å›¾</p><pre><code class="lang-python">sns.catplot(x=&quot;species&quot;, y=&quot;sepal_length&quot;, kind=&quot;boxen&quot;, data=iris)</code></pre><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-12-16-41-24.png" alt><br>æç´å›¾</p><pre><code class="lang-python">sns.catplot(x=&quot;sepal_length&quot;, y=&quot;species&quot;, kind=&quot;violin&quot;, data=iris)</code></pre><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-12-16-41-16.png" alt><br>ç‚¹çº¿å›¾</p><pre><code class="lang-python">sns.catplot(x=&quot;sepal_length&quot;, y=&quot;species&quot;, kind=&quot;point&quot;, data=iris)</code></pre><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-12-16-41-36.png" alt><br>æŸ±çŠ¶å›¾</p><pre><code class="lang-python">sns.catplot(x=&quot;sepal_length&quot;, y=&quot;species&quot;, kind=&quot;bar&quot;, data=iris)</code></pre><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-12-16-41-48.png" alt></p><h2 id="2-3-åˆ†å¸ƒå›¾"><a href="#2-3-åˆ†å¸ƒå›¾" class="headerlink" title="2.3 åˆ†å¸ƒå›¾"></a>2.3 åˆ†å¸ƒå›¾</h2><p>å¦‚æœæƒ³çœ‹ä¸€ä¸ªå˜é‡åˆ°åº•æ˜¯æ­£æ€åˆ†å¸ƒã€å¡æ–¹åˆ†å¸ƒè¿˜æ˜¯æŒ‡æ•°åˆ†å¸ƒï¼Œæ­¤æ—¶å°±è¦ä½¿ç”¨åˆ†å¸ƒå›¾è¿›è¡Œå¯è§†åŒ–äº†ã€‚ä¸€ç»´åˆ†å¸ƒå›¾æ¯”è¾ƒå¸¸è§ï¼ŒäºŒç»´ä»¥ä¸Šåˆ†å¸ƒå›¾ä¸å¤ªç›´è§‚ã€‚ç»˜åˆ¶åˆ†å¸ƒå›¾çš„å‡½æ•°æœ‰è¿™å‡ ä¸ªï¼š<code>jointplot</code> <code>pairplot</code> <code>distplot</code> <code>kdeplot</code>ã€‚</p><p><code>distplot</code>å¯ä»¥æ–¹ä¾¿çš„æŸ¥çœ‹å•å˜é‡çš„åˆ†å¸ƒå›¾ã€‚</p><pre><code class="lang-python">sns.distplot(iris[&quot;sepal_length&quot;])</code></pre><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-12-16-48-17.png" alt><br>å›¾ä¸Šé‚£æ¡æ›²çº¿æ˜¯æ ¹æ®æ•°æ®æ‹Ÿåˆå‡ºæ¥çš„æ ¸å¯†åº¦ä¼°è®¡kdeæ›²çº¿ï¼ˆåŸç†æœ‰å¾…å­¦ä¹ ï¼‰ã€‚å¦‚æœä¸æƒ³è¦è¿™æ¡çº¿ï¼Œå¯ä»¥åœ¨å‚æ•°ä¸­è®¾ç½®<code>kde=False</code>ã€‚æ›´å¯ä»¥åªè¦kdeæ›²çº¿ï¼Œè®¾ç½®<code>hist=False</code>å³å¯ã€‚</p><p><code>jointplot</code>ç»˜åˆ¶äºŒå…ƒå˜é‡çš„åˆ†å¸ƒå›¾ï¼Œæ¯”å¦‚èŠ±ç“£é•¿åº¦å’Œå®½åº¦çš„å…³ç³»ã€‚</p><pre><code class="lang-python">sns.jointplot(x=&quot;petal_length&quot;, y=&quot;petal_width&quot;, data=iris)</code></pre><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-12-16-55-40.png" alt></p><p>kdeä¼°è®¡å›¾ä¹Ÿå¯ä»¥åœ¨äºŒå…ƒå˜é‡åˆ†å¸ƒå›¾ä¸­å‡ºç°ã€‚è¿˜æœ‰èœ‚å·¢å›¾<code>kind=&quot;hex&quot;</code>ã€å›å½’å›¾<code>kind=&quot;reg&quot;</code>ç­‰ã€‚</p><pre><code class="lang-python">sns.jointplot(x=&quot;petal_length&quot;, y=&quot;petal_width&quot;, data=iris, kind=&quot;kde&quot;)</code></pre><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-12-16-57-09.png" alt></p><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-12-16-58-51.png" alt></p><p>æœ€åæ³¨æ„åˆ°æˆ‘ä»¬çš„é¸¢å°¾èŠ±æ•°æ®é›†å«æœ‰å››ç»„å±æ€§ã€‚æˆ‘ä»¬æƒ³æ¢ç©¶è¿™å››ç»„å±æ€§ä¸¤ä¸¤ä¹‹é—´çš„å…³ç³»ï¼Œå°±éœ€è¦ç”¨åˆ°<code>pairplot</code></p><pre><code class="lang-python">sns.pairplot(iris, hue=&quot;species&quot;)</code></pre><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-12-17-01-04.png" alt></p><h2 id="2-4-å›å½’å›¾"><a href="#2-4-å›å½’å›¾" class="headerlink" title="2.4 å›å½’å›¾"></a>2.4 å›å½’å›¾</h2><p><code>regplot</code> ç»˜åˆ¶å›å½’å›¾ï¼Œåªä¼šç»˜åˆ¶ä¸€ç»„å›å½’æ›²çº¿ã€‚</p><pre><code class="lang-python">sns.regplot(x=&quot;sepal_length&quot;, y=&quot;sepal_width&quot;, data=iris)</code></pre><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-12-17-02-28.png" alt></p><p><code>lmplot</code> å¯ä»¥å¼•å…¥<code>hue</code>å˜é‡ï¼Œç»˜åˆ¶ä¸åŒç±»åˆ«æ•°æ®çš„å›å½’å›¾</p><pre><code class="lang-python">sns.lmplot(x=&quot;sepal_length&quot;, y=&quot;sepal_width&quot;, hue=&quot;species&quot;, data=iris)</code></pre><p><img src="/2020/01/11/%E6%80%BB%E7%BB%93%E8%AE%BA%E6%96%87%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Matplotlib%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF/2020-01-12-17-03-57.png" alt></p><h2 id="2-5-çŸ©é˜µå›¾"><a href="#2-5-çŸ©é˜µå›¾" class="headerlink" title="2.5 çŸ©é˜µå›¾"></a>2.5 çŸ©é˜µå›¾</h2><p><code>heatmap</code>ç”¨æ¥ç”»çƒ­å›¾ï¼Œæ•°æ®å€¼å¤§çš„æ ¼å­é¢œè‰²æ¯”è¾ƒæ·±ã€‚çƒ­åŠ›å›¾åœ¨æŸäº›åœºæ™¯ä¸‹éå¸¸å®ç”¨ï¼Œä¾‹å¦‚ç»˜åˆ¶å‡ºå˜é‡ç›¸å…³æ€§ç³»æ•°çƒ­åŠ›å›¾ã€‚<br><code>clustermap</code>ç”¨æ¥ç”»å±‚æ¬¡èšç±»ç»“æ„å›¾ã€‚å¯¹äºirisæ•°æ®é›†æ¥è¯´ï¼Œè¿™ä¸¤ç±»å›¾æ²¡æœ‰ç”¨æ­¦ä¹‹åœ°ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>matplotlib</tag>
      
      <tag>seaborn</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç”¨äºç§‘å­¦è®¡ç®—çš„GPUé€‰è´­å‚è€ƒ</title>
    <link href="/2019/07/01/%E7%94%A8%E4%BA%8E%E7%A7%91%E5%AD%A6%E8%AE%A1%E7%AE%97%E7%9A%84GPU%E9%80%89%E8%B4%AD%E5%8F%82%E8%80%83/"/>
    <url>/2019/07/01/%E7%94%A8%E4%BA%8E%E7%A7%91%E5%AD%A6%E8%AE%A1%E7%AE%97%E7%9A%84GPU%E9%80%89%E8%B4%AD%E5%8F%82%E8%80%83/</url>
    
    <content type="html"><![CDATA[<p>å®éªŒå®¤æœ€è¿‘è¦é‡‡è´­ä¸€æ‰¹æ˜¾å¡ï¼Œéœ€è¦è°ƒç ”æ˜¾å¡çš„å‹å·å’Œä»·æ ¼ã€‚</p><h2 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h2><p>é¦–å…ˆè¯´ä¸€ä¸‹éœ€æ±‚ï¼š</p><ul><li>é¦–å…ˆæ˜¾å¡çš„ç”¨é€”æ˜¯ç§‘å­¦è®¡ç®—ï¼Œæ›´å…·ä½“ä¸€ç‚¹æ˜¯æ·±åº¦å­¦ä¹ ï¼Œæœ‰äººåšå›¾åƒï¼Œæœ‰äººåšNLPï¼›</li><li>å…¶æ¬¡é¢„ç®—æœ‰é™ï¼Œå¾—ä¹°æ€§ä»·æ¯”æœ€å¥½çš„ï¼›</li><li>ç„¶åå¯èƒ½ä¼šæœ‰å¾ˆå¤šäººè¦ç”¨æœåŠ¡å™¨è®­ç»ƒæ¨¡å‹ã€‚</li></ul><p>ç„¶åè¿™æ˜¯æˆ´å°”æœåŠ¡å™¨çš„å”®åäººå‘˜å‘æ¥çš„å»ºè®®é‡‡è´­æ¸…å•ï¼š<br><img src="/2019/07/01/%E7%94%A8%E4%BA%8E%E7%A7%91%E5%AD%A6%E8%AE%A1%E7%AE%97%E7%9A%84GPU%E9%80%89%E8%B4%AD%E5%8F%82%E8%80%83/2019-07-01-18-19-43.png" alt></p><p>å…¶ä¸­M10ï¼š19999ï¿¥ P100ï¼š 49999ï¿¥ V100ï¼š59999ï¿¥ P40ï¼š49999ï¿¥</p><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè°·æ­Œçš„Colabä¸Šé¢ç”¨çš„æ˜¯è¿™æ¬¾ï¼š<br><img src="/2019/07/01/%E7%94%A8%E4%BA%8E%E7%A7%91%E5%AD%A6%E8%AE%A1%E7%AE%97%E7%9A%84GPU%E9%80%89%E8%B4%AD%E5%8F%82%E8%80%83/2019-07-01-18-21-48.png" alt><br><img src="/2019/07/01/%E7%94%A8%E4%BA%8E%E7%A7%91%E5%AD%A6%E8%AE%A1%E7%AE%97%E7%9A%84GPU%E9%80%89%E8%B4%AD%E5%8F%82%E8%80%83/2019-07-01-18-21-58.png" alt></p><p>ä½†æ˜¯ä¸€ä¸ªä»äº‹æ·±åº¦å­¦ä¹ ç ”ç©¶çš„å­¦é•¿å»ºè®®æˆ‘ä¹°1080Tiã€‚ä»–å¥½åƒæéƒ½æ²¡æè¿‡Teslaå•Šï¼Ÿéš¾é“æ˜¾å¡æ°´è¿™ä¹ˆæ·±ï¼Ÿ</p><h2 id="GPUå‚æ•°"><a href="#GPUå‚æ•°" class="headerlink" title="GPUå‚æ•°"></a>GPUå‚æ•°</h2><p>GPUçš„æ€§èƒ½ä¸»è¦ç”±ä¸‹é¢ä¸‰ä¸ªä¸»è¦å‚æ•°æ„æˆï¼š</p><p><strong>è®¡ç®—èƒ½åŠ›</strong>ã€‚é€šå¸¸æˆ‘ä»¬å…³å¿ƒçš„æ˜¯32ä½æµ®ç‚¹è®¡ç®—èƒ½åŠ›ã€‚å½“ç„¶ï¼Œå¯¹äºé«˜ç©æ¥è¯´ä¹Ÿå¯ä»¥è€ƒè™‘16ä½æµ®ç‚¹ç”¨æ¥è®­ç»ƒï¼Œ8ä½æ•´æ•°æ¥é¢„æµ‹ã€‚</p><p><strong>å†…å­˜å¤§å°</strong>ã€‚ç¥ç»ç½‘ç»œè¶Šæ·±ï¼Œæˆ–è€…è®­ç»ƒæ—¶æ‰¹é‡å¤§å°è¶Šå¤§ï¼Œæ‰€éœ€è¦çš„GPUå†…å­˜å°±è¶Šå¤šã€‚</p><p><strong>å†…å­˜å¸¦å®½</strong>ã€‚å†…å­˜å¸¦å®½è¦è¶³å¤Ÿæ‰èƒ½å‘æŒ¥å‡ºæ‰€æœ‰è®¡ç®—èƒ½åŠ›ã€‚</p><p>æ­¤å¤–ï¼Œé’ˆå¯¹ä¸åŒæ·±åº¦å­¦ä¹ æ¶æ„ï¼ŒGPUå‚æ•°çš„é€‰æ‹©ä¼˜å…ˆçº§æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ€»ä½“æ¥è¯´åˆ†ä¸¤æ¡è·¯çº¿ï¼š</p><p><strong>å·ç§¯ç½‘ç»œå’ŒTransformer</strong>ï¼šå¼ é‡æ ¸å¿ƒ&gt;FLOPsï¼ˆæ¯ç§’æµ®ç‚¹è¿ç®—æ¬¡æ•°ï¼‰&gt;æ˜¾å­˜å¸¦å®½&gt;16ä½æµ®ç‚¹è®¡ç®—èƒ½åŠ›</p><p><strong>å¾ªç¯ç¥ç»ç½‘ç»œ</strong>ï¼šæ˜¾å­˜å¸¦å®½&gt;16ä½æµ®ç‚¹è®¡ç®—èƒ½åŠ›&gt;å¼ é‡æ ¸å¿ƒ&gt;FLOPs</p><p>è¿™ä¸ªæ’åºèƒŒåæœ‰ä¸€å¥—é€»è¾‘ï¼Œä¸‹é¢å°†è¯¦ç»†è§£é‡Šä¸€ä¸‹ã€‚</p><p>åœ¨è¯´æ¸…æ¥šå“ªä¸ªGPUå‚æ•°å¯¹é€Ÿåº¦å°¤ä¸ºé‡è¦ä¹‹å‰ï¼Œå…ˆçœ‹çœ‹ä¸¤ä¸ªæœ€é‡è¦çš„å¼ é‡è¿ç®—ï¼šçŸ©é˜µä¹˜æ³•å’Œå·ç§¯ã€‚</p><p>ä¸¾ä¸ªæ —å­ï¼Œä»¥è¿ç®—çŸ©é˜µä¹˜æ³•AÃ—B=Cä¸ºä¾‹ï¼Œå°†Aã€Bå¤åˆ¶åˆ°æ˜¾å­˜ä¸Šæ¯”ç›´æ¥è®¡ç®—AÃ—Bæ›´è€—è´¹èµ„æºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ æƒ³ç”¨LSTMç­‰å¤„ç†å¤§é‡å°å‹çŸ©é˜µä¹˜æ³•çš„å¾ªç¯ç¥ç»ç½‘ç»œï¼Œæ˜¾å­˜å¸¦å®½æ˜¯GPUæœ€é‡è¦çš„å±æ€§ã€‚</p><p>çŸ©é˜µä¹˜æ³•è¶Šå°ï¼Œå†…å­˜å¸¦å®½å°±è¶Šé‡è¦ã€‚</p><p>ç›¸åï¼Œå·ç§¯è¿ç®—å—è®¡ç®—é€Ÿåº¦çš„çº¦æŸæ¯”è¾ƒå¤§ã€‚å› æ­¤ï¼Œè¦è¡¡é‡GPUè¿è¡ŒResNetsç­‰å·ç§¯æ¶æ„çš„æ€§èƒ½ï¼Œæœ€ä½³æŒ‡æ ‡å°±æ˜¯FLOPsã€‚å¼ é‡æ ¸å¿ƒå¯ä»¥æ˜æ˜¾å¢åŠ FLOPsã€‚</p><p>Transformerä¸­ç”¨åˆ°çš„å¤§å‹çŸ©é˜µä¹˜æ³•ä»‹äºå·ç§¯è¿ç®—å’ŒRNNçš„å°å‹çŸ©é˜µä¹˜æ³•ä¹‹é—´ï¼Œ16ä½å­˜å‚¨ã€å¼ é‡æ ¸å¿ƒå’ŒTFLOPséƒ½å¯¹å¤§å‹çŸ©é˜µä¹˜æ³•æœ‰å¥½å¤„ï¼Œä½†å®ƒä»éœ€è¦è¾ƒå¤§çš„æ˜¾å­˜å¸¦å®½ã€‚</p><h2 id="æ€§ä»·æ¯”åˆ†æ"><a href="#æ€§ä»·æ¯”åˆ†æ" class="headerlink" title="æ€§ä»·æ¯”åˆ†æ"></a>æ€§ä»·æ¯”åˆ†æ</h2><p>ä¸‹é¢æ€»ç»“äº†ä¸€å¼ GPUå’ŒTPUçš„æ ‡å‡†æ€§èƒ½æ•°æ®ï¼Œå€¼è¶Šé«˜ä»£è¡¨æ€§èƒ½è¶Šå¥½ã€‚RTXç³»åˆ—å‡å®šç”¨äº†16ä½è®¡ç®—ï¼ŒWord RNNæ•°å€¼æ˜¯æŒ‡é•¿åº¦&lt;100çš„æ®µåºåˆ—çš„biLSTMæ€§èƒ½ã€‚</p><p>è¿™é¡¹åŸºå‡†æµ‹è¯•æ˜¯ç”¨PyTorch 1.0.1å’ŒCUDA 10å®Œæˆçš„ã€‚</p><p><img src="/2019/07/01/%E7%94%A8%E4%BA%8E%E7%A7%91%E5%AD%A6%E8%AE%A1%E7%AE%97%E7%9A%84GPU%E9%80%89%E8%B4%AD%E5%8F%82%E8%80%83/2019-07-01-19-09-53.png" alt="GPUå’ŒTPUçš„æ€§èƒ½æ•°æ®"></p><p>æ€§ä»·æ¯”å¯èƒ½æ˜¯é€‰æ‹©ä¸€å¼ GPUæœ€é‡è¦çš„è€ƒè™‘æŒ‡æ ‡ã€‚</p><p>æ€§ä»·æ¯”å¯èƒ½æ˜¯é€‰æ‹©ä¸€å¼ GPUæœ€é‡è¦çš„è€ƒè™‘æŒ‡æ ‡ã€‚åœ¨æ”»ç•¥ä¸­ï¼Œå°å“¥è¿›è¡Œäº†å¦‚ä¸‹è¿ç®—æµ‹è¯•å„æ˜¾å¡çš„æ€§èƒ½ï¼š</p><ul><li>ç”¨è¯­è¨€æ¨¡å‹Transformer-XLå’ŒBERTè¿›è¡ŒTransformeræ€§èƒ½çš„åŸºå‡†æµ‹è¯•ã€‚</li><li>ç”¨æœ€å…ˆè¿›çš„biLSTMè¿›è¡Œäº†å•è¯å’Œå­—ç¬¦çº§RNNçš„åŸºå‡†æµ‹è¯•ã€‚</li><li>ä¸Šè¿°ä¸¤ç§æµ‹è¯•æ˜¯é’ˆå¯¹Titan Xpã€Titan RTXå’ŒRTX 2080 Tiè¿›è¡Œçš„ï¼Œå¯¹äºå…¶ä»–GPUåˆ™çº¿æ€§ç¼©æ”¾äº†æ€§èƒ½å·®å¼‚ã€‚</li><li>å€Ÿç”¨äº†ç°æœ‰çš„CNNåŸºå‡†æµ‹è¯•ã€‚</li><li>ç”¨äº†äºšé©¬é€Šå’ŒeBayä¸Šæ˜¾å¡çš„å¹³å‡å”®ä»·ä½œä¸ºGPUçš„å‚è€ƒæˆæœ¬ã€‚<br>æœ€åï¼Œå¯ä»¥å¾—å‡ºCNNã€RNNå’ŒTransformerçš„å½’ä¸€åŒ–æ€§èƒ½/æˆæœ¬æ¯”å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</li></ul><p><img src="/2019/07/01/%E7%94%A8%E4%BA%8E%E7%A7%91%E5%AD%A6%E8%AE%A1%E7%AE%97%E7%9A%84GPU%E9%80%89%E8%B4%AD%E5%8F%82%E8%80%83/2019-07-01-19-11-20.png" alt="CNNã€RNNå’ŒTransformerçš„æ¯ç¾å…ƒæ€§èƒ½"></p><p>åœ¨ä¸Šé¢è¿™å¼ å›¾ä¸­ï¼Œæ•°å­—è¶Šå¤§ä»£è¡¨æ¯ä¸€ç¾å…ƒèƒ½ä¹°åˆ°çš„æ€§èƒ½è¶Šå¼ºã€‚å¯ä»¥çœ‹å‡ºï¼Œ RTX 2060æ¯”RTX 2070ï¼ŒRTX 2080æˆ–RTX 2080 Tiæ›´å…·æˆæœ¬æ•ˆç›Šï¼Œ<strong>ç”šè‡³æ˜¯Tesla V100æ€§ä»·æ¯”çš„5å€ä»¥ä¸Š</strong>ã€‚</p><p>æ‰€ä»¥æ­¤è½®çš„æ€§ä»·æ¯”ä¹‹ç‹å·²ç»ç¡®å®šï¼Œæ˜¯RTX 2060æ— ç–‘äº†ã€‚</p><p>ä¸‹å›¾æ˜¯ææ²è€å¸ˆç”»äº†900å’Œ1000ç³»åˆ—é‡Œå„ä¸ªå¡çš„32ä½æµ®ç‚¹è®¡ç®—èƒ½åŠ›å’Œä»·æ ¼çš„å¯¹æ¯”ï¼ˆä»·æ ¼æ˜¯wikipediaçš„æ¨èä»·æ ¼ï¼ŒçœŸå®ä»·æ ¼é€šå¸¸ä¼šæœ‰æµ®åŠ¨ï¼‰ã€‚</p><p><img src="/2019/07/01/%E7%94%A8%E4%BA%8E%E7%A7%91%E5%AD%A6%E8%AE%A1%E7%AE%97%E7%9A%84GPU%E9%80%89%E8%B4%AD%E5%8F%82%E8%80%83/2019-07-01-19-06-00.png" alt></p><p>ç”±äºGPUçš„åŠŸè€—ï¼Œæ•£çƒ­å’Œä½“ç§¯ï¼Œéœ€è¦ä¸€äº›é¢å¤–è€ƒè™‘ã€‚</p><ul><li>æœºç®±ä½“ç§¯<br>GPUå°ºå¯¸è¾ƒå¤§ï¼Œé€šå¸¸ä¸è€ƒè™‘å¤ªå°çš„æœºç®±ã€‚è€Œä¸”æœºç®±è‡ªå¸¦çš„é£æ‰‡è¦å¥½ã€‚</li><li>ç”µæº<br>è´­ä¹°GPUæ—¶éœ€è¦æŸ¥ä¸‹GPUçš„åŠŸè€—ï¼Œ50wåˆ°300wä¸ç­‰ã€‚å› æ­¤ä¹°ç”µæºæ—¶éœ€è¦åŠŸç‡è¶³å¤Ÿçš„ã€‚</li><li>ä¸»æ¿çš„PCIeå¡æ§½<br>æ¨èä½¿ç”¨PCIe 3.0 16xæ¥ä¿è¯è¶³å¤Ÿçš„GPUåˆ°ä¸»å†…å­˜å¸¦å®½ã€‚å¦‚æœæ˜¯å¤šå¡çš„è¯ï¼Œè¦ä»”ç»†çœ‹ä¸»æ¿è¯´æ˜ï¼Œä¿è¯å¤šå¡ä¸€èµ·ä½¿ç”¨æ—¶ä»ç„¶æ˜¯16xå¸¦å®½ã€‚ï¼ˆæœ‰äº›ä¸»æ¿æ’4å¡æ—¶ä¼šé™åˆ°8xç”šè‡³4xï¼‰</li></ul><h2 id="Teslaä¸ºä»€ä¹ˆé‚£ä¹ˆè´µï¼Ÿ"><a href="#Teslaä¸ºä»€ä¹ˆé‚£ä¹ˆè´µï¼Ÿ" class="headerlink" title="Teslaä¸ºä»€ä¹ˆé‚£ä¹ˆè´µï¼Ÿ"></a>Teslaä¸ºä»€ä¹ˆé‚£ä¹ˆè´µï¼Ÿ</h2><p>è‹±ä¼Ÿè¾¾ç°åœ¨æœ‰ä¸€é¡¹éå¸¸å‘çˆ¹çš„æ”¿ç­–ï¼Œå¦‚æœåœ¨æ•°æ®ä¸­å¿ƒä½¿ç”¨CUDAï¼Œé‚£ä¹ˆåªå…è®¸ä½¿ç”¨Tesla GPUè€Œä¸èƒ½ç”¨GTXæˆ–RTX GPUã€‚</p><p>ç”±äºæ‹…å¿ƒæ³•å¾‹é—®é¢˜ï¼Œç ”ç©¶æœºæ„å’Œå¤§å­¦ç»å¸¸è¢«è¿«è´­ä¹°ä½æ€§ä»·æ¯”çš„Tesla GPUã€‚<strong>ç„¶è€Œï¼ŒTeslaä¸GTXå’ŒRTXç›¸æ¯”å¹¶æ²¡æœ‰çœŸæ­£çš„ä¼˜åŠ¿ï¼Œä»·æ ¼å´é«˜å‡º10å€ã€‚</strong></p><p>Nvidiaå¡æœ‰é¢å‘ä¸ªäººç”¨æˆ·ï¼ˆä¾‹å¦‚GTXç³»åˆ—ï¼‰å’Œä¼ä¸šç”¨æˆ·ï¼ˆä¾‹å¦‚Teslaç³»åˆ—ï¼‰ä¸¤ç§ã€‚ä¼ä¸šç”¨æˆ·å¡é€šå¸¸ä½¿ç”¨è¢«åŠ¨æ•£çƒ­å’Œå¢åŠ äº†å†…å­˜æ ¡éªŒä»è€Œæ›´åŠ é€‚åˆæ•°æ®ä¸­å¿ƒã€‚ä½†è®¡ç®—èƒ½åŠ›ä¸Šä¸¤è€…ç›¸å½“ã€‚<strong>ä¼ä¸šå¡é€šå¸¸è¦è´µä¸Š10å€</strong>ã€‚</p><p>Teslaæ˜¾å¡é‚£ä¹ˆè´µï¼Œå…¶å®æ˜¯è´µåœ¨åŒç²¾åº¦æµ®ç‚¹æ•°è¿ç®—èƒ½åŠ›ä¸Šäº†ï¼Œå¤–åŠ ä¸€ä¸ªé¸¡è‚‹çš„ECCæ ¡éªŒåŠŸèƒ½ï¼Œå®åœ¨ä¸å€¼ã€‚</p><h2 id="æ€»ç»“å»ºè®®ï¼š"><a href="#æ€»ç»“å»ºè®®ï¼š" class="headerlink" title="æ€»ç»“å»ºè®®ï¼š"></a>æ€»ç»“å»ºè®®ï¼š</h2><p><strong>æœ€ä½³GPU</strong>ï¼šRTX 2070</p><p><strong>é¿å…çš„å‘</strong>ï¼šæ‰€æœ‰Teslaã€Quadroã€åˆ›å§‹äººç‰ˆï¼ˆFounders Editionï¼‰çš„æ˜¾å¡ï¼Œè¿˜æœ‰Titan RTXã€Titan Vã€Titan XP</p><p><strong>é«˜æ€§ä»·æ¯”</strong>ï¼šRTX 2070ï¼ˆé«˜ç«¯ï¼‰ï¼ŒRTX 2060æˆ–GTX 1060 (6GB)ï¼ˆä¸­ä½ç«¯ï¼‰</p><p><strong>è®¡ç®—æœºè§†è§‰æˆ–æœºå™¨ç¿»è¯‘ç ”ç©¶äººå‘˜</strong>ï¼šé‡‡ç”¨é¼“é£è®¾è®¡çš„GTX 2080 Tiï¼Œå¦‚æœè®­ç»ƒéå¸¸å¤§çš„ç½‘ç»œï¼Œè¯·é€‰æ‹©RTX Titans</p><p><strong>NLPç ”ç©¶äººå‘˜</strong>ï¼šRTX 2080 Ti</p><p><strong>å·²ç»å¼€å§‹ç ”ç©¶æ·±åº¦å­¦ä¹ </strong>ï¼šRTX 2070èµ·æ­¥ï¼Œä»¥åæŒ‰éœ€æ·»ç½®æ›´å¤šRTX 2070</p><h2 id="å…¶ä»–é…ä»¶è¦æ±‚ï¼š"><a href="#å…¶ä»–é…ä»¶è¦æ±‚ï¼š" class="headerlink" title="å…¶ä»–é…ä»¶è¦æ±‚ï¼š"></a>å…¶ä»–é…ä»¶è¦æ±‚ï¼š</h2><p><img src="/2019/07/01/%E7%94%A8%E4%BA%8E%E7%A7%91%E5%AD%A6%E8%AE%A1%E7%AE%97%E7%9A%84GPU%E9%80%89%E8%B4%AD%E5%8F%82%E8%80%83/2019-07-01-19-19-14.png" alt="å„ç¡¬ä»¶æ€§èƒ½è¦æ±‚"></p><ul><li><p>CPU:<br>å› ä¸ºä¸»è¦ä½¿ç”¨æ˜¾å¡è¿›è¡Œcudaè®¡ç®—ï¼Œå› æ­¤å¯¹CPUçš„è¦æ±‚å¹¶ä¸æ˜¯å¾ˆé«˜ï¼Œé¢‘ç‡è¶Šé«˜ã€çº¿ç¨‹æ•°è¶Šå¤šè¶Šå¥½ï¼Œä¸€èˆ¬æœ€ä½è¦æ±‚cpuæ ¸å¿ƒæ•°å¤§äºæ˜¾å¡ä¸ªæ•°ã€‚å…¶ä¸­ä¸€ä¸ªåˆ¶çº¦å› ç´ ï¼šcpuçš„æœ€å¤§PCI-E é€šé“æ•°ã€‚æ¯å¼ æ˜¾å¡å ç”¨16æ¡pcieé€šé“æ‰èƒ½è¾¾åˆ°æœ€å¤§æ€§èƒ½ï¼Œè€Œå•cpuæœ€å¤§æ”¯æŒ40æ¡pcieï¼Œä¹Ÿå°±æ˜¯å³ä½¿æœ‰4ä¸ªpcie x16æ¥å£ï¼Œåªèƒ½æœ€å¤šè¾¾åˆ°2è·¯x16åŠ ä¸€è·¯x8ï¼Œæ’ä¸Šçš„æ˜¾å¡ä¸èƒ½å‘æŒ¥å…¨éƒ¨æ€§èƒ½ã€‚ä¸è¿‡ï¼Œä¸»æ¿èŠ¯ç‰‡ç»„å…¶å®ä¹Ÿå¯ä»¥æ‰©å……ä¸€éƒ¨åˆ†pcieé€šé“ã€‚ï¼ˆx99ä¸»æ¿å¯ä»¥æ‰©å®½2.0çš„8lanesï¼Œz170å¯ä»¥æ‰©å……3.0çš„20lanesï¼‰</p></li><li><p>ä¸»æ¿:<br>å‰é¢æåˆ°äº†cpuæä¾›çš„pcieé€šé“æ•°çš„é™åˆ¶ï¼Œå¦‚æœè¦ä½¿ç”¨å¤šå—æ˜¾å¡ï¼Œå°±éœ€è¦ä¸»æ¿æä¾›é¢å¤–çš„pcieé€šé“ï¼Œä¸€èˆ¬åªæœ‰æœåŠ¡å™¨çº§åˆ«çš„ä¸»æ¿æ‰ä¼šæä¾›æ‰©å±•pcieé€šé“å¦‚x99ã€x299ç­‰ä¸»æ¿ï¼Œä½†æ˜¯ä½¿ç”¨æ­¤ç±»ä¸»æ¿å¿…é¡»æ­é…å…·æœ‰è¯¥æ¥å£çš„æœåŠ¡å™¨çº§cpuï¼ˆxeonç³»åˆ—ã€i7 7900xä»¥ä¸Šã€i9ç³»åˆ—ç­‰ï¼‰ï¼Œå¦‚æœä¸éœ€è¦ä¸‰å—ä»¥ä¸Šçš„æ˜¾å¡ï¼Œä½¿ç”¨cpuæä¾›çš„40lane pcieå³å¯ã€‚</p></li><li><p>å†…å­˜ï¼š<br>æ·±åº¦å­¦ä¹ éœ€è¦å¤§é‡æ•°æ®ï¼Œä¸­é—´è®¡ç®—è¿‡ç¨‹ä¹Ÿä¼šä¸´æ—¶å‚¨å­˜å¤§é‡æ•°æ®ï¼Œä¸€èˆ¬è¦æ±‚å…·æœ‰æ˜¾å­˜2~3å€çš„å†…å­˜ï¼Œ32Gæˆ–64Gä¹ƒè‡³æ›´é«˜ã€‚å†…å­˜é¢‘ç‡è¶Šé«˜è¶Šå¥½ã€‚<br>æœ€ä½å»ºè®®32G DDR4 3200MHzå†…å­˜(16G*2)çº¦2000å…ƒï¼Œé¢„ç®—å®½è£•å¯å‡çº§åˆ°64Gï¼ˆçº¦4000å…ƒï¼‰</p></li><li><p>ç¡¬ç›˜ï¼š<br>æ·±åº¦å­¦ä¹ éœ€è¦å¤§é‡æ•°æ®ï¼Œå’Œè¾ƒå¿«çš„è®¿é—®é€Ÿåº¦ï¼Œä¸€èˆ¬ä½¿ç”¨ä¸€ä¸ªè¾ƒå¤§çš„å›ºæ€ç¡¬ç›˜ä½œä¸ºç³»ç»Ÿç›˜å’Œè®­ç»ƒæ•°æ®ä»“å‚¨ç›˜ï¼Œå¦å¤–ä½¿ç”¨hddæœºæ¢°ç¡¬ç›˜ä½œä¸ºä»“å‚¨ç›˜ã€‚<br>å»ºè®®ä½¿ç”¨512Gä»¥ä¸ŠnVMEå›ºæ€ç¡¬ç›˜ï¼ˆ800å…ƒï¼‰æ­é…å‡ TB(2TBçº¦300å…ƒï¼‰Hddä½œä¸ºå‚¨å­˜ç©ºé—´</p></li><li><p>ç”µæºã€æœºç®±ï¼šç”µæºå…¶å®è¿˜æ˜¯è¦ä¹°ä¸ªæ¯”è¾ƒç¨³å®šçš„ï¼Œå› ä¸ºè¦ä¿è¯é•¿æœŸç¨³å®šè¿è¡Œä¼šæœ‰â€œæ— ä¼‘æ­¢â€çš„trainingã€‚ä¸€èˆ¬ä½¿ç”¨å¤§å“ç‰Œçš„ç»è¿‡80PLUSé‡‘ç‰Œæˆ–é“‚é‡‘è®¤è¯çš„ç”µæºã€‚åªæ­é…ä¸€å¼ æ˜¾å¡700wå³å¯ï¼Œæ¯å¤šä¸€å¼ å¢åŠ 400wã€‚4*titan Vå¤§æ¦‚ä½¿ç”¨1600wç”µæºã€‚</p></li></ul><p>æ·±åº¦å­¦ä¹ å®éªŒå®¤å…±äº«æœåŠ¡å™¨ï¼Œ7x24å°æ—¶è¿è¡Œ  2080tiæˆ–è€…4titan V ï¼Œé¢„ç®—å……è£•å¯ä»¥ä¸“é—¨è´­ç½®ä¸€å°é«˜æ€§èƒ½å¤šæ˜¾å¡æ·±åº¦å­¦ä¹ æœåŠ¡å™¨ï¼Œ24*7å°æ—¶è¿è¡Œï¼Œå…¶ä»–ç”¨æˆ·å¯ä»¥åœ¨è‡ªå·±çš„ç¬”è®°æœ¬ç”µè„‘å’Œå°å¼æœºä¸Šç¼–å†™å’Œåˆæ­¥è°ƒè¯•å·ç§¯ç¥ç»ç½‘ç»œï¼Œæœ¬åœ°éªŒè¯æ— è¯¯åï¼Œä¸Šä¼ è‡³æœåŠ¡å™¨è¿›è¡Œè®­ç»ƒä»»åŠ¡ã€‚è¿™æ ·åšå¯ä»¥æå¤§çš„èŠ‚çœè®¾å¤‡å¼€æ”¯ï¼Œæœ€å¤§é™åº¦çš„åˆ©ç”¨è®¡ç®—èµ„æºï¼Œä¹Ÿé¿å…äº†æ¯ä¸ªç”¨æˆ·å•ç‹¬é…ç½®å¤æ‚çš„è½¯ä»¶ç¯å¢ƒã€‚</p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
    <tags>
      
      <tag>deep learning</tag>
      
      <tag>GPU</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>NLPå­¦ä¹ ç¬”è®°4</title>
    <link href="/2019/06/30/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B04/"/>
    <url>/2019/06/30/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B04/</url>
    
    <content type="html"><![CDATA[<h2 id="1-åˆ©ç”¨æœ´ç´ è´å¶æ–¯æ¨¡å‹è¿›è¡Œæ–‡æœ¬åˆ†ç±»"><a href="#1-åˆ©ç”¨æœ´ç´ è´å¶æ–¯æ¨¡å‹è¿›è¡Œæ–‡æœ¬åˆ†ç±»" class="headerlink" title="1. åˆ©ç”¨æœ´ç´ è´å¶æ–¯æ¨¡å‹è¿›è¡Œæ–‡æœ¬åˆ†ç±»"></a>1. åˆ©ç”¨æœ´ç´ è´å¶æ–¯æ¨¡å‹è¿›è¡Œæ–‡æœ¬åˆ†ç±»</h2><p>æœ´ç´ è´å¶æ–¯æ˜¯ä¸€ç§æ„å»ºåˆ†ç±»å™¨çš„ç®€å•æ–¹æ³•ã€‚è¯¥åˆ†ç±»å™¨æ¨¡å‹ä¼šç»™é—®é¢˜å®ä¾‹åˆ†é…ç”¨ç‰¹å¾å€¼è¡¨ç¤ºçš„ç±»æ ‡ç­¾ï¼Œç±»æ ‡ç­¾å–è‡ªæœ‰é™é›†åˆã€‚å®ƒä¸æ˜¯è®­ç»ƒè¿™ç§åˆ†ç±»å™¨çš„å•ä¸€ç®—æ³•ï¼Œè€Œæ˜¯ä¸€ç³»åˆ—åŸºäºç›¸åŒåŸç†çš„ç®—æ³•ï¼š<strong>æ‰€æœ‰æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨éƒ½å‡å®šæ ·æœ¬æ¯ä¸ªç‰¹å¾ä¸å…¶ä»–ç‰¹å¾éƒ½ä¸ç›¸å…³</strong>ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä¸€ç§æ°´æœå…¶å…·æœ‰çº¢ï¼Œåœ†ï¼Œç›´å¾„å¤§æ¦‚3è‹±å¯¸ç­‰ç‰¹å¾ï¼Œè¯¥æ°´æœå¯ä»¥è¢«åˆ¤å®šä¸ºæ˜¯è‹¹æœã€‚å°½ç®¡è¿™äº›ç‰¹å¾ç›¸äº’ä¾èµ–æˆ–è€…æœ‰äº›ç‰¹å¾ç”±å…¶ä»–ç‰¹å¾å†³å®šï¼Œç„¶è€Œæœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨è®¤ä¸ºè¿™äº›å±æ€§åœ¨åˆ¤å®šè¯¥æ°´æœæ˜¯å¦ä¸ºè‹¹æœçš„æ¦‚ç‡åˆ†å¸ƒä¸Šç‹¬ç«‹çš„ã€‚</p><p>å°½ç®¡æ˜¯å¸¦ç€è¿™äº›æœ´ç´ æ€æƒ³å’Œè¿‡äºç®€å•åŒ–çš„å‡è®¾ï¼Œä½†æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨åœ¨å¾ˆå¤šå¤æ‚çš„ç°å®æƒ…å½¢ä¸­ä»èƒ½å¤Ÿè·å–ç›¸å½“å¥½çš„æ•ˆæœã€‚2004å¹´ï¼Œä¸€ç¯‡åˆ†æè´å¶æ–¯åˆ†ç±»å™¨é—®é¢˜çš„æ–‡ç« æ­ç¤ºäº†æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨è·å–çœ‹ä¸Šå»ä¸å¯æ€è®®çš„åˆ†ç±»æ•ˆæœçš„è‹¥å¹²ç†è®ºä¸Šçš„åŸå› ã€‚å°½ç®¡å¦‚æ­¤ï¼Œ2006å¹´æœ‰ä¸€ç¯‡æ–‡ç« è¯¦ç»†æ¯”è¾ƒäº†å„ç§åˆ†ç±»æ–¹æ³•ï¼Œå‘ç°æ›´æ–°çš„æ–¹æ³•ï¼ˆå¦‚å†³ç­–æ ‘å’Œéšæœºæ£®æ—ï¼‰çš„æ€§èƒ½è¶…è¿‡äº†è´å¶æ–¯åˆ†ç±»å™¨ã€‚</p><p>å¯¹äºæŸäº›ç±»å‹çš„æ¦‚ç‡æ¨¡å‹ï¼Œåœ¨ç›‘ç£å¼å­¦ä¹ çš„æ ·æœ¬é›†ä¸­èƒ½è·å–å¾—éå¸¸å¥½çš„åˆ†ç±»æ•ˆæœã€‚åœ¨è®¸å¤šå®é™…åº”ç”¨ä¸­ï¼Œæœ´ç´ è´å¶æ–¯æ¨¡å‹å‚æ•°ä¼°è®¡ä½¿ç”¨<strong>æœ€å¤§ä¼¼ç„¶ä¼°è®¡æ–¹æ³•</strong>ï¼›æ¢è€Œè¨€ä¹‹ï¼Œåœ¨ä¸ç”¨åˆ°è´å¶æ–¯æ¦‚ç‡æˆ–è€…ä»»ä½•è´å¶æ–¯æ¨¡å‹çš„æƒ…å†µä¸‹ï¼Œæœ´ç´ è´å¶æ–¯æ¨¡å‹ä¹Ÿèƒ½å¥æ•ˆã€‚</p><p>æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨çš„ä¸€ä¸ªä¼˜åŠ¿åœ¨äºåªéœ€è¦æ ¹æ®å°‘é‡çš„è®­ç»ƒæ•°æ®ä¼°è®¡å‡ºå¿…è¦çš„å‚æ•°ï¼ˆå˜é‡çš„å‡å€¼å’Œæ–¹å·®ï¼‰ã€‚ç”±äºå˜é‡ç‹¬ç«‹å‡è®¾ï¼Œåªéœ€è¦ä¼°è®¡å„ä¸ªå˜é‡çš„æ–¹æ³•ï¼Œè€Œä¸éœ€è¦ç¡®å®šæ•´ä¸ªåæ–¹å·®çŸ©é˜µã€‚</p><p>æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨æ˜¯ä¸çº¿æ€§æ¨¡å‹éå¸¸ç›¸ä¼¼çš„ä¸€ç§åˆ†ç±»å™¨ï¼Œä½†å®ƒçš„è®­ç»ƒé€Ÿåº¦å¾€å¾€æ›´å¿«ã€‚è¿™ç§é«˜æ•ˆç‡æ‰€ä»˜å‡ºçš„ä»£ä»·æ˜¯ï¼Œæœ´ç´ è´å¶æ–¯æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›è¦æ¯”çº¿æ€§åˆ†ç±»å™¨ï¼ˆå¦‚LogisticRegression å’ŒLinearSVCï¼‰ç¨å·®ã€‚</p><p>æœ´ç´ è´å¶æ–¯æ¨¡å‹å¦‚æ­¤é«˜æ•ˆçš„åŸå› åœ¨äºï¼Œå®ƒé€šè¿‡å•ç‹¬æŸ¥çœ‹æ¯ä¸ªç‰¹å¾æ¥å­¦ä¹ å‚æ•°ï¼Œå¹¶ä»æ¯ä¸ªç‰¹å¾ä¸­æ”¶é›†ç®€å•çš„ç±»åˆ«ç»Ÿè®¡æ•°æ®ã€‚scikit-learn ä¸­å®ç°äº†ä¸‰ç§æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨ï¼šGaussianNBã€BernoulliNB å’ŒMultinomialNBã€‚GaussianNB å¯åº”ç”¨äºä»»æ„è¿ç»­æ•°æ®ï¼Œ è€ŒBernoulliNB å‡å®šè¾“å…¥æ•°æ®ä¸ºäºŒåˆ†ç±»æ•°æ®ï¼ŒMultinomialNB å‡å®šè¾“å…¥æ•°æ®ä¸ºè®¡æ•°æ•°æ®ï¼ˆå³æ¯ä¸ªç‰¹å¾ä»£è¡¨æŸä¸ªå¯¹è±¡çš„æ•´æ•°è®¡æ•°ï¼Œæ¯”å¦‚ä¸€ä¸ªå•è¯åœ¨å¥å­é‡Œå‡ºç°çš„æ¬¡æ•°ï¼‰ã€‚BernoulliNB å’ŒMultinomialNB ä¸»è¦ç”¨äºæ–‡æœ¬æ•°æ®åˆ†ç±»ã€‚</p><pre><code class="lang-python"># ä»sklearn.datasetsé‡Œå¯¼å…¥20ç±»æ–°é—»æ–‡æœ¬æ•°æ®æŠ“å–å™¨ã€‚from sklearn.datasets import fetch_20newsgroups# ä»äº’è”ç½‘ä¸Šå³æ—¶ä¸‹è½½æ–°é—»æ ·æœ¬,subset=&#39;all&#39;å‚æ•°ä»£è¡¨ä¸‹è½½å…¨éƒ¨è¿‘2ä¸‡æ¡æ–‡æœ¬å­˜å‚¨åœ¨å˜é‡newsä¸­ã€‚news = fetch_20newsgroups(subset=&#39;all&#39;)# ä»sklearn.cross_validationå¯¼å…¥train_test_splitæ¨¡å—ç”¨äºåˆ†å‰²æ•°æ®é›†ã€‚from sklearn.cross_validation import train_test_split# å¯¹newsä¸­çš„æ•°æ®dataè¿›è¡Œåˆ†å‰²ï¼Œ25%çš„æ–‡æœ¬ç”¨ä½œæµ‹è¯•é›†ï¼›75%ä½œä¸ºè®­ç»ƒé›†ã€‚X_train, X_test, y_train, y_test = train_test_split(news.data, news.target, test_size=0.25, random_state=33)# ä»sklearn.feature_extraction.texté‡Œå¯¼å…¥CountVectorizerfrom sklearn.feature_extraction.text import CountVectorizer# é‡‡ç”¨é»˜è®¤çš„é…ç½®å¯¹CountVectorizerè¿›è¡Œåˆå§‹åŒ–ï¼ˆé»˜è®¤é…ç½®ä¸å»é™¤è‹±æ–‡åœç”¨è¯ï¼‰ï¼Œå¹¶ä¸”èµ‹å€¼ç»™å˜é‡count_vecã€‚count_vec = CountVectorizer()# åªä½¿ç”¨è¯é¢‘ç»Ÿè®¡çš„æ–¹å¼å°†åŸå§‹è®­ç»ƒå’Œæµ‹è¯•æ–‡æœ¬è½¬åŒ–ä¸ºç‰¹å¾å‘é‡ã€‚#å­¦ä¹ è¯æ±‡çš„è¯å…¸å¹¶è¿”å›æ–‡æ¡£çŸ©é˜µã€‚X_count_train = count_vec.fit_transform(X_train)#ä¸è¿›è¡Œå­¦ä¹ ç›´æ¥è½¬æ¢æ–‡æ¡£document-termçŸ©é˜µX_count_test = count_vec.transform(X_test)# ä»sklearn.naive_bayesé‡Œå¯¼å…¥æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨ã€‚from sklearn.naive_bayes import MultinomialNB# ä½¿ç”¨é»˜è®¤çš„é…ç½®å¯¹åˆ†ç±»å™¨è¿›è¡Œåˆå§‹åŒ–ã€‚mnb_count = MultinomialNB()# ä½¿ç”¨æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨ï¼Œå¯¹CountVectorizerï¼ˆä¸å»é™¤åœç”¨è¯ï¼‰åçš„è®­ç»ƒæ ·æœ¬è¿›è¡Œå‚æ•°å­¦ä¹ ã€‚mnb_count.fit(X_count_train, y_train)# è¾“å‡ºæ¨¡å‹å‡†ç¡®æ€§ç»“æœã€‚print (&#39;The accuracy of classifying 20newsgroups using Naive Bayes (CountVectorizer without filtering stopwords):&#39;, mnb_count.score(X_count_test, y_test))# å°†åˆ†ç±»é¢„æµ‹çš„ç»“æœå­˜å‚¨åœ¨å˜é‡y_count_predictä¸­ã€‚y_count_predict = mnb_count.predict(X_count_test)# ä»sklearn.metrics å¯¼å…¥ classification_reportã€‚from sklearn.metrics import classification_report# è¾“å‡ºæ›´åŠ è¯¦ç»†çš„å…¶ä»–è¯„ä»·åˆ†ç±»æ€§èƒ½çš„æŒ‡æ ‡ã€‚print (classification_report(y_test, y_count_predict, target_names = news.target_names))</code></pre><p><img src="/2019/06/30/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B04/2019-06-30-20-42-49.png" alt></p><h2 id="2-åˆ©ç”¨SVMæ¨¡å‹è¿›è¡Œæ–‡æœ¬åˆ†ç±»"><a href="#2-åˆ©ç”¨SVMæ¨¡å‹è¿›è¡Œæ–‡æœ¬åˆ†ç±»" class="headerlink" title="2. åˆ©ç”¨SVMæ¨¡å‹è¿›è¡Œæ–‡æœ¬åˆ†ç±»"></a>2. åˆ©ç”¨SVMæ¨¡å‹è¿›è¡Œæ–‡æœ¬åˆ†ç±»</h2><h2 id="3-pLSAã€å…±è½­å…ˆéªŒåˆ†å¸ƒã€LDA"><a href="#3-pLSAã€å…±è½­å…ˆéªŒåˆ†å¸ƒã€LDA" class="headerlink" title="3. pLSAã€å…±è½­å…ˆéªŒåˆ†å¸ƒã€LDA"></a>3. pLSAã€å…±è½­å…ˆéªŒåˆ†å¸ƒã€LDA</h2><p>å¸¸ç”¨äºæ–‡æœ¬æ•°æ®çš„ä¸€ç§ç‰¹æ®ŠæŠ€æœ¯æ˜¯ä¸»é¢˜å»ºæ¨¡ï¼ˆtopic modelingï¼‰ï¼Œè¿™æ˜¯æè¿°å°†æ¯ä¸ªæ–‡æ¡£åˆ†é…ç»™ä¸€ä¸ªæˆ–å¤šä¸ªä¸»é¢˜çš„ä»»åŠ¡ï¼ˆé€šå¸¸æ˜¯æ— ç›‘ç£çš„ï¼‰çš„æ¦‚æ‹¬æ€§æœ¯è¯­ã€‚è¿™æ–¹é¢ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯æ–°é—»æ•°æ®ï¼Œå®ƒä»¬å¯ä»¥è¢«åˆ†ä¸ºâ€œæ”¿æ²»â€â€œä½“è‚²â€â€œé‡‘èâ€ç­‰ä¸»é¢˜ã€‚å¦‚æœä¸ºæ¯ä¸ªæ–‡æ¡£åˆ†é…ä¸€ä¸ªä¸»é¢˜ï¼Œé‚£ä¹ˆè¿™æ˜¯ä¸€ä¸ªæ–‡æ¡£èšç±»ä»»åŠ¡ã€‚å¦‚æœæ¯ä¸ªæ–‡æ¡£å¯ä»¥æœ‰å¤šä¸ªä¸»é¢˜ï¼Œé‚£ä¹ˆè¿™ä¸ªä»»åŠ¡ä¸ç¬¬3 ç« ä¸­çš„åˆ†è§£æ–¹æ³•æœ‰å…³ã€‚æˆ‘ä»¬å­¦åˆ°çš„æ¯ä¸ªæˆåˆ†å¯¹åº”äºä¸€ä¸ªä¸»é¢˜ï¼Œæ–‡æ¡£è¡¨ç¤ºä¸­çš„æˆåˆ†ç³»æ•°å‘Šè¯‰æˆ‘ä»¬è¿™ä¸ªæ–‡æ¡£ä¸è¯¥ä¸»é¢˜çš„ç›¸å…³æ€§å¼ºå¼±ã€‚é€šå¸¸æ¥è¯´ï¼Œäººä»¬åœ¨è°ˆè®ºä¸»é¢˜å»ºæ¨¡æ—¶ï¼Œä»–ä»¬æŒ‡çš„æ˜¯ä¸€ç§å«ä½œéšå«ç‹„åˆ©å…‹é›·åˆ†å¸ƒï¼ˆLatent Dirichlet Allocationï¼ŒLDAï¼‰çš„ç‰¹å®šåˆ†è§£æ–¹æ³•</p><h3 id="éšå«ç‹„åˆ©å…‹é›·åˆ†å¸ƒ"><a href="#éšå«ç‹„åˆ©å…‹é›·åˆ†å¸ƒ" class="headerlink" title="éšå«ç‹„åˆ©å…‹é›·åˆ†å¸ƒ"></a>éšå«ç‹„åˆ©å…‹é›·åˆ†å¸ƒ</h3><p>ä»ç›´è§‚ä¸Šæ¥çœ‹ï¼ŒLDA æ¨¡å‹è¯•å›¾æ‰¾å‡ºé¢‘ç¹å…±åŒå‡ºç°çš„å•è¯ç¾¤ç»„ï¼ˆå³ä¸»é¢˜ï¼‰ã€‚LDA è¿˜è¦æ±‚ï¼Œæ¯ä¸ªæ–‡æ¡£å¯ä»¥è¢«ç†è§£ä¸ºä¸»é¢˜å­é›†çš„â€œæ··åˆâ€ã€‚é‡è¦çš„æ˜¯è¦ç†è§£ï¼Œæœºå™¨å­¦ä¹ æ¨¡å‹æ‰€è°“çš„â€œä¸»é¢˜â€å¯èƒ½ä¸æ˜¯æˆ‘ä»¬é€šå¸¸åœ¨æ—¥å¸¸å¯¹è¯ä¸­æ‰€è¯´çš„ä¸»é¢˜ï¼Œè€Œæ˜¯æ›´ç±»ä¼¼äº PCA æˆ– NMFæ‰€æå–çš„æˆåˆ†ï¼Œå®ƒå¯èƒ½å…·æœ‰è¯­ä¹‰ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰ã€‚å³ä½¿ LDAâ€œä¸»é¢˜â€å…·æœ‰è¯­ä¹‰ï¼Œå®ƒå¯èƒ½ä¹Ÿä¸æ˜¯æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„ä¸»é¢˜ã€‚</p><p>ä¸¾ä¸ªè‡ªç„¶è¯­è¨€å¤„ç†çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯èƒ½æœ‰è®¸å¤šå…³äºä½“è‚²ã€æ”¿æ²»å’Œé‡‘èçš„æ–‡ç« ï¼Œç”±ä¸¤ä½ä½œè€…æ‰€å†™ã€‚åœ¨ä¸€ç¯‡æ”¿æ²»æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬é¢„è®¡å¯èƒ½ä¼šçœ‹ åˆ°â€œå·é•¿â€â€œæŠ•ç¥¨â€â€œå…šæ´¾â€ç­‰è¯è¯­ï¼Œè€Œåœ¨ä¸€ç¯‡ä½“è‚²æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬é¢„è®¡å¯èƒ½ä¼šçœ‹åˆ°ç±»ä¼¼â€œé˜Ÿ ä¼â€â€œå¾—åˆ†â€å’Œâ€œèµ›å­£â€ä¹‹ç±»çš„è¯è¯­ã€‚è¿™ä¸¤ç»„è¯è¯­å¯èƒ½ä¼šåŒæ—¶å‡ºç°ï¼Œè€Œä¾‹å¦‚â€œé˜Ÿä¼â€å’Œ â€œå·é•¿â€å°±ä¸å¤ªå¯èƒ½åŒæ—¶å‡ºç°ã€‚ä½†æ˜¯ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬é¢„è®¡å¯èƒ½åŒæ—¶å‡ºç°çš„å”¯ä¸€çš„å•è¯ç¾¤ç»„ã€‚è¿™ä¸¤ä½è®°è€…å¯èƒ½åçˆ±ä¸åŒçš„çŸ­è¯­æˆ–è€…é€‰æ‹©ä¸åŒçš„å•è¯ã€‚å¯èƒ½å…¶ä¸­ä¸€äººå–œæ¬¢ä½¿ç”¨â€œåˆ’ç•Œâ€ï¼ˆdemarcateï¼‰è¿™ä¸ªè¯ï¼Œè€Œå¦ä¸€äººå–œæ¬¢ä½¿ç”¨â€œä¸¤æåˆ†åŒ–â€ï¼ˆpolarizeï¼‰è¿™ä¸ªè¯ã€‚å…¶ä»–â€œä¸»é¢˜â€å¯ èƒ½æ˜¯â€œè®°è€… A å¸¸ç”¨çš„è¯è¯­â€å’Œâ€œè®°è€… B å¸¸ç”¨çš„è¯è¯­â€ï¼Œè™½ç„¶è¿™å¹¶ä¸æ˜¯é€šå¸¸æ„ä¹‰ä¸Šçš„ä¸»é¢˜ã€‚</p><h2 id="4-ä½¿ç”¨LDAç”Ÿæˆä¸»é¢˜ç‰¹å¾ï¼Œåœ¨ä¹‹å‰ç‰¹å¾çš„åŸºç¡€ä¸ŠåŠ å…¥ä¸»é¢˜ç‰¹å¾è¿›è¡Œæ–‡æœ¬åˆ†ç±»"><a href="#4-ä½¿ç”¨LDAç”Ÿæˆä¸»é¢˜ç‰¹å¾ï¼Œåœ¨ä¹‹å‰ç‰¹å¾çš„åŸºç¡€ä¸ŠåŠ å…¥ä¸»é¢˜ç‰¹å¾è¿›è¡Œæ–‡æœ¬åˆ†ç±»" class="headerlink" title="4. ä½¿ç”¨LDAç”Ÿæˆä¸»é¢˜ç‰¹å¾ï¼Œåœ¨ä¹‹å‰ç‰¹å¾çš„åŸºç¡€ä¸ŠåŠ å…¥ä¸»é¢˜ç‰¹å¾è¿›è¡Œæ–‡æœ¬åˆ†ç±»"></a>4. ä½¿ç”¨LDAç”Ÿæˆä¸»é¢˜ç‰¹å¾ï¼Œåœ¨ä¹‹å‰ç‰¹å¾çš„åŸºç¡€ä¸ŠåŠ å…¥ä¸»é¢˜ç‰¹å¾è¿›è¡Œæ–‡æœ¬åˆ†ç±»</h2><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p><a href="https://zh.wikipedia.org/wiki/%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8">https://zh.wikipedia.org/wiki/%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8</a></p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>NLP</tag>
      
      <tag>deep learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>NLPå­¦ä¹ ç¬”è®°3</title>
    <link href="/2019/06/27/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/"/>
    <url>/2019/06/27/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/</url>
    
    <content type="html"><![CDATA[<h2 id="1-TF-IDFåŸç†ã€‚"><a href="#1-TF-IDFåŸç†ã€‚" class="headerlink" title="1. TF-IDFåŸç†ã€‚"></a>1. TF-IDFåŸç†ã€‚</h2><p>tf-idfï¼ˆè‹±è¯­ï¼šterm frequencyâ€“inverse document frequencyï¼‰æ˜¯ä¸€ç§ç”¨äºä¿¡æ¯æ£€ç´¢ä¸æ–‡æœ¬æŒ–æ˜çš„å¸¸ç”¨åŠ æƒæŠ€æœ¯ã€‚tf-idfæ˜¯ä¸€ç§ç»Ÿè®¡æ–¹æ³•ï¼Œç”¨ä»¥è¯„ä¼°ä¸€å­—è¯å¯¹äºä¸€ä¸ªæ–‡ä»¶é›†æˆ–ä¸€ä¸ªè¯­æ–™åº“ä¸­çš„å…¶ä¸­ä¸€ä»½æ–‡ä»¶çš„é‡è¦ç¨‹åº¦ã€‚å­—è¯çš„é‡è¦æ€§éšç€å®ƒåœ¨æ–‡ä»¶ä¸­å‡ºç°çš„æ¬¡æ•°æˆæ­£æ¯”å¢åŠ ï¼Œä½†åŒæ—¶ä¼šéšç€å®ƒåœ¨è¯­æ–™åº“ä¸­å‡ºç°çš„é¢‘ç‡æˆåæ¯”ä¸‹é™ã€‚tf-idfåŠ æƒçš„å„ç§å½¢å¼å¸¸è¢«æœç´¢å¼•æ“åº”ç”¨ï¼Œä½œä¸ºæ–‡ä»¶ä¸ç”¨æˆ·æŸ¥è¯¢ä¹‹é—´ç›¸å…³ç¨‹åº¦çš„åº¦é‡æˆ–è¯„çº§ã€‚é™¤äº†tf-idfä»¥å¤–ï¼Œäº’è”ç½‘ä¸Šçš„æœç´¢å¼•æ“è¿˜ä¼šä½¿ç”¨åŸºäºé“¾æ¥åˆ†æçš„è¯„çº§æ–¹æ³•ï¼Œä»¥ç¡®å®šæ–‡ä»¶åœ¨æœç´¢ç»“æœä¸­å‡ºç°çš„é¡ºåºã€‚</p><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>åœ¨ä¸€ä»½ç»™å®šçš„æ–‡ä»¶é‡Œï¼Œè¯é¢‘ï¼ˆterm frequencyï¼Œtfï¼‰æŒ‡çš„æ˜¯æŸä¸€ä¸ªç»™å®šçš„è¯è¯­åœ¨è¯¥æ–‡ä»¶ä¸­å‡ºç°çš„é¢‘ç‡ã€‚è¿™ä¸ªæ•°å­—æ˜¯å¯¹è¯æ•°ï¼ˆterm countï¼‰çš„å½’ä¸€åŒ–ï¼Œä»¥é˜²æ­¢å®ƒåå‘é•¿çš„æ–‡ä»¶ã€‚ï¼ˆåŒä¸€ä¸ªè¯è¯­åœ¨é•¿æ–‡ä»¶é‡Œå¯èƒ½ä¼šæ¯”çŸ­æ–‡ä»¶æœ‰æ›´é«˜çš„è¯æ•°ï¼Œè€Œä¸ç®¡è¯¥è¯è¯­é‡è¦ä¸å¦ã€‚ï¼‰å¯¹äºåœ¨æŸä¸€ç‰¹å®šæ–‡ä»¶é‡Œçš„è¯è¯­ ${\displaystyle t_{i}!}$æ¥è¯´ï¼Œå®ƒçš„é‡è¦æ€§å¯è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">{\displaystyle \mathrm {tf_{i,j}\!} ={\frac {n_{i,j}\!}{\sum _{k}n_{k,j}\!}\!}\!}</script><p>ä»¥ä¸Šå¼å­ä¸­ ${\displaystyle n<em>{i,j}!} n</em>{i,j}$æ˜¯è¯¥è¯åœ¨æ–‡ä»¶ ${\displaystyle d<em>{j}!} d</em>{j}$ä¸­çš„å‡ºç°æ¬¡æ•°ï¼Œè€Œåˆ†æ¯åˆ™æ˜¯åœ¨æ–‡ä»¶ ${\displaystyle d<em>{j}!} d</em>{j}$ä¸­æ‰€æœ‰å­—è¯çš„å‡ºç°æ¬¡æ•°ä¹‹å’Œã€‚</p><p>é€†å‘æ–‡ä»¶é¢‘ç‡ï¼ˆinverse document frequencyï¼Œidfï¼‰æ˜¯ä¸€ä¸ªè¯è¯­æ™®éé‡è¦æ€§çš„åº¦é‡ã€‚æŸä¸€ç‰¹å®šè¯è¯­çš„idfï¼Œå¯ä»¥ç”±æ€»æ–‡ä»¶æ•°ç›®é™¤ä»¥åŒ…å«è¯¥è¯è¯­ä¹‹æ–‡ä»¶çš„æ•°ç›®ï¼Œå†å°†å¾—åˆ°çš„å•†å–ä»¥10ä¸ºåº•çš„å¯¹æ•°å¾—åˆ°ï¼š</p><script type="math/tex; mode=display">{\displaystyle \mathrm {idf_{i}\!} =\lg {\frac {|D|}{|\{j:t_{i}\in d_{j}\}|}\!}\!}</script><p>å…¶ä¸­</p><p>$|D|$ï¼šè¯­æ–™åº“ä¸­çš„æ–‡ä»¶æ€»æ•°</p><script type="math/tex; mode=display">{\displaystyle |\{j:t_{i}\in d_{j}\}|} $$ï¼šåŒ…å«è¯è¯­ ${\displaystyle t_{i}\!} t_{i}$çš„æ–‡ä»¶æ•°ç›®ï¼ˆå³ ${\displaystyle n_{i,j}\neq 0} n_{i,j}\neq 0$çš„æ–‡ä»¶æ•°ç›®ï¼‰å¦‚æœè¯è¯­ä¸åœ¨æ•°æ®ä¸­ï¼Œå°±å¯¼è‡´åˆ†æ¯ä¸ºé›¶ï¼Œå› æ­¤ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨ $${\displaystyle 1+|\{j:t_{i}\in d_{j}\}|}</script><p>ç„¶å</p><script type="math/tex; mode=display">{\displaystyle \mathrm {tf{}idf_{i,j}\!} =\mathrm {tf_{i,j}\!} \times \mathrm {idf_{i}\!} }</script><p>æŸä¸€ç‰¹å®šæ–‡ä»¶å†…çš„é«˜è¯è¯­é¢‘ç‡ï¼Œä»¥åŠè¯¥è¯è¯­åœ¨æ•´ä¸ªæ–‡ä»¶é›†åˆä¸­çš„ä½æ–‡ä»¶é¢‘ç‡ï¼Œå¯ä»¥äº§ç”Ÿå‡ºé«˜æƒé‡çš„tf-idfã€‚å› æ­¤ï¼Œtf-idfå€¾å‘äºè¿‡æ»¤æ‰å¸¸è§çš„è¯è¯­ï¼Œä¿ç•™é‡è¦çš„è¯è¯­ã€‚</p><h3 id="1-2-ä¾‹å­"><a href="#1-2-ä¾‹å­" class="headerlink" title="1.2 ä¾‹å­"></a>1.2 ä¾‹å­</h3><p>æœ‰å¾ˆå¤šä¸åŒçš„æ•°å­¦å…¬å¼å¯ä»¥ç”¨æ¥è®¡ç®—tf-idfã€‚è¿™è¾¹çš„ä¾‹å­ä»¥ä¸Šè¿°çš„æ•°å­¦å…¬å¼æ¥è®¡ç®—ã€‚è¯é¢‘ï¼ˆtfï¼‰æ˜¯ä¸€è¯è¯­å‡ºç°çš„æ¬¡æ•°é™¤ä»¥è¯¥æ–‡ä»¶çš„æ€»è¯è¯­æ•°ã€‚å‡å¦‚ä¸€ç¯‡æ–‡ä»¶çš„æ€»è¯è¯­æ•°æ˜¯100ä¸ªï¼Œè€Œè¯è¯­â€œæ¯ç‰›â€å‡ºç°äº†3æ¬¡ï¼Œé‚£ä¹ˆâ€œæ¯ç‰›â€ä¸€è¯åœ¨è¯¥æ–‡ä»¶ä¸­çš„è¯é¢‘å°±æ˜¯3/100=0.03ã€‚è€Œè®¡ç®—æ–‡ä»¶é¢‘ç‡ï¼ˆIDFï¼‰çš„æ–¹æ³•æ˜¯ä»¥æ–‡ä»¶é›†çš„æ–‡ä»¶æ€»æ•°ï¼Œé™¤ä»¥å‡ºç°â€œæ¯ç‰›â€ä¸€è¯çš„æ–‡ä»¶æ•°ã€‚æ‰€ä»¥ï¼Œå¦‚æœâ€œæ¯ç‰›â€ä¸€è¯åœ¨1,000ä»½æ–‡ä»¶å‡ºç°è¿‡ï¼Œè€Œæ–‡ä»¶æ€»æ•°æ˜¯10,000,000ä»½çš„è¯ï¼Œå…¶é€†å‘æ–‡ä»¶é¢‘ç‡å°±æ˜¯lgï¼ˆ10,000,000 / 1,000ï¼‰=4ã€‚æœ€åçš„tf-idfçš„åˆ†æ•°ä¸º0.03 * 4=0.12ã€‚</p><h3 id="1-3-tf-idfçš„ç†è®ºä¾æ®åŠä¸è¶³"><a href="#1-3-tf-idfçš„ç†è®ºä¾æ®åŠä¸è¶³" class="headerlink" title="1.3 tf-idfçš„ç†è®ºä¾æ®åŠä¸è¶³"></a>1.3 tf-idfçš„ç†è®ºä¾æ®åŠä¸è¶³</h3><p>tf-idfç®—æ³•æ˜¯åˆ›å»ºåœ¨è¿™æ ·ä¸€ä¸ªå‡è®¾ä¹‹ä¸Šçš„ï¼šå¯¹åŒºåˆ«æ–‡æ¡£æœ€æœ‰æ„ä¹‰çš„è¯è¯­åº”è¯¥æ˜¯é‚£äº›åœ¨æ–‡æ¡£ä¸­å‡ºç°é¢‘ç‡é«˜ï¼Œè€Œåœ¨æ•´ä¸ªæ–‡æ¡£é›†åˆçš„å…¶ä»–æ–‡æ¡£ä¸­å‡ºç°é¢‘ç‡å°‘çš„è¯è¯­ï¼Œæ‰€ä»¥å¦‚æœç‰¹å¾ç©ºé—´åæ ‡ç³»å–tfè¯é¢‘ä½œä¸ºæµ‹åº¦ï¼Œå°±å¯ä»¥ä½“ç°åŒç±»æ–‡æœ¬çš„ç‰¹ç‚¹ã€‚å¦å¤–è€ƒè™‘åˆ°å•è¯åŒºåˆ«ä¸åŒç±»åˆ«çš„èƒ½åŠ›ï¼Œtf-idfæ³•è®¤ä¸ºä¸€ä¸ªå•è¯å‡ºç°çš„æ–‡æœ¬é¢‘æ•°è¶Šå°ï¼Œå®ƒåŒºåˆ«ä¸åŒç±»åˆ«æ–‡æœ¬çš„èƒ½åŠ›å°±è¶Šå¤§ã€‚å› æ­¤å¼•å…¥äº†é€†æ–‡æœ¬é¢‘åº¦idfçš„æ¦‚å¿µï¼Œä»¥tfå’Œidfçš„ä¹˜ç§¯ä½œä¸ºç‰¹å¾ç©ºé—´åæ ‡ç³»çš„å–å€¼æµ‹åº¦ï¼Œå¹¶ç”¨å®ƒå®Œæˆå¯¹æƒå€¼tfçš„è°ƒæ•´ï¼Œè°ƒæ•´æƒå€¼çš„ç›®çš„åœ¨äºçªå‡ºé‡è¦å•è¯ï¼ŒæŠ‘åˆ¶æ¬¡è¦å•è¯ã€‚ä½†æ˜¯åœ¨æœ¬è´¨ä¸Šidfæ˜¯ä¸€ç§è¯•å›¾æŠ‘åˆ¶å™ªå£°çš„åŠ æƒï¼Œå¹¶ä¸”å•çº¯åœ°è®¤ä¸ºæ–‡æœ¬é¢‘ç‡å°çš„å•è¯å°±è¶Šé‡è¦ï¼Œæ–‡æœ¬é¢‘ç‡å¤§çš„å•è¯å°±è¶Šæ— ç”¨ï¼Œæ˜¾ç„¶è¿™å¹¶ä¸æ˜¯å®Œå…¨æ­£ç¡®çš„ã€‚idfçš„ç®€å•ç»“æ„å¹¶ä¸èƒ½æœ‰æ•ˆåœ°åæ˜ å•è¯çš„é‡è¦ç¨‹åº¦å’Œç‰¹å¾è¯çš„åˆ†å¸ƒæƒ…å†µï¼Œä½¿å…¶æ— æ³•å¾ˆå¥½åœ°å®Œæˆå¯¹æƒå€¼è°ƒæ•´çš„åŠŸèƒ½ï¼Œæ‰€ä»¥tf-idfæ³•çš„ç²¾åº¦å¹¶ä¸æ˜¯å¾ˆé«˜ã€‚</p><p>æ­¤å¤–ï¼Œåœ¨tf-idfç®—æ³•ä¸­å¹¶æ²¡æœ‰ä½“ç°å‡ºå•è¯çš„ä½ç½®ä¿¡æ¯ï¼Œå¯¹äºWebæ–‡æ¡£è€Œè¨€ï¼Œæƒé‡çš„è®¡ç®—æ–¹æ³•åº”è¯¥ä½“ç°å‡ºHTMLçš„ç»“æ„ç‰¹å¾ã€‚ç‰¹å¾è¯åœ¨ä¸åŒçš„æ ‡è®°ç¬¦ä¸­å¯¹æ–‡ç« å†…å®¹çš„åæ˜ ç¨‹åº¦ä¸åŒï¼Œå…¶æƒé‡çš„è®¡ç®—æ–¹æ³•ä¹Ÿåº”ä¸åŒã€‚å› æ­¤åº”è¯¥å¯¹äºå¤„äºç½‘é¡µä¸åŒä½ç½®çš„ç‰¹å¾è¯åˆ†åˆ«èµ‹äºˆä¸åŒçš„ç³»æ•°ï¼Œç„¶åä¹˜ä»¥ç‰¹å¾è¯çš„è¯é¢‘ï¼Œä»¥æé«˜æ–‡æœ¬è¡¨ç¤ºçš„æ•ˆæœã€‚</p><h2 id="2-æ–‡æœ¬çŸ©é˜µåŒ–ï¼Œä½¿ç”¨è¯è¢‹æ¨¡å‹ï¼Œä»¥TF-IDFç‰¹å¾å€¼ä¸ºæƒé‡ã€‚"><a href="#2-æ–‡æœ¬çŸ©é˜µåŒ–ï¼Œä½¿ç”¨è¯è¢‹æ¨¡å‹ï¼Œä»¥TF-IDFç‰¹å¾å€¼ä¸ºæƒé‡ã€‚" class="headerlink" title="2. æ–‡æœ¬çŸ©é˜µåŒ–ï¼Œä½¿ç”¨è¯è¢‹æ¨¡å‹ï¼Œä»¥TF-IDFç‰¹å¾å€¼ä¸ºæƒé‡ã€‚"></a>2. æ–‡æœ¬çŸ©é˜µåŒ–ï¼Œä½¿ç”¨è¯è¢‹æ¨¡å‹ï¼Œä»¥TF-IDFç‰¹å¾å€¼ä¸ºæƒé‡ã€‚</h2><p>TfidfVectorizerå¯ä»¥æŠŠåŸå§‹æ–‡æœ¬è½¬åŒ–ä¸ºtf-idfçš„ç‰¹å¾çŸ©é˜µï¼Œä»è€Œä¸ºåç»­çš„æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—ï¼Œä¸»é¢˜æ¨¡å‹(å¦‚LSI)ï¼Œæ–‡æœ¬æœç´¢æ’åºç­‰ä¸€ç³»åˆ—åº”ç”¨å¥ å®šåŸºç¡€ã€‚åŸºæœ¬åº”ç”¨å¦‚ï¼š</p><h3 id="ç¬¬ä¸€æ­¥ï¼šåˆ†è¯"><a href="#ç¬¬ä¸€æ­¥ï¼šåˆ†è¯" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šåˆ†è¯"></a>ç¬¬ä¸€æ­¥ï¼šåˆ†è¯</h3><p>é‡‡ç”¨è‘—åçš„ä¸­æ–‡åˆ†è¯åº“jiebaè¿›è¡Œåˆ†è¯ï¼š</p><pre><code class="lang-python">import jiebatext = &quot;&quot;&quot;æˆ‘æ˜¯ä¸€æ¡å¤©ç‹—å‘€ï¼æˆ‘æŠŠæœˆæ¥åäº†ï¼Œæˆ‘æŠŠæ—¥æ¥åäº†ï¼Œæˆ‘æŠŠä¸€åˆ‡çš„æ˜Ÿçƒæ¥åäº†ï¼Œæˆ‘æŠŠå…¨å®‡å®™æ¥åäº†ã€‚æˆ‘ä¾¿æ˜¯æˆ‘äº†ï¼&quot;&quot;&quot;sentences = text.split()sent_words = [list(jieba.cut(sent0)) for sent0 in sentences]document = [&quot; &quot;.join(sent0) for sent0 in sent_words]print(document)</code></pre><h3 id="ç¬¬äºŒæ­¥ï¼šå»ºæ¨¡"><a href="#ç¬¬äºŒæ­¥ï¼šå»ºæ¨¡" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šå»ºæ¨¡"></a>ç¬¬äºŒæ­¥ï¼šå»ºæ¨¡</h3><pre><code>ç†è®ºä¸Šï¼Œç°åœ¨å¾—åˆ°çš„documentçš„æ ¼å¼å·²ç»å¯ä»¥ç›´æ¥æ‹¿æ¥è®­ç»ƒäº†ã€‚è®©æˆ‘ä»¬è·‘ä¸€ä¸‹æ¨¡å‹è¯•è¯•ã€‚</code></pre><pre><code class="lang-python">tfidf_model = TfidfVectorizer().fit(document)print(tfidf_model.vocabulary_)# &#123;&#39;ä¸€æ¡&#39;: 1, &#39;å¤©ç‹—&#39;: 4, &#39;æ—¥æ¥&#39;: 5, &#39;ä¸€åˆ‡&#39;: 0, &#39;æ˜Ÿçƒ&#39;: 6, &#39;å…¨å®‡å®™&#39;: 3, &#39;ä¾¿æ˜¯&#39;: 2&#125;sparse_result = tfidf_model.transform(document)print(sparse_result)# (0, 4)    0.707106781187# (0, 1)    0.707106781187# (2, 5)    1.0# (3, 6)    0.707106781187# (3, 0)    0.707106781187# (4, 3)    1.0# (5, 2)    1.0</code></pre><h3 id="ç¬¬ä¸‰æ­¥ï¼šå‚æ•°"><a href="#ç¬¬ä¸‰æ­¥ï¼šå‚æ•°" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šå‚æ•°"></a>ç¬¬ä¸‰æ­¥ï¼šå‚æ•°</h3><pre><code>æŸ¥äº†ä¸€äº›èµ„æ–™ä»¥åï¼Œå‘ç°å•å­—çš„é—®é¢˜æ˜¯token_patternè¿™ä¸ªå‚æ•°æçš„é¬¼ã€‚å®ƒçš„é»˜è®¤å€¼åªåŒ¹é…é•¿åº¦â‰¥2çš„å•è¯ï¼Œå°±åƒå…¶å®å¼€å¤´çš„ä¾‹å­ä¸­çš„&#39;I&#39;ä¹Ÿè¢«å¿½ç•¥äº†ä¸€æ ·ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œé•¿åº¦ä¸º1çš„å•è¯åœ¨è‹±æ–‡ä¸­ä¸€èˆ¬æ˜¯æ— è¶³è½»é‡çš„ï¼Œä½†åœ¨ä¸­æ–‡é‡Œï¼Œå°±å¯èƒ½æœ‰ä¸€äº›å¾ˆé‡è¦çš„å•å­—è¯ï¼Œæ‰€ä»¥ä¿®æ”¹å¦‚ä¸‹ï¼š</code></pre><pre><code class="lang-python">tfidf_model2 = TfidfVectorizer(token_pattern=r&quot;(?u)\b\w+\b&quot;).fit(document)print(tfidf_model2.vocabulary_)# &#123;&#39;æˆ‘&#39;: 8, &#39;æ˜¯&#39;: 12, &#39;ä¸€æ¡&#39;: 1, &#39;å¤©ç‹—&#39;: 7, &#39;å‘€&#39;: 6, &#39;æŠŠ&#39;: 9, &#39;æœˆ&#39;: 13, &#39;æ¥&#39;: 14, &#39;å&#39;: 5, &#39;äº†&#39;: 2, &#39;æ—¥æ¥&#39;: 10, &#39;ä¸€åˆ‡&#39;: 0, &#39;çš„&#39;: 15, &#39;æ˜Ÿçƒ&#39;: 11, &#39;å…¨å®‡å®™&#39;: 4, &#39;ä¾¿æ˜¯&#39;: 3&#125;</code></pre><p>token_patternè¿™ä¸ªå‚æ•°ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åˆ†è¯ï¼Œå…¶é»˜è®¤å‚æ•°ä¸ºrâ€(?u)\b\w\w+\bâ€ï¼Œå…¶ä¸­çš„ä¸¤ä¸ª\wå†³å®šäº†å…¶åŒ¹é…é•¿åº¦è‡³å°‘ä¸º2çš„å•è¯ï¼Œæ‰€ä»¥è¿™è¾¹å‡åˆ°1ä¸ªã€‚å¯¹è¿™ä¸ªå‚æ•°è¿›è¡Œæ›´å¤šä¿®æ”¹ï¼Œå¯ä»¥æ»¡è¶³å…¶ä»–è¦æ±‚ï¼Œæ¯”å¦‚è¿™é‡Œä¾ç„¶æ²¡æœ‰å¾—åˆ°æ ‡ç‚¹ç¬¦å·ï¼Œåœ¨æ­¤ä¸è¯¦è§£äº†ã€‚</p><h2 id="3-äº’ä¿¡æ¯"><a href="#3-äº’ä¿¡æ¯" class="headerlink" title="3. äº’ä¿¡æ¯"></a>3. äº’ä¿¡æ¯</h2><p>åœ¨æ¦‚ç‡è®ºå’Œä¿¡æ¯è®ºä¸­ï¼Œä¸¤ä¸ªéšæœºå˜é‡çš„äº’ä¿¡æ¯ï¼ˆMutual Informationï¼Œç®€ç§°MIï¼‰æˆ–è½¬ç§»ä¿¡æ¯ï¼ˆtransinformationï¼‰æ˜¯å˜é‡é—´ç›¸äº’ä¾èµ–æ€§çš„é‡åº¦ã€‚ä¸åŒäºç›¸å…³ç³»æ•°ï¼Œäº’ä¿¡æ¯å¹¶ä¸å±€é™äºå®å€¼éšæœºå˜é‡ï¼Œå®ƒæ›´åŠ ä¸€èˆ¬ä¸”å†³å®šç€è”åˆåˆ†å¸ƒ$ p(X,Y) $å’Œåˆ†è§£çš„è¾¹ç¼˜åˆ†å¸ƒçš„ä¹˜ç§¯$ p(X)p(Y) $çš„ç›¸ä¼¼ç¨‹åº¦ã€‚äº’ä¿¡æ¯æ˜¯ç‚¹é—´äº’ä¿¡æ¯ï¼ˆPMIï¼‰çš„æœŸæœ›å€¼ã€‚äº’ä¿¡æ¯æœ€å¸¸ç”¨çš„å•ä½æ˜¯bitã€‚</p><p>ä¸€èˆ¬åœ°ï¼Œä¸¤ä¸ªç¦»æ•£éšæœºå˜é‡$ X $å’Œ$ Y $çš„äº’ä¿¡æ¯å¯ä»¥å®šä¹‰ä¸ºï¼š</p><script type="math/tex; mode=display">{\displaystyle I(X;Y)=\sum _{y\in Y}\sum _{x\in X}p(x,y)\log {\left({\frac {p(x,y)}{p(x)\,p(y)}\!}\right)},\,\!}</script><p>å…¶ä¸­$ p(x,y) $æ˜¯ $X $å’Œ $Y $çš„è”åˆæ¦‚ç‡åˆ†å¸ƒå‡½æ•°ï¼Œè€Œ ${\displaystyle p(x)} $å’Œ$ {\displaystyle p(y)}  $åˆ†åˆ«æ˜¯ X å’Œ Y çš„è¾¹ç¼˜æ¦‚ç‡åˆ†å¸ƒå‡½æ•°ã€‚</p><p>åœ¨è¿ç»­éšæœºå˜é‡çš„æƒ…å½¢ä¸‹ï¼Œæ±‚å’Œè¢«æ›¿æ¢æˆäº†äºŒé‡å®šç§¯åˆ†ï¼š</p><script type="math/tex; mode=display">{\displaystyle I(X;Y)=\int _{Y}\int _{X}p(x,y)\log {\left({\frac {p(x,y)}{p(x)\,p(y)}\!}\right)}\;dx\,dy,} $$,å…¶ä¸­ $p(x,y)$ å½“å‰æ˜¯ X å’Œ Y çš„è”åˆæ¦‚ç‡å¯†åº¦å‡½æ•°ï¼Œè€Œ ${\displaystyle p(x)} $å’Œ$ {\displaystyle p(y)}$åˆ†åˆ«æ˜¯$ X $å’Œ$ Y $çš„è¾¹ç¼˜æ¦‚ç‡å¯†åº¦å‡½æ•°ã€‚å¦‚æœå¯¹æ•°ä»¥ 2 ä¸ºåŸºåº•ï¼Œäº’ä¿¡æ¯çš„å•ä½æ˜¯bitã€‚ç›´è§‚ä¸Šï¼Œäº’ä¿¡æ¯åº¦é‡ X å’Œ Y å…±äº«çš„ä¿¡æ¯ï¼šå®ƒåº¦é‡çŸ¥é“è¿™ä¸¤ä¸ªå˜é‡å…¶ä¸­ä¸€ä¸ªï¼Œå¯¹å¦ä¸€ä¸ªä¸ç¡®å®šåº¦å‡å°‘çš„ç¨‹åº¦ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ X å’Œ Y ç›¸äº’ç‹¬ç«‹ï¼Œåˆ™çŸ¥é“ X ä¸å¯¹ Y æä¾›ä»»ä½•ä¿¡æ¯ï¼Œåä¹‹äº¦ç„¶ï¼Œæ‰€ä»¥å®ƒä»¬çš„äº’ä¿¡æ¯ä¸ºé›¶ã€‚åœ¨å¦ä¸€ä¸ªæç«¯ï¼Œå¦‚æœ X æ˜¯ Y çš„ä¸€ä¸ªç¡®å®šæ€§å‡½æ•°ï¼Œä¸” Y ä¹Ÿæ˜¯ X çš„ä¸€ä¸ªç¡®å®šæ€§å‡½æ•°ï¼Œé‚£ä¹ˆä¼ é€’çš„æ‰€æœ‰ä¿¡æ¯è¢« X å’Œ Y å…±äº«ï¼šçŸ¥é“ X å†³å®š Y çš„å€¼ï¼Œåä¹‹äº¦ç„¶ã€‚å› æ­¤ï¼Œåœ¨æ­¤æƒ…å½¢äº’ä¿¡æ¯ä¸ Yï¼ˆæˆ– Xï¼‰å•ç‹¬åŒ…å«çš„ä¸ç¡®å®šåº¦ç›¸åŒï¼Œç§°ä½œ Yï¼ˆæˆ– Xï¼‰çš„ç†µã€‚è€Œä¸”ï¼Œè¿™ä¸ªäº’ä¿¡æ¯ä¸ X çš„ç†µå’Œ Y çš„ç†µç›¸åŒã€‚ï¼ˆè¿™ç§æƒ…å½¢çš„ä¸€ä¸ªéå¸¸ç‰¹æ®Šçš„æƒ…å†µæ˜¯å½“ X å’Œ Y ä¸ºç›¸åŒéšæœºå˜é‡æ—¶ã€‚ï¼‰äº’ä¿¡æ¯æ˜¯ X å’Œ Y çš„è”åˆåˆ†å¸ƒç›¸å¯¹äºå‡å®š X å’Œ Y ç‹¬ç«‹æƒ…å†µä¸‹çš„è”åˆåˆ†å¸ƒä¹‹é—´çš„å†…åœ¨ä¾èµ–æ€§ã€‚ äºæ˜¯äº’ä¿¡æ¯ä»¥ä¸‹é¢æ–¹å¼åº¦é‡ä¾èµ–æ€§ï¼š$I(X; Y) = 0$ å½“ä¸”ä»…å½“ X å’Œ Y ä¸ºç‹¬ç«‹éšæœºå˜é‡ã€‚ä»ä¸€ä¸ªæ–¹å‘å¾ˆå®¹æ˜“çœ‹å‡ºï¼šå½“ X å’Œ Y ç‹¬ç«‹æ—¶ï¼Œ$p(x,y) = p(x) p(y)$ï¼Œå› æ­¤ï¼š$${\displaystyle \log {\left({\frac {p(x,y)}{p(x)\,p(y)} \!}\right)}=\log 1=0.\,\!}</script><p>æ­¤å¤–ï¼Œäº’ä¿¡æ¯æ˜¯éè´Ÿçš„ï¼ˆå³ $I(X;Y) â‰¥ 0$; è§ä¸‹æ–‡ï¼‰ï¼Œè€Œä¸”æ˜¯å¯¹ç§°çš„ï¼ˆå³ $I(X;Y) = I(Y;X)$ï¼‰ã€‚</p><p>äº’ä¿¡æ¯åˆå¯ä»¥ç­‰ä»·åœ°è¡¨ç¤ºæˆ</p><script type="math/tex; mode=display">{\displaystyle {\begin{aligned}I(X;Y)&{}=H(X)-H(X|Y)\\&{}=H(Y)-H(Y|X)\\&{}=H(X)+H(Y)-H(X,Y)\\&{}=H(X,Y)-H(X|Y)-H(Y|X)\end{aligned}\!}\!}</script><p>å…¶ä¸­$ {\displaystyle \ H(X)} $ å’Œ$ {\displaystyle \ H(Y)}  $æ˜¯è¾¹ç¼˜ç†µï¼Œ$H(X|Y) $å’Œ$ H(Y|X) $æ˜¯æ¡ä»¶ç†µï¼Œè€Œ $H(X,Y) $æ˜¯ X å’Œ Y çš„è”åˆç†µã€‚</p><p><strong>äº’ä¿¡æ¯è¶Šå°ï¼Œä¸¤ä¸ªæ¥è‡ªä¸åŒäº‹ä»¶ç©ºé—´çš„éšæœºå˜é‡å½¼æ­¤ä¹‹é—´çš„å…³ç³»æ€§è¶Šä½; äº’ä¿¡æ¯è¶Šé«˜ï¼Œå…³ç³»æ€§åˆ™è¶Šé«˜ã€‚</strong></p><h2 id="4-å¯¹ç‰¹å¾çŸ©é˜µä½¿ç”¨äº’ä¿¡æ¯è¿›è¡Œç‰¹å¾ç­›é€‰"><a href="#4-å¯¹ç‰¹å¾çŸ©é˜µä½¿ç”¨äº’ä¿¡æ¯è¿›è¡Œç‰¹å¾ç­›é€‰" class="headerlink" title="4. å¯¹ç‰¹å¾çŸ©é˜µä½¿ç”¨äº’ä¿¡æ¯è¿›è¡Œç‰¹å¾ç­›é€‰"></a>4. å¯¹ç‰¹å¾çŸ©é˜µä½¿ç”¨äº’ä¿¡æ¯è¿›è¡Œç‰¹å¾ç­›é€‰</h2><p><code>sklearn.metrics.mutual_info_score</code></p><pre><code class="lang-python">from sklearn import datasetsfrom sklearn import metrics as mriris = datasets.load_iris()x = iris.datalabel = iris.targetx0 = x[:, 0]x1 = x[:, 1]x2 = x[:, 2]x3 = x[:, 3]# è®¡ç®—å„ç‰¹å¾ä¸labelçš„äº’ä¿¡æ¯print(mr.mutual_info_score(x0, label))print(mr.mutual_info_score(x1, label))print(mr.mutual_info_score(x2, label))print(mr.mutual_info_score(x3, label))</code></pre><p><img src="/2019/06/27/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/2019-06-27-20-45-13.png" alt><br><code>sklearn.feature_selection.mutual_info_classif</code></p><pre><code class="lang-python">from sklearn import datasetsfrom sklearn.feature_selection import mutual_info_classifiris = datasets.load_iris()x = iris.datalabel = iris.targetmutual_info = mutual_info_classif(x, label, discrete_features= False)print(mutual_info)</code></pre><p><img src="/2019/06/27/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/2019-06-27-20-45-28.png" alt></p><blockquote><p>å‚è€ƒæ–‡çŒ®<br><a href="https://zh.wikipedia.org/wiki/Tf-idf">https://zh.wikipedia.org/wiki/Tf-idf</a><br><a href="https://zh.wikipedia.org/wiki/%E4%BA%92%E4%BF%A1%E6%81%AF">https://zh.wikipedia.org/wiki/%E4%BA%92%E4%BF%A1%E6%81%AF</a><br><a href="https://blog.csdn.net/yyy430/article/details/88249709">https://blog.csdn.net/yyy430/article/details/88249709</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>NLP</tag>
      
      <tag>deep learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>NLPå­¦ä¹ ç¬”è®°2</title>
    <link href="/2019/06/24/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02/"/>
    <url>/2019/06/24/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02/</url>
    
    <content type="html"><![CDATA[<h2 id="1-åˆ†è¯çš„æ¦‚å¿µå’Œå®ç°ç»†èŠ‚"><a href="#1-åˆ†è¯çš„æ¦‚å¿µå’Œå®ç°ç»†èŠ‚" class="headerlink" title="1. åˆ†è¯çš„æ¦‚å¿µå’Œå®ç°ç»†èŠ‚"></a>1. åˆ†è¯çš„æ¦‚å¿µå’Œå®ç°ç»†èŠ‚</h2><p>NLPçš„åº•å±‚ä»»åŠ¡å¯åˆ†ä¸ºè¯æ³•åˆ†æã€å¥æ³•åˆ†æå’Œè¯­ä¹‰åˆ†æï¼Œåˆ†è¯æ˜¯è¯æ³•åˆ†æä¸­æœ€åŸºæœ¬çš„ä»»åŠ¡ã€‚ä¸­æ–‡åˆ†è¯æ˜¯åœ¨ä¸€ä¸ªä¸­æ–‡åºåˆ—çš„è¯ä¸æ­¤ä¹‹é—´åŠ ä¸Šç©ºæ ¼æˆ–è€…å…¶ä»–è¾¹ç•Œæ ‡å¿—è¿›è¡Œåˆ†å‰²ï¼Œä»è€Œæ–¹ä¾¿æ¥ä¸‹æ¥æ­¥éª¤çš„å¤„ç†ã€‚</p><p>åˆ†è¯ç®—æ³•å¯åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯åŸºäºè¯å…¸çš„åˆ†è¯ç®—æ³•ï¼Œå¦ä¸€ç§æ˜¯åŸºäºå­—çš„åˆ†è¯ç®—æ³•ã€‚</p><h3 id="1-1-åŸºäºè¯å…¸çš„åˆ†è¯ç®—æ³•ï¼š"><a href="#1-1-åŸºäºè¯å…¸çš„åˆ†è¯ç®—æ³•ï¼š" class="headerlink" title="1.1 åŸºäºè¯å…¸çš„åˆ†è¯ç®—æ³•ï¼š"></a>1.1 åŸºäºè¯å…¸çš„åˆ†è¯ç®—æ³•ï¼š</h3><p><strong>æœ€å¤§åŒ¹é…åˆ†è¯ç®—æ³•</strong>ï¼Œæœ‰æ­£å‘å’Œåå‘ä¸¤ç§ã€‚ä¸»è¦æ€è·¯æ˜¯å°†è¯å…¸æ„é€ æˆä¸€é¢—Trieæ ‘ï¼Œä¹Ÿæˆä¸ºè¯å…¸æ ‘ã€‚ä»¥â€œä»–è¯´çš„ç¡®å®åœ¨ç†â€è¿™å¥è¯ä¸ºä¾‹ï¼Œæ„é€ Trieæ ‘å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="/2019/06/24/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02/2019-06-24-20-42-46.png" alt></p><p>Trieæ ‘ç”±è¯çš„å…¬å…±å‰ç¼€æ„æˆèŠ‚ç‚¹ï¼Œé™ä½äº†å­˜å‚¨ç©ºé—´çš„åŒæ—¶æå‡æŸ¥æ‰¾æ•ˆç‡ã€‚æœ€å¤§ï¼ˆæ­£å‘ï¼‰åŒ¹é…åˆ†è¯å°†å¥å­ä¸Trieæ ‘è¿›è¡ŒåŒ¹é…ï¼Œåœ¨åŒ¹é…åˆ°æ ¹ç»“ç‚¹æ—¶ç”±ä¸‹ä¸€ä¸ªå­—é‡æ–°å¼€å§‹è¿›è¡ŒæŸ¥æ‰¾ã€‚æ¯”å¦‚æ­£å‘ï¼ˆä»å·¦è‡³å³ï¼‰åŒ¹é…â€œä»–è¯´çš„ç¡®å®åœ¨ç†â€ï¼Œå¾—å‡ºçš„ç»“æœä¸ºâ€œä»–ï¼è¯´ï¼çš„ç¡®ï¼å®åœ¨ï¼ç†â€ã€‚å¦‚æœè¿›è¡Œåå‘æœ€å¤§åŒ¹é…ï¼Œåˆ™ä¸ºâ€œä»–ï¼è¯´ï¼çš„ï¼ç¡®å®ï¼åœ¨ç†â€ã€‚</p><p>å•ç‹¬ä¾ä»—è¿™ç§æ–¹æ³•è¾¾ä¸åˆ°å¾ˆå¥½çš„åˆ†è¯æ•ˆæœï¼Œè€Œä¸”åˆ†è¯æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ï¼Œå³éšç€å­—ç¬¦ä¸²é•¿åº¦çº¿æ€§ä¸Šå‡ã€‚</p><p><strong>æœ€çŸ­è·¯å¾„åˆ†è¯ç®—æ³•</strong>ï¼Œè®²ä¸€å¥è¯ä¸­æ‰€æœ‰çš„è¯åŒ¹é…å‡ºæ¥æ„æˆ<strong>è¯å›¾</strong>ï¼Œè¯å›¾æ˜¯ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾ã€‚ä¹‹ååˆ†è¯é—®é¢˜è½¬åŒ–ä¸ºæ±‚å¼€å§‹èŠ‚ç‚¹å’Œç»“æŸèŠ‚ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„çš„é—®é¢˜ã€‚æœ‰è¿ªæ°æ–¯ç‰¹æ‹‰ç®—æ³•ä»¥åŠå…¶ä»–ç®—æ³•ã€‚ä¸ä¸€å®šåªä¿å­˜æœ€çŸ­çš„è·¯å¾„ï¼Œæœ‰å¯èƒ½ä¿å­˜å‰NçŸ­çš„è·¯å¾„ã€‚å›¾çš„è¾¹ä¸Šä¹Ÿæœ‰å¯èƒ½æŒ‰ç…§ä¸åŒè¯æ±‡å‡ºç°çš„æ¦‚ç‡å¤§å°ä¸åŒå®‰æ’ä¸åŒçš„æƒå€¼ã€‚</p><p><img src="/2019/06/24/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02/2019-06-24-20-47-26.png" alt></p><p>å¦‚ä½•æ„å»ºä¸åŒæƒå€¼çš„è¯å›¾ï¼Ÿæœ‰åŸºäºn-gramçš„åˆ†è¯ç®—æ³•ã€‚æœ€åæˆ‘ä»¬å¯ä»¥å¾—åˆ°è¯çš„æ¦‚ç‡å›¾ã€‚</p><p><img src="/2019/06/24/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02/2019-06-24-20-49-14.png" alt></p><h3 id="1-2-åŸºäºå­—çš„åˆ†è¯ç®—æ³•"><a href="#1-2-åŸºäºå­—çš„åˆ†è¯ç®—æ³•" class="headerlink" title="1.2 åŸºäºå­—çš„åˆ†è¯ç®—æ³•"></a>1.2 åŸºäºå­—çš„åˆ†è¯ç®—æ³•</h3><p>ä¸åŸºäºè¯å…¸çš„åˆ†è¯ä¸åŒçš„æ˜¯ï¼ŒåŸºäºå­—çš„åˆ†è¯äº‹å…ˆä¸å¯¹å¥å­è¿›è¡Œè¯çš„åŒ¹é…ï¼Œè€Œæ˜¯å°†åˆ†è¯çœ‹æˆåºåˆ—æ ‡æ³¨é—®é¢˜ï¼ŒæŠŠä¸€ä¸ªå­—æ ‡è®°æˆB(Begin), I(Inside), O(Outside), E(End), S(Single)ã€‚å› æ­¤ä¹Ÿå¯ä»¥çœ‹æˆæ˜¯æ¯ä¸ªå­—çš„åˆ†ç±»é—®é¢˜ï¼Œè¾“å…¥ä¸ºæ¯ä¸ªå­—åŠå…¶å‰åå­—æ‰€æ„æˆçš„ç‰¹å¾ï¼Œè¾“å‡ºä¸ºåˆ†ç±»æ ‡è®°ã€‚å¯¹äºåˆ†ç±»é—®é¢˜ï¼Œå¯ä»¥ç”¨ç»Ÿè®¡æœºå™¨å­¦ä¹ æˆ–ç¥ç»ç½‘ç»œçš„æ–¹æ³•æ±‚è§£ã€‚</p><p>åœ¨NLPä¸­ï¼Œæœ€å¸¸ç”¨çš„ç¥ç»ç½‘ç»œä¸ºå¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRNNï¼ŒRecurrent Neural Networkï¼‰ï¼Œå®ƒåœ¨å¤„ç†å˜é•¿è¾“å…¥å’Œåºåˆ—è¾“å…¥é—®é¢˜ä¸­æœ‰ç€å·¨å¤§çš„ä¼˜åŠ¿ã€‚LSTMä¸ºRNNå˜ç§çš„ä¸€ç§ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†RNNåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸çš„é—®é¢˜ã€‚åŒå‘ï¼ˆBidirectionalï¼‰å¾ªç¯ç¥ç»ç½‘ç»œåˆ†åˆ«ä»å¥å­çš„å¼€å¤´å’Œç»“å°¾å¼€å§‹å¯¹è¾“å…¥è¿›è¡Œå¤„ç†ï¼Œå°†ä¸Šä¸‹æ–‡ä¿¡æ¯è¿›è¡Œç¼–ç ï¼Œæå‡é¢„æµ‹æ•ˆæœã€‚</p><h2 id="2-è¯ã€å­—ç¬¦é¢‘ç‡ç»Ÿè®¡"><a href="#2-è¯ã€å­—ç¬¦é¢‘ç‡ç»Ÿè®¡" class="headerlink" title="2. è¯ã€å­—ç¬¦é¢‘ç‡ç»Ÿè®¡"></a>2. è¯ã€å­—ç¬¦é¢‘ç‡ç»Ÿè®¡</h2><p>ç»Ÿè®¡ä¸€ç¯‡æ–‡ç« ä¸­å•è¯å‡ºç°çš„æ¬¡æ•°ï¼Œé¦–å…ˆåº”è¯¥çŸ¥é“è¯¥æ–‡ç« ä¸­ï¼Œæœ‰å¤šå°‘ä¸ªå•è¯ï¼ˆå»é‡åï¼‰ï¼Œç„¶åå†ç»Ÿè®¡å•è¯åœ¨æ–‡ç« ä¸­çš„å‡ºç°é¢‘ç‡ã€‚è¿™é‡Œä½¿ç”¨æœ€ç®€å•çš„æ–¹å¼æ¥å®ç°è¯¥åŠŸèƒ½ã€‚</p><pre><code class="lang-python">def statistics():    path = ...    with open(path, &#39;r&#39;, encoding=&#39;UTF-8&#39;) as text:        print(string.punctuation)        words = [raw_word.strip(string.punctuation).lower() for raw_word in text.read().split()]        words_index = set(words)        counts_dict = &#123;index: words.count(index) for index in words_index&#125;    for word in sorted(counts_dict, key=lambda x: counts_dict[x], reverse=True):        print(&#39;&#123;&#125;--&#123;&#125; times&#39;.format(word, counts_dict[word]))</code></pre><h2 id="3-è¯­è¨€æ¨¡å‹ä¸­unigramã€bigramã€trigramçš„æ¦‚å¿µ"><a href="#3-è¯­è¨€æ¨¡å‹ä¸­unigramã€bigramã€trigramçš„æ¦‚å¿µ" class="headerlink" title="3. è¯­è¨€æ¨¡å‹ä¸­unigramã€bigramã€trigramçš„æ¦‚å¿µ"></a>3. è¯­è¨€æ¨¡å‹ä¸­unigramã€bigramã€trigramçš„æ¦‚å¿µ</h2><p>ç®€å•åœ°è¯´ï¼Œè¯­è¨€æ¨¡å‹å°±æ˜¯ç”¨æ¥è®¡ç®—ä¸€ä¸ªå¥å­çš„æ¦‚ç‡çš„æ¨¡å‹ã€‚ä¸ºäº†è§£å†³åƒæ•°ç©ºé—´è¿‡å¤§çš„é—®é¢˜ã€‚å¼•å…¥äº†é©¬å°”ç§‘å¤«å‡è®¾ï¼šéšæ„ä¸€ä¸ªè¯å‡ºç°çš„æ¦‚ç‡åªä¸å®ƒå‰é¢å‡ºç°çš„æœ‰é™çš„ä¸€ä¸ªæˆ–è€…å‡ ä¸ªè¯æœ‰å…³ã€‚</p><p>å¦‚æœä¸€ä¸ªè¯çš„å‡ºç°ä¸å®ƒå‘¨å›´çš„è¯æ˜¯ç‹¬ç«‹çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç§°ä¹‹ä¸ºunigramä¹Ÿå°±æ˜¯ä¸€å…ƒè¯­è¨€æ¨¡å‹ï¼š</p><p><img src="/2019/06/24/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02/2019-06-24-20-55-14.png" alt></p><p>å¦‚æœä¸€ä¸ªè¯çš„å‡ºç°ä»…ä¾èµ–äºå®ƒå‰é¢å‡ºç°çš„ä¸€ä¸ªè¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç§°ä¹‹ä¸ºbigramï¼š</p><p><img src="/2019/06/24/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02/2019-06-24-20-54-56.png" alt></p><p>åŒç†ï¼Œtrigramï¼š</p><p><img src="/2019/06/24/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02/2019-06-24-20-55-41.png" alt></p><p>ä¸€èˆ¬æ¥è¯´ï¼ŒNå…ƒæ¨¡å‹å°±æ˜¯å‡è®¾å½“å‰è¯çš„å‡ºç°æ¦‚ç‡åªä¸å®ƒå‰é¢çš„N-1ä¸ªè¯æœ‰å…³ã€‚åœ¨å®è·µä¸­ç”¨çš„æœ€å¤šçš„å°±æ˜¯bigramå’Œtrigramäº†ã€‚</p><h2 id="4-æ–‡æœ¬çŸ©é˜µåŒ–"><a href="#4-æ–‡æœ¬çŸ©é˜µåŒ–" class="headerlink" title="4. æ–‡æœ¬çŸ©é˜µåŒ–"></a>4. æ–‡æœ¬çŸ©é˜µåŒ–</h2><pre><code class="lang-python">a =&quot;è‡ªç„¶è¯­è¨€å¤„ç†æ˜¯è®¡ç®—æœºç§‘å­¦é¢†åŸŸä¸äººå·¥æ™ºèƒ½é¢†åŸŸä¸­çš„ä¸€ä¸ªé‡è¦æ–¹å‘ã€‚å®ƒç ”ç©¶èƒ½å®ç°äººä¸è®¡ç®—æœºä¹‹é—´ç”¨è‡ªç„¶è¯­è¨€è¿›è¡Œæœ‰æ•ˆé€šä¿¡çš„å„ç§ç†è®ºå’Œæ–¹æ³•ã€‚è‡ªç„¶è¯­è¨€å¤„ç†æ˜¯ä¸€é—¨èè¯­è¨€å­¦ã€è®¡ç®—æœºç§‘å­¦ã€æ•°å­¦äºä¸€ä½“çš„ç§‘å­¦&quot;b = &quot;å› æ­¤ï¼Œè¿™ä¸€é¢†åŸŸçš„ç ”ç©¶å°†æ¶‰åŠè‡ªç„¶è¯­è¨€ï¼Œå³äººä»¬æ—¥å¸¸ä½¿ç”¨çš„è¯­è¨€ï¼Œæ‰€ä»¥å®ƒä¸è¯­è¨€å­¦çš„ç ”ç©¶æœ‰ç€å¯†åˆ‡çš„è”ç³»ï¼Œä½†åˆæœ‰é‡è¦çš„åŒºåˆ«ã€‚è‡ªç„¶è¯­è¨€å¤„ç†å¹¶ä¸æ˜¯ä¸€èˆ¬åœ°ç ”ç©¶è‡ªç„¶è¯­è¨€ï¼Œè€Œåœ¨äºç ”åˆ¶èƒ½æœ‰æ•ˆåœ°å®ç°è‡ªç„¶è¯­è¨€é€šä¿¡çš„è®¡ç®—æœºç³»ç»Ÿï¼Œç‰¹åˆ«æ˜¯å…¶ä¸­çš„è½¯ä»¶ç³»ç»Ÿã€‚&quot;c =&quot;å› è€Œå®ƒæ˜¯è®¡ç®—æœºç§‘å­¦çš„ä¸€éƒ¨åˆ†ã€‚è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰æ˜¯è®¡ç®—æœºç§‘å­¦ï¼Œäººå·¥æ™ºèƒ½ï¼Œè¯­è¨€å­¦å…³æ³¨è®¡ç®—æœºå’Œäººç±»ï¼ˆè‡ªç„¶ï¼‰è¯­è¨€ä¹‹é—´çš„ç›¸äº’ä½œç”¨çš„é¢†åŸŸã€‚&quot;import jiebaall_list= [&#39;  &#39;.join(jieba.cut(s,cut_all = False)) for s in [a,b,c]]print(all_list)</code></pre><pre><code class="lang-python">#ä»æ–‡ä»¶å¯¼å…¥åœç”¨è¯è¡¨stpwrdpath =&quot;C:\\Users\\Administrator\Desktop\lect09_codes\lect09_proj\stop_words\\ä¸­æ–‡åœç”¨è¯åº“.txt&quot;with open(stpwrdpath, &#39;rb&#39;) as fp:    stopword = fp.read().decode(&#39;utf-8&#39;)  # æç”¨è¯æå–#å°†åœç”¨è¯è¡¨è½¬æ¢ä¸ºlist  stpwrdlst = stopword.splitlines()# ä»sklearn.feature_extraction.texté‡Œå¯¼å…¥CountVectorizerfrom sklearn.feature_extraction.text import CountVectorizer# å¯¹CountVectorizerè¿›è¡Œåˆå§‹åŒ–ï¼ˆå»é™¤ä¸­æ–‡åœç”¨è¯ï¼‰count_vec=CountVectorizer(stop_words=stpwrdlst) #åˆ›å»ºè¯è¢‹æ•°æ®ç»“æ„X_count_train = count_vec.fit_transform(all_list[:2])  #&lt;class &#39;scipy.sparse.csr.csr_matrix&#39;&gt;# å°†åŸå§‹è®­ç»ƒå’Œæµ‹è¯•æ–‡æœ¬è½¬åŒ–ä¸ºç‰¹å¾å‘é‡X_count_train= X_count_train.toarray()X_count_test = count_vec.transform(all_list[2]).toarray()print(X_count_train)#è¯æ±‡è¡¨print(&#39;\nvocabulary list:\n\n&#39;,count_vec.get_feature_names())print( &#39;\nvocabulary dic :\n\n&#39;,count_vec.vocabulary_)print (&#39;vocabulary:\n\n&#39;)for key,value in count_vec.vocabulary_.items():    print(key,value)</code></pre>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>NLP</tag>
      
      <tag>deep learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>NLPå­¦ä¹ ç¬”è®°1</title>
    <link href="/2019/06/21/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/"/>
    <url>/2019/06/21/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/</url>
    
    <content type="html"><![CDATA[<h1 id="IMDBæ•°æ®é›†æ¢ç´¢"><a href="#IMDBæ•°æ®é›†æ¢ç´¢" class="headerlink" title="IMDBæ•°æ®é›†æ¢ç´¢"></a>IMDBæ•°æ®é›†æ¢ç´¢</h1><p>å®éªŒæ˜¯åœ¨Google Colabä¸Šé¢åšçš„ï¼Œæœºå™¨ä¹Ÿæ˜¯ç”¨çš„è°·æ­Œäº‘ã€‚</p><pre><code class="lang-python"># keras.datasets.imdb is broken in 1.13 and 1.14, by np 1.16.3!pip install tf_nightly</code></pre><p>å®‰è£…tensorflow</p><pre><code class="lang-python">from __future__ import absolute_import, division, print_function, unicode_literalsimport tensorflow as tffrom tensorflow import kerasimport numpy as npprint(tf.__version__)</code></pre><p>å¯¼å…¥ç›¸å…³çš„åŒ…</p><pre><code class="lang-python">imdb = keras.datasets.imdb(train_data, train_labels), (test_data, test_labels) = imdb.load_data(num_words=10000)</code></pre><p>å¯¼å…¥IMDBæ•°æ®é›†ï¼Œå°†å…¶åˆ†æˆå››éƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯è®­ç»ƒé›†ã€è®­ç»ƒé›†ç­”æ¡ˆã€æµ‹è¯•é›†ã€æµ‹è¯•é›†ç­”æ¡ˆã€‚</p><pre><code class="lang-python">print(&quot;Training entries: &#123;&#125;, labels: &#123;&#125;&quot;.format(len(train_data), len(train_labels)))print(train_data[0])len(train_data[0]), len(train_data[1])</code></pre><p>æ¢ç´¢æ•°æ®é›†ã€‚å¯ä»¥å‘ç°ï¼Œè®­ç»ƒé›†çš„æ¯ä¸€ä¸ªè®­ç»ƒæ ·æœ¬æ˜¯ä¸€ä¸ªç”±æ•°å­—ç»„æˆçš„åˆ—è¡¨ã€‚æˆ‘è¿˜çº³é—·å‘¢ï¼Œè¿™ä¸åº”è¯¥æ˜¯æ–‡æœ¬åºåˆ—å—ï¼Ÿ</p><p>åæ¥æˆ‘å‘ç°ï¼Œæ¯ä¸ªæ•°å­—å¯¹åº”ç€ä¸åŒçš„å•è¯ã€‚æ¯”å¦‚1å¯¹åº”çš„æ˜¯Theï¼Œ4å¯¹åº”çš„æ˜¯filmã€‚ä¹‹ååªè¦æ ¹æ®å­—å…¸mappingä¸€ä¸‹å°±å¥½ã€‚</p><pre><code class="lang-python"># A dictionary mapping words to an integer indexword_index = imdb.get_word_index()# The first indices are reservedword_index = &#123;k:(v+3) for k,v in word_index.items()&#125;word_index[&quot;&lt;PAD&gt;&quot;] = 0word_index[&quot;&lt;START&gt;&quot;] = 1word_index[&quot;&lt;UNK&gt;&quot;] = 2  # unknownword_index[&quot;&lt;UNUSED&gt;&quot;] = 3reverse_word_index = dict([(value, key) for (key, value) in word_index.items()])def decode_review(text):    return &#39; &#39;.join([reverse_word_index.get(i, &#39;?&#39;) for i in text])decode_review(train_data[0])</code></pre><p>æå–å­—å…¸ã€‚å¹¶å°è¯•åˆ©ç”¨å­—å…¸è¿˜åŸä¸€ä¸ªæ ·æœ¬çš„æœ¬æ¥é¢è²Œã€‚</p><pre><code class="lang-python">train_data = keras.preprocessing.sequence.pad_sequences(train_data,                                                        value=word_index[&quot;&lt;PAD&gt;&quot;],                                                        padding=&#39;post&#39;,                                                        maxlen=256)test_data = keras.preprocessing.sequence.pad_sequences(test_data,                                                       value=word_index[&quot;&lt;PAD&gt;&quot;],                                                       padding=&#39;post&#39;,                                                       maxlen=256)len(train_data[0]), len(train_data[1])print(train_data[0])</code></pre><p>ç®€åŒ–è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œæ¯ä¸ªæ ·æœ¬ä¹‹æå–æœ€å¤š256ä¸ªå•æ¬¡ï¼Œä¸å¤Ÿçš„å°±ä»¥0æ¥å‡‘ã€‚</p><pre><code class="lang-python"># input shape is the vocabulary count used for the movie reviews (10,000 words)vocab_size = 10000model = keras.Sequential()model.add(keras.layers.Embedding(vocab_size, 16))model.add(keras.layers.GlobalAveragePooling1D())model.add(keras.layers.Dense(16, activation=tf.nn.relu))model.add(keras.layers.Dense(1, activation=tf.nn.sigmoid))model.summary()</code></pre><p>å®‰æ’ç½‘ç»œï¼Œè¾“å…¥å±‚ã€æ± åŒ–å±‚ã€å…¨è¿æ¥ã€softmaxå±‚ã€‚</p><pre><code class="lang-python">model.compile(optimizer=&#39;adam&#39;,              loss=&#39;binary_crossentropy&#39;,              metrics=[&#39;acc&#39;])</code></pre><pre><code class="lang-python">x_val = train_data[:10000]partial_x_train = train_data[10000:]y_val = train_labels[:10000]partial_y_train = train_labels[10000:]history = model.fit(partial_x_train,                    partial_y_train,                    epochs=40,                    batch_size=512,                    validation_data=(x_val, y_val),                    verbose=1)</code></pre><p>è®­ç»ƒï¼</p><pre><code class="lang-python">results = model.evaluate(test_data, test_labels)print(results)</code></pre><p>æµ‹è¯•ç»“æœæ˜¯å‡†ç¡®ç‡87%ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>NLP</tag>
      
      <tag>deep learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ¨¡å‹è¯„ä¼°ä¸é€‰æ‹©â€”â€”å‘¨å¿—åã€Šæœºå™¨å­¦ä¹ ã€‹CH2</title>
    <link href="/2019/06/21/%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9%E2%80%94%E2%80%94%E5%91%A8%E5%BF%97%E5%8D%8E%E3%80%8A%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E3%80%8BCH2/"/>
    <url>/2019/06/21/%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9%E2%80%94%E2%80%94%E5%91%A8%E5%BF%97%E5%8D%8E%E3%80%8A%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E3%80%8BCH2/</url>
    
    <content type="html"><![CDATA[<p>æ¨¡å‹å¦‚ä½•è¯„ä¼°ï¼Œé€‰æ‹©æ ‡å‡†æ˜¯ä»€ä¹ˆï¼Ÿ<br>å…ˆè®©æˆ‘ä»¬äº†è§£ä¸€ä¸‹å¸¸è§çš„è¡¡é‡æ ‡å‡†</p><p>é”™è¯¯ç‡+ç²¾åº¦=1</p><h3 id="è¯¯å·®ï¼š"><a href="#è¯¯å·®ï¼š" class="headerlink" title="è¯¯å·®ï¼š"></a>è¯¯å·®ï¼š</h3><p><strong>è®­ç»ƒè¯¯å·®/ç»éªŒè¯¯å·®</strong> training/empirical error<br><strong>æ³›åŒ–è¯¯å·®</strong> generalization error</p><p>è®­ç»ƒè¯¯å·®ä½ï¼Œæ³›åŒ–è¯¯å·®ä¸ä¸€å®šä½ã€‚è¿™å…¶ä¸­ç‰µæ‰¯åˆ°è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆçš„é—®é¢˜ã€‚</p><p><strong>è¿‡æ‹Ÿåˆ</strong>ï¼šè¿‡åˆ†å­¦ä¹ ï¼Œå°†è®­ç»ƒæ ·æœ¬ä¸­ä¸å±äºè§„å¾‹çš„çš„å™ªå£°ä¹Ÿä¸€å¹¶å­¦ä¹ çš„ç°è±¡ã€‚<br>é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œä¸€èˆ¬é‡‡ç”¨å°†æ•°æ®é›†åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œåˆ©ç”¨è®­ç»ƒé›†è®­ç»ƒæ¨¡å‹ï¼Œåˆ©ç”¨æµ‹è¯•é›†æ‹Ÿåˆæ³›åŒ–è¯¯å·®çš„åŠæ³•ã€‚</p><p><strong>æµ‹è¯•è¯¯å·®</strong> testing error</p><h3 id="åˆ’åˆ†æ•°æ®é›†çš„æ–¹æ³•"><a href="#åˆ’åˆ†æ•°æ®é›†çš„æ–¹æ³•" class="headerlink" title="åˆ’åˆ†æ•°æ®é›†çš„æ–¹æ³•"></a>åˆ’åˆ†æ•°æ®é›†çš„æ–¹æ³•</h3><h4 id="æ ·æœ¬åˆ’åˆ†ä¹‹ç•™å‡ºæ³•-hold-out"><a href="#æ ·æœ¬åˆ’åˆ†ä¹‹ç•™å‡ºæ³•-hold-out" class="headerlink" title="æ ·æœ¬åˆ’åˆ†ä¹‹ç•™å‡ºæ³• hold-out"></a>æ ·æœ¬åˆ’åˆ†ä¹‹ç•™å‡ºæ³• hold-out</h4><p>å°†æ ·æœ¬åˆ†æˆäº’æ–¥çš„ä¸¤éƒ¨åˆ†S,T<br>ç”¨Sè®­ç»ƒï¼Œç”¨Tæµ‹è¯•ã€‚åˆ†å‰²æ¯”ä¾‹è‡ªå·±ç¡®å®šã€‚<br>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¿…é¡»ä¿è¯Sã€TåŒåˆ†å¸ƒï¼Œå»ºè®®é‡‡ç”¨<strong>åˆ†å±‚é‡‡æ ·</strong>stratified samplingï¼Œå³æ•°æ®é›†ä¸­çš„æ¯ä¸ªç±»åˆ«é›¨éœ²å‡æ²¾ã€‚<br>å¦å¤–å¯ä»¥éšæœºåˆ’åˆ†è‹¥å¹²æ¬¡ï¼Œé˜²æ­¢å•æ¬¡åˆ’åˆ†å‡ºç°æç«¯é‡‡æ ·ç»“æœã€‚éšæœºæ¬¡æ•°è¶Šé«˜ï¼Œç»“æœçš„<strong>ä¿çœŸæ€§</strong>fidelityè¶Šé«˜ã€‚</p><h4 id="æ ·æœ¬åˆ’åˆ†ä¹‹äº¤å‰éªŒè¯-cross-validation"><a href="#æ ·æœ¬åˆ’åˆ†ä¹‹äº¤å‰éªŒè¯-cross-validation" class="headerlink" title="æ ·æœ¬åˆ’åˆ†ä¹‹äº¤å‰éªŒè¯ cross validation"></a>æ ·æœ¬åˆ’åˆ†ä¹‹äº¤å‰éªŒè¯ cross validation</h4><p>å°†æ•°æ®é›†é‡‡ç”¨åˆ†å±‚åˆ’åˆ†ï¼Œåˆ†æˆè‹¥å¹²ä¸ªäº’æ–¥çš„å°æ•°æ®é›†ã€‚æ¯ä¸ªå°æ•°æ®é›†éƒ½å½“ä¸€æ¬¡æµ‹è¯•é›†ï¼Œå…¶ä»–æ•°æ®é›†ç»„æˆæ–°è®­ç»ƒé›†ã€‚å¦‚æœåˆ†å‰²æˆkä¸ªå°æ•°æ®é›†ï¼Œåˆ™è¿™ç§éªŒè¯æ–¹æ³•ä¼šåškä¸ªä¸åŒçš„åˆ’åˆ†ã€‚å› æ­¤åˆç§°ä¸ºk-fold äº¤å‰éªŒè¯ã€‚</p><p>æç«¯æƒ…å†µæ˜¯ç•™ä¸€æ³• leave one outï¼Œå³k=|D|ã€‚</p><h4 id="æ ·æœ¬åˆ’åˆ†ä¹‹è‡ªåŠ©æ³•-bootstrapping"><a href="#æ ·æœ¬åˆ’åˆ†ä¹‹è‡ªåŠ©æ³•-bootstrapping" class="headerlink" title="æ ·æœ¬åˆ’åˆ†ä¹‹è‡ªåŠ©æ³• bootstrapping"></a>æ ·æœ¬åˆ’åˆ†ä¹‹è‡ªåŠ©æ³• bootstrapping</h4><p>ä»Dä¸­è¿›è¡Œmæ¬¡<strong>æ”¾å›æŠ½æ ·</strong>ï¼Œå½¢æˆæ–°çš„å°æ•°æ®é›†Dâ€™,ç†æ‰€åº”å½“åœ°ï¼Œæ–°æ•°æ®é›†å†…å¯èƒ½æœ‰é‡å¤å…ƒç´ ï¼Œå³<script type="math/tex">|unique(D')|\leq m</script></p><p>å¤§æ•°æ®é›†ä¸­çš„ä¸€ä¸ªå…ƒç´ xä¸è¢«é€‰ä¸­çš„æ¦‚ç‡æ˜¯<script type="math/tex">\mathbb{P}\{x\in \mathit{D}\cap x\notin \mathit{D}'\}=(1-\frac{1}{m})^m</script>ï¼Œæ­¤æ—¶å¦‚æœmå–å¾—è¶Šå¤šï¼Œæ¦‚ç‡å°±è¶Šè¶‹è¿‘äº<script type="math/tex">\lim_{m\rightarrow\infty}(1-\frac{1}{m})^m=\frac{1}{e}</script>ã€‚</p><p>æœ€åå¯ä»¥åˆ©ç”¨Dâ€™è®­ç»ƒï¼Œç”¨D/Dâ€™æµ‹è¯•ã€‚æ­¤ç§æŠ½æ ·æ–¹æ³•åˆç§°ä¸º<strong>åŒ…å¤–ä¼°è®¡</strong> out of bag estimateï¼Œé€‚ç”¨äº|D|å¾ˆå°çš„æƒ…å†µã€‚</p><h3 id="å¦‚ä½•åˆ¤æ–­æ¨¡å‹çš„å¥½åï¼Ÿ"><a href="#å¦‚ä½•åˆ¤æ–­æ¨¡å‹çš„å¥½åï¼Ÿ" class="headerlink" title="å¦‚ä½•åˆ¤æ–­æ¨¡å‹çš„å¥½åï¼Ÿ"></a>å¦‚ä½•åˆ¤æ–­æ¨¡å‹çš„å¥½åï¼Ÿ</h3><p>ä¸ºé˜²æ­¢ä¸“æœ‰åè¯æ··æ·†ï¼Œæ­¤å¤„ä¸»è¦é‡‡ç”¨è‹±æ–‡æœ¯è¯­ã€‚<br>å¯¹äºäºŒåˆ†ç±»æ¨¡å‹ï¼Œæœ‰ä»¥ä¸‹è¯„ä»·æ¨¡å‹çš„æ ‡å‡†ï¼š</p><p>accuracyï¼šæ¨¡å‹ç»“æœä¸çœŸå®å€¼ç›¸åŒçš„æ¯”ç‡ã€‚ä¸­æ–‡ç§°ä¹‹ä¸º<strong>ç²¾åº¦</strong>ã€‚</p><p>precisionï¼šæ¨¡å‹æ‰€å¾—ç»“æœä¸­æ­£ä¾‹æ¯”ç‡ã€‚ä¸­æ–‡ç§°ä¹‹ä¸º<strong>å‡†ç¡®ç‡</strong>ã€‚è‹¥æƒ³å‡†ç¡®ç‡æå‡ï¼Œç›´è§‚çš„æ–¹æ³•æ˜¯åªæŒ‘é€‰è‡ªå·±ååˆ†ç¡®å®šçš„æ ·æœ¬ã€‚æ‰€è°“ä¸æ‰“æ— å‡†å¤‡ä¹‹ä»—ã€‚ä¸è¿‡è¿™æ ·è‚¯å®šä¼šæ”¾è¿‡å¾ˆå¤šåŸæœ¬æ˜¯æ­£ä¾‹çš„æ ·æœ¬ã€‚</p><p>recallï¼šæ­£ä¾‹ä¸­æ¨¡å‹ç»“æœå æ¯”ã€‚ä¸­æ–‡ç§°ä¸º<strong>æŸ¥å…¨ç‡</strong>ã€<strong>å¬å›ç‡</strong>ã€‚æƒ³æé«˜æŸ¥å…¨ç‡ï¼Œå°±è¦æŠŠæ‰€æœ‰ç–‘ä¼¼æ ·æœ¬å…¨éƒ½æ”¶é›†è¿›æ¥ï¼Œæ‰€è°“å®æ€ä¸€åƒä¸æ”¾ä¸€ä¸ªã€‚è¿™æ ·æ˜¾ç„¶ä¹Ÿä¼šæé«˜è¯¯æ€ç‡ã€‚</p><p><strong>PRæ›²çº¿</strong>ï¼šå³å‡†ç¡®ç‡-æŸ¥å…¨ç‡æ›²çº¿ã€‚å¯¹äºé¢„æµ‹æ¨¡å‹æ¥è¯´ï¼Œå¯¹æœªçŸ¥æ ·æœ¬çš„é¢„æµ‹ï¼Œå‡†ç¡®ç‡å’ŒæŸ¥å…¨ç‡å¾€å¾€ä¸å¯å…¼å¾—ã€‚å‘ˆç°ä¸€ä¸ªè¿™ç§æ›²çº¿ï¼š</p><p><img src="/2019/06/21/%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9%E2%80%94%E2%80%94%E5%91%A8%E5%BF%97%E5%8D%8E%E3%80%8A%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E3%80%8BCH2/2019-06-21-11-58-57.png" alt></p><p>æ¨¡å‹å¯¹æ¯ä¸ªæ ·æœ¬ä¼šç»™å‡ºè‡ªå·±çš„åˆ¤æ–­ï¼Œå¹¶ä¸”è¿˜ä¼šæœ‰è‡ªå·±çš„ç½®ä¿¡åº¦ã€‚æˆ‘ä»¬å¯ä»¥æŒ‰ç…§ç½®ä¿¡åº¦æ’åºï¼Œå°±å¯ä»¥åšå‡ºPRæ›²çº¿ã€‚</p><p>åªæœ‰PRæ›²çº¿ï¼Œæˆ‘ä»¬å¯ä»¥è¯´æ¨¡å‹Cæœ€å·®ï¼Œå› ä¸ºè¿™æ¡æ›²çº¿å®Œå…¨è¢«Aæˆ–Bæ¨¡å‹çš„æ›²çº¿æ‰€åŒ…å›´ã€‚ä½†æ˜¯ä¸å¥½åˆ¤æ–­Açº¢çº¿ä¸Bé»‘çº¿çš„æ€§èƒ½ï¼Œå› ä¸ºäºŒè€…æœ‰äº¤å‰ã€‚è¿™ç§æƒ…å†µæœ‰ä¸‰ç§åº¦é‡ï¼š</p><p>æ±‚<strong>æ›²çº¿ä¸‹é¢ç§¯</strong>æ˜¯ä¸€ç§æ€è·¯ï¼Œä¸è¿‡æœ‰æ¯”è¾ƒé«˜çš„è®¡ç®—æˆæœ¬ï¼Œæ›´å–œæ¬¢é‡‡ç”¨çš„æ˜¯<strong>å¹³è¡¡ç‚¹</strong>Break-Even pointï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬æŒ‘äº†ä¸‰ä¸ªå°çº¢ç‚¹ã€‚é å¤–çš„æ¨¡å‹å¥½ã€‚å¦å¤–å¯ä»¥é‡‡ç”¨F1åº¦é‡ã€‚è®¡ç®—å…¬å¼æ˜¯<script type="math/tex">F_1=\frac{2PR}{P+R}</script>è¿™ä¸ªå…¬å¼å°±æ˜¯å‡†ç¡®ç‡å’ŒæŸ¥å…¨ç‡çš„è°ƒå’Œå¹³å‡<script type="math/tex">\frac{1}{F_1}=\frac{1}{2}(\frac{1}{P}+\frac{1}{R})</script>ã€‚ä¹‹æ‰€ä»¥å–è°ƒå’Œå¹³å‡ï¼Œæ˜¯å› ä¸ºè°ƒå’Œå¹³å‡åœ¨å››ç§å¹³å‡ä¸­æœ€å°ï¼Œå› æ­¤æ›´é‡è§†è¾ƒå°å€¼ã€‚</p><p><img src="/2019/06/21/%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9%E2%80%94%E2%80%94%E5%91%A8%E5%BF%97%E5%8D%8E%E3%80%8A%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E3%80%8BCH2/2019-06-21-12-46-48.png" alt="å››å¤§åŸºæœ¬ä¸ç­‰å¼"></p><p>å¯¹äºå®é™…é—®é¢˜ï¼Œå‡†ç¡®ç‡å’ŒæŸ¥å…¨ç‡çš„æ„ä¹‰ä¸ä¸€æ ·ã€‚è¶…å¸‚å°å·è¯†åˆ«ç³»ç»Ÿæ›´å®³æ€•å†¤æ‰å¥½äººï¼Œå› æ­¤å¯èƒ½æ›´æ³¨é‡å‡†ç¡®ç‡ï¼›è€Œåœ°é“æ£€æŸ¥ç³»ç»Ÿå¯èƒ½æŠ±ç€â€œå®æŸ¥ä¸€åƒä¸æ”¾ä¸€ä¸ªâ€çš„æ€åº¦ï¼Œæ›´è¿½æ±‚æŸ¥å…¨ç‡ã€‚å› æ­¤å¯¹F1è¯„ä»·ç¨ä½œä¿®æ”¹ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†F<em>betaåº¦é‡æŒ‡æ ‡ï¼š$$F</em>{\beta}=\frac{(1+\beta^2)PR}{\beta^2P+R}<script type="math/tex">ï¼Œå…¶å®è¿™ä¸ªå…¬å¼å°±æ˜¯åŠ äº†æƒé‡åçš„è°ƒå’Œå¹³å‡</script>\frac{1}{F_{\beta}}=\frac{1}{1+\beta^2}(\frac{1}{P}+\frac{\beta^2}{R})$$ã€‚$\beta&gt;1$åˆ™æ›´æ³¨é‡æŸ¥å…¨ç‡Rï¼Œ$\beta&lt;1$åˆ™æ›´æ³¨é‡æŸ¥å‡†ç‡Pã€‚</p><p><strong>ROCæ›²çº¿</strong>æ˜¯å¦å¤–ä¸€ä¸ªæ€è·¯çš„è¯„ä»·æ ‡å‡†ï¼Œæ¨ªåæ ‡æ˜¯å‡æ­£ä¾‹ï¼Œçºµåæ ‡æ˜¯çœŸæ­£ä¾‹ã€‚å…¶ç»˜åˆ¶æ–¹æ³•ä¹Ÿæ˜¯å°†æ ·æœ¬æŒ‰ç…§ç½®ä¿¡åº¦æ’åºï¼Œå¦‚æœæ ·æœ¬æ˜¯çœŸæ­£ä¾‹ï¼Œåˆ™å‚ç›´å‘yè½´æ­£æ–¹å‘ç»˜åˆ¶ä¸€ä¸ªå•ä½ï¼›å¦‚æœæ ·æœ¬æ˜¯å‡æ­£ä¾‹ï¼Œåˆ™æ°´å¹³å‘xè½´æ­£æ–¹å‘ç»˜åˆ¶ä¸€ä¸ªå•ä½ã€‚</p><p>ç†æƒ³çŠ¶æ€ä¸‹ï¼Œæ¨¡å‹å°†æ‰€æœ‰æ­£ä¾‹æ’åœ¨åä¾‹å‰é¢ï¼Œå› æ­¤æ›²çº¿åº”è¯¥ä¸€ç›´å¾€ä¸Šå‡ï¼Œå‡åˆ°mä¸ªæ­£ä¾‹ç©·å°½ä¹‹åï¼Œå†æ°´å¹³åˆ°|D|-mä¸ªåä¾‹ã€‚ä½†æ˜¯å¾€å¾€æ¨¡å‹ä¼šåˆ¤æ–­å¤±è¯¯ï¼Œäºæ˜¯å°±å‡ºç°äº†è¿™ç§å›¾åƒï¼š</p><p><img src="/2019/06/21/%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9%E2%80%94%E2%80%94%E5%91%A8%E5%BF%97%E5%8D%8E%E3%80%8A%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E3%80%8BCH2/2019-06-21-12-59-40.png" alt></p><p>å·¦å›¾æ˜¯æ— é™æ ·ä¾‹ä¸‹ï¼Œæ‰å¯èƒ½è¾¾åˆ°çš„å…‰æ»‘ROCæ›²çº¿ã€‚å³å›¾æ˜¯å®é™…å¯èƒ½çš„ROCæ›²çº¿ã€‚ROCæ›²çº¿å›´æˆçš„é¢ç§¯ç§°ä¹‹ä¸º<strong>AUC</strong>ã€‚ROCè¶Šä¸°æ»¡ï¼ŒAUCè¶Šå¤§ï¼Œæ¨¡å‹çš„åˆ¤åˆ«æ•ˆæœè¶Šå¥½ã€‚</p><p><strong>AUC</strong>åŒæ ·ä¹Ÿå¯åˆ¤æ–­æ¨¡å‹çš„å¥½åã€‚è€Œä¸”AUCå®é™…ä¸Šå¯ä»¥é€šè¿‡æ•°å€¼æ–¹æ³•æ¥è¿‘ä¼¼æ±‚è§£ï¼Œæœ‰å¦‚ä¸‹å…¬å¼ï¼š<script type="math/tex">AUC=\frac{1}{2}\sum_{i=1}^{m-1}(x_{i+1}-x_i)(y_i+y_{i+1})</script></p><p>è‹¥é¢„æµ‹æ­£è¯¯ä»£ä»·ä¸åŒï¼Œå¯å‚è€ƒè¥¿ç“œä¹¦â€œ<strong>ä»£ä»·æ›²çº¿</strong>â€ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚</p><p><strong>å‡è®¾æ£€éªŒ</strong>æ¨¡å—ï¼Œæ•°å­¦å‘³é“å¤ªæµ“ï¼Œå†™æˆåšå®¢å®ç”¨åº¦ä¸é«˜ã€‚è€Œä¸”è¥¿ç“œä¹¦ä¸Šè®²çš„ä¹Ÿä¸ç”šæ˜äº†ï¼ŒçœŸæ­£æƒ³äº†è§£å‡è®¾æ£€éªŒçš„æœ‹å‹ï¼Œå¯å‚è€ƒã€Šç»Ÿè®¡æ¨æ–­ã€‹ä¸€ä¹¦æˆ–å…¶ä»–çš„æ•°ç†ç»Ÿè®¡æ•™æã€‚</p><h3 id="åå·®æ–¹å·®åˆ†è§£-bias-variance-decomposition"><a href="#åå·®æ–¹å·®åˆ†è§£-bias-variance-decomposition" class="headerlink" title="åå·®æ–¹å·®åˆ†è§£ bias variance decomposition"></a>åå·®æ–¹å·®åˆ†è§£ bias variance decomposition</h3><p>è¿™ç§åˆ†è§£å¯ä»¥è§£é‡Šæ³›åŒ–æ€§èƒ½ä¸ºä»€ä¹ˆä¼šä¸‹é™åˆ°ä¸€å®šç¨‹åº¦åä¸Šå‡ï¼Œè¶Šè®­ç»ƒè¶Šå·®ã€‚</p><p>åå·® bias<br>æ–¹å·® var</p><p><script type="math/tex">E(f) = bias^2(x)+var(x)+\epsilon^2</script>ï¼Œæˆ‘ä»¬æƒ³ä»¤Efæœ€å°ã€‚äº‹å®ä¸Šè®­ç»ƒè¶Šå……åˆ†ï¼Œåå·®biasè¶Šå°ï¼Œä½†æ˜¯æ–¹å·®varä¼šæé«˜ã€‚æ‰€ä»¥å¹¶ä¸æ˜¯è®­ç»ƒè¶Šå¤šè¶Šå¥½ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>machine learning</tag>
      
      <tag>model evaluation</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸‰æ˜Ÿç¬”è®°æœ¬å‡çº§ç¡¬ç›˜å®å½•</title>
    <link href="/2019/06/16/%E4%B8%89%E6%98%9F%E7%AC%94%E8%AE%B0%E6%9C%AC%E5%8D%87%E7%BA%A7%E7%A1%AC%E7%9B%98%E5%AE%9E%E5%BD%95/"/>
    <url>/2019/06/16/%E4%B8%89%E6%98%9F%E7%AC%94%E8%AE%B0%E6%9C%AC%E5%8D%87%E7%BA%A7%E7%A1%AC%E7%9B%98%E5%AE%9E%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯ä¸€ç¯‡è£…æœºå®å½•ï¼Œä¸»è¦å†…å®¹æœ‰ï¼š</p><ul><li>ç»™è€å¼ï¼ˆ2014å¹´å·¦å³ï¼‰æ— å…‰é©±ç¬”è®°æœ¬ç”µè„‘å®‰è£…å›ºæ€ç¡¬ç›˜ã€æ‹†å¸æœºæ¢°ç¡¬ç›˜ï¼›</li><li>é‡è£…ç³»ç»Ÿçš„å‘</li><li>å›ºæ€ç¡¬ç›˜ä½“éªŒ</li></ul><h1 id="æ—§æœ¬ç›¼æœ›æ–°ç”Ÿ"><a href="#æ—§æœ¬ç›¼æœ›æ–°ç”Ÿ" class="headerlink" title="æ—§æœ¬ç›¼æœ›æ–°ç”Ÿ"></a>æ—§æœ¬ç›¼æœ›æ–°ç”Ÿ</h1><p>å¾ˆæ—©ä¹‹å‰å°±æƒ³ä¸ºè‡ªå·±çš„å¤è‘£ç¬”è®°æœ¬æå‡ä¸€ä¸‹æ€§èƒ½äº†ã€‚æˆ‘çš„ç¬”è®°æœ¬å‹å·æ˜¯NP370R5V-S02CNï¼Œå±äº2014å¹´é‚£ä¼šå„¿äº§çš„æœºå‹ã€‚i5çš„CPUã€8Gçš„å†…å­˜ï¼ˆå…¶ä¸­æˆ‘é¢å¤–è´­ç½®äº†4Gå†…å­˜æ¡ï¼‰ï¼Œå†åŠ ä¸Š5å¹´çš„ä½¿ç”¨ä¹ æƒ¯ï¼Œè®©æˆ‘å¯¹è¿™å°æœºå™¨è¿˜æ¯”è¾ƒæ»¡æ„ã€‚é™åˆ¶ç¬”è®°æœ¬ç”µè„‘æ€§èƒ½çš„ä¸»è¦ç“¶é¢ˆå°±æ˜¯ç¡¬ç›˜äº†ã€‚</p><p>æˆ‘æ˜¯ä¸€ä¸ªç­‰ç­‰å…šï¼Œå¹³æ—¶ä¹Ÿä¸ä¼šåœ¨è‡ªå·±çš„ç”µè„‘ä¸Šè¿è¡Œç‰¹åˆ«å¤æ‚çš„ç¨‹åºï¼Œå¤§éƒ¨åˆ†éƒ½åœ¨æœåŠ¡å™¨æˆ–è€…å…¬æœ‰äº‘ä¸Šè·‘äº†ã€‚æ‰€ä»¥å¯¹ç¬”è®°æœ¬ç”µè„‘çš„éœ€æ±‚ä¸æ˜¯é‚£ä¹ˆæ€¥åˆ‡ã€‚å›ºæ€2å—é’±1Gçš„æ—¶å€™æˆ‘æ²¡æœ‰å¿ƒåŠ¨ï¼Œ1å—é’±1Gçš„æ—¶å€™æˆ‘è¿˜æ˜¯æ²¡æœ‰å¿ƒåŠ¨ï¼Œä½†æ˜¯æˆ‘çœ‹åˆ°è¥¿æ•°è“ç›˜500Gçš„å›ºæ€åªå–379å…ƒï¼Œè€Œä¸”5å¹´è´¨ä¿æ—¶ï¼Œæˆ‘çœŸçš„æ†‹ä¸ä½äº†ã€‚</p><p>ä¹‹å‰æˆ‘ä¸€ç›´ç”¨çš„æ˜¯windows 7çš„æ“ä½œç³»ç»Ÿï¼Œä¸€ç›´æ²¡æ•¢ä¸Šwindows 10ï¼Œå› ä¸ºå¬è¯´windows 10æŒºåƒæ€§èƒ½çš„ã€‚ç°åœ¨æˆ‘æ‰“ç®—æŠŠåŸæ¥ç¬”è®°æœ¬ç”µè„‘ä¸Šçš„æ•°æ®å¤‡ä»½ä¸€ä¸‹ä¹‹åï¼Œç›´æ¥ä¸Šwindows 10ã€‚å› æ­¤æˆ‘ä¸éœ€è¦è¿›è¡Œç³»ç»Ÿè¿ç§»ï¼Œç›´æ¥é‡è£…ç³»ç»Ÿã€‚</p><h1 id="éƒ¨ä»¶éš¾å ªé‡è´Ÿ"><a href="#éƒ¨ä»¶éš¾å ªé‡è´Ÿ" class="headerlink" title="éƒ¨ä»¶éš¾å ªé‡è´Ÿ"></a>éƒ¨ä»¶éš¾å ªé‡è´Ÿ</h1><h2 id="1-åˆ¶ä½œå¯åŠ¨Uç›˜"><a href="#1-åˆ¶ä½œå¯åŠ¨Uç›˜" class="headerlink" title="1) åˆ¶ä½œå¯åŠ¨Uç›˜"></a>1) åˆ¶ä½œå¯åŠ¨Uç›˜</h2><p>çš„è¿‡ç¨‹ï¼Œæˆ‘å®Œå…¨æŒ‰ç…§ç½‘ä¸Šè¯´çš„ï¼Œå…ˆåˆ°æ ¡å›­ç½‘ä¸‹è½½win10ä¸“ä¸šç‰ˆé•œåƒï¼Œåˆ©ç”¨æˆ‘æ‰‹å¤´ä¸Šçš„16Gç©ºUç›˜å’ŒRufus 3.5è½¯ä»¶ï¼Œå°†ISOé•œåƒæ‹·å…¥Uç›˜ï¼Œæ ¼å¼åŒ–ä¸ºå¯åŠ¨ç›˜ã€‚</p><p>æ­¤å¤„Uç›˜çš„å¤§å°ä¸€èˆ¬8Gä»¥ä¸Šä¸ºå®œã€‚ç°åœ¨æ˜¯2019å¹´ï¼Œå¸‚é¢ä¸Š8Gçš„Uç›˜ç®—å®¹é‡ä¸å¤§çš„äº†ã€‚ä¸çŸ¥é“ä»¥åä¼šä¸ä¼šæ·˜æ±°æ‰ã€‚Rufusæ˜¯å…è´¹è½¯ä»¶ï¼Œç›¸åŒåŠŸèƒ½çš„è½¯ä»¶è¿˜æœ‰UltraISOç­‰ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸è¦ä½¿ç”¨è€æ¯›æ¡ƒç­‰PEï¼Œè™½ç„¶å‚»ç“œå¼å®‰è£…ï¼Œä½†æ˜¯ç³»ç»Ÿä¸çº¯å‡€ã€‚è€Œä¸”è£…ç³»ç»Ÿçš„è¿‡ç¨‹å¹¶ä¸å¤æ‚ï¼Œå¤šè¸©è¸©å‘å°±ç†Ÿæ‚‰äº†ã€‚</p><h2 id="2-æ‹†å¸æ›´æ¢ç¡¬ç›˜"><a href="#2-æ‹†å¸æ›´æ¢ç¡¬ç›˜" class="headerlink" title="2) æ‹†å¸æ›´æ¢ç¡¬ç›˜"></a>2) æ‹†å¸æ›´æ¢ç¡¬ç›˜</h2><p>æˆ‘çš„ç¬”è®°æœ¬ä¼¼ä¹åœ¨è®¾è®¡çš„æ—¶å€™å°±æ–™åˆ°äº†ç”¨æˆ·ä¼šæ·»åŠ å†…å­˜æ¡å’Œæ›´æ¢ç¡¬ç›˜ï¼Œå› æ­¤åŒ…è£¹ç¡¬ç›˜å’Œå†…å­˜åŒºåŸŸçš„å¤–å£³ä¸ä¸»æ¿æ˜¯åˆ†å¼€çš„ï¼Œåªéœ€æ‹†å¸ä¸€é¢—èºä¸ï¼Œå³å¯å°†ç¡¬ç›˜ä½å’Œå†…å­˜ä½æš´éœ²å‡ºæ¥ã€‚è¿™ç»™æˆ‘çš„æ‹†å¸è¿‡ç¨‹å‡å°‘äº†å¾ˆå¤šéº»çƒ¦ã€‚</p><p>å…³æœºï¼Œæ‹†åç›–ï¼Œè¿ç”µæ± éƒ½ä¸ç”¨æ‹†å¸ï¼Œç›´æ¥æŠŠç¡¬ç›˜å›ºå®šä½çš„å››é¢—èºä¸æ‹§ä¸‹æ¥ï¼Œæ¢ä¸Šå›ºæ€ï¼Œç¾æ»‹æ»‹ã€‚</p><p>å°†æ‹†å¸ä¸‹æ¥çš„æœºæ¢°ç¡¬ç›˜æ”¾åœ¨æˆ‘ä¹°çš„ç¡¬ç›˜ç›’é‡Œé¢ï¼ˆ25å…ƒï¼‰ï¼Œå¤§å°åˆšåˆšåˆé€‚ï¼ˆ2.5å¯¸ï¼‰ã€‚æ²‰ç”¸ç”¸çš„ï¼Œé‡Œé¢å­˜äº†ä¸å°‘æ•°æ®ã€dogeã€‘ã€‚</p><p>å¼€å§‹é‡è£…ç³»ç»Ÿã€‚ç°åœ¨çš„å›ºæ€ç¡¬ç›˜æ˜¯ç©ºçš„ï¼Œé‡Œé¢æ²¡æœ‰ç³»ç»Ÿã€‚æ’å…¥Uç›˜ï¼ŒæŒ‰ä¸‹ç”µæºé”®åæŒ‰F2è¿›å…¥BIOSæ¨¡å¼ã€‚è¿™é‡Œå¼€å§‹å°±æœ‰å‘äº†ã€‚</p><h2 id="3-æ›´æ–°æ“ä½œç³»ç»Ÿ"><a href="#3-æ›´æ–°æ“ä½œç³»ç»Ÿ" class="headerlink" title="3) æ›´æ–°æ“ä½œç³»ç»Ÿ"></a>3) æ›´æ–°æ“ä½œç³»ç»Ÿ</h2><p>é¦–å…ˆæˆ‘å‡†å¤‡å®‰è£…çš„æ˜¯win10ï¼ŒåŸæ¥å®‰è£…çš„æ˜¯win7ã€‚win7çš„ç£ç›˜å¼•å¯¼æ˜¯MBRæ–¹å¼ï¼Œè€Œæœ€æ–°çš„å¼•å¯¼æ–¹å¼æ˜¯UEFIï¼Œè¿™ä¸¤ç§ç£ç›˜æ ¼å¼åŒ–æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¹Ÿåªæœ‰å½“ç£ç›˜é‡Œæ²¡æœ‰ä»»ä½•æ•°æ®çš„ä¸€å¼€å§‹ï¼Œæˆ‘æ•¢å°†ç£ç›˜çš„å¼•å¯¼æ–¹å¼ä¿®æ”¹ä¸€ä¸‹ï¼Œæ¢ä½œåŸæ¥æˆ‘çœŸçš„å®³æ€•ç¨å¾®æ“ä½œæ•°æ®å°±æ²¡äº†ã€‚æ‰€ä»¥æˆ‘è¿›è¡Œäº†å¦‚ä¸‹è®¾ç½®ï¼š</p><ul><li>å°†Security Bootå…³é—­</li><li>å°†AHCIå¼•å¯¼æ¢æˆUEFIå¯åŠ¨</li><li>Boot Modeæ¢æˆUEFI only<br>ä¸€é¡¿æ“ä½œï¼Œwin10å®‰è£…å®Œæˆäº†ï¼Œå“ˆå“ˆå“ˆã€‚ä»¤æˆ‘æ²¡æƒ³åˆ°çš„äº‹æƒ…æ¥äº†ï¼</li></ul><h2 id="4-ç”µè„‘å—ä¸äº†Windows-10"><a href="#4-ç”µè„‘å—ä¸äº†Windows-10" class="headerlink" title="4) ç”µè„‘å—ä¸äº†Windows 10"></a>4) ç”µè„‘å—ä¸äº†Windows 10</h2><p>å®‰è£…win10åï¼Œå›ºæ€ç¡¬ç›˜çš„å¥½å¤„æ˜¾ç°å‡ºæ¥äº†ï¼Œä»»ä½•ä¸œè¥¿éƒ½æ˜¯ç§’å¼€ï¼Œå»¶è¿Ÿå¤§å¤§çš„é™ä½äº†ã€‚å°±åœ¨æˆ‘äº«å—å„ç§æ“ä½œçš„æ—¶å€™ï¼Œçªç„¶ç”µè„‘å¡ä½äº†ã€‚</p><p>å°±æ˜¯å¡æ­»åœ¨ä¸€ç¬é—´ï¼Œé¼ æ ‡éƒ½ä¸èƒ½åŠ¨äº†ã€‚ç­‰äº†å¥½ä¹…ä¹Ÿæ²¡ç”¨ï¼Œæˆ‘é•¿æŒ‰ç”µæºé”®å¼ºåˆ¶å…³æœºåå†å¯åŠ¨ï¼Œæ²¡ç”¨ï¼Œè¿‡ä¸€ä¼šå„¿è¿˜æ˜¯æ­»æœºã€‚</p><p>æˆ‘æ€€ç–‘æ˜¯ä¸æ˜¯æˆ‘çš„ç”µè„‘å…¶ä»–éƒ¨ä»¶å¤ªè¿‡å¤è€äº†ï¼Ÿå½“æ—¶çš„é£æ‰‡å¹å‡ºæ¥çš„é£éƒ½çƒ«æ‰‹ã€‚ä½†æ˜¯å½“æˆ‘æ”¾å‡‰ä¹‹åå†æ¬¡å¼€æœºï¼Œè¿˜æ˜¯ä¼šæ¯«æ— å¾å…†åœ°æ­»æœºã€‚</p><p>æˆ‘æ€€ç–‘æ˜¯ä¸æ˜¯æˆ‘å®‰è£…çš„è½¯ä»¶é‡Œé¢æœ‰ä¸å…¼å®¹çš„é©±åŠ¨ï¼Ÿæœ‰å¯èƒ½æ˜¯æ˜¾å¡é©±åŠ¨ä¹‹ç±»çš„ã€‚å› ä¸ºä¸‰æ˜Ÿå®˜ç½‘å…³äºæˆ‘è¿™ä¸ªæœºå‹çš„é©±åŠ¨ï¼Œæœ€å¤šæ”¯æŒåˆ°win7ã€‚</p><p>å„ç§åŸå› éƒ½æŸ¥äº†ä¸ªéï¼Œä¸€ä¸‹åˆè¿‡å»äº†ï¼Œä¸€æ™šä¸Šè¿‡å»äº†ï¼Œæˆ‘è¿˜æ˜¯æ²¡èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ€»ä¸èƒ½æ˜¯å›ºæ€çš„é—®é¢˜å§ï¼Ÿ</p><p>æˆ‘è®¤çœŸçš„æ€è€ƒäº†ä¸€ä¸‹ï¼Œè¥¿éƒ¨æ•°æ®è“ç›˜ï¼Œæ‰“æŠ˜å‡ºå”®ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å–ç»™æˆ‘äº†åŠ£è´¨ç›˜ã€‚ä½†æ˜¯æˆ‘ç°åœ¨æ²¡åŠæ³•å®‰è£…ç£ç›˜æ£€æµ‹è½¯ä»¶ï¼Œä¸€å¼€ç”µè„‘å°±æ­»æœºã€‚</p><h2 id="5-æ‚²ä¼¤åœ°æ¢å›windows-7"><a href="#5-æ‚²ä¼¤åœ°æ¢å›windows-7" class="headerlink" title="5) æ‚²ä¼¤åœ°æ¢å›windows 7"></a>5) æ‚²ä¼¤åœ°æ¢å›windows 7</h2><p>äºæ˜¯æˆ‘å†³å®šï¼Œé‡æ–°å®‰è£…å›win7ï¼Œå¦‚æœèƒ½ç”¨å°±ä¸æŠ˜è…¾äº†ã€‚</p><p>ä¸‹è½½win7é•œåƒï¼Œä½¿ç”¨rufusåˆ¶ä½œå¯åŠ¨ç›˜ï¼Œæ­¤æ—¶çš„åˆ†åŒºæ ¼å¼å°±é€‰æ‹©mbrå¥½äº†ã€‚æˆ‘å¦¥åäº†ï¼ä¸æŠ˜è…¾äº†ã€‚</p><p>ä¸€å¦‚æ—¢å¾€åœ°ä¿®æ”¹BIOSï¼ŒBootModeæ”¹æˆLegacyã€‚win7ä¸€ä¼šå„¿å°±å®‰è£…å¥½äº†ã€‚æ²¡æœ‰å…¶ä»–çš„é—®é¢˜ã€‚</p><p>çœŸæ˜¯é‚ªäº†é—¨äº†ï¼Œè€Œä¸”ç”¨win7å‘çƒ­çš„ç°è±¡ä¹Ÿç¼“è§£äº†å¾ˆå¤šï¼</p><p>çœ‹æ¥çœŸçš„æ˜¯ï¼Œç»™è€ç”µè„‘æ›´æ¢ä¸€ä¸ªæ–°å›ºæ€ï¼Œå¥½æ¯”æ˜¯ç»™è€å¹´äººæ›´æ¢å¹´è½»äººçš„å¿ƒè„ï¼Œå¿ƒæœ‰ä½™è€ŒåŠ›ä¸è¶³å•Šï¼</p><h1 id="ä½“éªŒå›ºæ€ç¡¬ç›˜"><a href="#ä½“éªŒå›ºæ€ç¡¬ç›˜" class="headerlink" title="ä½“éªŒå›ºæ€ç¡¬ç›˜"></a>ä½“éªŒå›ºæ€ç¡¬ç›˜</h1><p>ä¸Šæ¬¡æœ‰è¿™ç§æ€§èƒ½å¤§å¹…åº¦ç¨³å®šæå‡ä¸€ä¸ªæ¡£æ¬¡çš„æ„Ÿè§‰çš„æ—¶å€™ï¼Œæ˜¯è¿™å°ç”µè„‘å®‰è£…æ–°çš„å†…å­˜æ¡ä¹‹åã€‚è¯»å†™é€Ÿåº¦çœŸçš„æ˜¯é™åˆ¶ç›®å‰æ€§èƒ½çš„ä¸€å¤§ç“¶é¢ˆã€‚</p><p>ç”±äºæˆ‘çš„å†…éƒ¨æ¥å£æ˜¯SATA 2ï¼Œæ‰€ä»¥æ— æ³•å‘æŒ¥SATA 3æ¥å£çš„è¥¿æ•°è“ç›˜çš„å…¨éƒ¨å¨åŠ›ã€‚ä¸è¿‡è¿™ä¹Ÿåœ¨æˆ‘çš„è®¡ç®—ä¹‹ä¸­äº†ï¼Œå› ä¸ºç›¸å¯¹äºHDDï¼ŒSSDå¸¦æ¥çš„æå‡å®åœ¨æ˜¯å¤©å£¤ä¹‹åˆ«ã€‚</p><p><img src="/2019/06/16/%E4%B8%89%E6%98%9F%E7%AC%94%E8%AE%B0%E6%9C%AC%E5%8D%87%E7%BA%A7%E7%A1%AC%E7%9B%98%E5%AE%9E%E5%BD%95/2019-06-19-19-01-03.png" alt></p><p>ç­‰åˆ°è€å¨˜ä»Šåæœ‰é’±äº†ï¼Œè¿™ä¸ªç¡¬ç›˜è¿˜èƒ½æ‹†ä¸‹æ¥é‡å¤åˆ©ç”¨ï¼Œå²‚ä¸æ˜¯ç¾æ»‹æ»‹ã€‚</p><p>æœ¬æ¥å¯»æ€ç»™è¿™ç¯‡æ–‡ç« åŠ ç‚¹å›¾ï¼Œç®—å•¦ï¼Œåæ­£ä¹Ÿä¸æ˜¯ä»€ä¹ˆæˆåŠŸç»éªŒã€‚</p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hardware</tag>
      
      <tag>SSD</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é«˜çº§æ“ä½œç³»ç»Ÿâ€”â€”åˆ†å¸ƒå¼ç³»ç»Ÿâ€”â€”è¯¾ç¨‹è®¾è®¡ä¸å®ç°</title>
    <link href="/2019/06/15/%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/"/>
    <url>/2019/06/15/%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="å®éªŒäºŒ"><a href="#å®éªŒäºŒ" class="headerlink" title="å®éªŒäºŒ"></a>å®éªŒäºŒ</h1><h2 id="ä¸€ã€å®éªŒç›®çš„"><a href="#ä¸€ã€å®éªŒç›®çš„" class="headerlink" title="ä¸€ã€å®éªŒç›®çš„"></a>ä¸€ã€å®éªŒç›®çš„</h2><p>å°è¯•å®ç°ä¸€ä¸ªæ— è¿æ¥çš„æ•°æ®æŠ¥Socketè¿›ç¨‹é—´é€šä¿¡ï¼ˆUDPï¼‰</p><h2 id="äºŒã€å®éªŒå†…å®¹"><a href="#äºŒã€å®éªŒå†…å®¹" class="headerlink" title="äºŒã€å®éªŒå†…å®¹"></a>äºŒã€å®éªŒå†…å®¹</h2><ol><li>åˆ›å»ºä¸¤ä¸ªè¿›ç¨‹ï¼Œä½¿ç”¨æ— é“¾æ¥çš„æ•°æ®æŠ¥Socketå®ç°äº¤æ¢ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ä¸€ä¸ªå«åšSender.java ï¼Œç”¨äºå‘ä¸€ä¸ªåä¸ºReceiver.javaçš„è¿›ç¨‹å‘é€ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</li><li>Sender.javaéœ€è¦ä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°ï¼Œç”¨äºè¡¨ç¤ºä¼ é€’æ¶ˆæ¯çš„ç«¯å£å·.</li><li>Receiver.java éœ€è¦ä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°ç”¨äºè¡¨ç¤ºæ¥å—æ¶ˆæ¯çš„ç«¯å£å·ã€‚</li><li>æ¥å—æ–¹éœ€è¦é˜»å¡ç›´åˆ°ä»å‘é€æ–¹æ”¶åˆ°ä¸€ä¸ªæ¶ˆæ¯ã€‚å¦‚æœå‘é€æ”¾åœ¨æ¥å—è¿è¡Œä¹‹å‰å‘é€å‡ºæ¶ˆæ¯ï¼Œæ¶ˆæ¯ä¼šä¸¢å¤±ã€‚è¿™ç§æƒ…å†µåœ¨æ­¤å®éªŒä¸­æ˜¯å…è®¸çš„ã€‚</li><li>æ¶ˆæ¯ç¼“å†²å¯ä»¥æ˜¯å®šé•¿çš„ã€‚å¦‚æœå‘é€çš„æ¶ˆæ¯æ¯”æ¶ˆæ¯ç¼“å†²é•¿ï¼Œæ¥å—æ–¹å°±çœ‹ä¸åˆ°å®Œæ•´çš„æ¶ˆæ¯ã€‚è¿™ç§æƒ…å†µåœ¨æ­¤å®éªŒä¸­æ˜¯å…è®¸çš„ã€‚ä¾‹å¦‚ï¼Œæ¶ˆæ¯ç¼“å†²çš„é•¿åº¦æ˜¯5ï¼Œè€Œå‘é€æ–¹å‘é€ä¸€ä¸ªæ¶ˆæ¯ â€œ123456789â€ï¼Œåˆ™æ¥å—æ–¹åªèƒ½çœ‹åˆ°â€œ12345â€ã€‚</li></ol><h2 id="ä¸‰ã€å®éªŒè®¾è®¡"><a href="#ä¸‰ã€å®éªŒè®¾è®¡" class="headerlink" title="ä¸‰ã€å®éªŒè®¾è®¡"></a>ä¸‰ã€å®éªŒè®¾è®¡</h2><h3 id="å®éªŒèƒŒæ™¯ï¼š"><a href="#å®éªŒèƒŒæ™¯ï¼š" class="headerlink" title="å®éªŒèƒŒæ™¯ï¼š"></a>å®éªŒèƒŒæ™¯ï¼š</h3><p><strong>UDPç®€ä»‹</strong></p><p><a href="https://blog.csdn.net/qq_23473123/article/details/51464272">JAVA Socket å®ç° UDP ç¼–ç¨‹</a></p><p>UDPåè®®å…¨ç§°æ˜¯ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼Œåœ¨ç½‘ç»œä¸­å®ƒä¸TCPåè®®ä¸€æ ·ç”¨äºå¤„ç†æ•°æ®åŒ…ï¼Œæ˜¯ä¸€ç§æ— è¿æ¥çš„åè®®ã€‚åœ¨OSIæ¨¡å‹ä¸­ï¼Œåœ¨ç¬¬å››å±‚â€”â€”ä¼ è¾“å±‚ï¼Œå¤„äºIPåè®®çš„ä¸Šä¸€å±‚ã€‚UDPæœ‰ä¸æä¾›æ•°æ®åŒ…åˆ†ç»„ã€ç»„è£…å’Œä¸èƒ½å¯¹æ•°æ®åŒ…è¿›è¡Œæ’åºçš„ç¼ºç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æŠ¥æ–‡å‘é€ä¹‹åï¼Œæ˜¯æ— æ³•å¾—çŸ¥å…¶æ˜¯å¦å®‰å…¨å®Œæ•´åˆ°è¾¾çš„ã€‚UDPç”¨æ¥æ”¯æŒé‚£äº›éœ€è¦åœ¨è®¡ç®—æœºä¹‹é—´ä¼ è¾“æ•°æ®çš„ç½‘ç»œåº”ç”¨ã€‚åŒ…æ‹¬ç½‘ç»œè§†é¢‘ä¼šè®®ç³»ç»Ÿåœ¨å†…çš„ä¼—å¤šçš„å®¢æˆ·/æœåŠ¡å™¨æ¨¡å¼çš„ç½‘ç»œåº”ç”¨éƒ½éœ€è¦ä½¿ç”¨UDPåè®®ã€‚</p><p>UDPåè®®çš„ä¸»è¦ä½œç”¨æ˜¯å°†ç½‘ç»œæ•°æ®æµé‡å‹ç¼©æˆæ•°æ®åŒ…çš„å½¢å¼ã€‚ä¸€ä¸ªå…¸å‹çš„æ•°æ®åŒ…å°±æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ•°æ®çš„ä¼ è¾“å•ä½ã€‚æ¯ä¸€ä¸ªæ•°æ®åŒ…çš„å‰8ä¸ªå­—èŠ‚ç”¨æ¥åŒ…å«æŠ¥å¤´ä¿¡æ¯ï¼Œå‰©ä½™å­—èŠ‚åˆ™ç”¨æ¥åŒ…å«å…·ä½“çš„ä¼ è¾“æ•°æ®ã€‚</p><p><strong>ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨UDPï¼š</strong><br>å½“å¯¹ç½‘ç»œé€šè®¯è´¨é‡è¦æ±‚ä¸é«˜çš„æ—¶å€™ï¼Œè¦æ±‚ç½‘ç»œé€šè®¯é€Ÿåº¦èƒ½å°½é‡çš„å¿«ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨UDPã€‚ </p><p>æ¯”å¦‚ï¼Œæ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œå¸¸è§ä½¿ç”¨UDPåè®®çš„åº”ç”¨å¦‚ä¸‹ï¼š</p><p>QQè¯­éŸ³ã€QQè§†é¢‘â€¦â€¦</p><p><strong>Javaä¸­çš„UDP</strong></p><p>åœ¨Javaä¸­ï¼Œå®ç°UDPè¿æ¥å’Œæ•°æ®ä¼ è¾“çš„ç±»ä¸»è¦æ˜¯DatagramPacketå’ŒDatagramSocketã€‚</p><p>DatagramSocketç±»è¡¨ç¤ºç”¨æ¥å‘é€å’Œæ¥æ”¶æ•°æ®æŠ¥åŒ…çš„å¥—æ¥å­—ã€‚</p><p>æ•°æ®æŠ¥å¥—æ¥å­—æ˜¯åŒ…æŠ•é€’æœåŠ¡çš„å‘é€æˆ–æ¥æ”¶ç‚¹ã€‚æ¯ä¸ªåœ¨æ•°æ®æŠ¥å¥—æ¥å­—ä¸Šå‘é€æˆ–æ¥æ”¶çš„åŒ…éƒ½æ˜¯å•ç‹¬ç¼–å€å’Œè·¯ç”±çš„ã€‚ä»ä¸€å°æœºå™¨å‘é€åˆ°å¦ä¸€å°æœºå™¨çš„å¤šä¸ªåŒ…å¯èƒ½é€‰æ‹©ä¸åŒçš„è·¯ç”±ï¼Œä¹Ÿå¯èƒ½æŒ‰ä¸åŒçš„é¡ºåºåˆ°è¾¾ã€‚</p><p>åœ¨ DatagramSocket ä¸Šæ€»æ˜¯å¯ç”¨ UDP å¹¿æ’­å‘é€ã€‚åœ¨æ¥æ”¶ç«¯ï¼ˆReceiverï¼‰ï¼ŒDatagramSocketåªéœ€è¾“å…¥ç©ºé—²ç«¯å£å³å¯åˆå§‹åŒ–å¯¹è±¡ã€‚åœ¨æ¶ˆæ¯å‘é€ç«¯ï¼ˆSenderï¼‰ï¼ŒDatagramSocketä¸éœ€è¦ä»»ä½•å‚æ•°åˆå§‹åŒ–ï¼Œç›´æ¥æ–°å»ºå¯¹è±¡ã€‚</p><p>DatagramSocketå¯¹è±¡æ‹¥æœ‰send()å’Œreceive()æ–¹æ³•ï¼Œå‚æ•°æ˜¯DatagramPacketå¯¹è±¡ï¼Œå³å‘é€å’Œæ¥æ”¶æ•°æ®åŒ…ã€‚</p><p>DatagramPacketç±»è¡¨ç¤ºæ•°æ®æŠ¥åŒ…ã€‚</p><p>æ•°æ®æŠ¥åŒ…ç”¨æ¥å®ç°æ— è¿æ¥åŒ…æŠ•é€’æœåŠ¡ã€‚æ¯æ¡æŠ¥æ–‡ä»…æ ¹æ®è¯¥åŒ…ä¸­åŒ…å«çš„ä¿¡æ¯ä»ä¸€å°æœºå™¨è·¯ç”±åˆ°å¦ä¸€å°æœºå™¨ã€‚ä»ä¸€å°æœºå™¨å‘é€åˆ°å¦ä¸€å°æœºå™¨çš„å¤šä¸ªåŒ…å¯èƒ½é€‰æ‹©ä¸åŒçš„è·¯ç”±ï¼Œä¹Ÿå¯èƒ½æŒ‰ä¸åŒçš„é¡ºåºåˆ°è¾¾ã€‚ä¸å¯¹åŒ…æŠ•é€’åšå‡ºä¿è¯ã€‚</p><p>å‘é€æ–¹ï¼ˆsenderï¼‰è¦è´Ÿè´£åœ¨æ•°æ®æŠ¥åŒ…ä¸Šé¢è´´å¥½æ ‡ç­¾ï¼Œæ³¨æ˜æ”¶ä¿¡äººï¼ˆåœ°å€å’Œç«¯å£ï¼‰ï¼Œè¿™æ ·æ‰èƒ½å¤Ÿå‡†ç¡®åœ°è¢«æ”¶ä¿¡äººï¼ˆreceiverï¼‰æ”¶åˆ°ã€‚</p><p>åœ¨DatagramPacketåŒ…ä¸­çš„å‡½æ•° int getLength()è¿”å›å®é™…æ¥å—çš„å­—èŠ‚æ•°ï¼Œ<br>byte[] getData()è¿”å›æ¥å—åˆ°çš„æ•°æ®ã€‚</p><p>è¦æƒ³æ¥å—ç«¯ç»™å‘é€ç«¯å›ä¿¡æ¯ï¼Œå°±éœ€è¦çŸ¥é“å‘é€ç«¯çš„IPåœ°å€InetAddress getAddress()å’Œå‘é€ç«¯è¿›ç¨‹æ‰€ç»‘å®šçš„ç«¯å£å·int getPort()ã€‚</p><p>æ•°æ®æŠ¥å¥—æ¥å­—å‘é€æˆåŠŸä¹‹åï¼Œå°±ç›¸å½“äºå»ºç«‹äº†ä¸€ä¸ªè™šè¿æ¥ï¼ŒåŒæ–¹å¯ä»¥å‘é€æ•°æ®ã€‚</p><h3 id="å®éªŒç¯å¢ƒï¼š"><a href="#å®éªŒç¯å¢ƒï¼š" class="headerlink" title="å®éªŒç¯å¢ƒï¼š"></a>å®éªŒç¯å¢ƒï¼š</h3><p>Intellij IDEA, JDK 1.8, Windows 10</p><h3 id="å®éªŒæ€è·¯ï¼š"><a href="#å®éªŒæ€è·¯ï¼š" class="headerlink" title="å®éªŒæ€è·¯ï¼š"></a>å®éªŒæ€è·¯ï¼š</h3><ol><li>æ–°å»ºä¸¤ä¸ªç±»ï¼ŒSenderå’ŒReceiverã€‚ç”±äºé€»è¾‘ç®€å•ï¼Œå…·ä½“ä»£ç å¯ç›´æ¥åœ¨mainä¸­å®ç°ï¼›</li><li>Senderå’ŒReceiverç±»éœ€è¦æ¥æ”¶å‘½ä»¤è¡Œå‚æ•°ï¼Œå¯åˆ©ç”¨Intellij IDEAçš„ç±»è¿è¡Œè®¾ç½®æ¥è¾“å…¥å‚æ•°ï¼Œåˆ©ç”¨mainå‡½æ•°çš„argså‚æ•°æ¥ä¼ é€’å‘½ä»¤è¡Œå‚æ•°ï¼Œé¿å…äº†æ“ä½œå‘½ä»¤è¡Œç•Œé¢çš„ä¸ä¾¿ï¼›<br><img src="/2019/06/15/%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/2019-06-15-16-36-58.png" alt><br><img src="/2019/06/15/%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/2019-06-15-16-37-07.png" alt></li><li>Senderï¼šå®šä¹‰åœ°å€ã€ç«¯å£å·ã€æ•°æ®ï¼›åˆ›å»ºæ•°æ®æŠ¥åŒ…ï¼ŒåŒ…å«å‘é€çš„æ•°æ®ä¿¡æ¯ï¼›åˆ›å»ºDatagramSocketå¯¹è±¡ï¼›å‘æœåŠ¡å™¨å‘é€æ•°æ®æŠ¥åŒ…ã€‚</li><li>Receiverï¼šåˆ›å»ºæœåŠ¡å™¨ç«¯DatagramSocketï¼ŒæŒ‡å®šç«¯å£ï¼›åˆ›å»ºæ•°æ®æŠ¥ï¼Œç”¨äºæ¥æ”¶å®¢æˆ·ç«¯å‘é€çš„æ•°æ®ï¼›æ¥æ”¶å®¢æˆ·ç«¯å‘é€çš„æ•°æ®ï¼›è¯»å–æ•°æ®ã€‚</li></ol><h3 id="ç›¸å…³ä»£ç ï¼š"><a href="#ç›¸å…³ä»£ç ï¼š" class="headerlink" title="ç›¸å…³ä»£ç ï¼š"></a>ç›¸å…³ä»£ç ï¼š</h3><p><code>Sender.java</code></p><pre><code class="lang-java">public class Sender &#123;    public static void main(String[] args) throws IOException &#123;        /*         * å‘Receiverå‘é€æ•°æ®         * java Sender 192.168.1.101 12 hello         */        // 1.å®šä¹‰æœåŠ¡å™¨çš„åœ°å€ã€ç«¯å£å·ã€æ•°æ®        if (args.length != 3) &#123;            System.out.println(&quot;å‚æ•°ä¸ªæ•°ä¸æ­£ç¡®ï¼&quot; + args.length);            return;        &#125;        System.out.println(args[0]);        System.out.println(args[1]);        System.out.println(args[2]);        InetAddress address = InetAddress.getByName(args[0]);        //InetAddress address = InetAddress.getByName(&quot;localhost&quot;);        int port = Integer.parseInt(args[1]);        byte[] data = args[2].getBytes();        // 2.åˆ›å»ºæ•°æ®æŠ¥ï¼ŒåŒ…å«å‘é€çš„æ•°æ®ä¿¡æ¯        DatagramPacket packet = new DatagramPacket(data, data.length, address, port);        // 3.åˆ›å»ºDatagramSocketå¯¹è±¡        DatagramSocket socket = new DatagramSocket();        // 4.å‘æœåŠ¡å™¨ç«¯å‘é€æ•°æ®æŠ¥        socket.send(packet);    &#125;&#125;</code></pre><p><code>Receiver.java</code></p><pre><code class="lang-java">public class Receiver &#123;    /*     * æ¥æ”¶Senderå‘é€çš„æ•°æ®     * java Receiver 12     */    public static void main(String[] args) throws IOException &#123;        // è®¾ç½®ç¼“å†²åŒºå¤§å°        int bufferLength = 5;        // è®¾ç½®å‚æ•°æ ¼å¼        if (args.length != 1) &#123;            System.out.println(&quot;å‚æ•°ä¸ªæ•°ä¸æ­£ç¡®ï¼&quot; + args.length);            return;        &#125;        // 1.åˆ›å»ºæœåŠ¡å™¨ç«¯DatagramSocketï¼ŒæŒ‡å®šç«¯å£        DatagramSocket socket = new DatagramSocket(Integer.parseInt(args[0]));        // 2.åˆ›å»ºæ•°æ®æŠ¥ï¼Œç”¨äºæ¥æ”¶å®¢æˆ·ç«¯å‘é€çš„æ•°æ®        byte[] data = new byte[bufferLength];        DatagramPacket packet = new DatagramPacket(data, data.length);        // 3.æ¥æ”¶å®¢æˆ·ç«¯å‘é€çš„æ•°æ®        System.out.println(&quot;****æœåŠ¡å™¨ç«¯å·²ç»å¯åŠ¨ï¼Œç­‰å¾…å®¢æˆ·ç«¯å‘é€æ•°æ®&quot;);        socket.receive(packet);// æ­¤æ–¹æ³•åœ¨æ¥æ”¶åˆ°æ•°æ®æŠ¥ä¹‹å‰ä¼šä¸€ç›´é˜»å¡        // 4.è¯»å–æ•°æ®        String info = new String(data, 0, packet.getLength());        System.out.println(&quot;æˆ‘æ˜¯æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯è¯´ï¼š&quot; + info);    &#125;&#125;</code></pre><h2 id="å››ã€å®éªŒç»“æœä¸åˆ†æ"><a href="#å››ã€å®éªŒç»“æœä¸åˆ†æ" class="headerlink" title="å››ã€å®éªŒç»“æœä¸åˆ†æ"></a>å››ã€å®éªŒç»“æœä¸åˆ†æ</h2><p>ç¼–è¯‘è¿‡ç¨‹ç•¥å»ã€‚</p><ol><li>è¿è¡ŒReciever<br><img src="/2019/06/15/%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/2019-06-15-16-53-22.png" alt></li><li>è¿è¡ŒSender<br><img src="/2019/06/15/%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/2019-06-15-16-54-43.png" alt></li><li>æ­¤æ—¶çš„Receiver<br><img src="/2019/06/15/%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/2019-06-15-16-55-10.png" alt></li></ol><h3 id="å®éªŒåˆ†æï¼š"><a href="#å®éªŒåˆ†æï¼š" class="headerlink" title="å®éªŒåˆ†æï¼š"></a>å®éªŒåˆ†æï¼š</h3><p>ç¼“å†²åŒºå¤§å°å¯ä»¥ä¿®æ”¹ã€‚ä¿®æ”¹åçš„ç¼“å†²åŒºå¤§å°ä¸º5ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒSenderä¸­çš„æ¶ˆæ¯<code>Hello!</code>å‘é€ç»™Receiveråï¼Œå°¾éƒ¨çš„æ„Ÿå¹å·è¢«å‰Šå»ã€‚</p><p>é€šè¿‡æœ¬æ¬¡å®éªŒï¼Œæˆ‘äº†è§£äº†UDPè¿æ¥çš„åŸç†ä¸ä¼˜ç¼ºç‚¹ï¼ŒæŒæ¡äº†åœ¨Javaä¸­å»ºç«‹UDPè¿æ¥çš„æ–¹æ³•ã€‚</p><hr><h1 id="å®éªŒä¸‰"><a href="#å®éªŒä¸‰" class="headerlink" title="å®éªŒä¸‰"></a>å®éªŒä¸‰</h1><h2 id="ä¸€ã€å®éªŒç›®çš„-1"><a href="#ä¸€ã€å®éªŒç›®çš„-1" class="headerlink" title="ä¸€ã€å®éªŒç›®çš„"></a>ä¸€ã€å®éªŒç›®çš„</h2><p>å°è¯•é€šè¿‡é¢å‘æµæ¨¡å¼çš„socketå®ç°é€šä¿¡ã€‚</p><h2 id="äºŒã€å®éªŒå†…å®¹-1"><a href="#äºŒã€å®éªŒå†…å®¹-1" class="headerlink" title="äºŒã€å®éªŒå†…å®¹"></a>äºŒã€å®éªŒå†…å®¹</h2><ol><li>åˆ›å»ºä¸€ä¸ªåä¸ºAcceptor.javaçš„ç¨‹åºã€‚æ­¤ç¨‹åºå¯ä»¥æ¥å—ä¸€ä¸ªè¿æ¥å¹¶ç”¨æµæ¨¡å¼socketæ¥å—ä¸€ä¸ªæ¶ˆæ¯ã€‚åˆ›å»ºä¸€ä¸ªåä¸º Requestor.java çš„ç¨‹åºã€‚æ­¤ç¨‹åºå¯ä»¥è¯·æ±‚ä¸€ä¸ªè¿æ¥ï¼Œå¹¶ä½¿ç”¨æµæ¨¡å¼socketã€‚</li><li>Acceptor.java æœ‰2ä¸ªå‘½ä»¤è¡Œå‚æ•°ï¼Œåˆ†åˆ«ç”¨äºè¡¨ç¤ºæœ¬è¿›ç¨‹ä½¿ç”¨çš„æœåŠ¡å™¨socketçš„ç«¯å£å·ï¼Œä»¥åŠè¦å‘é€çš„æ¶ˆæ¯ã€‚</li><li>Requestor.java æœ‰2ä¸ªå‘½ä»¤è¡Œå‚æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºè¿æ¥acceptorçš„ä¸»æœºåå’Œè¿æ¥acceptorçš„ç«¯å£å·ã€‚</li></ol><h2 id="ä¸‰ã€å®éªŒè®¾è®¡-1"><a href="#ä¸‰ã€å®éªŒè®¾è®¡-1" class="headerlink" title="ä¸‰ã€å®éªŒè®¾è®¡"></a>ä¸‰ã€å®éªŒè®¾è®¡</h2><h3 id="å®éªŒèƒŒæ™¯ï¼š-1"><a href="#å®éªŒèƒŒæ™¯ï¼š-1" class="headerlink" title="å®éªŒèƒŒæ™¯ï¼š"></a>å®éªŒèƒŒæ™¯ï¼š</h3><p><a href="https://blog.csdn.net/qq_23473123/article/details/51461894">Java é€šè¿‡ Socket å®ç° TCP ç¼–ç¨‹</a></p><p><strong>TCPç®€ä»‹</strong></p><p>TCPï¼ˆTransmission Control Protocol ä¼ è¾“æ§åˆ¶åè®®ï¼‰æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚</p><p><strong>Java Socketç®€ä»‹</strong></p><p>æ‰€è°“socket é€šå¸¸ä¹Ÿç§°ä½œâ€å¥—æ¥å­—â€œï¼Œç”¨äºæè¿°IPåœ°å€å’Œç«¯å£ï¼Œæ˜¯ä¸€ä¸ªé€šä¿¡é“¾çš„å¥æŸ„ã€‚åº”ç”¨ç¨‹åºé€šå¸¸é€šè¿‡â€å¥—æ¥å­—â€å‘ç½‘ç»œå‘å‡ºè¯·æ±‚æˆ–è€…åº”ç­”ç½‘ç»œè¯·æ±‚ã€‚</p><p>ServerSocketç”¨äºæœåŠ¡å™¨ç«¯ï¼ŒSocketæ˜¯å»ºç«‹ç½‘ç»œè¿æ¥æ—¶ä½¿ç”¨çš„ã€‚åœ¨è¿æ¥æˆåŠŸæ—¶ï¼Œåº”ç”¨ç¨‹åºä¸¤ç«¯éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªSocketå®ä¾‹ï¼Œæ“ä½œè¿™ä¸ªå®ä¾‹ï¼Œå®Œæˆæ‰€éœ€çš„ä¼šè¯ã€‚å¯¹äºä¸€ä¸ªç½‘ç»œè¿æ¥æ¥è¯´ï¼Œå¥—æ¥å­—æ˜¯å¹³ç­‰çš„ï¼Œå¹¶æ²¡æœ‰å·®åˆ«ï¼Œä¸å› ä¸ºåœ¨æœåŠ¡å™¨ç«¯æˆ–åœ¨å®¢æˆ·ç«¯è€Œäº§ç”Ÿä¸åŒçº§åˆ«ã€‚ä¸ç®¡æ˜¯Socketè¿˜æ˜¯ServerSocketå®ƒä»¬çš„å·¥ä½œéƒ½æ˜¯é€šè¿‡SocketImplç±»åŠå…¶å­ç±»å®Œæˆçš„ã€‚</p><p><strong>Java Socketå¸¸ç”¨æ–¹æ³•</strong></p><p>. Acceptæ–¹æ³•ç”¨äºäº§ç”Ÿâ€é˜»å¡â€ï¼Œç›´åˆ°æ¥å—åˆ°ä¸€ä¸ªè¿æ¥ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªå®¢æˆ·ç«¯çš„Socketå¯¹è±¡å®ä¾‹ã€‚â€é˜»å¡â€æ˜¯ä¸€ä¸ªæœ¯è¯­ï¼Œå®ƒä½¿ç¨‹åºè¿è¡Œæš‚æ—¶â€åœç•™â€åœ¨è¿™ä¸ªåœ°æ–¹ï¼Œç›´åˆ°ä¸€ä¸ªä¼šè¯äº§ç”Ÿï¼Œç„¶åç¨‹åºç»§ç»­ï¼›é€šå¸¸â€é˜»å¡â€æ˜¯ç”±å¾ªç¯äº§ç”Ÿçš„ã€‚</p><p>. getInputStreamæ–¹æ³•è·å¾—ç½‘ç»œè¿æ¥è¾“å…¥ï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ªInputStreamå¯¹è±¡å®ä¾‹ã€‚<br>. getOutputStreamæ–¹æ³•è¿æ¥çš„å¦ä¸€ç«¯å°†å¾—åˆ°è¾“å…¥ï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ªOutputStreamå¯¹è±¡å®ä¾‹ã€‚</p><p>æ³¨æ„ï¼šå…¶ä¸­getInputStreamå’ŒgetOutputStreamæ–¹æ³•å‡ä¼šäº§ç”Ÿä¸€ä¸ªIOExceptionï¼Œå®ƒå¿…é¡»è¢«æ•è·ï¼Œå› ä¸ºå®ƒä»¬è¿”å›çš„æµå¯¹è±¡ï¼Œé€šå¸¸éƒ½ä¼šè¢«å¦ä¸€ä¸ªæµå¯¹è±¡ä½¿ç”¨ã€‚</p><p><strong>Java æ“ä½œæµå¯¹è±¡</strong></p><p>å»ºç«‹Socketè¿æ¥åï¼Œä¸¤å°æœºå™¨ä¹‹é—´ä¾¿ä»¥æµæ¨¡å¼è¿›è¡Œé€šä¿¡ã€‚åœ¨Java APIä¸­ï¼Œå¯ä»¥ä»å…¶ä¸­è¯»å…¥ä¸€ä¸ªå­—èŠ‚åºåˆ—çš„å¯¹è±¡ç§°åšè¾“å…¥æµï¼Œè€Œå¯ä»¥å‘å…¶ä¸­å†™å…¥ä¸€ä¸ªå­—èŠ‚åºåˆ—çš„å¯¹è±¡ç§°åšè¾“å‡ºæµã€‚è¿™äº›å­—èŠ‚åºåˆ—çš„æ¥æºåœ°å’Œç›®çš„åœ°å¯ä»¥æ˜¯æ–‡ä»¶ï¼Œè€Œä¸”é€šå¸¸éƒ½æ˜¯æ–‡ä»¶ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æ˜¯ç½‘ç»œè¿æ¥ï¼Œç”šè‡³æ˜¯å†…å­˜å—ã€‚æŠ½è±¡ç±»InputStreamå’ŒOutputStreamæ„æˆäº†è¾“å…¥/è¾“å‡ºï¼ˆI/O)ç±»å±‚æ¬¡ç»“æ„çš„åŸºç¡€ã€‚</p><p>æœ¬æ¬¡å®éªŒæˆ‘é€‰æ‹©åˆ©ç”¨Scannerä½œä¸ºè¯»å–æµçš„æ‰‹æ®µï¼Œç”¨PrintWriterä½œä¸ºå†™å…¥æµçš„æ‰‹æ®µã€‚</p><h3 id="å®éªŒç¯å¢ƒï¼š-1"><a href="#å®éªŒç¯å¢ƒï¼š-1" class="headerlink" title="å®éªŒç¯å¢ƒï¼š"></a>å®éªŒç¯å¢ƒï¼š</h3><p>Intellij IDEA, JDK 1.8, Windows 10</p><h3 id="å®éªŒæ€è·¯ï¼š-1"><a href="#å®éªŒæ€è·¯ï¼š-1" class="headerlink" title="å®éªŒæ€è·¯ï¼š"></a>å®éªŒæ€è·¯ï¼š</h3><ol><li>æ–°å»ºä¸¤ä¸ªç±»ï¼ŒConnectionAcceptorå’ŒConnectionRequestorã€‚ç”±äºé€»è¾‘ç®€å•ï¼Œå…·ä½“ä»£ç å¯ç›´æ¥åœ¨mainä¸­å®ç°ï¼›</li><li>ConnectionAcceptorå’ŒConnectionRequestorç±»éœ€è¦æ¥æ”¶å‘½ä»¤è¡Œå‚æ•°ï¼Œå¯åˆ©ç”¨Intellij IDEAçš„ç±»è¿è¡Œè®¾ç½®æ¥è¾“å…¥å‚æ•°ï¼Œåˆ©ç”¨mainå‡½æ•°çš„argså‚æ•°æ¥ä¼ é€’å‘½ä»¤è¡Œå‚æ•°ï¼Œé¿å…äº†æ“ä½œå‘½ä»¤è¡Œç•Œé¢çš„ä¸ä¾¿ï¼›</li><li>ConnectionRequestorï¼šå»ºç«‹è¿æ¥ï¼›æ¥æ”¶æ•°æ®ï¼›å‘é€æ•°æ®ï¼›å…³é—­è¿æ¥ã€‚</li><li>ConnectionAcceptorï¼šæ¥æ”¶è¯·æ±‚ï¼›å‘é€æ•°æ®ï¼›æ¥æ”¶æ•°æ®ï¼›æ–­å¼€è¿æ¥ã€‚</li></ol><h3 id="ç›¸å…³ä»£ç ï¼š-1"><a href="#ç›¸å…³ä»£ç ï¼š-1" class="headerlink" title="ç›¸å…³ä»£ç ï¼š"></a>ç›¸å…³ä»£ç ï¼š</h3><p><code>ConnectionRequestor.java</code></p><pre><code class="lang-java">public class ConnectionRequestor &#123;    /*     * java ConnectionRequestor 192.168.1.101 12     */    public static void main(String[] args) throws IOException &#123;        // æ£€æŸ¥å‚æ•°ä¸ªæ•°        if (args.length != 2) &#123;            System.out.println(&quot;Wrong parameters!&quot;);            return;        &#125;        // 1. å»ºç«‹è¿æ¥        String host = args[0];        int port = Integer.parseInt(args[1]);        Socket socket = new Socket(host, port);        // 2. æ¥æ”¶æ•°æ®        InputStream inputStream = socket.getInputStream();        Scanner scanner = new Scanner(inputStream);        String line = scanner.nextLine();        System.out.println(&quot;æ”¶åˆ°æ¥è‡ªå‘é€æ–¹çš„æ¶ˆæ¯ï¼š&quot; + line);        // 3. å‘é€æ•°æ®        OutputStream outputStream = socket.getOutputStream();        PrintWriter printWriter = new PrintWriter(outputStream, true);        printWriter.println(&quot;æˆ‘å·²æ”¶åˆ°æ¶ˆæ¯ï¼Œå†…å®¹æ˜¯&quot; + line);        // 4. å…³é—­è¿æ¥        socket.close();    &#125;&#125;</code></pre><p><code>ConnectionAcceptor.java</code></p><pre><code class="lang-java">public class ConnectionAcceptor &#123;    /*     * java ConnectionAcceptor 12 Hello     */    public static void main(String[] args) throws IOException &#123;        // æ£€æŸ¥å‚æ•°ä¸ªæ•°        if (args.length != 2) &#123;            System.out.println(&quot;Wrong parameters!&quot;);            return;        &#125;        // 1. æ¥å—è¯·æ±‚        int port = Integer.parseInt(args[0]);        ServerSocket serverSocket = new ServerSocket(port);        Socket socket = serverSocket.accept();        // 2. å‘é€æ•°æ®        OutputStream outputStream = socket.getOutputStream();        PrintWriter printWriter = new PrintWriter(outputStream, true);        printWriter.println(args[1]);        // 3. æ¥æ”¶æ•°æ®        InputStream inputStream = socket.getInputStream();        Scanner scanner = new Scanner(inputStream);        String line = scanner.nextLine();        System.out.println(&quot;æœåŠ¡å™¨åº”ç­”ï¼š&quot; + line);        // 4. æ–­å¼€è¿æ¥        socket.close();    &#125;&#125;</code></pre><h2 id="å››ã€å®éªŒç»“æœä¸åˆ†æ-1"><a href="#å››ã€å®éªŒç»“æœä¸åˆ†æ-1" class="headerlink" title="å››ã€å®éªŒç»“æœä¸åˆ†æ"></a>å››ã€å®éªŒç»“æœä¸åˆ†æ</h2><p>ç¼–è¯‘è¿‡ç¨‹ç•¥å»ã€‚</p><ol><li>è¿è¡ŒConnectionAcceptor<br><img src="/2019/06/15/%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/2019-06-15-17-27-34.png" alt></li><li>è¿è¡ŒConnectionRequestor<br><img src="/2019/06/15/%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/2019-06-15-17-28-48.png" alt></li><li>æ­¤æ—¶çš„ConnectionAcceptor<br><img src="/2019/06/15/%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/2019-06-15-17-29-13.png" alt></li></ol><h3 id="å®éªŒåˆ†æï¼š-1"><a href="#å®éªŒåˆ†æï¼š-1" class="headerlink" title="å®éªŒåˆ†æï¼š"></a>å®éªŒåˆ†æï¼š</h3><p>é€šè¿‡æœ¬æ¬¡å®éªŒï¼Œæˆ‘äº†è§£äº†TCPè¿æ¥çš„åŸç†ä¸ä¼˜ç¼ºç‚¹ï¼ŒæŒæ¡äº†TCPå’ŒUDPçš„ä¸»è¦ä¸åŒä¹‹å¤„ï¼ŒæŒæ¡äº†åœ¨Javaä¸­å»ºç«‹TCP Socketè¿æ¥çš„æ–¹æ³•ï¼ŒæŒæ¡äº†æµå¤„ç†çš„åŸºæœ¬æ–¹æ³•ã€‚</p><hr><h1 id="å®éªŒå››"><a href="#å®éªŒå››" class="headerlink" title="å®éªŒå››"></a>å®éªŒå››</h1><h2 id="ä¸€ã€å®éªŒç›®çš„-2"><a href="#ä¸€ã€å®éªŒç›®çš„-2" class="headerlink" title="ä¸€ã€å®éªŒç›®çš„"></a>ä¸€ã€å®éªŒç›®çš„</h2><p>åˆ›å»ºè¿›ç¨‹ä¹‹é—´çš„å¤šæ’­ã€‚</p><h2 id="äºŒã€å®éªŒå†…å®¹-2"><a href="#äºŒã€å®éªŒå†…å®¹-2" class="headerlink" title="äºŒã€å®éªŒå†…å®¹"></a>äºŒã€å®éªŒå†…å®¹</h2><ol><li>MulticastSender.javaç”¨äºå‘é€å¤šæ’­æ¶ˆæ¯ç»™å¤šæ’­æ¥æ”¶ç¨‹åºã€‚å¤šæ’­IPåœ°å€æ˜¯239.1.2.3 ç«¯å£å·ä¸º1234ã€‚</li><li>MulticastReceiver.java ç”¨äºæ¥æ”¶å¤šæ’­æ¶ˆæ¯å¹¶æ˜¾ç¤ºæ¶ˆæ¯ã€‚</li><li>å®éªŒæœ€ç»ˆæ•ˆæœè¦æ±‚ï¼šè‡³å°‘å¼€å¯ä¸¤ä¸ªä»¥ä¸Šçš„MulticastReceiverè¿›ç¨‹ï¼ŒMulticastSenderå‘é€çš„æ¶ˆæ¯ï¼Œå‡å¯è¢«MulticastReceiveræ”¶åˆ°ã€‚</li></ol><h2 id="ä¸‰ã€å®éªŒè®¾è®¡-2"><a href="#ä¸‰ã€å®éªŒè®¾è®¡-2" class="headerlink" title="ä¸‰ã€å®éªŒè®¾è®¡"></a>ä¸‰ã€å®éªŒè®¾è®¡</h2><h3 id="å®éªŒèƒŒæ™¯ï¼š-2"><a href="#å®éªŒèƒŒæ™¯ï¼š-2" class="headerlink" title="å®éªŒèƒŒæ™¯ï¼š"></a>å®éªŒèƒŒæ™¯ï¼š</h3><p><a href="https://blog.csdn.net/zhouzixin053/article/details/22823521">javaâ€”â€”â€”â€”å¤šæ’­ç¼–ç¨‹â€”â€”-MulticastSocket</a></p><p><strong>å•æ’­ï¼š</strong></p><p>ä¸€ä¸ªå•ä¸ªçš„å‘é€è€…å’Œä¸€ä¸ªæ¥å—è€…ä¹‹é—´é€šè¿‡ç½‘ç»œè¿›è¡Œçš„é€šä¿¡ã€‚</p><p>1ã€æœåŠ¡å™¨åŠæ—¶å“åº”å®¢æˆ·æœºçš„è¯·æ±‚</p><p>2ã€æœåŠ¡å™¨é’ˆå¯¹æ¯ä¸ªå®¢æˆ·ä¸åŒçš„è¯·æ±‚å‘é€ä¸åŒçš„æ•°æ®ï¼Œå®¹æ˜“å®ç°ä¸ªæ€§åŒ–æœåŠ¡ã€‚</p><p><strong>å¤šæ’­ï¼š</strong></p><p>ä¸€ä¸ªå‘é€è€…å’Œå¤šä¸ªæ¥å—è€…ä¹‹é—´çš„é€šä¿¡ã€‚</p><p>å¹¿æ’­ç‰¹ç‚¹ï¼šä¸»æœºä¹‹é—´â€œä¸€å¯¹æ‰€æœ‰â€çš„é€šè®¯æ¨¡å¼ï¼Œç½‘ç»œå¯¹å…¶ä¸­æ¯ä¸€å°ä¸»æœºå‘å‡ºçš„ä¿¡å·éƒ½è¿›è¡Œæ— æ¡ä»¶å¤åˆ¶å¹¶è½¬å‘ï¼Œæ‰€æœ‰ä¸»æœºéƒ½å¯ä»¥æ¥æ”¶åˆ°æ‰€æœ‰ä¿¡æ¯ï¼ˆä¸ç®¡ä½ æ˜¯å¦éœ€è¦ï¼‰ã€‚</p><p>1ã€ç½‘ç»œè®¾å¤‡ç®€å•ï¼Œç»´æŠ¤ç®€å•ï¼Œå¸ƒç½‘æˆæœ¬ä½å»‰ã€‚</p><p>2ã€ç”±äºæœåŠ¡å™¨ä¸ç”¨å‘æ¯ä¸ªå®¢æˆ·æœºå•ç‹¬å‘é€æ•°æ®ï¼Œæ‰€ä»¥æœåŠ¡å™¨æµé‡è´Ÿè½½æä½ã€‚</p><p>å¤šæ’­çš„åœ°å€æ˜¯ç‰¹å®šçš„ï¼ŒDç±»åœ°å€ç”¨äºå¤šæ’­ã€‚Dç±»IPåœ°å€å°±æ˜¯å¤šæ’­IPåœ°å€ï¼Œå³224.0.0.0è‡³239.255.255.255ä¹‹é—´çš„IPåœ°å€ã€‚</p><p><strong>å¤šæ’­ç¨‹åºè®¾è®¡çš„æ¡†æ¶</strong></p><p>è¦è¿›è¡Œå¤šæ’­çš„ç¼–ç¨‹ï¼Œéœ€è¦éµä»ä¸€å®šçš„ç¼–ç¨‹æ¡†æ¶ã€‚å¤šæ’­ç¨‹åºæ¡†æ¶ä¸»è¦åŒ…å«å¥—æ¥å­—åˆå§‹åŒ–ã€è®¾ç½®å¤šæ’­è¶…æ—¶æ—¶é—´ã€åŠ å…¥å¤šæ’­ç»„ã€å‘é€æ•°æ®ã€æ¥æ”¶æ•°æ®ä»¥åŠä»å¤šæ’­ç»„ä¸­ç¦»å¼€å‡ ä¸ªæ–¹é¢ã€‚å…¶æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>ï¼ˆ1ï¼‰å»ºç«‹ä¸€ä¸ªsocketã€‚</p><p>ï¼ˆ2ï¼‰ç„¶åè®¾ç½®å¤šæ’­çš„å‚æ•°ï¼Œä¾‹å¦‚è¶…æ—¶æ—¶é—´TTLã€æœ¬åœ°å›ç¯è®¸å¯LOOPç­‰ã€‚</p><p>ï¼ˆ3ï¼‰åŠ å…¥å¤šæ’­ç»„ã€‚</p><p>ï¼ˆ4ï¼‰å‘é€å’Œæ¥æ”¶æ•°æ®ã€‚</p><p>ï¼ˆ5ï¼‰ä»å¤šæ’­ç»„ç¦»å¼€ã€‚</p><p><strong>Java MulticastSocket</strong></p><p>å¤šæ’­é€šè¿‡å¤šæ’­æ•°æ®æŠ¥å¥—æ¥MulticastSocketç±»æ¥å®ç°</p><p>é‡è¦çš„æ„é€ æ–¹æ³•ï¼š</p><pre><code class="lang-java">MulticastSocket()//åˆ›å»ºå¤šæ’­å¥—æ¥å­—MulticastSocket(int port)//åˆ›å»ºå¤šæ’­å¥—æ¥å­—å¹¶å°†å…¶ç»‘å®šåˆ°ç‰¹å®šç«¯å£MulticastSocket(SocketAddress bindaddr)//åˆ›å»ºç»‘å®šåˆ°æŒ‡å®šå¥—æ¥å­—åœ°å€çš„MulticastSocket</code></pre><p>å¸¸ç”¨çš„æ–¹æ³•ï¼š</p><pre><code class="lang-java">void joinGroup(InetAddress meastaddr)//åŠ å…¥å¤šæ’­ç»„void leaveGroup(InetAddress meastaddr)//ç¦»å¼€å¤šæ’­ç»„void send(DatagramPacket p)//ä»æ­¤å¥—æ¥å­—å‘é€æ•°æ®åŒ…public void receive(DatagramPacket p)//ä»æ­¤å¥—æ¥å­—æ¥æ”¶æ•°æ®åŒ…</code></pre><h3 id="å®éªŒç¯å¢ƒï¼š-2"><a href="#å®éªŒç¯å¢ƒï¼š-2" class="headerlink" title="å®éªŒç¯å¢ƒï¼š"></a>å®éªŒç¯å¢ƒï¼š</h3><p>Intellij IDEA, JDK 1.8, Windows 10</p><h3 id="å®éªŒæ€è·¯ï¼š-2"><a href="#å®éªŒæ€è·¯ï¼š-2" class="headerlink" title="å®éªŒæ€è·¯ï¼š"></a>å®éªŒæ€è·¯ï¼š</h3><ol><li>æ–°å»ºä¸¤ä¸ªç±»ï¼ŒMulticastSenderå’ŒMulticastRecieverã€‚ç”±äºé€»è¾‘ç®€å•ï¼Œå…·ä½“ä»£ç å¯ç›´æ¥åœ¨mainä¸­å®ç°ï¼›</li><li>ä¸ºäº†ä½“ç°å¤šæ’­çš„å¹¿æ’­ç‰¹æ€§ï¼ŒMulticastRecieverçš„è¿›ç¨‹è¦å¤šå‡ ä¸ªï¼Œéšç€MulticastSenderçš„å¯åŠ¨ï¼Œå…¨éƒ¨æ”¶åˆ°ä¿¡æ¯æ‰è¡Œã€‚</li><li>MulticastSenderï¼šæ–°å»ºå¤šæ’­è¿æ¥ï¼›æ„é€ æ•°æ®åŒ…ï¼›å¹¿æ’­æ•°æ®ï¼›å…³é—­è¿æ¥ã€‚</li><li>MulticastRecieverï¼šæ–°å»ºå¤šæ’­è¿æ¥ï¼›æ„é€ æ•°æ®åŒ…ï¼›æ¥æ”¶æ•°æ®ï¼›å…³é—­è¿æ¥ã€‚</li></ol><h3 id="ç›¸å…³ä»£ç ï¼š-2"><a href="#ç›¸å…³ä»£ç ï¼š-2" class="headerlink" title="ç›¸å…³ä»£ç ï¼š"></a>ç›¸å…³ä»£ç ï¼š</h3><p><code>MulticastSender.java</code></p><pre><code class="lang-java">public class MulticastSender &#123;    public static void main(String[] args) throws IOException &#123;        // æ–°å»ºå¤šæ’­è¿æ¥        int port = 1234;        String address = &quot;239.1.2.3&quot;;        MulticastSocket multicastSocket = new MulticastSocket(port);        InetAddress groupAddress = InetAddress.getByName(address);        multicastSocket.joinGroup(groupAddress);        // æ„é€ æ•°æ®åŒ…        byte[] message = &quot;Hello!&quot;.getBytes();        DatagramPacket datagramPacket = new DatagramPacket(message, message.length, InetAddress.getByName(address), port);        // å¹¿æ’­æ•°æ®        multicastSocket.send(datagramPacket);        // å…³é—­è¿æ¥        multicastSocket.close();    &#125;&#125;</code></pre><p><code>MulticastReciever.java</code></p><pre><code class="lang-java">public class MulticastReciever &#123;    public static void main(String[] args) throws IOException &#123;        // æ–°å»ºå¤šæ’­è¿æ¥        int port = 1234;        String address = &quot;239.1.2.3&quot;;        MulticastSocket multicastSocket = new MulticastSocket(port);        InetAddress groupAddress = InetAddress.getByName(address);        multicastSocket.joinGroup(groupAddress);        // æ„é€ æ•°æ®åŒ…        byte[] message = new byte[1024];        DatagramPacket datagramPacket = new DatagramPacket(message, message.length, InetAddress.getByName(address), port);        // æ¥æ”¶æ•°æ®        multicastSocket.receive(datagramPacket);        System.out.println(&quot;æ¥æ”¶åˆ°äº†å¹¿æ’­æ¶ˆæ¯ï¼š&quot; + new String(message));        // å…³é—­è¿æ¥        multicastSocket.close();    &#125;&#125;</code></pre><h2 id="å››ã€å®éªŒç»“æœä¸åˆ†æ-2"><a href="#å››ã€å®éªŒç»“æœä¸åˆ†æ-2" class="headerlink" title="å››ã€å®éªŒç»“æœä¸åˆ†æ"></a>å››ã€å®éªŒç»“æœä¸åˆ†æ</h2><p>ç¼–è¯‘è¿‡ç¨‹ç•¥å»ã€‚</p><ol><li>è¿è¡ŒMulticastRecieverï¼ˆ6ä¸ªï¼‰<br><img src="/2019/06/15/%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/2019-06-15-17-45-12.png" alt></li><li>è¿è¡ŒMulticastSender<br><img src="/2019/06/15/%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/2019-06-15-17-46-17.png" alt></li><li>æ­¤æ—¶çš„MulticastReciever<br><img src="/2019/06/15/%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/2019-06-15-17-46-34.png" alt><br><img src="/2019/06/15/%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/2019-06-15-17-46-48.png" alt><br><img src="/2019/06/15/%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/2019-06-15-17-47-02.png" alt><br>å‰©ä¸‹ä¸‰ä¸ªç•¥å»ä¸è¡¨ï¼Œç»“æœç›¸åŒã€‚</li></ol><h3 id="å®éªŒåˆ†æï¼š-2"><a href="#å®éªŒåˆ†æï¼š-2" class="headerlink" title="å®éªŒåˆ†æï¼š"></a>å®éªŒåˆ†æï¼š</h3><p>é€šè¿‡æœ¬æ¬¡å®éªŒï¼Œæˆ‘äº†è§£äº†å¤šæ’­çš„åŸç†å’Œç›¸å¯¹äºå•æ’­çš„ä¼˜ç‚¹ï¼ŒæŒæ¡äº†åœ¨Javaä¸­å»ºç«‹å¤šæ’­MulticastSocketè¿æ¥çš„æ–¹æ³•ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
    <tags>
      
      <tag>distribute system</tag>
      
      <tag>OS</tag>
      
      <tag>java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é«˜çº§æ“ä½œç³»ç»Ÿâ€”â€”åˆ†å¸ƒå¼ç³»ç»Ÿâ€”â€”è¯¾ç¨‹ä½œä¸šä¸è§£ç­”</title>
    <link href="/2019/06/15/%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A%E4%B8%8E%E8%A7%A3%E7%AD%94/"/>
    <url>/2019/06/15/%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A%E4%B8%8E%E8%A7%A3%E7%AD%94/</url>
    
    <content type="html"><![CDATA[<h2 id="ç¬¬ä¸€ç« ä½œä¸š"><a href="#ç¬¬ä¸€ç« ä½œä¸š" class="headerlink" title="ç¬¬ä¸€ç« ä½œä¸š"></a>ç¬¬ä¸€ç« ä½œä¸š</h2><h3 id="1-ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç‰¹ç‚¹ã€‚"><a href="#1-ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç‰¹ç‚¹ã€‚" class="headerlink" title="1. ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç‰¹ç‚¹ã€‚"></a>1. ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç‰¹ç‚¹ã€‚</h3><p>å®šä¹‰1ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯å¤šä¸ªç‹¬ç«‹è®¡ç®—æœºçš„é›†åˆï¼Œè¯¥ç³»ç»Ÿç”¨æˆ·è®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ªå•ç‹¬çš„ä¸€è‡´çš„ç³»ç»Ÿ<br>å®šä¹‰2ï¼šç”±åœ¨é€šè¿‡æ¶ˆæ¯è¿›è¡Œé€šä¿¡å’Œåä½œæ“ä½œçš„ç½‘ç»œè®¡ç®—æœºä¸Šçš„è½¯ä»¶ç¡¬ä»¶éƒ¨ä»¶ç»„æˆçš„ä»»ä½•ç³»ç»Ÿ<br>åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç‰¹ç‚¹ï¼š<br>ï¼ˆ1ï¼‰éšè—æ€§ï¼Œéšè—äº†è®¡ç®—æœºä¹‹é—´çš„ä¸åŒï¼Œéšè—äº†è®¡ç®—æœºä¹‹é—´çš„é€šä¿¡è¿‡ç¨‹ã€‚<br>ï¼ˆ2ï¼‰ç»Ÿä¸€æ€§å’Œä¸€è‡´æ€§ï¼Œæ— è®ºä½•æ—¶ä½•åœ°ï¼Œç”¨æˆ·éƒ½é‡‡ç”¨ç»Ÿä¸€å’Œä¸€è‡´çš„æ–¹æ³•è®¿é—®åˆ†å¸ƒå¼ç³»ç»Ÿã€‚<br>ï¼ˆ3ï¼‰å¯æ‰©å±•æ€§ï¼Œéšè—ä¸€ä¸ªç‹¬ç«‹çš„è®¡ç®—æœºå¦‚ä½•å‚ä¸ç³»ç»Ÿçš„è¿ä½œï¼›åœ¨ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ä¸èƒ½å·¥ä½œçš„æƒ…å†µä¸‹æ•´ä¸ªç³»ç»Ÿä»ç„¶èƒ½æŒç»­æä¾›æœåŠ¡ï¼›å½“ç³»ç»Ÿçš„æŸäº›éƒ¨ä»¶è¢«æ›¿æ¢æˆ–è¢«ä¿®æ”¹æˆ–æ˜¯ç³»ç»Ÿæä¾›äº†æ–°çš„æœåŠ¡æ—¶ï¼Œä¸åº”è®©ç”¨æˆ·æ³¨æ„åˆ°è¿™äº›æ”¹å˜ã€‚<br>ï¼ˆ4ï¼‰å¹¶å‘æ€§ï¼Œåœ¨å…±äº«èµ„æºçš„æƒ…å†µä¸‹ï¼Œåè°ƒä¸åŒçš„ç¨‹åºå¹¶å‘æ‰§è¡Œã€‚<br>ï¼ˆ5ï¼‰æ²¡æœ‰å…¨å±€æ—¶é’Ÿï¼Œå¾ˆéš¾åœ¨ç½‘ç»œä¸­ç²¾ç¡®åœ°åŒæ­¥æ‰€æœ‰çš„æ—¶é’Ÿï¼Œæ›´é‡è¦çš„æ˜¯å‘ç°åŠ¨ä½œå‘ç”Ÿçš„å…ˆåé¡ºåºã€‚<br>ä¸¾ä¾‹éƒ¨åˆ†ç•¥ã€‚</p><h3 id="2-æœ‰ä¸€ä¸ªç®€å•çš„C-Sç³»ç»Ÿï¼Œæ­¤ç³»ç»Ÿåªç”¨ä¸€å°æœåŠ¡å™¨æ¥å“åº”æ‰€æœ‰å®¢æˆ·çš„è¯·æ±‚ã€‚"><a href="#2-æœ‰ä¸€ä¸ªç®€å•çš„C-Sç³»ç»Ÿï¼Œæ­¤ç³»ç»Ÿåªç”¨ä¸€å°æœåŠ¡å™¨æ¥å“åº”æ‰€æœ‰å®¢æˆ·çš„è¯·æ±‚ã€‚" class="headerlink" title="2. æœ‰ä¸€ä¸ªç®€å•çš„C/Sç³»ç»Ÿï¼Œæ­¤ç³»ç»Ÿåªç”¨ä¸€å°æœåŠ¡å™¨æ¥å“åº”æ‰€æœ‰å®¢æˆ·çš„è¯·æ±‚ã€‚"></a>2. æœ‰ä¸€ä¸ªç®€å•çš„C/Sç³»ç»Ÿï¼Œæ­¤ç³»ç»Ÿåªç”¨ä¸€å°æœåŠ¡å™¨æ¥å“åº”æ‰€æœ‰å®¢æˆ·çš„è¯·æ±‚ã€‚</h3><p>ï¼ˆ1ï¼‰è¯·è§£é‡Šä¸ºä»€ä¹ˆåœ¨è¿™ç§æƒ…å†µä¸‹ä¸èƒ½å¯¹æœåŠ¡å™¨çš„å“åº”æ—¶é—´è¿›è¡Œé™åˆ¶ï¼ˆä¾‹å¦‚ï¼Œè¿™ä¸ªé™åˆ¶å¯èƒ½æ˜¯è¦æ±‚æœåŠ¡å™¨ä¸€å®šè¦åœ¨10mså†…å¯¹å®¢æˆ·çš„è¯·æ±‚è¿›è¡Œå“åº”ï¼‰ï¼›<br>å› ä¸ºæœåŠ¡å™¨è¿‡äºç®€å•ï¼Œå¤„ç†èƒ½åŠ›å·®ï¼Œå¯¹äºå¤šçº¿ç¨‹é«˜å¹¶å‘æƒ…å†µï¼Œå½“æœåŠ¡å™¨å‘ç”Ÿå µå¡æ—¶é€ æˆçš„æœåŠ¡ç­‰å¾…é—®é¢˜ä¼šé€ æˆæœåŠ¡å™¨å“åº”ä¸åŠæ—¶çš„æƒ…å†µã€‚å¹¶ä¸”ä¸€å°æœåŠ¡å™¨æ€§èƒ½æœ‰é™ï¼Œä¸èƒ½ä¿è¯æœåŠ¡ç«¯é«˜æ•ˆæ€§å’Œé«˜çš„å®¹é”™æ€§ã€‚å› æ­¤åœ¨è¿™ç§æƒ…å†µä¸‹ä¸èƒ½å¯¹æœåŠ¡å™¨çš„å“åº”æ—¶é—´è¿›è¡Œé™åˆ¶ã€‚</p><p>ï¼ˆ2ï¼‰å¦‚æœæˆ‘ä»¬æƒ³é™åˆ¶æœåŠ¡å™¨çš„å“åº”æ—¶é—´ï¼Œåº”è¯¥å¦‚ä½•ä¿®æ”¹è®¾è®¡ï¼Ÿ<br>å¯ä»¥é€šè¿‡å¢åŠ æœåŠ¡å™¨çš„æ•°é‡æˆ–æé«˜æœåŠ¡å™¨çš„å¤„ç†èƒ½åŠ›ã€‚</p><p>ï¼ˆ3ï¼‰åœ¨ç°å®ä¸–ç•Œä¸­ä½¿ç”¨çš„ç³»ç»Ÿä¸­ï¼Œè¿™ç§é™åˆ¶æ˜¯å¦æ˜¯å¿…é¡»çš„ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ<br>æ˜¯å¿…é¡»çš„ã€‚å› ä¸ºå¦‚æœä¸åŠ é™åˆ¶ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´ç”¨æˆ·ä½¿ç”¨ç³»ç»Ÿçš„ä½“éªŒé™ä½ï¼Œä»è€Œæ”¾å¼ƒè¿™ä¸ªç³»ç»Ÿã€‚</p><h3 id="3-å½“å¹´12306è®¢ç¥¨ç³»ç»Ÿåœ¨2011å¹´ç¬¬ä¸€æ¬¡ä¸Šçº¿çš„æ—¶å€™å‡ºç°äº†å¾ˆå¤šçš„é—®é¢˜ã€‚å¦‚æœä½ æ˜¯12306çš„è®¾è®¡å¸ˆï¼Œè¯·é—®åº”è¯¥æ³¨æ„å“ªå‡ ä¸ªæ–¹é¢çš„å†…å®¹ï¼Ÿ"><a href="#3-å½“å¹´12306è®¢ç¥¨ç³»ç»Ÿåœ¨2011å¹´ç¬¬ä¸€æ¬¡ä¸Šçº¿çš„æ—¶å€™å‡ºç°äº†å¾ˆå¤šçš„é—®é¢˜ã€‚å¦‚æœä½ æ˜¯12306çš„è®¾è®¡å¸ˆï¼Œè¯·é—®åº”è¯¥æ³¨æ„å“ªå‡ ä¸ªæ–¹é¢çš„å†…å®¹ï¼Ÿ" class="headerlink" title="3. å½“å¹´12306è®¢ç¥¨ç³»ç»Ÿåœ¨2011å¹´ç¬¬ä¸€æ¬¡ä¸Šçº¿çš„æ—¶å€™å‡ºç°äº†å¾ˆå¤šçš„é—®é¢˜ã€‚å¦‚æœä½ æ˜¯12306çš„è®¾è®¡å¸ˆï¼Œè¯·é—®åº”è¯¥æ³¨æ„å“ªå‡ ä¸ªæ–¹é¢çš„å†…å®¹ï¼Ÿ"></a>3. å½“å¹´12306è®¢ç¥¨ç³»ç»Ÿåœ¨2011å¹´ç¬¬ä¸€æ¬¡ä¸Šçº¿çš„æ—¶å€™å‡ºç°äº†å¾ˆå¤šçš„é—®é¢˜ã€‚å¦‚æœä½ æ˜¯12306çš„è®¾è®¡å¸ˆï¼Œè¯·é—®åº”è¯¥æ³¨æ„å“ªå‡ ä¸ªæ–¹é¢çš„å†…å®¹ï¼Ÿ</h3><p>ï¼ˆç­”æ¡ˆç•¥ï¼‰</p><h2 id="ç¬¬äºŒç« ä½œä¸š"><a href="#ç¬¬äºŒç« ä½œä¸š" class="headerlink" title="ç¬¬äºŒç« ä½œä¸š"></a>ç¬¬äºŒç« ä½œä¸š</h2><h3 id="1-ç½‘ç»œåè®®åˆ†å±‚æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ"><a href="#1-ç½‘ç»œåè®®åˆ†å±‚æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ" class="headerlink" title="1.    ç½‘ç»œåè®®åˆ†å±‚æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ"></a>1.    ç½‘ç»œåè®®åˆ†å±‚æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</h3><p>æ¯å±‚åè®®å¯ä»¥å•ç‹¬è®¾è®¡ï¼Œåªä¾èµ–äºåº•å±‚åè®®å·¥ä½œï¼Œå¢åŠ äº†çµæ´»æ€§ã€‚</p><h3 id="2-ä¸€ä¸ªå®¢æˆ·å‘æœåŠ¡å™¨å‘å‡ºRPCã€‚å®¢æˆ·èŠ±5msæ—¶é—´è®¡ç®—æ¯ä¸ªè¯·æ±‚çš„å‚æ•°ï¼ŒæœåŠ¡å™¨èŠ±10mså¤„ç†æ¯ä¸ªè¯·æ±‚ã€‚æœ¬åœ°æ“ä½œç³»ç»Ÿæ¯æ¬¡å‘é€å’Œæ¥æ”¶çš„æ—¶é—´æ˜¯5msï¼Œç½‘ç»œä¼ é€’æˆ–è€…åº”ç­”æ¶ˆæ¯çš„æ—¶é—´æ˜¯3msã€‚ç¼–ç ã€è§£ç æ¯ä¸ªæ¶ˆæ¯éœ€è¦0-5msã€‚è®¡ç®—ä¸€ä¸ª-RPCå®ç°æ‰€éœ€è¦çš„æ—¶é—´ã€‚"><a href="#2-ä¸€ä¸ªå®¢æˆ·å‘æœåŠ¡å™¨å‘å‡ºRPCã€‚å®¢æˆ·èŠ±5msæ—¶é—´è®¡ç®—æ¯ä¸ªè¯·æ±‚çš„å‚æ•°ï¼ŒæœåŠ¡å™¨èŠ±10mså¤„ç†æ¯ä¸ªè¯·æ±‚ã€‚æœ¬åœ°æ“ä½œç³»ç»Ÿæ¯æ¬¡å‘é€å’Œæ¥æ”¶çš„æ—¶é—´æ˜¯5msï¼Œç½‘ç»œä¼ é€’æˆ–è€…åº”ç­”æ¶ˆæ¯çš„æ—¶é—´æ˜¯3msã€‚ç¼–ç ã€è§£ç æ¯ä¸ªæ¶ˆæ¯éœ€è¦0-5msã€‚è®¡ç®—ä¸€ä¸ª-RPCå®ç°æ‰€éœ€è¦çš„æ—¶é—´ã€‚" class="headerlink" title="2.    ä¸€ä¸ªå®¢æˆ·å‘æœåŠ¡å™¨å‘å‡ºRPCã€‚å®¢æˆ·èŠ±5msæ—¶é—´è®¡ç®—æ¯ä¸ªè¯·æ±‚çš„å‚æ•°ï¼ŒæœåŠ¡å™¨èŠ±10mså¤„ç†æ¯ä¸ªè¯·æ±‚ã€‚æœ¬åœ°æ“ä½œç³»ç»Ÿæ¯æ¬¡å‘é€å’Œæ¥æ”¶çš„æ—¶é—´æ˜¯5msï¼Œç½‘ç»œä¼ é€’æˆ–è€…åº”ç­”æ¶ˆæ¯çš„æ—¶é—´æ˜¯3msã€‚ç¼–ç ã€è§£ç æ¯ä¸ªæ¶ˆæ¯éœ€è¦0.5msã€‚è®¡ç®—ä¸€ä¸ª RPCå®ç°æ‰€éœ€è¦çš„æ—¶é—´ã€‚"></a>2.    ä¸€ä¸ªå®¢æˆ·å‘æœåŠ¡å™¨å‘å‡ºRPCã€‚å®¢æˆ·èŠ±5msæ—¶é—´è®¡ç®—æ¯ä¸ªè¯·æ±‚çš„å‚æ•°ï¼ŒæœåŠ¡å™¨èŠ±10mså¤„ç†æ¯ä¸ªè¯·æ±‚ã€‚æœ¬åœ°æ“ä½œç³»ç»Ÿæ¯æ¬¡å‘é€å’Œæ¥æ”¶çš„æ—¶é—´æ˜¯5msï¼Œç½‘ç»œä¼ é€’æˆ–è€…åº”ç­”æ¶ˆæ¯çš„æ—¶é—´æ˜¯3msã€‚ç¼–ç ã€è§£ç æ¯ä¸ªæ¶ˆæ¯éœ€è¦0.5msã€‚è®¡ç®—ä¸€ä¸ª RPCå®ç°æ‰€éœ€è¦çš„æ—¶é—´ã€‚</h3><p>ç­”ï¼š<br>5ms å‡†å¤‡å‚æ•°<br>0.5ms æ‰“åŒ…å‚æ•°<br>5ms å‘é€<br>3ms ç½‘ç»œä¼ é€<br>5ms æ¥æ”¶<br>0.5ms è§£åŒ…å‚æ•°<br>10ms å¤„ç†è¯·æ±‚<br>0.5ms ç»“æœæ‰“åŒ…<br>5ms å‘é€<br>3ms ç½‘ç»œä¼ é€<br>5ms æ¥æ”¶<br>0.5ms è§£åŒ…ç»“æœ<br>å…±43ms</p><h3 id="3-ä¸¾ä¾‹è¯´æ˜RPCåœ¨å¼‚æ„ç³»ç»Ÿä¸­å®ç°æ—¶è¿›è¡Œå‚æ•°ä¼ é€’ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Ÿ"><a href="#3-ä¸¾ä¾‹è¯´æ˜RPCåœ¨å¼‚æ„ç³»ç»Ÿä¸­å®ç°æ—¶è¿›è¡Œå‚æ•°ä¼ é€’ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Ÿ" class="headerlink" title="3.    ä¸¾ä¾‹è¯´æ˜RPCåœ¨å¼‚æ„ç³»ç»Ÿä¸­å®ç°æ—¶è¿›è¡Œå‚æ•°ä¼ é€’ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Ÿ"></a>3.    ä¸¾ä¾‹è¯´æ˜RPCåœ¨å¼‚æ„ç³»ç»Ÿä¸­å®ç°æ—¶è¿›è¡Œå‚æ•°ä¼ é€’ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h3><p>ï¼ˆä¾‹å­è§PPTï¼Œç•¥ï¼‰</p><h3 id="4-æš‚æ—¶é€šä¿¡å’Œæ°¸ä¹…é€šä¿¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#4-æš‚æ—¶é€šä¿¡å’Œæ°¸ä¹…é€šä¿¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="4.    æš‚æ—¶é€šä¿¡å’Œæ°¸ä¹…é€šä¿¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>4.    æš‚æ—¶é€šä¿¡å’Œæ°¸ä¹…é€šä¿¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>(ç­”æ¡ˆè§PPT)</p><h3 id="5-ä»€ä¹ˆæ˜¯å¤æ‚æµï¼Ÿå¦‚ä½•å®ç°å¤æ‚æµåŒæ­¥ï¼Ÿ"><a href="#5-ä»€ä¹ˆæ˜¯å¤æ‚æµï¼Ÿå¦‚ä½•å®ç°å¤æ‚æµåŒæ­¥ï¼Ÿ" class="headerlink" title="5.    ä»€ä¹ˆæ˜¯å¤æ‚æµï¼Ÿå¦‚ä½•å®ç°å¤æ‚æµåŒæ­¥ï¼Ÿ"></a>5.    ä»€ä¹ˆæ˜¯å¤æ‚æµï¼Ÿå¦‚ä½•å®ç°å¤æ‚æµåŒæ­¥ï¼Ÿ</h3><p>(ç­”æ¡ˆè§PPT)</p><h2 id="ç¬¬ä¸‰ç« ä½œä¸š"><a href="#ç¬¬ä¸‰ç« ä½œä¸š" class="headerlink" title="ç¬¬ä¸‰ç« ä½œä¸š"></a>ç¬¬ä¸‰ç« ä½œä¸š</h2><h3 id="1-è®¾è®¡ä¸€ä¸ªå¹¶å‘æœåŠ¡å™¨ï¼Œå®ƒä¸ºæ¯ä¸ªåˆ°æ¥çš„è¯·æ±‚åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨è¿›ç¨‹ã€‚è¯·åˆ†æè¿™ç§è®¾è®¡ä¸å¤šçº¿ç¨‹æœåŠ¡å™¨ä¹‹é—´çš„åˆ©å¼Šã€‚"><a href="#1-è®¾è®¡ä¸€ä¸ªå¹¶å‘æœåŠ¡å™¨ï¼Œå®ƒä¸ºæ¯ä¸ªåˆ°æ¥çš„è¯·æ±‚åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨è¿›ç¨‹ã€‚è¯·åˆ†æè¿™ç§è®¾è®¡ä¸å¤šçº¿ç¨‹æœåŠ¡å™¨ä¹‹é—´çš„åˆ©å¼Šã€‚" class="headerlink" title="1. è®¾è®¡ä¸€ä¸ªå¹¶å‘æœåŠ¡å™¨ï¼Œå®ƒä¸ºæ¯ä¸ªåˆ°æ¥çš„è¯·æ±‚åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨è¿›ç¨‹ã€‚è¯·åˆ†æè¿™ç§è®¾è®¡ä¸å¤šçº¿ç¨‹æœåŠ¡å™¨ä¹‹é—´çš„åˆ©å¼Šã€‚"></a>1. è®¾è®¡ä¸€ä¸ªå¹¶å‘æœåŠ¡å™¨ï¼Œå®ƒä¸ºæ¯ä¸ªåˆ°æ¥çš„è¯·æ±‚åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨è¿›ç¨‹ã€‚è¯·åˆ†æè¿™ç§è®¾è®¡ä¸å¤šçº¿ç¨‹æœåŠ¡å™¨ä¹‹é—´çš„åˆ©å¼Šã€‚</h3><p>å¤šçº¿ç¨‹æœåŠ¡å™¨å®ç°äº†å¹¶å‘æ€§å¹¶å¯ä»¥å……åˆ†åˆ©ç”¨æœåŠ¡å™¨ç«¯çš„èµ„æºã€‚è™½ç„¶é‡‡ç”¨å¤šè¿›ç¨‹çš„æ–¹å¼å¯ä»¥è·å¾—è¿™äº›å¥½å¤„ï¼Œä½†æ˜¯è¿›ç¨‹çš„åˆ›å»ºå’Œæ¶ˆäº¡éœ€è¦æ›´å¤§çš„å¼€é”€ï¼Œè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ä¹Ÿæ¯”ä¸€ä¸ªè¿›ç¨‹å†…éƒ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„å¼€é”€å¤§ã€‚</p><h3 id="2-å‡è®¾ä¸€ä¸ªå•çº¿ç¨‹æœåŠ¡å™¨éœ€è¦èŠ±6msçš„æ—¶é—´æ¥å—ä¸€ä¸ªè¯·æ±‚ï¼Œå¹¶ä½¿ç”¨20msçš„æ—¶é—´è®¡ç®—å‡ºè¯·æ±‚ç»“æœå¹¶å°†ç»“æœè¿”å›ã€‚è¯·é—®ï¼Œå¯¹äºä¸€ä¸ªæ‹¥æœ‰10ä¸ªCPUçš„æœåŠ¡å™¨ï¼Œè‹¥åŒæ—¶åˆ°æ¥4ä¸ªè¯·æ±‚ï¼Œåˆ™"><a href="#2-å‡è®¾ä¸€ä¸ªå•çº¿ç¨‹æœåŠ¡å™¨éœ€è¦èŠ±6msçš„æ—¶é—´æ¥å—ä¸€ä¸ªè¯·æ±‚ï¼Œå¹¶ä½¿ç”¨20msçš„æ—¶é—´è®¡ç®—å‡ºè¯·æ±‚ç»“æœå¹¶å°†ç»“æœè¿”å›ã€‚è¯·é—®ï¼Œå¯¹äºä¸€ä¸ªæ‹¥æœ‰10ä¸ªCPUçš„æœåŠ¡å™¨ï¼Œè‹¥åŒæ—¶åˆ°æ¥4ä¸ªè¯·æ±‚ï¼Œåˆ™" class="headerlink" title="2. å‡è®¾ä¸€ä¸ªå•çº¿ç¨‹æœåŠ¡å™¨éœ€è¦èŠ±6msçš„æ—¶é—´æ¥å—ä¸€ä¸ªè¯·æ±‚ï¼Œå¹¶ä½¿ç”¨20msçš„æ—¶é—´è®¡ç®—å‡ºè¯·æ±‚ç»“æœå¹¶å°†ç»“æœè¿”å›ã€‚è¯·é—®ï¼Œå¯¹äºä¸€ä¸ªæ‹¥æœ‰10ä¸ªCPUçš„æœåŠ¡å™¨ï¼Œè‹¥åŒæ—¶åˆ°æ¥4ä¸ªè¯·æ±‚ï¼Œåˆ™"></a>2. å‡è®¾ä¸€ä¸ªå•çº¿ç¨‹æœåŠ¡å™¨éœ€è¦èŠ±6msçš„æ—¶é—´æ¥å—ä¸€ä¸ªè¯·æ±‚ï¼Œå¹¶ä½¿ç”¨20msçš„æ—¶é—´è®¡ç®—å‡ºè¯·æ±‚ç»“æœå¹¶å°†ç»“æœè¿”å›ã€‚è¯·é—®ï¼Œå¯¹äºä¸€ä¸ªæ‹¥æœ‰10ä¸ªCPUçš„æœåŠ¡å™¨ï¼Œè‹¥åŒæ—¶åˆ°æ¥4ä¸ªè¯·æ±‚ï¼Œåˆ™</h3><p>ï¼ˆ1ï¼‰å¦‚æœä½¿ç”¨å•çº¿ç¨‹æœåŠ¡å™¨ï¼Œéœ€è¦å¤šå°‘æ—¶é—´å®Œæˆè¿™4ä¸ªè¯·æ±‚ï¼Ÿï¼ˆ2ï¼‰å¦‚æœè®¾è®¡ä¸€ä¸ªdispatcher/workerå½¢å¼çš„å¤šçº¿ç¨‹æœåŠ¡å™¨ï¼Œéœ€è¦dispatcherçº¿ç¨‹åœ¨æ¥å—è¯·æ±‚åå¤šè€—è´¹1msè¿›è¡Œä»»åŠ¡çš„åˆ†é…å·¥ä½œã€‚ä½¿ç”¨æ­¤å¤šçº¿ç¨‹æœåŠ¡å™¨ï¼Œä¸€ä¸ªCPUä¸“é—¨è´Ÿè´£æ‰§è¡Œdispatcherçº¿ç¨‹ï¼Œæœ€çŸ­éœ€è¦å¤šå°‘æ—¶é—´èƒ½å¤Ÿå°†è¿™äº›è¯·æ±‚å¤„ç†å®Œï¼Ÿï¼ˆçº¿ç¨‹åˆ›å»ºçš„å¼€é”€å’Œçº¿ç¨‹ä¹‹é—´ä¼ é€’æ•°æ®çš„æ—¶é—´å¿½ç•¥ä¸è®¡ï¼‰<br>ç­”:<br>(1)    å› ä¸ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€ä»¥å››ä¸ªè¯·æ±‚ä¸²è¡Œå®Œæˆï¼Œä¸€å…±éœ€è¦ï¼ˆ6ms+20msï¼‰<em>4=26ms</em>4=104ms<br>(2)    å› ä¸ºæœ‰10ä¸ªCPUï¼Œæ‰€ä»¥å¯ä»¥dispatcherå ç”¨ä¸€ä¸ªCPUï¼Œä½™ä¸‹çš„å››ä¸ªworkerçº¿ç¨‹å„å ç”¨ä¸€ä¸ªCPUã€‚æ‰€ä»¥ä¸€å…±éœ€è¦ï¼šï¼ˆ6ms+1msï¼‰*4+20ms=28ms+20ms=48ms</p><h3 id="3-è¿­ä»£æœåŠ¡å™¨å’Œå¹¶å‘æœåŠ¡å™¨æœ‰ä½•åŒºåˆ«ï¼Ÿ"><a href="#3-è¿­ä»£æœåŠ¡å™¨å’Œå¹¶å‘æœåŠ¡å™¨æœ‰ä½•åŒºåˆ«ï¼Ÿ" class="headerlink" title="3. è¿­ä»£æœåŠ¡å™¨å’Œå¹¶å‘æœåŠ¡å™¨æœ‰ä½•åŒºåˆ«ï¼Ÿ"></a>3. è¿­ä»£æœåŠ¡å™¨å’Œå¹¶å‘æœåŠ¡å™¨æœ‰ä½•åŒºåˆ«ï¼Ÿ</h3><p>è¿­ä»£æœåŠ¡å™¨è´Ÿè´£å¤„ç†è¯·æ±‚å¹¶å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚å¹¶å‘æœåŠ¡å™¨æœ¬èº«å¹¶ä¸å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå®ƒå°†è¯·æ±‚å‘é€ç»™ä¸€ä¸ªçº¿ç¨‹æˆ–è€…è¿›ç¨‹ï¼Œå¹¶ç­‰å¾…ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚</p><h3 id="4-å¦‚æœè¦è®¾è®¡ä¸€ä¸ªè´­ç‰©ç½‘ç«™ï¼Œåœ¨è¿›è¡ŒæœåŠ¡å™¨è®¾è®¡çš„æ—¶å€™åº”è¯¥é‡‡ç”¨æœ‰çŠ¶æ€æœåŠ¡å™¨è¿˜æ˜¯æ— çŠ¶æ€æœåŠ¡å™¨ï¼Ÿè¯´æ˜ä½ åšå‡ºæ­¤ç§çš„é€‰æ‹©çš„åŸå› ã€‚"><a href="#4-å¦‚æœè¦è®¾è®¡ä¸€ä¸ªè´­ç‰©ç½‘ç«™ï¼Œåœ¨è¿›è¡ŒæœåŠ¡å™¨è®¾è®¡çš„æ—¶å€™åº”è¯¥é‡‡ç”¨æœ‰çŠ¶æ€æœåŠ¡å™¨è¿˜æ˜¯æ— çŠ¶æ€æœåŠ¡å™¨ï¼Ÿè¯´æ˜ä½ åšå‡ºæ­¤ç§çš„é€‰æ‹©çš„åŸå› ã€‚" class="headerlink" title="4. å¦‚æœè¦è®¾è®¡ä¸€ä¸ªè´­ç‰©ç½‘ç«™ï¼Œåœ¨è¿›è¡ŒæœåŠ¡å™¨è®¾è®¡çš„æ—¶å€™åº”è¯¥é‡‡ç”¨æœ‰çŠ¶æ€æœåŠ¡å™¨è¿˜æ˜¯æ— çŠ¶æ€æœåŠ¡å™¨ï¼Ÿè¯´æ˜ä½ åšå‡ºæ­¤ç§çš„é€‰æ‹©çš„åŸå› ã€‚"></a>4. å¦‚æœè¦è®¾è®¡ä¸€ä¸ªè´­ç‰©ç½‘ç«™ï¼Œåœ¨è¿›è¡ŒæœåŠ¡å™¨è®¾è®¡çš„æ—¶å€™åº”è¯¥é‡‡ç”¨æœ‰çŠ¶æ€æœåŠ¡å™¨è¿˜æ˜¯æ— çŠ¶æ€æœåŠ¡å™¨ï¼Ÿè¯´æ˜ä½ åšå‡ºæ­¤ç§çš„é€‰æ‹©çš„åŸå› ã€‚</h3><p>é‡‡ç”¨æœ‰çŠ¶æ€æœåŠ¡å™¨ã€‚å› ä¸ºæœ‰çŠ¶æ€æœåŠ¡å™¨ç»´æŠ¤å®¢æˆ·ä¿¡æ¯ï¼Œå¦‚æœæœåŠ¡å™¨å¤±è´¥ï¼Œå…¶ä¸Šçš„æ‰€æœ‰çŠ¶æ€å¿…é¡»æ¢å¤ã€‚åœ¨è´­ç‰©æ—¶ï¼ŒæœåŠ¡å™¨éœ€è¦è®°å½•å®¢æˆ·å¾ˆå¤šçš„ç›¸å…³ä¿¡æ¯ã€‚</p><h3 id="5-ä»€ä¹ˆæ˜¯è½¯ä»¶ä»£ç†ï¼Ÿè‹¥è¦è®¾è®¡ä¸€ä¸ªä¸ªäººç§˜ä¹¦ç³»ç»Ÿï¼Œå¸Œæœ›æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚æœé›†ç”¨æˆ·æ„Ÿå…´è¶£çš„ä¿¡æ¯ï¼Œå¯ä»¥é€‰æ‹©æ€æ ·çš„è½¯ä»¶ä»£ç†å®ç°ä»€ä¹ˆæ ·çš„åŠŸèƒ½ï¼ˆè‡³å°‘è®¾è®¡å‡º3ä¸ªåŠŸèƒ½ï¼‰"><a href="#5-ä»€ä¹ˆæ˜¯è½¯ä»¶ä»£ç†ï¼Ÿè‹¥è¦è®¾è®¡ä¸€ä¸ªä¸ªäººç§˜ä¹¦ç³»ç»Ÿï¼Œå¸Œæœ›æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚æœé›†ç”¨æˆ·æ„Ÿå…´è¶£çš„ä¿¡æ¯ï¼Œå¯ä»¥é€‰æ‹©æ€æ ·çš„è½¯ä»¶ä»£ç†å®ç°ä»€ä¹ˆæ ·çš„åŠŸèƒ½ï¼ˆè‡³å°‘è®¾è®¡å‡º3ä¸ªåŠŸèƒ½ï¼‰" class="headerlink" title="5. ä»€ä¹ˆæ˜¯è½¯ä»¶ä»£ç†ï¼Ÿè‹¥è¦è®¾è®¡ä¸€ä¸ªä¸ªäººç§˜ä¹¦ç³»ç»Ÿï¼Œå¸Œæœ›æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚æœé›†ç”¨æˆ·æ„Ÿå…´è¶£çš„ä¿¡æ¯ï¼Œå¯ä»¥é€‰æ‹©æ€æ ·çš„è½¯ä»¶ä»£ç†å®ç°ä»€ä¹ˆæ ·çš„åŠŸèƒ½ï¼ˆè‡³å°‘è®¾è®¡å‡º3ä¸ªåŠŸèƒ½ï¼‰"></a>5. ä»€ä¹ˆæ˜¯è½¯ä»¶ä»£ç†ï¼Ÿè‹¥è¦è®¾è®¡ä¸€ä¸ªä¸ªäººç§˜ä¹¦ç³»ç»Ÿï¼Œå¸Œæœ›æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚æœé›†ç”¨æˆ·æ„Ÿå…´è¶£çš„ä¿¡æ¯ï¼Œå¯ä»¥é€‰æ‹©æ€æ ·çš„è½¯ä»¶ä»£ç†å®ç°ä»€ä¹ˆæ ·çš„åŠŸèƒ½ï¼ˆè‡³å°‘è®¾è®¡å‡º3ä¸ªåŠŸèƒ½ï¼‰</h3><p>è½¯ä»¶ä»£ç†æ˜¯ä¸€ä¸ªè‡ªæ²»çš„è¿›ç¨‹ï¼Œèƒ½å¤Ÿåœ¨å…¶æ‰€åœ¨ç¯å¢ƒä¸­åˆ›å»ºå¹¶åˆå§‹åŒ–å˜åŒ–ï¼Œå¹¶å¯ä»¥ä¸ç”¨æˆ·æˆ–è€…å…¶ä»–ä»£ç†è¿›è¡Œåä½œã€‚<br>å¯ä»¥é€‰æ‹©çš„ä»£ç†ï¼Œæ¯”å¦‚æ¥å£ä»£ç†ï¼Œå¯ä»¥æä¾›ç”¨æˆ·ä½¿ç”¨æ–¹ä¾¿èˆ’é€‚çš„æ¥å£ï¼›æˆ–è€…é€‰æ‹©æ•°æ®ä»£ç†ï¼Œå¯ä»¥ä¸ºç”¨æˆ·æä¾›æ•°æ®çš„åˆ†ç±»å’Œè¿‡æ»¤ç­‰ç­‰ã€‚</p><h3 id="6-8åˆ†-å‡è®¾å¤„ç†å™¨Pæœ‰ä¸€ä¸ªæ–°ä»»åŠ¡Tï¼Œå¯ä»¥æœ‰ä¸‹é¢çš„ä¸‰ä¸ªç®—æ³•æ¥å®ç°å¤„ç†å™¨ä»»åŠ¡åˆ†é…"><a href="#6-8åˆ†-å‡è®¾å¤„ç†å™¨Pæœ‰ä¸€ä¸ªæ–°ä»»åŠ¡Tï¼Œå¯ä»¥æœ‰ä¸‹é¢çš„ä¸‰ä¸ªç®—æ³•æ¥å®ç°å¤„ç†å™¨ä»»åŠ¡åˆ†é…" class="headerlink" title="6. (8åˆ†)å‡è®¾å¤„ç†å™¨Pæœ‰ä¸€ä¸ªæ–°ä»»åŠ¡Tï¼Œå¯ä»¥æœ‰ä¸‹é¢çš„ä¸‰ä¸ªç®—æ³•æ¥å®ç°å¤„ç†å™¨ä»»åŠ¡åˆ†é…"></a>6. (8åˆ†)å‡è®¾å¤„ç†å™¨Pæœ‰ä¸€ä¸ªæ–°ä»»åŠ¡Tï¼Œå¯ä»¥æœ‰ä¸‹é¢çš„ä¸‰ä¸ªç®—æ³•æ¥å®ç°å¤„ç†å™¨ä»»åŠ¡åˆ†é…</h3><p>ç®—æ³•Aï¼š<br>ï¼ˆiï¼‰æœé›†æ‰€æœ‰å¤„ç†å™¨ï¼ˆåŒ…æ‹¬Pè‡ªå·±ï¼‰çš„è´Ÿè½½ä¿¡æ¯ï¼›<br>ï¼ˆiiï¼‰é€‰æ‹©è´Ÿè½½æœ€ä½çš„å¤„ç†å™¨ï¼Œå¹¶å°†ä»»åŠ¡åˆ†é…ç»™è´Ÿè½½æœ€ä½çš„å¤„ç†å™¨ï¼›<br>ï¼ˆiiiï¼‰ç®—æ³•ç»“æŸã€‚<br>ç®—æ³•B:<br>ï¼ˆiï¼‰éšæœºé€‰æ‹©ä¸€ä¸ªå¤„ç†å™¨Qï¼Œè¯¢é—®å…¶è´Ÿè½½æƒ…å†µ;<br>ï¼ˆiiï¼‰è‹¥Qæ¬ è½½ï¼Œåˆ™å°†Tåˆ†é…ç»™Qï¼Œç®—æ³•ç»“æŸï¼›<br>ï¼ˆiiiï¼‰å¦åˆ™ç»§ç»­æ‰§è¡Œï¼ˆiï¼‰<br>ç®—æ³•C:<br>ï¼ˆiï¼‰éšæœºé€‰æ‹©ä¸€ä¸ªå¤„ç†å™¨Qï¼Œè¯¢é—®å…¶è´Ÿè½½æƒ…å†µ;<br>ï¼ˆiiï¼‰è‹¥Qæ¬ è½½ï¼Œåˆ™å°†Tåˆ†é…ç»™Qï¼Œç®—æ³•ç»“æŸï¼›<br>ï¼ˆiiiï¼‰å¦åˆ™ï¼Œå¦‚æœå·²ç»æ‰§è¡Œï¼ˆiï¼‰Kæ¬¡ï¼Œåˆ™å°†Tç•™åœ¨æœ¬åœ°æ‰§è¡Œï¼Œå¦åˆ™ç»§ç»­æ‰§è¡Œï¼ˆiï¼‰<br>è¯·é—®ï¼š<br>ï¼ˆ1ï¼‰ï¼ˆ2åˆ†ï¼‰ä¸Šé¢ä¸‰ä¸ªç®—æ³•å“ªä¸ªæ˜¯ç¡®å®šæ€§ç®—æ³•ï¼Ÿå“ªä¸ªæ˜¯å¯å‘å¼ç®—æ³•ï¼Ÿ<br>ç®—æ³•Aæ˜¯ç¡®å®šæ€§ç®—æ³•ï¼ŒBå’ŒCæ˜¯å¯å‘å¼ç®—æ³•ã€‚<br>ï¼ˆ2ï¼‰ï¼ˆ4åˆ†ï¼‰ç®—æ³•Bå’Œç®—æ³•Cå¾ˆç›¸ä¼¼ï¼Œè¯·é—®å“ªä¸ªç®—æ³•å¯è¡Œæ€§æ›´å¼ºï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ<br>ç®—æ³•Bæœ‰å¯èƒ½ä¸èƒ½åœ¨æœ‰é™æ­¥éª¤å†…ç»“æŸï¼Œå› æ­¤æ˜¯ä¸ªé”™è¯¯çš„ç®—æ³•ã€‚è€Œç®—æ³•Cåˆ™å¯ä»¥åœ¨æœ‰é™æ­¥éª¤å†…ç»“æŸï¼Œå¯è¡Œæ€§å¼ºã€‚<br>ï¼ˆ3ï¼‰ï¼ˆ2åˆ†ï¼‰ç®—æ³•Cæ˜¯å¦è¿˜å¯ä»¥ä¼˜åŒ–ï¼Ÿ<br>å¯ä»¥æœ‰å„ç§ä¼˜åŒ–æ–¹å¼ã€‚æ¯”å¦‚ï¼Œåªæœ‰åœ¨æœ¬åœ°æœºå™¨è¿‡è½½çš„æƒ…å†µä¸‹æ‰å¼€å§‹è¯¢é—®å…¶ä»–æœºå™¨ï¼›æˆ–è€…ç”¨å¤šæ’­æœºåˆ¶å‘é€Kä¸ªæ¶ˆæ¯è¯¢é—®Kå°æœºå™¨çš„è´Ÿè½½æƒ…å†µï¼Œç„¶åé€‰æ‹©è´Ÿè½½æœ€å°çš„æœºå™¨æ‰§è¡Œè¿›ç¨‹ã€‚</p><h2 id="ç¬¬å››ç« ä½œä¸š"><a href="#ç¬¬å››ç« ä½œä¸š" class="headerlink" title="ç¬¬å››ç« ä½œä¸š"></a>ç¬¬å››ç« ä½œä¸š</h2><h3 id="1-åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ‰å¹³å¼å‘½åæ–¹å¼ï¼ˆflat-namingï¼‰å’Œåå­—ç©ºé—´çš„å‘½åæ–¹å¼ï¼ˆname-spaceï¼‰çš„ä¸»è¦åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ‰å¹³å¼å‘½åæ–¹å¼ï¼ˆflat-namingï¼‰å’Œåå­—ç©ºé—´çš„å‘½åæ–¹å¼ï¼ˆname-spaceï¼‰çš„ä¸»è¦åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ‰å¹³å¼å‘½åæ–¹å¼ï¼ˆflat namingï¼‰å’Œåå­—ç©ºé—´çš„å‘½åæ–¹å¼ï¼ˆname spaceï¼‰çš„ä¸»è¦åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>1. åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ‰å¹³å¼å‘½åæ–¹å¼ï¼ˆflat namingï¼‰å’Œåå­—ç©ºé—´çš„å‘½åæ–¹å¼ï¼ˆname spaceï¼‰çš„ä¸»è¦åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>æ‰å¹³å¼å‘½åæ–¹å¼ä½¿ç”¨IDå”¯ä¸€è¡¨ç¤ºå®ä½“ï¼Œæ²¡æœ‰ç»“æ„ï¼Œä¸åŒ…å«ä»»ä½•å…³äºå¦‚ä½•å®šä½å®ä½“è®¿é—®ç‚¹çš„ä»»ä½•ä¿¡æ¯ã€‚<br>åå­—ç©ºé—´æ˜¯ä¸€ä¸ªæœ‰æ ‡ç­¾çš„æœ‰å‘å›¾ï¼Œå®ƒæ˜¯ç»“æ„åŒ–çš„åå­—ã€‚</p><h3 id="2-åœ¨æ‰å¹³å¼å‘½åæ–¹å¼ä¸­ä½¿ç”¨çš„å±‚æ¬¡åŒ–æ–¹æ³•æ¥å®šä½ä¸€ä¸ªå®ä½“çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå…¶æ’å…¥å’ŒæŸ¥æ‰¾å¯ä»¥ä½“ç°å±€éƒ¨æ€§ï¼Ÿ"><a href="#2-åœ¨æ‰å¹³å¼å‘½åæ–¹å¼ä¸­ä½¿ç”¨çš„å±‚æ¬¡åŒ–æ–¹æ³•æ¥å®šä½ä¸€ä¸ªå®ä½“çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå…¶æ’å…¥å’ŒæŸ¥æ‰¾å¯ä»¥ä½“ç°å±€éƒ¨æ€§ï¼Ÿ" class="headerlink" title="2. åœ¨æ‰å¹³å¼å‘½åæ–¹å¼ä¸­ä½¿ç”¨çš„å±‚æ¬¡åŒ–æ–¹æ³•æ¥å®šä½ä¸€ä¸ªå®ä½“çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå…¶æ’å…¥å’ŒæŸ¥æ‰¾å¯ä»¥ä½“ç°å±€éƒ¨æ€§ï¼Ÿ"></a>2. åœ¨æ‰å¹³å¼å‘½åæ–¹å¼ä¸­ä½¿ç”¨çš„å±‚æ¬¡åŒ–æ–¹æ³•æ¥å®šä½ä¸€ä¸ªå®ä½“çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå…¶æ’å…¥å’ŒæŸ¥æ‰¾å¯ä»¥ä½“ç°å±€éƒ¨æ€§ï¼Ÿ</h3><p>å› ä¸ºåœ¨å±‚æ¬¡åŒ–æ–¹æ³•ä¸­ï¼Œç½‘ç»œè¢«åˆ†ä¸ºäº†è‹¥å¹²ä¸ªåŸŸï¼Œé¡¶å±‚ä¸æ‰©å±•æ•´ä¸ªç½‘ç»œï¼Œæ¯ä¸ªåŸŸåˆ‡åˆ†ä¸ºå¤šä¸ªæ›´å°çš„åŸŸï¼Œæ¯ä¸ªåŸŸDä¸­çš„æ¯ä¸ªå®ä½“Eéƒ½åœ¨dir(D)ä¸­æœ‰ä½ç½®è®°å½•ã€‚å› æ­¤åœ¨ä¿®æ”¹æˆ–è€…æŸ¥æ‰¾çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½å¯ä»¥åœ¨é¥±å«äº†æ“ä½œå‘èµ·ç‚¹å’Œç›®æ ‡ç‚¹çš„æœ€å°åŸŸé‡Œè§£å†³ï¼Œå› æ­¤ä½“ç°äº†å±€éƒ¨æ€§ã€‚</p><h3 id="3-åœ¨å›¾ä¸­ç»™å‡ºçš„åå­—ç©ºé—´ä¸­ï¼Œè¯·ä¸ºæ ‡è®°ä¸ºAçš„å®ä½“ç»™å‡ºä¸€ä¸ªç»å¯¹è·¯å¾„åå’Œä»»æ„ä¸€ä¸ªç›¸å¯¹è·¯å¾„åã€‚"><a href="#3-åœ¨å›¾ä¸­ç»™å‡ºçš„åå­—ç©ºé—´ä¸­ï¼Œè¯·ä¸ºæ ‡è®°ä¸ºAçš„å®ä½“ç»™å‡ºä¸€ä¸ªç»å¯¹è·¯å¾„åå’Œä»»æ„ä¸€ä¸ªç›¸å¯¹è·¯å¾„åã€‚" class="headerlink" title="3. åœ¨å›¾ä¸­ç»™å‡ºçš„åå­—ç©ºé—´ä¸­ï¼Œè¯·ä¸ºæ ‡è®°ä¸ºAçš„å®ä½“ç»™å‡ºä¸€ä¸ªç»å¯¹è·¯å¾„åå’Œä»»æ„ä¸€ä¸ªç›¸å¯¹è·¯å¾„åã€‚"></a>3. åœ¨å›¾ä¸­ç»™å‡ºçš„åå­—ç©ºé—´ä¸­ï¼Œè¯·ä¸ºæ ‡è®°ä¸ºAçš„å®ä½“ç»™å‡ºä¸€ä¸ªç»å¯¹è·¯å¾„åå’Œä»»æ„ä¸€ä¸ªç›¸å¯¹è·¯å¾„åã€‚</h3><p><img src="/2019/06/15/%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A%E4%B8%8E%E8%A7%A3%E7%AD%94/2019-06-21-13-31-47.png" alt><br>ç»å¯¹è·¯å¾„åï¼šk: /vu/home/steen/mbox<br>ç›¸å¯¹è·¯å¾„åï¼šn0: /home/steen/mbox</p><h3 id="4-ä¸ºä»€ä¹ˆç¼“å­˜å¯ä»¥æå‡åå­—æœåŠ¡çš„å¯ç”¨æ€§ï¼Ÿ"><a href="#4-ä¸ºä»€ä¹ˆç¼“å­˜å¯ä»¥æå‡åå­—æœåŠ¡çš„å¯ç”¨æ€§ï¼Ÿ" class="headerlink" title="4. ä¸ºä»€ä¹ˆç¼“å­˜å¯ä»¥æå‡åå­—æœåŠ¡çš„å¯ç”¨æ€§ï¼Ÿ"></a>4. ä¸ºä»€ä¹ˆç¼“å­˜å¯ä»¥æå‡åå­—æœåŠ¡çš„å¯ç”¨æ€§ï¼Ÿ</h3><p>åå­—è§£æè¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤šæ­¥éª¤çš„ç»“æœéƒ½æ˜¯ä¸å˜åŒ–çš„ï¼Œå› æ­¤ä½¿ç”¨ç¼“å­˜å¯ä»¥å¤§å¤§æå‡åå­—æœåŠ¡çš„å¯ç”¨æ€§ã€‚</p><h3 id="5-ä¸ºä»€ä¹ˆè¦åˆ é™¤ä¸è¢«å¼•ç”¨çš„å®ä½“ï¼Ÿè¯·è§£é‡Šçº¯ç²¹é‡‡ç”¨å¼•ç”¨å›¾çš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Ÿ"><a href="#5-ä¸ºä»€ä¹ˆè¦åˆ é™¤ä¸è¢«å¼•ç”¨çš„å®ä½“ï¼Ÿè¯·è§£é‡Šçº¯ç²¹é‡‡ç”¨å¼•ç”¨å›¾çš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Ÿ" class="headerlink" title="5. ä¸ºä»€ä¹ˆè¦åˆ é™¤ä¸è¢«å¼•ç”¨çš„å®ä½“ï¼Ÿè¯·è§£é‡Šçº¯ç²¹é‡‡ç”¨å¼•ç”¨å›¾çš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Ÿ"></a>5. ä¸ºä»€ä¹ˆè¦åˆ é™¤ä¸è¢«å¼•ç”¨çš„å®ä½“ï¼Ÿè¯·è§£é‡Šçº¯ç²¹é‡‡ç”¨å¼•ç”¨å›¾çš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h3><p>å› ä¸ºåˆ é™¤æ— å¼•ç”¨å®ä½“å¯ä»¥èŠ‚çœèµ„æºã€‚<br>å½“çº¯ç²¹é‡‡ç”¨å¼•ç”¨å›¾æ–¹å¼è§£å†³é—®é¢˜æ—¶ï¼Œå¾ˆéš¾ç»´æŠ¤ä¸€ä¸ªå…¨å±€çš„å¼•ç”¨å›¾ï¼Œå¹¶ä¸”éœ€è¦ç¡®å®šæ ¹é›†ï¼Œç”±æ ¹é›†è´Ÿè´£å‘èµ·ç®—æ³•ï¼Œè¿™äº›é›†ä¸­å¼çš„ç‰¹ç‚¹ä¸é€‚ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿçš„æ‰©å±•æ€§ã€‚</p><h3 id="6-ä»€ä¹ˆæ˜¯å¹‚ç­‰æ“ä½œï¼Ÿä¸ºä»€ä¹ˆåœ¨åˆ é™¤ä¸è¢«å¼•ç”¨çš„å®ä½“çš„æ—¶å€™é‡‡ç”¨å¼•ç”¨åˆ—è¡¨æ–¹å¼æ¥å¯ä»¥åˆ©ç”¨åˆ°å¹‚ç­‰æ“ä½œçš„ç‰¹æ€§ï¼Œè€Œé‡‡ç”¨ç®€å•å¼•ç”¨è®¡æ•°çš„æ–¹æ³•å°±ä¸å¯ä»¥ï¼Ÿ"><a href="#6-ä»€ä¹ˆæ˜¯å¹‚ç­‰æ“ä½œï¼Ÿä¸ºä»€ä¹ˆåœ¨åˆ é™¤ä¸è¢«å¼•ç”¨çš„å®ä½“çš„æ—¶å€™é‡‡ç”¨å¼•ç”¨åˆ—è¡¨æ–¹å¼æ¥å¯ä»¥åˆ©ç”¨åˆ°å¹‚ç­‰æ“ä½œçš„ç‰¹æ€§ï¼Œè€Œé‡‡ç”¨ç®€å•å¼•ç”¨è®¡æ•°çš„æ–¹æ³•å°±ä¸å¯ä»¥ï¼Ÿ" class="headerlink" title="6. ä»€ä¹ˆæ˜¯å¹‚ç­‰æ“ä½œï¼Ÿä¸ºä»€ä¹ˆåœ¨åˆ é™¤ä¸è¢«å¼•ç”¨çš„å®ä½“çš„æ—¶å€™é‡‡ç”¨å¼•ç”¨åˆ—è¡¨æ–¹å¼æ¥å¯ä»¥åˆ©ç”¨åˆ°å¹‚ç­‰æ“ä½œçš„ç‰¹æ€§ï¼Œè€Œé‡‡ç”¨ç®€å•å¼•ç”¨è®¡æ•°çš„æ–¹æ³•å°±ä¸å¯ä»¥ï¼Ÿ"></a>6. ä»€ä¹ˆæ˜¯å¹‚ç­‰æ“ä½œï¼Ÿä¸ºä»€ä¹ˆåœ¨åˆ é™¤ä¸è¢«å¼•ç”¨çš„å®ä½“çš„æ—¶å€™é‡‡ç”¨å¼•ç”¨åˆ—è¡¨æ–¹å¼æ¥å¯ä»¥åˆ©ç”¨åˆ°å¹‚ç­‰æ“ä½œçš„ç‰¹æ€§ï¼Œè€Œé‡‡ç”¨ç®€å•å¼•ç”¨è®¡æ•°çš„æ–¹æ³•å°±ä¸å¯ä»¥ï¼Ÿ</h3><p>ä¸€ä¸ªæ“ä½œå¤šæ¬¡æ‰§è¡Œçš„ç»“æœå’Œä¸€æ¬¡æ‰§è¡Œçš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä¸ä¼šå› ä¸ºå¤šæ¬¡æ‰§è¡Œè€Œäº§ç”Ÿå‰¯ä½œç”¨ã€‚<br>ä½¿ç”¨ç®€å•è®¡æ•°æ³•æ—¶è®¡æ•°å¢åŠ å’Œå‡å°‘çš„æ“ä½œéƒ½ä¸æ˜¯å¹‚ç­‰æ“ä½œï¼›è€Œé‡‡ç”¨å¼•ç”¨åˆ—è¡¨æ—¶æ’å…¥å’Œåˆ é™¤æ“ä½œéƒ½æ˜¯å¹‚ç­‰æ“ä½œã€‚å› æ­¤åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å› ä¸ºé€šä¿¡çš„ä¸å¯é æ€§çš„å­˜åœ¨ï¼Œå¹‚ç­‰æ“ä½œçš„å­˜åœ¨å¯ä»¥éå¸¸é€‚åº”ã€‚</p><h3 id="7-åœ¨ä½¿ç”¨æ ‡è®°ä¸å¯è¾¾å¯¹è±¡çš„è·Ÿè¸ªæ–¹æ¡ˆåˆ é™¤ä¸è¢«å¼•ç”¨çš„å®ä½“æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªæ–¹æ¡ˆï¼šä¸€ä¸ªæ˜¯ä»æ ¹é›†å‡ºå‘ï¼Œæ ‡è®°æ‰€æœ‰å¯è¾¾å®ä½“ï¼Œä»è€Œåˆ é™¤æ‰€æœ‰ä¸å¯è¾¾å®ä½“ï¼›ä¸€ä¸ªæ˜¯é‡‡ç”¨ç»„å†…è·Ÿè¸ªæ–¹æ¡ˆï¼Œå…ˆåœ¨ä¸€ä¸ªè¿›ç¨‹ç»„ä¸­æ ‡è®°æ‰€æœ‰å¤–éƒ¨å¯è¾¾å®ä½“ï¼Œåˆ é™¤åƒåœ¾ï¼Œç„¶åå†æ‰©å¤§ç»„çš„èŒƒå›´ã€‚è¯·è§£é‡Šè¿™ä¸¤ç§æ–¹æ¡ˆå„æœ‰ä½•åˆ©å¼Šã€‚"><a href="#7-åœ¨ä½¿ç”¨æ ‡è®°ä¸å¯è¾¾å¯¹è±¡çš„è·Ÿè¸ªæ–¹æ¡ˆåˆ é™¤ä¸è¢«å¼•ç”¨çš„å®ä½“æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªæ–¹æ¡ˆï¼šä¸€ä¸ªæ˜¯ä»æ ¹é›†å‡ºå‘ï¼Œæ ‡è®°æ‰€æœ‰å¯è¾¾å®ä½“ï¼Œä»è€Œåˆ é™¤æ‰€æœ‰ä¸å¯è¾¾å®ä½“ï¼›ä¸€ä¸ªæ˜¯é‡‡ç”¨ç»„å†…è·Ÿè¸ªæ–¹æ¡ˆï¼Œå…ˆåœ¨ä¸€ä¸ªè¿›ç¨‹ç»„ä¸­æ ‡è®°æ‰€æœ‰å¤–éƒ¨å¯è¾¾å®ä½“ï¼Œåˆ é™¤åƒåœ¾ï¼Œç„¶åå†æ‰©å¤§ç»„çš„èŒƒå›´ã€‚è¯·è§£é‡Šè¿™ä¸¤ç§æ–¹æ¡ˆå„æœ‰ä½•åˆ©å¼Šã€‚" class="headerlink" title="7. åœ¨ä½¿ç”¨æ ‡è®°ä¸å¯è¾¾å¯¹è±¡çš„è·Ÿè¸ªæ–¹æ¡ˆåˆ é™¤ä¸è¢«å¼•ç”¨çš„å®ä½“æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªæ–¹æ¡ˆï¼šä¸€ä¸ªæ˜¯ä»æ ¹é›†å‡ºå‘ï¼Œæ ‡è®°æ‰€æœ‰å¯è¾¾å®ä½“ï¼Œä»è€Œåˆ é™¤æ‰€æœ‰ä¸å¯è¾¾å®ä½“ï¼›ä¸€ä¸ªæ˜¯é‡‡ç”¨ç»„å†…è·Ÿè¸ªæ–¹æ¡ˆï¼Œå…ˆåœ¨ä¸€ä¸ªè¿›ç¨‹ç»„ä¸­æ ‡è®°æ‰€æœ‰å¤–éƒ¨å¯è¾¾å®ä½“ï¼Œåˆ é™¤åƒåœ¾ï¼Œç„¶åå†æ‰©å¤§ç»„çš„èŒƒå›´ã€‚è¯·è§£é‡Šè¿™ä¸¤ç§æ–¹æ¡ˆå„æœ‰ä½•åˆ©å¼Šã€‚"></a>7. åœ¨ä½¿ç”¨æ ‡è®°ä¸å¯è¾¾å¯¹è±¡çš„è·Ÿè¸ªæ–¹æ¡ˆåˆ é™¤ä¸è¢«å¼•ç”¨çš„å®ä½“æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªæ–¹æ¡ˆï¼šä¸€ä¸ªæ˜¯ä»æ ¹é›†å‡ºå‘ï¼Œæ ‡è®°æ‰€æœ‰å¯è¾¾å®ä½“ï¼Œä»è€Œåˆ é™¤æ‰€æœ‰ä¸å¯è¾¾å®ä½“ï¼›ä¸€ä¸ªæ˜¯é‡‡ç”¨ç»„å†…è·Ÿè¸ªæ–¹æ¡ˆï¼Œå…ˆåœ¨ä¸€ä¸ªè¿›ç¨‹ç»„ä¸­æ ‡è®°æ‰€æœ‰å¤–éƒ¨å¯è¾¾å®ä½“ï¼Œåˆ é™¤åƒåœ¾ï¼Œç„¶åå†æ‰©å¤§ç»„çš„èŒƒå›´ã€‚è¯·è§£é‡Šè¿™ä¸¤ç§æ–¹æ¡ˆå„æœ‰ä½•åˆ©å¼Šã€‚</h3><p>ç¬¬ä¸€ç§æ–¹æ³•ä¼¸ç¼©æ€§å¾ˆå·®ï¼Œå› ä¸ºéœ€è¦è·Ÿè¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œæ˜¯ä¸ªé›†ä¸­å¼ç®—æ³•ã€‚<br>ç¬¬äºŒç§æ–¹æ³•å¯ä»¥é€‚åº”äºåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¯ä»¥è§£å†³ä¼¸ç¼©æ€§é—®é¢˜</p><h2 id="ç¬¬äº”ç« ä½œä¸š"><a href="#ç¬¬äº”ç« ä½œä¸š" class="headerlink" title="ç¬¬äº”ç« ä½œä¸š"></a>ç¬¬äº”ç« ä½œä¸š</h2><h3 id="1-Cristianç®—æ³•å’ŒBerkeleyç®—æ³•å“ªä¸€ä¸ªç®—æ³•å¯ä»¥ä¿è¯ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ—¶é’Ÿå¯ä»¥ä¸UTCä¸€è‡´ï¼Ÿ"><a href="#1-Cristianç®—æ³•å’ŒBerkeleyç®—æ³•å“ªä¸€ä¸ªç®—æ³•å¯ä»¥ä¿è¯ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ—¶é’Ÿå¯ä»¥ä¸UTCä¸€è‡´ï¼Ÿ" class="headerlink" title="1. Cristianç®—æ³•å’ŒBerkeleyç®—æ³•å“ªä¸€ä¸ªç®—æ³•å¯ä»¥ä¿è¯ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ—¶é’Ÿå¯ä»¥ä¸UTCä¸€è‡´ï¼Ÿ"></a>1. Cristianç®—æ³•å’ŒBerkeleyç®—æ³•å“ªä¸€ä¸ªç®—æ³•å¯ä»¥ä¿è¯ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ—¶é’Ÿå¯ä»¥ä¸UTCä¸€è‡´ï¼Ÿ</h3><p>ç­”ï¼šåªæœ‰Cristianç®—æ³•ç»´æŒäº†ä¸€ä¸ªæ‹¥æœ‰WWVæ¥æ”¶å™¨çš„Time serverï¼Œè®©æ‰€æœ‰å…¶ä»–çš„æœºå™¨ä¸Time serverä¸€è‡´ã€‚è€ŒBerkeleyç®—æ³•åªæ˜¯ç»´æŒæ‰€æœ‰æœºå™¨æ—¶é—´ä¸€è‡´ã€‚</p><h3 id="2-åœ¨ä¸‹å›¾ä¸­ï¼Œæœ‰ä¸‰ä¸ªè¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹ä¸Šçš„åœ†ç‚¹è¡¨ç¤ºè¿™ä¸ªè¿›ç¨‹ä¸Šå‘ç”Ÿçš„äº‹ä»¶ï¼Œäº‹ä»¶ä¹‹é—´çš„æœ‰ç®­å¤´çš„çº¿è¡¨ç¤ºä¸€ä¸ªæ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶ï¼Œè¯·åœ¨æ‹¬å·ä¸­å†™å‡ºä¸‹é¢å››å¯¹äº‹ä»¶ä¹‹é—´çš„å…³ç³»ã€ç”¨a-gt-bè¡¨ç¤ºäº‹ä»¶aä¸äº‹ä»¶bæœ‰happens-beforeå…³ç³»ï¼Œå¦åˆ™ç”¨a-x-bè¡¨ç¤ºäº‹ä»¶aå’Œbä¹‹é—´æ²¡æœ‰happens-beforeå…³ç³»ã€‘"><a href="#2-åœ¨ä¸‹å›¾ä¸­ï¼Œæœ‰ä¸‰ä¸ªè¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹ä¸Šçš„åœ†ç‚¹è¡¨ç¤ºè¿™ä¸ªè¿›ç¨‹ä¸Šå‘ç”Ÿçš„äº‹ä»¶ï¼Œäº‹ä»¶ä¹‹é—´çš„æœ‰ç®­å¤´çš„çº¿è¡¨ç¤ºä¸€ä¸ªæ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶ï¼Œè¯·åœ¨æ‹¬å·ä¸­å†™å‡ºä¸‹é¢å››å¯¹äº‹ä»¶ä¹‹é—´çš„å…³ç³»ã€ç”¨a-gt-bè¡¨ç¤ºäº‹ä»¶aä¸äº‹ä»¶bæœ‰happens-beforeå…³ç³»ï¼Œå¦åˆ™ç”¨a-x-bè¡¨ç¤ºäº‹ä»¶aå’Œbä¹‹é—´æ²¡æœ‰happens-beforeå…³ç³»ã€‘" class="headerlink" title="2. åœ¨ä¸‹å›¾ä¸­ï¼Œæœ‰ä¸‰ä¸ªè¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹ä¸Šçš„åœ†ç‚¹è¡¨ç¤ºè¿™ä¸ªè¿›ç¨‹ä¸Šå‘ç”Ÿçš„äº‹ä»¶ï¼Œäº‹ä»¶ä¹‹é—´çš„æœ‰ç®­å¤´çš„çº¿è¡¨ç¤ºä¸€ä¸ªæ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶ï¼Œè¯·åœ¨æ‹¬å·ä¸­å†™å‡ºä¸‹é¢å››å¯¹äº‹ä»¶ä¹‹é—´çš„å…³ç³»ã€ç”¨a -&gt; bè¡¨ç¤ºäº‹ä»¶aä¸äº‹ä»¶bæœ‰happens beforeå…³ç³»ï¼Œå¦åˆ™ç”¨a x bè¡¨ç¤ºäº‹ä»¶aå’Œbä¹‹é—´æ²¡æœ‰happens beforeå…³ç³»ã€‘"></a>2. åœ¨ä¸‹å›¾ä¸­ï¼Œæœ‰ä¸‰ä¸ªè¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹ä¸Šçš„åœ†ç‚¹è¡¨ç¤ºè¿™ä¸ªè¿›ç¨‹ä¸Šå‘ç”Ÿçš„äº‹ä»¶ï¼Œäº‹ä»¶ä¹‹é—´çš„æœ‰ç®­å¤´çš„çº¿è¡¨ç¤ºä¸€ä¸ªæ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶ï¼Œè¯·åœ¨æ‹¬å·ä¸­å†™å‡ºä¸‹é¢å››å¯¹äº‹ä»¶ä¹‹é—´çš„å…³ç³»ã€ç”¨a -&gt; bè¡¨ç¤ºäº‹ä»¶aä¸äº‹ä»¶bæœ‰happens beforeå…³ç³»ï¼Œå¦åˆ™ç”¨a x bè¡¨ç¤ºäº‹ä»¶aå’Œbä¹‹é—´æ²¡æœ‰happens beforeå…³ç³»ã€‘</h3><p><img src="/2019/06/15/%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A%E4%B8%8E%E8%A7%A3%E7%AD%94/2019-06-21-13-33-55.png" alt><br>ï¼ˆ1ï¼‰P1å’Œq1    ã€    p1 x q1           ã€‘<br>ï¼ˆ2ï¼‰p4å’Œq4    ã€    q4 -&gt; p4           ã€‘<br>ï¼ˆ3ï¼‰p1å’Œr4     ã€    p1 -&gt; r4           ã€‘<br>ï¼ˆ4ï¼‰P4å’Œr1    ã€    p4 x r1           ã€‘</p><h3 id="3-ï¼ˆåˆ†ï¼‰ä¸‹é¢çš„ä¸¤ä¸ªå…¨å±€å¿«ç…§çš„åˆ‡å£æ˜¯å¦æ˜¯ä¸€è‡´çš„åˆ‡å£ï¼Ÿ"><a href="#3-ï¼ˆåˆ†ï¼‰ä¸‹é¢çš„ä¸¤ä¸ªå…¨å±€å¿«ç…§çš„åˆ‡å£æ˜¯å¦æ˜¯ä¸€è‡´çš„åˆ‡å£ï¼Ÿ" class="headerlink" title="3. ï¼ˆåˆ†ï¼‰ä¸‹é¢çš„ä¸¤ä¸ªå…¨å±€å¿«ç…§çš„åˆ‡å£æ˜¯å¦æ˜¯ä¸€è‡´çš„åˆ‡å£ï¼Ÿ"></a>3. ï¼ˆåˆ†ï¼‰ä¸‹é¢çš„ä¸¤ä¸ªå…¨å±€å¿«ç…§çš„åˆ‡å£æ˜¯å¦æ˜¯ä¸€è‡´çš„åˆ‡å£ï¼Ÿ</h3><p> <img src="/2019/06/15/%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%94%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A%E4%B8%8E%E8%A7%A3%E7%AD%94/2019-06-21-13-34-07.png" alt><br>               ï¼ˆaï¼‰                                            ï¼ˆbï¼‰<br>ï¼ˆaï¼‰æ˜¯ä¸€è‡´çš„åˆ‡å£<br>ï¼ˆm1ï¼‰p3å·²å‘é€ç»™p1çš„æ¶ˆæ¯ï¼Œp1è¿˜æœªæ¥æ”¶åˆ°ï¼›ï¼ˆm2ï¼‰p2å·²å‘é€ç»™p3çš„æ¶ˆæ¯ï¼Œp3è¿˜æœªæ”¶åˆ°ï¼›ï¼ˆm3ï¼‰ä»£è¡¨çš„äº‹ä»¶è¿˜æœªå‘ç”Ÿã€‚<br>ï¼ˆbï¼‰æ˜¯ä¸ä¸€è‡´çš„åˆ‡å£<br>ï¼ˆm1ï¼‰p3å·²å‘é€ç»™p1çš„æ¶ˆæ¯ï¼Œp1è¿˜æœªæ¥æ”¶åˆ°ï¼Œæ­¤äº‹ä»¶æ²¡æœ‰é—®é¢˜ï¼›ï¼ˆm2ï¼‰p2å·²å‘é€ç»™p3çš„æ¶ˆæ¯ï¼Œp3è¿˜æœªæ¥æ”¶åˆ°ï¼Œæ­¤äº‹ä»¶ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼›ï¼ˆm3ï¼‰p2å·²æ¥æ”¶åˆ°p1ç»™å…¶å‘é€çš„æ¶ˆæ¯ï¼Œè€Œp1è¿˜æœªå‘é€è¯¥æ¶ˆæ¯ï¼Œä¸ç¬¦åˆäº‹æƒ…å‘å±•çš„é¡ºåºï¼Œå› æ­¤å›¾ï¼ˆbï¼‰ä¸æ˜¯ä¸€è‡´çš„åˆ‡å£ã€‚</p><h3 id="4-ï¼ˆåˆ†ï¼‰å‡è®¾æœ‰ä¸€ä¸ªäº‹åŠ¡ç”¨äºåœ¨ä¸€ä¸ªé“¶è¡Œçš„ä¸¤ä¸ªè´¦æˆ·Aå’ŒBä¹‹é—´è¿›è¡Œè½¬è´¦100å…ƒé’±ã€‚å†™æ³•å¦‚ä¸‹ï¼š"><a href="#4-ï¼ˆåˆ†ï¼‰å‡è®¾æœ‰ä¸€ä¸ªäº‹åŠ¡ç”¨äºåœ¨ä¸€ä¸ªé“¶è¡Œçš„ä¸¤ä¸ªè´¦æˆ·Aå’ŒBä¹‹é—´è¿›è¡Œè½¬è´¦100å…ƒé’±ã€‚å†™æ³•å¦‚ä¸‹ï¼š" class="headerlink" title="4. ï¼ˆåˆ†ï¼‰å‡è®¾æœ‰ä¸€ä¸ªäº‹åŠ¡ç”¨äºåœ¨ä¸€ä¸ªé“¶è¡Œçš„ä¸¤ä¸ªè´¦æˆ·Aå’ŒBä¹‹é—´è¿›è¡Œè½¬è´¦100å…ƒé’±ã€‚å†™æ³•å¦‚ä¸‹ï¼š"></a>4. ï¼ˆåˆ†ï¼‰å‡è®¾æœ‰ä¸€ä¸ªäº‹åŠ¡ç”¨äºåœ¨ä¸€ä¸ªé“¶è¡Œçš„ä¸¤ä¸ªè´¦æˆ·Aå’ŒBä¹‹é—´è¿›è¡Œè½¬è´¦100å…ƒé’±ã€‚å†™æ³•å¦‚ä¸‹ï¼š</h3><p>Begin-Transaction<br>A=A-100;<br>B=B+100;<br>End-Transaction<br>è¯·ä½¿ç”¨è¿™ä¸ªä¾‹å­æ¥è¯´æ˜ä¸€ä¸ªäº‹åŠ¡çš„ACIDç‰¹æ€§ã€‚</p><p>äº‹ç‰©çš„ACIDç‰¹æ€§ä¸ºï¼šåŸå­æ€§ï¼ˆAï¼‰ã€ä¸€è‡´æ€§ï¼ˆCï¼‰ã€ç‹¬ç«‹æ€§ï¼ˆIï¼‰ã€æ°¸ä¹…æ€§ï¼ˆDï¼‰<br>ï¼ˆ1ï¼‰åŸå­æ€§ï¼šBegin-Transactionå’ŒEnd-Transactionä¹‹é—´çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨æ­£å¸¸æ‰§è¡Œå®Œæ¯•ï¼Œè¦ä¹ˆä¸æ‰§è¡Œï¼Œè‹¥ä¸­é—´è¯¥äº‹ç‰©å‡ºç°é”™è¯¯éœ€è¦å…¨éƒ¨å›æ»šåˆ°Begin-Transactionä¹‹å‰çš„çŠ¶æ€<br>ï¼ˆ2ï¼‰ä¸€è‡´æ€§ï¼šä¸€ä¸ªäº‹ç‰©ä¸èƒ½ç ´åç³»ç»Ÿçš„ä¸€è‡´æ€§ï¼Œäº‹åŠ¡å‘ç”Ÿä¹‹å‰ã€ä¹‹åç³»ç»Ÿåº”è¯¥ç»´æŒä¸€ä¸ªç¨³å®šçš„å¹³è¡¡çŠ¶æ€ï¼Œåœ¨æ­¤ä¾‹ä¸­ï¼Œé“¶è¡Œçš„æ€»èµ„äº§å¯çœ‹ä½œæ˜¯è¿™ä¸ªç¨³å®šçš„å¹³è¡¡çŠ¶æ€ï¼ˆç³»ç»Ÿçš„ä¸€è‡´æ€§ï¼‰ï¼Œå³A+Bçš„å’Œç»´æŒä¸å˜<br>ï¼ˆ3ï¼‰ç‹¬ç«‹æ€§ï¼šä¾‹å¦‚ä¸æ­¤ä¾‹ä¸€åŒå¹¶å‘çš„è¿˜æœ‰å¦ä¸€ä¸ªäº‹åŠ¡ï¼š<br>Begin-Transaction<br>A=A+B<em>0.1;<br>C=C-B</em>0.1;<br>End-Transaction<br>ä¸¤ä¸ªäº‹åŠ¡å¹¶å‘ï¼Œç¬¬ä¸€ä¸ªäº‹åŠ¡çš„ç¬¬äºŒæ¡è¯­å¥æ‰§è¡Œä¹‹å‰å’Œæ‰§è¡Œä¹‹åBçš„å€¼æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™æ ·å°±å¯¼è‡´äº†æœ€ç»ˆç¬¬äºŒä¸ªäº‹åŠ¡æ‰§è¡Œä¹‹å‰å’Œä¹‹åA+Cçš„å€¼ä¸ä¸€æ ·ã€‚è¿™å°±å¯¼è‡´ä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œå½±å“äº†å¦ä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œç»“æœï¼Œç‹¬ç«‹æ€§æ²¡æœ‰äº†ã€‚<br>ï¼ˆ4ï¼‰æ°¸ä¹…æ€§ï¼šäº‹åŠ¡ä¸­çš„æ“ä½œæˆåŠŸæ‰§è¡Œå®Œæ¯•åäº‹åŠ¡ä¾¿ä¼šæäº¤ï¼Œæäº¤æ‰€å¸¦æ¥çš„å˜åŒ–æ˜¯æ°¸ä¹…æ€§çš„ã€‚</p><h3 id="5-ä¸ºå®ç°äº‹åŠ¡å›æ»šï¼Œè¯·åˆ†æPrivate-Workspaceæ–¹æ³•å’ŒWriteahead-Logæ–¹æ³•åˆ†åˆ«åº”è¯¥åœ¨æ€æ ·çš„ç¯å¢ƒä¸‹ä½¿ç”¨ã€‚"><a href="#5-ä¸ºå®ç°äº‹åŠ¡å›æ»šï¼Œè¯·åˆ†æPrivate-Workspaceæ–¹æ³•å’ŒWriteahead-Logæ–¹æ³•åˆ†åˆ«åº”è¯¥åœ¨æ€æ ·çš„ç¯å¢ƒä¸‹ä½¿ç”¨ã€‚" class="headerlink" title="5. ä¸ºå®ç°äº‹åŠ¡å›æ»šï¼Œè¯·åˆ†æPrivate Workspaceæ–¹æ³•å’ŒWriteahead Logæ–¹æ³•åˆ†åˆ«åº”è¯¥åœ¨æ€æ ·çš„ç¯å¢ƒä¸‹ä½¿ç”¨ã€‚"></a>5. ä¸ºå®ç°äº‹åŠ¡å›æ»šï¼Œè¯·åˆ†æPrivate Workspaceæ–¹æ³•å’ŒWriteahead Logæ–¹æ³•åˆ†åˆ«åº”è¯¥åœ¨æ€æ ·çš„ç¯å¢ƒä¸‹ä½¿ç”¨ã€‚</h3><p>Private workspaceåº”è¯¥åœ¨äº‹åŠ¡å†²çªå¾ˆå¤šå‘ç”Ÿçš„æ—¶å€™ä½¿ç”¨ï¼Œè€Œwriteahead logåº”è¯¥åœ¨äº‹åŠ¡å†²çªå‘ç”Ÿå¾ˆå°‘çš„æ—¶å€™ä½¿ç”¨ã€‚</p><h3 id="6-ä»€ä¹ˆæ˜¯ä¸²è¡Œæ€§ï¼Ÿ"><a href="#6-ä»€ä¹ˆæ˜¯ä¸²è¡Œæ€§ï¼Ÿ" class="headerlink" title="6. ä»€ä¹ˆæ˜¯ä¸²è¡Œæ€§ï¼Ÿ"></a>6. ä»€ä¹ˆæ˜¯ä¸²è¡Œæ€§ï¼Ÿ</h3><p>å¦‚æœå¤šä¸ªäº‹åŠ¡çš„å¹¶å‘æ‰§è¡Œç»“æœä¸æ‰€æœ‰äº‹åŠ¡æŒ‰ç…§æŸä¸ªé¡ºåºä¸²è¡Œæ‰§è¡Œæ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸²è¡Œä¸€è‡´çš„ã€‚å¹¶å‘äº‹åŠ¡çš„è°ƒåº¦è¦ç¬¦åˆä¸²è¡Œæ€§å°±æ˜¯æ­£ç¡®çš„è°ƒåº¦ã€‚</p><h3 id="7-è¯·ä¸¾ä¾‹è¯´æ˜ä¸ºä½•2PLæ–¹æ³•ä¼šå¯¼è‡´æ­»é”ï¼Ÿ"><a href="#7-è¯·ä¸¾ä¾‹è¯´æ˜ä¸ºä½•2PLæ–¹æ³•ä¼šå¯¼è‡´æ­»é”ï¼Ÿ" class="headerlink" title="7. è¯·ä¸¾ä¾‹è¯´æ˜ä¸ºä½•2PLæ–¹æ³•ä¼šå¯¼è‡´æ­»é”ï¼Ÿ"></a>7. è¯·ä¸¾ä¾‹è¯´æ˜ä¸ºä½•2PLæ–¹æ³•ä¼šå¯¼è‡´æ­»é”ï¼Ÿ</h3><p>å¦‚æœæœ‰ä¸¤ä¸ªäº‹åŠ¡ç”¨ç›¸åçš„é¡ºåºç”³è¯·ä¸¤ä¸ªå…±äº«æ•°æ®Aå’ŒBï¼Œé‡‡ç”¨2PLçš„æ–¹æ³•ï¼Œå¦‚æœç¬¬ä¸€ä¸ªäº‹åŠ¡å…ˆè®¿é—®äº†Aï¼Œäºæ˜¯ç»™AåŠ é”ï¼›ç„¶åç¬¬äºŒä¸ªäº‹åŠ¡è®¿é—®äº†Bï¼Œäºæ˜¯ç»™BåŠ é”ã€‚å†åæ¥ä¸¤ä¸ªäº‹åŠ¡å°±éƒ½ä¸èƒ½æ‰§è¡Œä¸‹å»ï¼Œå› ä¸ºéƒ½ç”³è¯·ä¸åˆ°ä¸‹ä¸€ä¸ªæ•°æ®çš„é”ï¼Œå¯¼è‡´æ­»é”ã€‚</p><h3 id="8-ä¸ºä»€ä¹ˆä¼šå‡ºç°å‡æ­»é”ï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜ã€‚"><a href="#8-ä¸ºä»€ä¹ˆä¼šå‡ºç°å‡æ­»é”ï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜ã€‚" class="headerlink" title="8.ä¸ºä»€ä¹ˆä¼šå‡ºç°å‡æ­»é”ï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜ã€‚"></a>8.ä¸ºä»€ä¹ˆä¼šå‡ºç°å‡æ­»é”ï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜ã€‚</h3><p>åœ¨ç”¨ä¸€å°æœºå™¨ï¼ˆåè°ƒè€…ï¼‰ç»´æŠ¤æ•´ä¸ªç³»ç»Ÿçš„èµ„æºå›¾ï¼Œæ¥æè¿°è¿›ç¨‹å’Œèµ„æºå…³ç³»æ—¶ï¼Œåè°ƒè€…æ£€æµ‹å‡ºå¾ªç¯åˆ™è®¤ä¸ºæ˜¯æ­»é”ã€‚æœºå™¨ä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’æœ‰å»¶æ—¶ï¼Œå¯èƒ½ä¼šé€ æˆå…ˆå‘é€çš„æ¶ˆæ¯åæ”¶åˆ°ï¼Œå¦‚è¯¾ä»¶ä¸­çš„ä¾‹å­ï¼šé¦–å…ˆBæƒ³è¦å½’è¿˜èµ„æºRï¼Œéšåå‘ç”ŸBç”³è¯·èµ„æºTï¼Œä½†åä¸€æ¡æ¶ˆæ¯é¦–å…ˆåˆ°è¾¾Coordinatorï¼ŒCoordinatorå¢åŠ äº†ä¸€æ¡B-&gt; Tçš„è¾¹ï¼Œæ­¤æ—¶æœ¬åº”è¯¥æ²¡æœ‰R-&gt;Bï¼Œç”±äºè¿˜æœªæ”¶åˆ°è¯¥æ¶ˆæ¯ï¼ŒCoordinatoråˆ¤æ–­èµ„æºå›¾æœ‰å¾ªç¯ï¼Œå‘ˆç°å‡æ­»é”çŠ¶æ€ã€‚</p><h2 id="ç¬¬å…­ç« ä½œä¸š"><a href="#ç¬¬å…­ç« ä½œä¸š" class="headerlink" title="ç¬¬å…­ç« ä½œä¸š"></a>ç¬¬å…­ç« ä½œä¸š</h2><h3 id="1-åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸ºä»€ä¹ˆè¦å¯¹ä¸€äº›å®ä½“å»ºç«‹å‰¯æœ¬ï¼Ÿ"><a href="#1-åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸ºä»€ä¹ˆè¦å¯¹ä¸€äº›å®ä½“å»ºç«‹å‰¯æœ¬ï¼Ÿ" class="headerlink" title="1. åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸ºä»€ä¹ˆè¦å¯¹ä¸€äº›å®ä½“å»ºç«‹å‰¯æœ¬ï¼Ÿ"></a>1. åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸ºä»€ä¹ˆè¦å¯¹ä¸€äº›å®ä½“å»ºç«‹å‰¯æœ¬ï¼Ÿ</h3><p>å¯é æ€§ï¼šåˆ†å¸ƒåœ¨å„ä¸ªæœºå™¨ä¸Šçš„å¤‡ä»½å¯ä»¥é˜²æ­¢å…¶ä¸­æŸå‡ å°æœºå™¨æ–‡ä»¶çš„æŸåç”šè‡³å®•æœºå¸¦æ¥çš„å½±å“ï¼›<br>æ€§èƒ½ï¼šå»ºç«‹å‰¯æœ¬æ€§èƒ½ä¸Šå¾—ä»¥æå‡ï¼Œè·å–èµ„æºå¯ä»¥ä»åœ°åŸŸè¿‘çš„ã€ä¸ç¹å¿™çš„æœºå™¨ä¸Šè·å–éœ€è¦çš„æ•°æ®ï¼Œå‡å°‘é€šä¿¡çš„å¼€é”€ï¼Œå®ç°è´Ÿè½½å‡è¡¡ï¼›<br>å®¹é”™ï¼šç”±äºå…¶å¯å¤§å¤§é™ä½å•æœºæ–‡ä»¶æŸåçš„å½±å“ï¼Œå› æ­¤å…¶å®¹é”™æ€§é«˜</p><h3 id="2-ä¸ºä½•ä¸¥æ ¼çš„ä¸€è‡´æ€§æ¨¡å‹åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¾ˆéš¾å®ç°ï¼Ÿ"><a href="#2-ä¸ºä½•ä¸¥æ ¼çš„ä¸€è‡´æ€§æ¨¡å‹åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¾ˆéš¾å®ç°ï¼Ÿ" class="headerlink" title="2. ä¸ºä½•ä¸¥æ ¼çš„ä¸€è‡´æ€§æ¨¡å‹åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¾ˆéš¾å®ç°ï¼Ÿ"></a>2. ä¸ºä½•ä¸¥æ ¼çš„ä¸€è‡´æ€§æ¨¡å‹åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¾ˆéš¾å®ç°ï¼Ÿ</h3><p>ç”±äºä¸¥æ ¼ä¸€è‡´æ€§éœ€è¦æ¯ä¸ªè¯»æ“ä½œéƒ½è¿”å›æœ€æ–°çš„å†™æ“ä½œçš„ç»“æœï¼Œå› æ­¤éœ€è¦å­˜åœ¨å…¨å±€çš„æ—¶é’Ÿæ¥ç¡®å®šå“ªä¸ªæ“ä½œæ—¶æœ€æ–°çš„å†™æ“ä½œã€‚è¿™åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ˜¯å¾ˆéš¾å®ç°çš„ã€‚</p><h3 id="3-å‡è®¾åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­æœ‰ä¸‹é¢å››ä¸ªè¿›ç¨‹ï¼š"><a href="#3-å‡è®¾åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­æœ‰ä¸‹é¢å››ä¸ªè¿›ç¨‹ï¼š" class="headerlink" title="3. å‡è®¾åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­æœ‰ä¸‹é¢å››ä¸ªè¿›ç¨‹ï¼š"></a>3. å‡è®¾åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­æœ‰ä¸‹é¢å››ä¸ªè¿›ç¨‹ï¼š</h3><p>P1ï¼ša=5ï¼›a=6ï¼›<br>P2ï¼ša=7ï¼›<br>P3ï¼šprintf(a); printf(a); printf(a);<br>P4: printf(a); printf(a); printf(a);<br>æœ€åP3å’ŒP4çš„è¿è¡Œç»“æœéƒ½æ˜¯6 5 7ã€‚<br>è¯·é—®è¿™ä¸ªè¿è¡Œç»“æœåœ¨é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸­æ˜¯å¯ä»¥æ¥å—çš„å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ<br>é¡ºåºä¸€è‡´æ€§ä¸èƒ½å¤Ÿæ¥å—è¿™ä¸ªç»“æœï¼Œå› ä¸ºè¿™ä¸ªç»“æœä¸ç¬¦åˆP1çš„ç¨‹åºä¸­è¯­å¥çš„æ‰§è¡Œæ¬¡åºã€‚</p><h3 id="4-è¯·å†™å‡ºåœ¨ç»´æŠ¤å‰¯æœ¬ä¸€è‡´æ€§çš„æ—¶å€™è¿›è¡Œä¿®æ”¹ä¼ æ’­çš„ä¸‰ç§æ–¹æ³•ã€‚"><a href="#4-è¯·å†™å‡ºåœ¨ç»´æŠ¤å‰¯æœ¬ä¸€è‡´æ€§çš„æ—¶å€™è¿›è¡Œä¿®æ”¹ä¼ æ’­çš„ä¸‰ç§æ–¹æ³•ã€‚" class="headerlink" title="4.è¯·å†™å‡ºåœ¨ç»´æŠ¤å‰¯æœ¬ä¸€è‡´æ€§çš„æ—¶å€™è¿›è¡Œä¿®æ”¹ä¼ æ’­çš„ä¸‰ç§æ–¹æ³•ã€‚"></a>4.è¯·å†™å‡ºåœ¨ç»´æŠ¤å‰¯æœ¬ä¸€è‡´æ€§çš„æ—¶å€™è¿›è¡Œä¿®æ”¹ä¼ æ’­çš„ä¸‰ç§æ–¹æ³•ã€‚</h3><p>ä¸‰ç§æ–¹æ³•æ˜¯ï¼š<br>ï¼ˆ1ï¼‰ä¼ æ’­æ— æ•ˆæ€§æ¶ˆæ¯<br>ï¼ˆ2ï¼‰ä¼ æ’­ä¿®æ”¹äº†çš„æ•°æ®<br>ï¼ˆ3ï¼‰ä¼ æ’­ä¿®æ”¹æ“ä½œ</p><h3 id="5-ä¸ºäº†å®ç°å‰¯æœ¬çš„ä¸€è‡´æ€§å¯ä»¥é‡‡ç”¨pushçš„åè®®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨pullçš„åè®®ã€‚è¯·é—®ä¸¤ç§åè®®éƒ½é€‚ç”¨äºå“ªç§ç±»å‹çš„ç³»ç»Ÿ"><a href="#5-ä¸ºäº†å®ç°å‰¯æœ¬çš„ä¸€è‡´æ€§å¯ä»¥é‡‡ç”¨pushçš„åè®®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨pullçš„åè®®ã€‚è¯·é—®ä¸¤ç§åè®®éƒ½é€‚ç”¨äºå“ªç§ç±»å‹çš„ç³»ç»Ÿ" class="headerlink" title="5.ä¸ºäº†å®ç°å‰¯æœ¬çš„ä¸€è‡´æ€§å¯ä»¥é‡‡ç”¨pushçš„åè®®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨pullçš„åè®®ã€‚è¯·é—®ä¸¤ç§åè®®éƒ½é€‚ç”¨äºå“ªç§ç±»å‹çš„ç³»ç»Ÿ"></a>5.ä¸ºäº†å®ç°å‰¯æœ¬çš„ä¸€è‡´æ€§å¯ä»¥é‡‡ç”¨pushçš„åè®®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨pullçš„åè®®ã€‚è¯·é—®ä¸¤ç§åè®®éƒ½é€‚ç”¨äºå“ªç§ç±»å‹çš„ç³»ç»Ÿ</h3><p>pushçš„åè®®ä¼šæŠŠä¿®æ”¹ç§¯ææ¨é€åˆ°å„ä¸ªå‰¯æœ¬ä¸Šã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨éœ€ç»´æŠ¤å‰¯æœ¬çš„ä¿¡æ¯ï¼Œåœ¨è¯»å†™é¢‘ç‡é«˜æ—¶æ€§èƒ½è¾ƒå¥½ï¼Œå…å»äº†å¤šä¸ªå‰¯æœ¬ä¸æ–­è¯¢é—®çš„å¼€é”€ï¼›<br>pullçš„åè®®å‰¯æœ¬å‘æœåŠ¡å™¨è½®è¯¢æ˜¯å¦æœ‰ä¿®æ”¹ï¼Œå½“è¯»å†™é¢‘ç‡ä½æ—¶ä½¿ç”¨è¾ƒå¥½ï¼Œä¸ç”¨ç»´æŠ¤å‰¯æœ¬ä¿¡æ¯è¡¨ï¼ŒæœåŠ¡å™¨å¼€é”€å°ã€‚</p><h3 id="6-ï¼ˆ8åˆ†ï¼‰å‡è®¾åœ¨ç½‘ç»œä¸­ä¸ºäº†æå‡æ•°æ®çš„æœ‰æ•ˆæ€§ï¼Œä¸ºä¸€ä¸ªæ•°æ®ä¿å­˜äº†10ä¸ªå‰¯æœ¬ã€‚è‹¥ä½¿ç”¨åŸºäºæ³•å®šæ•°é‡çš„æ•°æ®ä¸€è‡´æ€§ç­–ç•¥ï¼Œå­¦ç”ŸAã€Bã€Cé‡‡ç”¨äº†ä¸åŒçš„æ–¹æ¡ˆã€‚å­¦ç”ŸAçš„æ–¹æ¡ˆä¸ºè¯»æ³•å®šæ•°é‡ä¸º1ï¼Œå†™æ³•å®šæ•°é‡ä¸º9ï¼›å­¦ç”ŸBçš„æ–¹æ¡ˆä¸ºè¯»æ³•å®šæ•°é‡ä¸º6ï¼Œå†™æ³•å®šæ•°é‡ä¸º5ï¼›å­¦ç”ŸCçš„æ–¹æ¡ˆä¸ºè¯»æ³•å®šæ•°é‡ä¸º2ï¼Œå†™æ³•å®šæ•°é‡ä¸º9ã€‚è¯·å›ç­”ï¼šï¼ˆ1ï¼‰è¿™ä¸‰ä¸ªæ–¹æ¡ˆä¸­å“ªä¸ªæ–¹æ¡ˆæ˜¯æ­£ç¡®çš„ï¼Ÿ"><a href="#6-ï¼ˆ8åˆ†ï¼‰å‡è®¾åœ¨ç½‘ç»œä¸­ä¸ºäº†æå‡æ•°æ®çš„æœ‰æ•ˆæ€§ï¼Œä¸ºä¸€ä¸ªæ•°æ®ä¿å­˜äº†10ä¸ªå‰¯æœ¬ã€‚è‹¥ä½¿ç”¨åŸºäºæ³•å®šæ•°é‡çš„æ•°æ®ä¸€è‡´æ€§ç­–ç•¥ï¼Œå­¦ç”ŸAã€Bã€Cé‡‡ç”¨äº†ä¸åŒçš„æ–¹æ¡ˆã€‚å­¦ç”ŸAçš„æ–¹æ¡ˆä¸ºè¯»æ³•å®šæ•°é‡ä¸º1ï¼Œå†™æ³•å®šæ•°é‡ä¸º9ï¼›å­¦ç”ŸBçš„æ–¹æ¡ˆä¸ºè¯»æ³•å®šæ•°é‡ä¸º6ï¼Œå†™æ³•å®šæ•°é‡ä¸º5ï¼›å­¦ç”ŸCçš„æ–¹æ¡ˆä¸ºè¯»æ³•å®šæ•°é‡ä¸º2ï¼Œå†™æ³•å®šæ•°é‡ä¸º9ã€‚è¯·å›ç­”ï¼šï¼ˆ1ï¼‰è¿™ä¸‰ä¸ªæ–¹æ¡ˆä¸­å“ªä¸ªæ–¹æ¡ˆæ˜¯æ­£ç¡®çš„ï¼Ÿ" class="headerlink" title="6.ï¼ˆ8åˆ†ï¼‰å‡è®¾åœ¨ç½‘ç»œä¸­ä¸ºäº†æå‡æ•°æ®çš„æœ‰æ•ˆæ€§ï¼Œä¸ºä¸€ä¸ªæ•°æ®ä¿å­˜äº†10ä¸ªå‰¯æœ¬ã€‚è‹¥ä½¿ç”¨åŸºäºæ³•å®šæ•°é‡çš„æ•°æ®ä¸€è‡´æ€§ç­–ç•¥ï¼Œå­¦ç”ŸAã€Bã€Cé‡‡ç”¨äº†ä¸åŒçš„æ–¹æ¡ˆã€‚å­¦ç”ŸAçš„æ–¹æ¡ˆä¸ºè¯»æ³•å®šæ•°é‡ä¸º1ï¼Œå†™æ³•å®šæ•°é‡ä¸º9ï¼›å­¦ç”ŸBçš„æ–¹æ¡ˆä¸ºè¯»æ³•å®šæ•°é‡ä¸º6ï¼Œå†™æ³•å®šæ•°é‡ä¸º5ï¼›å­¦ç”ŸCçš„æ–¹æ¡ˆä¸ºè¯»æ³•å®šæ•°é‡ä¸º2ï¼Œå†™æ³•å®šæ•°é‡ä¸º9ã€‚è¯·å›ç­”ï¼šï¼ˆ1ï¼‰è¿™ä¸‰ä¸ªæ–¹æ¡ˆä¸­å“ªä¸ªæ–¹æ¡ˆæ˜¯æ­£ç¡®çš„ï¼Ÿ"></a>6.ï¼ˆ8åˆ†ï¼‰å‡è®¾åœ¨ç½‘ç»œä¸­ä¸ºäº†æå‡æ•°æ®çš„æœ‰æ•ˆæ€§ï¼Œä¸ºä¸€ä¸ªæ•°æ®ä¿å­˜äº†10ä¸ªå‰¯æœ¬ã€‚è‹¥ä½¿ç”¨åŸºäºæ³•å®šæ•°é‡çš„æ•°æ®ä¸€è‡´æ€§ç­–ç•¥ï¼Œå­¦ç”ŸAã€Bã€Cé‡‡ç”¨äº†ä¸åŒçš„æ–¹æ¡ˆã€‚å­¦ç”ŸAçš„æ–¹æ¡ˆä¸ºè¯»æ³•å®šæ•°é‡ä¸º1ï¼Œå†™æ³•å®šæ•°é‡ä¸º9ï¼›å­¦ç”ŸBçš„æ–¹æ¡ˆä¸ºè¯»æ³•å®šæ•°é‡ä¸º6ï¼Œå†™æ³•å®šæ•°é‡ä¸º5ï¼›å­¦ç”ŸCçš„æ–¹æ¡ˆä¸ºè¯»æ³•å®šæ•°é‡ä¸º2ï¼Œå†™æ³•å®šæ•°é‡ä¸º9ã€‚è¯·å›ç­”ï¼šï¼ˆ1ï¼‰è¿™ä¸‰ä¸ªæ–¹æ¡ˆä¸­å“ªä¸ªæ–¹æ¡ˆæ˜¯æ­£ç¡®çš„ï¼Ÿ</h3><p>ï¼ˆ2ï¼‰å¯¹äºæ¯ç§é”™è¯¯çš„æ–¹æ¡ˆç»™å‡ºä¸€ä¸ªä¾‹å­è¯´æ˜é”™è¯¯å‘ç”Ÿçš„åŸå› ã€‚<br>ï¼ˆ1ï¼‰ä¸‰ä¸ªæ–¹æ¡ˆä¸­Cçš„æ˜¯æ­£ç¡®çš„<br>ï¼ˆ2ï¼‰å¦‚æœæŒ‰ç…§Açš„æ–¹æ¡ˆï¼Œè¯»æ³•å®šæ•°é‡ä¸º1ï¼Œå†™æ³•å®šæ•°é‡ä¸º9ï¼Œè¯»è€…ä¼šè¯»åˆ°ä¸€ä¸ªæ—§ç‰ˆæœ¬çš„æ•°æ®ï¼›å¦‚æœæŒ‰ç…§Cçš„æ–¹æ¡ˆï¼Œè¯»æ³•å®šæ•°é‡ä¸º6ï¼Œå†™æ³•å®šæ•°é‡ä¸º5ï¼Œè¯»è€…æ°¸è¿œè¯»ä¸åˆ°6ä¸ªç‰ˆæœ¬ä¸€è‡´çš„æ•°æ®ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
    <tags>
      
      <tag>distribute system</tag>
      
      <tag>OS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è´å¶æ–¯åˆ†ç±»</title>
    <link href="/2019/06/13/%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB/"/>
    <url>/2019/06/13/%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB/</url>
    
    <content type="html"><![CDATA[<h2 id="æœ´ç´ è´å¶æ–¯æ³•ï¼ˆNaive-Bayesï¼‰"><a href="#æœ´ç´ è´å¶æ–¯æ³•ï¼ˆNaive-Bayesï¼‰" class="headerlink" title="æœ´ç´ è´å¶æ–¯æ³•ï¼ˆNaive Bayesï¼‰"></a>æœ´ç´ è´å¶æ–¯æ³•ï¼ˆNaive Bayesï¼‰</h2><p>åœ¨é«˜æ–¯åˆ¤åˆ«åˆ†æï¼ˆGDAï¼‰æ–¹æ³•ä¸­ï¼Œç‰¹å¾å‘é‡ $x$ æ˜¯è¿ç»­çš„ï¼Œå€¼ä¸ºå®æ•°çš„å‘é‡ã€‚ä¸‹é¢æˆ‘ä»¬è¦è®²çš„æ˜¯å½“ $x_i$ æ˜¯ç¦»æ•£å€¼çš„æ—¶å€™æ¥ä½¿ç”¨çš„å¦å¤–ä¸€ç§å­¦ä¹ ç®—æ³•ã€‚</p><p>ä¸‹é¢å°±æ¥ç»§ç»­çœ‹ä¸€ä¸ªä¹‹å‰è§è¿‡çš„æ ·ä¾‹ï¼Œæ¥å°è¯•å»ºç«‹ä¸€ä¸ªé‚®ä»¶ç­›é€‰å™¨ï¼Œä½¿ç”¨æœºå™¨å­¦ä¹ çš„æ–¹æ³•ã€‚è¿™å›å’±ä»¬è¦æ¥å¯¹é‚®ä»¶ä¿¡æ¯è¿›è¡Œåˆ†ç±»ï¼Œæ¥åˆ¤æ–­æ˜¯å¦ä¸ºå•†ä¸šå¹¿å‘Šé‚®ä»¶ï¼ˆå°±æ˜¯åƒåœ¾é‚®ä»¶ï¼‰ï¼Œè¿˜æ˜¯éåƒåœ¾é‚®ä»¶ã€‚åœ¨å­¦ä¼šäº†æ€ä¹ˆå®ç°ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è®©é‚®ä»¶é˜…è¯»å™¨èƒ½å¤Ÿè‡ªåŠ¨å¯¹åƒåœ¾ä¿¡æ¯è¿›è¡Œè¿‡æ»¤ï¼Œæˆ–è€…å•ç‹¬æŠŠè¿™äº›åƒåœ¾é‚®ä»¶æ”¾è¿›ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å¤¹ä¸­ã€‚å¯¹é‚®ä»¶è¿›è¡Œåˆ†ç±»æ˜¯ä¸€ä¸ªæ¡ˆä¾‹ï¼Œå±äºæ–‡æœ¬åˆ†ç±»è¿™ä¸€æ›´å¹¿æ³›é—®é¢˜é›†åˆã€‚</p><p>å‡è®¾æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªè®­ç»ƒé›†ï¼ˆä¹Ÿå°±æ˜¯ä¸€å †å·²ç»æ ‡å¥½äº†æ˜¯å¦ä¸ºåƒåœ¾é‚®ä»¶çš„é‚®ä»¶ï¼‰ã€‚è¦æ„å»ºåƒåœ¾é‚®ä»¶åˆ†é€‰å™¨ï¼Œå’±ä»¬å…ˆè¦å¼€å§‹ç¡®å®šç”¨æ¥æè¿°ä¸€å°é‚®ä»¶çš„ç‰¹å¾$x_i$æœ‰å“ªäº›ã€‚</p><p>æˆ‘ä»¬å°†ç”¨ä¸€ä¸ªç‰¹å¾å‘é‡æ¥è¡¨ç¤ºä¸€å°é‚®ä»¶ï¼Œè¿™ä¸ªå‘é‡çš„é•¿åº¦ç­‰äºå­—å…¸ä¸­å•è¯çš„ä¸ªæ•°ã€‚å¦‚æœé‚®ä»¶ä¸­åŒ…å«äº†å­—å…¸ä¸­çš„ç¬¬ $i$ ä¸ªå•è¯ï¼Œé‚£ä¹ˆå°±ä»¤ $x_i = 1$ï¼›åä¹‹åˆ™$x_i = 0$ã€‚ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªå‘é‡ï¼š</p><script type="math/tex; mode=display">x=\begin{bmatrix}1\\0\\0\\\vdots \\1\\ \vdots \\0\end{bmatrix} \begin{matrix}\text{a}\\ \text{aardvark}\\ \text{aardwolf}\\ \vdots\\ \text{buy}\\ \vdots\\ \text{zygmurgy}\\ \end{matrix}</script><p>å°±ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªé‚®ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†ä¸¤ä¸ªå•è¯ â€œaâ€ å’Œ â€œbuyâ€ï¼Œä½†æ²¡æœ‰å•è¯ â€œaardvarkâ€ï¼Œ â€œaardwolfâ€ æˆ–è€… â€œzymurgyâ€  ã€‚è¿™ä¸ªå•è¯é›†åˆç¼–ç æ•´ç†æˆçš„ç‰¹å¾å‘é‡ä¹Ÿæˆä¸º<strong>è¯æ±‡è¡¨ï¼ˆvocabulary,ï¼‰ï¼Œ</strong> æ‰€ä»¥ç‰¹å¾å‘é‡ $x$ çš„ç»´åº¦å°±ç­‰äºè¯æ±‡è¡¨çš„é•¿åº¦ã€‚</p><blockquote><p>æ³¨ï¼šå®é™…åº”ç”¨ä¸­å¹¶ä¸éœ€è¦éå†æ•´ä¸ªè‹±è¯­è¯å…¸æ¥ç»„æˆæ‰€æœ‰è‹±è¯­å•è¯çš„åˆ—è¡¨ï¼Œå®è·µä¸­æ›´å¸¸ç”¨çš„æ–¹æ³•æ˜¯éå†ä¸€ä¸‹è®­ç»ƒé›†ï¼Œç„¶åæŠŠå‡ºç°è¿‡ä¸€æ¬¡ä»¥ä¸Šçš„å•è¯æ‰ç¼–ç æˆç‰¹å¾å‘é‡ã€‚è¿™æ ·åšé™¤äº†èƒ½å¤Ÿé™ä½æ¨¡å‹ä¸­å•è¯è¡¨çš„é•¿åº¦ä¹‹å¤–ï¼Œè¿˜èƒ½å¤Ÿé™ä½è¿ç®—é‡å’Œç©ºé—´å ç”¨ï¼Œæ­¤å¤–è¿˜æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯èƒ½å¤ŸåŒ…å«ä¸€äº›ä½ çš„é‚®ä»¶ä¸­å‡ºç°äº†è€Œè¯å…¸ä¸­æ²¡æœ‰çš„å•è¯ï¼Œæ¯”å¦‚æœ¬è¯¾ç¨‹çš„ç¼©å†™CS229ã€‚æœ‰æ—¶å€™ï¼ˆæ¯”å¦‚åœ¨ä½œä¸šé‡Œé¢ï¼‰ï¼Œè¿˜è¦æ’é™¤ä¸€äº›ç‰¹åˆ«é«˜é¢‘ç‡çš„è¯æ±‡ï¼Œæ¯”å¦‚åƒå† è¯theï¼Œä»‹è¯of å’Œand ç­‰ç­‰ï¼›è¿™äº›é«˜é¢‘ç‡ä½†æ˜¯æ²¡æœ‰å…·ä½“æ„ä¹‰çš„è™šè¯ä¹Ÿå«åšstop wordsï¼Œå› ä¸ºå¾ˆå¤šæ–‡æ¡£ä¸­éƒ½è¦æœ‰è¿™äº›è¯ï¼Œç”¨å®ƒä»¬ä¹ŸåŸºæœ¬ä¸èƒ½ç”¨æ¥åˆ¤å®šä¸€ä¸ªé‚®ä»¶æ˜¯å¦ä¸ºåƒåœ¾é‚®ä»¶ã€‚</p></blockquote><p>é€‰å¥½äº†ç‰¹å¾å‘é‡äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å»ºç«‹ä¸€ä¸ªç”Ÿæˆæ¨¡å‹ï¼ˆgenerative modelï¼‰ã€‚æ‰€ä»¥æˆ‘ä»¬å¿…é¡»å¯¹$p(x|y)$è¿›è¡Œå»ºæ¨¡ã€‚ä½†æ˜¯ï¼Œå‡å¦‚æˆ‘ä»¬çš„å•è¯æœ‰äº”ä¸‡ä¸ªè¯ï¼Œåˆ™ç‰¹å¾å‘é‡$x \in  {0, 1}^{50000}$ ï¼ˆå³ $x$æ˜¯ä¸€ä¸ª $50000$ ç»´çš„å‘é‡ï¼Œå…¶å€¼æ˜¯$0$æˆ–è€…$1$ï¼‰ï¼Œå¦‚æœæˆ‘ä»¬è¦å¯¹è¿™æ ·çš„ $x$è¿›è¡Œå¤šé¡¹å¼åˆ†å¸ƒçš„å»ºæ¨¡ï¼Œé‚£ä¹ˆå°±å¯èƒ½æœ‰$2^{50000}$ ç§å¯èƒ½çš„è¾“å‡ºï¼Œç„¶åå°±è¦ç”¨ä¸€ä¸ª $(2^{50000}-1)$ç»´çš„å‚æ•°å‘é‡ã€‚è¿™æ ·å‚æ•°æ˜æ˜¾å¤ªå¤šäº†ã€‚</p><p>è¦ç»™$p(x|y)$å»ºæ¨¡ï¼Œå…ˆæ¥åšä¸€ä¸ªéå¸¸å¼ºçš„å‡è®¾ã€‚æˆ‘ä»¬<strong>å‡è®¾ç‰¹å¾å‘é‡$x_i$ å¯¹äºç»™å®šçš„ $y$ æ˜¯ç‹¬ç«‹çš„ã€‚</strong> è¿™ä¸ªå‡è®¾ä¹Ÿå«åš<strong>æœ´ç´ è´å¶æ–¯å‡è®¾ï¼ˆNaive Bayes ï¼ŒNB assumptionï¼‰ï¼Œ</strong> åŸºäºæ­¤å‡è®¾è¡ç”Ÿçš„ç®—æ³•ä¹Ÿå°±å«åš<strong>æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨ï¼ˆNaive Bayes classifierï¼‰ã€‚</strong> ä¾‹å¦‚ï¼Œå¦‚æœ $y = 1$ æ„å‘³ç€ä¸€ä¸ªé‚®ä»¶æ˜¯åƒåœ¾é‚®ä»¶ï¼›ç„¶åå…¶ä¸­â€buyâ€ æ˜¯ç¬¬$2087$ä¸ªå•è¯ï¼Œè€Œ â€œpriceâ€æ˜¯ç¬¬$39831$ä¸ªå•è¯ï¼›é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å°±å‡è®¾ï¼Œå¦‚æœæˆ‘å‘Šè¯‰ä½  $y = 1$ï¼Œä¹Ÿå°±æ˜¯è¯´æŸä¸€ä¸ªç‰¹å®šçš„é‚®ä»¶æ˜¯åƒåœ¾é‚®ä»¶ï¼Œé‚£ä¹ˆå¯¹äº$x<em>{2087}$ ï¼ˆä¹Ÿå°±æ˜¯å•è¯ buy æ˜¯å¦å‡ºç°åœ¨é‚®ä»¶é‡Œï¼‰çš„äº†è§£å¹¶ä¸ä¼šå½±å“ä½ å¯¹$x</em>{39831}$ ï¼ˆå•è¯priceå‡ºç°çš„ä½ç½®ï¼‰çš„é‡‡ä¿¡å€¼ã€‚æ›´æ­£è§„ä¸€ç‚¹ï¼Œå¯ä»¥å†™æˆ $p(x<em>{2087}|y) = p(x</em>{2087}|y, x<em>{39831})$ã€‚ï¼ˆè¦æ³¨æ„è¿™ä¸ªå¹¶ä¸æ˜¯è¯´$x</em>{2087}$ å’Œ $x<em>{39831}$è¿™ä¸¤ä¸ªç‰¹å¾æ˜¯ç‹¬ç«‹çš„ï¼Œé‚£æ ·å°±å˜æˆäº†$p(x</em>{2087}) = p(x<em>{2087}|x</em>{39831})$ï¼Œæˆ‘ä»¬è¿™é‡Œæ˜¯è¯´åœ¨ç»™å®šäº† $y$ çš„è¿™æ ·ä¸€ä¸ªæ¡ä»¶ä¸‹ï¼ŒäºŒè€…æ‰æ˜¯æœ‰æ¡ä»¶çš„ç‹¬ç«‹ã€‚ï¼‰</p><p>ç„¶åæˆ‘ä»¬å°±å¾—åˆ°äº†ç­‰å¼ï¼š</p><script type="math/tex; mode=display">\begin{aligned}p(x_1, ..., x_{50000}|y) & = p(x_1|y)p(x_2|y,x_1)p(x_3|y,x_1,x_2) ... p(x_{50000}|y,x_1,x_2,...,x_{49999})\\& = p(x_1|y)p(x_2|y)p(x_3|y) ... p(x_{50000}|y)\\& = \prod^n_{i=1}p(x_i|y)\\\end{aligned}</script><p>ç¬¬ä¸€è¡Œçš„ç­‰å¼å°±æ˜¯ç®€å•åœ°æ¥è‡ªæ¦‚ç‡çš„åŸºæœ¬æ€§è´¨ï¼Œç¬¬äºŒä¸ªç­‰å¼åˆ™ä½¿ç”¨äº†æœ´ç´ è´å¶æ–¯å‡è®¾ã€‚è¿™é‡Œè¦æ³¨æ„ï¼Œæœ´ç´ è´å¶æ–¯å‡è®¾ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¼ºçš„å‡è®¾ï¼Œäº§ç”Ÿçš„è¿™ä¸ªç®—æ³•å¯ä»¥é€‚ç”¨äºå¾ˆå¤šç§é—®é¢˜ã€‚</p><p>æˆ‘ä»¬è¿™ä¸ªæ¨¡å‹çš„å‚æ•°ä¸º $\phi<em>{i|y=1} = p (x_i = 1|y = 1), \phi</em>{i|y=0} = p (x_i = 1|y = 0)$, è€Œ $\phi_y = p (y = 1)$ã€‚å’Œä»¥å¾€ä¸€æ ·ï¼Œç»™å®šä¸€ä¸ªè®­ç»ƒé›†${(x^{(i)},y^{(i)}); i = 1, â€¦, m}$ï¼Œå°±å¯ä»¥å†™å‡ºä¸‹é¢çš„è”åˆä¼¼ç„¶å‡½æ•°ï¼š</p><script type="math/tex; mode=display">\mathcal{L}(\phi_y,\phi_{j|y=0},\phi_{j|y=1})=\prod^m_{i=1}p(x^{(i)},y^{(i)})</script><p>æ‰¾åˆ°ä½¿è”åˆä¼¼ç„¶å‡½æ•°å–å¾—æœ€å¤§å€¼çš„å¯¹åº”å‚æ•°ç»„åˆ $\phi<em>y , \phi</em>{i|y=0} å’Œ \phi_{i|y=1}$ å°±ç»™å‡ºäº†æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\phi_{j|y=1} &=\frac{\sum^m_{i=1}1\{x_j^{(i)} =1 \wedge y^{(i)} =1\} }{\sum^m_{i=1}1\{y^{(i)} =1\}} \\\phi_{j|y=0} &= \frac{\sum^m_{i=1}1\{x_j^{(i)} =1 \wedge y^{(i)} =0\} }{\sum^m_{i=1}1\{y^{(i)} =0\}} \\\phi_{y} &= \frac{\sum^m_{i=1}1\{y^{(i)} =1\}}{m}\\\end{aligned}</script><p>åœ¨ä¸Šé¢çš„ç­‰å¼ä¸­ï¼Œâ€$\wedge$(and)â€è¿™ä¸ªç¬¦å·çš„æ„æ€æ˜¯é€»è¾‘â€å’Œâ€ã€‚è¿™äº›å‚æ•°æœ‰ä¸€ä¸ªéå¸¸è‡ªç„¶çš„è§£é‡Šã€‚ä¾‹å¦‚ $\phi_{j|y=1}$ æ­£æ˜¯å•è¯ $j$ å‡ºç°çš„é‚®ä»¶ä¸­åƒåœ¾é‚®ä»¶æ‰€å  $(y = 1)$ çš„æ¯”ä¾‹ã€‚</p><p>æ‹Ÿåˆå¥½äº†å…¨éƒ¨è¿™äº›å‚æ•°ä¹‹åï¼Œè¦å¯¹ä¸€ä¸ªæ–°æ ·æœ¬çš„ç‰¹å¾å‘é‡ $x$ è¿›è¡Œé¢„æµ‹ï¼Œåªè¦è¿›è¡Œå¦‚ä¸‹çš„ç®€å•åœ°è®¡ç®—ï¼š</p><script type="math/tex; mode=display">\begin{aligned}p(y=1|x)&=  \frac{p(x|y=1)p(y=1)}{p(x)}\\&= \frac{(\prod^n_{i=1}p(x_i|y=1))p(y=1)}{(\prod^n_{i=1}p(x_i|y=1))p(y=1)+  (\prod^n_{i=1}p(x_i|y=0))p(y=0)}  \\\end{aligned}</script><p>ç„¶åé€‰æ‹©æœ‰æœ€é«˜åéªŒæ¦‚ç‡çš„æ¦‚ç‡ã€‚</p><p>æœ€åæˆ‘ä»¬è¦æ³¨æ„ï¼Œåˆšåˆšæˆ‘ä»¬å¯¹æœ´ç´ è´å¶æ–¯ç®—æ³•çš„ä½¿ç”¨ä¸­ï¼Œç‰¹å¾å‘é‡ $x_i$ éƒ½æ˜¯äºŒå€¼åŒ–çš„ï¼Œå…¶å®ç‰¹å¾å‘é‡ä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªç¦»æ•£å€¼ï¼Œæ¯”å¦‚${1, 2, â€¦, k_i}$è¿™æ ·ä¹Ÿéƒ½æ˜¯å¯ä»¥çš„ã€‚è¿™æ—¶å€™åªéœ€è¦æŠŠå¯¹$p(x_i|y)$ çš„å»ºæ¨¡ä»ä¼¯åŠªåˆ©åˆ†å¸ƒæ”¹æˆå¤šé¡¹å¼åˆ†å¸ƒã€‚å®é™…ä¸Šï¼Œå³ä¾¿ä¸€äº›åŸå§‹çš„è¾“å…¥å€¼æ˜¯è¿ç»­å€¼ï¼ˆæ¯”å¦‚æˆ‘ä»¬ç¬¬ä¸€ä¸ªæ¡ˆä¾‹ä¸­çš„æˆ¿å±‹é¢ç§¯ï¼‰ï¼Œä¹Ÿå¯ä»¥è½¬æ¢æˆä¸€ä¸ªå°è§„æ¨¡çš„ç¦»æ•£å€¼çš„é›†åˆï¼Œç„¶åå†ä½¿ç”¨æœ´ç´ è´å¶æ–¯æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬ç”¨ç‰¹å¾å‘é‡ $x_i$ æ¥è¡¨ç¤ºä½æˆ¿é¢ç§¯ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŒ‰ç…§ä¸‹é¢æ‰€ç¤ºçš„æ–¹æ³•æ¥å¯¹è¿™ä¸€å˜é‡è¿›è¡Œç¦»æ•£åŒ–ï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:center">å±…ä½é¢ç§¯</th><th style="text-align:center">$&lt;400$</th><th style="text-align:center">$400-800$</th><th style="text-align:center">$800-1200$</th><th style="text-align:center">$1200-1600$</th><th style="text-align:center">$&gt;1600$</th></tr></thead><tbody><tr><td style="text-align:center">ç¦»æ•£å€¼ $x_i$</td><td style="text-align:center">$1$</td><td style="text-align:center">$2$</td><td style="text-align:center">$3$</td><td style="text-align:center">$4$</td><td style="text-align:center">$5$</td></tr></tbody></table></div><p>è¿™æ ·ï¼Œå¯¹äºä¸€ä¸ªé¢ç§¯ä¸º $890$ å¹³æ–¹è‹±å°ºçš„æˆ¿å±‹ï¼Œå°±å¯ä»¥æ ¹æ®ä¸Šé¢è¿™ä¸ªé›†åˆä¸­å¯¹åº”çš„å€¼æ¥æŠŠç‰¹å¾å‘é‡çš„è¿™ä¸€é¡¹çš„$x_i$å€¼è®¾ç½®ä¸º$3$ã€‚ç„¶åå°±å¯ä»¥ç”¨æœ´ç´ è´å¶æ–¯ç®—æ³•ï¼Œå¹¶ä¸”å°†$p(x_i|y)$ä½œä¸ºå¤šé¡¹å¼åˆ†å¸ƒæ¥è¿›è¡Œå»ºæ¨¡ï¼Œå°±éƒ½è·Ÿå‰é¢è®²è¿‡çš„å†…å®¹ä¸€æ ·äº†ã€‚å½“åŸç”Ÿçš„è¿ç»­å€¼çš„å±æ€§ä¸å¤ªå®¹æ˜“ç”¨ä¸€ä¸ªå¤šå…ƒæ­£æ€åˆ†å¸ƒæ¥è¿›è¡Œå»ºæ¨¡çš„æ—¶å€™ï¼Œå°†å…¶ç‰¹å¾å‘é‡ç¦»æ•£åŒ–ç„¶åä½¿ç”¨æœ´ç´ è´å¶æ–¯æ³•ï¼ˆNBï¼‰æ¥æ›¿ä»£é«˜æ–¯åˆ¤åˆ«åˆ†ææ³•ï¼ˆGDAï¼‰ï¼Œé€šå¸¸èƒ½å½¢æˆä¸€ä¸ªæ›´å¥½çš„åˆ†ç±»å™¨ã€‚</p><h3 id="1-æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ï¼ˆLaplace-smoothingï¼‰"><a href="#1-æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ï¼ˆLaplace-smoothingï¼‰" class="headerlink" title="1 æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ï¼ˆLaplace smoothingï¼‰"></a>1 æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ï¼ˆLaplace smoothingï¼‰</h3><p>åˆšåˆšè®²è¿‡çš„æœ´ç´ è´å¶æ–¯ç®—æ³•èƒ½å¤Ÿè§£å†³å¾ˆå¤šé—®é¢˜äº†ï¼Œä½†è¿˜èƒ½å¯¹è¿™ç§æ–¹æ³•è¿›è¡Œä¸€ç‚¹å°è°ƒæ•´æ¥è¿›ä¸€æ­¥æé«˜æ•ˆæœï¼Œå°¤å…¶æ˜¯åº”å¯¹æ–‡æœ¬åˆ†ç±»çš„æƒ…å†µã€‚æˆ‘ä»¬æ¥ç®€è¦è®¨è®ºä¸€ä¸‹ä¸€ä¸ªç®—æ³•å½“å‰çŠ¶æ€çš„ä¸€ä¸ªé—®é¢˜ï¼Œç„¶ååœ¨è®²ä¸€ä¸‹å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>è¿˜æ˜¯è€ƒè™‘åƒåœ¾é‚®ä»¶åˆ†ç±»çš„è¿‡ç¨‹ï¼Œè®¾æƒ³ä½ å­¦å®Œäº†CS229çš„è¯¾ç¨‹ï¼Œç„¶ååšäº†å¾ˆæ£’çš„ç ”ç©¶é¡¹ç›®ï¼Œä¹‹åä½ å†³å®šåœ¨$2003$å¹´$6$æœˆæŠŠè‡ªå·±çš„ä½œå“æŠ•ç¨¿åˆ°NIPSä¼šè®®ï¼Œè¿™ä¸ªNIPSæ˜¯æœºå™¨å­¦ä¹ é¢†åŸŸçš„ä¸€ä¸ªé¡¶çº§ä¼šè®®ï¼Œé€’äº¤è®ºæ–‡çš„æˆªæ­¢æ—¥æœŸä¸€èˆ¬æ˜¯å…­æœˆæœ«åˆ°ä¸ƒæœˆåˆã€‚ä½ é€šè¿‡é‚®ä»¶æ¥å¯¹è¿™ä¸ªä¼šè®®è¿›è¡Œäº†è®¨è®ºï¼Œç„¶åä½ ä¹Ÿå¼€å§‹æ”¶åˆ°å¸¦æœ‰ nips å››ä¸ªå­—æ¯çš„ä¿¡æ¯ã€‚ä½†è¿™ä¸ªæ˜¯ä½ ç¬¬ä¸€ä¸ªNIPSè®ºæ–‡ï¼Œè€Œåœ¨æ­¤ä¹‹å‰ï¼Œä½ ä»æ¥æ²¡æœ‰æ¥åˆ°è¿‡ä»»ä½•å¸¦æœ‰ nips è¿™ä¸ªå•è¯çš„é‚®ä»¶ï¼›å°¤å…¶é‡è¦çš„æ˜¯ï¼Œnips è¿™ä¸ªå•è¯å°±ä»æ¥éƒ½æ²¡æœ‰å‡ºç°åœ¨ä½ çš„åƒåœ¾/æ­£å¸¸é‚®ä»¶è®­ç»ƒé›†é‡Œé¢ã€‚åŠ å…¥è¿™ä¸ª nips æ˜¯ä½ å­—å…¸ä¸­çš„ç¬¬$35000$ä¸ªå•è¯é‚£ä¹ˆä½ çš„æœ´ç´ è´å¶æ–¯åƒåœ¾é‚®ä»¶ç­›é€‰å™¨å°±è¦å¯¹å‚æ•°$\phi_{35000|y}$ è¿›è¡Œæœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}\phi_{35000|y=1} &=  \frac{\sum^m_{i=1}1\{x^{(i)}_{35000}=1 \wedge y^{(i)}=1  \}}{\sum^m_{i=1}1\{y^{(i)}=0\}}  &=0 \\\phi_{35000|y=0} &=  \frac{\sum^m_{i=1}1\{x^{(i)}_{35000}=1 \wedge y^{(i)}=0  \}}{\sum^m_{i=1}1\{y^{(i)}=0\}}  &=0 \\\end{aligned}</script><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå› ä¸ºä¹‹å‰ç¨‹åºä»æ¥æ²¡æœ‰åœ¨åˆ«çš„åƒåœ¾é‚®ä»¶æˆ–è€…æ­£å¸¸é‚®ä»¶çš„è®­ç»ƒæ ·æœ¬ä¸­çœ‹åˆ°è¿‡ nips è¿™ä¸ªè¯ï¼Œæ‰€ä»¥å®ƒå°±è®¤ä¸ºçœ‹åˆ°è¿™ä¸ªè¯å‡ºç°åœ¨è¿™ä¸¤ç§é‚®ä»¶ä¸­çš„æ¦‚ç‡éƒ½æ˜¯$0$ã€‚å› æ­¤å½“è¦å†³å®šä¸€ä¸ªåŒ…å« nips è¿™ä¸ªå•è¯çš„é‚®ä»¶æ˜¯å¦ä¸ºåƒåœ¾é‚®ä»¶çš„æ—¶å€™ï¼Œä»–å°±æ£€éªŒè¿™ä¸ªç±»çš„åéªŒæ¦‚ç‡ï¼Œç„¶åå¾—åˆ°äº†ï¼š</p><script type="math/tex; mode=display">\begin{aligned}p(y=1|x) &= \frac{ \prod^n_{i=1} p(x_i|y=1)p(y=1) }   {\prod^n_{i=1} p(x_i|y=1)p(y=1) +\prod^n_{i=1} p(x_i|y=1)p(y=0)    }\\&= \frac00\\\end{aligned}</script><p>è¿™æ˜¯å› ä¸ºå¯¹äºâ€  $\prod^n<em>{i=1} p(x_i|y)$â€ä¸­åŒ…å«äº†$p(x</em>{35000}|y) = 0$çš„éƒ½åŠ äº†èµ·æ¥ï¼Œä¹Ÿå°±è¿˜æ˜¯$0$ã€‚æ‰€ä»¥æˆ‘ä»¬çš„ç®—æ³•å¾—åˆ°çš„å°±æ˜¯ $\frac00$ï¼Œä¹Ÿå°±æ˜¯ä¸çŸ¥é“è¯¥åšå‡ºæ€ä¹ˆæ ·çš„é¢„æµ‹äº†ã€‚</p><p>ç„¶åè¿›ä¸€æ­¥æ‹“å±•ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼Œç»Ÿè®¡å­¦ä¸Šæ¥è¯´ï¼Œåªå› ä¸ºä½ åœ¨è‡ªå·±ä»¥å‰çš„æœ‰é™çš„è®­ç»ƒæ•°æ®é›†ä¸­æ²¡è§åˆ°è¿‡ä¸€ä»¶äº‹ï¼Œå°±ä¼°è®¡è¿™ä¸ªäº‹ä»¶çš„æ¦‚ç‡ä¸ºé›¶ï¼Œè¿™æ˜æ˜¾ä¸æ˜¯ä¸ªå¥½ä¸»æ„ã€‚å‡è®¾é—®é¢˜æ˜¯ä¼°è®¡ä¸€ä¸ªå¤šé¡¹å¼éšæœºå˜é‡ $z$ ï¼Œå…¶å–å€¼èŒƒå›´åœ¨${1,â€¦, k}$ä¹‹å†…ã€‚æ¥ä¸‹æ¥å°±å¯ä»¥ç”¨$\phi_i = p (z = i)$ æ¥ä½œä¸ºå¤šé¡¹å¼å‚æ•°ã€‚ç»™å®šä¸€ä¸ª $m$ ä¸ªç‹¬ç«‹è§‚æµ‹${z^{(1)}, â€¦, z^{(m)}}$ ç»„æˆçš„é›†åˆï¼Œç„¶åæœ€å¤§ä¼¼ç„¶ä¼°è®¡çš„å½¢å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\phi_j=\frac{\sum^m_{i=1}1\{z^{(i)}=j\}}m</script><p>æ­£å¦‚å’±ä»¬ä¹‹å‰è§åˆ°çš„ï¼Œå¦‚æœæˆ‘ä»¬ç”¨è¿™äº›æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼Œé‚£ä¹ˆä¸€äº›$\phi_j$å¯èƒ½æœ€ç»ˆå°±æ˜¯é›¶äº†ï¼Œè¿™å°±æ˜¯ä¸ªé—®é¢˜äº†ã€‚è¦é¿å…è¿™ä¸ªæƒ…å†µï¼Œå’±ä»¬å°±å¯ä»¥å¼•å…¥<strong>æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ï¼ˆLaplace smoothingï¼‰ï¼Œ</strong> è¿™ç§æ–¹æ³•æŠŠä¸Šé¢çš„ä¼°è®¡æ›¿æ¢æˆï¼š</p><script type="math/tex; mode=display">\phi_j=\frac{\sum^m_{i=1}1\{z^{(i)}=j\}+1}{m+k}</script><p>è¿™é‡Œé¦–å…ˆæ˜¯å¯¹åˆ†å­åŠ $1$ï¼Œç„¶åå¯¹åˆ†æ¯åŠ $k$ï¼Œè¦æ³¨æ„$\sum^k_{j=1} \phi_j = 1$ä¾ç„¶æˆç«‹ï¼ˆè‡ªå·±æ£€éªŒä¸€ä¸‹ï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªå¿…é¡»æœ‰çš„æ€§è´¨ï¼Œå› ä¸º$\phi_j$ æ˜¯å¯¹æ¦‚ç‡çš„ä¼°è®¡ï¼Œç„¶åæ‰€æœ‰çš„æ¦‚ç‡åŠ åˆ°ä¸€èµ·å¿…ç„¶ç­‰äº$1$ã€‚å¦å¤–å¯¹äºæ‰€æœ‰çš„ $j$ å€¼ï¼Œéƒ½æœ‰$\phi_j \neq 0$ï¼Œè¿™å°±è§£å†³äº†åˆšåˆšçš„æ¦‚ç‡ä¼°è®¡ä¸ºé›¶çš„é—®é¢˜äº†ã€‚åœ¨æŸäº›ç‰¹å®šçš„æ¡ä»¶ä¸‹ï¼ˆç›¸å½“å¼ºçš„å‡è®¾æ¡ä»¶ä¸‹ï¼Œarguably quite strongï¼‰ï¼Œå¯ä»¥å‘ç°æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘è¿˜çœŸèƒ½ç»™å‡ºå¯¹å‚æ•°$\phi_j$ çš„æœ€ä½³ä¼°è®¡ï¼ˆoptimal estimatorï¼‰ã€‚</p><p>å›åˆ°æˆ‘ä»¬çš„æœ´ç´ è´å¶æ–¯åˆ†é€‰å™¨é—®é¢˜ä¸Šï¼Œä½¿ç”¨äº†æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ä¹‹åï¼Œå¯¹å‚æ•°çš„ä¼°è®¡å°±å†™æˆäº†ä¸‹é¢çš„å½¢å¼ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\phi_{j|y=1} & =\frac{\sum^m_{i=1}1\{x_j^{(i)}=1\wedge y ^{(i)}=1\}+1}{\sum^m_{i=1}1{\{y^{(i)}=1\}}+2}\\\phi_{j|y=0} & =\frac{\sum^m_{i=1}1\{x_j^{(i)}=1\wedge y ^{(i)}=10\}+1}{\sum^m_{i=1}1{\{y^{(i)}=0\}}+2}\\\end{aligned}</script><p>ï¼ˆåœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸æ˜¯å¦å¯¹$\phi_y$ ä½¿ç”¨æ‹‰æ™®æ‹‰æ–¯å¹¶æ²¡æœ‰å¤ªå¤§å½±å“ï¼Œå› ä¸ºé€šå¸¸æˆ‘ä»¬ä¼šå¯¹æ¯ä¸ªåƒåœ¾é‚®ä»¶å’Œéåƒåœ¾é‚®ä»¶éƒ½æœ‰ä¸€ä¸ªåˆé€‚çš„åˆ’åˆ†æ¯”ä¾‹ï¼Œæ‰€ä»¥$\phi_y$ ä¼šæ˜¯å¯¹$p(y = 1)$ çš„ä¸€ä¸ªåˆç†ä¼°è®¡ï¼Œæ— è®ºå¦‚ä½•éƒ½ä¼šä¸é›¶ç‚¹æœ‰ä¸€å®šè·ç¦»ã€‚ï¼‰</p><h3 id="2-é’ˆå¯¹æ–‡æœ¬åˆ†ç±»çš„äº‹ä»¶æ¨¡å‹ï¼ˆEvent-models-for-text-classificationï¼‰"><a href="#2-é’ˆå¯¹æ–‡æœ¬åˆ†ç±»çš„äº‹ä»¶æ¨¡å‹ï¼ˆEvent-models-for-text-classificationï¼‰" class="headerlink" title="2 é’ˆå¯¹æ–‡æœ¬åˆ†ç±»çš„äº‹ä»¶æ¨¡å‹ï¼ˆEvent models for text classificationï¼‰"></a>2 é’ˆå¯¹æ–‡æœ¬åˆ†ç±»çš„äº‹ä»¶æ¨¡å‹ï¼ˆEvent models for text classificationï¼‰</h3><p>åˆ°è¿™é‡Œå°±è¦ç»™å’±ä»¬å…³äºç”Ÿæˆå­¦ä¹ ç®—æ³•çš„è®¨è®ºè¿›è¡Œä¸€ä¸‹æ”¶å°¾äº†ï¼Œæ‰€ä»¥å°±æ¥ç€è®²ä¸€ç‚¹å…³äºæ–‡æœ¬åˆ†ç±»æ–¹é¢çš„å¦ä¸€ä¸ªæ¨¡å‹ã€‚æˆ‘ä»¬åˆšå·²ç»æ¼”ç¤ºè¿‡çš„æœ´ç´ è´å¶æ–¯æ–¹æ³•èƒ½å¤Ÿè§£å†³å¾ˆå¤šåˆ†ç±»é—®é¢˜äº†ï¼Œä¸è¿‡è¿˜æœ‰å¦ä¸€ä¸ªç›¸å…³çš„ç®—æ³•ï¼Œåœ¨é’ˆå¯¹æ–‡æœ¬çš„åˆ†ç±»æ•ˆæœè¿˜è¦æ›´å¥½ã€‚</p><p>åœ¨é’ˆå¯¹æ–‡æœ¬è¿›è¡Œåˆ†ç±»çš„ç‰¹å®šèƒŒæ™¯ä¸‹ï¼Œå’±ä»¬ä¸Šé¢è®²çš„æœ´ç´ è´å¶æ–¯æ–¹æ³•ä½¿ç”¨çš„æ˜¯ä¸€ç§å«åš<strong>å¤šå…ƒä¼¯åŠªåˆ©äº‹ä»¶æ¨¡å‹ï¼ˆMulti-Variate Bernoulli event modelï¼‰ã€‚</strong> åœ¨è¿™ä¸ªæ¨¡å‹é‡Œé¢ï¼Œæˆ‘ä»¬å‡è®¾é‚®ä»¶å‘é€çš„æ–¹å¼ï¼Œæ˜¯éšæœºç¡®å®šçš„ï¼ˆæ ¹æ®å…ˆéªŒç±»<em>class priors</em>ï¼Œ $p(y)$ï¼‰ï¼Œæ— è®ºæ˜¯ä¸æ˜¯åƒåœ¾é‚®ä»¶å‘é€è€…ï¼Œä»–æ˜¯å¦ç»™ä½ å‘ä¸‹ä¸€å°é‚®ä»¶éƒ½æ˜¯éšæœºå†³å®šçš„ã€‚é‚£ä¹ˆå‘ä»¶äººå°±ä¼šéå†è¯å…¸ï¼Œå†³å®šåœ¨é‚®ä»¶ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå•è¯ $i$ï¼Œå„ä¸ªå•è¯ä¹‹é—´äº’ç›¸ç‹¬ç«‹ï¼Œå¹¶ä¸”æœä»æ¦‚ç‡åˆ†å¸ƒ$p(x<em>i=1|y)=\phi</em>{i|y}$ã€‚å› æ­¤ï¼Œä¸€æ¡æ¶ˆæ¯çš„æ¦‚ç‡ä¸ºï¼š$p(y)\prod^n_{i-1}p(x_i|y)$</p><p> ç„¶åè¿˜æœ‰å¦å¤–ä¸€ä¸ªæ¨¡å‹ï¼Œå«åš<strong>å¤šé¡¹å¼äº‹ä»¶æ¨¡å‹ï¼ˆMultinomial event modelï¼‰ã€‚</strong> è¦æè¿°è¿™ä¸ªæ¨¡å‹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€ä¸ªä¸åŒçš„è®°å·å’Œç‰¹å¾é›†æ¥è¡¨å¾å„ç§é‚®ä»¶ã€‚è®¾ $x_i$ è¡¨ç¤ºå•è¯ä¸­çš„ç¬¬$i$ä¸ªå•è¯ã€‚å› æ­¤ï¼Œ$x_i$ç°åœ¨å°±æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå–å€¼èŒƒå›´ä¸º${1,â€¦,|V|}$ï¼Œè¿™é‡Œçš„$|V|$æ˜¯è¯æ±‡åˆ—è¡¨ï¼ˆå³å­—å…¸ï¼‰çš„é•¿åº¦ã€‚è¿™æ ·ä¸€ä¸ªæœ‰ $n$ ä¸ªå•è¯çš„é‚®ä»¶å°±å¯ä»¥è¡¨å¾ä¸ºä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„å‘é‡$(x_1,x_2,â€¦,x_n)$ï¼›è¿™é‡Œè¦æ³¨æ„ï¼Œä¸åŒçš„é‚®ä»¶å†…å®¹ï¼Œ$n$ çš„å–å€¼å¯ä»¥æ˜¯ä¸åŒçš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªé‚®ä»¶çš„å¼€å¤´æ˜¯â€A NIPS . . .â€ ï¼Œé‚£ä¹ˆ$x_1 = 1$ (â€œaâ€ æ˜¯è¯å…¸ä¸­çš„ç¬¬ä¸€ä¸ª)ï¼Œè€Œ$x_2 = 35000$ (è¿™æ˜¯å‡è®¾ â€œnipsâ€æ˜¯è¯å…¸ä¸­çš„ç¬¬35000ä¸ª)ã€‚</p><p>åœ¨å¤šé¡¹å¼äº‹ä»¶æ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬å‡è®¾é‚®ä»¶çš„ç”Ÿæˆæ˜¯é€šè¿‡ä¸€ä¸ªéšæœºè¿‡ç¨‹çš„ï¼Œè€Œæ˜¯å¦ä¸ºåƒåœ¾é‚®ä»¶æ˜¯é¦–å…ˆå†³å®šçš„ï¼ˆæ ¹æ®$p(y)$ï¼‰ï¼Œè¿™ä¸ªå’Œä¹‹å‰çš„æ¨¡å‹å‡è®¾ä¸€æ ·ã€‚ç„¶åé‚®ä»¶çš„å‘é€è€…å†™é‚®ä»¶é¦–å…ˆæ˜¯è¦ç”Ÿæˆ  ä»å¯¹å•è¯$(p(x<em>1|y))$ çš„æŸç§å¤šé¡¹å¼åˆ†å¸ƒä¸­ç”Ÿæˆ $x_1$ã€‚ç„¶åç¬¬äºŒæ­¥æ˜¯ç‹¬ç«‹äº $x_1$ æ¥ç”Ÿæˆ $x_2$ï¼Œä½†ä¹Ÿæ˜¯ä»ç›¸åŒçš„å¤šé¡¹å¼åˆ†å¸ƒä¸­æ¥é€‰å–ï¼Œç„¶åæ˜¯ $x_3$,$x_4$  ç­‰ç­‰ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°ç”Ÿæˆäº†æ•´ä¸ªé‚®ä»¶ä¸­çš„æ‰€æœ‰çš„è¯ã€‚å› æ­¤ï¼Œä¸€ä¸ªé‚®ä»¶çš„æ€»ä½“æ¦‚ç‡å°±æ˜¯$p(y)\prod^n</em>{i=1}p(x_i|y)$ã€‚è¦æ³¨æ„è¿™ä¸ªæ–¹ç¨‹çœ‹ç€å’Œæˆ‘ä»¬ä¹‹å‰é‚£ä¸ªå¤šå…ƒä¼¯åŠªåˆ©äº‹ä»¶æ¨¡å‹é‡Œé¢çš„é‚®ä»¶æ¦‚ç‡å¾ˆç›¸ä¼¼ï¼Œä½†å®é™…ä¸Šè¿™é‡Œé¢çš„æ„ä¹‰å®Œå…¨ä¸åŒäº†ã€‚å°¤å…¶æ˜¯è¿™é‡Œçš„$x_i|y$ç°åœ¨æ˜¯ä¸€ä¸ªå¤šé¡¹å¼åˆ†å¸ƒäº†ï¼Œè€Œä¸æ˜¯ä¼¯åŠªåˆ©åˆ†å¸ƒäº†ã€‚</p><p>æˆ‘ä»¬æ–°æ¨¡å‹çš„å‚æ•°è¿˜æ˜¯$\phi<em>y = p(y)$ï¼Œè¿™ä¸ªè·Ÿä»¥å‰ä¸€æ ·ï¼Œç„¶åè¿˜æœ‰$\phi</em>{k|y=1} = p(x<em>j =k|y=1)$ (å¯¹ä»»ä½• $j$)ä»¥åŠ $\phi</em>{i|y=0} =p(x_j =k|y=0)$ã€‚è¦æ³¨æ„è¿™é‡Œæˆ‘ä»¬å·²ç»å‡è®¾äº†å¯¹äºä»»ä½•$j$ çš„å€¼ï¼Œ$p(x_j|y)$è¿™ä¸ªæ¦‚ç‡éƒ½æ˜¯ç›¸ç­‰çš„ï¼Œä¹Ÿå°±æ˜¯æ„å‘³ç€åœ¨è¿™ä¸ªå“ªä¸ªè¯æ±‡ç”Ÿæˆçš„è¿™ä¸ªåˆ†å¸ƒä¸ä¾èµ–è¿™ä¸ªè¯åœ¨é‚®ä»¶ä¸­çš„ä½ç½®$j$ã€‚</p><p>å¦‚æœç»™å®šä¸€ä¸ªè®­ç»ƒé›†${(x^{(i)},y^{(i)}); i = 1, â€¦, m}$ï¼Œå…¶ä¸­ $x^{(i)}  = ( x^{(i)}<em>{1} , x^{(i)}</em>{2} ,â€¦, x^{(i)}_{n_i})$ï¼ˆè¿™é‡Œçš„$n$æ˜¯åœ¨ç¬¬$i$ä¸ªè®­ç»ƒæ ·æœ¬ä¸­çš„å•è¯æ•°ç›®ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°æ®çš„ä¼¼ç„¶å‡½æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}\mathcal{L}(\phi,\phi_{k|y=0},\phi_{k|y=1})& = \prod^m_{i=1}p( x^{(i)},y^{(i)})\\& = \prod^m_{i=1}(\prod^{n_i}_{j=1}p(x_j^{(i)}|y;\phi_{k|y=0},\phi_{k|y=1}))p( y^{(i)};\phi_y)\\\end{aligned}</script><p>è®©ä¸Šé¢çš„è¿™ä¸ªå‡½æ•°æœ€å¤§åŒ–å°±å¯ä»¥äº§ç”Ÿå¯¹å‚æ•°çš„æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\phi_{k|y=1}&=  \frac{\sum^m_{i=1}\sum^{n_i}_{j=1}1\{x_j^{(i)}=k\wedge y^{(i)}=1\}}{\sum^m_{i=1}1\{y^{(i)}=1\}n_i} \\\phi_{k|y=0}&=  \frac{\sum^m_{i=1}\sum^{n_i}_{j=1}1\{x_j^{(i)}=k\wedge y^{(i)}=0\}}{\sum^m_{i=1}1\{y^{(i)}=0\}n_i} \\\phi_y&=   \frac{\sum^m_{i=1}1\{y^{(i)}=1\}}{m}\\\end{aligned}</script><p>å¦‚æœä½¿ç”¨æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ï¼ˆå®è·µä¸­ä¼šç”¨è¿™ä¸ªæ–¹æ³•æ¥æé«˜æ€§èƒ½ï¼‰æ¥ä¼°è®¡$\phi<em>{k|y=0}$ å’Œ $\phi</em>{k|y=1}$ï¼Œå°±åœ¨åˆ†å­ä¸ŠåŠ 1ï¼Œç„¶ååˆ†æ¯ä¸ŠåŠ $|V|$ï¼Œå°±å¾—åˆ°äº†ä¸‹é¢çš„ç­‰å¼ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\phi_{k|y=1}&=  \frac{\sum^m_{i=1}\sum^{n_i}_{j=1}1\{x_j^{(i)}=k\wedge y^{(i)}=1\}+1}{\sum^m_{i=1}1\{y^{(i)}=1\}n_i+|V|} \\\phi_{k|y=0}&=  \frac{\sum^m_{i=1}\sum^{n_i}_{j=1}1\{x_j^{(i)}=k\wedge y^{(i)}=0\}+1}{\sum^m_{i=1}1\{y^{(i)}=0\}n_i+|V|} \\\end{aligned}</script><p>å½“ç„¶äº†ï¼Œè¿™ä¸ªå¹¶ä¸è§å¾—å°±æ˜¯ä¸€ä¸ªæœ€å¥½çš„åˆ†ç±»ç®—æ³•ï¼Œä¸è¿‡æœ´ç´ è´å¶æ–¯åˆ†é€‰å™¨é€šå¸¸ç”¨èµ·æ¥è¿˜éƒ½å‡ºä¹æ„æ–™åœ°é‚£ä¹ˆå¥½ã€‚æ‰€ä»¥è¿™ä¸ªæ–¹æ³•å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„â€é¦–å‘é€‰æ‹©â€ï¼Œå› ä¸ºå®ƒå¾ˆç®€å•åˆå¾ˆå¥½å®ç°ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
      <category>è½¬è½½</category>
      
    </categories>
    
    
    <tags>
      
      <tag>machine learning</tag>
      
      <tag>bayes</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç‰›å¥¶å¯ä¹ç»æµå­¦note2</title>
    <link href="/2019/06/08/%E7%89%9B%E5%A5%B6%E5%8F%AF%E4%B9%90%E7%BB%8F%E6%B5%8E%E5%AD%A6note2/"/>
    <url>/2019/06/08/%E7%89%9B%E5%A5%B6%E5%8F%AF%E4%B9%90%E7%BB%8F%E6%B5%8E%E5%AD%A6note2/</url>
    
    <content type="html"><![CDATA[<p>å›é¡¾ä¸€ä¸‹ä¸Šä¸€èŠ‚çš„æ¦‚å¿µï¼š</p><ol><li><strong>æœºä¼šæˆæœ¬</strong>ï¼š</li></ol><p>ä¸€ä»¶äº‹æƒ…çš„æœºä¼šæˆæœ¬ï¼Œæ˜¯æŒ‡ä¸ºäº†ä»äº‹è¿™ä»¶äº‹è€Œæ”¾å¼ƒçš„å…¶ä»–äº‹æƒ…çš„ä»·å€¼ã€‚</p><p>å‡è®¾å°é‡‘æŠ½ä¸­äº†å¤§ä¼—ç‚¹è¯„éœ¸ç‹é¤ï¼Œä»·å€¼200å…ƒçš„Aé¤é¦†çš„æ™šé¥­ï¼Œå¿…é¡»ä»Šæ™šåƒã€‚ä½†æ˜¯ä»Šæ™šå°é‡‘æœ€çˆ±çš„æ—ä¿Šæ°ä»Šæ™šå¼€æ¼”å”±ä¼šï¼Œæ¼”å”±ä¼šé—¨ç¥¨400å…ƒã€‚å°é‡‘ä¹‹å‰æƒ³çš„æ˜¯æ¼”å”±ä¼šé—¨ç¥¨è¶…è¿‡500å…ƒå°±ä¸å»ï¼Œä½†æ˜¯éœ¸ç‹é¤çš„æ¶ˆæ¯çªå¦‚å…¶æ¥ï¼Œå°é‡‘æœ‰ç‚¹çŠ¹è±«äº†ã€‚</p><p>é‚£ä¹ˆè¯·é—®å°é‡‘å»åƒéœ¸ç‹é¤çš„æœºä¼šæˆæœ¬æ˜¯å¤šå°‘ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯100å…ƒã€‚åƒéœ¸ç‹é¤çš„ä»·å€¼ä¸æœ¬é¢˜æ— å…³ï¼Œå› ä¸ºå°é‡‘æ”¾å¼ƒçš„æ˜¯æ—ä¿Šæ°çš„æ¼”å”±ä¼šã€‚æ—ä¿Šæ°æ¼”å”±ä¼šåœ¨å°é‡‘å¿ƒä¸­å€¼500ï¼Œä½†ä»–è¦èŠ±è´¹400å…ƒä¹°ç¥¨ï¼Œå› æ­¤åªè¦éœ¸ç‹é¤åœ¨å°é‡‘çš„å¿ƒç›®ä¸­çš„ä»·å€¼è¶…è¿‡100å…ƒï¼Œå°é‡‘å°±åº”è¯¥å»åƒéœ¸ç‹é¤ã€‚</p><p><strong>åœ¨ç»æµå­¦ç†è®ºé‡Œï¼Œæˆæœ¬å¦‚æœæ²¡æœ‰ç‰¹æ®Šè¯´æ˜å°±æ˜¯æŒ‡æœºä¼šæˆæœ¬ã€‚</strong></p><ol><li><strong>æˆæœ¬æ•ˆç›ŠåŸåˆ™</strong>ï¼š</li></ol><p>å”¯æœ‰å½“è¡ŒåŠ¨å¸¦æ¥çš„æ”¶ç›Šæ¯”æˆæœ¬é«˜æ—¶ï¼Œä½ æ‰åº”è¯¥è¿™ä¹ˆåšã€‚</p><p>è®¾æƒ³ä¸€ä¸‹ï¼Œé©¬ä¸Š618è´­ç‰©èŠ‚äº†ï¼Œä½ æƒ³ä¹°ç©ºè°ƒå’Œè¡£æœã€‚å·²çŸ¥ä½ æœ‰ä¸€å¼ æ‰“æŠ˜ä¼˜æƒ åˆ¸ã€‚ä¹°ç©ºè°ƒä»·æ ¼2000å…ƒï¼Œæ‰“æŠ˜åèƒ½çœ100å—é’±ï¼›ä¹°è¡£æœ200å…ƒï¼Œæ‰“æŠ˜åèƒ½çœ90å…ƒã€‚ç©ºè°ƒæ‰“æŠ˜äº†è¡£æœå°±ä¸èƒ½æ‰“æŠ˜ï¼Œè¡£æœæ‰“æŠ˜äº†ç©ºè°ƒå°±ä¸èƒ½æ‰“æŠ˜ã€‚ä½ åº”è¯¥åœ¨ä¹°ä»€ä¹ˆçš„æ—¶å€™ä½¿ç”¨æ‰“æŠ˜ä¼˜æƒ åˆ¸ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¾è€Œæ˜“è§ï¼Œè¯¥åœ¨ä¹°ç©ºè°ƒæ—¶ç”¨ï¼Œå¤šçœ10å…ƒã€‚</p><ol><li><strong>æœ‰ä¾‹å¤–ï¼Œæ‰èƒ½è¯æ˜è§„å¾‹å­˜åœ¨</strong>ï¼š</li></ol><p>ä¸ªäººç†è§£ï¼Œå°±æ˜¯æ‰¾å‡ºå‘½é¢˜çš„é€†å¦å‘½é¢˜ï¼Œå¹¶è¯æ˜é€†å¦å‘½é¢˜æˆç«‹ã€‚</p><p>æ¯”å¦‚åŠ¨ç‰©ä¸­å¾ˆå¤šé›„æ€§çš„ä½“å‹æ¯”é›Œæ€§å¤§ï¼Œè¿™æ˜¯å› ä¸ºä½“å‹å¤§çš„é›„æ€§æœ‰æœºä¼šä¸æ›´å¤šé›Œæ€§äº¤é…ã€‚è¿™ç®—æ˜¯è§„å¾‹å—ï¼Ÿè¿˜æ˜¯å·§åˆå‘¢ï¼ŸæŒ‰ç…§â€œæœ‰ä¾‹å¤–ï¼Œæ‰èƒ½è¯æ˜è§„å¾‹å­˜åœ¨â€è¿™ä¸€æ ‡å‡†ï¼Œæˆ‘ä»¬åªéœ€æ‰¾åˆ°é›„æ€§ä¸ä¼šå’Œå¾ˆå¤šé›Œæ€§äº¤é…çš„æƒ…å†µï¼Œå¹¶çœ‹çœ‹ä»–ä»¬æ˜¯ä¸æ˜¯é›„æ€§ä½“å‹å°äºç­‰äºé›Œæ€§å³å¯ã€‚</p><p>å¤§å¤šä¸€å¤«ä¸€å¦»åˆ¶çš„é¸Ÿç±»ï¼Œé›„é¸Ÿå’Œé›Œé¸Ÿä½“å‹ç›¸ä¼¼ã€‚å¾ˆå¤šæ˜†è™«ä¸­çš„é›„æ€§å¹¶ä¸ä¼šé€šè¿‡ä½“å‹æ¥å’Œå…¶ä»–é›„æ€§ç«äº‰äº¤é…æƒï¼Œæ‰€ä»¥æ˜†è™«çš„é›„æ€§ç”šè‡³æ¯”é›Œæ€§è¿˜å°ã€‚</p><ol><li><strong>ä»¥å™è¿°å½¢å¼è¡¨è¾¾çš„ä¿¡æ¯æœ€æ˜“è¢«å¸æ”¶</strong>ï¼š</li></ol><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ<em>ç å†œæœ‰é“</em>å…¬ä¼—å·çš„æ–‡ç« å—å¾ˆå¤šç¨‹åºå‘˜å–œçˆ±çš„åŸå› ã€‚ä»–æ¯æ¬¡ç§‘æ™®éƒ½ä¼šè®²ä¸€ä¸ªæ•…äº‹ï¼Œè™½ç„¶ååˆ†è€å¥—ä½†æ˜¯æ•ˆæœå¾ˆç¥å¥‡ï¼Œå¾ˆç®€å•å°±ç†è§£äº†ï¼ˆå½“ç„¶è®°ä¸è®°å¾—ä½ã€èƒ½ä¸èƒ½åº”ç”¨å°±æ˜¯å¦ä¸€å›äº‹äº†ï¼‰ã€‚</p><ol><li><strong>å­¦ä¹ æœ€å¥½çš„æ–¹å¼ä¹‹ä¸€ï¼Œå°±æ˜¯æŠŠå®ƒå†™ä¸‹æ¥</strong>ï¼š</li></ol><p>è¿™å°±æ˜¯ä¼—å¤šå¤§ä½¬ï¼Œæ¯”å¦‚ã€Šæš—æ—¶é—´ã€‹ä¸€ä¹¦çš„ä½œè€…åˆ˜æœªé¹æå€¡å†™åšå®¢çš„ç¼˜æ•…å§ã€‚</p><hr><p>å¼€å§‹è¿™ä¸€è®²çš„è¯é¢˜ï¼š</p><h1 id="CH1-äº§å“è®¾è®¡ä¸­çš„ç»æµå­¦"><a href="#CH1-äº§å“è®¾è®¡ä¸­çš„ç»æµå­¦" class="headerlink" title="CH1 äº§å“è®¾è®¡ä¸­çš„ç»æµå­¦"></a>CH1 äº§å“è®¾è®¡ä¸­çš„ç»æµå­¦</h1><ol><li><strong>é™¤éæ”¹åŠ¨å¸¦æ¥çš„æ”¶ç›Šå¤§äºæ”¹åŠ¨çš„æˆæœ¬ï¼Œå¦åˆ™ç”Ÿäº§å•†ä¸ä¼šç»™äº§å“ç ”å‘æ–°åŠŸèƒ½</strong></li></ol><p>å•†ä¸šç¯å¢ƒä¸­ï¼Œäº§å“è®¾è®¡ã€ç§‘å­¦ç ”å‘è¦ç¬¦åˆæˆæœ¬æ•ˆç›ŠåŸåˆ™ã€‚å³äº§å“è®¾è®¡æ—¢è¦åŒ…å«æœ€ç¬¦åˆæ¶ˆè´¹è€…å¿ƒæ„çš„åŠŸèƒ½ï¼Œåˆè¦æ»¡è¶³å–æ–¹ä¿æŒä½ä»·ã€ä¾¿äºç«äº‰çš„éœ€æ±‚ã€‚äº§å“è®¾è®¡å¿…é¡»åœ¨ä¸¤è€…ä¹‹é—´ä¿æŒå¹³è¡¡ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œä¸ºä»€ä¹ˆæŸäº›å…¬å¸ä»â€œæŠ€å·¥è´¸â€è½¬å‘â€œè´¸å·¥æŠ€â€ï¼ˆå³ä»æŠ€æœ¯æœ€é‡è¦è½¬å‘è´¸æ˜“æœ€é‡è¦ï¼‰ï¼Ÿè¿™ä¹Ÿè®¸æ˜¯å…¬å¸é¢†å¯¼å±‚è®¤ä¸ºæŠ•å…¥åœ¨æŠ€æœ¯ç ”å‘ä¸Šé¢çš„æˆæœ¬è¶…è¿‡äº†æ‰€èƒ½å¸¦æ¥çš„æ”¶å…¥ã€‚</p><h1 id="CH2-ä¾›æ±‚å…³ç³»å®è·µ"><a href="#CH2-ä¾›æ±‚å…³ç³»å®è·µ" class="headerlink" title="CH2 ä¾›æ±‚å…³ç³»å®è·µ"></a>CH2 ä¾›æ±‚å…³ç³»å®è·µ</h1><ol><li><strong>å•†ä¸šå…¬å¸çš„æœ€å¤§ä»·å€¼ï¼Œä¸åœ¨äºå®ƒèƒ½æé«˜å¤šå°‘ç”Ÿäº§ç‡ï¼Œè€Œåœ¨äºå®ƒèƒ½åˆ›é€ å¤šå°‘åˆ©æ¶¦</strong></li></ol><p>ä»é•¿è¿œè§’åº¦çœ‹ï¼Œæ–°æŠ€æœ¯æ‰€å€Ÿçœä¸‹æ¥çš„æˆæœ¬å¹¶ä¸ä¼šç»™ç”Ÿäº§è€…å¸¦æ¥æ›´é«˜çš„åˆ©æ¶¦ï¼Œè€Œæ˜¯é™ä½äº†äº§å“çš„ä»·æ ¼ï¼Œä½¿æ¶ˆè´¹è€…å—æƒ ã€‚</p><ol><li><strong>æ²¡æœ‰å…è´¹çš„åˆé¤</strong></li></ol><p>æé˜²é‚£äº›å¤ªè¿‡ç¾å¥½çš„æœºé‡ã€‚èµšå–è´¢å¯Œçš„å”¯ä¸€æ–¹å¼ä»ç„¶æ˜¯å¤©èµ‹ã€å‹¤ä¿­ã€å¹¸è¿ï¼Œå†åŠ ä¸Šè‰°è‹¦çš„åŠ³åŠ¨ã€‚</p><p>ç„¶è€Œï¼Œæˆåƒä¸Šä¸‡çš„äººä¼¼ä¹è®¤ä¸ºè‡ªå·±èƒ½å¤Ÿè½»æ¾è‡´å¯Œã€‚ä»–ä»¬äº²çœ¼è§åˆ«äººè¿™ä¹ˆåšè¿‡ï¼šæœ‰äººæŠŠæ‰‹é‡Œçš„é’±å…¨ä¹°äº†ä¸€é£å†²å¤©çš„é«˜ç§‘æŠ€è‚¡ç¥¨ï¼Œæ¯”å¦‚é˜¿é‡Œå·´å·´ã€æ–°æµªç­‰ï¼Œå°±è¿™æ ·å‘äº†å¤§è´¢ï¼›è¿˜æœ‰äººæ‹¼å‘½å€Ÿè´·ï¼Œä¹°ä¸‹å¤§å¤§è¶…è¿‡ä¸ªäººè´Ÿæ‹…èƒ½åŠ›çš„æˆ¿åœ°äº§ï¼Œä¸€å¤œæš´å¯Œã€‚</p><p>â€œæ²¡æœ‰å…è´¹åˆé¤â€å®šå¾‹æˆåŠŸè§£é‡Šäº†2008å¹´çš„é‡‘èå±æœºã€‚ä¸äº†è§£çš„æœ‹å‹è¯·çœ‹ã€Šå¤§ç©ºå¤´ã€‹è¿™éƒ¨ç”µå½±ï¼Œç”µå½±æè¿°äº†å‡ ä¸ªç»æµå­¦å®¶åœ¨æ‰€æœ‰äººéƒ½é™·å…¥æˆ¿ä»·ç‹‚æ¬¢çš„æ—¶å€™ï¼Œç‡å…ˆæ„è¯†åˆ°è‚¡å¸‚å’Œæˆ¿å¸‚ä¼šå´©ç›˜ï¼Œå› æ­¤å¤§é‡åšç©ºæˆ¿å¸‚ï¼Œæœ€åå¤§èµšä¸€ç¬”ã€‚ç”µå½±ä¸­å†™äº†å‡ ä¸ªç»†èŠ‚ï¼Œè¯´å°±è¿å¤œåœºèˆå¥³ã€åœ°ç—æµæ°“ç­‰ä½ä¿¡ç”¨äººå£«éƒ½å€Ÿè´·è´­ä¹°äº†å¤§é‡æˆ¿äº§ï¼Œä¸€æ—¦é‡‘èå±æœºçˆ†å‘ï¼Œä»–ä»¬æ ¹æœ¬æ— åŠ›è¿˜æ¬¾ã€‚æ‰€æœ‰äººéƒ½é™·å…¥å…è´¹åˆé¤ä¸­çš„æ—¶å€™ï¼Œä½ å°±è¦è­¦æƒ•äº†ã€‚</p><ol><li><strong>ä¸€ä»·å®šå¾‹</strong></li></ol><p>ä¸¤åº§åŸå¸‚ä¹‹é—´å•†å“çš„ä»·æ ¼ï¼Œä¸ä¼šè¶…è¿‡ä¸¤åœ°ä¹‹é—´çš„è¿è¾“æˆæœ¬ã€‚â€œä¸€ä»·å®šå¾‹â€å°¤å…¶é€‚åˆäºç«äº‰æ¿€çƒˆçš„å¸‚åœºã€‚</p><p>â€œä¸€ä»·å®šå¾‹â€æŒ‡å‡ºï¼Œä»»ä½•è¯•å›¾åˆ©ç”¨å¯Œäººå¤šèŠ±é’±çš„æƒ³æ³•çš„ä¾›åº”å•†ï¼Œéƒ½ä¼šç»™ç«äº‰å¯¹æ‰‹åˆ›é€ å‡ºç›´æ¥è·åˆ©çš„æœºä¼šã€‚</p><p>åœ¨æ²™æ¼ é‡Œå‘é©¬äº‘å’Œå¦å¤–ä¸€ä¸ªç©·äººå–æ°´ï¼Œé©¬äº‘å¯èƒ½ä¼šç»™å‡ºæ›´é«˜çš„ä»·æ ¼ã€‚ä½†æ˜¯åœ¨ç«äº‰æ¿€çƒˆçš„å¸‚åœºï¼Œæ°´çš„ä»·æ ¼éƒ½æ˜¯ç»Ÿä¸€çš„ã€‚è¿™ä¸ªä»·æ ¼å°±æ˜¯äººä»¬å¿ƒä¸­è®¤ä¸ºå®ƒçš„ä»·å€¼ã€‚</p><ol><li><strong>è¾¹é™…æˆæœ¬</strong></li></ol><p>ç”Ÿäº§çš„å•†å“æ•°ç›®è¶Šå¤šï¼Œ<strong>æ€»æˆæœ¬</strong>è¶Šé«˜ï¼Œè¿™æ˜¯æ˜¾ç„¶çš„ã€‚ä½†æ˜¯æ€»æˆæœ¬ä¸ç”Ÿäº§æ•°ç›®çš„å…³ç³»å¹¶ä¸æ˜¯çº¿æ€§çš„ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>study method</tag>
      
      <tag>economics</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç¥ç»ç½‘ç»œå­¦ä¹ ç¬”è®°note1</title>
    <link href="/2019/06/06/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0note1/"/>
    <url>/2019/06/06/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0note1/</url>
    
    <content type="html"><![CDATA[<h1 id="å®ç°ç¥ç»ç½‘ç»œ"><a href="#å®ç°ç¥ç»ç½‘ç»œ" class="headerlink" title="å®ç°ç¥ç»ç½‘ç»œ"></a>å®ç°ç¥ç»ç½‘ç»œ</h1><p>ç®€å•çš„ç¥ç»ç½‘ç»œå®ç°ã€‚åŒ…å«éšæœºæ¢¯åº¦ä¸‹é™ç®—æ³•ã€åå‘ä¼ æ’­ç®—æ³•ã€‚</p><pre><code class="lang-python">class Network(object):    def __init__(self, sizes):        self.num_layers = len(sizes)        self.sizes = sizes        self.biases = [np.random.randn(y, 1) for y in sizes[1:]]        self.weights = [np.random.randn(y, x)                        for x, y in zip(sizes[:-1], sizes[1:])]    def feedforward(self, a):        for b, w in zip(self.biases, self.weights):            a = sigmoid(np.dot(w, a)+b)        return a    def SGD(self, training_data, epochs, mini_batch_size, eta,            test_data=None):        training_data = list(training_data)        n = len(training_data)        if test_data:            test_data = list(test_data)            n_test = len(test_data)        for j in range(epochs):            random.shuffle(training_data)            mini_batches = [                training_data[k:k+mini_batch_size]                for k in range(0, n, mini_batch_size)]            for mini_batch in mini_batches:                self.update_mini_batch(mini_batch, eta)            if test_data:                print(&quot;Epoch &#123;&#125; : &#123;&#125; / &#123;&#125;&quot;.format(j,self.evaluate(test_data),n_test));            else:                print(&quot;Epoch &#123;&#125; complete&quot;.format(j))    def update_mini_batch(self, mini_batch, eta):        nabla_b = [np.zeros(b.shape) for b in self.biases]        nabla_w = [np.zeros(w.shape) for w in self.weights]        for x, y in mini_batch:            delta_nabla_b, delta_nabla_w = self.backprop(x, y)            nabla_b = [nb+dnb for nb, dnb in zip(nabla_b, delta_nabla_b)]            nabla_w = [nw+dnw for nw, dnw in zip(nabla_w, delta_nabla_w)]        self.weights = [w-(eta/len(mini_batch))*nw                        for w, nw in zip(self.weights, nabla_w)]        self.biases = [b-(eta/len(mini_batch))*nb                       for b, nb in zip(self.biases, nabla_b)]    def backprop(self, x, y):        nabla_b = [np.zeros(b.shape) for b in self.biases]        nabla_w = [np.zeros(w.shape) for w in self.weights]        # feedforward        activation = x        activations = [x] # list to store all the activations, layer by layer        zs = [] # list to store all the z vectors, layer by layer        for b, w in zip(self.biases, self.weights):            z = np.dot(w, activation)+b            zs.append(z)            activation = sigmoid(z)            activations.append(activation)        # backward pass        delta = self.cost_derivative(activations[-1], y) * \            sigmoid_prime(zs[-1])        nabla_b[-1] = delta        nabla_w[-1] = np.dot(delta, activations[-2].transpose())        for l in range(2, self.num_layers):            z = zs[-l]            sp = sigmoid_prime(z)            delta = np.dot(self.weights[-l+1].transpose(), delta) * sp            nabla_b[-l] = delta            nabla_w[-l] = np.dot(delta, activations[-l-1].transpose())        return (nabla_b, nabla_w)    def evaluate(self, test_data):        test_results = [(np.argmax(self.feedforward(x)), y)                        for (x, y) in test_data]        return sum(int(x == y) for (x, y) in test_results)    def cost_derivative(self, output_activations, y):        return (output_activations-y)#### Miscellaneous functionsdef sigmoid(z):    &quot;&quot;&quot;The sigmoid function.&quot;&quot;&quot;    return 1.0/(1.0+np.exp(-z))def sigmoid_prime(z):    &quot;&quot;&quot;Derivative of the sigmoid function.&quot;&quot;&quot;    return sigmoid(z)*(1-sigmoid(z))</code></pre>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
      <category>è½¬è½½</category>
      
    </categories>
    
    
    <tags>
      
      <tag>deep learning</tag>
      
      <tag>machcine learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ”¯æŒå‘é‡æœºç¬”è®°</title>
    <link href="/2019/05/30/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E7%AC%94%E8%AE%B0/"/>
    <url>/2019/05/30/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="æ”¯æŒå‘é‡æœº"><a href="#æ”¯æŒå‘é‡æœº" class="headerlink" title="æ”¯æŒå‘é‡æœº"></a>æ”¯æŒå‘é‡æœº</h1><h2 id="1-æ€æƒ³"><a href="#1-æ€æƒ³" class="headerlink" title="1. æ€æƒ³"></a>1. æ€æƒ³</h2><p>SVMçš„æ€æƒ³ï¼Œå³å¯¹äºå¹³é¢ä¸Šçš„äºŒåˆ†ç±»é—®é¢˜ï¼Œæ‰¾åˆ°ä¸€æ¡ç›´çº¿ï¼Œä¸ä½†èƒ½å¤Ÿå°†ä¸¤ç±»æ•°æ®æ°å¥½åˆ†å¼€ï¼Œè€Œä¸”è¦åˆ†çš„è¶Šå¼€è¶Šå¥½ã€‚å³æœ€å¤§åŒ–ä¸åŒç±»åˆ«çš„ï¼ˆå…³é”®ï¼‰æ ·æœ¬ç‚¹ä¹‹é—´çš„è·ç¦»ã€‚</p><p><strong>æˆ‘ä»¬çš„ç›®çš„æ˜¯æ‰¾åˆ°ä¸€æ¡æ²³ï¼Œè®©è¿™æ¡æ²³çš„æ²³å²¸æ°æ°ç»è¿‡æ­£è´Ÿæ ·æœ¬çš„åŒæ—¶ï¼Œå°½å¯èƒ½å®½ã€‚</strong></p><p><img src="/2019/05/30/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E7%AC%94%E8%AE%B0/2019-05-30-20-27-32.png" alt></p><p>ä¸Šå›¾è“çº¿æ˜¯æœ€ç»ˆç¡®å®šçš„è¶…å¹³é¢ï¼Œçº¢çº¿åˆ™æ˜¯æ­£ä¾‹å’Œåä¾‹çš„â€œæ¥šæ²³æ±‰ç•Œâ€ã€‚è¿™â€œæ¥šæ²³æ±‰ç•Œâ€ä¸è¶…å¹³é¢å¹³è¡Œï¼Œå¹¶ä¸”è·è¶…å¹³é¢ç›¸åŒè·ç¦»ã€‚</p><p><strong>æˆ‘ä»¬ä¸å¦¨å®šä¹‰è¿™æ®µè·ç¦»ä¸º1ã€‚</strong></p><h2 id="2-æœ€å¤§åŒ–è·ç¦»çš„æ–¹æ³•"><a href="#2-æœ€å¤§åŒ–è·ç¦»çš„æ–¹æ³•" class="headerlink" title="2. æœ€å¤§åŒ–è·ç¦»çš„æ–¹æ³•"></a>2. æœ€å¤§åŒ–è·ç¦»çš„æ–¹æ³•</h2><p>å‡è®¾å·²ç»æ‰¾åˆ°äº†è¿™æ ·ä¸€æ¡è¶…å¹³é¢ï¼Œå®ƒçš„æ³•å‘é‡ä¸º$\vec{w}$.</p><p>å¯¹äºä»»æ„æ ·æœ¬$\vec{u}$ï¼Œå¦‚æœ$f(u)=w\cdot u+b &gt; 0$åˆ™æŠŠæ ·æœ¬uå½’ä¸ºæ­£ä¾‹ï¼Œåä¹‹ä¸ºè´Ÿä¾‹ã€‚</p><p>ç°åœ¨æƒ³è¦æ‰¾åˆ°ä¸€æ¡æ²³ï¼Œè®©è¿™æ¡æ²³çš„æ²³å²¸æ°æ°ç»è¿‡æ­£è´Ÿæ ·æœ¬çš„åŒæ—¶ï¼Œå°½å¯èƒ½å®½ã€‚è¿™æ ·æˆ‘ä»¬å¯¹æ­£ä¾‹å’Œè´Ÿä¾‹çš„åˆ’åˆ†åšå‡ºäº†æ›´é«˜çš„è¦æ±‚ï¼šä¸ä»…ä»…å¤§äº0ï¼Œæ›´è¦å¤§äºæ²³çš„å®½åº¦ï¼ˆçš„ä¸€åŠï¼‰ï¼Œå³å¤§äº1ã€‚</p><script type="math/tex; mode=display">f\left(\mathbf{x}_{+}\right)=\mathbf{w} \cdot \mathbf{x}_{+}+b \geq 1</script><script type="math/tex; mode=display">f\left(\mathbf{x}_{-}\right)=\mathbf{w} \cdot \mathbf{x}_{-}+b \leq-1</script><p>è®¾æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªæ ·æœ¬ï¼Œä¸€ä¸ªå°çº¢ï¼Œä¸€ä¸ªå°è“ï¼Œä»–ä»¬ç«™åœ¨æ²³çš„å¯¹å²¸ç›¸æœ›ã€‚</p><script type="math/tex; mode=display">\begin{aligned} \mathbf{w} \cdot \mathbf{x}_{1}+b &=+1 \\ \mathbf{w} \cdot \mathbf{x}_{2}+b &=-1 \end{aligned}</script><p><img src="/2019/05/30/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E7%AC%94%E8%AE%B0/2019-05-30-20-45-50.png" alt></p><p>é‚£æˆ‘ç°åœ¨é—®ä½ ï¼Œæ±‚æ²³çš„é•¿åº¦ã€‚WTFï¼Ÿè¿™æ ·å°±èƒ½æ±‚å‡ºæ²³çš„é•¿åº¦äº†å—ï¼Ÿæ˜¯çš„ï¼Œæƒ³ä¸€ä¸‹ï¼Œä»å°çº¢æŒ‡å‘å°è“çš„é‚£ä¸€æ¡å‘é‡$x_1-x_2$ï¼Œå‘è¶…å¹³é¢çš„æ³•å‘é‡$w$æ–¹å‘æŠ•å½±ï¼Œç„¶åå¾—åˆ°çš„å‘é‡é•¿åº¦ä¸å°±æ˜¯æ²³çš„é•¿åº¦äº†å—ï¼Ÿ</p><p>æ²³çš„é•¿åº¦ï¼š$ \mathbf{w} \cdot\left(\mathbf{x}<em>{1}-\mathbf{x}</em>{2}\right)=2 $<br>ã€‚è¿˜è®°å¾—ä¸¤ä¸ªå‘é‡æŠ•å½±å°±æ˜¯æ±‚ç‚¹ç§¯å—ï¼Ÿè›¤è›¤ã€‚</p><p>å¿˜äº†ï¼Œæ³•å‘é‡ä¹Ÿæ˜¯æœ‰é•¿åº¦çš„ï¼Œä¸ºäº†æŠŠæ³•å‘é‡æ ‡å‡†åŒ–ï¼Œæˆ‘ä»¬éœ€è¦é™¤ä»¥æ³•å‘é‡çš„é•¿åº¦ï¼š</p><script type="math/tex; mode=display">\frac{\mathbf{w}}{\|\mathbf{w}\|} \cdot\left(\mathbf{x}_{1}-\mathbf{x}_{2}\right)=\frac{2}{\|\mathbf{w}\|}</script><p>é—®é¢˜å°±è½¬åŒ–ä¸ºå°†$\frac{2}{||\mathbf{w}||}$æ±‚æœ€å¤§ã€‚è¿™å°±æ˜¯ä¸€ä¸ªæœ€ä¼˜åŒ–é—®é¢˜ï¼ŒæŒ‰ç†è¯´åˆ©ç”¨æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•ï¼Œå¯¹åˆ†é‡æŒ¨ä¸ªæ±‚å¯¼å³å¯æ±‚å‡ºæå€¼ç‚¹ã€‚ä½†æ˜¯ç°åœ¨è¿™å‰¯æ¨¡æ ·è¿æ±‚å¯¼éƒ½åšä¸åˆ°ã€‚æˆ‘ä»¬æƒ³åŠæ³•å˜å½¢ä¸€ä¸‹ï¼š</p><p>å¸¸æ•°é¡¹è‚¯å®šå°±ä¸è¦äº†ï¼Œé—®é¢˜å°±å˜æˆäº†æœ€å°åŒ–$\frac{1}{2}|\mathbf{w}|^{2}$ã€‚è¿™ä¸€åˆ‡éƒ½æ˜¯ä¸ºäº†æ–¹ä¾¿æ•°å­¦å¤„ç†å‘€ã€‚</p><p>ä¸è¦å¿˜äº†ï¼Œè¿˜æœ‰ä¸€ä¸ªï¼ˆå…¶å®æ˜¯iä¸ªï¼‰é™åˆ¶æ¡ä»¶ï¼š</p><script type="math/tex; mode=display">y_{i}\left(\mathbf{w} \cdot \mathbf{x}_{i}+b\right) \geq 1</script><p>yå–1æˆ–-1ï¼Œç”¨æ¥æ ‡è®°æ ·æœ¬ç±»åˆ«ã€‚</p><h2 id="3-äºŒæ¬¡ä¼˜åŒ–é—®é¢˜"><a href="#3-äºŒæ¬¡ä¼˜åŒ–é—®é¢˜" class="headerlink" title="3. äºŒæ¬¡ä¼˜åŒ–é—®é¢˜"></a>3. äºŒæ¬¡ä¼˜åŒ–é—®é¢˜</h2><p>æ‰€è°“æ‹‰æ ¼æœ—æ—¥ï¼Œå°±æ˜¯åœ¨é™åˆ¶æ¡ä»¶å‰é¢åŠ ä¸ªå‚æ•°ï¼Œç„¶åé™„åŠ åœ¨è¦æ±‚çš„ä¼˜åŒ–æ–¹ç¨‹å¼ä¸­ï¼Œä»è€Œå°†é—®é¢˜è½¬åŒ–æˆæ— çº¦æŸä¼˜åŒ–é—®é¢˜ã€‚è¢«æ‹‰æ ¼æœ—æ—¥ä¹‹åï¼Œæˆ‘ä»¬åŠ äº†iä¸ªå‚æ•°ï¼Œç»„æˆå‚æ•°å‘é‡a</p><script type="math/tex; mode=display">L=\frac{1}{2}\|\mathbf{w}\|^{2}-\sum_{i=1}^{l} a_{i}\left(y_{i}\left(\mathbf{x}_{i} \cdot \mathbf{w}+b\right)-1\right)</script><p>æ¥ä¸‹æ¥è¦å¯¹å‘é‡æ±‚å¯¼äº†ã€‚å®³æ€•å—ï¼Ÿæœ‰å¦‚ä¸‹å…¬å¼ï¼š$\frac{\partial|\mathbf{w}|^{2}}{\partial \mathbf{w}}=2 \mathbf{w}$å’Œ$\frac{\partial \mathbf{x} \cdot \mathbf{w}}{\partial \mathbf{w}}=\mathbf{x}$</p><p>æˆ‘ä»¬åˆ†åˆ«å¯¹wå’Œbæ±‚å¯¼ï¼Œçœ‹çœ‹æ‹‰æ ¼æœ—æ—¥å‡½æ•°å¯¹wå’Œbçš„å˜åŒ–åˆ†åˆ«æœ‰ä»€ä¹ˆååº”ï¼š</p><script type="math/tex; mode=display">\begin{aligned} \frac{\partial L}{\partial \mathbf{w}} &=\mathbf{w}-\sum_{i=1}^{l} a_{i} y_{i} \mathbf{x}_{i}=0 \\ \frac{\partial L}{\partial b} &=\sum_{i=1}^{l} a_{i} y_{i}=0 \end{aligned}</script><p>ç°åœ¨åˆé€‚çš„ $ w^*=\sum<em>{i=1}^{l} a</em>{i} y<em>{i} \mathbf{x}</em>{i} $ ä¹Ÿéƒ½æ‰¾åˆ°äº†ï¼Œå°†ä»–ä»¬å›ä»£åˆ°æ‹‰æ ¼æœ—æ—¥å‡½æ•°ä¸­å»ï¼Œçœ‹çœ‹ä»–çš„æœ€å°ç‚¹é•¿ä»€ä¹ˆæ ·å­ã€‚</p><script type="math/tex; mode=display">L=\sum_{i=1}^{l} a_{i}-\frac{1}{2} \sum_{i, j=1}^{l} a_{i} a_{j} y_{i} y_{j} \mathbf{x}_{i} \cdot \mathbf{x}_{j}</script><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å•Šï¼Œè¿™ä¸ªLçš„å¤§å°ï¼Œå–å†³äºæ ·æœ¬ä¹‹é—´çš„ç‚¹ç§¯ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬é€‰çš„ä¸¤ä¸ªå°çº¢å’Œå°è“ï¼Œä»–ä»¬ç«™çš„ä½ç½®ã€‚ä»–ä»¬çš„ä½ç½®è¦æ˜¯ä¸å¥½ï¼Œé‚£è·ç¦»å°±ä¼šä¸å¤Ÿå¤§ï¼Œé‚£æˆ‘ä»¬çš„æ‹‰æ ¼æœ—æ—¥åŒå­¦å°±è¦é‡æ–°é€‰äººã€‚å› æ­¤å‘¢ï¼Œæœ€ç»ˆè¢«é€‰æ‹©çš„æ ·æœ¬ï¼Œé‚£ä¸€å®šæ˜¯å…·æœ‰ä»£è¡¨æ€§çš„ï¼Œæˆ‘ä»¬ç§°å®ƒä»¬ä¸º<strong>æ”¯æŒå‘é‡</strong>ã€‚è¿™å°±æ˜¯æ”¯æŒå‘é‡æœºä¸€è¯çš„ç”±æ¥ã€‚</p><h2 id="4-æ ¸æ–¹æ³•çš„è¿ç”¨"><a href="#4-æ ¸æ–¹æ³•çš„è¿ç”¨" class="headerlink" title="4. æ ¸æ–¹æ³•çš„è¿ç”¨"></a>4. æ ¸æ–¹æ³•çš„è¿ç”¨</h2><p>æœ‰æ—¶å€™æˆ‘ä»¬ä¼šç¢°åˆ°ä¸€äº›æ ·æœ¬ï¼Œä»–ä»¬æœ¬æ¥å°±ä¸æ˜¯çº¿æ€§å¯åˆ†çš„ï¼Œæ¯”å¦‚</p><p><img src="/2019/05/30/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E7%AC%94%E8%AE%B0/2019-05-30-21-14-02.png" alt></p><p>ä½†æˆ‘ä»¬è¿˜æ˜¯å°†ä»–ä»¬åˆ©ç”¨æ”¯æŒå‘é‡æœºåˆ†å¼€äº†ã€‚æ€ä¹ˆåšåˆ°çš„ï¼Ÿæ€ä¹ˆâ€œä»¥ç›´ä¸ºæ›²â€ï¼Ÿé‚£æ˜¯å› ä¸ºæœ‰ä¸€ä¸ªé“ç†ï¼Œ<strong>é«˜ç»´ç©ºé—´æ¯”ä½ç»´ç©ºé—´æ›´å¹¿é˜”çš„</strong>ï¼Œæ›´éš¾å‡ºç°çº¿æ€§ä¸å¯åˆ†çš„çŠ¶å†µã€‚æ‰€ä»¥å¾ˆè‡ªç„¶çš„ï¼Œæˆ‘ä»¬äººä¸ºæ·»åŠ ä¸€äº›åˆ†é‡ï¼Œæ¯”å¦‚å°†äºŒç»´ç‚¹æ·»åŠ zè½´åˆ†é‡åˆ°ä¸‰ç»´å•Šï¼Œç”šè‡³æ— é™ç»´ã€‚ä¹‹åæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªè¶…å¹³é¢ï¼Œå°†ä»–ä»¬åˆ†å¼€å°±æ˜¯è½»è€Œæ˜“ä¸¾çš„äº‹æƒ…å•¦ã€‚</p><p>æˆ‘ä»¬éœ€è¦ä¸€ç§ç¥ç§˜å˜æ¢$\Phi$ï¼Œæ¥å—ä¸€ä¸ªæ ·æœ¬å‘é‡ï¼Œè¾“å‡ºæå‡ç»´åº¦ä¹‹åçš„æ ·æœ¬å‘é‡ã€‚</p><p><img src="/2019/05/30/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E7%AC%94%E8%AE%B0/2019-05-30-21-17-55.png" alt></p><p>$\Phi$å¾ˆéš¾æ‰¾ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸å¿…æ‰¾ã€‚å› ä¸ºæ ¹æ®å‰é¢çš„ç»“è®ºï¼Œæ‹‰æ ¼æœ—æ—¥å‡½æ•°æ ¹æˆ‘ä»¬é€‰å–çš„å…³é”®å‘é‡çš„<strong>å†…ç§¯</strong>æœ‰å…³ï¼Œç›´æ¥è¡¨ç¤ºå‡º$ \Phi\left(\mathbf{x}<em>{1}\right) \cdot \Phi\left(\mathbf{x}</em>{2}\right) $ï¼Œä¸€æ­¥åˆ°ä½å“¦ã€‚</p><p>æ­£å¥½æœ‰è¿™ç§ä¸“é—¨è¡¨ç¤ºä¸¤ä¸ªå‘é‡è¿ç®—çš„å‡½æ•°ï¼Œå«åšæ ¸å‡½æ•°ã€‚</p><script type="math/tex; mode=display">\Phi\left(\mathbf{x}_{1}\right) \cdot \Phi\left(\mathbf{x}_{2}\right)=K\left(\mathbf{x}_{1}, \mathbf{x}_{2}\right)</script><p>ä¸¾ä¸ªä¾‹å­ï¼Œçº¿æ€§æ ¸å‡½æ•°ï¼š</p><script type="math/tex; mode=display">K(x, y) = x\cdot y</script><p>å¤šé¡¹å¼æ ¸å‡½æ•°ï¼š</p><script type="math/tex; mode=display">K\left(\mathbf{x}_{1}, \mathbf{x}_{2}\right)=\left(\mathbf{x}_{1} \cdot \mathbf{x}_{2}+1\right)^{n}</script><p>é«˜æ–¯æ ¸å‡½æ•°ï¼š</p><script type="math/tex; mode=display">K\left(\mathbf{x}_{1}, \mathbf{x}_{2}\right)=e^{\frac{-|| x_{1}+x_{2} ||^{2}}{2 \sigma^{2}}}</script><p>æœ‰çš„æ—¶å€™æˆ‘ä»¬ä¼šç¢°åˆ°ä¸€äº›æ ·æœ¬ï¼Œä»–ä»¬å¾ˆéš¾ç¼ ï¼Œç”šè‡³æ ¹æœ¬çº¿æ€§ä¸å¯åˆ†ã€‚ç±»ä¼¼äºçº¢å†›æ‰“å…¥äº†è“å†›å†…éƒ¨ï¼Œæ ¹æœ¬æ— æ³•æ‰¾åˆ°ä¸€æ¡ç›´çº¿å°†ä»–ä»¬åˆ†å¼€ã€‚è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦æ”¾ä½è¦æ±‚ã€‚</p><p>å¼•å…¥æ¾å¼›å˜é‡ï¼Œå‡ºç°çš„é”™è¯¯æ ·æœ¬åœ¨ä¸€å®šç¨‹åº¦èŒƒå›´å†…è¶Šå°è¶Šå¥½ã€‚</p><script type="math/tex; mode=display">\xi_i =  1-y_{i}\left(w^{T} x_{i}+b\right)</script><p>åˆ™æœ‰ä¸‹å¼</p><script type="math/tex; mode=display">y_{i}\left(w^{T} x_{i}+b\right) \geq 1-\xi_{i}, \quad i=1, \dots, n</script><p>æœ€ç»ˆçš„ä¼˜åŒ–é—®é¢˜å°±å˜æˆäº†</p><script type="math/tex; mode=display">\begin{array}{l}{\min \frac{1}{2}\|w\|^{2}+C \sum_{i=1}^{n} \xi_{i}} \\ {\text {s.t.}, y_{i}\left(w^{T} x_{i}+b\right) \geq 1-\xi_{i}, i=1, \ldots, n} \\ {\xi_{i} \geq 0, i=1, \ldots, n}\end{array}</script><p>Cä¸ºç»éªŒå‚æ•°ï¼Œè°ƒå‚ä¾ å¿…å¤‡ã€‚æ‚¨æƒ³è®©è¯¯å·®å°‘ç‚¹ï¼ŒCå°±å¤§ç‚¹ã€‚</p><p>æ¥ä¸‹æ¥çš„å¥—è·¯å°±å’Œä¹‹å‰ä¸€æ ·äº†ï¼Œæ‹‰æ ¼æœ—æ—¥å•Šä¹‹ç±»çš„ï¼Œç•¥å»ä¸è¡¨ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>machine learning</tag>
      
      <tag>SVM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åä¸ºçš„å‘½è¿ä¸ä¸­å›½çš„ååº”</title>
    <link href="/2019/05/25/%E5%8D%8E%E4%B8%BA%E7%9A%84%E5%91%BD%E8%BF%90%E4%B8%8E%E4%B8%AD%E5%9B%BD%E7%9A%84%E5%8F%8D%E5%BA%94/"/>
    <url>/2019/05/25/%E5%8D%8E%E4%B8%BA%E7%9A%84%E5%91%BD%E8%BF%90%E4%B8%8E%E4%B8%AD%E5%9B%BD%E7%9A%84%E5%8F%8D%E5%BA%94/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¾å›½å°†åä¸ºåˆ—å…¥äº†é»‘åå•ï¼Œå®æ–½ä¸€ç³»åˆ—ä¸é’ˆå¯¹ä¸­å…´ç±»ä¼¼çš„ã€å¤–ç§‘æ‰‹æœ¯å¼çš„ç²¾å‡†æ‰“å‡»ã€‚åä¸ºåœ¨åŠ«éš¾é€ƒã€‚é‚£ä¹ˆåä¸ºæˆ–ä¸­å›½å¯ä»¥åšä»€ä¹ˆæ¥åº”å¯¹å‘¢ï¼Ÿä¸­å›½ä¼šé‡‡å–å“ªäº›æ‰‹æ®µï¼Ÿ"><a href="#ç¾å›½å°†åä¸ºåˆ—å…¥äº†é»‘åå•ï¼Œå®æ–½ä¸€ç³»åˆ—ä¸é’ˆå¯¹ä¸­å…´ç±»ä¼¼çš„ã€å¤–ç§‘æ‰‹æœ¯å¼çš„ç²¾å‡†æ‰“å‡»ã€‚åä¸ºåœ¨åŠ«éš¾é€ƒã€‚é‚£ä¹ˆåä¸ºæˆ–ä¸­å›½å¯ä»¥åšä»€ä¹ˆæ¥åº”å¯¹å‘¢ï¼Ÿä¸­å›½ä¼šé‡‡å–å“ªäº›æ‰‹æ®µï¼Ÿ" class="headerlink" title="ç¾å›½å°†åä¸ºåˆ—å…¥äº†é»‘åå•ï¼Œå®æ–½ä¸€ç³»åˆ—ä¸é’ˆå¯¹ä¸­å…´ç±»ä¼¼çš„ã€å¤–ç§‘æ‰‹æœ¯å¼çš„ç²¾å‡†æ‰“å‡»ã€‚åä¸ºåœ¨åŠ«éš¾é€ƒã€‚é‚£ä¹ˆåä¸ºæˆ–ä¸­å›½å¯ä»¥åšä»€ä¹ˆæ¥åº”å¯¹å‘¢ï¼Ÿä¸­å›½ä¼šé‡‡å–å“ªäº›æ‰‹æ®µï¼Ÿ"></a>ç¾å›½å°†åä¸ºåˆ—å…¥äº†é»‘åå•ï¼Œå®æ–½ä¸€ç³»åˆ—ä¸é’ˆå¯¹ä¸­å…´ç±»ä¼¼çš„ã€å¤–ç§‘æ‰‹æœ¯å¼çš„ç²¾å‡†æ‰“å‡»ã€‚åä¸ºåœ¨åŠ«éš¾é€ƒã€‚é‚£ä¹ˆåä¸ºæˆ–ä¸­å›½å¯ä»¥åšä»€ä¹ˆæ¥åº”å¯¹å‘¢ï¼Ÿä¸­å›½ä¼šé‡‡å–å“ªäº›æ‰‹æ®µï¼Ÿ</h1><p>åä¸ºè¢«åˆ—ä¸ºç¾å›½â€œå®ä½“æ¸…å•â€æ— ç–‘æ˜¯å½“ä¸‹æœ€å—å…³æ³¨çš„è¯é¢˜ã€‚æ˜¾ç„¶ï¼Œç¾å›½æ˜¯æƒ³é‡‡å–ä¸€ç³»åˆ—ç²¾å‡†æ‰“å‡»ï¼Œå¦„å›¾å°†åä¸ºæ¨å…¥å’Œä¸­å…´ä¸€æ ·çš„å¢ƒåœ°ã€‚å› æ­¤ï¼Œæ— è®ºæ˜¯å›½å†…è¿˜æ˜¯å›½å¤–ï¼Œçº¿ä¸Šè¿˜æ˜¯çº¿ä¸‹ï¼Œåä¸ºå’Œä¸­å›½çš„ååº”æ— ç–‘æ˜¯æœ€å—äººå…³æ³¨çš„ã€‚é‰´äºå›½å†…æ–°é—»å¹³å°ç½•æœ‰å®¢è§‚åˆ†æçš„æ–‡ç« ï¼Œæˆ‘é€šè¿‡Quoraè®ºå›ï¼ˆåˆç§°ä½œç¾å›½ç‰ˆçŸ¥ä¹ï¼‰æ‘˜å½•å¹¶ç¿»è¯‘äº†Janus Dongye Qimengå¯¹äºè¯¥é—®é¢˜çš„ç²¾å½©å›ç­”ã€‚ä»–å›ç­”äº5æœˆ22æ—¥ï¼Œæˆªè‡³ç›®å‰ï¼ˆ25æ—¥ï¼‰æ”¶è·äº†5.9kä¸ªèµåŒã€‚è®©æˆ‘ä»¬æ¥æ¬£èµJanuså¯¹äºè¯¥é—®é¢˜çš„ç²¾å½©å›ç­”å§ã€‚</p><p>é“¾æ¥ï¼š<a href="https://www.quora.com/US-blacklisted-Huawei-in-what-is-evidently-ZTE-style-surgical-strike-It-appears-Huawei-is-pretty-much-dead-What-can-Huawei-or-China-do-to-overcome-this-or-to-retaliate-What-will-China-do">US blacklisted Huawei in what is evidently ZTE style surgical strike. It appears Huawei is pretty much dead. What can Huawei or China do to overcome this or to retaliate? What will China do?</a></p><p>Janus Dongye Qimengï¼š</p><p>ä¸è°ˆè§‚ç‚¹ï¼Œåªè¯´äº‹å®ã€‚</p><p>ä¸‹é¢æ˜¯åä¸º2019å¹´æœ€ç•…é”€çš„P30æ‰‹æœºçš„ä¾›åº”é“¾ï¼š</p><p><img src="/2019/05/25/%E5%8D%8E%E4%B8%BA%E7%9A%84%E5%91%BD%E8%BF%90%E4%B8%8E%E4%B8%AD%E5%9B%BD%E7%9A%84%E5%8F%8D%E5%BA%94/èŠ¯ç‰‡.png" alt></p><p>åä¸ºP30æ‰‹æœºçš„â€œå¤§è„‘â€æ˜¯ç”±æµ·æ€å…¬å¸è®¾è®¡çš„éº’éºŸ980ç³»ç»ŸèŠ¯ç‰‡ï¼ˆSystem-on-Chipï¼ŒSOCï¼‰ã€‚è€Œæµ·æ€æ˜¯åä¸ºæ——ä¸‹çš„å­å…¬å¸ã€‚ä¸ºä»€ä¹ˆç§°å®ƒä¸ºç³»ç»ŸèŠ¯ç‰‡ï¼Ÿå› ä¸ºè¯¥èŠ¯ç‰‡é›†æˆäº†è®¸å¤šç”±ä¸–ç•Œå…¶ä»–åœ°æ–¹è®¾è®¡çš„ç»„ä»¶ã€‚</p><p>è¯¥ç³»ç»ŸèŠ¯ç‰‡èƒŒåæ˜¯ä»€ä¹ˆï¼Ÿ</p><p><strong>æŒ‡ä»¤é›†æ¶æ„</strong>ï¼ˆInstruction set architectureï¼‰ï¼šæµ·æ€è´­ä¹°äº†<strong>è‹±å›½</strong>å‰‘æ¡¥ARMçš„CPUå’ŒGPUæ¶æ„è®¸å¯è¯ã€‚é€šè¿‡è®¸å¯ï¼Œæµ·æ€å¯ä»¥ä½¿ç”¨ARMæŒ‡ä»¤é›†ï¼ˆarmv8ï¼‰å¹¶å¼€å‘è‡ªå·±çš„64ä½CPUæ¶æ„ã€‚AMBAç­‰æ€»çº¿æ ‡å‡†ä¹Ÿæ˜¯ARMæˆæƒçš„ã€‚</p><p><strong>CPUï¼ŒGPU</strong>ï¼šæµ·æ€åœ¨ä¸­å›½æ·±åœ³æ‹¥æœ‰æ•°ç™¾åå‘˜å·¥ï¼Œè´Ÿè´£è®¾è®¡CPUå†…æ ¸ã€åŠ é€Ÿå™¨å’ŒIPç»„ä»¶ã€‚ä¸ºäº†è®¾è®¡è‡ªå·±çš„CPUï¼Œä»–ä»¬éœ€è¦ä½¿ç”¨Synopsisï¼ŒCadenceå’ŒXilinxçš„ç”µå­è®¾è®¡è‡ªåŠ¨åŒ–ï¼ˆEDAï¼‰å·¥å…·ã€‚è¿™äº›EDAå…¬å¸éƒ½æ˜¯<strong>ç¾å›½</strong>åŠ åˆ©ç¦å°¼äºšå·çš„å…¬å¸ã€‚æµ·æ€éœ€è¦æ”¯ä»˜è®¸å¯è´¹æ‰èƒ½ä½¿ç”¨ä»–ä»¬çš„å·¥å…·æ¥è®¾è®¡å’Œæ¨¡æ‹Ÿè‡ªå·±çš„CPUã€‚</p><blockquote><p>è¯‘è€…æ³¨ï¼šç”µå­è®¾è®¡è‡ªåŠ¨åŒ–ï¼ˆè‹±è¯­ï¼šElectronic design automationï¼Œç¼©å†™ï¼šEDAï¼‰æ˜¯æŒ‡åˆ©ç”¨è®¡ç®—æœºè¾…åŠ©è®¾è®¡ï¼ˆCADï¼‰è½¯ä»¶ï¼Œæ¥å®Œæˆè¶…å¤§è§„æ¨¡é›†æˆç”µè·¯ï¼ˆVLSIï¼‰èŠ¯ç‰‡çš„åŠŸèƒ½è®¾è®¡ã€ç»¼åˆã€éªŒè¯ã€ç‰©ç†è®¾è®¡ï¼ˆåŒ…æ‹¬å¸ƒå±€ã€å¸ƒçº¿ã€ç‰ˆå›¾ã€è®¾è®¡è§„åˆ™æ£€æŸ¥ç­‰ï¼‰ç­‰æµç¨‹çš„è®¾è®¡æ–¹å¼ã€‚</p></blockquote><p>åŒæ—¶ï¼Œæµ·æ€è¿˜å¯ä»¥é›†æˆARMè®¾è®¡çš„ç°æœ‰è½¯æ ¸ï¼Œå¦‚å¼ºå¤§çš„æ ¸å¿ƒCortex A76å’Œé«˜æ•ˆçš„æ ¸å¿ƒCortex A55ã€‚ ä¸¤è€…éƒ½åœ¨åŒä¸€èŠ¯ç‰‡ä¸­ã€‚å¤§æ ¸å¿ƒåœ¨<strong>ç¾å›½</strong>å¾·å…‹è¨æ–¯å·å¥¥æ–¯æ±€å¸‚è®¾è®¡ï¼Œå°æ ¸å¿ƒåœ¨<strong>è‹±å›½</strong>å‰‘æ¡¥è®¾è®¡ã€‚ä¸€äº›ä½ç«¯CPUæ ¸å¿ƒä¹Ÿä»ä¸­å›½å°æ¹¾è”å‘ç§‘è´­ä¹°ã€‚åŒæ—¶ï¼Œæµ·æ€è¿˜å¯ä»¥ä»ARMè´­ä¹°å…¶ä»–çŸ¥è¯†äº§æƒï¼ŒåŒ…æ‹¬Mali T830 GPUå’Œäº’è¿å­ç³»ç»Ÿã€‚Mali GPUè®¾è®¡åœ¨<strong>è‹±å›½</strong>å‰‘æ¡¥çš„ARMæ€»éƒ¨ã€‚</p><p><strong>å†…å­˜</strong>ï¼šæµ·æ€åœ¨å­˜å‚¨å™¨æ§åˆ¶å™¨å’ŒSRAMç³»ç»Ÿä¸­è®¾è®¡äº†è‡ªå·±çš„é€»è¾‘ç”µè·¯ã€‚SRAMå’ŒDRAMå•å…ƒç”±<strong>éŸ©å›½</strong>ä¸‰æ˜Ÿæˆæƒã€‚æœªæ¥çš„7nm 3Då †å RAMä¹Ÿå°†ç”±ä¸‰æ˜Ÿè®¾è®¡ï¼Œä½†åœ¨ä¸­å›½å¤§è¿åˆ¶é€ ã€‚</p><p><strong>DSPå’Œç›¸æœº</strong>ï¼šæµ·æ€è´­ä¹°äº†å¾·å›½å¾•å¡ç›¸æœºçš„ç›¸æœºé•œå¤´è®¾è®¡çŸ¥è¯†äº§æƒå’Œæ§åˆ¶ç³»ç»Ÿï¼Œå…¶ä¸­å¤§éƒ¨åˆ†ç³»ç»Ÿéƒ½æ˜¯åœ¨<strong>å¾·å›½</strong>éŸ¦èŒ¨æ‹‰å°”è®¾è®¡çš„ã€‚å®é™…é•œå¤´ç”±ä¸­å›½å°æ¹¾çš„å¤§ç«‹å…‰ç”µï¼ˆLargan Precisionï¼‰å’Œä¸­å›½å¤§é™†çš„èˆœå®‡å…‰å­¦ç§‘æŠ€ï¼ˆSunny Optical Technologyï¼‰åˆ¶é€ ã€‚ç”¨äºé©±åŠ¨ç›¸æœºæ”¹å˜ç„¦ç‚¹çš„ç”µåŠ¨é©¬è¾¾ç”±ä¸‰ç¾ç”µæœºï¼ˆMitsumiï¼‰åœ¨æ—¥æœ¬Tsurumakiåˆ¶é€ ã€‚ä¸ºäº†å°†å…‰è½¬æ¢ä¸ºä¿¡å·ï¼Œå…‰æ•èƒ¶ç‰‡ç”±ä¸­å›½æ·±åœ³çš„æ¬§è²å…‰ï¼ˆO-filmï¼‰è®¾è®¡ï¼ˆä¹Ÿæ˜¯iPhone Xçš„ä¾›åº”å•†ï¼‰ã€‚æµ·æ€ä»<strong>ç¾å›½</strong>äºšåˆ©æ¡‘é‚£å·å‡¤å‡°åŸçš„å®‰æ£®ç¾ï¼ˆON Semiconductorsï¼‰è´­ä¹°äº†ç”¨äºè‡ªåŠ¨èšç„¦å’Œå›¾åƒç¨³å®šçš„ç¡¬ä»¶è§£å†³æ–¹æ¡ˆã€‚é«˜æ¸…è§†é¢‘å¤„ç†èŠ¯ç‰‡ç”±<strong>æ—¥æœ¬</strong>ç´¢å°¼æˆæƒã€‚æµ·æ€è®¾è®¡äº†è‡ªå·±çš„å›¾åƒå¤„ç†ç¡¬ä»¶åŠ é€Ÿå™¨ï¼ˆISPï¼‰ï¼Œä»<strong>ç¾å›½</strong>åŠ åˆ©ç¦å°¼äºšå·çš„CEVAè´­ä¹°äº†è®¸å¤šDSPä¸“åˆ©ï¼Œå¹¶ä»ä¸­å›½åŒ—äº¬è´­ä¹°äº†æ¥è‡ªå¯’æ­¦çºªç§‘æŠ€ï¼ˆCambricon Technologiesï¼‰çš„AIèŠ¯ç‰‡ã€‚</p><p><strong>é€šä¿¡æ¨¡å—</strong>ï¼ˆBasebandï¼‰ï¼šæµ·æ€è´­ä¹°äº†è®¸å¯è¯ï¼Œä½¿ç”¨æ¥è‡ª<strong>ç¾å›½</strong>åŠ åˆ©ç¦å°¼äºšå·åœ£ä½•å¡çš„åšé€šï¼ˆBroadcomï¼‰çš„WIFIã€GPSå’Œè“ç‰™ã€‚å¯¹äº3Gæ”¯æŒï¼Œæµ·æ€å¿…é¡»å‘<strong>ç¾å›½</strong>åŠ åˆ©ç¦å°¼äºšå·åœ£åœ°äºšå“¥é«˜é€šå…¬å¸æŒæœ‰çš„ä¸“åˆ©æ”¯ä»˜è®¸å¯ä½¿ç”¨è´¹ã€‚å¯¹äºåæ¥çš„4G LTEå’Œ5Gï¼Œæµ·æ€æ‹¥æœ‰è‡ªå·±çš„ä¸“åˆ©å’Œé€šä¿¡æ¨¡å—å¤„ç†å™¨ï¼Œç§°ä¸ºBalongï¼Œç”±ä¸­å›½æ•°ç™¾äººè®¾è®¡ã€‚æµ·æ€è¿˜ä»ä¸­å›½ç§‘å­¦é™¢è´­ä¹°äº†åŒ—æ–—å¯¼èˆªç³»ç»Ÿã€‚è¯·æ³¨æ„ï¼Œä¸€äº›èŠ¯ç‰‡éªŒè¯ä»»åŠ¡ç”±<strong>å°åº¦</strong>æµ·å¾—æ‹‰å·´çš„å·¥ç¨‹å¸ˆæ‰§è¡Œã€‚</p><p><strong>å°„é¢‘æ¨¡å—</strong>ï¼ˆRadio frequencyï¼Œç¼©å†™ä¸ºRFï¼‰ï¼šè¦åœ¨å„ç§é€šä¿¡ä¿¡å·ä¹‹é—´è¿›è¡Œå¤šè·¯å¤ç”¨å¹¶å°†æ¨¡æ‹Ÿä¿¡å·æ”¾å¤§åˆ°ä¸åŒçš„æ— çº¿é¢‘ç‡ï¼Œå®ƒä»¬éœ€è¦å°„é¢‘é›†æˆç”µè·¯ï¼ˆRFICï¼‰ã€‚RFICçš„å¤§å¤šæ•°ä¸“åˆ©éƒ½æ˜¯ç”±<strong>ç¾å›½</strong>åŒ—å¡ç½—æ¥çº³å·çš„RF Micro Deviceså…¬å¸æŒæœ‰ï¼Œç°åœ¨åœ¨ä¸TriQuintåˆå¹¶åæˆä¸ºQorvoã€‚RFICèŠ¯ç‰‡éœ€è¦ä¸€äº›åŠŸç‡æ”¾å¤§å™¨ï¼Œè¿™ç”±<strong>æ—¥æœ¬</strong>äº¬éƒ½çš„Murata Manufacturingåˆ¶é€ çš„é«˜ç«¯ç”µå®¹å™¨æä¾›ã€‚ è¿˜éœ€è¦TSTå°æ¹¾å’ŒMicrogateåœ¨æ·±åœ³è®¾è®¡å’Œåˆ¶é€ çš„è¡¨é¢å£°æ³¢ï¼ˆSAWï¼‰ä¼ æ„Ÿå™¨ã€‚è¿˜éœ€è¦ä¸€äº›ç”±<strong>ç¾å›½</strong>Skyworks Solutionsè®¾è®¡å¹¶ç”±Skyworksåœ¨ä¸­å›½åˆ¶é€ çš„ç»ç¼˜ç¡…ç»ç¼˜ä½“å¼€å…³ã€‚å¯¹äºå¤©çº¿ç»„ä»¶ï¼Œå®ƒä»¬ç”±æ·±åœ³çš„Sunwayå…¬å¸å’Œä½äºä¸­å›½ä¸Šæµ·çš„Rosenbergerï¼ˆ<strong>ç¾å›½</strong>ï¼‰å·¥å‚è®¾è®¡å’Œåˆ¶é€ ã€‚åœ¨5Gæ—¶ä»£ï¼Œåä¸ºæ¨¡æ‹Ÿè®¾å¤‡ä¹Ÿå¿…é¡»ä½¿ç”¨æ¥è‡ª<strong>ç¾å›½</strong>ï¼Œ<strong>æ—¥æœ¬</strong>å’Œä¸­å›½çš„è¿™äº›è®¾å¤‡ã€‚</p><p><strong>NFCå’Œè§¦æ§è®¾å¤‡</strong>ï¼š<strong>è·å…°</strong>çš„æ©æ™ºæµ¦åŠå¯¼ä½“ä¸ºåä¸ºæä¾›NFCè§£å†³æ–¹æ¡ˆã€‚è¯¥èŠ¯ç‰‡ç”±è‹±é£å‡Œåœ¨<strong>å¾·å›½</strong>è¥¿é—¨å­å¼€å‘ã€‚æ·±åœ³Goodix Coæä¾›æŒ‡çº¹ä¼ æ„Ÿå™¨ã€‚USB Type-Cè§£å†³æ–¹æ¡ˆç”±æ·±åœ³Everwin Precisionæä¾›ã€‚</p><p><strong>èŠ¯ç‰‡è£…é…</strong>ï¼šåœ¨æµ·æ€å°†æ‰€æœ‰çŸ¥è¯†äº§æƒå’Œé›¶ä»¶é›†æˆåˆ°ä¸€ä¸ªç³»ç»ŸèŠ¯ç‰‡SOCä¹‹åï¼Œè¯¥è®¾è®¡è¢«é€åˆ°å°æ¹¾åŠå¯¼ä½“åˆ¶é€ å…¬å¸ï¼ˆTSMCï¼‰è¿›è¡Œç‰©ç†å¸ƒå±€å’Œåˆ¶é€ ã€‚SOCèŠ¯ç‰‡çš„åˆ¶é€ è¿‡ç¨‹æ˜¯ä¸€é¡¹éå¸¸å¤æ‚çš„ä»»åŠ¡ã€‚å¯¹äºæœ€é‡è¦çš„æ­¥éª¤ï¼ŒTSMCéœ€è¦å¯¼å…¥ç”±<strong>è·å…°</strong>ASMLè®¾è®¡çš„æ©æ¨¡å¯¹é½ç³»ç»Ÿï¼ˆMASï¼‰ã€‚ä»–ä»¬è¿˜éœ€è¦ä½¿ç”¨æ¥è‡ª<strong>æ—¥æœ¬</strong>çš„Shin-Etsuï¼Œæ¥è‡ª<strong>å¾·å›½</strong>çš„Siltronic AGå’Œæ¥è‡ª<strong>æ—¥æœ¬</strong>Minatoçš„SUMCO Corporationçš„å¤§é‡æ™¶åœ†åŒ–å­¦å“ã€‚</p><p><strong>æºææ–™</strong>ï¼šä½†æ˜¯ï¼Œå¤§å¤šæ•°åŒ–å­¦äº§å“å’ŒåŠæˆå“éƒ½æ˜¯ä»ä¸­å›½è¿›å£çš„ã€‚æœ€å…·ä»£è¡¨æ€§çš„æ˜¯ä¸­å›½çš„ç¨€åœŸé‡‘å±ã€‚å¯¹äºåŒ…æ‹¬ç»ç’ƒå’Œé’¢æåœ¨å†…çš„å…¶ä»–ææ–™ï¼Œæ¯”äºšè¿ªåœ¨æ·±åœ³è´Ÿè´£åˆ¶é€ æ‰‹æœºæ¢¯åº¦æ¡†æ¶å’Œé«˜å¯†åº¦çœ¼é•œã€‚ç››æ„ç”µå­ä¸ºæ‰‹æœºç”Ÿäº§æ‰€æœ‰PCBæ¿ã€‚</p><p><strong>å±å¹•</strong>ï¼šåä¸ºP30é‡‡ç”¨ä¸‰æ˜ŸOLEDç¡¬å±ï¼Œä½†P30 Proé‡‡ç”¨äº¬ä¸œæ–¹ç§‘æŠ€åœ¨ä¸­å›½è®¾è®¡çš„OLEDè½¯å±ã€‚æœ‰äº›å±å¹•ä¹Ÿç”±<strong>éŸ©å›½</strong>LGåœ¨ä¸­å›½å¹¿å·åˆ¶é€ ã€‚ç°åœ¨ï¼ŒéŸ©å›½å’Œä¸­å›½å…¬å¸éƒ½åœ¨å±å¹•å¸‚åœºå æ®ä¸»å¯¼åœ°ä½ã€‚</p><p><strong>ç»„è£…</strong>ï¼šåä¸ºéšåä»æ¯ä¸ªæœåŠ¡æä¾›å•†å¤„è®¢è´­æ‰€æœ‰ç»„ä»¶ï¼Œå¹¶å°†ç»„ä»¶è¿é€åˆ°ä¸­å›½éƒ‘å·çš„å¯Œå£«åº·å…¬å¸ã€‚å¯Œå£«åº·çš„å·¥äººå°†æ‰€æœ‰ç»„ä»¶ç»„è£…æˆä¸€ä¸ªå®Œæ•´çš„æ‰‹æœºã€‚</p><p><img src="/2019/05/25/%E5%8D%8E%E4%B8%BA%E7%9A%84%E5%91%BD%E8%BF%90%E4%B8%8E%E4%B8%AD%E5%9B%BD%E7%9A%84%E5%8F%8D%E5%BA%94/p30.jpg" alt></p><p>è¿™æ˜¯åä¸ºå•ä¸ªæ‰‹æœºçš„ä¾›åº”é“¾ã€‚åä¸ºçš„ä¸»è¦äº§å“ä¸åªæ˜¯æ‰‹æœºï¼Œä½†ä»–ä»¬çš„æ‰‹æœºä»ç„¶æˆåŠŸå‡»è´¥è‹¹æœï¼Œæˆä¸ºæœªè¿›å…¥ç¾å›½å¸‚åœºçš„ç¬¬äºŒå¤§æ™ºèƒ½æ‰‹æœºå…¬å¸ã€‚åä¸ºçš„ä¸»è¦ä¼˜åŠ¿åœ¨äºå…¶é€šä¿¡åŸºç¡€è®¾æ–½å’Œè§£å†³æ–¹æ¡ˆã€‚å› ä¸ºè¿™æ–¹é¢æˆ‘å¹¶ä¸ç†Ÿæ‚‰ï¼Œæ‰€ä»¥æˆ‘å¹¶ä¸æ‰“ç®—å†™ã€‚</p><p>ç°åœ¨è¯·è®¡ç®—è¿™äº›ä¾›åº”å•†æ¥è‡ªç¾å›½ï¼Œä¸­å›½ï¼Œæ—¥æœ¬å’ŒéŸ©å›½çš„æ•°é‡ã€‚å¯¹äºä¸Šé¢åˆ—å‡ºçš„æ¯å®¶å…¬å¸ï¼Œè¯·è®¿é—®ä»–ä»¬è‡ªå·±çš„ç½‘ç«™ï¼ŒæŸ¥çœ‹ä»–ä»¬çš„äº§å“å®é™…é”€å”®åˆ°åä¸ºæˆ–ä¸­å›½å¸‚åœºçš„ä»½é¢ï¼Œä»¥åŠä»–ä»¬çš„ææ–™ä»ä¸­å›½è¿›å£çš„æ•°é‡ã€‚ä½ ä¼šæƒŠè®¶åœ°å‘ç°ï¼Œåä¸ºé€šå¸¸æ˜¯ä»–ä»¬æœ€å¤§çš„å®¢æˆ·ï¼Œä»–ä»¬å†ä¹Ÿä¸èƒ½ç¦»å¼€ä¸­å›½äº†ã€‚</p><p>è¿™æ„å‘³ç€å¦‚æœä½ æ€æ­»äº†åä¸ºï¼Œé‚£ä¹ˆå¤§å¤šæ•°ä¾›åº”å•†ä¹Ÿä¼šå—åˆ°å¾ˆå¤§çš„ä¼¤å®³ã€‚æœ‰äº›å…¬å¸ä¼šé™ªè‘¬ã€‚ä»–ä»¬ä¸­çš„å¤§å¤šæ•°æ˜¯éŸ©å›½å’Œæ—¥æœ¬å”¯ä¸€çš„é«˜ä»·å€¼å…¬å¸ã€‚ä»–ä»¬ä¼šé­å—40ï¼…åŠä»¥ä¸Šçš„å¸‚åœºæŸå¤±ã€‚è¿™å°†å¯¹éŸ©å›½å’Œæ—¥æœ¬ç»æµé€ æˆå·¨å¤§æ‰“å‡»ã€‚</p><p>å¾ˆæ˜¾ç„¶ï¼Œç‰¹æœ—æ™®èƒŒåçš„æ™ºå›Šå¹¶ä¸äº†è§£åŠå¯¼ä½“è¡Œä¸šçš„ç°çŠ¶ã€‚æˆ‘æƒ³Quoraçš„å¤§å¤šæ•°äººéƒ½ä¸çŸ¥é“ã€‚</p><p><img src="/2019/05/25/%E5%8D%8E%E4%B8%BA%E7%9A%84%E5%91%BD%E8%BF%90%E4%B8%8E%E4%B8%AD%E5%9B%BD%E7%9A%84%E5%8F%8D%E5%BA%94/trump.jpg" alt></p><p>åä¸ºå·²æ­»ï¼Ÿ</p><p>å½“ç„¶æ²¡æœ‰ã€‚åå¹´å‰ï¼Œåä¸ºå·²ç»å¯åŠ¨äº†ç¾å›½æ”¿åºœçš„å„ç§æƒ…æ™¯å¤‡èƒè®¡åˆ’ã€‚ä»–ä»¬ç”šè‡³æœ‰é’ˆå¯¹å½“æ•´ä¸ªä¸­å›½è¢«é˜»æ­¢ä½¿ç”¨x86æŒ‡ä»¤é›†åœºæ™¯çš„æç«¯å¤‡ä»½è®¡åˆ’ã€‚</p><h3 id="ä¸­å›½ä¼šé‡‡å–ä»€ä¹ˆæ‰‹æ®µï¼Ÿ"><a href="#ä¸­å›½ä¼šé‡‡å–ä»€ä¹ˆæ‰‹æ®µï¼Ÿ" class="headerlink" title="ä¸­å›½ä¼šé‡‡å–ä»€ä¹ˆæ‰‹æ®µï¼Ÿ"></a>ä¸­å›½ä¼šé‡‡å–ä»€ä¹ˆæ‰‹æ®µï¼Ÿ</h3><p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸­å›½é‡‡å–çš„æœ€æ–°çš„åº”å¯¹æªæ–½ï¼š</p><p><a href="https://www.scmp.com/tech/enterprises/article/2139699/china-cuts-taxes-chip-makers-promote-industry-development">ç”±äºè´¸æ˜“ç´§å¼ å±€åŠ¿åŠ å‰§ï¼Œä¸­å›½å‰Šå‡äº†èŠ¯ç‰‡åˆ¶é€ å•†çš„ç¨æ”¶</a></p><p>ä¸­å›½å®£å¸ƒæ‰€æœ‰å›½å†…åŠå¯¼ä½“ä¾›åº”å•†å…¬å¸å°†è·å¾—äº”å¹´å…ç¨ã€‚ä»–ä»¬äº”å¹´ä¸éœ€è¦çº³ç¨ï¼è¿™æ„å‘³ç€ä»–ä»¬å¯ä»¥é™ä½è¿è¥æˆæœ¬å¹¶å‡»è´¥å…¶å¤–å›½ç«äº‰å¯¹æ‰‹ã€‚è¿™æ˜¯ç¾å›½ä¸€ç›´åœ¨æŠ±æ€¨ä¸­å›½çš„åœ°æ–¹ã€‚ç°åœ¨ä¸­å›½ä¸€ç›´åœ¨åšï¼Œä¸ç®¡ç¾å›½æœ‰ä»€ä¹ˆè¯è¦è¯´ã€‚</p><p>å¦‚æœåä¸ºæ‰¾ä¸åˆ°ç¾å›½çš„ä¾›åº”å•†ï¼Œé‚£ä¹ˆä»–ä»¬ä¼šæ‰¾åˆ°æ›¿ä»£å“ï¼Œä¸»è¦æ˜¯ä¸­å›½çš„å›½å†…ä¾›åº”å•†ã€‚è¿™äº›ä¾›åº”å•†åœ¨ä¸­å›½å…ç¨ã€‚è¿™å°†ä¸ºå›½å†…å…¬å¸å¸¦æ¥å·¨å¤§çš„æ¨åŠ¨åŠ›ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥åŒæ—¶é™ä½æˆæœ¬å’Œè·å¾—å®¢æˆ·ã€‚</p><p>æˆ‘ä¸€ç›´åœ¨ä¸ä¸­å›½åŠå¯¼ä½“è¡Œä¸šä¸åŒé¢†åŸŸçš„è®¸å¤šä¸­å›½å­¦è€…äº¤è°ˆã€‚ä»–ä»¬è¯´ï¼Œåä¸ºä¹‹æ‰€ä»¥ä»è¿™ä¹ˆå¤šæ¥æºè´­ä¹°çŸ¥è¯†äº§æƒï¼Œå¹¶ä¸æ˜¯è¯´åä¸ºæ²¡æœ‰è¿™é¡¹æŠ€æœ¯ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå¯¹äºä»–ä»¬æœ€é‡è¦çš„é¢†åŸŸï¼Œä»–ä»¬å¹¶ä¸æ‰“ç®—<strong>é‡æ–°å‘æ˜è½®å­</strong>ï¼ˆreinvent the wheelsï¼‰ï¼Œä»–ä»¬å¸Œæœ›ä¸ä¸–ç•Œå…±äº«åˆ©ç›Šã€‚</p><p>ç¡®å®æœ‰ä¸€äº›ä¸­å›½ä»ç„¶è½åçš„å…³é”®æŠ€æœ¯ï¼Œå¦‚åˆ¶é€ å·¥è‰ºå’Œå°„é¢‘èŠ¯ç‰‡ã€‚ä½†æˆ‘ä»¬åº”è¯¥æ˜ç™½ã€‚ä¸­å›½èƒ½è¾¾åˆ°ç›®å‰ä¸ºæ­¢çš„æŠ€æœ¯æ°´å¹³ï¼Œæ­£æ˜¯ç”±äºå·´é»å¤šè¾¹å‡ºå£ç®¡åˆ¶åè°ƒå§”å‘˜ä¼šçš„æŠ€æœ¯å°é”å’Œåˆ¶è£ï¼Œä¸­å›½è¢«ç¦æ­¢ä½¿ç”¨æ‰€æœ‰é«˜ç«¯æŠ€æœ¯ã€‚å¤šäºäº†ä»–ä»¬ï¼Œä¸­å›½æœ‰æœºä¼šè‡ªå·±â€œé‡æ–°å‘æ˜è½®å­â€ã€‚</p><p>åŒæ—¶ï¼Œç”±äºé‡‡ç”¨äº†åä¸ºæŠ€æœ¯ï¼ŒåŒ—äº¬çš„åœ°é“å·²ç»å®‰è£…å¹¶è¦†ç›–äº†5Gä¿¡å·ã€‚</p><p><img src="/2019/05/25/%E5%8D%8E%E4%B8%BA%E7%9A%84%E5%91%BD%E8%BF%90%E4%B8%8E%E4%B8%AD%E5%9B%BD%E7%9A%84%E5%8F%8D%E5%BA%94/5g.jpg" alt></p><p>ä½†ç°åœ¨ï¼Œæˆ‘ååœ¨ä¼¦æ•¦çš„åœ°é“ä¸Šã€‚æˆ‘çš„æ‰‹æœºæ²¡æœ‰ä»»ä½•ä¿¡å·ã€‚å› æ­¤ï¼Œæˆ‘å¿…é¡»ç¦»çº¿é˜…è¯»å…³äºä¸€ç¯‡ç²¾å½©çš„è‹±å›½è„±æ¬§æ–‡ç« çš„å¸–å­ã€‚æˆ‘å‘¨å›´çš„äººéƒ½åœ¨çœ‹åä¸ºæ‰‹æœºä¸Šçš„ç¦»çº¿å°è¯´ã€‚</p><p>æœ‰å…³è½¯ä»¶æ–¹é¢â€œä¾›åº”é“¾â€çš„åˆ†æï¼Œè¯·å‚è€ƒæˆ‘çš„ç­”æ¡ˆï¼š</p><p><a href="https://www.quora.com/How-badly-will-Huaweis-smartphone-business-be-affected-by-Googles-response-to-US-placing-Huawei-on-Entity-list-Huawei-loses-access-to-Google-proprietary-apps-and-services-but-is-still-be-able-to-run-the-Android-Open/answer/Janus-Dongye-Qimeng">Janus Dongye Qimengâ€™s answer to How badly will Huaweiâ€™s smartphone business be affected by Googleâ€™s response to US placing Huawei on â€œEntityâ€ list? (Huawei loses access to Google proprietary apps and services but is still be able to run the Android Open Source license (AOSP).</a></p><p>æˆ‘å¸Œæœ›ä½ èƒ½é€šè¿‡æœ¬æ–‡äº†è§£æ›´å¤šå…³äºç°çŠ¶çš„ä¿¡æ¯ã€‚</p><blockquote><p>Talk is cheap. Show me the code.<br>â€” Linus Torvalds<br>ç©ºè°ˆè¯¯å›½ï¼Œå®å¹²å…´é‚¦ã€‚</p></blockquote><p>æœ¬æ–‡ç”±<strong>Superlova</strong>ç¿»è¯‘è‡ªQuoraå¹³å°Janus Dongye Qimengå¯¹<a href="https://www.quora.com/US-blacklisted-Huawei-in-what-is-evidently-ZTE-style-surgical-strike-It-appears-Huawei-is-pretty-much-dead-What-can-Huawei-or-China-do-to-overcome-this-or-to-retaliate-What-will-China-do">US blacklisted Huawei in what is evidently ZTE style surgical strike. It appears Huawei is pretty much dead. What can Huawei or China do to overcome this or to retaliate? What will China do?</a>çš„å›ç­”ï¼Œç¿»è¯‘å¹¶ä¼ æ’­çš„åˆå¿ƒæ˜¯ç”¨ä½œè‹±è¯­ç¿»è¯‘ä¹ ä½œå’Œæ€æƒ³äº¤æµã€‚éƒ‘é‡å£°æ˜ï¼šæœ¬æ–‡çš„è§‚ç‚¹å¹¶ä¸ä»£è¡¨è¯‘è€…çš„è§‚ç‚¹ã€‚è½¬è½½æœ¬è¯‘æ–‡è¯·æ³¨æ˜æœ¬è¯‘æ–‡å‡ºå¤„ï¼</p>]]></content>
    
    
    <categories>
      
      <category>translation</category>
      
      <category>è½¬è½½</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç‰›å¥¶å¯ä¹ç»æµå­¦è¯»ä¹¦ç¬”è®°ï¼ˆä¸å®šæœŸæ›´æ–°ï¼‰</title>
    <link href="/2019/05/18/%E7%89%9B%E5%A5%B6%E5%8F%AF%E4%B9%90%E7%BB%8F%E6%B5%8E%E5%AD%A6%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%8D%E5%AE%9A%E6%9C%9F%E6%9B%B4%E6%96%B0%EF%BC%89/"/>
    <url>/2019/05/18/%E7%89%9B%E5%A5%B6%E5%8F%AF%E4%B9%90%E7%BB%8F%E6%B5%8E%E5%AD%A6%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%8D%E5%AE%9A%E6%9C%9F%E6%9B%B4%E6%96%B0%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>2019å¹´5æœˆ16æ—¥</p><p>æˆ‘å¯¹ç»æµå­¦æ¯”è¾ƒæ„Ÿå…´è¶£ï¼Œæ¯•ç«Ÿæˆ‘æœ¬èº«å°±æ˜¯ä¸ªç©·äººï¼Œæˆ‘ä¹Ÿå¸Œæœ›èƒ½å¤Ÿé«˜æ•ˆåˆ©ç”¨æˆ‘èº«ä¸Šæœ‰é™çš„èµ„æºã€‚å­¦ä¹ ç»æµå­¦èƒ½å¤Ÿå¯¹æˆ‘çš„æ€ç»´æ–¹å¼æœ‰å¾ˆå¤§æ”¹å–„ã€‚</p><p>æˆ‘è®¤ä¸ºé˜…è¯»ä¸€æœ¬èƒ½å¤Ÿç»™è‡ªå·±å¸¦æ¥å¾ˆå¤šçŸ¥è¯†çš„ä¹¦æ—¶ï¼Œåº”å½“ä¸€æ­¥ä¸€æ­¥ä¸è¦è´ªå¤šã€‚æ¯æ¬¡é˜…è¯»éƒ½æ˜¯ç¾å¦™çš„ç»å†ï¼Œå°±å¥½åƒåœ¨å’Œè¯»è€…å¯¹è¯ä¸€æ ·ã€‚</p><p>è¿™æœ¬ã€Šç‰›å¥¶å¯ä¹ç»æµå­¦ã€‹ä¸€å¼€å§‹è®©æˆ‘æ„Ÿåˆ°æœ‰ç‚¹å•°å—¦ï¼Œä½œè€…ä¸€ç›´åœ¨è®²ä»–çš„æˆè¯¾ç»å†ï¼Œä»¥åŠå­¦ç”Ÿçš„åæ˜ ã€‚ä¼¼ä¹æ¬§ç¾çš„ä¹¦ç±éƒ½ä¼šæœ‰è¿™æ ·çš„é€šç—…ã€‚æˆ‘è¯¯ä»¥ä¸ºè¿™åˆæ˜¯ä¸€æœ¬å……æ»¡åºŸè¯å’Œé¸¡æ±¤çš„ç§‘æ™®ä¹¦ç±ï¼Œä¾¿ä¸€é¡µä¸€é¡µç¿»è¿‡å»ï¼Œç¿»åˆ°åæ¥å´æ„Ÿè§‰ä»€ä¹ˆä¹Ÿæ²¡çœ‹è¿›å»ã€‚äºæ˜¯æˆ‘ä»å¤´æ²‰ä¸‹å¿ƒæ¥ï¼Œä¸€ç‚¹ä¸€ç‚¹é˜…è¯»ã€‚</p><p>ç»ˆäºåœ¨ç¡å‰é˜…è¯»å®Œæ¯•äº†ç¬¬ä¸€ç« ã€‚æˆ‘å¼ºå¿ç€æƒ³è¦é˜…è¯»ç¬¬äºŒç« çš„å¥½å¥‡å¿ƒï¼Œé—­ä¸Šçœ¼ç›æ€»ç»“å­¦åˆ°çš„ä¸œè¥¿ã€‚æˆ‘ä¸€ç›´æœ‰è¿™æ ·çš„è¯»ä¹¦ä¹ æƒ¯ã€‚</p><p>å¯¹æˆ‘æ¥è¯´ï¼Œç¬¬ä¸€ç« æ•™ç»™æˆ‘çš„å¹¶ä¸æ˜¯â€œæ²‰æ²¡æˆæœ¬â€ï¼Œè€Œæ˜¯ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p><ol><li><p>å­¦ä¹ ä¸€é—¨çŸ¥è¯†ï¼Œå¦‚æœèƒ½æŠŠçŸ¥è¯†ç‚¹ç©¿æˆä¸²ï¼Œæœ€å¥½å½¢æˆç»˜å£°ç»˜è‰²çš„æ•…äº‹ï¼Œè¾…ä»¥ç”ŸåŠ¨çš„å›¾ç”»ï¼Œé‚£ä¹ˆè¿™æ ·çš„çŸ¥è¯†ç®—æ˜¯â€œæ˜“æ¶ˆåŒ–å¸æ”¶â€çš„çŸ¥è¯†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒçŸ¥è¯†å™è¿°åŒ–ã€å›¾åƒåŒ–ï¼Œæ›´åˆ©äºçŸ¥è¯†çš„å¸æ”¶ï¼ˆå’Œåˆ†äº«ï¼‰ã€‚ç”±æ­¤å¯è§ï¼Œåˆå­¦è€…å°±ä¸è¦è´¹åŠ›å»æ‰¾ä»€ä¹ˆæœºå™¨å­¦ä¹ ç²¾åç¬”è®°ã€æ€ç»´å¯¼å›¾äº†åŒç†ï¼Œå¤§ç‰›ä»¬ä¹Ÿåˆ«æŒ‡æœ›å°†è‡ªå·±çš„æ‰€è°“æç®€ç¬”è®°é€ ç¦æ–°æ‰‹äº†ï¼Œä½ çš„ç¬”è®°è¶Šç®€çŸ­ï¼Œè¶Šéš¾è¢«åˆ«äººç†è§£ã€‚å¦‚æœåœ¨è¿™ä¸ªé¢†åŸŸæ²¡æœ‰åŸºç¡€ï¼Œæ ¹æœ¬ä¸èƒ½è¢«å…¶ä»–äººå¸æ”¶ã€‚</p></li><li><p>å­¦ä¹ ä¸€ä¸ªé¢†åŸŸçš„çŸ¥è¯†ï¼Œè¦é ä¸æ–­åœ°ã€åˆ›æ–°æ€§åœ°åº”ç”¨äºå„ç§åœºæ™¯ã€‚é‡å¤æ˜¯é‡è¦çš„ï¼Œä½†æ˜¯æœºæ¢°åŒ–çš„é‡å¤æ˜¯æ²¡å¿…è¦çš„ï¼Œåªæœ‰åˆ›æ–°æ€§çš„ï¼ˆå³æ¢ä¸€ç§å½¢å¼ï¼‰åº”ç”¨ï¼Œæ‰èƒ½ä»£è¡¨ä½ ï¼ˆç°åœ¨ï¼‰çœŸæ­£çš„æŒæ¡äº†ã€‚å½“ç„¶ç°åœ¨æŒæ¡äº†å°†æ¥ä¹Ÿè¦ä¸æ–­é‡å¤ï¼Œè¦ä¸å°±å¿˜è®°äº†ã€‚</p></li></ol><p>çªç„¶å¯¹æ¬§ç¾çš„è¡Œæ–‡é£æ ¼äº§ç”Ÿå¥½æ„Ÿäº†:)</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>study method</tag>
      
      <tag>economics</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python3ä¸­enumerate/zipç­‰å‡½æ•°ä½¿ç”¨æ–¹æ³•</title>
    <link href="/2019/05/18/Python3%E4%B8%ADenumerate-zip%E7%AD%89%E5%87%BD%E6%95%B0%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    <url>/2019/05/18/Python3%E4%B8%ADenumerate-zip%E7%AD%89%E5%87%BD%E6%95%B0%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘æ­£åœ¨ç ”è¯»ã€ŠPythonæœºå™¨å­¦ä¹ åŸºç¡€æ•™ç¨‹ã€‹ï¼ˆIntroduction to Machine Learning with Pythonï¼‰è¿™æœ¬ä¹¦ã€‚ä¹¦ä¸­çš„Python3ä»£ç ã€å¯¹äºnumpyã€pandasã€matplotlibä»¥åŠscikit-learnåº“çš„ä½¿ç”¨éƒ½è®©äººå¹ä¸ºè§‚æ­¢ã€‚ä½œä¸ºPythonåˆå­¦è€…ï¼Œè¿™æœ¬ä¹¦ä¸ä»…å¯ä»¥è®©äººå…¥é—¨æœºå™¨å­¦ä¹ ï¼Œæ›´å¯ä»¥è®©äººçš„PythonæŠ€å·§å¾—åˆ°æå‡ã€‚</p><p>ä¸‹é¢çš„ä»£ç ä½¿ç”¨sklearnè‡ªå¸¦æ•°æ®é›†moonä»¥åŠsklearnçš„éšæœºæ£®æ—æ¨¡å‹æ„å»ºç”±5æ£µæ ‘ç»„æˆçš„éšæœºæ£®æ—ï¼Œå¹¶åˆ©ç”¨matplotlibåº“å¯è§†åŒ–ã€‚</p><pre><code class="lang-python">import numpy as npimport pandas as pdimport matplotlib.pyplot as pltimport mglearn # éœ€è¦é¢å¤–ä¸‹è½½from sklearn.ensemble import RandomForestClassifierfrom sklearn.datasets import make_moonsfrom sklearn.model_selection import train_test_splitX, y = make_moons(n_samples=100, noise=0.25, random_state=3)X_train, X_test, y_train, y_test = train_test_split(X, y, stratify=y,                                                     random_state=42)# åˆ›å»º5æ£µæ ‘ç»„æˆçš„éšæœºæ£®æ—forest = RandomForestClassifier(n_estimators=5, random_state=2)# å¯¹è®­ç»ƒé›†è¿›è¡Œæ‹Ÿåˆforest.fit(X_train, y_train)# ç”Ÿæˆä¸¤è¡Œä¸‰åˆ—çš„å…­å¼ å›¾ï¼Œå®½20é«˜10fig, axes = plt.subplots(2, 3, figsize=(20, 10))</code></pre><p><code>forest.estimators_</code>æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œä¿å­˜äº”æ£µæ ‘çš„ä¿¡æ¯</p><pre><code class="lang-python">print(len(forest.estimators_))print(type(forest.estimators_[0]))5&lt;class &#39;sklearn.tree.tree.DecisionTreeClassifier&#39;&gt;</code></pre><p>ä¸‹é¢çš„foréå†ç”¨æ³•æ˜¯æˆ‘ä¹‹å‰å¾ˆå°‘æ¥è§¦çš„ï¼Œå°¤å…¶æ˜¯å¯¹äºenumerateä¸zipçš„ä½¿ç”¨ï¼Œåœ¨æ­¤è®°å½•ä¸‹æ¥ã€‚</p><pre><code class="lang-python">for i, (ax, tree) in enumerate(zip(axes.ravel(), forest.estimators_)):    ax.set_title(&quot;Tree &#123;&#125;&quot;.format(i))    mglearn.plots.plot_tree_partition(X_train, y_train, tree, ax=ax)mglearn.plots.plot_2d_separator(forest, X_train, fill=True, ax=axes[-1, -1],                               alpha=.4)axes[-1, -1].set_title(&quot;Random Forest&quot;)mglearn.discrete_scatter(X_train[:, 0], X_train[:, 1], y_train)</code></pre><p>é¦–å…ˆzipå‡½æ•°å°±åƒå¤§å‹ç›¸äº²ç°åœºï¼Œæ¥å—ä¸¤ä¸ªå¯è¿­ä»£é›†åˆï¼šä¸€æ³¢ç”·æ€§å’Œä¸€æ³¢å¥³æ€§ï¼Œå°†å‰ä¸€ä¸ªé›†åˆä¸­çš„å…ƒç´ ä¸åä¸€ä¸ªé›†åˆä¸­çš„å…ƒç´ ä¸€ä¸€é…å¯¹ï¼Œè¿”å›ä¸¤ä¸¤ç»“åˆçš„å¯¹è±¡ï¼Œå³è¿”å›ä¸€å¤§ç¾¤å…ƒç´ ç»„æˆçš„é›†åˆï¼Œé›†åˆä¸­å…ƒç´ éƒ½æ˜¯ä¸€ç”·ä¸€å¥³é…å¯¹ã€‚é…å¯¹æ–¹æ³•å°±æ˜¯ç²—æš´çš„ç¬¬iä¸ªç”·ç”Ÿ-ç¬¬iä¸ªå¥³ç”Ÿï¼Œå¦‚æœæœ‰ç”·ç”Ÿorå¥³ç”Ÿå¤šäº†å’‹åŠï¼Ÿzipä¸ç®¡é…ä¸ä¸Šå¯¹çš„å…ƒç´ ï¼ŒåªæŒ‘é€‰é…å¯¹æˆåŠŸçš„ç»„åˆã€‚</p><p>ç»è¿‡zipå‡½æ•°å¤„ç†ï¼Œaxesé‡Œé¢çš„å…­å¼ å›¾é…ä¸Šäº†äº”æ£µæ ‘ï¼Œæœ€åä¸€å¼ å›¾æˆ‘ä»¬ç•™åˆ°æœ€åå¤„ç†ã€‚</p><p>æ¥ä¸‹æ¥æ˜¯enumerateï¼Œenumerateæ¥å—å¯è¿­ä»£å¯¹è±¡ï¼Œä¸ä»…ä»…è¾“å‡ºå¯¹è±¡å…ƒç´ ï¼Œè¿˜é™„å¸¦è¾“å‡ºè¯¥å…ƒç´ æ‰€åœ¨çš„ä½ç½®ã€‚enumerateæœ¬èº«å°±æ˜¯â€œæšä¸¾â€çš„æ„æ€å˜›ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>çŸ©é˜µæ±‚å¯¼æ€»ç»“</title>
    <link href="/2019/05/15/%E7%9F%A9%E9%98%B5%E6%B1%82%E5%AF%BC%E6%80%BB%E7%BB%93/"/>
    <url>/2019/05/15/%E7%9F%A9%E9%98%B5%E6%B1%82%E5%AF%BC%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<p>æˆ‘å®åœ¨æ˜¯ä¸ä¼šæŠŠhexoä¸­çš„latexå¼€å…³æ‰“å¼€äº†ï¼Œå¤§å®¶å¦‚æœæƒ³çœ‹å…¬å¼ï¼Œå¯ä»¥ä½¿ç”¨markdownç¼–è¾‘å™¨ï¼Œå¤åˆ¶æœ¬æ–‡ååœ¨æœ¬åœ°æŸ¥çœ‹ã€‚æœ¬æ–‡æ˜¯ç”±æœ¬äººæ±‡ç¼–è‡ªç½‘ä¸Šçš„èµ„æ–™æ•´ç†è€Œæˆï¼Œä¸ºçš„æ˜¯è®°å¿†å’Œåˆ†äº«ã€‚</p><p>ç„¶åæ¥å»ºç«‹è¿ç®—æ³•åˆ™ã€‚å›æƒ³é‡åˆ°è¾ƒå¤æ‚çš„ä¸€å…ƒå‡½æ•°å¦‚$f = \log(2+\sin x)e^{\sqrt{x}}$ï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•æ±‚å¯¼çš„å‘¢ï¼Ÿé€šå¸¸ä¸æ˜¯ä»å®šä¹‰å¼€å§‹æ±‚æé™ï¼Œè€Œæ˜¯å…ˆå»ºç«‹äº†åˆç­‰å‡½æ•°æ±‚å¯¼å’Œå››åˆ™è¿ç®—ã€å¤åˆç­‰æ³•åˆ™ï¼Œå†æ¥è¿ç”¨è¿™äº›æ³•åˆ™ã€‚æ•…è€Œï¼Œæˆ‘ä»¬æ¥åˆ›ç«‹å¸¸ç”¨çš„çŸ©é˜µå¾®åˆ†çš„è¿ç®—æ³•åˆ™ï¼š</p><p>åŠ å‡æ³•ï¼š$d(X\pm Y) = dX \pm dY$ï¼›çŸ©é˜µä¹˜æ³•ï¼š$d(XY) = (dX)Y + X dY $ï¼›è½¬ç½®ï¼š$d(X^T) = (dX)^T$ï¼›è¿¹ï¼š$d\text{tr}(X) = \text{tr}(dX)$ã€‚<br>é€†ï¼š$dX^{-1} = -X^{-1}dX X^{-1}$ã€‚æ­¤å¼å¯åœ¨$XX^{-1}=I$ä¸¤ä¾§æ±‚å¾®åˆ†æ¥è¯æ˜ã€‚<br>è¡Œåˆ—å¼ï¼š$d|X| = \text{tr}(X^$è¡¨ç¤ºXçš„ä¼´éšçŸ©é˜µï¼Œåœ¨Xå¯é€†æ—¶åˆå¯ä»¥å†™ä½œ$d|X|= |X|\text{tr}(X^{-1}dX)$ã€‚æ­¤å¼å¯ç”¨Laplaceå±•å¼€æ¥è¯æ˜ï¼Œè¯¦è§å¼ è´¤è¾¾ã€ŠçŸ©é˜µåˆ†æä¸åº”ç”¨ã€‹ç¬¬279é¡µã€‚<br>é€å…ƒç´ ä¹˜æ³•ï¼š$d(X\odot Y) = dX\odot Y + X\odot dY$ï¼Œ$\odot$è¡¨ç¤ºå°ºå¯¸ç›¸åŒçš„çŸ©é˜µX,Yé€å…ƒç´ ç›¸ä¹˜ã€‚<br>é€å…ƒç´ å‡½æ•°ï¼š$d\sigma(X) = \sigmaâ€™(X)\odot dX$ ï¼Œ$\sigma(X) = \left[\sigma(X<em>{ij})\right]$æ˜¯é€å…ƒç´ æ ‡é‡å‡½æ•°è¿ç®—ï¼Œ$ \sigmaâ€™(X)=[\sigmaâ€™(X</em>{ij})]$æ˜¯é€å…ƒç´ æ±‚å¯¼æ•°ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œ<script type="math/tex">X=\left[\begin{matrix}x_{11} & x_{12} \\ x_{21} & x_{22}\end{matrix}\right], d \sin(X) = \left[\begin{matrix}\cos x_{11} dx_{11} & \cos x_{12} d x_{12}\\ \cos x_{21} d x_{21}& \cos x_{22} dx_{22}\end{matrix}\right] = \cos(X)\odot dX</script>ã€‚</p><p>æˆ‘ä»¬è¯•å›¾åˆ©ç”¨çŸ©é˜µå¯¼æ•°ä¸å¾®åˆ†çš„è”ç³»$df = \text{tr}\left(\frac{\partial f}{\partial X}^T dX\right)$ ï¼Œåœ¨æ±‚å‡ºå·¦ä¾§çš„å¾®åˆ†dfåï¼Œè¯¥å¦‚ä½•å†™æˆå³ä¾§çš„å½¢å¼å¹¶å¾—åˆ°å¯¼æ•°å‘¢ï¼Ÿè¿™éœ€è¦ä¸€äº›è¿¹æŠ€å·§(trace trick)ï¼š</p><p>æ ‡é‡å¥—ä¸Šè¿¹ï¼š$a = \text{tr}(a)$<br>è½¬ç½®ï¼š$\mathrm{tr}(A^T) = \mathrm{tr}(A)$ã€‚<br>çº¿æ€§ï¼š$\text{tr}(A\pm B) = \text{tr}(A)\pm \text{tr}(B)$ã€‚<br>çŸ©é˜µä¹˜æ³•äº¤æ¢ï¼š$\text{tr}(AB) = \text{tr}(BA)$ï¼Œå…¶ä¸­$A$ä¸$B^T$å°ºå¯¸ç›¸åŒã€‚ä¸¤ä¾§éƒ½ç­‰äº$\sum<em>{i,j}A</em>{ij}B<em>{ji}$ã€‚<br>çŸ©é˜µä¹˜æ³•/é€å…ƒç´ ä¹˜æ³•äº¤æ¢ï¼š$\text{tr}(A^T(B\odot C)) = \text{tr}((A\odot B)^TC)$ï¼Œå…¶ä¸­$A, B, C$å°ºå¯¸ç›¸åŒã€‚ä¸¤ä¾§éƒ½ç­‰äº$\sum</em>{i,j}A<em>{ij}B</em>{ij}C_{ij}$ã€‚</p><p>è§‚å¯Ÿä¸€ä¸‹å¯ä»¥æ–­è¨€ï¼Œè‹¥æ ‡é‡å‡½æ•°fæ˜¯çŸ©é˜µXç»åŠ å‡ä¹˜æ³•ã€é€†ã€è¡Œåˆ—å¼ã€é€å…ƒç´ å‡½æ•°ç­‰è¿ç®—æ„æˆï¼Œåˆ™ä½¿ç”¨ç›¸åº”çš„è¿ç®—æ³•åˆ™å¯¹fæ±‚å¾®åˆ†ï¼Œå†ä½¿ç”¨è¿¹æŠ€å·§ç»™dfå¥—ä¸Šè¿¹å¹¶å°†å…¶å®ƒé¡¹äº¤æ¢è‡³dXå·¦ä¾§ï¼Œå¯¹ç…§å¯¼æ•°ä¸å¾®åˆ†çš„è”ç³»$df = \text{tr}\left(\frac{\partial f}{\partial X}^T dX\right)$ï¼Œå³èƒ½å¾—åˆ°å¯¼æ•°ã€‚</p><p>ç‰¹åˆ«åœ°ï¼Œè‹¥çŸ©é˜µé€€åŒ–ä¸ºå‘é‡ï¼Œå¯¹ç…§å¯¼æ•°ä¸å¾®åˆ†çš„è”ç³»$df = \frac{\partial f}{\partial \boldsymbol{x}}^T d\boldsymbol{x}$ ï¼Œå³èƒ½å¾—åˆ°å¯¼æ•°ã€‚</p><p>åœ¨å»ºç«‹æ³•åˆ™çš„æœ€åï¼Œæ¥è°ˆä¸€è°ˆå¤åˆï¼šå‡è®¾å·²æ±‚å¾—$\frac{\partial f}{\partial Y}$ï¼Œè€ŒYæ˜¯Xçš„å‡½æ•°ï¼Œå¦‚ä½•æ±‚$\frac{\partial f}{\partial X}$å‘¢ï¼Ÿåœ¨å¾®ç§¯åˆ†ä¸­æœ‰æ ‡é‡æ±‚å¯¼çš„é“¾å¼æ³•åˆ™$\frac{\partial f}{\partial x} = \frac{\partial f}{\partial y} \frac{\partial y}{\partial x}$ï¼Œä½†è¿™é‡Œæˆ‘ä»¬ä¸èƒ½éšæ„æ²¿ç”¨æ ‡é‡çš„é“¾å¼æ³•åˆ™ï¼Œå› ä¸ºçŸ©é˜µå¯¹çŸ©é˜µçš„å¯¼æ•°$\frac{\partial Y}{\partial X}$æˆªè‡³ç›®å‰ä»æ˜¯æœªå®šä¹‰çš„ã€‚äºæ˜¯æˆ‘ä»¬ç»§ç»­è¿½æœ¬æº¯æºï¼Œé“¾å¼æ³•åˆ™æ˜¯ä»ä½•è€Œæ¥ï¼Ÿæºå¤´ä»ç„¶æ˜¯å¾®åˆ†ã€‚æˆ‘ä»¬ç›´æ¥ä»å¾®åˆ†å…¥æ‰‹å»ºç«‹å¤åˆæ³•åˆ™ï¼šå…ˆå†™å‡º$df = \text{tr}\left(\frac{\partial f}{\partial Y}^T dY\right)$ï¼Œå†å°†dYç”¨dXè¡¨ç¤ºå‡ºæ¥ä»£å…¥ï¼Œå¹¶ä½¿ç”¨è¿¹æŠ€å·§å°†å…¶ä»–é¡¹äº¤æ¢è‡³dXå·¦ä¾§ï¼Œå³å¯å¾—åˆ°$\frac{\partial f}{\partial X}$ã€‚</p><p>æœ€å¸¸è§çš„æƒ…å½¢æ˜¯$Y = AXB$ï¼Œæ­¤æ—¶ <script type="math/tex">df = \text{tr}\left(\frac{\partial f}{\partial Y}^T dY\right) = \text{tr}\left(\frac{\partial f}{\partial Y}^T AdXB\right) =  \text{tr}\left(B\frac{\partial f}{\partial Y}^T AdX\right) = \text{tr}\left((A^T\frac{\partial f}{\partial Y}B^T)^T dX\right)</script> ï¼Œå¯å¾—åˆ°<script type="math/tex">\frac{\partial f}{\partial X}=A^T\frac{\partial f}{\partial Y}B^T</script>ã€‚æ³¨æ„è¿™é‡Œ$dY = (dA)XB + AdXB + AXdB = AdXB$ï¼Œç”±äºA,Bæ˜¯å¸¸é‡ï¼Œ$dA=0,dB=0$ï¼Œä»¥åŠæˆ‘ä»¬ä½¿ç”¨çŸ©é˜µä¹˜æ³•äº¤æ¢çš„è¿¹æŠ€å·§äº¤æ¢äº†$\frac{\partial f}{\partial Y}^T AdX$ä¸$B$ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
      <category>è½¬è½½</category>
      
    </categories>
    
    
    <tags>
      
      <tag>deep learning</tag>
      
      <tag>math</tag>
      
      <tag>matrix analysis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS229-note-4-ç”Ÿæˆå­¦ä¹ ç®—æ³•</title>
    <link href="/2019/05/06/CS229-note-4-%E7%94%9F%E6%88%90%E5%AD%A6%E4%B9%A0%E7%AE%97%E6%B3%95/"/>
    <url>/2019/05/06/CS229-note-4-%E7%94%9F%E6%88%90%E5%AD%A6%E4%B9%A0%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p><a href="https://raw.githubusercontent.com/Kivy-CN/Stanford-CS-229-CN/master/Markdown/cs229-notes2.md">è½¬è½½è‡ª@é£é¾™</a></p><div class="table-container"><table><thead><tr><th>ç›¸å…³é“¾æ¥</th></tr></thead><tbody><tr><td><a href="https://github.com/Kivy-CN/Stanford-CS-229-CN">Github åœ°å€</a></td></tr><tr><td><a href="https://zhuanlan.zhihu.com/MachineLearn">çŸ¥ä¹ä¸“æ </a></td></tr><tr><td><a href="http://cs229.stanford.edu/">æ–¯å¦ç¦å¤§å­¦ CS229 è¯¾ç¨‹ç½‘ç«™</a></td></tr><tr><td><a href="http://open.163.com/movie/2008/1/M/C/M6SGF6VB4_M6SGHFBMC.html">ç½‘æ˜“å…¬å¼€è¯¾ä¸­æ–‡å­—å¹•è§†é¢‘</a></td></tr></tbody></table></div><h3 id="ç¬¬å››éƒ¨åˆ†-ç”Ÿæˆå­¦ä¹ ç®—æ³•-Generative-Learning-algorithms"><a href="#ç¬¬å››éƒ¨åˆ†-ç”Ÿæˆå­¦ä¹ ç®—æ³•-Generative-Learning-algorithms" class="headerlink" title="ç¬¬å››éƒ¨åˆ† ç”Ÿæˆå­¦ä¹ ç®—æ³•(Generative Learning algorithms)"></a>ç¬¬å››éƒ¨åˆ† ç”Ÿæˆå­¦ä¹ ç®—æ³•(Generative Learning algorithms)</h3><p>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬è®²è¿‡çš„å­¦ä¹ ç®—æ³•çš„æ¨¡å‹éƒ½æ˜¯$p (y|x;\theta)$ï¼Œä¹Ÿå°±æ˜¯ç»™å®š $x$ ä¸‹ $y$ çš„æ¡ä»¶åˆ†å¸ƒï¼Œä»¥  $\theta$  ä¸ºå‚æ•°ã€‚ä¾‹å¦‚ï¼Œé€»è¾‘å›å½’ä¸­å°±æ˜¯ä»¥ $h_\theta(x) = g(\theta^T x)$ ä½œä¸º $p (y|x;\theta)$ çš„æ¨¡å‹ï¼Œè¿™é‡Œçš„ $g$ æ˜¯ä¸€ä¸ª $S$å‹å‡½æ•°ï¼ˆsigmoid functionï¼‰ã€‚æ¥ä¸‹æ¥ï¼Œå’±ä»¬è¦è®²ä¸€ä¸‹ä¸€ç§ä¸åŒç±»å‹çš„å­¦ä¹ ç®—æ³•ã€‚</p><p>è®¾æƒ³æœ‰è¿™æ ·ä¸€ç§åˆ†ç±»é—®é¢˜ï¼Œæˆ‘ä»¬è¦å­¦ä¹ åŸºäºä¸€ä¸ªåŠ¨ç‰©çš„æŸä¸ªç‰¹å¾æ¥è¾¨åˆ«å®ƒæ˜¯å¤§è±¡$(y=1)$è¿˜æ˜¯å°ç‹—$(y=0)$ã€‚ç»™å®šä¸€ä¸ªè®­ç»ƒé›†ï¼Œç”¨é€»è¾‘å›å½’æˆ–è€…åŸºç¡€ç‰ˆçš„<strong>æ„ŸçŸ¥å™¨ç®—æ³•ï¼ˆperceptron algorithmï¼‰</strong> è¿™æ ·çš„ä¸€ä¸ªç®—æ³•èƒ½æ‰¾åˆ°ä¸€æ¡ç›´çº¿ï¼Œä½œä¸ºåŒºåˆ†å¼€å¤§è±¡å’Œå°ç‹—çš„è¾¹ç•Œã€‚æ¥ä¸‹æ¥ï¼Œè¦è¾¨åˆ«ä¸€ä¸ªæ–°çš„åŠ¨ç‰©æ˜¯å¤§è±¡è¿˜æ˜¯å°ç‹—ï¼Œç¨‹åºå°±è¦æ£€æŸ¥è¿™ä¸ªæ–°åŠ¨ç‰©çš„å€¼è½åˆ°äº†åˆ’åˆ†å‡ºæ¥çš„å“ªä¸ªåŒºåŸŸä¸­ï¼Œç„¶åæ ¹æ®æ‰€è½åˆ°çš„åŒºåŸŸæ¥ç»™å‡ºé¢„æµ‹ã€‚</p><p>è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹æ³•ã€‚é¦–å…ˆï¼Œè§‚å¯Ÿå¤§è±¡ï¼Œç„¶åæˆ‘ä»¬é’ˆå¯¹å¤§è±¡çš„æ ·å­æ¥è¿›è¡Œå»ºæ¨¡ã€‚ç„¶åï¼Œå†è§‚å¯Ÿå°ç‹—ï¼Œé’ˆå¯¹å°ç‹—çš„æ ·å­å¦å¤–å»ºç«‹ä¸€ä¸ªæ¨¡å‹ã€‚æœ€åè¦åˆ¤æ–­ä¸€ç§æ–°åŠ¨ç‰©å½’å±å“ªä¸€ç±»ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ–°åŠ¨ç‰©åˆ†åˆ«ç”¨å¤§è±¡å’Œå°ç‹—çš„æ¨¡å‹æ¥è¿›æ¯”å¯¹ï¼Œçœ‹çœ‹æ–°åŠ¨ç‰©æ›´æ¥è¿‘å“ªä¸ªè®­ç»ƒé›†ä¸­å·²æœ‰çš„æ¨¡å‹ã€‚</p><p>ä¾‹å¦‚é€»è¾‘å›å½’ä¹‹ç±»çš„ç›´æ¥è¯•å›¾å»ºç«‹ $p(y|x)$çš„ç®—æ³•ï¼Œä»¥åŠæ„ŸçŸ¥å™¨ç®—æ³•ï¼ˆperceptron algorithmï¼‰ç­‰ç›´æ¥ç”¨æŠ•å›¾ï¼ˆmappings directlyï¼‰çš„æ€è·¯æ¥åˆ¤æ–­å¯¹åº” $X$ çš„å€¼è½åˆ°äº† ${0, 1}$ ä¸­å“ªä¸ªåŒºåŸŸçš„ç®—æ³•ï¼Œè¿™äº›éƒ½å«<strong>åˆ¤åˆ«å¼å­¦ä¹ ç®—æ³•ï¼ˆdiscriminative learning algorithmsï¼‰ã€‚</strong> å’Œä¹‹å‰çš„è¿™äº›åˆ¤åˆ«å¼ç®—æ³•ä¸åŒï¼Œä¸‹é¢æˆ‘ä»¬è¦è®²çš„æ–°ç®—æ³•æ˜¯å¯¹ $p(x|y)$ å’Œ $p(y)$æ¥è¿›è¡Œå»ºæ¨¡ã€‚è¿™ç±»ç®—æ³•å«<strong>åšç”Ÿæˆå­¦ä¹ ç®—æ³•ï¼ˆgenerative learning algorithmsï¼‰</strong>ã€‚ä¾‹å¦‚å¦‚æœ $y$ ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªæ ·ä¾‹æ˜¯  å°ç‹— $(0)$ æˆ–è€…  å¤§è±¡ $(1)$ï¼Œé‚£ä¹ˆ$p(x|y = 0)$å°±æ˜¯å¯¹å°ç‹—ç‰¹å¾åˆ†å¸ƒçš„å»ºæ¨¡ï¼Œè€Œ$p(x|y = 1)$å°±æ˜¯å¯¹å¤§è±¡ç‰¹å¾åˆ†å¸ƒçš„å»ºæ¨¡ã€‚</p><p>å¯¹ $p(y)$ (é€šå¸¸ç§°ä¸º<strong>class priors</strong><code>è¯‘è€…æ³¨ï¼šè¿™é‡Œæ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„è¯è¿›è¡Œç¿»è¯‘</code>) å’Œ$p(x|y)$ è¿›è¡Œå»ºæ¨¡ä¹‹åï¼Œæˆ‘ä»¬çš„ç®—æ³•å°±æ˜¯ç”¨<strong>è´å¶æ–¯è§„åˆ™ï¼ˆBayes ruleï¼‰</strong> æ¥æ¨å¯¼å¯¹åº”ç»™å®š $x$ ä¸‹ $y$ çš„<strong>åéªŒåˆ†å¸ƒï¼ˆposterior distributionï¼‰</strong>ï¼š</p><script type="math/tex; mode=display">p(y|x)=\frac{p(x|y)p(y)}{p(x)}</script><p>è¿™é‡Œçš„<strong>åˆ†æ¯ï¼ˆdenominatorï¼‰</strong> ä¸ºï¼š$p(x) = p(x|y = 1)p(y = 1) + p(x|y = 0)p(y = 0)$ï¼ˆè¿™ä¸ªç­‰å¼å…³ç³»å¯ä»¥æ ¹æ®æ¦‚ç‡çš„æ ‡å‡†æ€§è´¨æ¥æ¨å¯¼éªŒè¯<code>è¯‘è€…æ³¨ï¼šå…¶å®å°±æ˜¯æ¡ä»¶æ¦‚ç‡</code>ï¼‰ï¼Œè¿™æ ·æ¥ä¸‹æ¥å°±å¯ä»¥æŠŠå®ƒè¡¨ç¤ºæˆæˆ‘ä»¬ç†Ÿæ‚‰çš„ $p(x|y)$å’Œ $p(y)$ çš„å½¢å¼äº†ã€‚å®é™…ä¸Šå¦‚æœæˆ‘ä»¬è®¡ç®—$p(y|x)$ æ¥è¿›è¡Œé¢„æµ‹ï¼Œé‚£å°±å¹¶ä¸éœ€è¦å»è®¡ç®—è¿™ä¸ªåˆ†æ¯ï¼Œå› ä¸ºæœ‰ä¸‹é¢çš„ç­‰å¼å…³ç³»ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\arg \max_y p(y|x) & =\arg \max_y \frac{p(x|y)p(y)}{p(x)}\\&= \arg \max_y p(x|y)p(y)\end{aligned}</script><h4 id="1-é«˜æ–¯åˆ¤åˆ«åˆ†æï¼ˆGaussian-discriminant-analysisï¼‰"><a href="#1-é«˜æ–¯åˆ¤åˆ«åˆ†æï¼ˆGaussian-discriminant-analysisï¼‰" class="headerlink" title="1 é«˜æ–¯åˆ¤åˆ«åˆ†æï¼ˆGaussian discriminant analysisï¼‰"></a>1 é«˜æ–¯åˆ¤åˆ«åˆ†æï¼ˆGaussian discriminant analysisï¼‰</h4><p>å’±ä»¬è¦å­¦çš„ç¬¬ä¸€ä¸ªç”Ÿæˆå­¦ä¹ ç®—æ³•å°±æ˜¯<strong>é«˜æ–¯åˆ¤åˆ«åˆ†æï¼ˆGaussian discriminant analysis</strong> ï¼Œç¼©å†™ä¸ºGDAã€‚<code>è¯‘è€…æ³¨ï¼šé«˜æ–¯çœŸæ£’ï¼</code>ï¼‰åœ¨è¿™ä¸ªæ¨¡å‹é‡Œé¢ï¼Œæˆ‘ä»¬<strong>å‡è®¾ $p(x|y)$æ˜¯ä¸€ä¸ªå¤šå…ƒæ­£æ€åˆ†å¸ƒã€‚</strong> æ‰€ä»¥é¦–å…ˆå’±ä»¬ç®€å•è®²ä¸€ä¸‹å¤šå…ƒæ­£æ€åˆ†å¸ƒçš„ä¸€äº›ç‰¹ç‚¹ï¼Œç„¶åå†ç»§ç»­è®² GDA é«˜æ–¯åˆ¤åˆ«åˆ†ææ¨¡å‹ã€‚</p><h5 id="1-1-å¤šå…ƒæ­£æ€åˆ†å¸ƒï¼ˆmultivariate-normal-distributionï¼‰"><a href="#1-1-å¤šå…ƒæ­£æ€åˆ†å¸ƒï¼ˆmultivariate-normal-distributionï¼‰" class="headerlink" title="1.1 å¤šå…ƒæ­£æ€åˆ†å¸ƒï¼ˆmultivariate normal distributionï¼‰"></a>1.1 å¤šå…ƒæ­£æ€åˆ†å¸ƒï¼ˆmultivariate normal distributionï¼‰</h5><p>$n$ç»´å¤šå…ƒæ­£æ€åˆ†å¸ƒï¼Œä¹Ÿå«åšå¤šå˜é‡é«˜æ–¯åˆ†å¸ƒï¼Œå‚æ•°ä¸ºä¸€ä¸ª$n$ç»´ <strong>å‡å€¼å‘é‡</strong> $\mu \in  R^n $ï¼Œä»¥åŠä¸€ä¸ª <strong>åæ–¹å·®çŸ©é˜µ</strong> $\Sigma \in  R^{n\times n}$ï¼Œå…¶ä¸­$\Sigma \geq 0$ æ˜¯ä¸€ä¸ªå¯¹ç§°ï¼ˆsymmetricï¼‰çš„åŠæ­£å®šï¼ˆpositive semi-definiteï¼‰çŸ©é˜µã€‚å½“ç„¶ä¹Ÿå¯ä»¥å†™æˆâ€$N (\mu, \Sigma)$â€ çš„åˆ†å¸ƒå½¢å¼ï¼Œå¯†åº¦ï¼ˆdensityï¼‰å‡½æ•°ä¸ºï¼š</p><script type="math/tex; mode=display">p(x;\mu,\Sigma)=\frac{1}{(2\pi)^{n/2}|\Sigma|^{1/2}} exp(-\frac{1}{2}(x-\mu)^T\Sigma^{-1}(x-\mu))</script><p>åœ¨ä¸Šé¢çš„ç­‰å¼ä¸­ï¼Œâ€$|\Sigma|$â€çš„æ„æ€æ˜¯çŸ©é˜µ$\Sigma$çš„è¡Œåˆ—å¼ï¼ˆdeterminantï¼‰ã€‚å¯¹äºä¸€ä¸ªåœ¨ $N(\mu,\Sigma)$åˆ†å¸ƒä¸­çš„éšæœºå˜é‡ $X$ ï¼Œå…¶å¹³å‡å€¼ï¼ˆè·Ÿæ­£æ€åˆ†å¸ƒé‡Œé¢å·®ä¸å¤šï¼Œæ‰€ä»¥å¹¶ä¸æ„å¤–ï¼‰å°±æ˜¯ $\mu$ äº†ï¼š</p><script type="math/tex; mode=display">E[X]=\int_x xp(x;\mu,\Sigma)dx=\mu</script><p>éšæœºå˜é‡$Z$æ˜¯ä¸€ä¸ªæœ‰å€¼çš„å‘é‡ï¼ˆvector-valued random variableï¼‰ï¼Œ$Z$ çš„ <strong>åæ–¹å·®ï¼ˆcovarianceï¼‰</strong> çš„å®šä¹‰æ˜¯ï¼š$Cov(Z) = E[(Z-E[Z])(Z-E[Z])^T ]$ã€‚è¿™æ˜¯å¯¹å®æ•°éšæœºå˜é‡çš„æ–¹å·®ï¼ˆvarianceï¼‰è¿™ä¸€æ¦‚å¿µçš„æ³›åŒ–æ‰©å±•ã€‚è¿™ä¸ªåæ–¹å·®è¿˜å¯ä»¥å®šä¹‰æˆ$Cov(Z) = E[ZZ^T]-(E[Z])(E[Z])^T$ï¼ˆä½ å¯ä»¥è‡ªå·±è¯æ˜ä¸€ä¸‹è¿™ä¸¤ä¸ªå®šä¹‰å®é™…ä¸Šæ˜¯ç­‰ä»·çš„ã€‚ï¼‰å¦‚æœ $X$ æ˜¯ä¸€ä¸ªå¤šå˜é‡æ­£æ€åˆ†å¸ƒï¼Œå³ $X \sim N (\mu, \Sigma)$ï¼Œåˆ™æœ‰ï¼š</p><script type="math/tex; mode=display">Cov(X)=\Sigma</script><p>ä¸‹é¢è¿™äº›æ ·ä¾‹æ˜¯ä¸€äº›é«˜æ–¯åˆ†å¸ƒçš„å¯†åº¦å›¾ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://raw.githubusercontent.com/Kivy-CN/Stanford-CS-229-CN/master/img/cs229note2f1.png" alt></p><p>æœ€å·¦è¾¹çš„å›¾ï¼Œå±•ç¤ºçš„æ˜¯ä¸€ä¸ªå‡å€¼ä¸º$0$ï¼ˆå®é™…ä¸Šæ˜¯ä¸€ä¸ª$2\times 1$ çš„é›¶å‘é‡ï¼‰çš„é«˜æ–¯åˆ†å¸ƒï¼Œåæ–¹å·®çŸ©é˜µå°±æ˜¯$\Sigma = I$ ï¼ˆä¸€ä¸ª $2\times 2$çš„å•ä½çŸ©é˜µï¼Œidentity matrixï¼‰ã€‚è¿™ç§å‡å€¼ä¸º$0$ å¹¶ä¸”åæ–¹å·®çŸ©é˜µä¸ºå•ä½çŸ©é˜µçš„é«˜æ–¯åˆ†å¸ƒä¹Ÿå«åš<strong>æ ‡å‡†æ­£æ€åˆ†å¸ƒã€‚</strong> ä¸­é—´çš„å›¾ä¸­å±•ç¤ºçš„æ˜¯å‡å€¼ä¸º$0$è€Œåæ–¹å·®çŸ©é˜µæ˜¯$0.6I$ çš„é«˜æ–¯åˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼›æœ€å³è¾¹çš„å±•ç¤ºçš„æ˜¯åæ–¹å·®çŸ©é˜µ$\Sigma = 2I$çš„é«˜æ–¯åˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°ã€‚ä»è¿™å‡ ä¸ªå›¾å¯ä»¥çœ‹å‡ºï¼Œéšç€åæ–¹å·®çŸ©é˜µ$\Sigma$å˜å¤§ï¼Œé«˜æ–¯åˆ†å¸ƒçš„å½¢æ€å°±å˜å¾—æ›´å®½å¹³ï¼ˆspread-outï¼‰ï¼Œè€Œå¦‚æœåæ–¹å·®çŸ©é˜µ$\Sigma$å˜å°ï¼Œåˆ†å¸ƒå°±ä¼šæ›´åŠ é›†ä¸­ï¼ˆcompressedï¼‰ã€‚</p><p>æ¥çœ‹ä¸€ä¸‹æ›´å¤šçš„æ ·ä¾‹ï¼š</p><p><img src="https://raw.githubusercontent.com/Kivy-CN/Stanford-CS-229-CN/master/img/cs229note2f2.png" alt></p><p>ä¸Šé¢è¿™å‡ ä¸ªå›¾å±•ç¤ºçš„æ˜¯å‡å€¼ä¸º$0$ï¼Œä½†åæ–¹å·®çŸ©é˜µå„ä¸ç›¸åŒçš„é«˜æ–¯åˆ†å¸ƒï¼Œå…¶ä¸­çš„åæ–¹å·®çŸ©é˜µä¾æ¬¡å¦‚ä¸‹æ‰€ç¤ºï¼š</p><script type="math/tex; mode=display">\Sigma =\begin{bmatrix} 1 & 0 \\ 0 & 1 \\ \end{bmatrix};\Sigma =\begin{bmatrix} 1 & 0.5 \\ 0.5 & 1 \\ \end{bmatrix};\Sigma =\begin{bmatrix} 1 & 0.8 \\ 0.8 & 1 \\ \end{bmatrix}</script><p>ç¬¬ä¸€å¹…å›¾è¿˜è·Ÿä¹‹å‰çš„æ ‡å‡†æ­£æ€åˆ†å¸ƒçš„æ ·å­å¾ˆç›¸ä¼¼ï¼Œç„¶åæˆ‘ä»¬å‘ç°éšç€å¢å¤§åæ–¹å·®çŸ©é˜µ$\Sigma$ çš„åå¯¹è§’çº¿ï¼ˆoff-diagonalï¼‰çš„å€¼ï¼Œå¯†åº¦å›¾åƒå¼€å§‹æœç€  45Â° æ–¹å‘ (ä¹Ÿå°±æ˜¯ $x_1 = x_2$ æ‰€åœ¨çš„æ–¹å‘)é€æ¸å‹ç¼©ï¼ˆcompressedï¼‰ã€‚  çœ‹ä¸€ä¸‹ä¸‰ä¸ªåŒæ ·åˆ†å¸ƒå¯†åº¦å›¾çš„è½®å»“å›¾ï¼ˆcontoursï¼‰èƒ½çœ‹å¾—æ›´æ˜æ˜¾ï¼š</p><p><img src="https://raw.githubusercontent.com/Kivy-CN/Stanford-CS-229-CN/master/img/cs229note2f3.png" alt></p><p>ä¸‹é¢çš„æ˜¯å¦å¤–ä¸€ç»„æ ·ä¾‹ï¼Œè°ƒæ•´äº†åæ–¹å·®çŸ©é˜µ$\Sigma$:</p><script type="math/tex; mode=display">\Sigma =\begin{bmatrix} 1 & 0.5 \\ 0.5 & 1 \\ \end{bmatrix};\Sigma =\begin{bmatrix} 1 & 0.8 \\ 0.8 & 1 \\ \end{bmatrix}\Sigma =\begin{bmatrix} 3 & 0.8 \\ 0.8 & 1 \\ \end{bmatrix};</script><p>ä¸Šé¢è¿™ä¸‰ä¸ªå›¾åƒå¯¹åº”çš„åæ–¹å·®çŸ©é˜µåˆ†åˆ«å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://raw.githubusercontent.com/Kivy-CN/Stanford-CS-229-CN/master/img/cs229note2f4.png" alt></p><p>ä»æœ€å·¦è¾¹çš„åˆ°ä¸­é—´<code>è¯‘è€…æ³¨ï¼šæ³¨æ„ï¼Œå·¦è¾¹å’Œä¸­é—´çš„è¿™ä¸¤ä¸ªåæ–¹å·®çŸ©é˜µä¸­ï¼Œå³ä¸Šå’Œå·¦ä¸‹çš„å…ƒç´ éƒ½æ˜¯è´Ÿå€¼ï¼</code>å¾ˆæ˜æ˜¾éšç€åæ–¹å·®çŸ©é˜µä¸­å³ä¸Šå·¦ä¸‹è¿™ä¸ªå¯¹è§’çº¿æ–¹å‘å…ƒç´ çš„å€¼çš„é™ä½ï¼Œå›¾åƒè¿˜æ˜¯åˆè¢«å‹æ‰äº†ï¼ˆcompressedï¼‰ï¼Œåªæ˜¯æ–¹å‘æ˜¯åæ–¹å‘çš„ã€‚æœ€åï¼Œéšç€æˆ‘ä»¬ä¿®æ”¹å‚æ•°ï¼Œé€šå¸¸ç”Ÿæˆçš„è½®å»“å›¾ï¼ˆcontoursï¼‰éƒ½æ˜¯æ¤­åœ†ï¼ˆæœ€å³è¾¹çš„å›¾å°±æ˜¯ä¸€ä¸ªä¾‹å­ï¼‰ã€‚</p><p>å†ä¸¾ä¸€äº›ä¾‹å­ï¼Œå›ºå®šåæ–¹å·®çŸ©é˜µä¸ºå•ä½çŸ©é˜µï¼Œå³$\Sigma = I$ï¼Œç„¶åè°ƒæ•´å‡å€¼$\mu$ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®©å¯†åº¦å›¾åƒéšç€å‡å€¼è€Œç§»åŠ¨ï¼š</p><p><img src="https://raw.githubusercontent.com/Kivy-CN/Stanford-CS-229-CN/master/img/cs229note2f5.png" alt></p><p>ä¸Šé¢çš„å›¾åƒä¸­åæ–¹å·®çŸ©é˜µéƒ½æ˜¯å•ä½çŸ©é˜µï¼Œå³ $\Sigma = I$ï¼Œå¯¹åº”çš„å‡å€¼$\mu$å¦‚ä¸‹æ‰€ç¤ºï¼š</p><script type="math/tex; mode=display">\mu =\begin{bmatrix} 1 \\ 0 \\ \end{bmatrix};\mu =\begin{bmatrix} -0.5 \\ 0 \\ \end{bmatrix};\mu =\begin{bmatrix} -1 \\ -1.5 \\ \end{bmatrix};</script><h5 id="1-2-é«˜æ–¯åˆ¤åˆ«åˆ†ææ¨¡å‹ï¼ˆGaussian-Discriminant-Analysis-modelï¼‰"><a href="#1-2-é«˜æ–¯åˆ¤åˆ«åˆ†ææ¨¡å‹ï¼ˆGaussian-Discriminant-Analysis-modelï¼‰" class="headerlink" title="1.2 é«˜æ–¯åˆ¤åˆ«åˆ†ææ¨¡å‹ï¼ˆGaussian Discriminant Analysis modelï¼‰"></a>1.2 é«˜æ–¯åˆ¤åˆ«åˆ†ææ¨¡å‹ï¼ˆGaussian Discriminant Analysis modelï¼‰</h5><p>å‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªåˆ†ç±»é—®é¢˜ï¼Œå…¶ä¸­è¾“å…¥ç‰¹å¾ $x$ æ˜¯ä¸€ç³»åˆ—çš„è¿ç»­éšæœºå˜é‡ï¼ˆcontinuous-valued random variablesï¼‰ï¼Œé‚£å°±å¯ä»¥ä½¿ç”¨é«˜æ–¯åˆ¤åˆ«åˆ†æï¼ˆGaussian Discriminant Analysis ï¼Œç¼©å†™ä¸º GDAï¼‰æ¨¡å‹ï¼Œå…¶ä¸­å¯¹ $p(x|y)$ç”¨å¤šå…ƒæ­£æ€åˆ†å¸ƒæ¥è¿›è¡Œå»ºæ¨¡ã€‚è¿™ä¸ªæ¨¡å‹ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}y & \sim Bernoulli(\phi)\\x|y = 0 & \sim N(\mu_o,\Sigma)\\x|y = 1 & \sim N(\mu_1,\Sigma)\\\end{aligned}</script><p>åˆ†å¸ƒå†™å‡ºæ¥çš„å…·ä½“å½¢å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\begin{aligned}p(y) & =\phi^y (1-\phi)^{1-y}\\p(x|y=0) & = \frac{1}{(2\pi)^{n/2}|\Sigma|^{1/2}} exp ( - \frac{1}{2}(x-\mu_0)^T\Sigma^{-1}(x-\mu_0)  )\\p(x|y=1) & = \frac{1}{(2\pi)^{n/2}|\Sigma|^{1/2}} exp ( - \frac{1}{2}(x-\mu_1)^T\Sigma^{-1}(x-\mu_1)  )\\\end{aligned}</script><p>åœ¨ä¸Šé¢çš„ç­‰å¼ä¸­ï¼Œæ¨¡å‹çš„å‚æ•°åŒ…æ‹¬$\phi, \Sigma, \mu_0 å’Œ \mu_1$ã€‚ï¼ˆè¦æ³¨æ„ï¼Œè™½ç„¶è¿™é‡Œæœ‰ä¸¤ä¸ªä¸åŒæ–¹å‘çš„å‡å€¼å‘é‡$\mu_0$ å’Œ $\mu_1$ï¼Œé’ˆå¯¹è¿™ä¸ªæ¨¡å‹è¿˜æ˜¯ä¸€èˆ¬åªæ˜¯ç”¨ä¸€ä¸ªåæ–¹å·®çŸ©é˜µ$\Sigma$ã€‚ï¼‰å–å¯¹æ•°çš„ä¼¼ç„¶å‡½æ•°ï¼ˆlog-likelihoodï¼‰å¦‚ä¸‹æ‰€ç¤ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}l(\phi,\mu_0,\mu_1,\Sigma) &= \log \prod^m_{i=1}p(x^{(i)},y^{(i)};\phi,\mu_0,\mu_1,\Sigma)\\&= \log \prod^m_{i=1}p(x^{(i)}|y^{(i)};\mu_0,\mu_1,\Sigma)p(y^{(i)};\phi)\\\end{aligned}</script><p>é€šè¿‡ä½¿ $l$ å–å¾—æœ€å¤§å€¼ï¼Œæ‰¾åˆ°å¯¹åº”çš„å‚æ•°ç»„åˆï¼Œç„¶åå°±èƒ½æ‰¾åˆ°è¯¥å‚æ•°ç»„åˆå¯¹åº”çš„æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼ˆå‚è€ƒä¹ é¢˜é›†1ï¼‰ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\phi & = \frac {1}{m} \sum^m_{i=1}1\{y^{(i)}=1\}\\\mu_0 & = \frac{\sum^m_{i=1}1\{y^{(i)}=0\}x^{(i)}}{\sum^m_{i=1}1\{y^{(i)}=0\}}\\\mu_1 & = \frac{\sum^m_{i=1}1\{y^{(i)}=1\}x^{(i)}}{\sum^m_{i=1}1\{y^{(i)}=1\}}\\\Sigma & = \frac{1}{m}\sum^m_{i=1}(x^{(i)}-\mu_{y^{(i)}})(x^{(i)}-\mu_{y^{(i)}})^T\\\end{aligned}</script><p>ç”¨å›¾å½¢åŒ–çš„æ–¹å¼æ¥è¡¨è¿°ï¼Œè¿™ä¸ªç®—æ³•å¯ä»¥æŒ‰ç…§ä¸‹é¢çš„å›¾ç¤ºæ‰€è¡¨ç¤ºï¼š</p><p><img src="https://raw.githubusercontent.com/Kivy-CN/Stanford-CS-229-CN/master/img/cs229note2f6.png" alt></p><p>å›¾ä¸­å±•ç¤ºçš„ç‚¹å°±æ˜¯è®­ç»ƒæ•°æ®é›†ï¼Œå›¾ä¸­çš„ä¸¤ä¸ªé«˜æ–¯åˆ†å¸ƒå°±æ˜¯é’ˆå¯¹ä¸¤ç±»æ•°æ®å„è‡ªè¿›è¡Œçš„æ‹Ÿåˆã€‚è¦æ³¨æ„è¿™ä¸¤ä¸ªé«˜æ–¯åˆ†å¸ƒçš„è½®å»“å›¾æœ‰åŒæ ·çš„å½¢çŠ¶å’Œæ‹‰ä¼¸æ–¹å‘ï¼Œè¿™æ˜¯å› ä¸ºä»–ä»¬éƒ½æœ‰åŒæ ·çš„åæ–¹å·®çŸ©é˜µ$\Sigma$ï¼Œä½†ä»–ä»¬æœ‰ä¸åŒçš„å‡å€¼$\mu_0$ å’Œ $\mu_1$ ã€‚æ­¤å¤–ï¼Œå›¾ä¸­çš„ç›´çº¿ç»™å‡ºäº†$p (y = 1|x) = 0.5$ è¿™æ¡è¾¹ç•Œçº¿ã€‚åœ¨è¿™æ¡è¾¹ç•Œçš„ä¸€ä¾§ï¼Œæˆ‘ä»¬é¢„æµ‹ $y = 1$æ˜¯æœ€å¯èƒ½çš„ç»“æœï¼Œè€Œå¦ä¸€ä¾§ï¼Œå°±é¢„æµ‹ $y = 0$æ˜¯æœ€å¯èƒ½çš„ç»“æœã€‚</p><h5 id="1-3-è®¨è®ºï¼šé«˜æ–¯åˆ¤åˆ«åˆ†æï¼ˆGDAï¼‰ä¸é€»è¾‘å›å½’ï¼ˆlogistic-regressionï¼‰"><a href="#1-3-è®¨è®ºï¼šé«˜æ–¯åˆ¤åˆ«åˆ†æï¼ˆGDAï¼‰ä¸é€»è¾‘å›å½’ï¼ˆlogistic-regressionï¼‰" class="headerlink" title="1.3 è®¨è®ºï¼šé«˜æ–¯åˆ¤åˆ«åˆ†æï¼ˆGDAï¼‰ä¸é€»è¾‘å›å½’ï¼ˆlogistic regressionï¼‰"></a>1.3 è®¨è®ºï¼šé«˜æ–¯åˆ¤åˆ«åˆ†æï¼ˆGDAï¼‰ä¸é€»è¾‘å›å½’ï¼ˆlogistic regressionï¼‰</h5><p>é«˜æ–¯åˆ¤åˆ«åˆ†ææ¨¡å‹ä¸é€»è¾‘å›å½’æœ‰å¾ˆæœ‰è¶£çš„ç›¸å…³æ€§ã€‚å¦‚æœæˆ‘ä»¬æŠŠå˜é‡ï¼ˆquantityï¼‰$p (y = 1|x; \phi, \mu_0, \mu_1, \Sigma)$ ä½œä¸ºä¸€ä¸ª $x$ çš„å‡½æ•°ï¼Œå°±ä¼šå‘ç°å¯ä»¥ç”¨å¦‚ä¸‹çš„å½¢å¼æ¥è¡¨è¾¾ï¼š</p><script type="math/tex; mode=display">p(y=1|x;\phi,\Sigma,\mu_0,\mu_1)=\frac 1 {1+exp(-\theta^Tx)}</script><p>å…¶ä¸­çš„  $\theta$  æ˜¯å¯¹$\phi$, $\Sigma$, $\mu_0$, $\mu_1$çš„æŸç§å‡½æ•°ã€‚è¿™å°±æ˜¯é€»è¾‘å›å½’ï¼ˆä¹Ÿæ˜¯ä¸€ç§åˆ¤åˆ«åˆ†æç®—æ³•ï¼‰ç”¨æ¥å¯¹$p (y = 1|x)$ å»ºæ¨¡çš„å½¢å¼ã€‚</p><blockquote><p>æ³¨ï¼šä¸Šé¢è¿™é‡Œç”¨åˆ°äº†ä¸€ç§è½¬æ¢ï¼Œå°±æ˜¯é‡æ–°å¯¹$x^{(i)}$å‘é‡è¿›è¡Œäº†å®šä¹‰ï¼Œåœ¨å³æ‰‹ä¾§ï¼ˆright-hand-sideï¼‰å¢åŠ äº†ä¸€ä¸ªé¢å¤–çš„åæ ‡$x_0^{(i)} = 1$ï¼Œç„¶åä½¿ä¹‹æˆä¸ºäº†ä¸€ä¸ª $n+1$ç»´çš„å‘é‡ï¼›å…·ä½“å†…å®¹å‚è€ƒä¹ é¢˜é›†1ã€‚</p></blockquote><p>è¿™ä¸¤ä¸ªæ¨¡å‹ä¸­ä»€ä¹ˆæ—¶å€™è¯¥é€‰å“ªä¸€ä¸ªå‘¢ï¼Ÿä¸€èˆ¬æ¥è¯´ï¼Œé«˜æ–¯åˆ¤åˆ«åˆ†æï¼ˆGDAï¼‰å’Œé€»è¾‘å›å½’ï¼Œå¯¹åŒä¸€ä¸ªè®­ç»ƒé›†ï¼Œå¯èƒ½ç»™å‡ºçš„åˆ¤åˆ«æ›²çº¿æ˜¯ä¸ä¸€æ ·çš„ã€‚å“ªä¸€ä¸ªæ›´å¥½äº›å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬åˆšåˆšå·²ç»è¡¨æ˜ï¼Œå¦‚æœ$p(x|y)$æ˜¯ä¸€ä¸ªå¤šå˜é‡çš„é«˜æ–¯åˆ†å¸ƒï¼ˆä¸”å…·æœ‰ä¸€ä¸ªå…±äº«çš„åæ–¹å·®çŸ©é˜µ$\Sigma$ï¼‰ï¼Œé‚£ä¹ˆ$p(y|x)$åˆ™å¿…ç„¶ç¬¦åˆä¸€ä¸ªé€»è¾‘å‡½æ•°ï¼ˆlogistic functionï¼‰ã€‚ç„¶è€Œï¼Œåè¿‡æ¥ï¼Œè¿™ä¸ªå‘½é¢˜æ˜¯ä¸æˆç«‹çš„ã€‚ä¾‹å¦‚å‡å¦‚$p(y|x)$æ˜¯ä¸€ä¸ªé€»è¾‘å‡½æ•°ï¼Œè¿™å¹¶ä¸èƒ½ä¿è¯$p(x|y)$ä¸€å®šæ˜¯ä¸€ä¸ªå¤šå˜é‡çš„é«˜æ–¯åˆ†å¸ƒã€‚è¿™å°±è¡¨æ˜<strong>é«˜æ–¯åˆ¤åˆ«æ¨¡å‹èƒ½æ¯”é€»è¾‘å›å½’å¯¹æ•°æ®è¿›è¡Œæ›´å¼ºçš„å»ºæ¨¡å’Œå‡è®¾ï¼ˆstronger modeling assumptionsï¼‰ã€‚</strong> è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œ<strong>åœ¨è¿™ä¸¤ç§æ¨¡å‹å‡è®¾éƒ½å¯ç”¨çš„æ—¶å€™ï¼Œé«˜æ–¯åˆ¤åˆ«åˆ†ææ³•å»æ‹Ÿåˆæ•°æ®æ˜¯æ›´å¥½çš„ï¼Œæ˜¯ä¸€ä¸ªæ›´å¥½çš„æ¨¡å‹ã€‚</strong> å°¤å…¶å½“$p(x|y)$å·²ç»ç¡®å®šæ˜¯ä¸€ä¸ªé«˜æ–¯åˆ†å¸ƒï¼ˆæœ‰å…±äº«çš„åæ–¹å·®çŸ©é˜µ$\Sigma$ï¼‰ï¼Œé‚£ä¹ˆé«˜æ–¯åˆ¤åˆ«åˆ†ææ˜¯<strong>æ¸è¿›æœ‰æ•ˆçš„ï¼ˆasymptotically efficientï¼‰ã€‚</strong> å®é™…ä¸Šï¼Œè¿™ä¹Ÿæ„å‘³ç€ï¼Œåœ¨é¢å¯¹éå¸¸å¤§çš„è®­ç»ƒé›†ï¼ˆè®­ç»ƒæ ·æœ¬è§„æ¨¡ $m $ç‰¹åˆ«å¤§ï¼‰çš„æ—¶å€™ï¼Œä¸¥æ ¼æ¥è¯´ï¼Œå¯èƒ½å°±æ²¡æœ‰ä»€ä¹ˆåˆ«çš„ç®—æ³•èƒ½æ¯”é«˜æ–¯åˆ¤åˆ«åˆ†ææ›´å¥½ï¼ˆæ¯”å¦‚è€ƒè™‘åˆ°å¯¹ $p(y|x)$ä¼°è®¡çš„å‡†ç¡®åº¦ç­‰ç­‰ï¼‰ã€‚æ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹å°±è¡¨æ˜ï¼Œé«˜æ–¯åˆ¤åˆ«åˆ†æï¼ˆGDAï¼‰æ˜¯ä¸€ä¸ªæ¯”é€»è¾‘å›å½’æ›´å¥½çš„ç®—æ³•ï¼›å†æ‰©å±•ä¸€ä¸‹ï¼Œå³ä¾¿å¯¹äºå°è§„æ¨¡çš„è®­ç»ƒé›†ï¼Œæˆ‘ä»¬æœ€ç»ˆä¹Ÿä¼šå‘ç°é«˜æ–¯åˆ¤åˆ«åˆ†æï¼ˆGDAï¼‰æ˜¯æ›´å¥½çš„ã€‚</p><p>å¥ˆä½•äº‹æœ‰æ­£åï¼Œç”±äºé€»è¾‘å›å½’åšå‡ºçš„å‡è®¾è¦æ˜æ˜¾æ›´å¼±ä¸€äº›ï¼ˆsignificantly weakerï¼‰ï¼Œæ‰€ä»¥å› æ­¤é€»è¾‘å›å½’ç»™å‡ºçš„åˆ¤æ–­é²æ£’æ€§ï¼ˆrobustï¼‰ä¹Ÿæ›´å¼ºï¼ŒåŒæ—¶ä¹Ÿå¯¹é”™è¯¯çš„å»ºæ¨¡å‡è®¾ä¸é‚£ä¹ˆæ•æ„Ÿã€‚æœ‰å¾ˆå¤šä¸åŒçš„å‡è®¾é›†åˆéƒ½èƒ½å¤Ÿå°†$p(y|x)$å¼•å‘é€»è¾‘å›å½’å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ$x|y = 0\sim Poisson(\lambda_0)$ æ˜¯ä¸€ä¸ªæ³Šæ¾åˆ†å¸ƒï¼Œè€Œ$x|y = 1\sim Poisson(\lambda_1)$ä¹Ÿæ˜¯ä¸€ä¸ªæ³Šæ¾åˆ†å¸ƒï¼Œé‚£ä¹ˆ$p(y|x)$ä¹Ÿå°†æ˜¯é€‚åˆé€»è¾‘å›å½’çš„ï¼ˆlogisticï¼‰ã€‚é€»è¾‘å›å½’ä¹Ÿé€‚ç”¨äºè¿™ç±»çš„æ³Šæ¾åˆ†å¸ƒçš„æ•°æ®ã€‚ä½†å¯¹è¿™æ ·çš„æ•°æ®ï¼Œå¦‚æœæˆ‘ä»¬å¼ºè¡Œä½¿ç”¨é«˜æ–¯åˆ¤åˆ«åˆ†æï¼ˆGDAï¼‰ï¼Œç„¶åç”¨é«˜æ–¯åˆ†å¸ƒæ¥æ‹Ÿåˆè¿™äº›éé«˜æ–¯æ•°æ®ï¼Œé‚£ä¹ˆç»“æœçš„å¯é¢„æµ‹æ€§å°±ä¼šé™ä½ï¼Œè€Œä¸”GDAè¿™ç§æ–¹æ³•ä¹Ÿè®¸å¯è¡Œï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ä¸èƒ½ç”¨ã€‚</p><p>æ€»ç»“ä¸€ä¸‹ä¹Ÿå°±æ˜¯ï¼šé«˜æ–¯åˆ¤åˆ«åˆ†ææ–¹æ³•ï¼ˆGDAï¼‰èƒ½å¤Ÿå»ºç«‹æ›´å¼ºçš„æ¨¡å‹å‡è®¾ï¼Œå¹¶ä¸”åœ¨æ•°æ®åˆ©ç”¨ä¸Šæ›´åŠ æœ‰æ•ˆï¼ˆæ¯”å¦‚è¯´ï¼Œéœ€è¦æ›´å°‘çš„è®­ç»ƒé›†å°±èƒ½æœ‰â€è¿˜ä¸é”™çš„â€æ•ˆæœï¼‰ï¼Œå½“ç„¶å‰ææ˜¯æ¨¡å‹å‡è®¾äº‰å–æˆ–è€…è‡³å°‘æ¥è¿‘æ­£ç¡®ã€‚é€»è¾‘å›å½’å»ºç«‹çš„å‡è®¾æ›´å¼±ï¼Œå› æ­¤å¯¹äºåç¦»çš„æ¨¡å‹å‡è®¾æ¥è¯´æ›´åŠ é²æ£’ï¼ˆrobustï¼‰ã€‚ç„¶è€Œï¼Œå¦‚æœè®­ç»ƒé›†æ•°æ®çš„ç¡®æ˜¯éé«˜æ–¯åˆ†å¸ƒçš„ï¼ˆnon-Gaussianï¼‰ï¼Œè€Œä¸”æ˜¯æœ‰é™çš„å¤§è§„æ¨¡æ•°æ®ï¼ˆin the limit of large datasetsï¼‰ï¼Œé‚£ä¹ˆé€»è¾‘å›å½’å‡ ä¹æ€»æ˜¯æ¯”GDAè¦æ›´å¥½çš„ã€‚å› æ­¤ï¼Œåœ¨å®é™…ä¸­ï¼Œé€»è¾‘å›å½’çš„ä½¿ç”¨é¢‘ç‡è¦æ¯”GDAé«˜å¾—å¤šã€‚ï¼ˆå…³äºåˆ¤åˆ«å’Œç”Ÿæˆæ¨¡å‹çš„å¯¹æ¯”çš„ç›¸å…³è®¨è®ºä¹Ÿé€‚ç”¨äºæˆ‘ä»¬ä¸‹é¢è¦è®²çš„æœ´ç´ è´å¶æ–¯ç®—æ³•ï¼ˆNaive Bayesï¼‰ï¼Œä½†æœ´ç´ è´å¶æ–¯ç®—æ³•è¿˜æ˜¯è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€ä¹Ÿéå¸¸æµè¡Œçš„åˆ†ç±»ç®—æ³•ã€‚ï¼‰</p><h4 id="2-æœ´ç´ è´å¶æ–¯æ³•ï¼ˆNaive-Bayesï¼‰"><a href="#2-æœ´ç´ è´å¶æ–¯æ³•ï¼ˆNaive-Bayesï¼‰" class="headerlink" title="2 æœ´ç´ è´å¶æ–¯æ³•ï¼ˆNaive Bayesï¼‰"></a>2 æœ´ç´ è´å¶æ–¯æ³•ï¼ˆNaive Bayesï¼‰</h4><p>åœ¨é«˜æ–¯åˆ¤åˆ«åˆ†æï¼ˆGDAï¼‰æ–¹æ³•ä¸­ï¼Œç‰¹å¾å‘é‡ $x$ æ˜¯è¿ç»­çš„ï¼Œå€¼ä¸ºå®æ•°çš„å‘é‡ã€‚ä¸‹é¢æˆ‘ä»¬è¦è®²çš„æ˜¯å½“ $x_i$ æ˜¯ç¦»æ•£å€¼çš„æ—¶å€™æ¥ä½¿ç”¨çš„å¦å¤–ä¸€ç§å­¦ä¹ ç®—æ³•ã€‚</p><p>ä¸‹é¢å°±æ¥ç»§ç»­çœ‹ä¸€ä¸ªä¹‹å‰è§è¿‡çš„æ ·ä¾‹ï¼Œæ¥å°è¯•å»ºç«‹ä¸€ä¸ªé‚®ä»¶ç­›é€‰å™¨ï¼Œä½¿ç”¨æœºå™¨å­¦ä¹ çš„æ–¹æ³•ã€‚è¿™å›å’±ä»¬è¦æ¥å¯¹é‚®ä»¶ä¿¡æ¯è¿›è¡Œåˆ†ç±»ï¼Œæ¥åˆ¤æ–­æ˜¯å¦ä¸ºå•†ä¸šå¹¿å‘Šé‚®ä»¶ï¼ˆå°±æ˜¯åƒåœ¾é‚®ä»¶ï¼‰ï¼Œè¿˜æ˜¯éåƒåœ¾é‚®ä»¶ã€‚åœ¨å­¦ä¼šäº†æ€ä¹ˆå®ç°ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è®©é‚®ä»¶é˜…è¯»å™¨èƒ½å¤Ÿè‡ªåŠ¨å¯¹åƒåœ¾ä¿¡æ¯è¿›è¡Œè¿‡æ»¤ï¼Œæˆ–è€…å•ç‹¬æŠŠè¿™äº›åƒåœ¾é‚®ä»¶æ”¾è¿›ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å¤¹ä¸­ã€‚å¯¹é‚®ä»¶è¿›è¡Œåˆ†ç±»æ˜¯ä¸€ä¸ªæ¡ˆä¾‹ï¼Œå±äºæ–‡æœ¬åˆ†ç±»è¿™ä¸€æ›´å¹¿æ³›é—®é¢˜é›†åˆã€‚</p><p>å‡è®¾æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªè®­ç»ƒé›†ï¼ˆä¹Ÿå°±æ˜¯ä¸€å †å·²ç»æ ‡å¥½äº†æ˜¯å¦ä¸ºåƒåœ¾é‚®ä»¶çš„é‚®ä»¶ï¼‰ã€‚è¦æ„å»ºåƒåœ¾é‚®ä»¶åˆ†é€‰å™¨ï¼Œå’±ä»¬å…ˆè¦å¼€å§‹ç¡®å®šç”¨æ¥æè¿°ä¸€å°é‚®ä»¶çš„ç‰¹å¾$x_i$æœ‰å“ªäº›ã€‚</p><p>æˆ‘ä»¬å°†ç”¨ä¸€ä¸ªç‰¹å¾å‘é‡æ¥è¡¨ç¤ºä¸€å°é‚®ä»¶ï¼Œè¿™ä¸ªå‘é‡çš„é•¿åº¦ç­‰äºå­—å…¸ä¸­å•è¯çš„ä¸ªæ•°ã€‚å¦‚æœé‚®ä»¶ä¸­åŒ…å«äº†å­—å…¸ä¸­çš„ç¬¬ $i$ ä¸ªå•è¯ï¼Œé‚£ä¹ˆå°±ä»¤ $x_i = 1$ï¼›åä¹‹åˆ™$x_i = 0$ã€‚ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªå‘é‡ï¼š</p><script type="math/tex; mode=display">x=\begin{bmatrix}1\\0\\0\\\vdots \\1\\ \vdots \\0\end{bmatrix} \begin{matrix}\text{a}\\ \text{aardvark}\\ \text{aardwolf}\\ \vdots\\ \text{buy}\\ \vdots\\ \text{zygmurgy}\\ \end{matrix}</script><p>å°±ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªé‚®ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†ä¸¤ä¸ªå•è¯ â€œaâ€ å’Œ â€œbuyâ€ï¼Œä½†æ²¡æœ‰å•è¯ â€œaardvarkâ€ï¼Œ â€œaardwolfâ€ æˆ–è€… â€œzymurgyâ€  ã€‚è¿™ä¸ªå•è¯é›†åˆç¼–ç æ•´ç†æˆçš„ç‰¹å¾å‘é‡ä¹Ÿæˆä¸º<strong>è¯æ±‡è¡¨ï¼ˆvocabulary,ï¼‰ï¼Œ</strong> æ‰€ä»¥ç‰¹å¾å‘é‡ $x$ çš„ç»´åº¦å°±ç­‰äºè¯æ±‡è¡¨çš„é•¿åº¦ã€‚</p><blockquote><p>æ³¨ï¼šå®é™…åº”ç”¨ä¸­å¹¶ä¸éœ€è¦éå†æ•´ä¸ªè‹±è¯­è¯å…¸æ¥ç»„æˆæ‰€æœ‰è‹±è¯­å•è¯çš„åˆ—è¡¨ï¼Œå®è·µä¸­æ›´å¸¸ç”¨çš„æ–¹æ³•æ˜¯éå†ä¸€ä¸‹è®­ç»ƒé›†ï¼Œç„¶åæŠŠå‡ºç°è¿‡ä¸€æ¬¡ä»¥ä¸Šçš„å•è¯æ‰ç¼–ç æˆç‰¹å¾å‘é‡ã€‚è¿™æ ·åšé™¤äº†èƒ½å¤Ÿé™ä½æ¨¡å‹ä¸­å•è¯è¡¨çš„é•¿åº¦ä¹‹å¤–ï¼Œè¿˜èƒ½å¤Ÿé™ä½è¿ç®—é‡å’Œç©ºé—´å ç”¨ï¼Œæ­¤å¤–è¿˜æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯èƒ½å¤ŸåŒ…å«ä¸€äº›ä½ çš„é‚®ä»¶ä¸­å‡ºç°äº†è€Œè¯å…¸ä¸­æ²¡æœ‰çš„å•è¯ï¼Œæ¯”å¦‚æœ¬è¯¾ç¨‹çš„ç¼©å†™CS229ã€‚æœ‰æ—¶å€™ï¼ˆæ¯”å¦‚åœ¨ä½œä¸šé‡Œé¢ï¼‰ï¼Œè¿˜è¦æ’é™¤ä¸€äº›ç‰¹åˆ«é«˜é¢‘ç‡çš„è¯æ±‡ï¼Œæ¯”å¦‚åƒå† è¯theï¼Œä»‹è¯of å’Œand ç­‰ç­‰ï¼›è¿™äº›é«˜é¢‘ç‡ä½†æ˜¯æ²¡æœ‰å…·ä½“æ„ä¹‰çš„è™šè¯ä¹Ÿå«åšstop wordsï¼Œå› ä¸ºå¾ˆå¤šæ–‡æ¡£ä¸­éƒ½è¦æœ‰è¿™äº›è¯ï¼Œç”¨å®ƒä»¬ä¹ŸåŸºæœ¬ä¸èƒ½ç”¨æ¥åˆ¤å®šä¸€ä¸ªé‚®ä»¶æ˜¯å¦ä¸ºåƒåœ¾é‚®ä»¶ã€‚</p></blockquote><p>é€‰å¥½äº†ç‰¹å¾å‘é‡äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å»ºç«‹ä¸€ä¸ªç”Ÿæˆæ¨¡å‹ï¼ˆgenerative modelï¼‰ã€‚æ‰€ä»¥æˆ‘ä»¬å¿…é¡»å¯¹$p(x|y)$è¿›è¡Œå»ºæ¨¡ã€‚ä½†æ˜¯ï¼Œå‡å¦‚æˆ‘ä»¬çš„å•è¯æœ‰äº”ä¸‡ä¸ªè¯ï¼Œåˆ™ç‰¹å¾å‘é‡$x \in  {0, 1}^{50000}$ ï¼ˆå³ $x$æ˜¯ä¸€ä¸ª $50000$ ç»´çš„å‘é‡ï¼Œå…¶å€¼æ˜¯$0$æˆ–è€…$1$ï¼‰ï¼Œå¦‚æœæˆ‘ä»¬è¦å¯¹è¿™æ ·çš„ $x$è¿›è¡Œå¤šé¡¹å¼åˆ†å¸ƒçš„å»ºæ¨¡ï¼Œé‚£ä¹ˆå°±å¯èƒ½æœ‰$2^{50000}$ ç§å¯èƒ½çš„è¾“å‡ºï¼Œç„¶åå°±è¦ç”¨ä¸€ä¸ª $(2^{50000}-1)$ç»´çš„å‚æ•°å‘é‡ã€‚è¿™æ ·å‚æ•°æ˜æ˜¾å¤ªå¤šäº†ã€‚</p><p>è¦ç»™$p(x|y)$å»ºæ¨¡ï¼Œå…ˆæ¥åšä¸€ä¸ªéå¸¸å¼ºçš„å‡è®¾ã€‚æˆ‘ä»¬<strong>å‡è®¾ç‰¹å¾å‘é‡$x_i$ å¯¹äºç»™å®šçš„ $y$ æ˜¯ç‹¬ç«‹çš„ã€‚</strong> è¿™ä¸ªå‡è®¾ä¹Ÿå«åš<strong>æœ´ç´ è´å¶æ–¯å‡è®¾ï¼ˆNaive Bayes ï¼ŒNB assumptionï¼‰ï¼Œ</strong> åŸºäºæ­¤å‡è®¾è¡ç”Ÿçš„ç®—æ³•ä¹Ÿå°±å«åš<strong>æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨ï¼ˆNaive Bayes classifierï¼‰ã€‚</strong> ä¾‹å¦‚ï¼Œå¦‚æœ $y = 1$ æ„å‘³ç€ä¸€ä¸ªé‚®ä»¶æ˜¯åƒåœ¾é‚®ä»¶ï¼›ç„¶åå…¶ä¸­â€buyâ€ æ˜¯ç¬¬$2087$ä¸ªå•è¯ï¼Œè€Œ â€œpriceâ€æ˜¯ç¬¬$39831$ä¸ªå•è¯ï¼›é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å°±å‡è®¾ï¼Œå¦‚æœæˆ‘å‘Šè¯‰ä½  $y = 1$ï¼Œä¹Ÿå°±æ˜¯è¯´æŸä¸€ä¸ªç‰¹å®šçš„é‚®ä»¶æ˜¯åƒåœ¾é‚®ä»¶ï¼Œé‚£ä¹ˆå¯¹äº$x<em>{2087}$ ï¼ˆä¹Ÿå°±æ˜¯å•è¯ buy æ˜¯å¦å‡ºç°åœ¨é‚®ä»¶é‡Œï¼‰çš„äº†è§£å¹¶ä¸ä¼šå½±å“ä½ å¯¹$x</em>{39831}$ ï¼ˆå•è¯priceå‡ºç°çš„ä½ç½®ï¼‰çš„é‡‡ä¿¡å€¼ã€‚æ›´æ­£è§„ä¸€ç‚¹ï¼Œå¯ä»¥å†™æˆ $p(x<em>{2087}|y) = p(x</em>{2087}|y, x<em>{39831})$ã€‚ï¼ˆè¦æ³¨æ„è¿™ä¸ªå¹¶ä¸æ˜¯è¯´$x</em>{2087}$ å’Œ $x<em>{39831}$è¿™ä¸¤ä¸ªç‰¹å¾æ˜¯ç‹¬ç«‹çš„ï¼Œé‚£æ ·å°±å˜æˆäº†$p(x</em>{2087}) = p(x<em>{2087}|x</em>{39831})$ï¼Œæˆ‘ä»¬è¿™é‡Œæ˜¯è¯´åœ¨ç»™å®šäº† $y$ çš„è¿™æ ·ä¸€ä¸ªæ¡ä»¶ä¸‹ï¼ŒäºŒè€…æ‰æ˜¯æœ‰æ¡ä»¶çš„ç‹¬ç«‹ã€‚ï¼‰</p><p>ç„¶åæˆ‘ä»¬å°±å¾—åˆ°äº†ç­‰å¼ï¼š</p><script type="math/tex; mode=display">\begin{aligned}p(x_1, ..., x_{50000}|y) & = p(x_1|y)p(x_2|y,x_1)p(x_3|y,x_1,x_2) ... p(x_{50000}|y,x_1,x_2,...,x_{49999})\\& = p(x_1|y)p(x_2|y)p(x_3|y) ... p(x_{50000}|y)\\& = \prod^n_{i=1}p(x_i|y)\\\end{aligned}</script><p>ç¬¬ä¸€è¡Œçš„ç­‰å¼å°±æ˜¯ç®€å•åœ°æ¥è‡ªæ¦‚ç‡çš„åŸºæœ¬æ€§è´¨ï¼Œç¬¬äºŒä¸ªç­‰å¼åˆ™ä½¿ç”¨äº†æœ´ç´ è´å¶æ–¯å‡è®¾ã€‚è¿™é‡Œè¦æ³¨æ„ï¼Œæœ´ç´ è´å¶æ–¯å‡è®¾ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¼ºçš„å‡è®¾ï¼Œäº§ç”Ÿçš„è¿™ä¸ªç®—æ³•å¯ä»¥é€‚ç”¨äºå¾ˆå¤šç§é—®é¢˜ã€‚</p><p>æˆ‘ä»¬è¿™ä¸ªæ¨¡å‹çš„å‚æ•°ä¸º $\phi<em>{i|y=1} = p (x_i = 1|y = 1), \phi</em>{i|y=0} = p (x_i = 1|y = 0)$, è€Œ $\phi_y = p (y = 1)$ã€‚å’Œä»¥å¾€ä¸€æ ·ï¼Œç»™å®šä¸€ä¸ªè®­ç»ƒé›†${(x^{(i)},y^{(i)}); i = 1, â€¦, m}$ï¼Œå°±å¯ä»¥å†™å‡ºä¸‹é¢çš„è”åˆä¼¼ç„¶å‡½æ•°ï¼š</p><script type="math/tex; mode=display">\mathcal{L}(\phi_y,\phi_{j|y=0},\phi_{j|y=1})=\prod^m_{i=1}p(x^{(i)},y^{(i)})</script><p>æ‰¾åˆ°ä½¿è”åˆä¼¼ç„¶å‡½æ•°å–å¾—æœ€å¤§å€¼çš„å¯¹åº”å‚æ•°ç»„åˆ $\phi<em>y , \phi</em>{i|y=0} å’Œ \phi_{i|y=1}$ å°±ç»™å‡ºäº†æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\phi_{j|y=1} &=\frac{\sum^m_{i=1}1\{x_j^{(i)} =1 \wedge y^{(i)} =1\} }{\sum^m_{i=1}1\{y^{(i)} =1\}} \\\phi_{j|y=0} &= \frac{\sum^m_{i=1}1\{x_j^{(i)} =1 \wedge y^{(i)} =0\} }{\sum^m_{i=1}1\{y^{(i)} =0\}} \\\phi_{y} &= \frac{\sum^m_{i=1}1\{y^{(i)} =1\}}{m}\\\end{aligned}</script><p>åœ¨ä¸Šé¢çš„ç­‰å¼ä¸­ï¼Œâ€$\wedge$(and)â€è¿™ä¸ªç¬¦å·çš„æ„æ€æ˜¯é€»è¾‘â€å’Œâ€ã€‚è¿™äº›å‚æ•°æœ‰ä¸€ä¸ªéå¸¸è‡ªç„¶çš„è§£é‡Šã€‚ä¾‹å¦‚ $\phi_{j|y=1}$ æ­£æ˜¯å•è¯ $j$ å‡ºç°çš„é‚®ä»¶ä¸­åƒåœ¾é‚®ä»¶æ‰€å  $(y = 1)$ çš„æ¯”ä¾‹ã€‚</p><p>æ‹Ÿåˆå¥½äº†å…¨éƒ¨è¿™äº›å‚æ•°ä¹‹åï¼Œè¦å¯¹ä¸€ä¸ªæ–°æ ·æœ¬çš„ç‰¹å¾å‘é‡ $x$ è¿›è¡Œé¢„æµ‹ï¼Œåªè¦è¿›è¡Œå¦‚ä¸‹çš„ç®€å•åœ°è®¡ç®—ï¼š</p><script type="math/tex; mode=display">\begin{aligned}p(y=1|x)&=  \frac{p(x|y=1)p(y=1)}{p(x)}\\&= \frac{(\prod^n_{i=1}p(x_i|y=1))p(y=1)}{(\prod^n_{i=1}p(x_i|y=1))p(y=1)+  (\prod^n_{i=1}p(x_i|y=0))p(y=0)}  \\\end{aligned}</script><p>ç„¶åé€‰æ‹©æœ‰æœ€é«˜åéªŒæ¦‚ç‡çš„æ¦‚ç‡ã€‚</p><p>æœ€åæˆ‘ä»¬è¦æ³¨æ„ï¼Œåˆšåˆšæˆ‘ä»¬å¯¹æœ´ç´ è´å¶æ–¯ç®—æ³•çš„ä½¿ç”¨ä¸­ï¼Œç‰¹å¾å‘é‡ $x_i$ éƒ½æ˜¯äºŒå€¼åŒ–çš„ï¼Œå…¶å®ç‰¹å¾å‘é‡ä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªç¦»æ•£å€¼ï¼Œæ¯”å¦‚${1, 2, â€¦, k_i}$è¿™æ ·ä¹Ÿéƒ½æ˜¯å¯ä»¥çš„ã€‚è¿™æ—¶å€™åªéœ€è¦æŠŠå¯¹$p(x_i|y)$ çš„å»ºæ¨¡ä»ä¼¯åŠªåˆ©åˆ†å¸ƒæ”¹æˆå¤šé¡¹å¼åˆ†å¸ƒã€‚å®é™…ä¸Šï¼Œå³ä¾¿ä¸€äº›åŸå§‹çš„è¾“å…¥å€¼æ˜¯è¿ç»­å€¼ï¼ˆæ¯”å¦‚æˆ‘ä»¬ç¬¬ä¸€ä¸ªæ¡ˆä¾‹ä¸­çš„æˆ¿å±‹é¢ç§¯ï¼‰ï¼Œä¹Ÿå¯ä»¥è½¬æ¢æˆä¸€ä¸ªå°è§„æ¨¡çš„ç¦»æ•£å€¼çš„é›†åˆï¼Œç„¶åå†ä½¿ç”¨æœ´ç´ è´å¶æ–¯æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬ç”¨ç‰¹å¾å‘é‡ $x_i$ æ¥è¡¨ç¤ºä½æˆ¿é¢ç§¯ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŒ‰ç…§ä¸‹é¢æ‰€ç¤ºçš„æ–¹æ³•æ¥å¯¹è¿™ä¸€å˜é‡è¿›è¡Œç¦»æ•£åŒ–ï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:center">å±…ä½é¢ç§¯</th><th style="text-align:center">$&lt;400$</th><th style="text-align:center">$400-800$</th><th style="text-align:center">$800-1200$</th><th style="text-align:center">$1200-1600$</th><th style="text-align:center">$&gt;1600$</th></tr></thead><tbody><tr><td style="text-align:center">ç¦»æ•£å€¼ $x_i$</td><td style="text-align:center">$1$</td><td style="text-align:center">$2$</td><td style="text-align:center">$3$</td><td style="text-align:center">$4$</td><td style="text-align:center">$5$</td></tr></tbody></table></div><p>è¿™æ ·ï¼Œå¯¹äºä¸€ä¸ªé¢ç§¯ä¸º $890$ å¹³æ–¹è‹±å°ºçš„æˆ¿å±‹ï¼Œå°±å¯ä»¥æ ¹æ®ä¸Šé¢è¿™ä¸ªé›†åˆä¸­å¯¹åº”çš„å€¼æ¥æŠŠç‰¹å¾å‘é‡çš„è¿™ä¸€é¡¹çš„$x_i$å€¼è®¾ç½®ä¸º$3$ã€‚ç„¶åå°±å¯ä»¥ç”¨æœ´ç´ è´å¶æ–¯ç®—æ³•ï¼Œå¹¶ä¸”å°†$p(x_i|y)$ä½œä¸ºå¤šé¡¹å¼åˆ†å¸ƒæ¥è¿›è¡Œå»ºæ¨¡ï¼Œå°±éƒ½è·Ÿå‰é¢è®²è¿‡çš„å†…å®¹ä¸€æ ·äº†ã€‚å½“åŸç”Ÿçš„è¿ç»­å€¼çš„å±æ€§ä¸å¤ªå®¹æ˜“ç”¨ä¸€ä¸ªå¤šå…ƒæ­£æ€åˆ†å¸ƒæ¥è¿›è¡Œå»ºæ¨¡çš„æ—¶å€™ï¼Œå°†å…¶ç‰¹å¾å‘é‡ç¦»æ•£åŒ–ç„¶åä½¿ç”¨æœ´ç´ è´å¶æ–¯æ³•ï¼ˆNBï¼‰æ¥æ›¿ä»£é«˜æ–¯åˆ¤åˆ«åˆ†ææ³•ï¼ˆGDAï¼‰ï¼Œé€šå¸¸èƒ½å½¢æˆä¸€ä¸ªæ›´å¥½çš„åˆ†ç±»å™¨ã€‚</p><h5 id="2-1-æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ï¼ˆLaplace-smoothingï¼‰"><a href="#2-1-æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ï¼ˆLaplace-smoothingï¼‰" class="headerlink" title="2.1 æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ï¼ˆLaplace smoothingï¼‰"></a>2.1 æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ï¼ˆLaplace smoothingï¼‰</h5><p>åˆšåˆšè®²è¿‡çš„æœ´ç´ è´å¶æ–¯ç®—æ³•èƒ½å¤Ÿè§£å†³å¾ˆå¤šé—®é¢˜äº†ï¼Œä½†è¿˜èƒ½å¯¹è¿™ç§æ–¹æ³•è¿›è¡Œä¸€ç‚¹å°è°ƒæ•´æ¥è¿›ä¸€æ­¥æé«˜æ•ˆæœï¼Œå°¤å…¶æ˜¯åº”å¯¹æ–‡æœ¬åˆ†ç±»çš„æƒ…å†µã€‚æˆ‘ä»¬æ¥ç®€è¦è®¨è®ºä¸€ä¸‹ä¸€ä¸ªç®—æ³•å½“å‰çŠ¶æ€çš„ä¸€ä¸ªé—®é¢˜ï¼Œç„¶ååœ¨è®²ä¸€ä¸‹å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>è¿˜æ˜¯è€ƒè™‘åƒåœ¾é‚®ä»¶åˆ†ç±»çš„è¿‡ç¨‹ï¼Œè®¾æƒ³ä½ å­¦å®Œäº†CS229çš„è¯¾ç¨‹ï¼Œç„¶ååšäº†å¾ˆæ£’çš„ç ”ç©¶é¡¹ç›®ï¼Œä¹‹åä½ å†³å®šåœ¨$2003$å¹´$6$æœˆ<code>è¯‘è€…æ³¨ï¼šä½œè€…è¿™è®²ä¹‰ä¸€å®šå†™å¾—å¾ˆæ—©</code>æŠŠè‡ªå·±çš„ä½œå“æŠ•ç¨¿åˆ°NIPSä¼šè®®ï¼Œè¿™ä¸ªNIPSæ˜¯æœºå™¨å­¦ä¹ é¢†åŸŸçš„ä¸€ä¸ªé¡¶çº§ä¼šè®®ï¼Œé€’äº¤è®ºæ–‡çš„æˆªæ­¢æ—¥æœŸä¸€èˆ¬æ˜¯å…­æœˆæœ«åˆ°ä¸ƒæœˆåˆã€‚ä½ é€šè¿‡é‚®ä»¶æ¥å¯¹è¿™ä¸ªä¼šè®®è¿›è¡Œäº†è®¨è®ºï¼Œç„¶åä½ ä¹Ÿå¼€å§‹æ”¶åˆ°å¸¦æœ‰ nips å››ä¸ªå­—æ¯çš„ä¿¡æ¯ã€‚ä½†è¿™ä¸ªæ˜¯ä½ ç¬¬ä¸€ä¸ªNIPSè®ºæ–‡ï¼Œè€Œåœ¨æ­¤ä¹‹å‰ï¼Œä½ ä»æ¥æ²¡æœ‰æ¥åˆ°è¿‡ä»»ä½•å¸¦æœ‰ nips è¿™ä¸ªå•è¯çš„é‚®ä»¶ï¼›å°¤å…¶é‡è¦çš„æ˜¯ï¼Œnips è¿™ä¸ªå•è¯å°±ä»æ¥éƒ½æ²¡æœ‰å‡ºç°åœ¨ä½ çš„åƒåœ¾/æ­£å¸¸é‚®ä»¶è®­ç»ƒé›†é‡Œé¢ã€‚åŠ å…¥è¿™ä¸ª nips æ˜¯ä½ å­—å…¸ä¸­çš„ç¬¬$35000$ä¸ªå•è¯é‚£ä¹ˆä½ çš„æœ´ç´ è´å¶æ–¯åƒåœ¾é‚®ä»¶ç­›é€‰å™¨å°±è¦å¯¹å‚æ•°$\phi_{35000|y}$ è¿›è¡Œæœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}\phi_{35000|y=1} &=  \frac{\sum^m_{i=1}1\{x^{(i)}_{35000}=1 \wedge y^{(i)}=1  \}}{\sum^m_{i=1}1\{y^{(i)}=0\}}  &=0 \\\phi_{35000|y=0} &=  \frac{\sum^m_{i=1}1\{x^{(i)}_{35000}=1 \wedge y^{(i)}=0  \}}{\sum^m_{i=1}1\{y^{(i)}=0\}}  &=0 \\\end{aligned}</script><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå› ä¸ºä¹‹å‰ç¨‹åºä»æ¥æ²¡æœ‰åœ¨åˆ«çš„åƒåœ¾é‚®ä»¶æˆ–è€…æ­£å¸¸é‚®ä»¶çš„è®­ç»ƒæ ·æœ¬ä¸­çœ‹åˆ°è¿‡ nips è¿™ä¸ªè¯ï¼Œæ‰€ä»¥å®ƒå°±è®¤ä¸ºçœ‹åˆ°è¿™ä¸ªè¯å‡ºç°åœ¨è¿™ä¸¤ç§é‚®ä»¶ä¸­çš„æ¦‚ç‡éƒ½æ˜¯$0$ã€‚å› æ­¤å½“è¦å†³å®šä¸€ä¸ªåŒ…å« nips è¿™ä¸ªå•è¯çš„é‚®ä»¶æ˜¯å¦ä¸ºåƒåœ¾é‚®ä»¶çš„æ—¶å€™ï¼Œä»–å°±æ£€éªŒè¿™ä¸ªç±»çš„åéªŒæ¦‚ç‡ï¼Œç„¶åå¾—åˆ°äº†ï¼š</p><script type="math/tex; mode=display">\begin{aligned}p(y=1|x) &= \frac{ \prod^n_{i=1} p(x_i|y=1)p(y=1) }   {\prod^n_{i=1} p(x_i|y=1)p(y=1) +\prod^n_{i=1} p(x_i|y=1)p(y=0)    }\\&= \frac00\\\end{aligned}</script><p>è¿™æ˜¯å› ä¸ºå¯¹äºâ€  $\prod^n<em>{i=1} p(x_i|y)$â€ä¸­åŒ…å«äº†$p(x</em>{35000}|y) = 0$çš„éƒ½åŠ äº†èµ·æ¥ï¼Œä¹Ÿå°±è¿˜æ˜¯$0$ã€‚æ‰€ä»¥æˆ‘ä»¬çš„ç®—æ³•å¾—åˆ°çš„å°±æ˜¯ $\frac00$ï¼Œä¹Ÿå°±æ˜¯ä¸çŸ¥é“è¯¥åšå‡ºæ€ä¹ˆæ ·çš„é¢„æµ‹äº†ã€‚</p><p>ç„¶åè¿›ä¸€æ­¥æ‹“å±•ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼Œç»Ÿè®¡å­¦ä¸Šæ¥è¯´ï¼Œåªå› ä¸ºä½ åœ¨è‡ªå·±ä»¥å‰çš„æœ‰é™çš„è®­ç»ƒæ•°æ®é›†ä¸­æ²¡è§åˆ°è¿‡ä¸€ä»¶äº‹ï¼Œå°±ä¼°è®¡è¿™ä¸ªäº‹ä»¶çš„æ¦‚ç‡ä¸ºé›¶ï¼Œè¿™æ˜æ˜¾ä¸æ˜¯ä¸ªå¥½ä¸»æ„ã€‚å‡è®¾é—®é¢˜æ˜¯ä¼°è®¡ä¸€ä¸ªå¤šé¡¹å¼éšæœºå˜é‡ $z$ ï¼Œå…¶å–å€¼èŒƒå›´åœ¨${1,â€¦, k}$ä¹‹å†…ã€‚æ¥ä¸‹æ¥å°±å¯ä»¥ç”¨$\phi_i = p (z = i)$ æ¥ä½œä¸ºå¤šé¡¹å¼å‚æ•°ã€‚ç»™å®šä¸€ä¸ª $m$ ä¸ªç‹¬ç«‹è§‚æµ‹${z^{(1)}, â€¦, z^{(m)}}$ ç»„æˆçš„é›†åˆï¼Œç„¶åæœ€å¤§ä¼¼ç„¶ä¼°è®¡çš„å½¢å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\phi_j=\frac{\sum^m_{i=1}1\{z^{(i)}=j\}}m</script><p>æ­£å¦‚å’±ä»¬ä¹‹å‰è§åˆ°çš„ï¼Œå¦‚æœæˆ‘ä»¬ç”¨è¿™äº›æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼Œé‚£ä¹ˆä¸€äº›$\phi_j$å¯èƒ½æœ€ç»ˆå°±æ˜¯é›¶äº†ï¼Œè¿™å°±æ˜¯ä¸ªé—®é¢˜äº†ã€‚è¦é¿å…è¿™ä¸ªæƒ…å†µï¼Œå’±ä»¬å°±å¯ä»¥å¼•å…¥<strong>æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ï¼ˆLaplace smoothingï¼‰ï¼Œ</strong> è¿™ç§æ–¹æ³•æŠŠä¸Šé¢çš„ä¼°è®¡æ›¿æ¢æˆï¼š</p><script type="math/tex; mode=display">\phi_j=\frac{\sum^m_{i=1}1\{z^{(i)}=j\}+1}{m+k}</script><p>è¿™é‡Œé¦–å…ˆæ˜¯å¯¹åˆ†å­åŠ $1$ï¼Œç„¶åå¯¹åˆ†æ¯åŠ $k$ï¼Œè¦æ³¨æ„$\sum^k_{j=1} \phi_j = 1$ä¾ç„¶æˆç«‹ï¼ˆè‡ªå·±æ£€éªŒä¸€ä¸‹ï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªå¿…é¡»æœ‰çš„æ€§è´¨ï¼Œå› ä¸º$\phi_j$ æ˜¯å¯¹æ¦‚ç‡çš„ä¼°è®¡ï¼Œç„¶åæ‰€æœ‰çš„æ¦‚ç‡åŠ åˆ°ä¸€èµ·å¿…ç„¶ç­‰äº$1$ã€‚å¦å¤–å¯¹äºæ‰€æœ‰çš„ $j$ å€¼ï¼Œéƒ½æœ‰$\phi_j \neq 0$ï¼Œè¿™å°±è§£å†³äº†åˆšåˆšçš„æ¦‚ç‡ä¼°è®¡ä¸ºé›¶çš„é—®é¢˜äº†ã€‚åœ¨æŸäº›ç‰¹å®šçš„æ¡ä»¶ä¸‹ï¼ˆç›¸å½“å¼ºçš„å‡è®¾æ¡ä»¶ä¸‹ï¼Œarguably quite strongï¼‰ï¼Œå¯ä»¥å‘ç°æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘è¿˜çœŸèƒ½ç»™å‡ºå¯¹å‚æ•°$\phi_j$ çš„æœ€ä½³ä¼°è®¡ï¼ˆoptimal estimatorï¼‰ã€‚</p><p>å›åˆ°æˆ‘ä»¬çš„æœ´ç´ è´å¶æ–¯åˆ†é€‰å™¨é—®é¢˜ä¸Šï¼Œä½¿ç”¨äº†æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ä¹‹åï¼Œå¯¹å‚æ•°çš„ä¼°è®¡å°±å†™æˆäº†ä¸‹é¢çš„å½¢å¼ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\phi_{j|y=1} & =\frac{\sum^m_{i=1}1\{x_j^{(i)}=1\wedge y ^{(i)}=1\}+1}{\sum^m_{i=1}1{\{y^{(i)}=1\}}+2}\\\phi_{j|y=0} & =\frac{\sum^m_{i=1}1\{x_j^{(i)}=1\wedge y ^{(i)}=10\}+1}{\sum^m_{i=1}1{\{y^{(i)}=0\}}+2}\\\end{aligned}</script><p>ï¼ˆåœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸æ˜¯å¦å¯¹$\phi_y$ ä½¿ç”¨æ‹‰æ™®æ‹‰æ–¯å¹¶æ²¡æœ‰å¤ªå¤§å½±å“ï¼Œå› ä¸ºé€šå¸¸æˆ‘ä»¬ä¼šå¯¹æ¯ä¸ªåƒåœ¾é‚®ä»¶å’Œéåƒåœ¾é‚®ä»¶éƒ½æœ‰ä¸€ä¸ªåˆé€‚çš„åˆ’åˆ†æ¯”ä¾‹ï¼Œæ‰€ä»¥$\phi_y$ ä¼šæ˜¯å¯¹$p(y = 1)$ çš„ä¸€ä¸ªåˆç†ä¼°è®¡ï¼Œæ— è®ºå¦‚ä½•éƒ½ä¼šä¸é›¶ç‚¹æœ‰ä¸€å®šè·ç¦»ã€‚ï¼‰</p><h5 id="2-2-é’ˆå¯¹æ–‡æœ¬åˆ†ç±»çš„äº‹ä»¶æ¨¡å‹ï¼ˆEvent-models-for-text-classificationï¼‰"><a href="#2-2-é’ˆå¯¹æ–‡æœ¬åˆ†ç±»çš„äº‹ä»¶æ¨¡å‹ï¼ˆEvent-models-for-text-classificationï¼‰" class="headerlink" title="2.2 é’ˆå¯¹æ–‡æœ¬åˆ†ç±»çš„äº‹ä»¶æ¨¡å‹ï¼ˆEvent models for text classificationï¼‰"></a>2.2 é’ˆå¯¹æ–‡æœ¬åˆ†ç±»çš„äº‹ä»¶æ¨¡å‹ï¼ˆEvent models for text classificationï¼‰</h5><p>åˆ°è¿™é‡Œå°±è¦ç»™å’±ä»¬å…³äºç”Ÿæˆå­¦ä¹ ç®—æ³•çš„è®¨è®ºè¿›è¡Œä¸€ä¸‹æ”¶å°¾äº†ï¼Œæ‰€ä»¥å°±æ¥ç€è®²ä¸€ç‚¹å…³äºæ–‡æœ¬åˆ†ç±»æ–¹é¢çš„å¦ä¸€ä¸ªæ¨¡å‹ã€‚æˆ‘ä»¬åˆšå·²ç»æ¼”ç¤ºè¿‡çš„æœ´ç´ è´å¶æ–¯æ–¹æ³•èƒ½å¤Ÿè§£å†³å¾ˆå¤šåˆ†ç±»é—®é¢˜äº†ï¼Œä¸è¿‡è¿˜æœ‰å¦ä¸€ä¸ªç›¸å…³çš„ç®—æ³•ï¼Œåœ¨é’ˆå¯¹æ–‡æœ¬çš„åˆ†ç±»æ•ˆæœè¿˜è¦æ›´å¥½ã€‚</p><p>åœ¨é’ˆå¯¹æ–‡æœ¬è¿›è¡Œåˆ†ç±»çš„ç‰¹å®šèƒŒæ™¯ä¸‹ï¼Œå’±ä»¬ä¸Šé¢è®²çš„æœ´ç´ è´å¶æ–¯æ–¹æ³•ä½¿ç”¨çš„æ˜¯ä¸€ç§å«åš<strong>å¤šå…ƒä¼¯åŠªåˆ©äº‹ä»¶æ¨¡å‹ï¼ˆMulti-Variate Bernoulli event modelï¼‰ã€‚</strong> åœ¨è¿™ä¸ªæ¨¡å‹é‡Œé¢ï¼Œæˆ‘ä»¬å‡è®¾é‚®ä»¶å‘é€çš„æ–¹å¼ï¼Œæ˜¯éšæœºç¡®å®šçš„ï¼ˆæ ¹æ®å…ˆéªŒç±»<em>class priors</em>ï¼Œ $p(y)$ï¼‰ï¼Œæ— è®ºæ˜¯ä¸æ˜¯åƒåœ¾é‚®ä»¶å‘é€è€…ï¼Œä»–æ˜¯å¦ç»™ä½ å‘ä¸‹ä¸€å°é‚®ä»¶éƒ½æ˜¯éšæœºå†³å®šçš„ã€‚é‚£ä¹ˆå‘ä»¶äººå°±ä¼šéå†è¯å…¸ï¼Œå†³å®šåœ¨é‚®ä»¶ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå•è¯ $i$ï¼Œå„ä¸ªå•è¯ä¹‹é—´äº’ç›¸ç‹¬ç«‹ï¼Œå¹¶ä¸”æœä»æ¦‚ç‡åˆ†å¸ƒ$p(x<em>i=1|y)=\phi</em>{i|y}$ã€‚å› æ­¤ï¼Œä¸€æ¡æ¶ˆæ¯çš„æ¦‚ç‡ä¸ºï¼š$p(y)\prod^n_{i-1}p(x_i|y)$</p><p> ç„¶åè¿˜æœ‰å¦å¤–ä¸€ä¸ªæ¨¡å‹ï¼Œå«åš<strong>å¤šé¡¹å¼äº‹ä»¶æ¨¡å‹ï¼ˆMultinomial event modelï¼‰ã€‚</strong> è¦æè¿°è¿™ä¸ªæ¨¡å‹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€ä¸ªä¸åŒçš„è®°å·å’Œç‰¹å¾é›†æ¥è¡¨å¾å„ç§é‚®ä»¶ã€‚è®¾ $x_i$ è¡¨ç¤ºå•è¯ä¸­çš„ç¬¬$i$ä¸ªå•è¯ã€‚å› æ­¤ï¼Œ$x_i$ç°åœ¨å°±æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå–å€¼èŒƒå›´ä¸º${1,â€¦,|V|}$ï¼Œè¿™é‡Œçš„$|V|$æ˜¯è¯æ±‡åˆ—è¡¨ï¼ˆå³å­—å…¸ï¼‰çš„é•¿åº¦ã€‚è¿™æ ·ä¸€ä¸ªæœ‰ $n$ ä¸ªå•è¯çš„é‚®ä»¶å°±å¯ä»¥è¡¨å¾ä¸ºä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„å‘é‡$(x_1,x_2,â€¦,x_n)$ï¼›è¿™é‡Œè¦æ³¨æ„ï¼Œä¸åŒçš„é‚®ä»¶å†…å®¹ï¼Œ$n$ çš„å–å€¼å¯ä»¥æ˜¯ä¸åŒçš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªé‚®ä»¶çš„å¼€å¤´æ˜¯â€A NIPS . . .â€ ï¼Œé‚£ä¹ˆ$x_1 = 1$ (â€œaâ€ æ˜¯è¯å…¸ä¸­çš„ç¬¬ä¸€ä¸ª)ï¼Œè€Œ$x_2 = 35000$ (è¿™æ˜¯å‡è®¾ â€œnipsâ€æ˜¯è¯å…¸ä¸­çš„ç¬¬35000ä¸ª)ã€‚</p><p>åœ¨å¤šé¡¹å¼äº‹ä»¶æ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬å‡è®¾é‚®ä»¶çš„ç”Ÿæˆæ˜¯é€šè¿‡ä¸€ä¸ªéšæœºè¿‡ç¨‹çš„ï¼Œè€Œæ˜¯å¦ä¸ºåƒåœ¾é‚®ä»¶æ˜¯é¦–å…ˆå†³å®šçš„ï¼ˆæ ¹æ®$p(y)$ï¼‰ï¼Œè¿™ä¸ªå’Œä¹‹å‰çš„æ¨¡å‹å‡è®¾ä¸€æ ·ã€‚ç„¶åé‚®ä»¶çš„å‘é€è€…å†™é‚®ä»¶é¦–å…ˆæ˜¯è¦ç”Ÿæˆ  ä»å¯¹å•è¯$(p(x<em>1|y))$ çš„æŸç§å¤šé¡¹å¼åˆ†å¸ƒä¸­ç”Ÿæˆ $x_1$ã€‚ç„¶åç¬¬äºŒæ­¥æ˜¯ç‹¬ç«‹äº $x_1$ æ¥ç”Ÿæˆ $x_2$ï¼Œä½†ä¹Ÿæ˜¯ä»ç›¸åŒçš„å¤šé¡¹å¼åˆ†å¸ƒä¸­æ¥é€‰å–ï¼Œç„¶åæ˜¯ $x_3$,$x_4$  ç­‰ç­‰ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°ç”Ÿæˆäº†æ•´ä¸ªé‚®ä»¶ä¸­çš„æ‰€æœ‰çš„è¯ã€‚å› æ­¤ï¼Œä¸€ä¸ªé‚®ä»¶çš„æ€»ä½“æ¦‚ç‡å°±æ˜¯$p(y)\prod^n</em>{i=1}p(x_i|y)$ã€‚è¦æ³¨æ„è¿™ä¸ªæ–¹ç¨‹çœ‹ç€å’Œæˆ‘ä»¬ä¹‹å‰é‚£ä¸ªå¤šå…ƒä¼¯åŠªåˆ©äº‹ä»¶æ¨¡å‹é‡Œé¢çš„é‚®ä»¶æ¦‚ç‡å¾ˆç›¸ä¼¼ï¼Œä½†å®é™…ä¸Šè¿™é‡Œé¢çš„æ„ä¹‰å®Œå…¨ä¸åŒäº†ã€‚å°¤å…¶æ˜¯è¿™é‡Œçš„$x_i|y$ç°åœ¨æ˜¯ä¸€ä¸ªå¤šé¡¹å¼åˆ†å¸ƒäº†ï¼Œè€Œä¸æ˜¯ä¼¯åŠªåˆ©åˆ†å¸ƒäº†ã€‚</p><p>æˆ‘ä»¬æ–°æ¨¡å‹çš„å‚æ•°è¿˜æ˜¯$\phi<em>y = p(y)$ï¼Œè¿™ä¸ªè·Ÿä»¥å‰ä¸€æ ·ï¼Œç„¶åè¿˜æœ‰$\phi</em>{k|y=1} = p(x<em>j =k|y=1)$ (å¯¹ä»»ä½• $j$)ä»¥åŠ $\phi</em>{i|y=0} =p(x_j =k|y=0)$ã€‚è¦æ³¨æ„è¿™é‡Œæˆ‘ä»¬å·²ç»å‡è®¾äº†å¯¹äºä»»ä½•$j$ çš„å€¼ï¼Œ$p(x_j|y)$è¿™ä¸ªæ¦‚ç‡éƒ½æ˜¯ç›¸ç­‰çš„ï¼Œä¹Ÿå°±æ˜¯æ„å‘³ç€åœ¨è¿™ä¸ªå“ªä¸ªè¯æ±‡ç”Ÿæˆçš„è¿™ä¸ªåˆ†å¸ƒä¸ä¾èµ–è¿™ä¸ªè¯åœ¨é‚®ä»¶ä¸­çš„ä½ç½®$j$ã€‚</p><p>å¦‚æœç»™å®šä¸€ä¸ªè®­ç»ƒé›†${(x^{(i)},y^{(i)}); i = 1, â€¦, m}$ï¼Œå…¶ä¸­ $x^{(i)}  = ( x^{(i)}<em>{1} , x^{(i)}</em>{2} ,â€¦, x^{(i)}_{n_i})$ï¼ˆè¿™é‡Œçš„$n$æ˜¯åœ¨ç¬¬$i$ä¸ªè®­ç»ƒæ ·æœ¬ä¸­çš„å•è¯æ•°ç›®ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°æ®çš„ä¼¼ç„¶å‡½æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}\mathcal{L}(\phi,\phi_{k|y=0},\phi_{k|y=1})& = \prod^m_{i=1}p( x^{(i)},y^{(i)})\\& = \prod^m_{i=1}(\prod^{n_i}_{j=1}p(x_j^{(i)}|y;\phi_{k|y=0},\phi_{k|y=1}))p( y^{(i)};\phi_y)\\\end{aligned}</script><p>è®©ä¸Šé¢çš„è¿™ä¸ªå‡½æ•°æœ€å¤§åŒ–å°±å¯ä»¥äº§ç”Ÿå¯¹å‚æ•°çš„æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\phi_{k|y=1}&=  \frac{\sum^m_{i=1}\sum^{n_i}_{j=1}1\{x_j^{(i)}=k\wedge y^{(i)}=1\}}{\sum^m_{i=1}1\{y^{(i)}=1\}n_i} \\\phi_{k|y=0}&=  \frac{\sum^m_{i=1}\sum^{n_i}_{j=1}1\{x_j^{(i)}=k\wedge y^{(i)}=0\}}{\sum^m_{i=1}1\{y^{(i)}=0\}n_i} \\\phi_y&=   \frac{\sum^m_{i=1}1\{y^{(i)}=1\}}{m}\\\end{aligned}</script><p>å¦‚æœä½¿ç”¨æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ï¼ˆå®è·µä¸­ä¼šç”¨è¿™ä¸ªæ–¹æ³•æ¥æé«˜æ€§èƒ½ï¼‰æ¥ä¼°è®¡$\phi<em>{k|y=0}$ å’Œ $\phi</em>{k|y=1}$ï¼Œå°±åœ¨åˆ†å­ä¸ŠåŠ 1ï¼Œç„¶ååˆ†æ¯ä¸ŠåŠ $|V|$ï¼Œå°±å¾—åˆ°äº†ä¸‹é¢çš„ç­‰å¼ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\phi_{k|y=1}&=  \frac{\sum^m_{i=1}\sum^{n_i}_{j=1}1\{x_j^{(i)}=k\wedge y^{(i)}=1\}+1}{\sum^m_{i=1}1\{y^{(i)}=1\}n_i+|V|} \\\phi_{k|y=0}&=  \frac{\sum^m_{i=1}\sum^{n_i}_{j=1}1\{x_j^{(i)}=k\wedge y^{(i)}=0\}+1}{\sum^m_{i=1}1\{y^{(i)}=0\}n_i+|V|} \\\end{aligned}</script><p>å½“ç„¶äº†ï¼Œè¿™ä¸ªå¹¶ä¸è§å¾—å°±æ˜¯ä¸€ä¸ªæœ€å¥½çš„åˆ†ç±»ç®—æ³•ï¼Œä¸è¿‡æœ´ç´ è´å¶æ–¯åˆ†é€‰å™¨é€šå¸¸ç”¨èµ·æ¥è¿˜éƒ½å‡ºä¹æ„æ–™åœ°é‚£ä¹ˆå¥½ã€‚æ‰€ä»¥è¿™ä¸ªæ–¹æ³•å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„â€é¦–å‘é€‰æ‹©â€ï¼Œå› ä¸ºå®ƒå¾ˆç®€å•åˆå¾ˆå¥½å®ç°ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
      <category>è½¬è½½</category>
      
    </categories>
    
    
    <tags>
      
      <tag>machine learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS229-note-3-å¹¿ä¹‰çº¿æ€§æ¨¡å‹</title>
    <link href="/2019/04/26/CS229-note-3-%E5%B9%BF%E4%B9%89%E7%BA%BF%E6%80%A7%E6%A8%A1%E5%9E%8B/"/>
    <url>/2019/04/26/CS229-note-3-%E5%B9%BF%E4%B9%89%E7%BA%BF%E6%80%A7%E6%A8%A1%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<p>åœ¨å‰é¢çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦è®¨è®ºå›å½’å’Œåˆ†ç±»çš„é—®é¢˜ï¼Œåœ¨å›å½’é—®é¢˜ä¸­æˆ‘ä»¬é»˜è®¤çš„åˆ†å¸ƒæ¨¡å‹ä¸ºæ­£æ€åˆ†å¸ƒ$y | x ; \theta \sim \mathcal{N}\left(\mu, \sigma^{2}\right)$ï¼Œåœ¨åˆ†ç±»é—®é¢˜ä¸­çš„æ¨¡å‹ä¸ºä¼¯åŠªåˆ©äºŒé¡¹åˆ†å¸ƒ$y | x ; \theta \sim$ Bernoulli $(\phi)$ã€‚è¿™é‡Œçš„$\mu$ä¸$\phi$æ˜¯$x$ä¸$\theta$çš„å‡½æ•°</p><p>æˆ‘ä»¬æ¥ä¸‹æ¥è¦ä»‹ç»å¹¿ä¹‰çº¿æ€§æ¨¡å‹ï¼ˆgeneralized linear modelsï¼Œç®€ç§° GLMï¼‰ï¼Œä¹‹å‰çš„ä¸¤ç§æ¨¡å‹éƒ½æ˜¯å¹¿ä¹‰çº¿æ€§æ¨¡å‹çš„ç‰¹ä¾‹ï¼Œé™¤æ­¤ä¹‹å¤–å¹¿ä¹‰çº¿æ€§æ¨¡å‹è¿˜å¯ä»¥å¯¼å‡ºå…¶ä»–ä¸åŒçš„æ¨¡å‹ï¼Œé€‚ç”¨äºå…¶ä»–ç±»å‹çš„åˆ†ç±»æˆ–å›å½’é—®é¢˜ã€‚</p><h2 id="1-æŒ‡æ•°æ—ï¼ˆThe-Exponential-Familyï¼‰"><a href="#1-æŒ‡æ•°æ—ï¼ˆThe-Exponential-Familyï¼‰" class="headerlink" title="1. æŒ‡æ•°æ—ï¼ˆThe Exponential Familyï¼‰"></a>1. æŒ‡æ•°æ—ï¼ˆThe Exponential Familyï¼‰</h2><p>åœ¨ä»‹ç»å¹¿ä¹‰çº¿æ€§æ¨¡å‹ä¹‹å‰ï¼Œè¦å…ˆä»‹ç»æŒ‡æ•°æ—åˆ†å¸ƒã€‚å¦‚æœä¸€ä¸ªåˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°å¯ä»¥å†™æˆï¼š</p><script type="math/tex; mode=display">p(y ; \eta)=b(y) \exp \left(\eta^{T} T(y)-a(\eta)\right)</script><p>åˆ™ç§°è¯¥åˆ†å¸ƒå±äºæŒ‡æ•°æ—ã€‚è¿™é‡Œçš„$\eta$ç§°ä¸ºè¯¥åˆ†éƒ¨çš„natural parameterã€‚T(y)ç§°ä¹‹ä¸ºå……åˆ†ç»Ÿè®¡é‡(sufficient statistic)ï¼Œåœ¨æˆ‘ä»¬è®¨è®ºçš„ä¾‹å­ä¸­ï¼ŒT(y)=yã€‚$a(\eta)$æ˜¯ä¸€ä¸ªlog partitionå‡½æ•°ã€‚$e^{-a(\eta)}$æ˜¯ä¸€ä¸ªç”¨æ¥è®©æ•´ä¸ªå‡½æ•°æ­£è§„åŒ–ï¼ˆnormalizationï¼‰çš„å¸¸æ•°ï¼Œä¹Ÿå°±æ˜¯è®©æ•´ä¸ª$p(y;\eta)$å‡½æ•°å¯¹yç§¯åˆ†æˆ–åŠ å’Œä¹‹åç­‰äºä¸€ã€‚</p><p>é€‰å®šTã€aã€bä¹‹åï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªå‚æ•°ä¸º$\eta$çš„åˆ†å¸ƒæ—ï¼Œå½“æˆ‘ä»¬æ”¹å˜$\eta$çš„å€¼ï¼Œå°±å¯ä»¥å¾—åˆ°è¯¥åˆ†å¸ƒæ—çš„ä¸€ä¸ªåˆ†å¸ƒã€‚</p><p>æ¥ä¸‹æ¥å°†è¯æ˜Bernoulli ä¸ Gaussianï¼ˆæ­£æ€ï¼‰åˆ†å¸ƒå…¶å®ä¹Ÿéƒ½æ˜¯æŒ‡æ•°æ—åˆ†å¸ƒçš„ä¸€ç§ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸Šé¢çš„Tã€aã€bç»è¿‡é€‚å½“çš„é€‰æ‹©ä¹‹åï¼Œå°±å¯ä»¥å¾—åˆ°è¿™ä¸¤ä¸ªåˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°ã€‚</p><p>Bernoulli(Ï†)çš„æ¦‚ç‡å¯†åº¦å‡½æ•°ä¸º</p><script type="math/tex; mode=display">p(y ; \phi)=\left\{\begin{array}{ll}{\phi,} & {\text { if } \mathrm{y}=1} \\ {1-\phi,} & {\text { if } \mathrm{y}=0}\end{array}\right.</script><p>å½“æˆ‘ä»¬æ”¹å˜Ï†çš„æ—¶å€™ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸åŒçš„Bernoulliåˆ†å¸ƒã€‚ä¸Šé¢è¿™ä¸ªå¼å­å¯ä»¥æ”¹å†™æˆï¼š</p><script type="math/tex; mode=display">\begin{aligned} p(y, \phi) &=\phi^{y}(1-\phi)^{1-y} \\ &=\exp (y \log \phi+(1-y) \log (1-\phi)) \\ &=\exp \left(\left(\log \left(\frac{\phi}{1-\phi}\right)\right) y+\log (1-\phi)\right) \end{aligned}</script><p>è¿™æ ·å°±å¯ä»¥çœ‹å‡ºæ¥ï¼Œnatural parameterä¸º$\eta=\log{\frac{\phi}{1-\phi}}$ï¼Œæ­¤æ—¶</p><script type="math/tex; mode=display">\begin{aligned} T(y) &=y \\ a(\eta) &=-\log (1-\phi) \\ &=\log \left(1+e^{\eta}\right) \\ b(y) &=1 \end{aligned}</script><p>åŒç†ï¼Œå¦‚æœè®¾ç½®æ­£æ€åˆ†å¸ƒçš„æ–¹å·®ä¸º1ï¼Œåˆ™æ­£æ€åˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°ä¹Ÿå¯ä»¥å†™æˆï¼š</p><script type="math/tex; mode=display">\begin{aligned} p(y ; \mu) &=\frac{1}{\sqrt{2 \pi}} \exp \left(-\frac{1}{2}(y-\mu)^{2}\right) \\ &=\frac{1}{\sqrt{2 \pi}} \exp \left(-\frac{1}{2} y^{2}\right) \cdot \exp \left(\mu y-\frac{1}{2} \mu^{2}\right) \end{aligned}</script><p>å…¶ä¸­</p><script type="math/tex; mode=display">\begin{aligned} \eta &=\mu \\ T(y) &=y \\ a(\eta) &=\mu^{2} / 2 \\ &=\eta^{2} / 2 \\ b(y) &=(1 / \sqrt{2 \pi}) \exp \left(-y^{2} / 2\right) \end{aligned}</script><p>äº‹å®ä¸Šï¼Œå¾ˆå¤šåˆ†å¸ƒéƒ½å±äºæŒ‡æ•°ç»„åˆ†å¸ƒï¼ŒåŒ…æ‹¬å¤šé¡¹å¼åˆ†å¸ƒã€æ³Šæ¾åˆ†å¸ƒã€æŒ‡æ•°åˆ†å¸ƒã€gammaåˆ†å¸ƒã€betaåˆ†å¸ƒã€ç‹„åˆ©å…‹é›·åˆ†å¸ƒç­‰ç­‰</p><h2 id="2-æ„é€ å¹¿ä¹‰çº¿æ€§æ¨¡å‹ï¼ˆGLMsï¼‰"><a href="#2-æ„é€ å¹¿ä¹‰çº¿æ€§æ¨¡å‹ï¼ˆGLMsï¼‰" class="headerlink" title="2. æ„é€ å¹¿ä¹‰çº¿æ€§æ¨¡å‹ï¼ˆGLMsï¼‰"></a>2. æ„é€ å¹¿ä¹‰çº¿æ€§æ¨¡å‹ï¼ˆGLMsï¼‰</h2><p>ä»¥ä¸‹éƒ¨åˆ†æ‘˜è‡ª@é£é¾™ç¿»è¯‘çš„CS229ç¬”è®°ã€‚<br>è®¾æƒ³ä½ è¦æ„å»ºä¸€ä¸ªæ¨¡å‹ï¼Œæ¥ä¼°è®¡åœ¨ç»™å®šçš„æŸä¸ªå°æ—¶å†…æ¥åˆ°ä½ å•†åº—çš„é¡¾å®¢äººæ•°ï¼ˆæˆ–è€…æ˜¯ä½ çš„ç½‘ç«™çš„é¡µé¢è®¿é—®æ¬¡æ•°ï¼‰ï¼ŒåŸºäºæŸäº›ç¡®å®šçš„ç‰¹å¾ $x$ ï¼Œä¾‹å¦‚å•†åº—çš„ä¿ƒé”€ã€æœ€è¿‘çš„å¹¿å‘Šã€å¤©æ°”ã€ä»Šå¤©å‘¨å‡ å•Šç­‰ç­‰ã€‚æˆ‘ä»¬å·²ç»çŸ¥é“æ³Šæ¾åˆ†å¸ƒï¼ˆPoisson distributionï¼‰é€šå¸¸èƒ½é€‚åˆç”¨æ¥å¯¹è®¿å®¢æ•°ç›®è¿›è¡Œå»ºæ¨¡ã€‚çŸ¥é“äº†è¿™ä¸ªä¹‹åï¼Œæ€ä¹ˆæ¥å»ºç«‹ä¸€ä¸ªæ¨¡å‹æ¥è§£å†³å’±ä»¬è¿™ä¸ªå…·ä½“é—®é¢˜å‘¢ï¼Ÿéå¸¸å¹¸è¿çš„æ˜¯ï¼Œæ³Šæ¾åˆ†å¸ƒæ˜¯å±äºæŒ‡æ•°åˆ†å¸ƒæ—çš„ä¸€ä¸ªåˆ†å¸ƒï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¯¹è¯¥é—®é¢˜ä½¿ç”¨å¹¿ä¹‰çº¿æ€§æ¨¡å‹ï¼ˆGeneralized Linear Modelï¼Œç¼©å†™ä¸º GLMï¼‰ã€‚åœ¨æœ¬èŠ‚ï¼Œæˆ‘ä»¬è®²ä¸€ç§å¯¹åˆšåˆšè¿™ç±»é—®é¢˜æ„å»ºå¹¿ä¹‰çº¿æ€§æ¨¡å‹çš„æ–¹æ³•ã€‚</p><p>è¿›ä¸€æ­¥æ³›åŒ–ï¼Œè®¾æƒ³ä¸€ä¸ªåˆ†ç±»æˆ–è€…å›å½’é—®é¢˜ï¼Œè¦é¢„æµ‹ä¸€äº›éšæœºå˜é‡ $y$ çš„å€¼ï¼Œä½œä¸º $x$ çš„ä¸€ä¸ªå‡½æ•°ã€‚è¦å¯¼å‡ºé€‚ç”¨äºè¿™ä¸ªé—®é¢˜çš„å¹¿ä¹‰çº¿æ€§æ¨¡å‹ï¼Œå°±è¦å¯¹æˆ‘ä»¬çš„æ¨¡å‹ã€ç»™å®š $x$ ä¸‹ $y$ çš„æ¡ä»¶åˆ†å¸ƒæ¥åšå‡ºä»¥ä¸‹ä¸‰ä¸ªå‡è®¾ï¼š</p><p>$y | x; \theta âˆ¼ Exponential Family(\eta)$ï¼Œå³ç»™å®š $x$ å’Œ $\theta, y$ çš„åˆ†å¸ƒå±äºæŒ‡æ•°åˆ†å¸ƒæ—ï¼Œæ˜¯ä¸€ä¸ªå‚æ•°ä¸º $\eta$ çš„æŒ‡æ•°åˆ†å¸ƒã€‚â€”â€”<strong>å‡è®¾1</strong></p><p>ç»™å®š $x$ï¼Œç›®çš„æ˜¯è¦é¢„æµ‹å¯¹åº”è¿™ä¸ªç»™å®š $x$ çš„ $T(y)$ çš„æœŸæœ›å€¼ã€‚å’±ä»¬çš„ä¾‹å­ä¸­ç»å¤§éƒ¨åˆ†æƒ…å†µéƒ½æ˜¯ $T(y) = y$ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬çš„å­¦ä¹ å‡è®¾ $h$ è¾“å‡ºçš„é¢„æµ‹å€¼ $h(x)$ è¦æ»¡è¶³ $h(x) = E[y|x]$ã€‚ ï¼ˆæ³¨æ„ï¼Œè¿™ä¸ªå‡è®¾é€šè¿‡å¯¹ $h<em>\theta(x)$ çš„é€‰æ‹©è€Œæ»¡è¶³ï¼Œåœ¨é€»è¾‘å›å½’å’Œçº¿æ€§å›å½’ä¸­éƒ½æ˜¯å¦‚æ­¤ã€‚ä¾‹å¦‚åœ¨é€»è¾‘å›å½’ä¸­ï¼Œ $h</em>\theta (x) = [p (y = 1|x; \theta)] =[ 0 \cdot p (y = 0|x; \theta)+1\cdot p(y = 1|x;\theta)] = E[y|x;\theta]$ã€‚è¯‘è€…æ³¨ï¼šè¿™é‡Œçš„$E[y|x$]åº”è¯¥å°±æ˜¯å¯¹ç»™å®š$x$æ—¶çš„$y$å€¼çš„æœŸæœ›çš„æ„æ€ã€‚ï¼‰â€”â€”<strong>å‡è®¾2</strong></p><p>è‡ªç„¶å‚æ•° $\eta$ å’Œè¾“å…¥å€¼ $x$ æ˜¯çº¿æ€§ç›¸å…³çš„ï¼Œ$\eta = \theta^T x$ï¼Œæˆ–è€…å¦‚æœ $\eta$ æ˜¯æœ‰å€¼çš„å‘é‡ï¼Œåˆ™æœ‰$\eta_i = \theta_i^T x$ã€‚â€”â€”<strong>å‡è®¾3</strong></p><p>ä¸Šé¢çš„å‡ ä¸ªå‡è®¾ä¸­ï¼Œç¬¬ä¸‰ä¸ªå¯èƒ½çœ‹ä¸Šå»è¯æ˜å¾—æœ€å·®ï¼Œæ‰€ä»¥ä¹Ÿæ›´é€‚åˆæŠŠè¿™ç¬¬ä¸‰ä¸ªå‡è®¾çœ‹ä½œæ˜¯ä¸€ä¸ªæˆ‘ä»¬åœ¨è®¾è®¡å¹¿ä¹‰çº¿æ€§æ¨¡å‹æ—¶å€™çš„ä¸€ç§ â€œè®¾è®¡é€‰æ‹© design choiceâ€ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå‡è®¾ã€‚é‚£ä¹ˆè¿™ä¸‰ä¸ªå‡è®¾/è®¾è®¡ï¼Œå°±å¯ä»¥ç”¨æ¥æ¨å¯¼å‡ºä¸€ä¸ªéå¸¸åˆé€‚çš„å­¦ä¹ ç®—æ³•ç±»åˆ«ï¼Œä¹Ÿå°±æ˜¯å¹¿ä¹‰çº¿æ€§æ¨¡å‹ GLMsï¼Œè¿™ä¸ªæ¨¡å‹æœ‰å¾ˆå¤šç‰¹åˆ«å‹å¥½åˆç†æƒ³çš„æ€§è´¨ï¼Œæ¯”å¦‚å¾ˆå®¹æ˜“å­¦ä¹ ã€‚æ­¤å¤–ï¼Œè¿™ç±»æ¨¡å‹å¯¹ä¸€äº›å…³äº $y$ çš„åˆ†å¸ƒçš„ä¸åŒç±»å‹å»ºæ¨¡æ¥è¯´é€šå¸¸æ•ˆç‡éƒ½å¾ˆé«˜ï¼›ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä¸‹é¢å°±å°†è¦ç®€å•ä»‹ç»ä¸€äº›é€»è¾‘å›å½’ä»¥åŠæ™®é€šæœ€å°äºŒä¹˜æ³•è¿™ä¸¤è€…å¦‚ä½•ä½œä¸ºå¹¿ä¹‰çº¿æ€§æ¨¡å‹æ¥æ¨å‡ºã€‚</p><h3 id="2-1-æ™®é€šæœ€å°äºŒä¹˜æ³•ï¼ˆOrdinary-Least-Squaresï¼‰"><a href="#2-1-æ™®é€šæœ€å°äºŒä¹˜æ³•ï¼ˆOrdinary-Least-Squaresï¼‰" class="headerlink" title="2.1 æ™®é€šæœ€å°äºŒä¹˜æ³•ï¼ˆOrdinary Least Squaresï¼‰"></a>2.1 æ™®é€šæœ€å°äºŒä¹˜æ³•ï¼ˆOrdinary Least Squaresï¼‰</h3><p>æˆ‘ä»¬è¿™ä¸€èŠ‚è¦è®²çš„æ˜¯æ™®é€šæœ€å°äºŒä¹˜æ³•å®é™…ä¸Šæ˜¯å¹¿ä¹‰çº¿æ€§æ¨¡å‹ä¸­çš„ä¸€ç§ç‰¹ä¾‹ï¼Œè®¾æƒ³å¦‚ä¸‹çš„èƒŒæ™¯è®¾ç½®ï¼šç›®æ ‡å˜é‡ $y$ï¼ˆåœ¨å¹¿ä¹‰çº¿æ€§æ¨¡å‹çš„æœ¯è¯­ä¹Ÿå«åšå“åº”å˜é‡response variableï¼‰æ˜¯è¿ç»­çš„ï¼Œç„¶åæˆ‘ä»¬å°†ç»™å®š $x$ çš„ $y$ çš„åˆ†å¸ƒä»¥é«˜æ–¯åˆ†å¸ƒ $N(\mu, \sigma^2)$ æ¥å»ºæ¨¡ï¼Œå…¶ä¸­ $\mu$ å¯ä»¥æ˜¯ä¾èµ– $x$ çš„ä¸€ä¸ªå‡½æ•°ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±è®©ä¸Šé¢çš„$ExponentialFamily(\eta)$åˆ†å¸ƒæˆä¸ºäº†ä¸€ä¸ªé«˜æ–¯åˆ†å¸ƒã€‚åœ¨å‰é¢å†…å®¹ä¸­æˆ‘ä»¬æåˆ°è¿‡ï¼Œåœ¨æŠŠé«˜æ–¯åˆ†å¸ƒå†™æˆæŒ‡æ•°åˆ†å¸ƒæ—çš„åˆ†å¸ƒçš„æ—¶å€™ï¼Œæœ‰$\mu = \eta$ã€‚æ‰€ä»¥å°±èƒ½å¾—åˆ°ä¸‹é¢çš„ç­‰å¼ï¼š</p><script type="math/tex; mode=display">\begin{aligned} h_\theta(x)& = E[y|x;\theta] \ & = \mu \ & = \eta \ & = \theta^Tx\ \end{aligned}</script><p>ç¬¬ä¸€è¡Œçš„ç­‰å¼æ˜¯åŸºäº<strong>å‡è®¾2</strong>ï¼›ç¬¬äºŒä¸ªç­‰å¼æ˜¯åŸºäºå®šç†å½“ $y|x; \theta âˆ¼ N (\mu, \sigma ^2)$ï¼Œåˆ™ $y$ çš„æœŸæœ›å°±æ˜¯ $\mu$ ï¼›ç¬¬ä¸‰ä¸ªç­‰å¼æ˜¯åŸºäº<strong>å‡è®¾1</strong>ï¼Œä»¥åŠä¹‹å‰æˆ‘ä»¬æ­¤å‰å°†é«˜æ–¯åˆ†å¸ƒå†™æˆæŒ‡æ•°æ—åˆ†å¸ƒçš„æ—¶å€™æ¨å¯¼å‡ºæ¥çš„æ€§è´¨ $\mu = \eta$ï¼›æœ€åä¸€ä¸ªç­‰å¼å°±æ˜¯åŸºäº<strong>å‡è®¾3</strong>ã€‚</p><h3 id="2-2-é€»è¾‘å›å½’ï¼ˆLogistic-Regressionï¼‰"><a href="#2-2-é€»è¾‘å›å½’ï¼ˆLogistic-Regressionï¼‰" class="headerlink" title="2.2 é€»è¾‘å›å½’ï¼ˆLogistic Regressionï¼‰"></a>2.2 é€»è¾‘å›å½’ï¼ˆLogistic Regressionï¼‰</h3><p>æ¥ä¸‹æ¥å’±ä»¬å†æ¥çœ‹çœ‹é€»è¾‘å›å½’ã€‚è¿™é‡Œå’±ä»¬è¿˜æ˜¯çœ‹çœ‹äºŒå€¼åŒ–åˆ†ç±»é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯ $y \in {0, 1}$ã€‚ç»™å®šäº†$y$ æ˜¯ä¸€ä¸ªäºŒé€‰ä¸€çš„å€¼ï¼Œé‚£ä¹ˆå¾ˆè‡ªç„¶å°±é€‰æ‹©ä¼¯åŠªåˆ©åˆ†å¸ƒï¼ˆBernoulli distributionï¼‰æ¥å¯¹ç»™å®š $x$ çš„ $y$ çš„åˆ†å¸ƒè¿›è¡Œå»ºæ¨¡äº†ã€‚åœ¨æˆ‘ä»¬æŠŠä¼¯åŠªåˆ©åˆ†å¸ƒå†™æˆä¸€ç§æŒ‡æ•°æ—åˆ†å¸ƒçš„æ—¶å€™ï¼Œæœ‰ $\phi = 1/ (1 + e^{âˆ’\eta})$ã€‚å¦å¤–è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæœ‰ $y|x; \theta âˆ¼ Bernoulli(\phi)$ï¼Œé‚£ä¹ˆ $E [y|x; \theta] = \phi$ã€‚æ‰€ä»¥å°±è·Ÿåˆšåˆšæ¨å¯¼æ™®é€šæœ€å°äºŒä¹˜æ³•çš„è¿‡ç¨‹ç±»ä¼¼ï¼Œæœ‰ä»¥ä¸‹ç­‰å¼ï¼š</p><script type="math/tex; mode=display">\begin{aligned} h_\theta(x)& = E[y|x;\theta] \ & = \phi \ & = 1/(1+ e^{-\eta}) \ & = 1/(1+ e^{-\theta^Tx})\ \end{aligned}</script><p>æ‰€ä»¥ï¼Œä¸Šé¢çš„ç­‰å¼å°±ç»™äº†ç»™äº†å‡è®¾å‡½æ•°çš„å½¢å¼ï¼š$h_\theta(x) = 1/ (1 + e^{âˆ’\theta^T x})$ã€‚å¦‚æœä½ ä¹‹å‰å¥½å¥‡å’±ä»¬æ˜¯æ€ä¹ˆæƒ³å‡ºæ¥é€»è¾‘å›å½’çš„å‡½æ•°ä¸º$1/ (1 + e^{âˆ’z} )$ï¼Œè¿™ä¸ªå°±æ˜¯ä¸€ç§è§£ç­”ï¼šä¸€æ—¦æˆ‘ä»¬å‡è®¾ä»¥ $x$ ä¸ºæ¡ä»¶çš„ $y$ çš„åˆ†å¸ƒæ˜¯ä¼¯åŠªåˆ©åˆ†å¸ƒï¼Œé‚£ä¹ˆæ ¹æ®å¹¿ä¹‰çº¿æ€§æ¨¡å‹å’ŒæŒ‡æ•°åˆ†å¸ƒæ—çš„å®šä¹‰ï¼Œå°±ä¼šå¾—å‡ºè¿™ä¸ªå¼å­ã€‚</p><p>å†è§£é‡Šä¸€ç‚¹æœ¯è¯­ï¼Œè¿™é‡Œç»™å‡ºåˆ†å¸ƒå‡å€¼çš„å‡½æ•° $g$ æ˜¯ä¸€ä¸ªå…³äºè‡ªç„¶å‚æ•°çš„å‡½æ•°ï¼Œ$g(\eta) = E[T(y); \eta]$ï¼Œè¿™ä¸ªå‡½æ•°ä¹Ÿå«åšè§„èŒƒå“åº”å‡½æ•°ï¼ˆcanonical response functionï¼‰ï¼Œ å®ƒçš„åå‡½æ•° $g^{âˆ’1}$ å«åšè§„èŒƒé“¾æ¥å‡½æ•°ï¼ˆcanonical link functionï¼‰ã€‚ å› æ­¤ï¼Œå¯¹äºé«˜æ–¯åˆ†å¸ƒæ¥è¯´ï¼Œå®ƒçš„è§„èŒƒå“åº”å‡½æ•°æ­£å¥½å°±æ˜¯è¯†åˆ«å‡½æ•°ï¼ˆidentify functionï¼‰ï¼›è€Œå¯¹äºä¼¯åŠªåˆ©åˆ†å¸ƒæ¥è¯´ï¼Œå®ƒçš„è§„èŒƒå“åº”å‡½æ•°åˆ™æ˜¯é€»è¾‘å‡½æ•°ï¼ˆlogistic functionï¼‰ã€‚$^*$æ³¨</p><ul><li>å¾ˆå¤šæ•™ç§‘ä¹¦ç”¨ $g$ è¡¨ç¤ºé“¾æ¥å‡½æ•°ï¼Œè€Œç”¨åå‡½æ•°$g^{âˆ’1}$ æ¥è¡¨ç¤ºå“åº”å‡½æ•°ï¼›ä½†æ˜¯å’±ä»¬è¿™é‡Œç”¨çš„æ˜¯åè¿‡æ¥çš„ï¼Œè¿™æ˜¯ç»§æ‰¿äº†æ—©æœŸçš„æœºå™¨å­¦ä¹ ä¸­çš„ç”¨æ³•ï¼Œæˆ‘ä»¬è¿™æ ·ä½¿ç”¨å’Œåç»­çš„å…¶ä»–è¯¾ç¨‹èƒ½å¤Ÿæ›´å¥½åœ°è¡”æ¥èµ·æ¥ã€‚</li></ul><h3 id="2-3-Softmax-å›å½’"><a href="#2-3-Softmax-å›å½’" class="headerlink" title="2.3 Softmax å›å½’"></a>2.3 Softmax å›å½’</h3><p>å’±ä»¬å†æ¥çœ‹ä¸€ä¸ªå¹¿ä¹‰çº¿æ€§æ¨¡å‹çš„ä¾‹å­å§ã€‚è®¾æƒ³æœ‰è¿™æ ·çš„ä¸€ä¸ªåˆ†ç±»é—®é¢˜ï¼Œå…¶ä¸­å“åº”å˜é‡ $y$ çš„å–å€¼å¯ä»¥æ˜¯ $k$ ä¸ªå€¼å½“ä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯ $y \in {1, 2, â€¦, k}$ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬è¿™æ¬¡è¦è¿›è¡Œçš„åˆ†ç±»å°±æ¯”æŠŠé‚®ä»¶åˆ†æˆåƒåœ¾é‚®ä»¶å’Œæ­£å¸¸é‚®ä»¶ä¸¤ç±»è¿™ç§äºŒå€¼åŒ–åˆ†ç±»è¦æ›´åŠ å¤æ‚ä¸€äº›ï¼Œæ¯”å¦‚å¯èƒ½æ˜¯è¦åˆ†æˆä¸‰ç±»ï¼Œä¾‹å¦‚åƒåœ¾é‚®ä»¶ã€ä¸ªäººé‚®ä»¶ã€å·¥ä½œç›¸å…³é‚®ä»¶ã€‚è¿™æ ·å“åº”å˜é‡ä¾ç„¶è¿˜æ˜¯ç¦»æ•£çš„ï¼Œä½†å–å€¼å°±ä¸åªæœ‰ä¸¤ä¸ªäº†ã€‚å› æ­¤å’±ä»¬å°±ç”¨å¤šé¡¹å¼åˆ†å¸ƒï¼ˆmultinomial distributionï¼‰æ¥è¿›è¡Œå»ºæ¨¡ã€‚</p><p>ä¸‹é¢å’±ä»¬å°±é€šè¿‡è¿™ç§å¤šé¡¹å¼åˆ†å¸ƒæ¥æ¨å‡ºä¸€ä¸ªå¹¿ä¹‰çº¿æ€§æ¨¡å‹ã€‚è¦å®ç°è¿™ä¸€ç›®çš„ï¼Œé¦–å…ˆè¿˜æ˜¯è¦æŠŠå¤šé¡¹å¼åˆ†å¸ƒä¹Ÿç”¨æŒ‡æ•°æ—åˆ†å¸ƒæ¥è¿›è¡Œæè¿°ã€‚</p><p>è¦å¯¹ä¸€ä¸ªå¯èƒ½æœ‰ $k$ ä¸ªä¸åŒè¾“å‡ºå€¼çš„å¤šé¡¹å¼è¿›è¡Œå‚æ•°åŒ–ï¼Œå°±å¯ä»¥ç”¨ $k$ ä¸ªå‚æ•° $\phi<em>1,â€¦,\phi</em> k$ æ¥å¯¹åº”å„è‡ªè¾“å‡ºå€¼çš„æ¦‚ç‡ã€‚ä¸è¿‡è¿™ä¹ˆå¤šå‚æ•°å¯èƒ½å¤ªå¤šäº†ï¼Œå½¢å¼ä¸Šä¹Ÿå¤ªéº»çƒ¦ï¼Œä»–ä»¬ä¹Ÿæœªå¿…éƒ½æ˜¯äº’ç›¸ç‹¬ç«‹çš„ï¼ˆæ¯”å¦‚å¯¹äºä»»æ„ä¸€ä¸ª$\phi<em> i$ä¸­çš„å€¼æ¥è¯´ï¼Œåªè¦çŸ¥é“å…¶ä»–çš„ $k-1$ ä¸ªå€¼ï¼Œå°±èƒ½çŸ¥é“è¿™æœ€åä¸€ä¸ªäº†ï¼Œå› ä¸ºæ€»å’Œç­‰äº$1$ï¼Œä¹Ÿå°±æ˜¯$\sum^k</em>{i=1} \phi<em>i = 1$ï¼‰ã€‚æ‰€ä»¥å’±ä»¬å°±å»æ‰ä¸€ä¸ªå‚æ•°ï¼Œåªç”¨ $k-1$ ä¸ªï¼š$\phi_1,â€¦,\phi</em> {k-1}$ æ¥å¯¹å¤šé¡¹å¼è¿›è¡Œå‚æ•°åŒ–ï¼Œå…¶ä¸­$\phi<em>i = p (y = i; \phi)ï¼Œp (y = k; \phi) = 1 âˆ’\sum ^{kâˆ’1}{i=1}\phi i$ã€‚ä¸ºäº†è¡¨è¿°èµ·æ¥æ–¹ä¾¿ï¼Œæˆ‘ä»¬è¿˜è¦è®¾ $\phi_k = 1 âˆ’ \sum</em>{i=1}^{kâˆ’1} \phi_i$ï¼Œä½†ä¸€å®šè¦æ³¨æ„ï¼Œè¿™ä¸ªå¹¶ä¸æ˜¯ä¸€ä¸ªå‚æ•°ï¼Œè€Œæ˜¯å®Œå…¨ç”±å…¶ä»–çš„ $k-1$ ä¸ªå‚æ•°æ¥ç¡®å®šçš„ã€‚</p><p>è¦æŠŠä¸€ä¸ªå¤šé¡¹å¼è¡¨è¾¾æˆä¸ºæŒ‡æ•°ç»„åˆ†å¸ƒï¼Œè¿˜è¦æŒ‰ç…§ä¸‹é¢çš„æ–¹å¼å®šä¹‰ä¸€ä¸ª $T (y) \in R^{kâˆ’1}$:</p><script type="math/tex; mode=display">T(1)=\left[ \begin{array}{c}{1} \\ {0} \\ {0} \\ {\vdots} \\ {0}\end{array}\right], T(2)=\left[ \begin{array}{c}{0} \\ {1} \\ {0} \\ {\vdots} \\ {0}\end{array}\right], T(3)=\left[ \begin{array}{c}{0} \\ {0} \\ {1} \\ {\vdots} \\ {0}\end{array}\right], \cdots, T(k-1)=\left[ \begin{array}{c}{0} \\ {0} \\ {0} \\ {\vdots} \\ {1}\end{array}\right], T(k)=\left[ \begin{array}{c}{0} \\ {0} \\ {0} \\ {\vdots} \\ {0}\end{array}\right]</script><p>è¿™æ¬¡å’Œä¹‹å‰çš„æ ·ä¾‹éƒ½ä¸ä¸€æ ·äº†ï¼Œå°±æ˜¯ä¸å†æœ‰ $T(y) = y$ï¼›ç„¶åï¼Œ$T(y)$ ç°åœ¨æ˜¯ä¸€ä¸ª $k â€“ 1$ ç»´çš„å‘é‡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå®æ•°äº†ã€‚å‘é‡ $T(y)$ ä¸­çš„ç¬¬ $i$ ä¸ªå…ƒç´ å†™æˆ$(T(y))_i$ ã€‚</p><p>ç°åœ¨ä»‹ç»ä¸€ç§éå¸¸æœ‰ç”¨çš„è®°å·ã€‚æŒ‡ç¤ºå‡½æ•°ï¼ˆindicator functionï¼‰$1{\cdot }$ï¼Œå¦‚æœå‚æ•°ä¸ºçœŸï¼Œåˆ™ç­‰äº$1$ï¼›åä¹‹åˆ™ç­‰äº$0$ï¼ˆ$1{True} = 1, 1{False} = 0$ï¼‰ã€‚ä¾‹å¦‚$1{2 = 3} = 0$, è€Œ$1{3 = 5 âˆ’ 2} = 1$ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠ$T(y)$ å’Œ $y$ çš„å…³ç³»å†™æˆ $(T(y))_i = 1{y = i}$ã€‚ï¼ˆå¾€ä¸‹ç»§ç»­é˜…è¯»ä¹‹å‰ï¼Œä¸€å®šè¦ç¡®ä¿ä½ ç†è§£äº†è¿™é‡Œçš„è¡¨è¾¾å¼ä¸ºçœŸï¼ï¼‰åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå°±æœ‰äº†$E[(T(y))_i] = P (y = i) = \phi_i$ã€‚</p><p>ç°åœ¨ä¸€åˆ‡å°±ç»ªï¼Œå¯ä»¥æŠŠå¤šé¡¹å¼å†™æˆæŒ‡æ•°æ—åˆ†å¸ƒäº†ã€‚å†™å‡ºæ¥å¦‚ä¸‹æ‰€ç¤ºï¼š</p><script type="math/tex; mode=display">\begin{aligned} p(y ; \phi) &=\phi_{1}^{1\{y=1\}} \phi_{2}^{1\{y=2\}} \ldots \phi_{k}^{1\{y=k\}} \\ &=\phi_{1}^{1\{y=1\}} \phi_{2}^{1\{y=2\}} \cdots \phi_{k}^{1-\sum_{i=1}^{k-1} 1\{y=i\}} \\ &=\phi_{1}^{(T(y))_{1}} \phi_{2}^{(T(y))_{2}} \ldots \phi_{k}^{1-\sum_{i=1}^{k-1}(T(y))_{i}} \\ &=\exp \left((T(y))_{1} \log \left(\phi_{1}\right)+(T(y))_{2} \log \left(\phi_{2}\right)\right) \\ &=\exp \left((T(y))_{1} \log \left(\phi_{1} / \phi_{k}\right)+(T(y))_{2} \log \left(\phi_{2} / \phi_{k}\right)\right) \\ &=b(y) \exp \left(\eta^{T} T(y)-a(\eta)\right) \end{aligned}</script><p>å…¶ä¸­ï¼š</p><script type="math/tex; mode=display">\begin{aligned} \eta &= \begin{bmatrix} \log (\phi _1/\phi _k)\ \log (\phi _2/\phi _k)\ \vdots \ \log (\phi _{k-1}/\phi _k)\ \end{bmatrix}, \ a(\eta) &= -\log (\phi _k)\ b(y) &= 1\ \end{aligned}</script><p>è¿™æ ·å’±ä»¬å°±æŠŠå¤šé¡¹å¼æ–¹ç¨‹ä½œä¸ºä¸€ä¸ªæŒ‡æ•°æ—åˆ†å¸ƒæ¥å†™äº†å‡ºæ¥ã€‚</p><p>ä¸ $i (for\quad i = 1, â€¦, k)$å¯¹åº”çš„é“¾æ¥å‡½æ•°ä¸ºï¼š</p><script type="math/tex; mode=display">\eta_i =\log \frac {\phi_i}{\phi_k}</script><p>ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬å†å®šä¹‰ $\eta_k = \log (\phi_k/\phi_k) = 0$ã€‚å¯¹é“¾æ¥å‡½æ•°å–åå‡½æ•°ç„¶åæ¨å¯¼å‡ºå“åº”å‡½æ•°ï¼Œå°±å¾—åˆ°äº†ä¸‹é¢çš„ç­‰å¼ï¼š</p><script type="math/tex; mode=display">\begin{aligned} e^{\eta_i} &= \frac {\phi_i}{\phi_k}\ \phi_k e^{\eta_i} &= \phi_i \qquad\text{(7)}\ \phi_k \sum^k_{i=1} e^{\eta_i}&= \sum^k_{i=1}\phi_i= 1\ \end{aligned}</script><p>è¿™å°±è¯´æ˜äº†$\phi<em>k = \frac 1 {\sum^k</em>{i=1} e^{\eta_i}}$ï¼Œç„¶åå¯ä»¥æŠŠè¿™ä¸ªå…³ç³»ä»£å…¥å›åˆ°ç­‰å¼$(7)$ï¼Œè¿™æ ·å°±å¾—åˆ°äº†å“åº”å‡½æ•°ï¼š</p><script type="math/tex; mode=display">\phi_i = \frac { e^{\eta_i} }{ \sum^k_{j=1} e^{\eta_j}}</script><p>ä¸Šé¢è¿™ä¸ªå‡½æ•°ä»$\eta$ æ˜ å°„åˆ°äº†$\phi$ï¼Œç§°ä¸º Softmax å‡½æ•°ã€‚</p><p>è¦å®Œæˆæˆ‘ä»¬çš„å»ºæ¨¡ï¼Œè¿˜è¦ç”¨åˆ°å‰æ–‡æåˆ°çš„å‡è®¾3ï¼Œä¹Ÿå°±æ˜¯ $\eta<em>i$ æ˜¯ä¸€ä¸ª $x$ çš„çº¿æ€§å‡½æ•°ã€‚æ‰€ä»¥å°±æœ‰äº† $\eta_i= \theta_i^Tx (for\quad i = 1, â€¦, k âˆ’ 1)$ï¼Œå…¶ä¸­çš„ $\theta_1, â€¦, \theta</em>{kâˆ’1} \in R^{n+1}$ å°±æ˜¯æˆ‘ä»¬å»ºæ¨¡çš„å‚æ•°ã€‚ä¸ºäº†è¡¨è¿°æ–¹ä¾¿ï¼Œæˆ‘ä»¬è¿™é‡Œè¿˜æ˜¯å®šä¹‰$\theta_k = 0$ï¼Œè¿™æ ·å°±æœ‰ $\eta_k = \theta_k^T x = 0$ï¼Œè·Ÿå‰æ–‡æåˆ°çš„ç›¸ç¬¦ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„æ¨¡å‹å‡è®¾äº†ç»™å®š $x$ çš„ $y$ çš„æ¡ä»¶åˆ†å¸ƒä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned} p(y=i|x;\theta) &= \phi_i \ &= \frac {e^{\eta_i}}{\sum^k_{j=1}e^{\eta_j}}\ &=\frac {e^{\theta_i^Tx}}{\sum^k_{j=1}e^{\theta_j^Tx}}\qquad\text{(8)}\ \end{aligned}</script><p>è¿™ä¸ªé€‚ç”¨äºè§£å†³ $y \in{1, â€¦, k}$ çš„åˆ†ç±»é—®é¢˜çš„æ¨¡å‹ï¼Œå°±å«åš Softmax å›å½’ã€‚ è¿™ç§å›å½’æ˜¯å¯¹é€»è¾‘å›å½’çš„ä¸€ç§æ‰©å±•æ³›åŒ–ã€‚</p><p>å‡è®¾ï¼ˆhypothesisï¼‰ $h$ åˆ™å¦‚ä¸‹æ‰€ç¤º:</p><script type="math/tex; mode=display">h_{\theta}(x)=\mathrm{E}[T(y) | x ; \theta]\\=\mathrm{E} \left.\left[ \begin{array}{c}{1\{y=1\}} \\ {1\{y=2\}} \\ {\vdots} \\ {1\{y=k-1\}}\end{array}\right| x ; \theta \right]\\=\left[ \begin{array}{c}{\phi_{1}} \\ {\phi_{2}} \\ {\vdots} \\ {\phi_{k-1}}\end{array}\right]\\=\left[ \begin{array}{c}{\frac{\exp \left(\theta_{1}^{T} x\right)}{\sum_{j=1}^{k} \exp \left(\theta_{j}^{T} x\right)}} \\ {\frac{\exp \left(\theta_{2}^{T} x\right)}{\sum_{j=1}^{k} \exp \left(\theta_{j}^{T} x\right)}} \\ {\vdots} \\ {\frac{\exp \left(\theta_{k-1}^{T} x\right)}{\sum_{j=1}^{k} \exp \left(\theta_{j}^{T} x\right)}}\end{array}\right]</script><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çš„å‡è®¾å‡½æ•°ä¼šå¯¹æ¯ä¸€ä¸ª $i = 1,â€¦,k$ ï¼Œç»™å‡º $p (y = i|x; \theta)$ æ¦‚ç‡çš„ä¼°è®¡å€¼ã€‚ï¼ˆè™½ç„¶å’±ä»¬åœ¨å‰é¢å‡è®¾çš„è¿™ä¸ª $h<em>\theta(x)$ åªæœ‰ $k-1$ ç»´ï¼Œä½†å¾ˆæ˜æ˜¾ $p (y = k|x; \theta)$ å¯ä»¥é€šè¿‡ç”¨ $1$ å‡å»å…¶ä»–æ‰€æœ‰é¡¹ç›®æ¦‚ç‡çš„å’Œæ¥å¾—åˆ°ï¼Œå³$1âˆ’ \sum^{k-1}</em>{i=1}\phi_i$ã€‚ï¼‰</p><p>æœ€åï¼Œå’±ä»¬å†æ¥è®²ä¸€ä¸‹å‚æ•°æ‹Ÿåˆã€‚å’Œæˆ‘ä»¬ä¹‹å‰å¯¹æ™®é€šæœ€å°äºŒä¹˜çº¿æ€§å›å½’å’Œé€»è¾‘å›å½’çš„åŸå§‹æ¨å¯¼ç±»ä¼¼ï¼Œå¦‚æœå’±ä»¬æœ‰ä¸€ä¸ªæœ‰ $m$ ä¸ªè®­ç»ƒæ ·æœ¬çš„è®­ç»ƒé›† ${(x^{(i)}, y^{(i)}); i = 1, â€¦, m}$ï¼Œç„¶åè¦ç ”ç©¶è¿™ä¸ªæ¨¡å‹çš„å‚æ•° $\theta_i$ ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå†™å‡ºå…¶ä¼¼ç„¶å‡½æ•°çš„å¯¹æ•°ï¼š</p><script type="math/tex; mode=display">\begin{aligned} l(\theta)& =\sum^m_{i=1} \log p(y^{(i)}|x^{(i)};\theta)\ &= \sum^m_{i=1}log\prod ^k_{l=1}(\frac {e^{\theta_l^Tx^{(i)}}}{\sum^k_{j=1} e^{\theta_j^T x^{(i)}}})^{1(y^{(i)}=l)}\ \end{aligned}</script><p>è¦å¾—åˆ°ä¸Šé¢ç­‰å¼çš„ç¬¬äºŒè¡Œï¼Œè¦ç”¨åˆ°ç­‰å¼$(8)$ä¸­çš„è®¾å®š $p(y|x; \theta)$ã€‚ç°åœ¨å°±å¯ä»¥é€šè¿‡å¯¹ $l(\theta)$ å–æœ€å¤§å€¼å¾—åˆ°çš„ $\theta$ è€Œå¾—åˆ°å¯¹å‚æ•°çš„æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼Œä½¿ç”¨çš„æ–¹æ³•å°±å¯ä»¥ç”¨æ¢¯åº¦ä¸Šå‡æ³•æˆ–è€…ç‰›é¡¿æ³•äº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
      <category>è½¬è½½</category>
      
    </categories>
    
    
    <tags>
      
      <tag>machine learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS229-note-2-åˆ†ç±»é—®é¢˜ä¸é€»è¾‘å›å½’</title>
    <link href="/2019/04/26/CS229-note-2-%E5%88%86%E7%B1%BB%E9%97%AE%E9%A2%98%E4%B8%8E%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/"/>
    <url>/2019/04/26/CS229-note-2-%E5%88%86%E7%B1%BB%E9%97%AE%E9%A2%98%E4%B8%8E%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/</url>
    
    <content type="html"><![CDATA[<h2 id="1-åˆ†ç±»é—®é¢˜"><a href="#1-åˆ†ç±»é—®é¢˜" class="headerlink" title="1. åˆ†ç±»é—®é¢˜"></a>1. åˆ†ç±»é—®é¢˜</h2><p>åŒºåˆ«äº<a href="./CS229-note-1-Introduction.md">CS229 note 1: Introduction</a>æåˆ°çš„å›å½’é—®é¢˜ï¼Œæˆ‘ä»¬è¿™é‡Œè¦ç ”ç©¶çš„é—®é¢˜æ˜¯åˆ†ç±»ï¼Œå³è¾“å‡ºå˜é‡æ˜¯ç¦»æ•£çš„ï¼Œéé»‘å³ç™½ã€éä¸€å³äºŒï¼Œå–å€¼èŒƒå›´ä¸å†æ˜¯å®æ•°ã€‚</p><p>å¯¹äº2-åˆ†ç±»é—®é¢˜ï¼Œæˆ‘ä»¬å€¾å‘äºæ‰¾åˆ°ä¸€ä¸ªå‡½æ•°h(x)ï¼Œè¾“å…¥ç‰¹å¾xåï¼Œç»™å‡º0æˆ–è€…1çš„ç»“æœã€‚çœ‹èµ·æ¥å°±æ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆçš„å›å½’é—®é¢˜ï¼Œæ¯•ç«Ÿç»“æœä¸éœ€è¦ç²¾ç¡®åˆ°æ•°å­—ï¼Œåªéœ€è¦ç»™å‡ºä¸€ä¸ªç±»åˆ«å°±å¯ä»¥äº†ã€‚å¯ä¸å¯ä»¥åˆ©ç”¨å›å½’é—®é¢˜çš„è§£å†³æ€è·¯æ¥è§£å†³åˆ†ç±»é—®é¢˜ï¼Ÿç­”æ¡ˆæ˜¯ä¹Ÿå¯ä»¥ï¼Œä½†ä¼šå‡ºç°ä¸€ç³»åˆ—çš„é—®é¢˜ï¼Œç›¸å½“äºç”¨ä¸€ä¸ªå¤æ‚çš„æ¨¡å‹å»æ‹Ÿåˆä¸€ä¸ªç®€å•çš„æ•°æ®ã€‚</p><p>ç›´è§‚æ¥è®²ï¼Œæˆ‘ä»¬åªéœ€è¦è®¾ç½®æŸä¸ªé˜ˆå€¼ï¼Œé«˜äºæ­¤é˜ˆå€¼çš„ä¸º1ï¼Œä½äºæ­¤é˜ˆå€¼çš„ä¸º0å³å¯ã€‚æ²¡é”™ï¼Œè¿™æ˜¯ä¸€ç§åˆ†ç±»æ–¹æ³•ã€‚</p><script type="math/tex; mode=display">g(z)=\left\{\begin{array}{ll}{1} & {\text { if } z \geq 0} \\ {0} & {\text { if } z<0}\end{array}\right.</script><p>è¿˜æœ‰å…¶ä»–çš„åˆ†ç±»æ–¹æ³•ï¼Œæ¯”å¦‚Sigmoidå‡½æ•°ï¼Œè¯¥å‡½æ•°å…·æœ‰è‰¯å¥½çš„æ€§è´¨ï¼Œæ¯”å¦‚å…‰æ»‘å¯æ±‚å¯¼ï¼Œå€¼åŸŸåœ¨(0,1)å†…ç­‰ç­‰ã€‚<br><img src="/2019/04/26/CS229-note-2-%E5%88%86%E7%B1%BB%E9%97%AE%E9%A2%98%E4%B8%8E%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/2019-04-26-20-12-09.png" alt></p><script type="math/tex; mode=display">g(z)=\frac{1}{1+e^{-z}}</script><p>æˆ‘ä»¬åˆ©ç”¨Sigmoidå‡½æ•°ä½œä¸º$h_{\theta}(x)$ï¼Œè°ƒæ•´Î¸ï¼Œä½¿å¾—åˆ†ç±»å™¨æ•ˆæœæœ€å¥½ï¼Œè¿™å°±æ˜¯é€»è¾‘æ–¯è’‚å›å½’æ¨¡å‹ã€‚</p><script type="math/tex; mode=display">h_{\theta}(x)=g\left(\theta^{T} x\right)=\frac{1}{1+e^{-\theta^{T} x}}</script><p>è¯·æ³¨æ„ï¼Œè™½ç„¶æ˜¯å›å½’æ¨¡å‹ï¼Œä½†é€»è¾‘æ–¯è’‚å›å½’åšçš„äº‹æƒ…å…¶å®æ˜¯åˆ†ç±»ã€‚é—®é¢˜åˆåˆ‡æ¢åˆ°å¦‚ä½•æ„å»ºä¸€ä¸ªåˆç†çš„ã€ä»¥Î¸ä¸ºå˜é‡çš„å‡½æ•°ï¼Œå¯¹å…¶ä¼˜åŒ–ã€æ‰¾åˆ°æœ€ä½ç‚¹ï¼Ÿ</p><p>è®©æˆ‘ä»¬ä»¥æŠ›ç¡¬å¸ä¸ºä¾‹ï¼Œé˜è¿°äºŒå…ƒåˆ†ç±»é—®é¢˜ã€‚æŠ›ç¡¬å¸äº‹ä»¶ç¬¦åˆ0-1åˆ†å¸ƒï¼Œå³äº‹æƒ…å‘ç”Ÿæ˜¯1ï¼Œä¸å‘ç”Ÿæ˜¯0ã€‚å¦‚æœè¿ç»­æŠ›å¾ˆå¤šæ¬¡ç¡¬å¸ï¼Œé—®æœ‰å¤šå°‘æ¬¡æ­£é¢ï¼Œå¤šå°‘æ¬¡åé¢çš„æ¦‚ç‡ï¼Œé‚£è¿™å°±æ˜¯ä¼¯åŠªåˆ©åˆ†å¸ƒï¼Œå³äºŒé¡¹åˆ†å¸ƒã€‚</p><p>äºŒåˆ†ç±»é—®é¢˜ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå·²çŸ¥æ ·æœ¬xï¼Œåœ¨å‚æ•°ä¸ºÎ¸çš„æƒ…å†µä¸‹ï¼Œy=1å³æ­£é¢çš„æ¦‚ç‡ï¼Œå³ä¸ºh(x)ï¼Œy=0å³åé¢çš„æ¦‚ç‡ä¸º1-h(x)ã€‚</p><script type="math/tex; mode=display">\begin{array}{l}{P(y=1 | x ; \theta)=h_{\theta}(x)} \\ {P(y=0 | x ; \theta)=1-h_{\theta}(x)}\end{array}</script><p>å°†ä¸¤ä¸ªå¼å­é€šè¿‡ä¸€äº›æ•°å­¦æŠ€å·§ç»“åˆèµ·æ¥ï¼Œæ–¹ä¾¿æ•°å­¦è®¨è®ºï¼š</p><script type="math/tex; mode=display">p(y | x ; \theta)=\left(h_{\theta}(x)\right)^{y}\left(1-h_{\theta}(x)\right)^{1-y}</script><p>æ¨å¹¿åˆ°å…¨éƒ¨æ•°æ®ï¼šåœ¨å‚æ•°ä¸ºÎ¸æ—¶ï¼Œå·²çŸ¥è¾“å…¥æ•°æ®é›†ä¸ºXï¼Œåˆ™è¾“å‡ºä¸º$\vec y$çš„æ¦‚ç‡å¯ä»¥ç”¨ä¸‹é¢çš„å‡½æ•°æ¥è¡¨ç¤ºï¼š</p><script type="math/tex; mode=display">\begin{aligned} L(\theta) &=p(\vec{y} | X ; \theta) \\ &=\prod_{i=1}^{m} p\left(y^{(i)} | x^{(i)} ; \theta\right) \\ &=\prod_{i=1}^{m}\left(h_{\theta}\left(x^{(i)}\right)\right)^{y^{(i)}}\left(1-h_{\theta}\left(x^{(i)}\right)\right)^{1-y^{(i)}} \end{aligned}\\\begin{aligned} \ell(\theta) &=\log L(\theta) \\ &=\sum_{i=1}^{m} y^{(i)} \log h\left(x^{(i)}\right)+\left(1-y^{(i)}\right) \log \left(1-h\left(x^{(i)}\right)\right) \end{aligned}</script><p>åˆå˜æˆäº†æˆ‘ä»¬ç†Ÿæ‚‰çš„æœ€å¤§ä¼¼ç„¶ä¼°è®¡é—®é¢˜ï¼Œå³æ±‚Î¸ï¼Œä½¿å¾—$\ell(\theta)$æœ€å¤§ã€‚æˆ‘ä»¬æ—¢å¯ä»¥æ±‚å¯¼æ•°ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨éšæœºæ¢¯åº¦ä¸‹é™æ³•ã€‚</p><script type="math/tex; mode=display">\begin{aligned} \frac{\partial}{\partial \theta_{j}} \ell(\theta) &=\left(y \frac{1}{g\left(\theta^{T} x\right)}-(1-y) \frac{1}{1-g\left(\theta^{T} x\right)}\right) \frac{\partial}{\partial \theta_{j}} g\left(\theta^{T} x\right) \\ &=\left(y \frac{1}{g\left(\theta^{T} x\right)}-(1-y) \frac{1}{1-g\left(\theta^{T} x\right)}\right) g\left(\theta^{T} x\right)\left(1-g\left(\theta^{T} x\right)\frac{\partial}{\partial \theta_{j}} \theta^{T} x\right.\\ &=\left(y\left(1-g\left(\theta^{T} x\right)\right)-(1-y) g\left(\theta^{T} x\right)\right) x_{j} \\ &=\left(y-h_{\theta}(x)\right) x_{j} \end{aligned}\\\begin{aligned}\theta_{j} :=\theta_{j}+\alpha\left(y^{(i)}-h_{\theta}\left(x^{(i)}\right)\right) x_{j}^{(i)}\end{aligned}</script><p>æœ‰æ²¡æœ‰æ„Ÿè§‰æ±‚åå¯¼æ•°åçš„å½¢å¼ä¸å›å½’é—®é¢˜å¾ˆç›¸ä¼¼ï¼Ÿè¿™èƒŒååˆæœ‰ç€æ€æ ·çš„å…±åŒç‚¹ï¼Ÿ</p><p>è¿˜æœ‰æ›´å·§çš„å‘¢ã€‚è®°å¾—æˆ‘ä»¬ä¹‹å‰è¯´çš„$<br>g(z)=\left{\begin{array}{ll}{1} &amp; {\text { if } z \geq 0} \ {0} &amp; {\text { if } z&lt;0}\end{array}\right.<br>$å—ï¼Ÿé‡‡ç”¨è¯¥åˆ†ç±»å‡½æ•°ä½œä¸ºåˆ†ç±»å™¨è¿›è¡Œè®­ç»ƒçš„æ¨¡å‹ï¼Œå«åšæ„ŸçŸ¥å™¨(perceptron learning algorithm)æ¨¡å‹ã€‚å®ƒçš„æ¢¯åº¦ä¸‹é™ç®—æ³•ä¹Ÿæ˜¯è¿™ç§å½¢å¼ï¼š$\theta<em>{j} :=\theta</em>{j}+\alpha\left(y^{(i)}-h<em>{\theta}\left(x^{(i)}\right)\right) x</em>{j}^{(i)}$</p><p>è¿™èƒŒåçš„åŸå› å°†ç•™åœ¨æˆ‘ä¹‹åçš„æ›´æ–°ä¸­è§£ç­”ã€‚</p><h2 id="2-å…¶ä»–ä¼˜åŒ–ä¼¼ç„¶å‡½æ•°çš„æ–¹æ³•ï¼šç‰›é¡¿æ³•"><a href="#2-å…¶ä»–ä¼˜åŒ–ä¼¼ç„¶å‡½æ•°çš„æ–¹æ³•ï¼šç‰›é¡¿æ³•" class="headerlink" title="2.å…¶ä»–ä¼˜åŒ–ä¼¼ç„¶å‡½æ•°çš„æ–¹æ³•ï¼šç‰›é¡¿æ³•"></a>2.å…¶ä»–ä¼˜åŒ–ä¼¼ç„¶å‡½æ•°çš„æ–¹æ³•ï¼šç‰›é¡¿æ³•</h2><p>é™¤äº†å‰é¢è¯´çš„æ¢¯åº¦ä¸‹é™æ³•ï¼Œç‰›é¡¿æ³•ä¹Ÿæ˜¯æœºå™¨å­¦ä¹ ä¸­ç”¨çš„æ¯”è¾ƒå¤šçš„ä¸€ç§ä¼˜åŒ–ç®—æ³•ã€‚ç‰›é¡¿æ³•éµå¾ªè¿™æ ·çš„ä¼˜åŒ–è§„åˆ™ï¼š</p><script type="math/tex; mode=display">\theta :=\theta-\frac{f(\theta)}{f^{\prime}(\theta)}</script><p><img src="/2019/04/26/CS229-note-2-%E5%88%86%E7%B1%BB%E9%97%AE%E9%A2%98%E4%B8%8E%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/2019-04-26-20-52-14.png" alt><br>é¦–å…ˆé€‰æ‹©ä¸€ç‚¹ï¼Œä»è¯¥ç‚¹ä½œå‡½æ•°çš„åˆ‡çº¿ï¼Œäº¤xè½´äºæ–°çš„ç‚¹x2ï¼Œx2å†ä½œåˆ‡çº¿ï¼Œäº¤xè½´äºæ–°çš„ç‚¹x3ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚</p><p>æœ€ç»ˆç‰›é¡¿æ³•ä¼šæ‰¾åˆ°f(x)æœ€å°æ—¶çš„xå€¼ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¼šå¾ˆå¿«ï¼Œæ¯”æ¢¯åº¦ä¸‹é™è¦å¿«ã€‚<br>å¦‚æœæˆ‘ä»¬æƒ³è¦ä¼˜åŒ–çš„å‡½æ•°æ˜¯$\ell^{\prime}(\theta)$ï¼Œåˆ™ç‰›é¡¿æ³•ä¼˜åŒ–è§„åˆ™ä¸ºï¼š</p><script type="math/tex; mode=display">\theta :=\theta-\frac{\ell^{\prime}(\theta)}{\ell^{\prime \prime}(\theta)}</script><p>ä¸Šé¢æˆ‘ä»¬å‡è®¾Î¸æ˜¯ä¸€ä¸ªå®å˜é‡ã€‚å¦‚æœÎ¸æ˜¯ä¸€ä¸ªå‘é‡ï¼Œåˆ™ç‰›é¡¿æ³•å˜æˆï¼š</p><script type="math/tex; mode=display">\theta :=\theta-H^{-1} \nabla_{\theta} \ell(\theta)</script><p>å…¶ä¸­ï¼š</p><script type="math/tex; mode=display">H_{i j}=\frac{\partial^{2} \ell(\theta)}{\partial \theta_{i} \partial \theta_{j}}</script><p>åƒè¿™æ ·å°†ç‰›é¡¿æ³•åº”ç”¨äºé€»è¾‘æ–¯è’‚å›å½’çš„ä¼¼ç„¶å‡½æ•°ä¼˜åŒ–é—®é¢˜ä¸Šï¼Œå«åšfisherâ€™s scoringã€‚</p><h2 id="3-æ€»ç»“"><a href="#3-æ€»ç»“" class="headerlink" title="3. æ€»ç»“"></a>3. æ€»ç»“</h2><p>æˆ‘ä»¬ä¸»è¦è®¨è®ºäº†åˆ†ç±»é—®é¢˜çš„æ¦‚å¿µï¼ŒäºŒåˆ†ç±»é—®é¢˜çš„å¤„ç†æ–¹æ³•ï¼šæ„ŸçŸ¥å™¨ã€é€»è¾‘æ–¯è’‚å›å½’ï¼Œä»¥åŠå°†ç‰›é¡¿æ³•åº”ç”¨äºé€»è¾‘å›å½’ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>machine learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS229 note 1: Introduction</title>
    <link href="/2019/04/26/CS229-note-1-Introduction/"/>
    <url>/2019/04/26/CS229-note-1-Introduction/</url>
    
    <content type="html"><![CDATA[<h2 id="1-Supervised-learning"><a href="#1-Supervised-learning" class="headerlink" title="1. Supervised learning"></a>1. Supervised learning</h2><p>æœºå™¨å­¦ä¹ ï¼Œæœºå™¨ä»æ•°æ®ä¸­å­¦ä¹ å›ºå®šçš„é—®é¢˜-ç­”æ¡ˆæ¨¡å¼ï¼Œå½¢æˆå›ºå®šçš„é—®ç­”æ¨¡å‹çš„è¿‡ç¨‹ã€‚</p><p>æœºå™¨å­¦ä¹ çš„è¿‡ç¨‹å¯ç”¨ä¸‹å›¾è¡¨ç¤ºï¼š</p><p><img src="/2019/04/26/CS229-note-1-Introduction/2019-04-26-12-57-21.png" alt></p><p>æœºå™¨é€šè¿‡ç‰¹å®šçš„å­¦ä¹ æ–¹æ³•Learning Algorithmå­¦ä¹ å·²çŸ¥çš„é—®é¢˜-ç­”æ¡ˆæ•°æ®é›†Training Setï¼ŒLearning Algorithmæœ€ç»ˆä¼šå¾—åˆ°ä¸€ä¸ªä¸çœŸå®æ¨¡å‹ç›¸å·®æ— å‡ çš„å‡è¯´æ¨¡å‹hypothesisã€‚å¾—åˆ°è¯¥æ¨¡å‹ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨å®ƒï¼Œå¯¹å…¨æ–°çš„é—®é¢˜çš„ç­”æ¡ˆä½œå‡ºé¢„æµ‹ã€‚</p><p>æœºå™¨é€šè¿‡é—®é¢˜-ç­”æ¡ˆè®­ç»ƒæ¨¡å‹çš„è¿‡ç¨‹ï¼Œç§°ä¹‹ä¸ºç›‘ç£å­¦ä¹ è¿‡ç¨‹ã€‚é—®é¢˜æ˜¯ç”±ä¸€ç»„å·²çŸ¥æ•°æ®æ„æˆçš„è¾“å…¥ï¼Œæ¯”å¦‚æˆ¿å±‹çš„é¢ç§¯ã€ç…§å°„ç‡ã€å§å®¤æ•°ç›®ç­‰ç­‰ï¼›ç­”æ¡ˆåˆ™æ˜¯ä¸€ä¸ªç¡®åˆ‡çš„ç»“è®ºï¼Œæ¯”å¦‚æˆ¿å±‹çš„ä»·æ ¼ã€‚åˆšæ‰ä¸¾çš„ä¾‹å­å°±æ˜¯ä¾ç…§æˆ¿å±‹çš„é¢ç§¯å’Œå…¶ä»–ä¿¡æ¯æ¥é¢„æµ‹æˆ¿å±‹çš„ä»·æ ¼ï¼Œè¾“å‡ºå€¼æ˜¯ä¸€ä¸ªå®æ•°ï¼ˆè¿ç»­å˜é‡ï¼‰ã€‚è¿™åœ¨ç»Ÿè®¡å­¦ä¸Šç§°ä¹‹ä¸ºå›å½’é—®é¢˜ã€‚å‡è®¾æˆ¿å±‹çš„ä»·æ ¼å’Œé¢ç§¯æˆæ­£æ¯”ï¼Œåˆ™ç§°ä¸Šä¸ªé—®é¢˜ä¸ºçº¿æ€§å›å½’é—®é¢˜ã€‚</p><p>å¥½äº†ï¼Œé‚£ä¹ˆæœºå™¨æ€ä¹ˆå®ç°å­¦ä¹ çš„å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä»¥é¢„æµ‹æˆ¿å±‹ä»·æ ¼ä¸ºä¾‹ï¼Œæ„å»ºä¸€ä¸ªå­¦ä¹ æ¨¡å‹ã€‚</p><p>é¦–å…ˆï¼Œå›å½’é—®é¢˜çš„æœ¬è´¨å°±æ˜¯é€šè¿‡ç»™å®šä¸€ç³»åˆ—çš„å‚æ•°ï¼Œæ‹Ÿåˆå‡ºä¸€ä¸ªå‡½æ•°h(x)ï¼Œè¿™ä¸ªå‡½æ•°åº”è¯¥ä¸çœŸå®å‡½æ•°y(x)è¶Šæ¥è¿‘è¶Šå¥½ã€‚h(x)å¤§æ¦‚é•¿æˆè¿™æ ·ï¼š</p><script type="math/tex; mode=display">h_{\vec\theta}(\vec x)=\theta_0+\theta_1x_1+\theta_2x_2+\cdots\\=\vec\theta^T\vec x</script><p>ä»Šåä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œ$\vec x$å’Œ$\vec \theta$ç­‰ç­‰å°±ä¸åŠ ä¸Šç®­å¤´äº†ï¼Œä»–ä»¬éƒ½è¡¨ç¤ºç”±è®¸å¤šåˆ†é‡çš„å‘é‡ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œå­¦ä¹ æ•ˆæœçš„å¥½åï¼Œå–å†³äº$\theta$é€‰æ‹©çš„å¥½åï¼Œé€‰æ‹©çš„å¥½äº†$h_{\theta}(x)$å°±æ›´é€¼è¿‘çœŸå®çš„yã€‚å­¦ä¹ çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ä¸æ–­ä¿®æ”¹$\theta$çš„è¿‡ç¨‹ã€‚</p><p>é‚£æˆ‘ä»¬æ€ä¹ˆæ”¹$\theta$å‘¢ï¼Ÿå›æƒ³æˆ‘ä»¬çš„æ•°å­¦å»ºæ¨¡è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ªå‡½æ•°ï¼Œè‡ªå˜é‡ä¸º$\theta$ï¼Œæ£€éªŒy(x)ä¸h(x)çš„è·ç¦»ï¼ˆå³å·®å€¼ï¼‰ï¼Œè·ç¦»è¶Šå°åˆ™è¯´æ˜$\theta$è¶Šå®Œç¾ã€‚è¿™ä¸å°±è½¬åŒ–æˆäº†ä¸€ä¸ªæœ€ä¼˜åŒ–é—®é¢˜äº†å—ï¼Ÿå¦‚æœæ„é€ å‡ºæ¥çš„å‡½æ•°è¿˜èƒ½å¤Ÿæ±‚å¯¼çš„è¯ï¼Œæ±‚ä¸€æ¬¡å¯¼ï¼Œæ‰¾åˆ°æœ€ä½ç‚¹ï¼Œå²‚ä¸æ˜¯ç¾æ»‹æ»‹ï¼Ÿå› æ­¤æˆ‘ä»¬æ„é€ å‡ºæ¥äº†ä»¥ä¸‹å‡½æ•°ï¼š</p><script type="math/tex; mode=display">J(\theta)=\frac{1}{2}\Sigma_{i=1}^{m}(h_{\theta}(x^{(i)})-y^{(i)})</script><p>å…¶ä¸­mæ˜¯æ ·æœ¬ä¸ªæ•°ï¼Œä»¥ä¸Šå°±æ˜¯<strong>çº¿æ€§å›å½’</strong>é—®é¢˜çš„<strong>æŸå¤±å‡½æ•°</strong>ï¼ŒæŸå¤±å‡½æ•°è¶Šå°ï¼Œè®­ç»ƒå¾—è¶Šå¥½ã€‚</p><h2 id="2-æ±‚è§£æŸå¤±å‡½æ•°æœ€å°å€¼çš„è¿­ä»£æ€è·¯"><a href="#2-æ±‚è§£æŸå¤±å‡½æ•°æœ€å°å€¼çš„è¿­ä»£æ€è·¯" class="headerlink" title="2. æ±‚è§£æŸå¤±å‡½æ•°æœ€å°å€¼çš„è¿­ä»£æ€è·¯"></a>2. æ±‚è§£æŸå¤±å‡½æ•°æœ€å°å€¼çš„è¿­ä»£æ€è·¯</h2><p>æŒ‰ç†è¯´ï¼Œæˆ‘ä»¬ç›´æ¥å¯¹æŸå¤±å‡½æ•°æ±‚å¯¼ï¼Œé©¬ä¸Šå°±çŸ¥é“äºŒæ¬¡å‡½æ•°çš„æœ€ä½ç‚¹äº†ã€‚æ±‚è¿™ä¸ªå‡½æ•°çš„å¯¼æ•°å¯ä¸å¤ªå®¹æ˜“ï¼Œé¦–å…ˆæˆ‘ä»¬ä»¥éè§£ææ–¹æ³•æ¥è¿­ä»£æ±‚è§£è¯¥å‡½æ•°ã€‚æˆ‘ä»¬é‡‡ç”¨æ¢¯åº¦ä¸‹é™æ³•ï¼Œé€æ­¥é€¼è¿‘å…¨å±€æœ€ä¼˜ç‚¹ï¼š</p><script type="math/tex; mode=display">\theta_j:=\theta_j-\alpha\frac{\partial}{\partial\theta_j}J(\theta)</script><p>$\theta$ç»´åº¦å¤ªå¤šï¼Œæ±‚å¯¼æ˜¯ä¸ªå›°éš¾çš„äº‹æƒ…ã€‚å¦‚æœå¯¹$\theta$æ±‚æ¢¯åº¦ï¼Œå¾—åˆ°æŸä¸€ç‚¹å¤„ä¸‹é™é€Ÿåº¦æœ€å¿«çš„æ–¹å‘ï¼Œå³å¯é€æ­¥å®ç°ä¼˜åŒ–ã€‚ä¸‹é¢æ˜¯å¯¹$J(\theta)$æ±‚åå¯¼æ•°çš„è¿‡ç¨‹ï¼š</p><script type="math/tex; mode=display">\frac{\partial J(\theta)}{\partial \theta_j}=\frac{1}{2}\Sigma_{i=i}^{m}\frac{\partial(\theta^Tx^{(i)}-y^{(i)})^2}{\partial\theta_j}\\=\Sigma_{i=i}^{m}(\theta^Tx^{(i)}-y^{(i)})\cdot x_j^{(i)}</script><p>å› æ­¤æˆ‘ä»¬å¾—åˆ°äº†ä»¥ä¸‹å­¦ä¹ ç®—æ³•ï¼š</p><p><img src="/2019/04/26/CS229-note-1-Introduction/2019-04-26-14-57-21.png" alt></p><p>è¯¥ç®—æ³•å…·æœ‰â€œç¦»ç»ˆç‚¹è¶Šè¿‘ï¼Œæ”¶æ•›é€Ÿåº¦è¶Šæ…¢â€çš„ç‰¹ç‚¹ã€‚è¯¥ç®—æ³•è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå³æ¯è®¡ç®—ä¸€ä¸ª$\theta$çš„åˆ†é‡$\theta_j$ï¼Œç®—æ³•éƒ½éœ€è¦éå†ä¸€éæ•´ä¸ªæ•°æ®é›†ã€‚æ•ˆç‡æ˜¯O(n*n*m*k),næ˜¯ç»´åº¦ï¼Œmæ˜¯æ•°æ®é›†å¤§å°ï¼Œkæ˜¯ç›´åˆ°æ”¶æ•›ä¸ºæ­¢å¾ªç¯çš„æ¬¡æ•°ã€‚</p><p>å› ä¸ºæ¯åˆ¤æ–­ä¸€æ¬¡ï¼Œéƒ½éœ€è¦æ•´æ‰¹æ•°æ®çš„æ”¯æŒï¼Œå› æ­¤è¿™ç§æ¢¯åº¦ä¸‹é™æ–¹å¼åˆç§°ä¹‹ä¸º<strong>æ‰¹æ¢¯åº¦ä¸‹é™</strong>(batch gradient descent)ã€‚</p><p>åšä¸€ä¸ªä¸æ°å½“çš„æ¯”å–»ï¼šæ‰¹æ¢¯åº¦ä¸‹é™å¥½æ¯”æ¯åšä¸€æ¬¡é€‰æ‹©ï¼Œæ€»æ˜¯è¦è¯¢é—®å‘¨è¾¹æ‰€æœ‰çš„äººçš„æ„è§ï¼Œä¹‹åç»™å‡ºä¸€ä¸ªè®©æ‰€æœ‰äººéƒ½æ¯”è¾ƒæ»¡æ„çš„æ–¹å‘ã€‚</p><p>ä¸ä¹‹ç›¸å¯¹åº”ï¼Œå¦‚æœæˆ‘åªé—®ä¸€ä¸ªäººçš„æ„è§ï¼Œå°±ç»™å‡ºç»“è®ºï¼Œè¿™ä¸å°±èŠ‚çº¦äº†éå†æ•´ä¸ªæ•°æ®é›†çš„æ—¶é—´äº†å—ï¼Ÿè¿™ç§æ–¹æ³•å«åš<strong>éšæœºæ¢¯åº¦ä¸‹é™</strong>(stochastic gradient descent)ã€‚</p><p>ç®—æ³•è¡¨ç¤ºå¦‚ä¸‹ï¼š</p><p><img src="/2019/04/26/CS229-note-1-Introduction/2019-04-26-15-17-07.png" alt></p><p>è¯¥ç®—æ³•çš„æ•ˆç‡æ˜¯O(n<em>\n\</em>k)ã€‚è™½ç„¶æ€§èƒ½å¾—åˆ°äº†æå‡ï¼Œä½†æ˜¯ç‰ºç‰²äº†ä¸€éƒ¨åˆ†å‡†ç¡®æ€§ã€‚äº‹å®è¯æ˜éšæœºæ¢¯åº¦ä¸‹é™èƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šä»£æ›¿æ‰¹æ¢¯åº¦ä¸‹é™ï¼Œæˆ‘ä»¬æ›´å¤šåœ°ä½¿ç”¨å°æ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•ï¼Œå³ç»“åˆäºŒè€…çš„ä¼˜åŠ¿ï¼Œåšå†³å®šä¹‹å‰é—®é—®ä¸€éƒ¨åˆ†äººçš„æ„è§å³å¯ã€‚</p><h2 id="3-æ±‚è§£æŸå¤±å‡½æ•°æœ€å°å€¼çš„ä»£æ•°è¯æ˜"><a href="#3-æ±‚è§£æŸå¤±å‡½æ•°æœ€å°å€¼çš„ä»£æ•°è¯æ˜" class="headerlink" title="3. æ±‚è§£æŸå¤±å‡½æ•°æœ€å°å€¼çš„ä»£æ•°è¯æ˜"></a>3. æ±‚è§£æŸå¤±å‡½æ•°æœ€å°å€¼çš„ä»£æ•°è¯æ˜</h2><p>å‰æ–‡è¯´è¿‡ï¼Œå¯¹$J(\theta)$æ±‚å¯¼ä¸æ˜¯ä¸è¡Œï¼Œè€Œæ˜¯å› ä¸ºå¦‚æœ$\theta$ç»´åº¦å˜é«˜ï¼Œæ±‚å¯¼ç›¸å¯¹å›°éš¾ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥ç¡¬è‚›è¿™ä¸ªæ–¹æ³•ã€‚</p><p>å…ˆè¦åšä¸€äº›æ•°å­¦çŸ¥è¯†é“ºå«ï¼Œå³çŸ©é˜µçš„æ±‚å¯¼è¿ç®—ï¼š</p><ol><li>å‡½æ•°å¯¹çŸ©é˜µæ±‚å¯¼<br>å¯¹äºä¸€ä¸ªå‡½æ•°$f:\mathbb{R}^{m\times n}\mapsto\mathbb{R}$ï¼Œå³è¾“å…¥ä¸€ä¸ªçŸ©é˜µï¼Œè¾“å‡ºä¸€ä¸ªå€¼çš„æ­¤ç±»å‡½æ•°ï¼Œå®šä¹‰få¯¹çŸ©é˜µAæ±‚å¯¼(the derivative of f with respect to A)ä¸ºï¼š<script type="math/tex; mode=display">\nabla_{A} f(A)=\left[ \begin{array}{ccc}{\frac{\partial f}{\partial A_{11}}} & {\cdots} & {\frac{\partial f}{\partial A_{1 n}}} \\ {\vdots} & {\ddots} & {\vdots} \\ {\frac{\partial f}{\partial A_{m 1}}} & {\cdots} & {\frac{\partial f}{\partial A_{m n}}}\end{array}\right]</script></li></ol><p>ä¸¾ä¸ªä¾‹å­ï¼Œè‹¥å®šä¹‰$A=\left[ \begin{array}{ll}{A<em>{11}} &amp; {A</em>{12}} \ {A<em>{21}} &amp; {A</em>{22}}\end{array}\right]$ï¼Œ$f(A)=\frac{3}{2} A<em>{11}+5 A</em>{12}^{2}+A<em>{21} A</em>{22}$ï¼Œé‚£ä¹ˆæœ‰$\nabla<em>{A} f(A)=\left[ \begin{array}{cc}{\frac{3}{2}} &amp; {10 A</em>{12}} \ {A<em>{22}} &amp; {A</em>{21}}\end{array}\right]$ã€‚</p><ol><li>çŸ©é˜µçš„è¿¹(trace, tr)<br>çŸ©é˜µçš„è¿¹ç‰¹æŒ‡æ–¹é˜µçš„è¿¹ã€‚çŸ©é˜µçš„è¿¹å°±æ˜¯ä¸Šæ–‡æ‰€å®šä¹‰çš„å‡½æ•°fçš„ä¸€ä¸ªä»£è¡¨ã€‚å®šä¹‰å¦‚ä¸‹ï¼š</li></ol><script type="math/tex; mode=display">\operatorname{tr} A=\sum_{i=1}^{n} A_{i i}</script><p>çŸ©é˜µçš„è¿¹æœ‰ä»¥ä¸‹æ€§è´¨ï¼š</p><p>$tr(AB)=tr(BA)\<br>tr(ABC)=tr(CAB)=tr(BCA)\<br>tr(ABCD)=tr(DABC)=tr(CDAB)=tr(BCDA)\<br>trA=trA^T\<br>tr(A+B)=trA+trB\<br>traA=atrA$</p><p>çŸ©é˜µçš„è½¬ç½®çš„æ€§è´¨ï¼š</p><p>$(AB)^T= B^TA^T \<br>(A+B)^T=A^T+B^T$</p><p>å¯¹è¿¹æ±‚å¯¼çš„å‡ ä¸ªç»“è®ºï¼š<br>$\begin{aligned} \nabla<em>{A} \operatorname{tr} A B &amp;=B^{T} \ \nabla</em>{A^{T}} f(A) &amp;=\left(\nabla<em>{A} f(A)\right)^{T} \ \nabla</em>{A} \operatorname{tr} A B A^{T} C &amp;=C A B+C^{T} A B^{T} \ \nabla_{A}|A| &amp;=|A|\left(A^{-1}\right)^{T} \end{aligned}$</p><ol><li>ä¸€äº›ç¬¦å·çš„å®šä¹‰<br>å¦‚æœXæ˜¯ç”±æ ·æœ¬æ„æˆçš„çŸ©é˜µï¼Œ<script type="math/tex; mode=display">X=\left[ \begin{array}{c}{-\left(x^{(1)}\right)^{T}-} \\ {-\left(x^{(2)}\right)^{T}-} \\ {\vdots} \\ {-\left(x^{(m)}\right)^{T}-}\end{array}\right]</script>yæ˜¯ç”±çœŸå®ç»“æœç»„æˆçš„å‘é‡ï¼Œ<script type="math/tex; mode=display">\vec{y}=\left[ \begin{array}{c}{y^{(1)}} \\ {y^{(2)}} \\ {\vdots} \\ {y^{(m)}}\end{array}\right]</script></li></ol><p>ç”±äº$h_{\theta}\left(x^{(i)}\right)=\left(x^{(i)}\right)^{T} \theta$ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸‹å¼ï¼š</p><script type="math/tex; mode=display">X \theta-\vec{y}=\left[ \begin{array}{c}{\left(x^{(1)}\right)^{T} \theta} \\ {\vdots} \\ {\left(x^{(m)}\right)^{T} \theta}\end{array}\right]-\left[ \begin{array}{c}{y^{(1)}} \\ {\vdots} \\ {y^{(m)}}\end{array}\right]$$</script><p>=\left[ \begin{array}{c}{h<em>{\theta}\left(x^{(1)}\right)-y^{(1)}} \ {\vdots} \ {h</em>{\theta}\left(x^{(m)}\right)-y^{(m)}}\end{array}\right]</p><script type="math/tex; mode=display">åˆ™æˆ‘ä»¬çš„æŸå¤±å‡½æ•°å¯ä»¥åŒ–æˆï¼š</script><p>\begin{aligned} \frac{1}{2}(X \theta-\vec{y})^{T}(X \theta-\vec{y}) &amp;=\frac{1}{2} \sum<em>{i=1}^{m}\left(h</em>{\theta}\left(x^{(i)}\right)-y^{(i)}\right)^{2} \ &amp;=J(\theta) \end{aligned}</p><script type="math/tex; mode=display">4. å¼€å§‹æ¨å¯¼æ ¹æ®ä¸Šé¢çš„ç»“è®ºï¼Œè®©æŸå¤±å‡½æ•°å¯¹$\theta$æ±‚å¯¼ï¼Œå¾—åˆ°ï¼š</script><p>\begin{aligned} \nabla<em>{\theta} J(\theta) &amp;=\nabla</em>{\theta} \frac{1}{2}(X \theta-\vec{y})^{T}(X \theta-\vec{y}) \ &amp;=\frac{1}{2} \nabla<em>{\theta}\left(\theta^{T} X^{T} X \theta-\theta^{T} X^{T} \vec{y}-\vec{y}^{T} X \theta+\vec{y}^{T} \vec{y}\right) \ &amp;=\frac{1}{2} \nabla</em>{\theta} \operatorname{tr}\left(\theta^{T} X^{T} X \theta-\theta^{T} X^{T} \vec{y}-\vec{y}^{T} X \theta+\vec{y}^{T} \vec{y}\right) \ &amp;=\frac{1}{2} \nabla_{\theta}\left(\operatorname{tr} \theta^{T} X^{T} X \theta-2 \operatorname{tr} \vec{y}^{T} X \theta\right) \ &amp;=\frac{1}{2}\left(X^{T} X \theta+X^{T} X \theta-2 X^{T} \vec{y}\right) \ &amp;=X^{T} X \theta-X^{T} \vec{y} \end{aligned}</p><script type="math/tex; mode=display">ä»¤å¯¼æ•°ä¸ºé›¶ï¼Œæ±‚å¾—é›¶ç‚¹çš„$\theta$å€¼ä¸ºï¼š</script><p>\theta=\left(X^{T} X\right)^{-1} X^{T} \vec{y}</p><script type="math/tex; mode=display"># 4. ä¸ºä»€ä¹ˆä½¿ç”¨æœ€å°äºŒä¹˜ä½œä¸ºæŸå¤±å‡½æ•°ï¼Ÿé™¤äº†æ˜“äºæ•°å­¦å¤„ç†ä¹‹å¤–ï¼Œè¿˜æœ‰æ›´æ·±åˆ»çš„é“ç†ã€‚æˆ‘ä»¬å°†ä»æ¦‚ç‡çš„è§’åº¦è§£é‡Šä¸ºä»€ä¹ˆä½¿ç”¨æœ€å°äºŒä¹˜æ³•ä½œä¸ºæŸå¤±å‡½æ•°ã€‚æˆ‘ä»¬è¯´ï¼Œç°å®ç”Ÿæ´»ä¸­çš„å¤§å¤šæ•°æ¨¡å‹ï¼Œç”šè‡³æ˜¯å…¨éƒ¨æ¨¡å‹ï¼Œå…¶è¾“å…¥éƒ½å«æœ‰ä¸€å®šçš„è¯¯å·®$\epsilon$ã€‚è¿™äº›è¯¯å·®å„è‡ªç¬¦åˆä¸åŒçš„åˆ†å¸ƒã€‚</script><p>y^{(i)}=\theta^{T} x^{(i)}+\epsilon^{(i)}</p><script type="math/tex; mode=display">æ ¹æ®å¤§æ•°å®šå¾‹ï¼Œå¤šä¸ªéšæœºå˜é‡çš„ç»“æœè¶‹è¿‘äºé«˜æ–¯åˆ†å¸ƒï¼ˆæ­£æ€åˆ†å¸ƒï¼‰ï¼Œå³$\epsilon^{(i)}\sim\mathcal{N}\left(0, \sigma^{2}\right)$ã€‚åˆ™$\epsilon^{(i)}$çš„æ¦‚ç‡æ˜¯ï¼š</script><p>p\left(\epsilon^{(i)}\right)=\frac{1}{\sqrt{2 \pi} \sigma} \exp \left(-\frac{\left(\epsilon^{(i)}\right)^{2}}{2 \sigma^{2}}\right)</p><script type="math/tex; mode=display">å°†$y^{(i)}=\theta^{T} x^{(i)}+\epsilon^{(i)}$å¸¦å…¥å¾—ï¼š</script><p>p\left(y^{(i)} | x^{(i)} ; \theta\right)=\frac{1}{\sqrt{2 \pi} \sigma} \exp \left(-\frac{\left(y^{(i)}-\theta^{T} x^{(i)}\right)^{2}}{2 \sigma^{2}}\right)</p><script type="math/tex; mode=display">ä¸Šå¼å·¦è¾¹æ˜¯åœ¨ç¬¬iä¸ªæ ·æœ¬ä¸ºxã€å‚æ•°ä¸ºÎ¸çš„æ¡ä»¶ä¸‹ï¼Œå¾—åˆ°yçš„æ¦‚ç‡ã€‚ä¸Šå¼å®Œå…¨æ˜¯ä¸€ä¸ªä¸Î¸æœ‰å…³çš„å‡½æ•°ï¼Œå› ä¸ºæ ·æœ¬xå’Œyéƒ½æ˜¯å›ºå®šçš„ã€‚åˆ«å¿˜äº†ï¼Œæˆ‘ä»¬éœ€è¦æ±‚çš„æ˜¯Î¸ã€‚é—®é¢˜è½¬åŒ–æˆäº†**æˆ‘ä»¬å·²çŸ¥äº‹ä»¶å‘ç”Ÿçš„æ¦‚ç‡ï¼Œæƒ³è¦åæ¨å…·æœ‰æœ€å¤§å¯èƒ½æ€§æ—¶ï¼ŒÎ¸çš„å€¼**ã€‚è¿™è¾¹å°±è¦ç¨å¾®æ’ä¸€å¥äº†ï¼Œæœºå™¨å­¦ä¹ å­¦æœ¯ç•Œæœ‰ä¸¤ç§å­¦æ´¾ï¼Œä¸€æ´¾æ˜¯*é¢‘ç‡å­¦æ´¾*ï¼Œå¦ä¸€æ´¾æ˜¯*è´å¶æ–¯å­¦æ´¾*ã€‚äºŒè€…å„è‡ªæœ‰ç”¨æ­¦ä¹‹åœ°ï¼Œéƒ½èƒ½è§£å†³ä¸Šé¢æå‡ºçš„é—®é¢˜ã€‚ä¸‹é¢æˆ‘ä»¬åˆ©ç”¨é¢‘ç‡å­¦æ´¾çš„æ–¹æ³•ï¼š**æœ€å¤§ä¼¼ç„¶ä¼°è®¡**è§£å†³è¿™ä¸ªé—®é¢˜ã€‚é¦–å…ˆæ„é€ ä¸‹é¢çš„å‡½æ•°ï¼š</script><p>L(\theta)=L(\theta ; X, \vec{y})=p(\vec{y} | X ; \theta)</p><script type="math/tex; mode=display">æˆ‘ä»¬çš„æ ·æœ¬æ‰©å¤§åˆ°æ•´ä¸ªæ ·æœ¬é›†ï¼Œåˆ™æ•´ä½“çš„æ¦‚ç‡åˆ†å¸ƒå°±å¦‚ä¸Šé¢çš„å…¬å¼ã€‚å› ä¸ºæˆ‘ä»¬å‡è®¾æ¯ä¸ªæ ·æœ¬é›†ä¸­çš„æ ·æœ¬ç‹¬ç«‹åŒåˆ†å¸ƒï¼ˆIIDï¼‰ï¼Œæ‰€ä»¥æ ¹æ®æ¦‚ç‡çš„ä¹˜æ³•å®šç†ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸ªäº‹ä»¶æ¦‚ç‡ç›¸ä¹˜ï¼Œå¾—åˆ°æ•´ä½“çš„æ¦‚ç‡ã€‚</script><p>\begin{aligned} L(\theta) &amp;=\prod<em>{i=1}^{m} p\left(y^{(i)} | x^{(i)} ; \theta\right) \ &amp;=\prod</em>{i=1}^{m} \frac{1}{\sqrt{2 \pi} \sigma} \exp \left(-\frac{\left(y^{(i)}-\theta^{T} x^{(i)}\right)^{2}}{2 \sigma^{2}}\right) \end{aligned}</p><script type="math/tex; mode=display">åˆå›åˆ°äº†æœ€ä¼˜åŒ–é—®é¢˜çš„æ€è·¯æ¥äº†ï¼Œè¿™æ˜¯ä¸€ä¸ªå…³äºÎ¸çš„å‡½æ•°ï¼Œé‚£æˆ‘ä»¬å¯¹å®ƒæ±‚å¯¼ï¼Œå°±æœ‰å¸Œæœ›å¾—åˆ°æå€¼ã€‚è¿ä¹˜$\prod$ä¸å¥½æ±‚å¯¼çš„è¯ï¼Œæˆ‘ä»¬ä¸å¦¨å¯¹æ•´ä¸ªä¼¼ç„¶å‡½æ•°L(Î¸)å–å¯¹æ•°ï¼Œå› ä¸ºå¯¹æ•°åœ¨å…¶å®šä¹‰åŸŸä¸Šæ˜¯å•è°ƒå¢çš„ï¼Œæ‰€ä»¥ä¸æ”¹å˜å‡½æ•°çš„å•è°ƒæ€§ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å¯¹æ•°å‡½æ•°çš„æ€§è´¨ã€‚</script><p>\begin{aligned} \ell(\theta) &amp;=\log L(\theta) \ &amp;=\log \prod<em>{i=1}^{m} \frac{1}{\sqrt{2 \pi} \sigma} \exp \left(-\frac{\left(y^{(i)}-\theta^{T} x^{(i)}\right)^{2}}{2 \sigma^{2}}\right) \ &amp;=\sum</em>{i=1}^{m} \log \frac{1}{\sqrt{2 \pi} \sigma} \exp \left(-\frac{\left(y^{(i)}-\theta^{T} x^{(i)}\right)^{2}}{2 \sigma^{2}}\right) \ &amp;=m \log \frac{1}{\sqrt{2 \pi} \sigma}-\frac{1}{\sigma^{2}} \cdot \frac{1}{2} \sum_{i=1}^{m}\left(y^{(i)}-\theta^{T} x^{(i)}\right)^{2} \end{aligned}</p><script type="math/tex; mode=display">çœ‹åˆ°äº†å—ï¼Ÿå¼å­æœ€å³ç«¯ï¼Œå‡ºç°äº†ï¼Œæˆ‘ä»¬çš„æœ€å°äºŒä¹˜ä¼˜åŒ–é¡¹ï¼š</script><p>\frac{1}{2} \sum_{i=1}^{m}\left(y^{(i)}-\theta^{T} x^{(i)}\right)^{2}</p><script type="math/tex; mode=display">## 5. å±€éƒ¨åŠ æƒå›å½’å±€éƒ¨åŠ æƒå›å½’çš„æ€æƒ³å¾ˆç®€å•ï¼Œå®ƒå¯ä»¥è§£å†³æ¬ æ‹Ÿåˆ(underfitting)ä¸è¿‡æ‹Ÿåˆ(overfitting)é—®é¢˜ã€‚![](CS229-note-1-Introduction/2019-04-26-18-52-01.png)å·¦å›¾å¯¹æ•°æ®çš„é¢„æµ‹æ•ˆæœä¸æ˜¯å¾ˆå¥½ï¼Œæ•°æ®æ˜æ˜¾çš„è¶‹åŠ¿è¢«å¿½ç•¥äº†ï¼›å³å›¾å¥½çš„è¿‡åˆ†äº†ï¼Œæ¨¡å‹è€ƒè™‘äº†è¿‡å¤šçš„å™ªéŸ³å’Œè¯¯å·®ï¼Œå¯¼è‡´æ‹Ÿåˆäº§ç”Ÿçš„å‡½æ•°ä¸èƒ½è‰¯å¥½çš„é¢„æµ‹æœªçŸ¥æ•°æ®ã€‚å¯¹äºç°å®ä¸–ç•Œçš„å¤æ‚æ¨¡å‹ï¼Œå¾ˆéš¾è¯´ä¸€å®šèƒ½æ‰¾åˆ°ä¸€ä¸ªå®Œç¾çš„å‡½æ•°ï¼Œæ°å¥½æ‹Ÿåˆæ‰€æœ‰çš„æ•°æ®ï¼ŒåŒæ—¶å¯¹æœªçŸ¥æ•°æ®åˆå…·æœ‰è‰¯å¥½çš„é¢„æµ‹èƒ½åŠ›ã€‚å±€éƒ¨åŠ æƒå›å½’çš„æ€æƒ³å°±æ˜¯ï¼Œåœ¨å’¨è¯¢åˆ«äººæ„è§æ—¶ï¼Œå¯¹äºæˆ‘å‘¨å›´çš„æ„è§ç€é‡è€ƒè™‘ï¼Œå¯¹äºç¦»æˆ‘å¾ˆè¿œçš„æ„è§æˆ‘ç•¥å¾®è€ƒè™‘ï¼Œå³æ ¹æ®ç¦»è‡ªå·±çš„è·ç¦»ï¼Œæ¥å†³å®šæƒå€¼å¤§å°ã€‚åˆ™ä¼˜åŒ–ç›®æ ‡å°±ä»$\sum_{i}\left(y^{(i)}-\theta^{T} x^{(i)}\right)^{2}$å˜æˆäº†$\sum_{i} w^{(i)}\left(y^{(i)}-\theta^{T} x^{(i)}\right)^{2}$ã€‚å…¶ä¸­$\omega$å®šä¹‰ä¸º$$w^{(i)}=\exp \left(-\frac{\left(x^{(i)}-x\right)^{2}}{2 \tau^{2}}\right)</script><p>å…¶ä¸­$\tau$å®šä¹‰ä¸ºå¸¦å®½ï¼Œæˆ‘å°†ä¼šäºè¿‘æœŸæ›´æ–°æ–‡ç« è§£é‡Šå±€éƒ¨åŠ æƒå›å½’ã€‚</p><h2 id="6-æ€»ç»“"><a href="#6-æ€»ç»“" class="headerlink" title="6. æ€»ç»“"></a>6. æ€»ç»“</h2><p>æˆ‘ä»¬ä»‹ç»äº†æœºå™¨å­¦ä¹ ä¸­ç›‘ç£å­¦ä¹ çš„æ¦‚å¿µï¼Œå¹¶å¼•å…¥äº†å›å½’é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨äº†æœ€å°äºŒä¹˜æ³•å¯¹å›å½’é—®é¢˜è¿›è¡Œæœºå™¨å­¦ä¹ ã€‚å¯¹äºæœ€å°äºŒä¹˜é¡¹ï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å¯¹å…¶ä¼˜åŒ–ï¼Œä¸€ç§æ˜¯é€æ­¥æ±‚ç²¾çš„æ¢¯åº¦ä¸‹é™æ³•ï¼Œå¦ä¸€ç§åˆ™æ˜¯ä¸€æ­¥åˆ°ä½çš„æ•°å­¦æ¨å¯¼æ³•ã€‚æ¢¯åº¦ä¸‹é™é€‚ç”¨äºå·¥ç¨‹å®ç°ï¼Œè€Œæ•°å­¦æ¨å¯¼åˆ™æ˜¯å½’çº³æ€»ç»“èƒŒåçš„åŸç†ã€‚</p><p>æˆ‘ä»¬è¿˜ä»æ¦‚ç‡è§’åº¦è®¨è®ºäº†ä¸ºä»€ä¹ˆå›å½’é—®é¢˜è¦é‡‡ç”¨æœ€å°äºŒä¹˜æ³•ï¼Œå¹¶å¼•å…¥äº†æ¬ æ‹Ÿåˆä¸è¿‡æ‹Ÿåˆçš„æ¦‚å¿µï¼Œæœ€åé‡‡ç”¨å±€éƒ¨åŠ æƒå›å½’æ–¹æ³•å°½å¯èƒ½é¿å…æ‹Ÿåˆä¸è‰¯çš„é—®é¢˜ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>machine learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexoå›¾ç‰‡åŠ è½½å¤±è´¥è§£å†³æ–¹æ¡ˆ</title>
    <link href="/2019/04/25/hexo%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
    <url>/2019/04/25/hexo%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜æè¿°ï¼š"><a href="#é—®é¢˜æè¿°ï¼š" class="headerlink" title="é—®é¢˜æè¿°ï¼š"></a>é—®é¢˜æè¿°ï¼š</h2><p>æˆ‘å¹³æ—¶å†™blogä½¿ç”¨çš„ç¼–è¾‘å™¨æ˜¯Typoraï¼Œé‡‡ç”¨hexoéƒ¨ç½²ã€‚æŸç¯‡æ–‡ç« ç¼–è¾‘çš„æ—¶å€™éœ€è¦æ’å…¥å›¾ç‰‡ï¼Œåœ¨Typoraä¸Šé¢ï¼Œæ’å…¥å›¾ç‰‡çš„è¯­æ³•æ˜¯</p><p><code>![å›¾ç‰‡æ ‡é¢˜](å›¾ç‰‡åœ°å€)</code><br>æ¯”å¦‚<code>![](C:\Folder\picture.png)</code></p><p>å…¶ä¸­å›¾ç‰‡åœ°å€æ˜¯ç»å¯¹è·¯å¾„ï¼Œå³ç›˜ç¬¦å¼€å¤´çš„é‚£ä¸ªè·¯å¾„ã€‚ä½†æ˜¯å¦‚æœè¦ä¸Šä¼ åˆ°GitHub Pagesä¸Šé¢ï¼Œè·¯å¾„æ¯«æ— ç–‘é—®ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥è¿™é‡Œåªèƒ½ç”¨ç›¸å¯¹è·¯å¾„ã€‚å‡è®¾ä½ çš„å›¾ç‰‡å’Œå½“å‰çš„åšå®¢æ–‡ä»¶åœ¨åŒä¸€ç›®å½•ä¸‹ï¼Œåˆ™ç›´æ¥è¿™æ ·ï¼š</p><p><code>![](picture.png)</code><br><code>![](.\picture.png)</code><br><code>![](./picture.png)</code></p><p>ç”¨è¿‡unixæ–‡ä»¶ç³»ç»Ÿçš„äººéƒ½çŸ¥é“ï¼Œå…¶å®é‚£ä¸ª<code>.</code>çš„ä½œç”¨å°±æ˜¯æŒ‡æ˜â€œå½“å‰æ–‡ä»¶å¤¹ä¸‹â€ã€‚ä½†å¦‚æœå›¾ç‰‡å’Œåšå®¢æ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œè‚¯å®šä¼šå¯¼è‡´æ–‡ä»¶å¤¹è¶Šæ¥è¶Šä¹±ã€‚æ‰€ä»¥æˆ‘ä»¬æœ‰å…¶ä»–æ–¹å¼æ’å…¥å›¾ç‰‡ã€‚</p><ol><li>åœ¨ä½ çš„åšå®¢æ ¹ç›®å½•ä¸‹ï¼Œæ‰“å¼€git bashï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</li></ol><p><code>npm install hexo-asset-image --save</code></p><p><img src="/2019/04/25/hexo%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/npmå®‰è£…å›¾ç‰‡æ’ä»¶.png" alt="npmå®‰è£…å›¾ç‰‡æ’ä»¶"></p><ol><li><p>æ‰“å¼€åšå®¢æ ¹ç›®å½•ä¸‹çš„_config.yml<br>æ·»åŠ ä¸€è¡Œ <code>post_asset_folder: true</code> æˆ–è€…å°†è¯¥é¡¹è®¾æˆtrue</p></li><li><p>ä»¥åæ’å›¾ç‰‡å°±è¿™ä¹ˆæ’ï¼š<br><code>![éšä¾¿å†™å†™](picture.png)</code></p></li></ol><p>ä½†æ˜¯ä½ çœ‹ï¼æˆ‘è¿˜æ˜¯å¤±è´¥äº†ï¼Œè¿™æ˜¯ææ¯›å‘¢ï¼Ÿ</p><p><img src="/2019/04/25/hexo%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/æ’å…¥å›¾ç‰‡å¤±è´¥ç¤ºä¾‹.png" alt="æ’å…¥å›¾ç‰‡å¤±è´¥ç¤ºä¾‹"></p><p>ç»æŸ¥ï¼Œå¾ˆå¤šäººæœ‰æˆ‘è¿™æ ·çš„é—®é¢˜ï¼Œå‡ºé”™æ–¹æ³•å´åƒå¥‡ç™¾æ€ªã€‚<br>æœ‰çš„äººæ˜¯ç”Ÿæˆç›®å½•å‡ºé”™çš„ï¼š<br><img src="/2019/04/25/hexo%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/ç”Ÿæˆç»å¯¹è·¯å¾„ä¸å®Œæ•´.png" alt="ç”Ÿæˆç»å¯¹è·¯å¾„ä¸å®Œæ•´"><br>æœ‰äººç”Ÿæˆç›®å½•æ—¥æœŸæ ¼å¼ä¸å¯¹çš„<br><img src="/2019/04/25/hexo%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/æœ‰ç”Ÿæˆç›®å½•æ—¥æœŸæ ¼å¼ä¸å¯¹çš„.png" alt="ç”Ÿæˆç›®å½•æ—¥æœŸæ ¼å¼ä¸å¯¹"><br>è¿˜æœ‰äººå›é€€ç‰ˆæœ¬å¦¥å~<br><img src="/2019/04/25/hexo%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/è¿˜æœ‰å›é€€ç‰ˆæœ¬çš„.png" alt="è¿˜æœ‰å›é€€ç‰ˆæœ¬çš„"><br>æˆ‘è¿˜æ˜¯ä»è¿™ä½è€å“¥çš„å›ç­”å—åˆ°äº†å¯å‘<br><img src="/2019/04/25/hexo%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/è¿™ä½è€å“¥è¿˜è§£å†³äº†é—®é¢˜.png" alt="è¿™ä½è€å“¥è¿˜è§£å†³äº†é—®é¢˜"><br>å…¶å®ç­”æ¡ˆå°±åœ¨å…¶ä¸­<br><img src="/2019/04/25/hexo%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/ä½†æ˜¯å…¶å®äººå®¶ç­”æ¡ˆå·²ç»å¾ˆæ¸…æ¥šäº†.png" alt="ä½†æ˜¯å…¶å®äººå®¶ç­”æ¡ˆå·²ç»å¾ˆæ¸…æ¥šäº†"><br>é‚£å°±æ˜¯æ‰“å¼€_config.ymlï¼ˆæˆ‘å‘ç°æˆ‘çš„æ‰€æœ‰é”™è¯¯éƒ½å¯ä»¥ä»è¯¥æ–‡ä»¶ä¸­å¾—åˆ°è§£å†³ï¼‰ï¼ŒæŒ‰ä¸‹å›¾ä¿®æ”¹ã€‚<br><img src="/2019/04/25/hexo%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/ä¸ä½œæ­»å°±ä¸ä¼šæ­».png" alt="ä¸ä½œæ­»å°±ä¸ä¼šæ­»"><br>æˆ‘å¦‚æ­¤ç–¯ç‹‚åœ°æ’å…¥å›¾ç‰‡å°±æ˜¯ä¸ºäº†ç»ƒä¹ æ’å…¥å›¾ç‰‡çš„æ–¹æ³•ï¼Œæ€•æ˜¯æœ‰ç”Ÿä¹‹å¹´ä¸ä¼šå¿˜è®°äº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
    <tags>
      
      <tag>github pages</tag>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å†™åœ¨æŸæ¬¡æœŸæœ«è¯¾ç¨‹ä½œä¸šä¹‹å</title>
    <link href="/2019/04/25/%E5%86%99%E5%9C%A8%E6%9F%90%E6%AC%A1%E6%9C%9F%E6%9C%AB%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A%E4%B9%8B%E5%90%8E/"/>
    <url>/2019/04/25/%E5%86%99%E5%9C%A8%E6%9F%90%E6%AC%A1%E6%9C%9F%E6%9C%AB%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A%E4%B9%8B%E5%90%8E/</url>
    
    <content type="html"><![CDATA[<h1 id="å†™åœ¨æŸæ¬¡æœŸæœ«è¯¾ç¨‹ä½œä¸šä¹‹å"><a href="#å†™åœ¨æŸæ¬¡æœŸæœ«è¯¾ç¨‹ä½œä¸šä¹‹å" class="headerlink" title="å†™åœ¨æŸæ¬¡æœŸæœ«è¯¾ç¨‹ä½œä¸šä¹‹å"></a>å†™åœ¨æŸæ¬¡æœŸæœ«è¯¾ç¨‹ä½œä¸šä¹‹å</h1><p>å½“ä»»è¯¾è€å¸ˆåœ¨ç¾¤é‡Œè¯´ï¼šâ€œSuperlovaï¼Œè¯·å°½å¿«å°†ä½ çš„ä½œä¸šå‘ç»™æˆ‘ï¼Œç”µå­ç‰ˆå’Œçº¸è´¨ç‰ˆã€‚â€çš„æ—¶å€™ï¼Œæˆ‘è¿˜åœ¨çœ‹â€œPOPå­ä¸PIPIç¾â€çš„ç¬¬äºŒéã€‚</p><p>è¿˜å¥½æˆ‘çš„ä¸çœ‹å¾®ä¿¡çš„ä¹ æƒ¯æ­¤æ—¶å¹¶æ²¡æœ‰è®©æˆ‘ç»§ç»­å å…¥æ·±æ¸Šï¼Œä¸è¿‡å½“æˆ‘é˜…è¯»å®Œæ•´æ®µæ¶ˆæ¯ï¼Œä¸€è‚¡è¿‡ç”µçš„æ„Ÿè§‰ä»å¿ƒå£å¼€å§‹å‘å››è‚¢æ‰©æ•£ã€‚æˆ‘çš„å¿ƒè„ä»¿ä½›åœæ­¢äº†è·³åŠ¨ï¼Œæˆ‘æƒ³å¤§å«ã€ç ¸ä¸œè¥¿ï¼Œæˆ‘è„‘å­é‡Œåå¤å‡ºç°ä»¥ä¸‹å­—çœ¼ï¼š</p><blockquote><p>ä½ åœ¨å¹²ä»€ä¹ˆå‘¢å°Sï¼Œéƒ½ä»€ä¹ˆæ—¶å€™äº†ä½ è¿˜åœ¨çœ‹åŠ¨æ¼«ï¼Ÿ<br>æˆ‘çš„å¤©å•Šå°±å‰©æˆ‘ä¸€ä¸ªäººæ²¡äº¤äº†ï¼Œæœ¬æ¥ä¸æ˜¯è¯´å¥½äº†ä¸‰å¤©ä¹‹å‰å°±åšå®Œå—ï¼Ÿ<br>æˆ‘çœŸæ˜¯ä¸ªåºŸç‰©â€¦â€¦<br>æˆ‘è¯¥æ€ä¹ˆç”¨ä¸€ä¸ªå°æ—¶ä¸åˆ°çš„æ—¶é—´æŠŠæ‰€æœ‰çš„å·¥ä½œåšå®Œï¼Ÿï¼Ÿï¼Ÿ<br>â€¦â€¦</p></blockquote><p>1ä¸ªå°æ—¶å€™ï¼Œæˆ‘æŠŠè®ºæ–‡å†™å®Œï¼Œæ”¾å¼ƒå’Œå¦¥åäº†ä¸€äº›æ²¡èƒ½å®Œæˆçš„ç›®æ ‡ï¼Œå‘åˆ°è€å¸ˆçš„é‚®ç®±ä¸­ï¼Œå¹¶æ‰“å°äº†å‡ºæ¥ï¼Œé€åˆ°è€å¸ˆçš„åŠå…¬å®¤ã€‚è€å¸ˆçœ‹ç€æˆ‘çš„è®ºæ–‡ï¼Œè¯´ï¼šâ€œä½ çš„ä½œä¸šæ˜¯æˆ‘æœ€æ»¡æ„çš„ã€‚â€</p><p>ä»åŠå…¬å®¤å‡ºæ¥çš„é‚£ä¸€åˆ»ï¼Œæˆ‘å¿ƒä¸­é™¤äº†å¦‚é‡Šé‡è´Ÿã€å¼€å¿ƒæ„‰æ‚¦ä¹‹å¤–ï¼Œè¿˜ä¸æ–­åœ°æ€è€ƒç€ï¼Œæ˜¯ä»€ä¹ˆä½¿å¾—æˆ‘å°†æœ¬æ¥èƒ½ç”¨1å°æ—¶åšå®Œçš„ä»»åŠ¡æ‹–å»¶åˆ°3å¤©ï¼Ÿæœ‰ä»€ä¹ˆå†…åœ¨çš„åŸå› ï¼Œåˆæœ‰ä»€ä¹ˆè§£å†³æ–¹æ¡ˆï¼Ÿ</p><p>æˆ‘ä»¥æˆ‘çš„äº²èº«å®è·µä¸ºæ•™è®­ï¼Œå¾—åˆ°äº†ä»¥ä¸‹ç»“è®ºã€‚</p><h2 id="1-æ‹–å»¶ç—‡çš„æ ¸å¿ƒï¼šå®Œç¾ä¸»ä¹‰"><a href="#1-æ‹–å»¶ç—‡çš„æ ¸å¿ƒï¼šå®Œç¾ä¸»ä¹‰" class="headerlink" title="1. æ‹–å»¶ç—‡çš„æ ¸å¿ƒï¼šå®Œç¾ä¸»ä¹‰"></a>1. æ‹–å»¶ç—‡çš„æ ¸å¿ƒï¼šå®Œç¾ä¸»ä¹‰</h2><p>å…¶å®é‚£ç¯‡è®ºæ–‡çš„å†…å®¹æˆ‘åœ¨ç¬¬ä¸€å¤©å°±å†™å®Œäº†ï¼Œå‰©ä¸‹çš„å°±æ˜¯æ’ç‰ˆå’Œå¼•ç”¨å‚è€ƒæ–‡çŒ®ã€åˆ¶ä½œå›¾è¡¨ç­‰ç»†èŠ‚ä¸Šçš„å·¥ä½œã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæœ€åæˆ‘ç»è¿‡ä¸€ä¸ªå°æ—¶çš„çªå‡»å°±èƒ½å¤Ÿå†™å®Œè®ºæ–‡çš„å®¢è§‚åŸå› ã€‚ä¸è¿‡ï¼Œæ­£æ˜¯å› ä¸ºæˆ‘åœ¨æœ€åå¯¹ç›®æ ‡çš„ä¸€äº›trade offï¼Œæ‰ä½¿å¾—æˆ‘æ¢å¤åˆ°äº†ä¸€ä¸ªæ­£å¸¸çš„ã€æ­£åœ¨å·¥ä½œçš„çŠ¶æ€ã€‚</p><p>é¦–å…ˆæˆ‘æ”¾å¼ƒäº†å‚è€ƒæ–‡çŒ®ä¸­å¯¹å›¾è¡¨çš„å¼•ç”¨ã€‚å…¶æ¬¡æˆ‘æ”¾å¼ƒäº†å¯¹ä¸ªäººä¿¡æ¯çš„å¢åˆ æ”¹æŸ¥ï¼Œè€Œæ˜¯æŠŠä¸ªäººä¿¡æ¯æ”¾äºæ–‡ä»¶åå’Œé‚®ä»¶ä¹‹ä¸­ã€‚è¿˜æœ‰ä¸€äº›å°ç»†èŠ‚ã€‚è¿™äº›ç»†èŠ‚çš„ç¡®èƒ½ä½¿æˆ‘çš„è®ºæ–‡ç™»ä¸Šå¤§é›…ä¹‹å ‚ï¼Œä½†æ˜¯å¯¹å½“æ—¶çš„æˆ‘æ¥è¯´æ— ç–‘æ˜¯è´Ÿé‡å‰è¡Œã€‚æˆ‘å¯¹è‡ªå·±çš„è¦æ±‚å¾ˆé«˜ï¼Œå‡¡æ˜¯å¸Œæœ›è‡ªå·±åšåˆ°æœ€å¥½ï¼Œæ­£æ˜¯è¿™ç§å¿ƒæ€ä½¿å¾—æˆ‘åšä»€ä¹ˆéƒ½æ…¢ï¼Œä¸åˆ°æœ€åä¸ç½¢ä¼‘ã€‚</p><h2 id="2-æ‹–å»¶ç—‡çš„è§£å†³æ–¹æ³•ï¼šè®¾ç½®Deadline"><a href="#2-æ‹–å»¶ç—‡çš„è§£å†³æ–¹æ³•ï¼šè®¾ç½®Deadline" class="headerlink" title="2. æ‹–å»¶ç—‡çš„è§£å†³æ–¹æ³•ï¼šè®¾ç½®Deadline"></a>2. æ‹–å»¶ç—‡çš„è§£å†³æ–¹æ³•ï¼šè®¾ç½®Deadline</h2><p>è€å¸ˆçš„ä¸€å¸­è¯ï¼Œè®©æˆ‘äº§ç”Ÿäº†æµ‘èº«è¿‡ç”µçš„æ„Ÿè§‰ã€‚åœ¨ä¹‹åçš„1ä¸ªå°æ—¶ï¼Œæˆ‘ä»¿ä½›è¿›å…¥äº†ä¸€ç§å¥‡å¦™çš„â€œå…¥å®šâ€çŠ¶æ€ï¼Œå¤§è„‘ä¸­çš„æ‰€æœ‰èµ„æºéƒ½é›†ä¸­äºæ‰‹å¤´çš„ä»»åŠ¡ï¼Œè¿™ç§æ„Ÿè§‰ä¹Ÿå­˜åœ¨äºé«˜ä¸­åšé¢˜çš„æ—¶å€™ã€‚å°±æ˜¯è¶Šå†™è¶Šå…´å¥‹ï¼Œè¶Šå…´å¥‹è¶Šæ€å¦‚æ³‰æ¶Œï¼Œè¶Šå†™è¶Šå¤šçš„çŠ¶æ€ã€‚è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œé‚£å°±æ˜¯è¿™ç§çŠ¶æ€ç»“æŸåï¼Œè‡ªå·±ä¼šå¾ˆé¥¿ï¼Œå¯èƒ½æ˜¯å¤§è„‘æ¶ˆè€—èµ„æºå¤ªå¤šæ‰€å¯¼è‡´çš„ã€‚<br>å›æƒ³è‡ªå·±é«˜ä¸­çš„æ—¶å€™ï¼Œè¿›å…¥è¿™ç§çŠ¶æ€çš„æœ€å¿«æ–¹æ³•å°±æ˜¯è‡ªä¿¡ï¼Œå¹¶ä¸”åœ¨è€ƒè¯•å¼€å§‹çš„æ—¶å€™å…¨åšç®€å•é¢˜ï¼Œä¸€æ—¦é‚£ç§åŠ¿å¦‚ç ´ç«¹çš„æ„Ÿè§‰ä¸Šèº«ï¼Œå°±å¾ˆå®¹æ˜“è¿›å…¥â€œå…¥å®šâ€çŠ¶æ€ã€‚å°±æ€•å¡å£³ï¼Œå…¥å®šçŠ¶æ€ä¼šéšç€æ—¶é—´çš„æµé€é€æ¸æ¶ˆå¤±ã€‚</p><p>ç°åœ¨çš„æˆ‘æ²¡æœ‰é¢˜æµ·è¦åšï¼Œåªæœ‰ç­‰å¾…æˆ‘å®Œæˆçš„ä»»åŠ¡ã€‚ä¸ºäº†ä¸è®©æˆ‘å—å¤–ç•Œçš„å¹²æ‰°ï¼Œæˆ‘å°è¯•è¿‡ç•ªèŒ„å·¥ä½œæ³•ã€ä»»åŠ¡å¯¼å‘å·¥ä½œæ³•ç­‰ç­‰ï¼Œæ•ˆæœæ—¶å¥½æ—¶åï¼Œæ²¡æœ‰ç»å¯¹ç®¡ç”¨çš„æ•ˆæœã€‚ä¹Ÿå°±æ˜¯è¯´é‡‡å–å“ªä¸ªæ–¹æ³•ä¸å­¦ä¹ æ•ˆç‡æ˜¯å¦æé«˜çš„ç›¸å…³æ€§ä¸æ˜¯å¾ˆå¼ºã€‚æˆ‘è®¤ä¸ºåªæœ‰è®¾ç½®Deadlineï¼Œè€Œä¸”æ˜¯å®Œä¸æˆå°±çœŸçš„ä¼šDeadçš„lineï¼Œæ‰èƒ½ç»™è‡ªå·±è¶³å¤Ÿå¤§çš„å‹åŠ›ï¼Œè®©è‡ªå·±å¿ƒæ— æ—éª›çš„æŠ•å…¥åˆ°ä»»åŠ¡ä¸­å»ã€‚</p><h2 id="3-æ‹–å»¶ç—‡çš„è§£å†³æ–¹æ³•ï¼šè®¾ç½®å­ä»»åŠ¡"><a href="#3-æ‹–å»¶ç—‡çš„è§£å†³æ–¹æ³•ï¼šè®¾ç½®å­ä»»åŠ¡" class="headerlink" title="3. æ‹–å»¶ç—‡çš„è§£å†³æ–¹æ³•ï¼šè®¾ç½®å­ä»»åŠ¡"></a>3. æ‹–å»¶ç—‡çš„è§£å†³æ–¹æ³•ï¼šè®¾ç½®å­ä»»åŠ¡</h2><p>å¦‚æœè®¾ç½®äº†Deadlineï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥çš„æƒ…å†µå¤§æ¦‚æ˜¯è¿™æ ·å­ï¼š</p><p><img src="/2019/04/25/%E5%86%99%E5%9C%A8%E6%9F%90%E6%AC%A1%E6%9C%9F%E6%9C%AB%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A%E4%B9%8B%E5%90%8E/å†™åœ¨æŸæ¬¡æœŸæœ«è¯¾ç¨‹ä½œä¸šä¹‹å\ä»»åŠ¡å®Œæˆåº¦æ›²çº¿.png" alt="ä»»åŠ¡å®Œæˆåº¦æ›²çº¿"></p><p>ä¹Ÿå°±æ˜¯è¯´ä¹‹åæœ€åçš„é‚£æ®µæ—¶é—´ï¼Œå®Œæˆäº†ç»å¤§å¤šæ•°çš„å·¥ä½œã€‚è¿™æ ·ä¹Ÿä¸è¡Œï¼Œå› ä¸ºäººçš„å·¥ä½œæ•ˆç‡æ˜¯æœ‰é™çš„ï¼Œè¿‡åˆ†é€¼è¿«è‡ªå·±åšè‡ªå·±æ˜æ˜¾åšä¸å®Œçš„äº‹æƒ…ï¼Œä¸ä½†ä¼šç»™è‡ªå·±è¿‡å¤§çš„å¿ƒç†è´Ÿæ‹…ï¼Œè€Œä¸”ä¼šå¯¼è‡´å®Œä¸æˆä»»åŠ¡çš„è‡ªå·±äº§ç”Ÿè´Ÿé¢æƒ…ç»ªï¼ŒåŠ é‡æ‹–å»¶ã€‚</p><p>è§£å†³æ–¹æ³•é‚£å°±æ˜¯å°†å¤§ä»»åŠ¡åˆ†è§£æˆä¸€å£å¯ä»¥åƒæ‰çš„å°ä»»åŠ¡ï¼Œå¹¶ä¸”ä¸ºäº†å°äººç‰©è®¾ç½®Deadlineã€‚</p><p>ç°åœ¨å¾ˆç«çš„â€œæµåˆ©é˜…è¯»â€å•Šï¼Œâ€œæ°´æ»´é˜…è¯»â€å•Šç­‰ç­‰è®©ä½ å…ˆä»˜è´¹å†åšæŒä¹ æƒ¯çš„æ–¹æ³•ï¼ŒåŸç†ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚å¦‚æœä½ æ²¡å®Œæˆè‡ªå·±çš„ä»»åŠ¡ï¼Œé‚£ä¹ˆä½ ä¹‹å‰äº¤çš„é’±å°±ä¸å¯èƒ½ç»™ä½ é€€è´¹äº†ï¼Œåªæœ‰å½“è‡ªå·±å®Œæˆäº†è‡ªå·±çš„ç›®æ ‡æ‰èƒ½å¤Ÿé€€è¿˜è´¹ç”¨ã€‚</p><p>å¹¶ä¸”æ¯å¤©éœ€è¦å®Œæˆçš„ä»»åŠ¡é‡ä¹Ÿä¸æ˜¯å¾ˆå¤§ï¼Œäººå®¶å·²ç»å¸®ä½ æŠŠä»»åŠ¡åˆ†å‰²å®Œæ¯•äº†ã€‚</p><p><img src="/2019/04/25/%E5%86%99%E5%9C%A8%E6%9F%90%E6%AC%A1%E6%9C%9F%E6%9C%AB%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A%E4%B9%8B%E5%90%8E/å†™åœ¨æŸæ¬¡æœŸæœ«è¯¾ç¨‹ä½œä¸šä¹‹å\ä»»åŠ¡å®Œæˆåº¦æ›²çº¿å››ä¸ªDeadline.png" alt="ä»»åŠ¡å®Œæˆåº¦æ›²çº¿å››ä¸ªDeadline"></p><p>è™½è¯´ä»¥ä¸Šåˆ¶åº¦æœ‰åºæ°éª—å±€ä¹‹å«Œï¼Œå¹¶ä¸”åœ¨æœ‹å‹åœˆå½¢æˆäº†ä¸€è‚¡ç²¾ç¥æ±¡æŸ“çš„é£æ°”ï¼Œä½†æ˜¯çš„çš„ç¡®ç¡®è®©å¾ˆå¤šäººå…»æˆäº†é˜…è¯»çš„ä¹ æƒ¯ã€‚</p><h2 id="4-æ‹–å»¶ç—‡çš„è§£å†³æ–¹æ³•ï¼šå½¢æˆæ­£åé¦ˆ"><a href="#4-æ‹–å»¶ç—‡çš„è§£å†³æ–¹æ³•ï¼šå½¢æˆæ­£åé¦ˆ" class="headerlink" title="4. æ‹–å»¶ç—‡çš„è§£å†³æ–¹æ³•ï¼šå½¢æˆæ­£åé¦ˆ"></a>4. æ‹–å»¶ç—‡çš„è§£å†³æ–¹æ³•ï¼šå½¢æˆæ­£åé¦ˆ</h2><p>æ¯æ¬¡è‡ªå·±å®Œæˆå­ä»»åŠ¡ï¼Œéƒ½å¿…é¡»è¦ç»™è‡ªå·±ä¸€ç‚¹ç‚¹æ­£åé¦ˆï¼Œè¿™ä¸ªåé¦ˆå¿…ç„¶èƒ½è®©è‡ªå·±äº§ç”Ÿèˆ’é€‚çš„æƒ…ç»ªè€Œä¸å¿…æ‹˜æ³¥äºå½¢å¼ã€‚è€Œä¸”ä¸èƒ½è¿‡äºæ²‰è¿·å¯¼è‡´æ— æ³•å®Œæˆæ¥ä¸‹æ¥çš„å­ä»»åŠ¡ã€‚</p><p>æˆ‘å¤§å­¦çš„ä¸€ä½åŒå­¦ï¼Œæ˜¯ä¸æŠ˜ä¸æ‰£çš„å­¦ç¥ï¼Œæˆç»©è¶…å¥½ï¼Œäººç¼˜è¶…æ£’ã€‚æ¯å¤©æ—©ä¸Šå‡ºé—¨å­¦ä¹ ä¹‹åï¼Œä¸åƒå…¶ä»–äººï¼Œä»–æ™šä¸Š8ç‚¹å¤šå°±å›åˆ°å®¿èˆäº†ï¼Œå¼€å§‹æ‰“æ¸¸æˆï¼Œçœ‹çºªå½•ç‰‡ï¼Œçœ‹ç”µå½±ï¼Œå¼¹å‰ä»–ï¼Œå’Œåˆ«äººè§†é¢‘èŠå¤©ã€‚</p><p>æˆ‘é—®ä»–ä½ æ€ä¹ˆä¸ç»§ç»­å­¦ä¹ äº†ï¼Œä»–è¯´æˆ‘å·²ç»æŠŠä¸€å¤©çš„ä»»åŠ¡å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥çš„æ—¶é—´å°±æ˜¯ä¼‘æ¯æ—¶é—´ã€‚</p><p>è¿™æ ·åšæ˜¯æœ‰é“ç†çš„ï¼Œå¦‚æœè‡ªå·±æ˜¯ä¸€ä¸ªç›®æ ‡å¯¼å‘çš„äººï¼Œå½“è‡ªå·±çš„ç›®æ ‡å®Œæˆä¹‹åï¼Œå°±åº”è¯¥ç»™è‡ªå·±å¥–åŠ±ã€‚ä¸€å¤©ä¸€æ¬¡ï¼Œæœ‰ä½•ä¸å¯ï¼Ÿ</p><p>åŒç†ï¼Œç•ªèŒ„å·¥ä½œæ³•ä¹Ÿæ˜¯æ¯25åˆ†é’Ÿå¥–åŠ±è‡ªå·±ä¸€æ¬¡ã€‚</p><h2 id="5-æå‡æ•ˆç‡çš„å‰æï¼šé€‰æ‹©åˆé€‚çš„ç›®æ ‡å’Œé€‰æ‹©åˆç†çš„ä»»åŠ¡"><a href="#5-æå‡æ•ˆç‡çš„å‰æï¼šé€‰æ‹©åˆé€‚çš„ç›®æ ‡å’Œé€‰æ‹©åˆç†çš„ä»»åŠ¡" class="headerlink" title="5.æå‡æ•ˆç‡çš„å‰æï¼šé€‰æ‹©åˆé€‚çš„ç›®æ ‡å’Œé€‰æ‹©åˆç†çš„ä»»åŠ¡"></a>5.æå‡æ•ˆç‡çš„å‰æï¼šé€‰æ‹©åˆé€‚çš„ç›®æ ‡å’Œé€‰æ‹©åˆç†çš„ä»»åŠ¡</h2><p>åœ¨é«˜ä¸­ï¼Œç”šè‡³åœ¨å¤§å­¦ï¼Œæˆ‘ä»¬åªéœ€è¦å°†è¯¾æœ¬ä¸Šçš„å†…å®¹ã€è¯¾ç¨‹çš„ä¹ é¢˜ç†Ÿç»ƒæŒæ¡ï¼Œå°±èƒ½å¤Ÿå¾—åˆ°è‡ªå·±æ»¡æ„çš„ã€ä¸­ç­‰åä¸Šçš„æˆç»©ã€‚</p><p>ä½†æ˜¯å¦‚æœå¯¹è‡ªå·±è¦æ±‚é«˜ä¸€ç‚¹ï¼Œå°±éœ€è¦å¯¹è‡ªå·±è¿›è¡Œæ·±å…¥çš„å‰–æï¼Œç”šè‡³å¯¹æœªæ¥åšå‡ºè§„åˆ’ï¼Œä»¥10å¹´ã€20å¹´ä¸ºé•¿è¿œçš„ç›®æ ‡ã€‚</p><p>è™½ç„¶å¾ˆå¤šäººé¼“å¹â€œæŠ€å¤šä¸å‹èº«â€ã€â€œç°åœ¨å­¦åˆ°çš„å°†æ¥æ—©æ™šéƒ½ä¼šç”¨åˆ°ï¼Œæ‰€ä»¥åº”è¯¥ä¸æ±‚ç”šè§£çš„ç»ˆèº«å­¦ä¹ â€ï¼Œä½†æ˜¯æˆ‘ä»¬åº”å½“æ³¨æ„å­¦ä¹ çš„æ•ˆç‡ã€‚åŒæ ·çš„æ—¶é—´ï¼Œå¦‚æœåšæŒåä»¶äº‹ï¼Œæœªå¿…èƒ½åšåˆ°å°½å¦‚äººæ„ï¼›ä½†æ˜¯åªåšä¸€ä»¶äº‹ï¼Œå°±å¯ä»¥è®©è‡ªå·±å‡ºåï¼Œè®©åˆ«äººæ•¬ä½©ï¼Œæœ€ä¸æµä¹Ÿè®©è‡ªå·±å……æ»¡è‡ªä¿¡ã€‚</p><p>å¦ç™½æ¥è¯´ï¼Œè¿™ä¸ªç¬¬äº”ç‚¹æ°æ°æ˜¯æˆ‘æœ€åº”è¯¥æ€è€ƒçš„ä¸€ç‚¹ã€‚</p><hr><p>|: æ¥ä¸‹æ¥çš„æ—¥å­æˆ‘ä¼šåšæŒå®è·µï¼Œäº‰å–è®©è‡ªå·±çš„æ•ˆç‡èƒ½å¤Ÿå¾—åˆ°æå‡ã€‚:|</p><hr><p>ç›®å½•ï¼š</p><ul><li>å®Œç¾ä¸»ä¹‰</li></ul><ul><li>è®¾ç½®Deadline</li><li>åˆ†å‰²å­ä»»åŠ¡</li><li>æ­£åé¦ˆ</li><li>è®¾ç½®åˆç†çš„ç›®æ ‡å’Œé€‰æ‹©åˆé€‚çš„ä»»åŠ¡</li></ul>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
    <tags>
      
      <tag>procrastination</tag>
      
      <tag>study method</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Coreutilsé‡æ–°ç¼–è¯‘æ–¹æ³•</title>
    <link href="/2019/04/14/Coreutils%E9%87%8D%E6%96%B0%E7%BC%96%E8%AF%91%E6%96%B9%E6%B3%95/"/>
    <url>/2019/04/14/Coreutils%E9%87%8D%E6%96%B0%E7%BC%96%E8%AF%91%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="Coreutilsé‡æ–°ç¼–è¯‘æ–¹æ³•"><a href="#Coreutilsé‡æ–°ç¼–è¯‘æ–¹æ³•" class="headerlink" title="Coreutilsé‡æ–°ç¼–è¯‘æ–¹æ³•"></a>Coreutilsé‡æ–°ç¼–è¯‘æ–¹æ³•</h1><ol><li>ä¸‹è½½coreutilsï¼Œåœ¨Linuxç³»ç»Ÿä¸‹è§£å‹</li></ol><p><img src="/2019/04/14/Coreutils%E9%87%8D%E6%96%B0%E7%BC%96%E8%AF%91%E6%96%B9%E6%B3%95/ä¸‹è½½coreutilsè§£å‹.png" alt="ä¸‹è½½coreutilsè§£å‹"></p><ol><li>è¿è¡ŒæŒ‡ä»¤ <code>./configure</code></li></ol><p><img src="/2019/04/14/Coreutils%E9%87%8D%E6%96%B0%E7%BC%96%E8%AF%91%E6%96%B9%E6%B3%95/è¿è¡ŒæŒ‡ä»¤.png" alt="è¿è¡ŒæŒ‡ä»¤"></p><ol><li><p>è¿è¡Œ <code>make</code></p></li><li><p>è¿›å…¥srcæ–‡ä»¶å¤¹ï¼ŒæŒ‘é€‰æ‚¨è¦ä¿®æ”¹çš„æ–‡ä»¶ï¼Œæˆ‘ä»¥pwd.cä¸ºä¾‹ï¼Œå°†å…¶å¤åˆ¶åˆ°æˆ‘çš„ä¸ªäººæ–‡ä»¶å¤¹</p></li><li><p>ä¿®æ”¹pwd.cï¼Œå°†å…¶å†…éƒ¨æ‰€æœ‰å¸¦â€œVERSIONâ€çš„è¡Œå…¨éƒ¨æ³¨é‡Šæ‰</p></li><li><p>è¿è¡ŒæŒ‡ä»¤1</p><pre><code>$ gcc -E -I ~/MyCode/coreutils-8.30/lib/ -I ~/MyCode/coreutils-8.30/ -I ~/MyCode/coreutils-8.30/src pwd.c -o pwd.i</code></pre></li><li><p>è¿è¡ŒæŒ‡ä»¤2</p><pre><code>$ gcc -c pwd.i -o pwd.o</code></pre></li><li><p>è¿è¡ŒæŒ‡ä»¤3</p><pre><code>$ gcc -L ~/MyCode/coreutils-8.30/lib/ -L /usr/lib/ pwd.o -o pwd -lcoreutils -lcrypt</code></pre></li><li><p>æ‰§è¡Œ<code>./pwd</code><br>å…¶ä»–æ–‡ä»¶åŒç†</p></li></ol>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
    <tags>
      
      <tag>compiler</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é…ç½®hexo+GitHub Pagesçºªå®</title>
    <link href="/2019/04/14/%E9%85%8D%E7%BD%AEhexo+GitHub%20Pages%E7%BA%AA%E5%AE%9E/"/>
    <url>/2019/04/14/%E9%85%8D%E7%BD%AEhexo+GitHub%20Pages%E7%BA%AA%E5%AE%9E/</url>
    
    <content type="html"><![CDATA[<h1 id="é…ç½®hexo-GitHub-Pagesçºªå®"><a href="#é…ç½®hexo-GitHub-Pagesçºªå®" class="headerlink" title="é…ç½®hexo+GitHub Pagesçºªå®"></a>é…ç½®hexo+GitHub Pagesçºªå®</h1><p>æƒ³å‘åšå®¢ä¸å®¹æ˜“ï¼ŒæŠ˜è…¾äº†å¤§åŠå¤©æ€»ç®—æ‰“é€šäº†ä¸€æ¡è·¯ã€‚</p><p>æˆ‘ä¸€ç›´æœ‰å°†è‡ªå·±åŒ®ä¹çš„çŸ¥è¯†ä»˜è¯¸äºçº¸é¢çš„å†²åŠ¨ã€‚é¦–å…ˆæˆ‘åœ¨ä¸FTKåŒå­¦äº¤æµçš„è¿‡ç¨‹ä¸­äº†è§£åˆ°åŒæ€§äº¤å‹ç½‘ç«™GitHubå¯ä»¥æ­å»ºä¸ªäººåšå®¢ï¼Œäºæ˜¯ä»Šå¤©è¯•ç€æ¢ç´¢äº†ä¸€ä¸‹å­ã€‚æ€ä¹ˆè¯´å‘¢ï¼Œæ²¡æƒ³åˆ°å‘è¿™ä¹ˆå¤šï¼Ÿï¼Ÿï¼Ÿ</p><p>æœ¬æ–‡æ—¨åœ¨è®°å½•æˆ‘ä»é›¶å¼€å§‹å»ºç«‹ä¸ªäººåšå®¢çš„è¿‡ç¨‹ï¼Œè¿˜æ˜¯æœ‰ä¸€å®šé—¨æ§›çš„ï¼Œå¦‚æœå¯¹å¤§å®¶èƒ½æœ‰ä¸€ç‚¹ç‚¹å¸®åŠ©é‚£å°±å¤ªå¥½äº†ã€‚</p><h1 id="è·å¾—ä¸ªäººç½‘ç«™åŸŸåæ–¹æ³•"><a href="#è·å¾—ä¸ªäººç½‘ç«™åŸŸåæ–¹æ³•" class="headerlink" title="è·å¾—ä¸ªäººç½‘ç«™åŸŸåæ–¹æ³•"></a>è·å¾—ä¸ªäººç½‘ç«™åŸŸåæ–¹æ³•</h1><p>æ³¨å†Œgithubå³å¯ï¼Œå®˜ç½‘<code>www.github.com</code>ï¼Œä¹‹åæ–°å»ºrepositoryï¼Œåå­—ä¸ºâ€œä½ çš„ç”¨æˆ·å.github.ioâ€ã€‚æ‰€ä»¥è¯´ç”¨æˆ·åå¾ˆé‡è¦ï¼Œä½ è¦èµ·ä¸ªqqå·åšgithubåå­—é‚£æˆ‘ä¼°è®¡æ²¡äººèƒ½è®°ä½ä½ çš„åšå®¢åï¼Œæ¯•ç«Ÿä¸ªäººåŸŸååªèƒ½å’Œç”¨æˆ·åä¸€æ ·ã€‚è®°ä½é¡¹ç›®ä¸€å®šè¦è®¾ç½®æˆå…¬æœ‰publicå•Šï¼Œåšå®¢æ˜¯ç»™å¤§å®¶çœ‹çš„å˜›ï¼Œå­¤èŠ³è‡ªèµå°±ä¸å¥½ç©äº†ã€‚</p><p>åˆšå¼€å§‹ä½ çš„é¡¹ç›®ï¼ˆrepositoryï¼‰é‡Œé¢é™¤äº†README.mdéƒ½æ²¡æœ‰ï¼Œä½†æ˜¯ä¸ç”¨æ€•ã€‚</p><h1 id="å®‰è£…nodejsã€gitã€hexoæ–¹æ³•"><a href="#å®‰è£…nodejsã€gitã€hexoæ–¹æ³•" class="headerlink" title="å®‰è£…nodejsã€gitã€hexoæ–¹æ³•"></a>å®‰è£…nodejsã€gitã€hexoæ–¹æ³•</h1><p>å…ˆä¸‹è½½Gitï¼ŒGitæ˜¯ä»€ä¹ˆï¼ŸGitæ˜¯ä»£ç æ‰˜ç®¡å·¥å…·ã€‚Gitçš„ç‰¹ç‚¹æ˜¯èƒ½å¤Ÿè®©å¤šäººä¸€èµ·å¼€å‘ä¸€æ¬¾è½¯ä»¶ã€‚å…·ä½“æ€ä¹ˆå®ç°çš„ç•¥å»ä¸è¡¨ï¼Œæ€»ä¹‹Gitçš„æ€æƒ³å°±æ˜¯å¤§å®¶ä¸€èµ·è´¡çŒ®ä»£ç ï¼Œé€šè¿‡åˆç†çš„ç»„ç»‡æ–¹å¼ä¿è¯ä»£ç æäº¤çš„æœ‰åºå’Œè´¨é‡çš„ç¨³å®šï¼ŒåŒæ—¶ä¿å­˜å†å²çš„ä»£ç è®°å½•é˜²æ­¢ç°åœ¨çš„ç‰ˆæœ¬å´©åã€‚ä½†æ˜¯Gitçš„ç”¨é€”æ—©å·²ä¸é™äºç¨‹åºå‘˜åœˆå­äº†ï¼Œèµ·ç åœ¨æˆ‘çœ‹æ¥Gitç”¨æ¥å†™ä¹¦ã€ç¿»è¯‘ã€å†™æ–‡æ¡£ç­‰ç­‰éƒ½æ˜¯æä½³çš„ï¼Œä»»ä½•éœ€è¦å¤šäººè¿œç¨‹åä½œçš„é¡¹ç›®éƒ½åº”è¯¥å°è¯•ä½¿ç”¨Gitã€‚ç›®å‰GitHubæ˜¯å…¨ç½‘æœ€å¤§çš„ä»£ç æ‰˜ç®¡å¹³å°ã€‚è‡ªä»GitHubèƒŒåçš„é‡‘ä¸»å¾®è½¯çˆ¸çˆ¸ï¼ˆä¸€ç‚¹ä¹Ÿä¸å¾®ï¼Œä¸€ç‚¹ä¹Ÿä¸è½¯ï¼‰è´¢å¤§æ°”ç²—çš„å®£å¸ƒå¯ä»¥å…è´¹æ‰˜ç®¡ç§äººé¡¹ç›®åï¼Œæ‰˜ç®¡å¹³å°çš„éšç§æ€§å¾—åˆ°äº†ä¿è¯ï¼Œæˆ‘ä»¬æ›´æ²¡æœ‰ç†ç”±ä¸è¯•ä¸€è¯•GitHubå•¦ï¼</p><p>   OS: Windows 10 ~ 7å‡å¯</p><p>   <a href="https://hexo.io/zh-tw/">Hexo</a>: 3.3.1</p><p>   <a href="https://nodejs.org/en/">Node.js</a>: 6.10.2 LTS</p><p>   <a href="https://desktop.github.com/">Github Desktop</a></p><p>   <a href="https://git-scm.com/download/win">Git</a>é€‰æ‹©64ä½çš„å®‰è£…åŒ…ï¼Œä¸‹è½½åå®‰è£…</p><p>   æ–°å¢ä¸€ä¸ªä»“åº“(Repositories)ï¼Œä»“åº“åç§°ä¸º <code>yourname.github.io</code> [yournameæ˜¯ä½ çš„è´¦å·]ã€‚<br>   å¼€å¯åˆšå®‰è£…å¥½çš„ Github Desktop ï¼Œå¹¶å°†åˆšåˆ›å¥½çš„ä»“åº“å­˜åˆ°æœ¬åœ°ç«¯ã€‚<br>   ç„¶åå³é”®åˆšæ‹‰ä¸‹æ¥çš„ä»“åº“ï¼Œé€‰å– Open in Git Shell æ‰“å¼€ Git bash(optionå¯é€‰)ï¼Œæ‰§è¡ŒæŒ‡ä»¤å°† Github ä¸Šçš„ä»“åº“æ‹‰åˆ°æœ¬åœ°ç«¯ã€‚</p><pre><code>$ git pull origin master</code></pre><p>Github Desktop å³ä¸Šçš„ Sync æŒ‰é’®å…·æœ‰ pull/push åŠŸèƒ½ï¼Œä¸æƒ³æ‰“æŒ‡ä»¤å¯ä»¥å¤šå°è¯•ã€‚<br>ä½¿ç”¨ Github Desktop çš„å¥½å¤„æ˜¯ä¸å¿…åƒå…¶ä»–æ•™å­¦ä¸€æ ·ï¼Œä¸éœ€è¦é…ç½® SSH Key å’Œ è®¾å®š origin ä½ç½®è·¯å¾„ï¼Œçœäº†ä¸¤ä¸ªæ­¥éª¤ã€‚<br>å®‰è£…å¥½ Node.js åï¼Œå°±èƒ½ä½¿ç”¨ npm å®‰è£… hexoã€‚</p><pre><code>$ npm install -g hexo-cli</code></pre><p>è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤å¯æŸ¥çœ‹ç‰ˆæœ¬ã€‚</p><pre><code>$ hexo version</code></pre><p>æ¥ä¸‹æ¥ï¼Œä¾åºè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œåˆå§‹åŒ–æˆ‘ä»¬çš„ Blogã€‚</p><pre><code># git bash ä¸Šé¢çš„è·¯å¾„å¤§æ¦‚é•¿è¿™æ ·You-PC@You  /e/Documents/GitHub/yourname.github.io (master)$ hexo init        # åˆå§‹åŒ– blog# è¾“å…¥ä¸Šé¢é‚£ä¸ªæŒ‡ä»¤å hexo ä¼šäº§ç”Ÿæ–°çš„ .gitç›–æ‰æ—§çš„ .git$ git init              # æ‰€ä»¥å°±é‡æ–°äº§ç”Ÿä¸€ä¸ª .git$ npm install        # å®‰è£…ç›¸å…³å¥—ä»¶$ hexo g        # äº§ç”Ÿé™æ€é¡µé¢$ hexo s        # å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨</code></pre><p>ç½‘å€åˆ—è¾“å…¥ <code>http://localhost:4000</code> ï¼Œå°±èƒ½è§‚çœ‹ Blog äº†ã€‚<br>é¢„è®¾ä¼šæœ‰ä¸€ä¸ª Hello World æ–‡ç« ã€‚<br>åˆ°æˆ‘ä»¬æœ¬åœ° yourname.github.io çš„æ–‡ä»¶å¤¹ä¸­èƒ½æ‰¾åˆ° _config.yml æ–‡ä»¶ã€‚<br>è¿™æ˜¯ Hexo çš„å…¨å±€é…ç½®æ–‡ä»¶ã€‚</p><pre><code># Deploymentdeploy:  type: git  repository: git@github.com:yourname/yourname.github.io.git  branch: master</code></pre><p>è¿™è¾¹æ˜¯ YAML è¯­æ³•ï¼Œå†’å·åé¢è®°å¾—ç©ºä¸€æ ¼ï¼Œç…§ä¸Šé¢çš„è®¾å®šè¾“å…¥ï¼Œä»“åº“çš„ SSH åœ°å€å¦‚ä¸‹å›¾å¯è·å¾—ã€‚<br>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… hexo-deployer-gitï¼Œæ²¡å®‰è£…å¥—ä»¶å‰è¾“å…¥ hexo d ä¼šå‡ºç° Errorã€‚</p><pre><code>$ npm install hexo-deployer-git --save</code></pre><p>äº§ç”Ÿé™æ€é¡µé¢åï¼Œéƒ¨ç½²åˆ° Githubã€‚</p><pre><code>$ hexo d -g     # ç­‰åŒè¾“å…¥ hexo g å’Œ hexo d æŒ‡ä»¤</code></pre><p>å†æ¥å°±å¯ä»¥ä¸Š <code>https://yourname.github.io/</code> æŸ¥çœ‹ Blog äº†ã€‚</p><h2 id="å¸¸ç”¨-Hexo-æŒ‡ä»¤"><a href="#å¸¸ç”¨-Hexo-æŒ‡ä»¤" class="headerlink" title="å¸¸ç”¨ Hexo æŒ‡ä»¤"></a>å¸¸ç”¨ Hexo æŒ‡ä»¤</h2><p>å†™æ–°æ–‡ç« </p><pre><code>$ hexo new &quot;postName&quot;         # äº§ç”Ÿæ–°çš„æ–‡ç« $ hexo new page &quot;pageName&quot;    # äº§ç”Ÿæ–°çš„é¡µé¢</code></pre><p>Hexoæä¾›äº†å¸¸ç”¨å‘½ä»¤çš„ç®€å†™</p><pre><code>$ hexo n == hexo new           # äº§ç”Ÿæ–°çš„ post/page/draft$ hexo g == hexo generate      # äº§ç”Ÿé™æ€é¡µé¢$ hexo s == hexo server        # å¯åŠ¨æœ¬åœ°æµè§ˆ$ hexo d == hexo deploy        # éƒ¨ç½²æ–‡ä»¶è‡³ Github ä¸Š</code></pre><p>æŒ‡ä»¤ç»„åˆ</p><pre><code>$ hexo d -g    # äº§ç”Ÿé™æ€æ–‡ä»¶åï¼Œéƒ¨ç½² blog$ hexo s -g    # äº§ç”Ÿé™æ€æ–‡ä»¶åï¼Œé¢„è§ˆ blog</code></pre><h1 id="å„ç§å‘çš„å¤„ç†æ–¹æ³•"><a href="#å„ç§å‘çš„å¤„ç†æ–¹æ³•" class="headerlink" title="å„ç§å‘çš„å¤„ç†æ–¹æ³•"></a>å„ç§å‘çš„å¤„ç†æ–¹æ³•</h1><h2 id="Hexo-æ— æ³•ç”Ÿæˆ-index-html"><a href="#Hexo-æ— æ³•ç”Ÿæˆ-index-html" class="headerlink" title="Hexo æ— æ³•ç”Ÿæˆ index.html"></a>Hexo æ— æ³•ç”Ÿæˆ index.html</h2><p>åœ¨åˆšåˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®åï¼Œ ä½ è¿è¡Œ <code>hexo g</code>ï¼Œæœ‰æ—¶å€™ hexo å¹¶ä¸ä¼šç”Ÿæˆ <code>index.html</code> å’Œå…¶ä»–ä¸€äº›é™æ€æ–‡ä»¶ã€‚ è¿™ä¸€èˆ¬æ˜¯æ²¡æœ‰åˆå§‹åŒ–å®Œå…¨çš„åŸå› , æœ‰äº›æ’ä»¶æ²¡æœ‰å®‰è£…</p><ol><li>æŸ¥çœ‹ npm æ’ä»¶ç¼ºå¤±æƒ…å†µ</li></ol><pre><code>$ npm ls --depth 0</code></pre><p>è¿™æ—¶ä¸€èˆ¬ä¼šæé†’ä½ æœ‰æ’ä»¶æ²¡æœ‰è£…ã€‚</p><pre><code>npm ERROR! missing xxx</code></pre><ol><li>å®‰è£…ç¼ºå¤±æ’ä»¶</li></ol><p>å¦‚æœä½ çš„æ’ä»¶éƒ½åœ¨ <code>packages.json</code> é‡Œï¼Œ å¯ä»¥ç®€å•é€šè¿‡å¦‚ä¸‹å‘½ä»¤å®‰è£…</p><pre><code>$ npm install --save</code></pre><p>è¦æ˜¯æ²¡æœ‰ï¼Œ å°±ä¾æ¬¡å°†æ‰€æœ‰ç¼ºå¤±çš„æ’ä»¶å®‰è£…ä¸Š</p><pre><code>$ npm install --save jquery jsdom [xxx ...]</code></pre><ol><li>é‡æ–°ç”Ÿæˆé™æ€æ–‡ä»¶</li></ol><p>å®‰è£…å¥½åï¼Œæ‰§è¡Œ <code>hexo g</code> å‘½ä»¤åº”è¯¥å°±å¯ä»¥æ­£å¸¸ç”Ÿæˆå®Œæ•´åšå®¢äº†ã€‚</p><h2 id="hexo-deployä¸ä¸Šå»ï¼Œæ˜æ˜æœ¬åœ°èƒ½çœ‹ä½†æ˜¯è”ç½‘åæ­»æ´»404"><a href="#hexo-deployä¸ä¸Šå»ï¼Œæ˜æ˜æœ¬åœ°èƒ½çœ‹ä½†æ˜¯è”ç½‘åæ­»æ´»404" class="headerlink" title="hexo deployä¸ä¸Šå»ï¼Œæ˜æ˜æœ¬åœ°èƒ½çœ‹ä½†æ˜¯è”ç½‘åæ­»æ´»404"></a>hexo deployä¸ä¸Šå»ï¼Œæ˜æ˜æœ¬åœ°èƒ½çœ‹ä½†æ˜¯è”ç½‘åæ­»æ´»404</h2><p><img src="/2019/04/14/%E9%85%8D%E7%BD%AEhexo+GitHub%20Pages%E7%BA%AA%E5%AE%9E/github-page-404.png" alt="github-page-404"></p><ol><li><p>é¦–å…ˆæœ‰å¯èƒ½æ˜¯ç¯å¢ƒæ²¡å®‰è£…å®Œå…¨ã€‚</p></li><li><p>å…¶æ¬¡ï¼Œå¯èƒ½æ˜¯config.ymlä¸­deployä¸å®Œå…¨ï¼Œåº”ä¸ºhttpsé“¾æ¥ï¼Œæ­¤æ—¶åˆ é™¤æ ¹ç›®å½•ä¸‹.deploy_gitæ–‡ä»¶å¤¹åé‡æ–°hexo deployå³å¯<br><img src="/2019/04/14/%E9%85%8D%E7%BD%AEhexo+GitHub%20Pages%E7%BA%AA%E5%AE%9E/config-yml-deploy-not-ready.png" alt="config-yml-deploy-not-ready"><br><img src="/2019/04/14/%E9%85%8D%E7%BD%AEhexo+GitHub%20Pages%E7%BA%AA%E5%AE%9E/config-yml-deploy-ready.png" alt="config-yml-deploy-ready"></p></li><li><p>å†æ¬¡ï¼Œæœªä½¿ç”¨gitçš„bashï¼Œä¼šæç¤ºæƒé™ä¸å¤Ÿ</p></li><li><p>æœ€åï¼Œæ²¡æœ‰CNAMEï¼ŒCNAMEåº”ä½äºsourceæ–‡ä»¶å¤¹å†…ï¼Œæ–°å»ºæ–‡æœ¬æ–‡ä»¶CNAMEï¼Œå†…å®¹ä¸ºä½ çš„åŸŸåï¼Œusername.github.ioå³å¯ã€‚CNAMEä¸åº”è¯¥æœ‰åç¼€åã€‚å…¶å®è¿™ä¸€æ­¥åº”è¯¥æ˜¯å¤šä½™çš„ï¼Œå› ä¸ºåŸŸåéƒ½ä¼šè‡ªåŠ¨è·³è½¬ã€‚</p></li><li><p>å¦å¤–ï¼Œç›®å‰GitHubè¿˜æ²¡è¢«å¢™ï¼Œä½†ä¸æ’é™¤å°†æ¥è¢«éš”ç¦»çš„å¯èƒ½ã€‚</p><h2 id="hexo-nextä¸»é¢˜ä¸‹å‡ºç°å¾·æ–‡"><a href="#hexo-nextä¸»é¢˜ä¸‹å‡ºç°å¾·æ–‡" class="headerlink" title="hexo nextä¸»é¢˜ä¸‹å‡ºç°å¾·æ–‡"></a>hexo nextä¸»é¢˜ä¸‹å‡ºç°å¾·æ–‡</h2><p>æ ¹ç›®å½•themeæ–‡ä»¶å¤¹ï¼Œä½ æ­£åœ¨ä½¿ç”¨çš„ä¸»é¢˜å†…çš„config.ymlå†…languageè¯æ¡åŠ å±æ€§zh-CNï¼Œä¸çŸ¥é“å“ªä¸ªlanguageå°±å…¨åŠ ã€‚</p><h2 id="ç™»å½•è‡ªå·±çš„åŸŸåï¼Œå‘ç°ä¼˜å…ˆä»¥æ–‡æœ¬æ–¹å¼æ˜¾ç¤ºREADME-md"><a href="#ç™»å½•è‡ªå·±çš„åŸŸåï¼Œå‘ç°ä¼˜å…ˆä»¥æ–‡æœ¬æ–¹å¼æ˜¾ç¤ºREADME-md" class="headerlink" title="ç™»å½•è‡ªå·±çš„åŸŸåï¼Œå‘ç°ä¼˜å…ˆä»¥æ–‡æœ¬æ–¹å¼æ˜¾ç¤ºREADME.md"></a>ç™»å½•è‡ªå·±çš„åŸŸåï¼Œå‘ç°ä¼˜å…ˆä»¥æ–‡æœ¬æ–¹å¼æ˜¾ç¤ºREADME.md</h2><p>README.mdåº”è¯¥ä½äºsourceå†…ï¼Œå¹¶ä¸”æ ¹ç›®å½•config.ymlä¸­skip_renderä¸ºREADME.md</p></li></ol><p><img src="/2019/04/14/%E9%85%8D%E7%BD%AEhexo+GitHub%20Pages%E7%BA%AA%E5%AE%9E/list-of-hexo-on-github.png" alt="list-of-hexo-on-github"></p><h1 id="éœ€è¦çš„ç¯å¢ƒï¼š"><a href="#éœ€è¦çš„ç¯å¢ƒï¼š" class="headerlink" title="éœ€è¦çš„ç¯å¢ƒï¼š"></a>éœ€è¦çš„ç¯å¢ƒï¼š</h1><ol><li>GitHubè´¦å·</li><li>å®‰è£…nodejsç¯å¢ƒ</li><li>å®‰è£…Gitç¯å¢ƒ</li><li>windows10 or 7</li></ol><h1 id="2020å¹´1æœˆ11æ—¥æ›´æ–°ï¼š"><a href="#2020å¹´1æœˆ11æ—¥æ›´æ–°ï¼š" class="headerlink" title="2020å¹´1æœˆ11æ—¥æ›´æ–°ï¼š"></a>2020å¹´1æœˆ11æ—¥æ›´æ–°ï¼š</h1><p>è®¸ä¹…ä¸å†™åšå®¢ï¼Œä»Šæ—¥å‘ç°é‡è£…ç³»ç»Ÿåçš„æ–°ç”µè„‘æ— æ³•æ­£å¸¸å‘å¸ƒå’Œæ›´æ–°åšå®¢å†…å®¹ã€‚äº‹å®ä¸Šæˆ‘çš„å†…å®¹éƒ½ä¸Šä¼ åˆ°æˆ‘çš„repositoryä¸Šäº†ï¼Œæˆ‘åªéœ€è¦è°ƒæ•´å¥½ä¸‹è½½çš„åˆ†æ”¯å°±å¯ä»¥äº†ã€‚å…·ä½“è¯·çœ‹<a href="https://www.zhihu.com/question/21193762">å‚è€ƒæ–‡çŒ®</a>ã€‚å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</p><p>é¦–å…ˆç¡®è®¤ä½ çš„å“ªä¸ªåˆ†æ”¯æ˜¯æœ€å…¨çš„ã€‚æˆ‘çš„æ˜¯hexoåˆ†æ”¯ä¿å­˜æ‰€æœ‰åšæ–‡ï¼Œmasteråˆ†æ”¯åªé€‚ç”¨äºç½‘é¡µæ¸²æŸ“ã€‚å› æ­¤æˆ‘è¿ç§»ç”µè„‘éœ€è¦ä¸‹è½½hexoåˆ†æ”¯ã€‚</p><p>è°ƒæ•´åˆ°hexoåˆ†æ”¯çš„æœ¬åœ°ç›®å½•ï¼Œåœ¨git bashä¸‹æ‰§è¡Œ<br><code>npm install hexo</code><br><code>npm install</code> # ä¸‹è½½å’Œæ›´æ–°éœ€è¦çš„åº“<br><code>npm install hexo-deployer-git</code><br>ä¸éœ€è¦æ‰§è¡Œhexo initã€‚</p><p>ç„¶åä¸‹è½½ï¼Œè¾“å…¥<br><code>git pull origin hexo</code></p><p>å¦‚æœæç¤ºæŠ¥é”™ï¼Œæ˜¾ç¤ºä½ æœ¬åœ°å·²ç»æœ‰ä¿®æ”¹ï¼Œåˆ™è¾“å…¥ä¸‹åˆ—å‘½ä»¤æ”¾å¼ƒä¿®æ”¹ï¼š<br><code>git reset --hard</code><br><code>git pull origin hexo</code></p><p>ç°åœ¨ä½ çš„æœ¬åœ°hexoåˆ†æ”¯å†…åº”è¯¥ä¸‹è½½äº†å·²ç»ä¸Šä¼ è¿‡çš„æ‰€æœ‰åšå®¢ã€‚</p><h1 id="2020å¹´10æœˆ23æ—¥æ›´æ–°ï¼š"><a href="#2020å¹´10æœˆ23æ—¥æ›´æ–°ï¼š" class="headerlink" title="2020å¹´10æœˆ23æ—¥æ›´æ–°ï¼š"></a>2020å¹´10æœˆ23æ—¥æ›´æ–°ï¼š</h1><p>npmä¸‹è½½æ…¢çš„è¯ï¼Œå¯ä»¥å…ˆ<br><code>npm install cnpm</code><br>ç„¶åå°†æ‰€æœ‰npmæŒ‡ä»¤æ›¿ä»£ä¸ºcnpm</p>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
    <tags>
      
      <tag>github pages</tag>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æˆ‘çš„ç¬¬ä¸€ç¯‡åšæ–‡</title>
    <link href="/2019/04/13/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E6%96%87%E5%97%B7%E5%85%84%E5%BC%9F%E7%9B%9F/"/>
    <url>/2019/04/13/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E6%96%87%E5%97%B7%E5%85%84%E5%BC%9F%E7%9B%9F/</url>
    
    <content type="html"><![CDATA[<p>ç¬¬ä¸€æ¬¡å†™åšå®¢ã€‚ä¸çŸ¥é“å†™å•¥å¥½ã€‚å°±å…ˆHello GitHubå§ï¼<br>æˆ‘çš„ç›®æ ‡æ˜¯æ¯å‘¨å†™ä¸€ç¯‡ã€‚å†…å®¹ä¸é™ã€‚Flagå·²ç»é«˜é«˜ç«‹èµ·æ¥äº†ï¼<br>æœ¬å‘¨è®¡åˆ’ï¼š</p><ol><li>çœ‹å®Œè®ºæ–‡å¹¶ç¿»è¯‘ï¼Œå®ç°è®ºæ–‡çš„æ–¹æ³•ï¼›</li><li>æå®šå´æ©è¾¾æœºå™¨å­¦ä¹ ä½œä¸š1ï¼›</li><li>å°†åœ¨GitHubä¸Šé¢éƒ¨ç½²blogçš„è¿‡ç¨‹æ•´ç†å‘å¸ƒã€‚</li></ol>]]></content>
    
    
    <categories>
      
      <category>record</category>
      
    </categories>
    
    
    <tags>
      
      <tag>github pages</tag>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
